function _mergeNamespaces(fe,K){for(var me=0;me<K.length;me++){const ge=K[me];if(typeof ge!="string"&&!Array.isArray(ge)){for(const xe in ge)if(xe!=="default"&&!(xe in fe)){const ye=Object.getOwnPropertyDescriptor(ge,xe);ye&&Object.defineProperty(fe,xe,ye.get?ye:{enumerable:!0,get:()=>ge[xe]})}}}return Object.freeze(Object.defineProperty(fe,Symbol.toStringTag,{value:"Module"}))}(function(){const K=document.createElement("link").relList;if(K&&K.supports&&K.supports("modulepreload"))return;for(const xe of document.querySelectorAll('link[rel="modulepreload"]'))ge(xe);new MutationObserver(xe=>{for(const ye of xe)if(ye.type==="childList")for(const ve of ye.addedNodes)ve.tagName==="LINK"&&ve.rel==="modulepreload"&&ge(ve)}).observe(document,{childList:!0,subtree:!0});function me(xe){const ye={};return xe.integrity&&(ye.integrity=xe.integrity),xe.referrerPolicy&&(ye.referrerPolicy=xe.referrerPolicy),xe.crossOrigin==="use-credentials"?ye.credentials="include":xe.crossOrigin==="anonymous"?ye.credentials="omit":ye.credentials="same-origin",ye}function ge(xe){if(xe.ep)return;xe.ep=!0;const ye=me(xe);fetch(xe.href,ye)}})();var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(fe){return fe&&fe.__esModule&&Object.prototype.hasOwnProperty.call(fe,"default")?fe.default:fe}var jsxRuntime$1={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var REACT_ELEMENT_TYPE$2=Symbol.for("react.transitional.element"),REACT_FRAGMENT_TYPE$2=Symbol.for("react.fragment");function jsxProd(fe,K,me){var ge=null;if(me!==void 0&&(ge=""+me),K.key!==void 0&&(ge=""+K.key),"key"in K){me={};for(var xe in K)xe!=="key"&&(me[xe]=K[xe])}else me=K;return K=me.ref,{$$typeof:REACT_ELEMENT_TYPE$2,type:fe,key:ge,ref:K!==void 0?K:null,props:me}}reactJsxRuntime_production.Fragment=REACT_FRAGMENT_TYPE$2;reactJsxRuntime_production.jsx=jsxProd;reactJsxRuntime_production.jsxs=jsxProd;jsxRuntime$1.exports=reactJsxRuntime_production;var jsxRuntimeExports=jsxRuntime$1.exports;const jsxRuntime=getDefaultExportFromCjs(jsxRuntimeExports),runtime=_mergeNamespaces({__proto__:null,default:jsxRuntime},[jsxRuntimeExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(fe){function K(Ye,at){var rt=Ye.length;Ye.push(at);e:for(;0<rt;){var Ft=rt-1>>>1,Je=Ye[Ft];if(0<xe(Je,at))Ye[Ft]=at,Ye[rt]=Je,rt=Ft;else break e}}function me(Ye){return Ye.length===0?null:Ye[0]}function ge(Ye){if(Ye.length===0)return null;var at=Ye[0],rt=Ye.pop();if(rt!==at){Ye[0]=rt;e:for(var Ft=0,Je=Ye.length,Wt=Je>>>1;Ft<Wt;){var Kt=2*(Ft+1)-1,Pt=Ye[Kt],Yt=Kt+1,Gt=Ye[Yt];if(0>xe(Pt,rt))Yt<Je&&0>xe(Gt,Pt)?(Ye[Ft]=Gt,Ye[Yt]=rt,Ft=Yt):(Ye[Ft]=Pt,Ye[Kt]=rt,Ft=Kt);else if(Yt<Je&&0>xe(Gt,rt))Ye[Ft]=Gt,Ye[Yt]=rt,Ft=Yt;else break e}}return at}function xe(Ye,at){var rt=Ye.sortIndex-at.sortIndex;return rt!==0?rt:Ye.id-at.id}if(fe.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var ye=performance;fe.unstable_now=function(){return ye.now()}}else{var ve=Date,_e=ve.now();fe.unstable_now=function(){return ve.now()-_e}}var Ee=[],be=[],Ae=1,Se=null,Ce=3,Te=!1,Re=!1,De=!1,Ie=typeof setTimeout=="function"?setTimeout:null,Be=typeof clearTimeout=="function"?clearTimeout:null,Le=typeof setImmediate<"u"?setImmediate:null;function Oe(Ye){for(var at=me(be);at!==null;){if(at.callback===null)ge(be);else if(at.startTime<=Ye)ge(be),at.sortIndex=at.expirationTime,K(Ee,at);else break;at=me(be)}}function Fe(Ye){if(De=!1,Oe(Ye),!Re)if(me(Ee)!==null)Re=!0,nt();else{var at=me(be);at!==null&&Nt(Fe,at.startTime-Ye)}}var Ue=!1,Ne=-1,He=5,ze=-1;function je(){return!(fe.unstable_now()-ze<He)}function Ge(){if(Ue){var Ye=fe.unstable_now();ze=Ye;var at=!0;try{e:{Re=!1,De&&(De=!1,Be(Ne),Ne=-1),Te=!0;var rt=Ce;try{t:{for(Oe(Ye),Se=me(Ee);Se!==null&&!(Se.expirationTime>Ye&&je());){var Ft=Se.callback;if(typeof Ft=="function"){Se.callback=null,Ce=Se.priorityLevel;var Je=Ft(Se.expirationTime<=Ye);if(Ye=fe.unstable_now(),typeof Je=="function"){Se.callback=Je,Oe(Ye),at=!0;break t}Se===me(Ee)&&ge(Ee),Oe(Ye)}else ge(Ee);Se=me(Ee)}if(Se!==null)at=!0;else{var Wt=me(be);Wt!==null&&Nt(Fe,Wt.startTime-Ye),at=!1}}break e}finally{Se=null,Ce=rt,Te=!1}at=void 0}}finally{at?Xe():Ue=!1}}}var Xe;if(typeof Le=="function")Xe=function(){Le(Ge)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,Qe=qe.port2;qe.port1.onmessage=Ge,Xe=function(){Qe.postMessage(null)}}else Xe=function(){Ie(Ge,0)};function nt(){Ue||(Ue=!0,Xe())}function Nt(Ye,at){Ne=Ie(function(){Ye(fe.unstable_now())},at)}fe.unstable_IdlePriority=5,fe.unstable_ImmediatePriority=1,fe.unstable_LowPriority=4,fe.unstable_NormalPriority=3,fe.unstable_Profiling=null,fe.unstable_UserBlockingPriority=2,fe.unstable_cancelCallback=function(Ye){Ye.callback=null},fe.unstable_continueExecution=function(){Re||Te||(Re=!0,nt())},fe.unstable_forceFrameRate=function(Ye){0>Ye||125<Ye?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):He=0<Ye?Math.floor(1e3/Ye):5},fe.unstable_getCurrentPriorityLevel=function(){return Ce},fe.unstable_getFirstCallbackNode=function(){return me(Ee)},fe.unstable_next=function(Ye){switch(Ce){case 1:case 2:case 3:var at=3;break;default:at=Ce}var rt=Ce;Ce=at;try{return Ye()}finally{Ce=rt}},fe.unstable_pauseExecution=function(){},fe.unstable_requestPaint=function(){},fe.unstable_runWithPriority=function(Ye,at){switch(Ye){case 1:case 2:case 3:case 4:case 5:break;default:Ye=3}var rt=Ce;Ce=Ye;try{return at()}finally{Ce=rt}},fe.unstable_scheduleCallback=function(Ye,at,rt){var Ft=fe.unstable_now();switch(typeof rt=="object"&&rt!==null?(rt=rt.delay,rt=typeof rt=="number"&&0<rt?Ft+rt:Ft):rt=Ft,Ye){case 1:var Je=-1;break;case 2:Je=250;break;case 5:Je=1073741823;break;case 4:Je=1e4;break;default:Je=5e3}return Je=rt+Je,Ye={id:Ae++,callback:at,priorityLevel:Ye,startTime:rt,expirationTime:Je,sortIndex:-1},rt>Ft?(Ye.sortIndex=rt,K(be,Ye),me(Ee)===null&&Ye===me(be)&&(De?(Be(Ne),Ne=-1):De=!0,Nt(Fe,rt-Ft))):(Ye.sortIndex=Je,K(Ee,Ye),Re||Te||(Re=!0,nt())),Ye},fe.unstable_shouldYield=je,fe.unstable_wrapCallback=function(Ye){var at=Ce;return function(){var rt=Ce;Ce=at;try{return Ye.apply(this,arguments)}finally{Ce=rt}}}})(scheduler_production);scheduler.exports=scheduler_production;var schedulerExports=scheduler.exports,react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var REACT_ELEMENT_TYPE$1=Symbol.for("react.transitional.element"),REACT_PORTAL_TYPE$2=Symbol.for("react.portal"),REACT_FRAGMENT_TYPE$1=Symbol.for("react.fragment"),REACT_STRICT_MODE_TYPE$1=Symbol.for("react.strict_mode"),REACT_PROFILER_TYPE$1=Symbol.for("react.profiler"),REACT_CONSUMER_TYPE$1=Symbol.for("react.consumer"),REACT_CONTEXT_TYPE$1=Symbol.for("react.context"),REACT_FORWARD_REF_TYPE$1=Symbol.for("react.forward_ref"),REACT_SUSPENSE_TYPE$1=Symbol.for("react.suspense"),REACT_MEMO_TYPE$1=Symbol.for("react.memo"),REACT_LAZY_TYPE$1=Symbol.for("react.lazy"),MAYBE_ITERATOR_SYMBOL$1=Symbol.iterator;function getIteratorFn$1(fe){return fe===null||typeof fe!="object"?null:(fe=MAYBE_ITERATOR_SYMBOL$1&&fe[MAYBE_ITERATOR_SYMBOL$1]||fe["@@iterator"],typeof fe=="function"?fe:null)}var ReactNoopUpdateQueue={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},assign$1=Object.assign,emptyObject={};function Component(fe,K,me){this.props=fe,this.context=K,this.refs=emptyObject,this.updater=me||ReactNoopUpdateQueue}Component.prototype.isReactComponent={};Component.prototype.setState=function(fe,K){if(typeof fe!="object"&&typeof fe!="function"&&fe!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,fe,K,"setState")};Component.prototype.forceUpdate=function(fe){this.updater.enqueueForceUpdate(this,fe,"forceUpdate")};function ComponentDummy(){}ComponentDummy.prototype=Component.prototype;function PureComponent(fe,K,me){this.props=fe,this.context=K,this.refs=emptyObject,this.updater=me||ReactNoopUpdateQueue}var pureComponentPrototype=PureComponent.prototype=new ComponentDummy;pureComponentPrototype.constructor=PureComponent;assign$1(pureComponentPrototype,Component.prototype);pureComponentPrototype.isPureReactComponent=!0;var isArrayImpl$1=Array.isArray,ReactSharedInternals$2={H:null,A:null,T:null,S:null},hasOwnProperty$2=Object.prototype.hasOwnProperty;function ReactElement(fe,K,me,ge,xe,ye){return me=ye.ref,{$$typeof:REACT_ELEMENT_TYPE$1,type:fe,key:K,ref:me!==void 0?me:null,props:ye}}function cloneAndReplaceKey(fe,K){return ReactElement(fe.type,K,void 0,void 0,void 0,fe.props)}function isValidElement(fe){return typeof fe=="object"&&fe!==null&&fe.$$typeof===REACT_ELEMENT_TYPE$1}function escape$1(fe){var K={"=":"=0",":":"=2"};return"$"+fe.replace(/[=:]/g,function(me){return K[me]})}var userProvidedKeyEscapeRegex=/\/+/g;function getElementKey(fe,K){return typeof fe=="object"&&fe!==null&&fe.key!=null?escape$1(""+fe.key):K.toString(36)}function noop$1$2(){}function resolveThenable(fe){switch(fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason;default:switch(typeof fe.status=="string"?fe.then(noop$1$2,noop$1$2):(fe.status="pending",fe.then(function(K){fe.status==="pending"&&(fe.status="fulfilled",fe.value=K)},function(K){fe.status==="pending"&&(fe.status="rejected",fe.reason=K)})),fe.status){case"fulfilled":return fe.value;case"rejected":throw fe.reason}}throw fe}function mapIntoArray(fe,K,me,ge,xe){var ye=typeof fe;(ye==="undefined"||ye==="boolean")&&(fe=null);var ve=!1;if(fe===null)ve=!0;else switch(ye){case"bigint":case"string":case"number":ve=!0;break;case"object":switch(fe.$$typeof){case REACT_ELEMENT_TYPE$1:case REACT_PORTAL_TYPE$2:ve=!0;break;case REACT_LAZY_TYPE$1:return ve=fe._init,mapIntoArray(ve(fe._payload),K,me,ge,xe)}}if(ve)return xe=xe(fe),ve=ge===""?"."+getElementKey(fe,0):ge,isArrayImpl$1(xe)?(me="",ve!=null&&(me=ve.replace(userProvidedKeyEscapeRegex,"$&/")+"/"),mapIntoArray(xe,K,me,"",function(be){return be})):xe!=null&&(isValidElement(xe)&&(xe=cloneAndReplaceKey(xe,me+(xe.key==null||fe&&fe.key===xe.key?"":(""+xe.key).replace(userProvidedKeyEscapeRegex,"$&/")+"/")+ve)),K.push(xe)),1;ve=0;var _e=ge===""?".":ge+":";if(isArrayImpl$1(fe))for(var Ee=0;Ee<fe.length;Ee++)ge=fe[Ee],ye=_e+getElementKey(ge,Ee),ve+=mapIntoArray(ge,K,me,ye,xe);else if(Ee=getIteratorFn$1(fe),typeof Ee=="function")for(fe=Ee.call(fe),Ee=0;!(ge=fe.next()).done;)ge=ge.value,ye=_e+getElementKey(ge,Ee++),ve+=mapIntoArray(ge,K,me,ye,xe);else if(ye==="object"){if(typeof fe.then=="function")return mapIntoArray(resolveThenable(fe),K,me,ge,xe);throw K=String(fe),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(fe).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return ve}function mapChildren(fe,K,me){if(fe==null)return fe;var ge=[],xe=0;return mapIntoArray(fe,ge,"","",function(ye){return K.call(me,ye,xe++)}),ge}function lazyInitializer(fe){if(fe._status===-1){var K=fe._result;K=K(),K.then(function(me){(fe._status===0||fe._status===-1)&&(fe._status=1,fe._result=me)},function(me){(fe._status===0||fe._status===-1)&&(fe._status=2,fe._result=me)}),fe._status===-1&&(fe._status=0,fe._result=K)}if(fe._status===1)return fe._result.default;throw fe._result}var reportGlobalError$1=typeof reportError=="function"?reportError:function(fe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof fe=="object"&&fe!==null&&typeof fe.message=="string"?String(fe.message):String(fe),error:fe});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",fe);return}console.error(fe)};function noop$7(){}react_production.Children={map:mapChildren,forEach:function(fe,K,me){mapChildren(fe,function(){K.apply(this,arguments)},me)},count:function(fe){var K=0;return mapChildren(fe,function(){K++}),K},toArray:function(fe){return mapChildren(fe,function(K){return K})||[]},only:function(fe){if(!isValidElement(fe))throw Error("React.Children.only expected to receive a single React element child.");return fe}};react_production.Component=Component;react_production.Fragment=REACT_FRAGMENT_TYPE$1;react_production.Profiler=REACT_PROFILER_TYPE$1;react_production.PureComponent=PureComponent;react_production.StrictMode=REACT_STRICT_MODE_TYPE$1;react_production.Suspense=REACT_SUSPENSE_TYPE$1;react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ReactSharedInternals$2;react_production.act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production.cache=function(fe){return function(){return fe.apply(null,arguments)}};react_production.cloneElement=function(fe,K,me){if(fe==null)throw Error("The argument must be a React element, but you passed "+fe+".");var ge=assign$1({},fe.props),xe=fe.key,ye=void 0;if(K!=null)for(ve in K.ref!==void 0&&(ye=void 0),K.key!==void 0&&(xe=""+K.key),K)!hasOwnProperty$2.call(K,ve)||ve==="key"||ve==="__self"||ve==="__source"||ve==="ref"&&K.ref===void 0||(ge[ve]=K[ve]);var ve=arguments.length-2;if(ve===1)ge.children=me;else if(1<ve){for(var _e=Array(ve),Ee=0;Ee<ve;Ee++)_e[Ee]=arguments[Ee+2];ge.children=_e}return ReactElement(fe.type,xe,void 0,void 0,ye,ge)};react_production.createContext=function(fe){return fe={$$typeof:REACT_CONTEXT_TYPE$1,_currentValue:fe,_currentValue2:fe,_threadCount:0,Provider:null,Consumer:null},fe.Provider=fe,fe.Consumer={$$typeof:REACT_CONSUMER_TYPE$1,_context:fe},fe};react_production.createElement=function(fe,K,me){var ge,xe={},ye=null;if(K!=null)for(ge in K.key!==void 0&&(ye=""+K.key),K)hasOwnProperty$2.call(K,ge)&&ge!=="key"&&ge!=="__self"&&ge!=="__source"&&(xe[ge]=K[ge]);var ve=arguments.length-2;if(ve===1)xe.children=me;else if(1<ve){for(var _e=Array(ve),Ee=0;Ee<ve;Ee++)_e[Ee]=arguments[Ee+2];xe.children=_e}if(fe&&fe.defaultProps)for(ge in ve=fe.defaultProps,ve)xe[ge]===void 0&&(xe[ge]=ve[ge]);return ReactElement(fe,ye,void 0,void 0,null,xe)};react_production.createRef=function(){return{current:null}};react_production.forwardRef=function(fe){return{$$typeof:REACT_FORWARD_REF_TYPE$1,render:fe}};react_production.isValidElement=isValidElement;react_production.lazy=function(fe){return{$$typeof:REACT_LAZY_TYPE$1,_payload:{_status:-1,_result:fe},_init:lazyInitializer}};react_production.memo=function(fe,K){return{$$typeof:REACT_MEMO_TYPE$1,type:fe,compare:K===void 0?null:K}};react_production.startTransition=function(fe){var K=ReactSharedInternals$2.T,me={};ReactSharedInternals$2.T=me;try{var ge=fe(),xe=ReactSharedInternals$2.S;xe!==null&&xe(me,ge),typeof ge=="object"&&ge!==null&&typeof ge.then=="function"&&ge.then(noop$7,reportGlobalError$1)}catch(ye){reportGlobalError$1(ye)}finally{ReactSharedInternals$2.T=K}};react_production.unstable_useCacheRefresh=function(){return ReactSharedInternals$2.H.useCacheRefresh()};react_production.use=function(fe){return ReactSharedInternals$2.H.use(fe)};react_production.useActionState=function(fe,K,me){return ReactSharedInternals$2.H.useActionState(fe,K,me)};react_production.useCallback=function(fe,K){return ReactSharedInternals$2.H.useCallback(fe,K)};react_production.useContext=function(fe){return ReactSharedInternals$2.H.useContext(fe)};react_production.useDebugValue=function(){};react_production.useDeferredValue=function(fe,K){return ReactSharedInternals$2.H.useDeferredValue(fe,K)};react_production.useEffect=function(fe,K){return ReactSharedInternals$2.H.useEffect(fe,K)};react_production.useId=function(){return ReactSharedInternals$2.H.useId()};react_production.useImperativeHandle=function(fe,K,me){return ReactSharedInternals$2.H.useImperativeHandle(fe,K,me)};react_production.useInsertionEffect=function(fe,K){return ReactSharedInternals$2.H.useInsertionEffect(fe,K)};react_production.useLayoutEffect=function(fe,K){return ReactSharedInternals$2.H.useLayoutEffect(fe,K)};react_production.useMemo=function(fe,K){return ReactSharedInternals$2.H.useMemo(fe,K)};react_production.useOptimistic=function(fe,K){return ReactSharedInternals$2.H.useOptimistic(fe,K)};react_production.useReducer=function(fe,K,me){return ReactSharedInternals$2.H.useReducer(fe,K,me)};react_production.useRef=function(fe){return ReactSharedInternals$2.H.useRef(fe)};react_production.useState=function(fe){return ReactSharedInternals$2.H.useState(fe)};react_production.useSyncExternalStore=function(fe,K,me){return ReactSharedInternals$2.H.useSyncExternalStore(fe,K,me)};react_production.useTransition=function(){return ReactSharedInternals$2.H.useTransition()};react_production.version="19.0.0";react.exports=react_production;var reactExports=react.exports;const React$4=getDefaultExportFromCjs(reactExports),React$5=_mergeNamespaces({__proto__:null,default:React$4},[reactExports]);var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$3=reactExports;function formatProdErrorMessage$1(fe){var K="https://react.dev/errors/"+fe;if(1<arguments.length){K+="?args[]="+encodeURIComponent(arguments[1]);for(var me=2;me<arguments.length;me++)K+="&args[]="+encodeURIComponent(arguments[me])}return"Minified React error #"+fe+"; visit "+K+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function noop$6(){}var Internals={d:{f:noop$6,r:function(){throw Error(formatProdErrorMessage$1(522))},D:noop$6,C:noop$6,L:noop$6,m:noop$6,X:noop$6,S:noop$6,M:noop$6},p:0,findDOMNode:null},REACT_PORTAL_TYPE$1=Symbol.for("react.portal");function createPortal$1(fe,K,me){var ge=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:REACT_PORTAL_TYPE$1,key:ge==null?null:""+ge,children:fe,containerInfo:K,implementation:me}}var ReactSharedInternals$1=React$3.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function getCrossOriginStringAs(fe,K){if(fe==="font")return"";if(typeof K=="string")return K==="use-credentials"?K:""}reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Internals;reactDom_production.createPortal=function(fe,K){var me=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!K||K.nodeType!==1&&K.nodeType!==9&&K.nodeType!==11)throw Error(formatProdErrorMessage$1(299));return createPortal$1(fe,K,null,me)};reactDom_production.flushSync=function(fe){var K=ReactSharedInternals$1.T,me=Internals.p;try{if(ReactSharedInternals$1.T=null,Internals.p=2,fe)return fe()}finally{ReactSharedInternals$1.T=K,Internals.p=me,Internals.d.f()}};reactDom_production.preconnect=function(fe,K){typeof fe=="string"&&(K?(K=K.crossOrigin,K=typeof K=="string"?K==="use-credentials"?K:"":void 0):K=null,Internals.d.C(fe,K))};reactDom_production.prefetchDNS=function(fe){typeof fe=="string"&&Internals.d.D(fe)};reactDom_production.preinit=function(fe,K){if(typeof fe=="string"&&K&&typeof K.as=="string"){var me=K.as,ge=getCrossOriginStringAs(me,K.crossOrigin),xe=typeof K.integrity=="string"?K.integrity:void 0,ye=typeof K.fetchPriority=="string"?K.fetchPriority:void 0;me==="style"?Internals.d.S(fe,typeof K.precedence=="string"?K.precedence:void 0,{crossOrigin:ge,integrity:xe,fetchPriority:ye}):me==="script"&&Internals.d.X(fe,{crossOrigin:ge,integrity:xe,fetchPriority:ye,nonce:typeof K.nonce=="string"?K.nonce:void 0})}};reactDom_production.preinitModule=function(fe,K){if(typeof fe=="string")if(typeof K=="object"&&K!==null){if(K.as==null||K.as==="script"){var me=getCrossOriginStringAs(K.as,K.crossOrigin);Internals.d.M(fe,{crossOrigin:me,integrity:typeof K.integrity=="string"?K.integrity:void 0,nonce:typeof K.nonce=="string"?K.nonce:void 0})}}else K==null&&Internals.d.M(fe)};reactDom_production.preload=function(fe,K){if(typeof fe=="string"&&typeof K=="object"&&K!==null&&typeof K.as=="string"){var me=K.as,ge=getCrossOriginStringAs(me,K.crossOrigin);Internals.d.L(fe,me,{crossOrigin:ge,integrity:typeof K.integrity=="string"?K.integrity:void 0,nonce:typeof K.nonce=="string"?K.nonce:void 0,type:typeof K.type=="string"?K.type:void 0,fetchPriority:typeof K.fetchPriority=="string"?K.fetchPriority:void 0,referrerPolicy:typeof K.referrerPolicy=="string"?K.referrerPolicy:void 0,imageSrcSet:typeof K.imageSrcSet=="string"?K.imageSrcSet:void 0,imageSizes:typeof K.imageSizes=="string"?K.imageSizes:void 0,media:typeof K.media=="string"?K.media:void 0})}};reactDom_production.preloadModule=function(fe,K){if(typeof fe=="string")if(K){var me=getCrossOriginStringAs(K.as,K.crossOrigin);Internals.d.m(fe,{as:typeof K.as=="string"&&K.as!=="script"?K.as:void 0,crossOrigin:me,integrity:typeof K.integrity=="string"?K.integrity:void 0})}else Internals.d.m(fe)};reactDom_production.requestFormReset=function(fe){Internals.d.r(fe)};reactDom_production.unstable_batchedUpdates=function(fe,K){return fe(K)};reactDom_production.useFormState=function(fe,K,me){return ReactSharedInternals$1.H.useFormState(fe,K,me)};reactDom_production.useFormStatus=function(){return ReactSharedInternals$1.H.useHostTransitionStatus()};reactDom_production.version="19.0.0";function checkDCE$1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE$1)}catch(fe){console.error(fe)}}checkDCE$1(),reactDom.exports=reactDom_production;var reactDomExports=reactDom.exports;const ReactDOM$2=getDefaultExportFromCjs(reactDomExports);/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Scheduler=schedulerExports,React$2=reactExports,ReactDOM$1=reactDomExports;function formatProdErrorMessage(fe){var K="https://react.dev/errors/"+fe;if(1<arguments.length){K+="?args[]="+encodeURIComponent(arguments[1]);for(var me=2;me<arguments.length;me++)K+="&args[]="+encodeURIComponent(arguments[me])}return"Minified React error #"+fe+"; visit "+K+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function isValidContainer(fe){return!(!fe||fe.nodeType!==1&&fe.nodeType!==9&&fe.nodeType!==11)}var REACT_LEGACY_ELEMENT_TYPE=Symbol.for("react.element"),REACT_ELEMENT_TYPE=Symbol.for("react.transitional.element"),REACT_PORTAL_TYPE=Symbol.for("react.portal"),REACT_FRAGMENT_TYPE=Symbol.for("react.fragment"),REACT_STRICT_MODE_TYPE=Symbol.for("react.strict_mode"),REACT_PROFILER_TYPE=Symbol.for("react.profiler"),REACT_PROVIDER_TYPE=Symbol.for("react.provider"),REACT_CONSUMER_TYPE=Symbol.for("react.consumer"),REACT_CONTEXT_TYPE=Symbol.for("react.context"),REACT_FORWARD_REF_TYPE=Symbol.for("react.forward_ref"),REACT_SUSPENSE_TYPE=Symbol.for("react.suspense"),REACT_SUSPENSE_LIST_TYPE=Symbol.for("react.suspense_list"),REACT_MEMO_TYPE=Symbol.for("react.memo"),REACT_LAZY_TYPE=Symbol.for("react.lazy"),REACT_OFFSCREEN_TYPE=Symbol.for("react.offscreen"),REACT_MEMO_CACHE_SENTINEL=Symbol.for("react.memo_cache_sentinel"),MAYBE_ITERATOR_SYMBOL=Symbol.iterator;function getIteratorFn(fe){return fe===null||typeof fe!="object"?null:(fe=MAYBE_ITERATOR_SYMBOL&&fe[MAYBE_ITERATOR_SYMBOL]||fe["@@iterator"],typeof fe=="function"?fe:null)}var REACT_CLIENT_REFERENCE=Symbol.for("react.client.reference");function getComponentNameFromType(fe){if(fe==null)return null;if(typeof fe=="function")return fe.$$typeof===REACT_CLIENT_REFERENCE?null:fe.displayName||fe.name||null;if(typeof fe=="string")return fe;switch(fe){case REACT_FRAGMENT_TYPE:return"Fragment";case REACT_PORTAL_TYPE:return"Portal";case REACT_PROFILER_TYPE:return"Profiler";case REACT_STRICT_MODE_TYPE:return"StrictMode";case REACT_SUSPENSE_TYPE:return"Suspense";case REACT_SUSPENSE_LIST_TYPE:return"SuspenseList"}if(typeof fe=="object")switch(fe.$$typeof){case REACT_CONTEXT_TYPE:return(fe.displayName||"Context")+".Provider";case REACT_CONSUMER_TYPE:return(fe._context.displayName||"Context")+".Consumer";case REACT_FORWARD_REF_TYPE:var K=fe.render;return fe=fe.displayName,fe||(fe=K.displayName||K.name||"",fe=fe!==""?"ForwardRef("+fe+")":"ForwardRef"),fe;case REACT_MEMO_TYPE:return K=fe.displayName||null,K!==null?K:getComponentNameFromType(fe.type)||"Memo";case REACT_LAZY_TYPE:K=fe._payload,fe=fe._init;try{return getComponentNameFromType(fe(K))}catch{}}return null}var ReactSharedInternals=React$2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,assign=Object.assign,prefix,suffix;function describeBuiltInComponentFrame(fe){if(prefix===void 0)try{throw Error()}catch(me){var K=me.stack.trim().match(/\n( *(at )?)/);prefix=K&&K[1]||"",suffix=-1<me.stack.indexOf(`
    at`)?" (<anonymous>)":-1<me.stack.indexOf("@")?"@unknown:0:0":""}return`
`+prefix+fe+suffix}var reentry=!1;function describeNativeComponentFrame(fe,K){if(!fe||reentry)return"";reentry=!0;var me=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var ge={DetermineComponentFrameRoot:function(){try{if(K){var Se=function(){throw Error()};if(Object.defineProperty(Se.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Se,[])}catch(Te){var Ce=Te}Reflect.construct(fe,[],Se)}else{try{Se.call()}catch(Te){Ce=Te}fe.call(Se.prototype)}}else{try{throw Error()}catch(Te){Ce=Te}(Se=fe())&&typeof Se.catch=="function"&&Se.catch(function(){})}}catch(Te){if(Te&&Ce&&typeof Te.stack=="string")return[Te.stack,Ce.stack]}return[null,null]}};ge.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var xe=Object.getOwnPropertyDescriptor(ge.DetermineComponentFrameRoot,"name");xe&&xe.configurable&&Object.defineProperty(ge.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var ye=ge.DetermineComponentFrameRoot(),ve=ye[0],_e=ye[1];if(ve&&_e){var Ee=ve.split(`
`),be=_e.split(`
`);for(xe=ge=0;ge<Ee.length&&!Ee[ge].includes("DetermineComponentFrameRoot");)ge++;for(;xe<be.length&&!be[xe].includes("DetermineComponentFrameRoot");)xe++;if(ge===Ee.length||xe===be.length)for(ge=Ee.length-1,xe=be.length-1;1<=ge&&0<=xe&&Ee[ge]!==be[xe];)xe--;for(;1<=ge&&0<=xe;ge--,xe--)if(Ee[ge]!==be[xe]){if(ge!==1||xe!==1)do if(ge--,xe--,0>xe||Ee[ge]!==be[xe]){var Ae=`
`+Ee[ge].replace(" at new "," at ");return fe.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",fe.displayName)),Ae}while(1<=ge&&0<=xe);break}}}finally{reentry=!1,Error.prepareStackTrace=me}return(me=fe?fe.displayName||fe.name:"")?describeBuiltInComponentFrame(me):""}function describeFiber(fe){switch(fe.tag){case 26:case 27:case 5:return describeBuiltInComponentFrame(fe.type);case 16:return describeBuiltInComponentFrame("Lazy");case 13:return describeBuiltInComponentFrame("Suspense");case 19:return describeBuiltInComponentFrame("SuspenseList");case 0:case 15:return fe=describeNativeComponentFrame(fe.type,!1),fe;case 11:return fe=describeNativeComponentFrame(fe.type.render,!1),fe;case 1:return fe=describeNativeComponentFrame(fe.type,!0),fe;default:return""}}function getStackByFiberInDevAndProd(fe){try{var K="";do K+=describeFiber(fe),fe=fe.return;while(fe);return K}catch(me){return`
Error generating stack: `+me.message+`
`+me.stack}}function getNearestMountedFiber(fe){var K=fe,me=fe;if(fe.alternate)for(;K.return;)K=K.return;else{fe=K;do K=fe,K.flags&4098&&(me=K.return),fe=K.return;while(fe)}return K.tag===3?me:null}function getSuspenseInstanceFromFiber(fe){if(fe.tag===13){var K=fe.memoizedState;if(K===null&&(fe=fe.alternate,fe!==null&&(K=fe.memoizedState)),K!==null)return K.dehydrated}return null}function assertIsMounted(fe){if(getNearestMountedFiber(fe)!==fe)throw Error(formatProdErrorMessage(188))}function findCurrentFiberUsingSlowPath(fe){var K=fe.alternate;if(!K){if(K=getNearestMountedFiber(fe),K===null)throw Error(formatProdErrorMessage(188));return K!==fe?null:fe}for(var me=fe,ge=K;;){var xe=me.return;if(xe===null)break;var ye=xe.alternate;if(ye===null){if(ge=xe.return,ge!==null){me=ge;continue}break}if(xe.child===ye.child){for(ye=xe.child;ye;){if(ye===me)return assertIsMounted(xe),fe;if(ye===ge)return assertIsMounted(xe),K;ye=ye.sibling}throw Error(formatProdErrorMessage(188))}if(me.return!==ge.return)me=xe,ge=ye;else{for(var ve=!1,_e=xe.child;_e;){if(_e===me){ve=!0,me=xe,ge=ye;break}if(_e===ge){ve=!0,ge=xe,me=ye;break}_e=_e.sibling}if(!ve){for(_e=ye.child;_e;){if(_e===me){ve=!0,me=ye,ge=xe;break}if(_e===ge){ve=!0,ge=ye,me=xe;break}_e=_e.sibling}if(!ve)throw Error(formatProdErrorMessage(189))}}if(me.alternate!==ge)throw Error(formatProdErrorMessage(190))}if(me.tag!==3)throw Error(formatProdErrorMessage(188));return me.stateNode.current===me?fe:K}function findCurrentHostFiberImpl(fe){var K=fe.tag;if(K===5||K===26||K===27||K===6)return fe;for(fe=fe.child;fe!==null;){if(K=findCurrentHostFiberImpl(fe),K!==null)return K;fe=fe.sibling}return null}var isArrayImpl=Array.isArray,ReactDOMSharedInternals=ReactDOM$1.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,sharedNotPendingObject={pending:!1,data:null,method:null,action:null},valueStack=[],index$5=-1;function createCursor(fe){return{current:fe}}function pop(fe){0>index$5||(fe.current=valueStack[index$5],valueStack[index$5]=null,index$5--)}function push$1(fe,K){index$5++,valueStack[index$5]=fe.current,fe.current=K}var contextStackCursor=createCursor(null),contextFiberStackCursor=createCursor(null),rootInstanceStackCursor=createCursor(null),hostTransitionProviderCursor=createCursor(null);function pushHostContainer(fe,K){switch(push$1(rootInstanceStackCursor,K),push$1(contextFiberStackCursor,fe),push$1(contextStackCursor,null),fe=K.nodeType,fe){case 9:case 11:K=(K=K.documentElement)&&(K=K.namespaceURI)?getOwnHostContext(K):0;break;default:if(fe=fe===8?K.parentNode:K,K=fe.tagName,fe=fe.namespaceURI)fe=getOwnHostContext(fe),K=getChildHostContextProd(fe,K);else switch(K){case"svg":K=1;break;case"math":K=2;break;default:K=0}}pop(contextStackCursor),push$1(contextStackCursor,K)}function popHostContainer(){pop(contextStackCursor),pop(contextFiberStackCursor),pop(rootInstanceStackCursor)}function pushHostContext(fe){fe.memoizedState!==null&&push$1(hostTransitionProviderCursor,fe);var K=contextStackCursor.current,me=getChildHostContextProd(K,fe.type);K!==me&&(push$1(contextFiberStackCursor,fe),push$1(contextStackCursor,me))}function popHostContext(fe){contextFiberStackCursor.current===fe&&(pop(contextStackCursor),pop(contextFiberStackCursor)),hostTransitionProviderCursor.current===fe&&(pop(hostTransitionProviderCursor),HostTransitionContext._currentValue=sharedNotPendingObject)}var hasOwnProperty$1=Object.prototype.hasOwnProperty,scheduleCallback$3=Scheduler.unstable_scheduleCallback,cancelCallback$1=Scheduler.unstable_cancelCallback,shouldYield=Scheduler.unstable_shouldYield,requestPaint=Scheduler.unstable_requestPaint,now$1=Scheduler.unstable_now,getCurrentPriorityLevel=Scheduler.unstable_getCurrentPriorityLevel,ImmediatePriority=Scheduler.unstable_ImmediatePriority,UserBlockingPriority=Scheduler.unstable_UserBlockingPriority,NormalPriority$1=Scheduler.unstable_NormalPriority,LowPriority=Scheduler.unstable_LowPriority,IdlePriority=Scheduler.unstable_IdlePriority,log$1=Scheduler.log,unstable_setDisableYieldValue=Scheduler.unstable_setDisableYieldValue,rendererID=null,injectedHook=null;function onCommitRoot(fe){if(injectedHook&&typeof injectedHook.onCommitFiberRoot=="function")try{injectedHook.onCommitFiberRoot(rendererID,fe,void 0,(fe.current.flags&128)===128)}catch{}}function setIsStrictModeForDevtools(fe){if(typeof log$1=="function"&&unstable_setDisableYieldValue(fe),injectedHook&&typeof injectedHook.setStrictMode=="function")try{injectedHook.setStrictMode(rendererID,fe)}catch{}}var clz32=Math.clz32?Math.clz32:clz32Fallback,log=Math.log,LN2=Math.LN2;function clz32Fallback(fe){return fe>>>=0,fe===0?32:31-(log(fe)/LN2|0)|0}var nextTransitionLane=128,nextRetryLane=4194304;function getHighestPriorityLanes(fe){var K=fe&42;if(K!==0)return K;switch(fe&-fe){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return fe&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return fe&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return fe}}function getNextLanes(fe,K){var me=fe.pendingLanes;if(me===0)return 0;var ge=0,xe=fe.suspendedLanes,ye=fe.pingedLanes,ve=fe.warmLanes;fe=fe.finishedLanes!==0;var _e=me&134217727;return _e!==0?(me=_e&~xe,me!==0?ge=getHighestPriorityLanes(me):(ye&=_e,ye!==0?ge=getHighestPriorityLanes(ye):fe||(ve=_e&~ve,ve!==0&&(ge=getHighestPriorityLanes(ve))))):(_e=me&~xe,_e!==0?ge=getHighestPriorityLanes(_e):ye!==0?ge=getHighestPriorityLanes(ye):fe||(ve=me&~ve,ve!==0&&(ge=getHighestPriorityLanes(ve)))),ge===0?0:K!==0&&K!==ge&&!(K&xe)&&(xe=ge&-ge,ve=K&-K,xe>=ve||xe===32&&(ve&4194176)!==0)?K:ge}function checkIfRootIsPrerendering(fe,K){return(fe.pendingLanes&~(fe.suspendedLanes&~fe.pingedLanes)&K)===0}function computeExpirationTime(fe,K){switch(fe){case 1:case 2:case 4:case 8:return K+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return K+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function claimNextTransitionLane(){var fe=nextTransitionLane;return nextTransitionLane<<=1,!(nextTransitionLane&4194176)&&(nextTransitionLane=128),fe}function claimNextRetryLane(){var fe=nextRetryLane;return nextRetryLane<<=1,!(nextRetryLane&62914560)&&(nextRetryLane=4194304),fe}function createLaneMap(fe){for(var K=[],me=0;31>me;me++)K.push(fe);return K}function markRootUpdated$1(fe,K){fe.pendingLanes|=K,K!==268435456&&(fe.suspendedLanes=0,fe.pingedLanes=0,fe.warmLanes=0)}function markRootFinished(fe,K,me,ge,xe,ye){var ve=fe.pendingLanes;fe.pendingLanes=me,fe.suspendedLanes=0,fe.pingedLanes=0,fe.warmLanes=0,fe.expiredLanes&=me,fe.entangledLanes&=me,fe.errorRecoveryDisabledLanes&=me,fe.shellSuspendCounter=0;var _e=fe.entanglements,Ee=fe.expirationTimes,be=fe.hiddenUpdates;for(me=ve&~me;0<me;){var Ae=31-clz32(me),Se=1<<Ae;_e[Ae]=0,Ee[Ae]=-1;var Ce=be[Ae];if(Ce!==null)for(be[Ae]=null,Ae=0;Ae<Ce.length;Ae++){var Te=Ce[Ae];Te!==null&&(Te.lane&=-536870913)}me&=~Se}ge!==0&&markSpawnedDeferredLane(fe,ge,0),ye!==0&&xe===0&&fe.tag!==0&&(fe.suspendedLanes|=ye&~(ve&~K))}function markSpawnedDeferredLane(fe,K,me){fe.pendingLanes|=K,fe.suspendedLanes&=~K;var ge=31-clz32(K);fe.entangledLanes|=K,fe.entanglements[ge]=fe.entanglements[ge]|1073741824|me&4194218}function markRootEntangled(fe,K){var me=fe.entangledLanes|=K;for(fe=fe.entanglements;me;){var ge=31-clz32(me),xe=1<<ge;xe&K|fe[ge]&K&&(fe[ge]|=K),me&=~xe}}function lanesToEventPriority(fe){return fe&=-fe,2<fe?8<fe?fe&134217727?32:268435456:8:2}function resolveUpdatePriority(){var fe=ReactDOMSharedInternals.p;return fe!==0?fe:(fe=window.event,fe===void 0?32:getEventPriority(fe.type))}function runWithPriority(fe,K){var me=ReactDOMSharedInternals.p;try{return ReactDOMSharedInternals.p=fe,K()}finally{ReactDOMSharedInternals.p=me}}var randomKey=Math.random().toString(36).slice(2),internalInstanceKey="__reactFiber$"+randomKey,internalPropsKey="__reactProps$"+randomKey,internalContainerInstanceKey="__reactContainer$"+randomKey,internalEventHandlersKey="__reactEvents$"+randomKey,internalEventHandlerListenersKey="__reactListeners$"+randomKey,internalEventHandlesSetKey="__reactHandles$"+randomKey,internalRootNodeResourcesKey="__reactResources$"+randomKey,internalHoistableMarker="__reactMarker$"+randomKey;function detachDeletedInstance(fe){delete fe[internalInstanceKey],delete fe[internalPropsKey],delete fe[internalEventHandlersKey],delete fe[internalEventHandlerListenersKey],delete fe[internalEventHandlesSetKey]}function getClosestInstanceFromNode(fe){var K=fe[internalInstanceKey];if(K)return K;for(var me=fe.parentNode;me;){if(K=me[internalContainerInstanceKey]||me[internalInstanceKey]){if(me=K.alternate,K.child!==null||me!==null&&me.child!==null)for(fe=getParentSuspenseInstance(fe);fe!==null;){if(me=fe[internalInstanceKey])return me;fe=getParentSuspenseInstance(fe)}return K}fe=me,me=fe.parentNode}return null}function getInstanceFromNode(fe){if(fe=fe[internalInstanceKey]||fe[internalContainerInstanceKey]){var K=fe.tag;if(K===5||K===6||K===13||K===26||K===27||K===3)return fe}return null}function getNodeFromInstance(fe){var K=fe.tag;if(K===5||K===26||K===27||K===6)return fe.stateNode;throw Error(formatProdErrorMessage(33))}function getResourcesFromRoot(fe){var K=fe[internalRootNodeResourcesKey];return K||(K=fe[internalRootNodeResourcesKey]={hoistableStyles:new Map,hoistableScripts:new Map}),K}function markNodeAsHoistable(fe){fe[internalHoistableMarker]=!0}var allNativeEvents=new Set,registrationNameDependencies={};function registerTwoPhaseEvent(fe,K){registerDirectEvent(fe,K),registerDirectEvent(fe+"Capture",K)}function registerDirectEvent(fe,K){for(registrationNameDependencies[fe]=K,fe=0;fe<K.length;fe++)allNativeEvents.add(K[fe])}var canUseDOM=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),VALID_ATTRIBUTE_NAME_REGEX=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),illegalAttributeNameCache={},validatedAttributeNameCache={};function isAttributeNameSafe(fe){return hasOwnProperty$1.call(validatedAttributeNameCache,fe)?!0:hasOwnProperty$1.call(illegalAttributeNameCache,fe)?!1:VALID_ATTRIBUTE_NAME_REGEX.test(fe)?validatedAttributeNameCache[fe]=!0:(illegalAttributeNameCache[fe]=!0,!1)}function setValueForAttribute(fe,K,me){if(isAttributeNameSafe(K))if(me===null)fe.removeAttribute(K);else{switch(typeof me){case"undefined":case"function":case"symbol":fe.removeAttribute(K);return;case"boolean":var ge=K.toLowerCase().slice(0,5);if(ge!=="data-"&&ge!=="aria-"){fe.removeAttribute(K);return}}fe.setAttribute(K,""+me)}}function setValueForKnownAttribute(fe,K,me){if(me===null)fe.removeAttribute(K);else{switch(typeof me){case"undefined":case"function":case"symbol":case"boolean":fe.removeAttribute(K);return}fe.setAttribute(K,""+me)}}function setValueForNamespacedAttribute(fe,K,me,ge){if(ge===null)fe.removeAttribute(me);else{switch(typeof ge){case"undefined":case"function":case"symbol":case"boolean":fe.removeAttribute(me);return}fe.setAttributeNS(K,me,""+ge)}}function getToStringValue(fe){switch(typeof fe){case"bigint":case"boolean":case"number":case"string":case"undefined":return fe;case"object":return fe;default:return""}}function isCheckable(fe){var K=fe.type;return(fe=fe.nodeName)&&fe.toLowerCase()==="input"&&(K==="checkbox"||K==="radio")}function trackValueOnNode(fe){var K=isCheckable(fe)?"checked":"value",me=Object.getOwnPropertyDescriptor(fe.constructor.prototype,K),ge=""+fe[K];if(!fe.hasOwnProperty(K)&&typeof me<"u"&&typeof me.get=="function"&&typeof me.set=="function"){var xe=me.get,ye=me.set;return Object.defineProperty(fe,K,{configurable:!0,get:function(){return xe.call(this)},set:function(ve){ge=""+ve,ye.call(this,ve)}}),Object.defineProperty(fe,K,{enumerable:me.enumerable}),{getValue:function(){return ge},setValue:function(ve){ge=""+ve},stopTracking:function(){fe._valueTracker=null,delete fe[K]}}}}function track$1(fe){fe._valueTracker||(fe._valueTracker=trackValueOnNode(fe))}function updateValueIfChanged(fe){if(!fe)return!1;var K=fe._valueTracker;if(!K)return!0;var me=K.getValue(),ge="";return fe&&(ge=isCheckable(fe)?fe.checked?"true":"false":fe.value),fe=ge,fe!==me?(K.setValue(fe),!0):!1}function getActiveElement(fe){if(fe=fe||(typeof document<"u"?document:void 0),typeof fe>"u")return null;try{return fe.activeElement||fe.body}catch{return fe.body}}var escapeSelectorAttributeValueInsideDoubleQuotesRegex=/[\n"\\]/g;function escapeSelectorAttributeValueInsideDoubleQuotes(fe){return fe.replace(escapeSelectorAttributeValueInsideDoubleQuotesRegex,function(K){return"\\"+K.charCodeAt(0).toString(16)+" "})}function updateInput(fe,K,me,ge,xe,ye,ve,_e){fe.name="",ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"?fe.type=ve:fe.removeAttribute("type"),K!=null?ve==="number"?(K===0&&fe.value===""||fe.value!=K)&&(fe.value=""+getToStringValue(K)):fe.value!==""+getToStringValue(K)&&(fe.value=""+getToStringValue(K)):ve!=="submit"&&ve!=="reset"||fe.removeAttribute("value"),K!=null?setDefaultValue(fe,ve,getToStringValue(K)):me!=null?setDefaultValue(fe,ve,getToStringValue(me)):ge!=null&&fe.removeAttribute("value"),xe==null&&ye!=null&&(fe.defaultChecked=!!ye),xe!=null&&(fe.checked=xe&&typeof xe!="function"&&typeof xe!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?fe.name=""+getToStringValue(_e):fe.removeAttribute("name")}function initInput(fe,K,me,ge,xe,ye,ve,_e){if(ye!=null&&typeof ye!="function"&&typeof ye!="symbol"&&typeof ye!="boolean"&&(fe.type=ye),K!=null||me!=null){if(!(ye!=="submit"&&ye!=="reset"||K!=null))return;me=me!=null?""+getToStringValue(me):"",K=K!=null?""+getToStringValue(K):me,_e||K===fe.value||(fe.value=K),fe.defaultValue=K}ge=ge??xe,ge=typeof ge!="function"&&typeof ge!="symbol"&&!!ge,fe.checked=_e?fe.checked:!!ge,fe.defaultChecked=!!ge,ve!=null&&typeof ve!="function"&&typeof ve!="symbol"&&typeof ve!="boolean"&&(fe.name=ve)}function setDefaultValue(fe,K,me){K==="number"&&getActiveElement(fe.ownerDocument)===fe||fe.defaultValue===""+me||(fe.defaultValue=""+me)}function updateOptions(fe,K,me,ge){if(fe=fe.options,K){K={};for(var xe=0;xe<me.length;xe++)K["$"+me[xe]]=!0;for(me=0;me<fe.length;me++)xe=K.hasOwnProperty("$"+fe[me].value),fe[me].selected!==xe&&(fe[me].selected=xe),xe&&ge&&(fe[me].defaultSelected=!0)}else{for(me=""+getToStringValue(me),K=null,xe=0;xe<fe.length;xe++){if(fe[xe].value===me){fe[xe].selected=!0,ge&&(fe[xe].defaultSelected=!0);return}K!==null||fe[xe].disabled||(K=fe[xe])}K!==null&&(K.selected=!0)}}function updateTextarea(fe,K,me){if(K!=null&&(K=""+getToStringValue(K),K!==fe.value&&(fe.value=K),me==null)){fe.defaultValue!==K&&(fe.defaultValue=K);return}fe.defaultValue=me!=null?""+getToStringValue(me):""}function initTextarea(fe,K,me,ge){if(K==null){if(ge!=null){if(me!=null)throw Error(formatProdErrorMessage(92));if(isArrayImpl(ge)){if(1<ge.length)throw Error(formatProdErrorMessage(93));ge=ge[0]}me=ge}me==null&&(me=""),K=me}me=getToStringValue(K),fe.defaultValue=me,ge=fe.textContent,ge===me&&ge!==""&&ge!==null&&(fe.value=ge)}function setTextContent(fe,K){if(K){var me=fe.firstChild;if(me&&me===fe.lastChild&&me.nodeType===3){me.nodeValue=K;return}}fe.textContent=K}var unitlessNumbers=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function setValueForStyle(fe,K,me){var ge=K.indexOf("--")===0;me==null||typeof me=="boolean"||me===""?ge?fe.setProperty(K,""):K==="float"?fe.cssFloat="":fe[K]="":ge?fe.setProperty(K,me):typeof me!="number"||me===0||unitlessNumbers.has(K)?K==="float"?fe.cssFloat=me:fe[K]=(""+me).trim():fe[K]=me+"px"}function setValueForStyles(fe,K,me){if(K!=null&&typeof K!="object")throw Error(formatProdErrorMessage(62));if(fe=fe.style,me!=null){for(var ge in me)!me.hasOwnProperty(ge)||K!=null&&K.hasOwnProperty(ge)||(ge.indexOf("--")===0?fe.setProperty(ge,""):ge==="float"?fe.cssFloat="":fe[ge]="");for(var xe in K)ge=K[xe],K.hasOwnProperty(xe)&&me[xe]!==ge&&setValueForStyle(fe,xe,ge)}else for(var ye in K)K.hasOwnProperty(ye)&&setValueForStyle(fe,ye,K[ye])}function isCustomElement(fe){if(fe.indexOf("-")===-1)return!1;switch(fe){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var aliases=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),isJavaScriptProtocol=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function sanitizeURL(fe){return isJavaScriptProtocol.test(""+fe)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":fe}var currentReplayingEvent=null;function getEventTarget(fe){return fe=fe.target||fe.srcElement||window,fe.correspondingUseElement&&(fe=fe.correspondingUseElement),fe.nodeType===3?fe.parentNode:fe}var restoreTarget=null,restoreQueue=null;function restoreStateOfTarget(fe){var K=getInstanceFromNode(fe);if(K&&(fe=K.stateNode)){var me=fe[internalPropsKey]||null;e:switch(fe=K.stateNode,K.type){case"input":if(updateInput(fe,me.value,me.defaultValue,me.defaultValue,me.checked,me.defaultChecked,me.type,me.name),K=me.name,me.type==="radio"&&K!=null){for(me=fe;me.parentNode;)me=me.parentNode;for(me=me.querySelectorAll('input[name="'+escapeSelectorAttributeValueInsideDoubleQuotes(""+K)+'"][type="radio"]'),K=0;K<me.length;K++){var ge=me[K];if(ge!==fe&&ge.form===fe.form){var xe=ge[internalPropsKey]||null;if(!xe)throw Error(formatProdErrorMessage(90));updateInput(ge,xe.value,xe.defaultValue,xe.defaultValue,xe.checked,xe.defaultChecked,xe.type,xe.name)}}for(K=0;K<me.length;K++)ge=me[K],ge.form===fe.form&&updateValueIfChanged(ge)}break e;case"textarea":updateTextarea(fe,me.value,me.defaultValue);break e;case"select":K=me.value,K!=null&&updateOptions(fe,!!me.multiple,K,!1)}}}var isInsideEventHandler=!1;function batchedUpdates$1(fe,K,me){if(isInsideEventHandler)return fe(K,me);isInsideEventHandler=!0;try{var ge=fe(K);return ge}finally{if(isInsideEventHandler=!1,(restoreTarget!==null||restoreQueue!==null)&&(flushSyncWork$1(),restoreTarget&&(K=restoreTarget,fe=restoreQueue,restoreQueue=restoreTarget=null,restoreStateOfTarget(K),fe)))for(K=0;K<fe.length;K++)restoreStateOfTarget(fe[K])}}function getListener(fe,K){var me=fe.stateNode;if(me===null)return null;var ge=me[internalPropsKey]||null;if(ge===null)return null;me=ge[K];e:switch(K){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ge=!ge.disabled)||(fe=fe.type,ge=!(fe==="button"||fe==="input"||fe==="select"||fe==="textarea")),fe=!ge;break e;default:fe=!1}if(fe)return null;if(me&&typeof me!="function")throw Error(formatProdErrorMessage(231,K,typeof me));return me}var passiveBrowserEventsSupported=!1;if(canUseDOM)try{var options$1={};Object.defineProperty(options$1,"passive",{get:function(){passiveBrowserEventsSupported=!0}}),window.addEventListener("test",options$1,options$1),window.removeEventListener("test",options$1,options$1)}catch{passiveBrowserEventsSupported=!1}var root$4=null,startText=null,fallbackText=null;function getData(){if(fallbackText)return fallbackText;var fe,K=startText,me=K.length,ge,xe="value"in root$4?root$4.value:root$4.textContent,ye=xe.length;for(fe=0;fe<me&&K[fe]===xe[fe];fe++);var ve=me-fe;for(ge=1;ge<=ve&&K[me-ge]===xe[ye-ge];ge++);return fallbackText=xe.slice(fe,1<ge?1-ge:void 0)}function getEventCharCode(fe){var K=fe.keyCode;return"charCode"in fe?(fe=fe.charCode,fe===0&&K===13&&(fe=13)):fe=K,fe===10&&(fe=13),32<=fe||fe===13?fe:0}function functionThatReturnsTrue(){return!0}function functionThatReturnsFalse(){return!1}function createSyntheticEvent(fe){function K(me,ge,xe,ye,ve){this._reactName=me,this._targetInst=xe,this.type=ge,this.nativeEvent=ye,this.target=ve,this.currentTarget=null;for(var _e in fe)fe.hasOwnProperty(_e)&&(me=fe[_e],this[_e]=me?me(ye):ye[_e]);return this.isDefaultPrevented=(ye.defaultPrevented!=null?ye.defaultPrevented:ye.returnValue===!1)?functionThatReturnsTrue:functionThatReturnsFalse,this.isPropagationStopped=functionThatReturnsFalse,this}return assign(K.prototype,{preventDefault:function(){this.defaultPrevented=!0;var me=this.nativeEvent;me&&(me.preventDefault?me.preventDefault():typeof me.returnValue!="unknown"&&(me.returnValue=!1),this.isDefaultPrevented=functionThatReturnsTrue)},stopPropagation:function(){var me=this.nativeEvent;me&&(me.stopPropagation?me.stopPropagation():typeof me.cancelBubble!="unknown"&&(me.cancelBubble=!0),this.isPropagationStopped=functionThatReturnsTrue)},persist:function(){},isPersistent:functionThatReturnsTrue}),K}var EventInterface={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(fe){return fe.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},SyntheticEvent=createSyntheticEvent(EventInterface),UIEventInterface=assign({},EventInterface,{view:0,detail:0}),SyntheticUIEvent=createSyntheticEvent(UIEventInterface),lastMovementX,lastMovementY,lastMouseEvent,MouseEventInterface=assign({},UIEventInterface,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:getEventModifierState,button:0,buttons:0,relatedTarget:function(fe){return fe.relatedTarget===void 0?fe.fromElement===fe.srcElement?fe.toElement:fe.fromElement:fe.relatedTarget},movementX:function(fe){return"movementX"in fe?fe.movementX:(fe!==lastMouseEvent&&(lastMouseEvent&&fe.type==="mousemove"?(lastMovementX=fe.screenX-lastMouseEvent.screenX,lastMovementY=fe.screenY-lastMouseEvent.screenY):lastMovementY=lastMovementX=0,lastMouseEvent=fe),lastMovementX)},movementY:function(fe){return"movementY"in fe?fe.movementY:lastMovementY}}),SyntheticMouseEvent=createSyntheticEvent(MouseEventInterface),DragEventInterface=assign({},MouseEventInterface,{dataTransfer:0}),SyntheticDragEvent=createSyntheticEvent(DragEventInterface),FocusEventInterface=assign({},UIEventInterface,{relatedTarget:0}),SyntheticFocusEvent=createSyntheticEvent(FocusEventInterface),AnimationEventInterface=assign({},EventInterface,{animationName:0,elapsedTime:0,pseudoElement:0}),SyntheticAnimationEvent=createSyntheticEvent(AnimationEventInterface),ClipboardEventInterface=assign({},EventInterface,{clipboardData:function(fe){return"clipboardData"in fe?fe.clipboardData:window.clipboardData}}),SyntheticClipboardEvent=createSyntheticEvent(ClipboardEventInterface),CompositionEventInterface=assign({},EventInterface,{data:0}),SyntheticCompositionEvent=createSyntheticEvent(CompositionEventInterface),normalizeKey={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},translateToKey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},modifierKeyToProp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function modifierStateGetter(fe){var K=this.nativeEvent;return K.getModifierState?K.getModifierState(fe):(fe=modifierKeyToProp[fe])?!!K[fe]:!1}function getEventModifierState(){return modifierStateGetter}var KeyboardEventInterface=assign({},UIEventInterface,{key:function(fe){if(fe.key){var K=normalizeKey[fe.key]||fe.key;if(K!=="Unidentified")return K}return fe.type==="keypress"?(fe=getEventCharCode(fe),fe===13?"Enter":String.fromCharCode(fe)):fe.type==="keydown"||fe.type==="keyup"?translateToKey[fe.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:getEventModifierState,charCode:function(fe){return fe.type==="keypress"?getEventCharCode(fe):0},keyCode:function(fe){return fe.type==="keydown"||fe.type==="keyup"?fe.keyCode:0},which:function(fe){return fe.type==="keypress"?getEventCharCode(fe):fe.type==="keydown"||fe.type==="keyup"?fe.keyCode:0}}),SyntheticKeyboardEvent=createSyntheticEvent(KeyboardEventInterface),PointerEventInterface=assign({},MouseEventInterface,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),SyntheticPointerEvent=createSyntheticEvent(PointerEventInterface),TouchEventInterface=assign({},UIEventInterface,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:getEventModifierState}),SyntheticTouchEvent=createSyntheticEvent(TouchEventInterface),TransitionEventInterface=assign({},EventInterface,{propertyName:0,elapsedTime:0,pseudoElement:0}),SyntheticTransitionEvent=createSyntheticEvent(TransitionEventInterface),WheelEventInterface=assign({},MouseEventInterface,{deltaX:function(fe){return"deltaX"in fe?fe.deltaX:"wheelDeltaX"in fe?-fe.wheelDeltaX:0},deltaY:function(fe){return"deltaY"in fe?fe.deltaY:"wheelDeltaY"in fe?-fe.wheelDeltaY:"wheelDelta"in fe?-fe.wheelDelta:0},deltaZ:0,deltaMode:0}),SyntheticWheelEvent=createSyntheticEvent(WheelEventInterface),ToggleEventInterface=assign({},EventInterface,{newState:0,oldState:0}),SyntheticToggleEvent=createSyntheticEvent(ToggleEventInterface),END_KEYCODES=[9,13,27,32],canUseCompositionEvent=canUseDOM&&"CompositionEvent"in window,documentMode=null;canUseDOM&&"documentMode"in document&&(documentMode=document.documentMode);var canUseTextInputEvent=canUseDOM&&"TextEvent"in window&&!documentMode,useFallbackCompositionData=canUseDOM&&(!canUseCompositionEvent||documentMode&&8<documentMode&&11>=documentMode),SPACEBAR_CHAR=" ",hasSpaceKeypress=!1;function isFallbackCompositionEnd(fe,K){switch(fe){case"keyup":return END_KEYCODES.indexOf(K.keyCode)!==-1;case"keydown":return K.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function getDataFromCustomEvent(fe){return fe=fe.detail,typeof fe=="object"&&"data"in fe?fe.data:null}var isComposing=!1;function getNativeBeforeInputChars(fe,K){switch(fe){case"compositionend":return getDataFromCustomEvent(K);case"keypress":return K.which!==32?null:(hasSpaceKeypress=!0,SPACEBAR_CHAR);case"textInput":return fe=K.data,fe===SPACEBAR_CHAR&&hasSpaceKeypress?null:fe;default:return null}}function getFallbackBeforeInputChars(fe,K){if(isComposing)return fe==="compositionend"||!canUseCompositionEvent&&isFallbackCompositionEnd(fe,K)?(fe=getData(),fallbackText=startText=root$4=null,isComposing=!1,fe):null;switch(fe){case"paste":return null;case"keypress":if(!(K.ctrlKey||K.altKey||K.metaKey)||K.ctrlKey&&K.altKey){if(K.char&&1<K.char.length)return K.char;if(K.which)return String.fromCharCode(K.which)}return null;case"compositionend":return useFallbackCompositionData&&K.locale!=="ko"?null:K.data;default:return null}}var supportedInputTypes={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function isTextInputElement(fe){var K=fe&&fe.nodeName&&fe.nodeName.toLowerCase();return K==="input"?!!supportedInputTypes[fe.type]:K==="textarea"}function createAndAccumulateChangeEvent(fe,K,me,ge){restoreTarget?restoreQueue?restoreQueue.push(ge):restoreQueue=[ge]:restoreTarget=ge,K=accumulateTwoPhaseListeners(K,"onChange"),0<K.length&&(me=new SyntheticEvent("onChange","change",null,me,ge),fe.push({event:me,listeners:K}))}var activeElement$1=null,activeElementInst$1=null;function runEventInBatch(fe){processDispatchQueue(fe,0)}function getInstIfValueChanged(fe){var K=getNodeFromInstance(fe);if(updateValueIfChanged(K))return fe}function getTargetInstForChangeEvent(fe,K){if(fe==="change")return K}var isInputEventSupported=!1;if(canUseDOM){var JSCompiler_inline_result$jscomp$283;if(canUseDOM){var isSupported$jscomp$inline_418="oninput"in document;if(!isSupported$jscomp$inline_418){var element$jscomp$inline_419=document.createElement("div");element$jscomp$inline_419.setAttribute("oninput","return;"),isSupported$jscomp$inline_418=typeof element$jscomp$inline_419.oninput=="function"}JSCompiler_inline_result$jscomp$283=isSupported$jscomp$inline_418}else JSCompiler_inline_result$jscomp$283=!1;isInputEventSupported=JSCompiler_inline_result$jscomp$283&&(!document.documentMode||9<document.documentMode)}function stopWatchingForValueChange(){activeElement$1&&(activeElement$1.detachEvent("onpropertychange",handlePropertyChange),activeElementInst$1=activeElement$1=null)}function handlePropertyChange(fe){if(fe.propertyName==="value"&&getInstIfValueChanged(activeElementInst$1)){var K=[];createAndAccumulateChangeEvent(K,activeElementInst$1,fe,getEventTarget(fe)),batchedUpdates$1(runEventInBatch,K)}}function handleEventsForInputEventPolyfill(fe,K,me){fe==="focusin"?(stopWatchingForValueChange(),activeElement$1=K,activeElementInst$1=me,activeElement$1.attachEvent("onpropertychange",handlePropertyChange)):fe==="focusout"&&stopWatchingForValueChange()}function getTargetInstForInputEventPolyfill(fe){if(fe==="selectionchange"||fe==="keyup"||fe==="keydown")return getInstIfValueChanged(activeElementInst$1)}function getTargetInstForClickEvent(fe,K){if(fe==="click")return getInstIfValueChanged(K)}function getTargetInstForInputOrChangeEvent(fe,K){if(fe==="input"||fe==="change")return getInstIfValueChanged(K)}function is$4(fe,K){return fe===K&&(fe!==0||1/fe===1/K)||fe!==fe&&K!==K}var objectIs$2=typeof Object.is=="function"?Object.is:is$4;function shallowEqual(fe,K){if(objectIs$2(fe,K))return!0;if(typeof fe!="object"||fe===null||typeof K!="object"||K===null)return!1;var me=Object.keys(fe),ge=Object.keys(K);if(me.length!==ge.length)return!1;for(ge=0;ge<me.length;ge++){var xe=me[ge];if(!hasOwnProperty$1.call(K,xe)||!objectIs$2(fe[xe],K[xe]))return!1}return!0}function getLeafNode(fe){for(;fe&&fe.firstChild;)fe=fe.firstChild;return fe}function getNodeForCharacterOffset(fe,K){var me=getLeafNode(fe);fe=0;for(var ge;me;){if(me.nodeType===3){if(ge=fe+me.textContent.length,fe<=K&&ge>=K)return{node:me,offset:K-fe};fe=ge}e:{for(;me;){if(me.nextSibling){me=me.nextSibling;break e}me=me.parentNode}me=void 0}me=getLeafNode(me)}}function containsNode(fe,K){return fe&&K?fe===K?!0:fe&&fe.nodeType===3?!1:K&&K.nodeType===3?containsNode(fe,K.parentNode):"contains"in fe?fe.contains(K):fe.compareDocumentPosition?!!(fe.compareDocumentPosition(K)&16):!1:!1}function getActiveElementDeep(fe){fe=fe!=null&&fe.ownerDocument!=null&&fe.ownerDocument.defaultView!=null?fe.ownerDocument.defaultView:window;for(var K=getActiveElement(fe.document);K instanceof fe.HTMLIFrameElement;){try{var me=typeof K.contentWindow.location.href=="string"}catch{me=!1}if(me)fe=K.contentWindow;else break;K=getActiveElement(fe.document)}return K}function hasSelectionCapabilities(fe){var K=fe&&fe.nodeName&&fe.nodeName.toLowerCase();return K&&(K==="input"&&(fe.type==="text"||fe.type==="search"||fe.type==="tel"||fe.type==="url"||fe.type==="password")||K==="textarea"||fe.contentEditable==="true")}function restoreSelection(fe,K){var me=getActiveElementDeep(K);K=fe.focusedElem;var ge=fe.selectionRange;if(me!==K&&K&&K.ownerDocument&&containsNode(K.ownerDocument.documentElement,K)){if(ge!==null&&hasSelectionCapabilities(K)){if(fe=ge.start,me=ge.end,me===void 0&&(me=fe),"selectionStart"in K)K.selectionStart=fe,K.selectionEnd=Math.min(me,K.value.length);else if(me=(fe=K.ownerDocument||document)&&fe.defaultView||window,me.getSelection){me=me.getSelection();var xe=K.textContent.length,ye=Math.min(ge.start,xe);ge=ge.end===void 0?ye:Math.min(ge.end,xe),!me.extend&&ye>ge&&(xe=ge,ge=ye,ye=xe),xe=getNodeForCharacterOffset(K,ye);var ve=getNodeForCharacterOffset(K,ge);xe&&ve&&(me.rangeCount!==1||me.anchorNode!==xe.node||me.anchorOffset!==xe.offset||me.focusNode!==ve.node||me.focusOffset!==ve.offset)&&(fe=fe.createRange(),fe.setStart(xe.node,xe.offset),me.removeAllRanges(),ye>ge?(me.addRange(fe),me.extend(ve.node,ve.offset)):(fe.setEnd(ve.node,ve.offset),me.addRange(fe)))}}for(fe=[],me=K;me=me.parentNode;)me.nodeType===1&&fe.push({element:me,left:me.scrollLeft,top:me.scrollTop});for(typeof K.focus=="function"&&K.focus(),K=0;K<fe.length;K++)me=fe[K],me.element.scrollLeft=me.left,me.element.scrollTop=me.top}}var skipSelectionChangeEvent=canUseDOM&&"documentMode"in document&&11>=document.documentMode,activeElement$2=null,activeElementInst=null,lastSelection=null,mouseDown=!1;function constructSelectEvent(fe,K,me){var ge=me.window===me?me.document:me.nodeType===9?me:me.ownerDocument;mouseDown||activeElement$2==null||activeElement$2!==getActiveElement(ge)||(ge=activeElement$2,"selectionStart"in ge&&hasSelectionCapabilities(ge)?ge={start:ge.selectionStart,end:ge.selectionEnd}:(ge=(ge.ownerDocument&&ge.ownerDocument.defaultView||window).getSelection(),ge={anchorNode:ge.anchorNode,anchorOffset:ge.anchorOffset,focusNode:ge.focusNode,focusOffset:ge.focusOffset}),lastSelection&&shallowEqual(lastSelection,ge)||(lastSelection=ge,ge=accumulateTwoPhaseListeners(activeElementInst,"onSelect"),0<ge.length&&(K=new SyntheticEvent("onSelect","select",null,K,me),fe.push({event:K,listeners:ge}),K.target=activeElement$2)))}function makePrefixMap(fe,K){var me={};return me[fe.toLowerCase()]=K.toLowerCase(),me["Webkit"+fe]="webkit"+K,me["Moz"+fe]="moz"+K,me}var vendorPrefixes={animationend:makePrefixMap("Animation","AnimationEnd"),animationiteration:makePrefixMap("Animation","AnimationIteration"),animationstart:makePrefixMap("Animation","AnimationStart"),transitionrun:makePrefixMap("Transition","TransitionRun"),transitionstart:makePrefixMap("Transition","TransitionStart"),transitioncancel:makePrefixMap("Transition","TransitionCancel"),transitionend:makePrefixMap("Transition","TransitionEnd")},prefixedEventNames={},style={};canUseDOM&&(style=document.createElement("div").style,"AnimationEvent"in window||(delete vendorPrefixes.animationend.animation,delete vendorPrefixes.animationiteration.animation,delete vendorPrefixes.animationstart.animation),"TransitionEvent"in window||delete vendorPrefixes.transitionend.transition);function getVendorPrefixedEventName(fe){if(prefixedEventNames[fe])return prefixedEventNames[fe];if(!vendorPrefixes[fe])return fe;var K=vendorPrefixes[fe],me;for(me in K)if(K.hasOwnProperty(me)&&me in style)return prefixedEventNames[fe]=K[me];return fe}var ANIMATION_END=getVendorPrefixedEventName("animationend"),ANIMATION_ITERATION=getVendorPrefixedEventName("animationiteration"),ANIMATION_START=getVendorPrefixedEventName("animationstart"),TRANSITION_RUN=getVendorPrefixedEventName("transitionrun"),TRANSITION_START=getVendorPrefixedEventName("transitionstart"),TRANSITION_CANCEL=getVendorPrefixedEventName("transitioncancel"),TRANSITION_END=getVendorPrefixedEventName("transitionend"),topLevelEventsToReactNames=new Map,simpleEventPluginEvents="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function registerSimpleEvent(fe,K){topLevelEventsToReactNames.set(fe,K),registerTwoPhaseEvent(K,[fe])}var concurrentQueues=[],concurrentQueuesIndex=0,concurrentlyUpdatedLanes=0;function finishQueueingConcurrentUpdates(){for(var fe=concurrentQueuesIndex,K=concurrentlyUpdatedLanes=concurrentQueuesIndex=0;K<fe;){var me=concurrentQueues[K];concurrentQueues[K++]=null;var ge=concurrentQueues[K];concurrentQueues[K++]=null;var xe=concurrentQueues[K];concurrentQueues[K++]=null;var ye=concurrentQueues[K];if(concurrentQueues[K++]=null,ge!==null&&xe!==null){var ve=ge.pending;ve===null?xe.next=xe:(xe.next=ve.next,ve.next=xe),ge.pending=xe}ye!==0&&markUpdateLaneFromFiberToRoot(me,xe,ye)}}function enqueueUpdate$1(fe,K,me,ge){concurrentQueues[concurrentQueuesIndex++]=fe,concurrentQueues[concurrentQueuesIndex++]=K,concurrentQueues[concurrentQueuesIndex++]=me,concurrentQueues[concurrentQueuesIndex++]=ge,concurrentlyUpdatedLanes|=ge,fe.lanes|=ge,fe=fe.alternate,fe!==null&&(fe.lanes|=ge)}function enqueueConcurrentHookUpdate(fe,K,me,ge){return enqueueUpdate$1(fe,K,me,ge),getRootForUpdatedFiber(fe)}function enqueueConcurrentRenderForLane(fe,K){return enqueueUpdate$1(fe,null,null,K),getRootForUpdatedFiber(fe)}function markUpdateLaneFromFiberToRoot(fe,K,me){fe.lanes|=me;var ge=fe.alternate;ge!==null&&(ge.lanes|=me);for(var xe=!1,ye=fe.return;ye!==null;)ye.childLanes|=me,ge=ye.alternate,ge!==null&&(ge.childLanes|=me),ye.tag===22&&(fe=ye.stateNode,fe===null||fe._visibility&1||(xe=!0)),fe=ye,ye=ye.return;xe&&K!==null&&fe.tag===3&&(ye=fe.stateNode,xe=31-clz32(me),ye=ye.hiddenUpdates,fe=ye[xe],fe===null?ye[xe]=[K]:fe.push(K),K.lane=me|536870912)}function getRootForUpdatedFiber(fe){if(50<nestedUpdateCount)throw nestedUpdateCount=0,rootWithNestedUpdates=null,Error(formatProdErrorMessage(185));for(var K=fe.return;K!==null;)fe=K,K=fe.return;return fe.tag===3?fe.stateNode:null}var emptyContextObject={},CapturedStacks=new WeakMap;function createCapturedValueAtFiber(fe,K){if(typeof fe=="object"&&fe!==null){var me=CapturedStacks.get(fe);return me!==void 0?me:(K={value:fe,source:K,stack:getStackByFiberInDevAndProd(K)},CapturedStacks.set(fe,K),K)}return{value:fe,source:K,stack:getStackByFiberInDevAndProd(K)}}var forkStack=[],forkStackIndex=0,treeForkProvider=null,treeForkCount=0,idStack=[],idStackIndex=0,treeContextProvider=null,treeContextId=1,treeContextOverflow="";function pushTreeFork(fe,K){forkStack[forkStackIndex++]=treeForkCount,forkStack[forkStackIndex++]=treeForkProvider,treeForkProvider=fe,treeForkCount=K}function pushTreeId(fe,K,me){idStack[idStackIndex++]=treeContextId,idStack[idStackIndex++]=treeContextOverflow,idStack[idStackIndex++]=treeContextProvider,treeContextProvider=fe;var ge=treeContextId;fe=treeContextOverflow;var xe=32-clz32(ge)-1;ge&=~(1<<xe),me+=1;var ye=32-clz32(K)+xe;if(30<ye){var ve=xe-xe%5;ye=(ge&(1<<ve)-1).toString(32),ge>>=ve,xe-=ve,treeContextId=1<<32-clz32(K)+xe|me<<xe|ge,treeContextOverflow=ye+fe}else treeContextId=1<<ye|me<<xe|ge,treeContextOverflow=fe}function pushMaterializedTreeId(fe){fe.return!==null&&(pushTreeFork(fe,1),pushTreeId(fe,1,0))}function popTreeContext(fe){for(;fe===treeForkProvider;)treeForkProvider=forkStack[--forkStackIndex],forkStack[forkStackIndex]=null,treeForkCount=forkStack[--forkStackIndex],forkStack[forkStackIndex]=null;for(;fe===treeContextProvider;)treeContextProvider=idStack[--idStackIndex],idStack[idStackIndex]=null,treeContextOverflow=idStack[--idStackIndex],idStack[idStackIndex]=null,treeContextId=idStack[--idStackIndex],idStack[idStackIndex]=null}var hydrationParentFiber=null,nextHydratableInstance=null,isHydrating=!1,hydrationErrors=null,rootOrSingletonContext=!1,HydrationMismatchException=Error(formatProdErrorMessage(519));function throwOnHydrationMismatch(fe){var K=Error(formatProdErrorMessage(418,""));throw queueHydrationError(createCapturedValueAtFiber(K,fe)),HydrationMismatchException}function prepareToHydrateHostInstance(fe){var K=fe.stateNode,me=fe.type,ge=fe.memoizedProps;switch(K[internalInstanceKey]=fe,K[internalPropsKey]=ge,me){case"dialog":listenToNonDelegatedEvent("cancel",K),listenToNonDelegatedEvent("close",K);break;case"iframe":case"object":case"embed":listenToNonDelegatedEvent("load",K);break;case"video":case"audio":for(me=0;me<mediaEventTypes.length;me++)listenToNonDelegatedEvent(mediaEventTypes[me],K);break;case"source":listenToNonDelegatedEvent("error",K);break;case"img":case"image":case"link":listenToNonDelegatedEvent("error",K),listenToNonDelegatedEvent("load",K);break;case"details":listenToNonDelegatedEvent("toggle",K);break;case"input":listenToNonDelegatedEvent("invalid",K),initInput(K,ge.value,ge.defaultValue,ge.checked,ge.defaultChecked,ge.type,ge.name,!0),track$1(K);break;case"select":listenToNonDelegatedEvent("invalid",K);break;case"textarea":listenToNonDelegatedEvent("invalid",K),initTextarea(K,ge.value,ge.defaultValue,ge.children),track$1(K)}me=ge.children,typeof me!="string"&&typeof me!="number"&&typeof me!="bigint"||K.textContent===""+me||ge.suppressHydrationWarning===!0||checkForUnmatchedText(K.textContent,me)?(ge.popover!=null&&(listenToNonDelegatedEvent("beforetoggle",K),listenToNonDelegatedEvent("toggle",K)),ge.onScroll!=null&&listenToNonDelegatedEvent("scroll",K),ge.onScrollEnd!=null&&listenToNonDelegatedEvent("scrollend",K),ge.onClick!=null&&(K.onclick=noop$1$1),K=!0):K=!1,K||throwOnHydrationMismatch(fe)}function popToNextHostParent(fe){for(hydrationParentFiber=fe.return;hydrationParentFiber;)switch(hydrationParentFiber.tag){case 3:case 27:rootOrSingletonContext=!0;return;case 5:case 13:rootOrSingletonContext=!1;return;default:hydrationParentFiber=hydrationParentFiber.return}}function popHydrationState(fe){if(fe!==hydrationParentFiber)return!1;if(!isHydrating)return popToNextHostParent(fe),isHydrating=!0,!1;var K=!1,me;if((me=fe.tag!==3&&fe.tag!==27)&&((me=fe.tag===5)&&(me=fe.type,me=!(me!=="form"&&me!=="button")||shouldSetTextContent(fe.type,fe.memoizedProps)),me=!me),me&&(K=!0),K&&nextHydratableInstance&&throwOnHydrationMismatch(fe),popToNextHostParent(fe),fe.tag===13){if(fe=fe.memoizedState,fe=fe!==null?fe.dehydrated:null,!fe)throw Error(formatProdErrorMessage(317));e:{for(fe=fe.nextSibling,K=0;fe;){if(fe.nodeType===8)if(me=fe.data,me==="/$"){if(K===0){nextHydratableInstance=getNextHydratable(fe.nextSibling);break e}K--}else me!=="$"&&me!=="$!"&&me!=="$?"||K++;fe=fe.nextSibling}nextHydratableInstance=null}}else nextHydratableInstance=hydrationParentFiber?getNextHydratable(fe.stateNode.nextSibling):null;return!0}function resetHydrationState(){nextHydratableInstance=hydrationParentFiber=null,isHydrating=!1}function queueHydrationError(fe){hydrationErrors===null?hydrationErrors=[fe]:hydrationErrors.push(fe)}var SuspenseException=Error(formatProdErrorMessage(460)),SuspenseyCommitException=Error(formatProdErrorMessage(474)),noopSuspenseyCommitThenable={then:function(){}};function isThenableResolved(fe){return fe=fe.status,fe==="fulfilled"||fe==="rejected"}function noop$3$1(){}function trackUsedThenable(fe,K,me){switch(me=fe[me],me===void 0?fe.push(K):me!==K&&(K.then(noop$3$1,noop$3$1),K=me),K.status){case"fulfilled":return K.value;case"rejected":throw fe=K.reason,fe===SuspenseException?Error(formatProdErrorMessage(483)):fe;default:if(typeof K.status=="string")K.then(noop$3$1,noop$3$1);else{if(fe=workInProgressRoot,fe!==null&&100<fe.shellSuspendCounter)throw Error(formatProdErrorMessage(482));fe=K,fe.status="pending",fe.then(function(ge){if(K.status==="pending"){var xe=K;xe.status="fulfilled",xe.value=ge}},function(ge){if(K.status==="pending"){var xe=K;xe.status="rejected",xe.reason=ge}})}switch(K.status){case"fulfilled":return K.value;case"rejected":throw fe=K.reason,fe===SuspenseException?Error(formatProdErrorMessage(483)):fe}throw suspendedThenable=K,SuspenseException}}var suspendedThenable=null;function getSuspendedThenable(){if(suspendedThenable===null)throw Error(formatProdErrorMessage(459));var fe=suspendedThenable;return suspendedThenable=null,fe}var thenableState$1=null,thenableIndexCounter$1=0;function unwrapThenable(fe){var K=thenableIndexCounter$1;return thenableIndexCounter$1+=1,thenableState$1===null&&(thenableState$1=[]),trackUsedThenable(thenableState$1,fe,K)}function coerceRef(fe,K){K=K.props.ref,fe.ref=K!==void 0?K:null}function throwOnInvalidObjectType(fe,K){throw K.$$typeof===REACT_LEGACY_ELEMENT_TYPE?Error(formatProdErrorMessage(525)):(fe=Object.prototype.toString.call(K),Error(formatProdErrorMessage(31,fe==="[object Object]"?"object with keys {"+Object.keys(K).join(", ")+"}":fe)))}function resolveLazy(fe){var K=fe._init;return K(fe._payload)}function createChildReconciler(fe){function K(Be,Le){if(fe){var Oe=Be.deletions;Oe===null?(Be.deletions=[Le],Be.flags|=16):Oe.push(Le)}}function me(Be,Le){if(!fe)return null;for(;Le!==null;)K(Be,Le),Le=Le.sibling;return null}function ge(Be){for(var Le=new Map;Be!==null;)Be.key!==null?Le.set(Be.key,Be):Le.set(Be.index,Be),Be=Be.sibling;return Le}function xe(Be,Le){return Be=createWorkInProgress(Be,Le),Be.index=0,Be.sibling=null,Be}function ye(Be,Le,Oe){return Be.index=Oe,fe?(Oe=Be.alternate,Oe!==null?(Oe=Oe.index,Oe<Le?(Be.flags|=33554434,Le):Oe):(Be.flags|=33554434,Le)):(Be.flags|=1048576,Le)}function ve(Be){return fe&&Be.alternate===null&&(Be.flags|=33554434),Be}function _e(Be,Le,Oe,Fe){return Le===null||Le.tag!==6?(Le=createFiberFromText(Oe,Be.mode,Fe),Le.return=Be,Le):(Le=xe(Le,Oe),Le.return=Be,Le)}function Ee(Be,Le,Oe,Fe){var Ue=Oe.type;return Ue===REACT_FRAGMENT_TYPE?Ae(Be,Le,Oe.props.children,Fe,Oe.key):Le!==null&&(Le.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===REACT_LAZY_TYPE&&resolveLazy(Ue)===Le.type)?(Le=xe(Le,Oe.props),coerceRef(Le,Oe),Le.return=Be,Le):(Le=createFiberFromTypeAndProps(Oe.type,Oe.key,Oe.props,null,Be.mode,Fe),coerceRef(Le,Oe),Le.return=Be,Le)}function be(Be,Le,Oe,Fe){return Le===null||Le.tag!==4||Le.stateNode.containerInfo!==Oe.containerInfo||Le.stateNode.implementation!==Oe.implementation?(Le=createFiberFromPortal(Oe,Be.mode,Fe),Le.return=Be,Le):(Le=xe(Le,Oe.children||[]),Le.return=Be,Le)}function Ae(Be,Le,Oe,Fe,Ue){return Le===null||Le.tag!==7?(Le=createFiberFromFragment(Oe,Be.mode,Fe,Ue),Le.return=Be,Le):(Le=xe(Le,Oe),Le.return=Be,Le)}function Se(Be,Le,Oe){if(typeof Le=="string"&&Le!==""||typeof Le=="number"||typeof Le=="bigint")return Le=createFiberFromText(""+Le,Be.mode,Oe),Le.return=Be,Le;if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case REACT_ELEMENT_TYPE:return Oe=createFiberFromTypeAndProps(Le.type,Le.key,Le.props,null,Be.mode,Oe),coerceRef(Oe,Le),Oe.return=Be,Oe;case REACT_PORTAL_TYPE:return Le=createFiberFromPortal(Le,Be.mode,Oe),Le.return=Be,Le;case REACT_LAZY_TYPE:var Fe=Le._init;return Le=Fe(Le._payload),Se(Be,Le,Oe)}if(isArrayImpl(Le)||getIteratorFn(Le))return Le=createFiberFromFragment(Le,Be.mode,Oe,null),Le.return=Be,Le;if(typeof Le.then=="function")return Se(Be,unwrapThenable(Le),Oe);if(Le.$$typeof===REACT_CONTEXT_TYPE)return Se(Be,readContextDuringReconciliation(Be,Le),Oe);throwOnInvalidObjectType(Be,Le)}return null}function Ce(Be,Le,Oe,Fe){var Ue=Le!==null?Le.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return Ue!==null?null:_e(Be,Le,""+Oe,Fe);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case REACT_ELEMENT_TYPE:return Oe.key===Ue?Ee(Be,Le,Oe,Fe):null;case REACT_PORTAL_TYPE:return Oe.key===Ue?be(Be,Le,Oe,Fe):null;case REACT_LAZY_TYPE:return Ue=Oe._init,Oe=Ue(Oe._payload),Ce(Be,Le,Oe,Fe)}if(isArrayImpl(Oe)||getIteratorFn(Oe))return Ue!==null?null:Ae(Be,Le,Oe,Fe,null);if(typeof Oe.then=="function")return Ce(Be,Le,unwrapThenable(Oe),Fe);if(Oe.$$typeof===REACT_CONTEXT_TYPE)return Ce(Be,Le,readContextDuringReconciliation(Be,Oe),Fe);throwOnInvalidObjectType(Be,Oe)}return null}function Te(Be,Le,Oe,Fe,Ue){if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number"||typeof Fe=="bigint")return Be=Be.get(Oe)||null,_e(Le,Be,""+Fe,Ue);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case REACT_ELEMENT_TYPE:return Be=Be.get(Fe.key===null?Oe:Fe.key)||null,Ee(Le,Be,Fe,Ue);case REACT_PORTAL_TYPE:return Be=Be.get(Fe.key===null?Oe:Fe.key)||null,be(Le,Be,Fe,Ue);case REACT_LAZY_TYPE:var Ne=Fe._init;return Fe=Ne(Fe._payload),Te(Be,Le,Oe,Fe,Ue)}if(isArrayImpl(Fe)||getIteratorFn(Fe))return Be=Be.get(Oe)||null,Ae(Le,Be,Fe,Ue,null);if(typeof Fe.then=="function")return Te(Be,Le,Oe,unwrapThenable(Fe),Ue);if(Fe.$$typeof===REACT_CONTEXT_TYPE)return Te(Be,Le,Oe,readContextDuringReconciliation(Le,Fe),Ue);throwOnInvalidObjectType(Le,Fe)}return null}function Re(Be,Le,Oe,Fe){for(var Ue=null,Ne=null,He=Le,ze=Le=0,je=null;He!==null&&ze<Oe.length;ze++){He.index>ze?(je=He,He=null):je=He.sibling;var Ge=Ce(Be,He,Oe[ze],Fe);if(Ge===null){He===null&&(He=je);break}fe&&He&&Ge.alternate===null&&K(Be,He),Le=ye(Ge,Le,ze),Ne===null?Ue=Ge:Ne.sibling=Ge,Ne=Ge,He=je}if(ze===Oe.length)return me(Be,He),isHydrating&&pushTreeFork(Be,ze),Ue;if(He===null){for(;ze<Oe.length;ze++)He=Se(Be,Oe[ze],Fe),He!==null&&(Le=ye(He,Le,ze),Ne===null?Ue=He:Ne.sibling=He,Ne=He);return isHydrating&&pushTreeFork(Be,ze),Ue}for(He=ge(He);ze<Oe.length;ze++)je=Te(He,Be,ze,Oe[ze],Fe),je!==null&&(fe&&je.alternate!==null&&He.delete(je.key===null?ze:je.key),Le=ye(je,Le,ze),Ne===null?Ue=je:Ne.sibling=je,Ne=je);return fe&&He.forEach(function(Xe){return K(Be,Xe)}),isHydrating&&pushTreeFork(Be,ze),Ue}function De(Be,Le,Oe,Fe){if(Oe==null)throw Error(formatProdErrorMessage(151));for(var Ue=null,Ne=null,He=Le,ze=Le=0,je=null,Ge=Oe.next();He!==null&&!Ge.done;ze++,Ge=Oe.next()){He.index>ze?(je=He,He=null):je=He.sibling;var Xe=Ce(Be,He,Ge.value,Fe);if(Xe===null){He===null&&(He=je);break}fe&&He&&Xe.alternate===null&&K(Be,He),Le=ye(Xe,Le,ze),Ne===null?Ue=Xe:Ne.sibling=Xe,Ne=Xe,He=je}if(Ge.done)return me(Be,He),isHydrating&&pushTreeFork(Be,ze),Ue;if(He===null){for(;!Ge.done;ze++,Ge=Oe.next())Ge=Se(Be,Ge.value,Fe),Ge!==null&&(Le=ye(Ge,Le,ze),Ne===null?Ue=Ge:Ne.sibling=Ge,Ne=Ge);return isHydrating&&pushTreeFork(Be,ze),Ue}for(He=ge(He);!Ge.done;ze++,Ge=Oe.next())Ge=Te(He,Be,ze,Ge.value,Fe),Ge!==null&&(fe&&Ge.alternate!==null&&He.delete(Ge.key===null?ze:Ge.key),Le=ye(Ge,Le,ze),Ne===null?Ue=Ge:Ne.sibling=Ge,Ne=Ge);return fe&&He.forEach(function(qe){return K(Be,qe)}),isHydrating&&pushTreeFork(Be,ze),Ue}function Ie(Be,Le,Oe,Fe){if(typeof Oe=="object"&&Oe!==null&&Oe.type===REACT_FRAGMENT_TYPE&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case REACT_ELEMENT_TYPE:e:{for(var Ue=Oe.key;Le!==null;){if(Le.key===Ue){if(Ue=Oe.type,Ue===REACT_FRAGMENT_TYPE){if(Le.tag===7){me(Be,Le.sibling),Fe=xe(Le,Oe.props.children),Fe.return=Be,Be=Fe;break e}}else if(Le.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===REACT_LAZY_TYPE&&resolveLazy(Ue)===Le.type){me(Be,Le.sibling),Fe=xe(Le,Oe.props),coerceRef(Fe,Oe),Fe.return=Be,Be=Fe;break e}me(Be,Le);break}else K(Be,Le);Le=Le.sibling}Oe.type===REACT_FRAGMENT_TYPE?(Fe=createFiberFromFragment(Oe.props.children,Be.mode,Fe,Oe.key),Fe.return=Be,Be=Fe):(Fe=createFiberFromTypeAndProps(Oe.type,Oe.key,Oe.props,null,Be.mode,Fe),coerceRef(Fe,Oe),Fe.return=Be,Be=Fe)}return ve(Be);case REACT_PORTAL_TYPE:e:{for(Ue=Oe.key;Le!==null;){if(Le.key===Ue)if(Le.tag===4&&Le.stateNode.containerInfo===Oe.containerInfo&&Le.stateNode.implementation===Oe.implementation){me(Be,Le.sibling),Fe=xe(Le,Oe.children||[]),Fe.return=Be,Be=Fe;break e}else{me(Be,Le);break}else K(Be,Le);Le=Le.sibling}Fe=createFiberFromPortal(Oe,Be.mode,Fe),Fe.return=Be,Be=Fe}return ve(Be);case REACT_LAZY_TYPE:return Ue=Oe._init,Oe=Ue(Oe._payload),Ie(Be,Le,Oe,Fe)}if(isArrayImpl(Oe))return Re(Be,Le,Oe,Fe);if(getIteratorFn(Oe)){if(Ue=getIteratorFn(Oe),typeof Ue!="function")throw Error(formatProdErrorMessage(150));return Oe=Ue.call(Oe),De(Be,Le,Oe,Fe)}if(typeof Oe.then=="function")return Ie(Be,Le,unwrapThenable(Oe),Fe);if(Oe.$$typeof===REACT_CONTEXT_TYPE)return Ie(Be,Le,readContextDuringReconciliation(Be,Oe),Fe);throwOnInvalidObjectType(Be,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint"?(Oe=""+Oe,Le!==null&&Le.tag===6?(me(Be,Le.sibling),Fe=xe(Le,Oe),Fe.return=Be,Be=Fe):(me(Be,Le),Fe=createFiberFromText(Oe,Be.mode,Fe),Fe.return=Be,Be=Fe),ve(Be)):me(Be,Le)}return function(Be,Le,Oe,Fe){try{thenableIndexCounter$1=0;var Ue=Ie(Be,Le,Oe,Fe);return thenableState$1=null,Ue}catch(He){if(He===SuspenseException)throw He;var Ne=createFiberImplClass(29,He,null,Be.mode);return Ne.lanes=Fe,Ne.return=Be,Ne}finally{}}}var reconcileChildFibers=createChildReconciler(!0),mountChildFibers=createChildReconciler(!1),currentTreeHiddenStackCursor=createCursor(null),prevEntangledRenderLanesCursor=createCursor(0);function pushHiddenContext(fe,K){fe=entangledRenderLanes,push$1(prevEntangledRenderLanesCursor,fe),push$1(currentTreeHiddenStackCursor,K),entangledRenderLanes=fe|K.baseLanes}function reuseHiddenContextOnStack(){push$1(prevEntangledRenderLanesCursor,entangledRenderLanes),push$1(currentTreeHiddenStackCursor,currentTreeHiddenStackCursor.current)}function popHiddenContext(){entangledRenderLanes=prevEntangledRenderLanesCursor.current,pop(currentTreeHiddenStackCursor),pop(prevEntangledRenderLanesCursor)}var suspenseHandlerStackCursor=createCursor(null),shellBoundary=null;function pushPrimaryTreeSuspenseHandler(fe){var K=fe.alternate;push$1(suspenseStackCursor,suspenseStackCursor.current&1),push$1(suspenseHandlerStackCursor,fe),shellBoundary===null&&(K===null||currentTreeHiddenStackCursor.current!==null||K.memoizedState!==null)&&(shellBoundary=fe)}function pushOffscreenSuspenseHandler(fe){if(fe.tag===22){if(push$1(suspenseStackCursor,suspenseStackCursor.current),push$1(suspenseHandlerStackCursor,fe),shellBoundary===null){var K=fe.alternate;K!==null&&K.memoizedState!==null&&(shellBoundary=fe)}}else reuseSuspenseHandlerOnStack()}function reuseSuspenseHandlerOnStack(){push$1(suspenseStackCursor,suspenseStackCursor.current),push$1(suspenseHandlerStackCursor,suspenseHandlerStackCursor.current)}function popSuspenseHandler(fe){pop(suspenseHandlerStackCursor),shellBoundary===fe&&(shellBoundary=null),pop(suspenseStackCursor)}var suspenseStackCursor=createCursor(0);function findFirstSuspended(fe){for(var K=fe;K!==null;){if(K.tag===13){var me=K.memoizedState;if(me!==null&&(me=me.dehydrated,me===null||me.data==="$?"||me.data==="$!"))return K}else if(K.tag===19&&K.memoizedProps.revealOrder!==void 0){if(K.flags&128)return K}else if(K.child!==null){K.child.return=K,K=K.child;continue}if(K===fe)break;for(;K.sibling===null;){if(K.return===null||K.return===fe)return null;K=K.return}K.sibling.return=K.return,K=K.sibling}return null}var AbortControllerLocal=typeof AbortController<"u"?AbortController:function(){var fe=[],K=this.signal={aborted:!1,addEventListener:function(me,ge){fe.push(ge)}};this.abort=function(){K.aborted=!0,fe.forEach(function(me){return me()})}},scheduleCallback$2=Scheduler.unstable_scheduleCallback,NormalPriority=Scheduler.unstable_NormalPriority,CacheContext={$$typeof:REACT_CONTEXT_TYPE,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function createCache(){return{controller:new AbortControllerLocal,data:new Map,refCount:0}}function releaseCache(fe){fe.refCount--,fe.refCount===0&&scheduleCallback$2(NormalPriority,function(){fe.controller.abort()})}var currentEntangledListeners=null,currentEntangledPendingCount=0,currentEntangledLane=0,currentEntangledActionThenable=null;function entangleAsyncAction(fe,K){if(currentEntangledListeners===null){var me=currentEntangledListeners=[];currentEntangledPendingCount=0,currentEntangledLane=requestTransitionLane(),currentEntangledActionThenable={status:"pending",value:void 0,then:function(ge){me.push(ge)}}}return currentEntangledPendingCount++,K.then(pingEngtangledActionScope,pingEngtangledActionScope),K}function pingEngtangledActionScope(){if(--currentEntangledPendingCount===0&&currentEntangledListeners!==null){currentEntangledActionThenable!==null&&(currentEntangledActionThenable.status="fulfilled");var fe=currentEntangledListeners;currentEntangledListeners=null,currentEntangledLane=0,currentEntangledActionThenable=null;for(var K=0;K<fe.length;K++)(0,fe[K])()}}function chainThenableValue(fe,K){var me=[],ge={status:"pending",value:null,reason:null,then:function(xe){me.push(xe)}};return fe.then(function(){ge.status="fulfilled",ge.value=K;for(var xe=0;xe<me.length;xe++)(0,me[xe])(K)},function(xe){for(ge.status="rejected",ge.reason=xe,xe=0;xe<me.length;xe++)(0,me[xe])(void 0)}),ge}var prevOnStartTransitionFinish=ReactSharedInternals.S;ReactSharedInternals.S=function(fe,K){typeof K=="object"&&K!==null&&typeof K.then=="function"&&entangleAsyncAction(fe,K),prevOnStartTransitionFinish!==null&&prevOnStartTransitionFinish(fe,K)};var resumedCache=createCursor(null);function peekCacheFromPool(){var fe=resumedCache.current;return fe!==null?fe:workInProgressRoot.pooledCache}function pushTransition(fe,K){K===null?push$1(resumedCache,resumedCache.current):push$1(resumedCache,K.pool)}function getSuspendedCache(){var fe=peekCacheFromPool();return fe===null?null:{parent:CacheContext._currentValue,pool:fe}}var renderLanes=0,currentlyRenderingFiber$1=null,currentHook=null,workInProgressHook=null,didScheduleRenderPhaseUpdate=!1,didScheduleRenderPhaseUpdateDuringThisPass=!1,shouldDoubleInvokeUserFnsInHooksDEV=!1,localIdCounter=0,thenableIndexCounter=0,thenableState=null,globalClientIdCounter=0;function throwInvalidHookError(){throw Error(formatProdErrorMessage(321))}function areHookInputsEqual(fe,K){if(K===null)return!1;for(var me=0;me<K.length&&me<fe.length;me++)if(!objectIs$2(fe[me],K[me]))return!1;return!0}function renderWithHooks(fe,K,me,ge,xe,ye){return renderLanes=ye,currentlyRenderingFiber$1=K,K.memoizedState=null,K.updateQueue=null,K.lanes=0,ReactSharedInternals.H=fe===null||fe.memoizedState===null?HooksDispatcherOnMount:HooksDispatcherOnUpdate,shouldDoubleInvokeUserFnsInHooksDEV=!1,ye=me(ge,xe),shouldDoubleInvokeUserFnsInHooksDEV=!1,didScheduleRenderPhaseUpdateDuringThisPass&&(ye=renderWithHooksAgain(K,me,ge,xe)),finishRenderingHooks(fe),ye}function finishRenderingHooks(fe){ReactSharedInternals.H=ContextOnlyDispatcher;var K=currentHook!==null&&currentHook.next!==null;if(renderLanes=0,workInProgressHook=currentHook=currentlyRenderingFiber$1=null,didScheduleRenderPhaseUpdate=!1,thenableIndexCounter=0,thenableState=null,K)throw Error(formatProdErrorMessage(300));fe===null||didReceiveUpdate||(fe=fe.dependencies,fe!==null&&checkIfContextChanged(fe)&&(didReceiveUpdate=!0))}function renderWithHooksAgain(fe,K,me,ge){currentlyRenderingFiber$1=fe;var xe=0;do{if(didScheduleRenderPhaseUpdateDuringThisPass&&(thenableState=null),thenableIndexCounter=0,didScheduleRenderPhaseUpdateDuringThisPass=!1,25<=xe)throw Error(formatProdErrorMessage(301));if(xe+=1,workInProgressHook=currentHook=null,fe.updateQueue!=null){var ye=fe.updateQueue;ye.lastEffect=null,ye.events=null,ye.stores=null,ye.memoCache!=null&&(ye.memoCache.index=0)}ReactSharedInternals.H=HooksDispatcherOnRerender,ye=K(me,ge)}while(didScheduleRenderPhaseUpdateDuringThisPass);return ye}function TransitionAwareHostComponent(){var fe=ReactSharedInternals.H,K=fe.useState()[0];return K=typeof K.then=="function"?useThenable(K):K,fe=fe.useState()[0],(currentHook!==null?currentHook.memoizedState:null)!==fe&&(currentlyRenderingFiber$1.flags|=1024),K}function checkDidRenderIdHook(){var fe=localIdCounter!==0;return localIdCounter=0,fe}function bailoutHooks(fe,K,me){K.updateQueue=fe.updateQueue,K.flags&=-2053,fe.lanes&=~me}function resetHooksOnUnwind(fe){if(didScheduleRenderPhaseUpdate){for(fe=fe.memoizedState;fe!==null;){var K=fe.queue;K!==null&&(K.pending=null),fe=fe.next}didScheduleRenderPhaseUpdate=!1}renderLanes=0,workInProgressHook=currentHook=currentlyRenderingFiber$1=null,didScheduleRenderPhaseUpdateDuringThisPass=!1,thenableIndexCounter=localIdCounter=0,thenableState=null}function mountWorkInProgressHook(){var fe={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return workInProgressHook===null?currentlyRenderingFiber$1.memoizedState=workInProgressHook=fe:workInProgressHook=workInProgressHook.next=fe,workInProgressHook}function updateWorkInProgressHook(){if(currentHook===null){var fe=currentlyRenderingFiber$1.alternate;fe=fe!==null?fe.memoizedState:null}else fe=currentHook.next;var K=workInProgressHook===null?currentlyRenderingFiber$1.memoizedState:workInProgressHook.next;if(K!==null)workInProgressHook=K,currentHook=fe;else{if(fe===null)throw currentlyRenderingFiber$1.alternate===null?Error(formatProdErrorMessage(467)):Error(formatProdErrorMessage(310));currentHook=fe,fe={memoizedState:currentHook.memoizedState,baseState:currentHook.baseState,baseQueue:currentHook.baseQueue,queue:currentHook.queue,next:null},workInProgressHook===null?currentlyRenderingFiber$1.memoizedState=workInProgressHook=fe:workInProgressHook=workInProgressHook.next=fe}return workInProgressHook}var createFunctionComponentUpdateQueue;createFunctionComponentUpdateQueue=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function useThenable(fe){var K=thenableIndexCounter;return thenableIndexCounter+=1,thenableState===null&&(thenableState=[]),fe=trackUsedThenable(thenableState,fe,K),K=currentlyRenderingFiber$1,(workInProgressHook===null?K.memoizedState:workInProgressHook.next)===null&&(K=K.alternate,ReactSharedInternals.H=K===null||K.memoizedState===null?HooksDispatcherOnMount:HooksDispatcherOnUpdate),fe}function use(fe){if(fe!==null&&typeof fe=="object"){if(typeof fe.then=="function")return useThenable(fe);if(fe.$$typeof===REACT_CONTEXT_TYPE)return readContext(fe)}throw Error(formatProdErrorMessage(438,String(fe)))}function useMemoCache(fe){var K=null,me=currentlyRenderingFiber$1.updateQueue;if(me!==null&&(K=me.memoCache),K==null){var ge=currentlyRenderingFiber$1.alternate;ge!==null&&(ge=ge.updateQueue,ge!==null&&(ge=ge.memoCache,ge!=null&&(K={data:ge.data.map(function(xe){return xe.slice()}),index:0})))}if(K==null&&(K={data:[],index:0}),me===null&&(me=createFunctionComponentUpdateQueue(),currentlyRenderingFiber$1.updateQueue=me),me.memoCache=K,me=K.data[K.index],me===void 0)for(me=K.data[K.index]=Array(fe),ge=0;ge<fe;ge++)me[ge]=REACT_MEMO_CACHE_SENTINEL;return K.index++,me}function basicStateReducer(fe,K){return typeof K=="function"?K(fe):K}function updateReducer(fe){var K=updateWorkInProgressHook();return updateReducerImpl(K,currentHook,fe)}function updateReducerImpl(fe,K,me){var ge=fe.queue;if(ge===null)throw Error(formatProdErrorMessage(311));ge.lastRenderedReducer=me;var xe=fe.baseQueue,ye=ge.pending;if(ye!==null){if(xe!==null){var ve=xe.next;xe.next=ye.next,ye.next=ve}K.baseQueue=xe=ye,ge.pending=null}if(ye=fe.baseState,xe===null)fe.memoizedState=ye;else{K=xe.next;var _e=ve=null,Ee=null,be=K,Ae=!1;do{var Se=be.lane&-536870913;if(Se!==be.lane?(workInProgressRootRenderLanes&Se)===Se:(renderLanes&Se)===Se){var Ce=be.revertLane;if(Ce===0)Ee!==null&&(Ee=Ee.next={lane:0,revertLane:0,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null}),Se===currentEntangledLane&&(Ae=!0);else if((renderLanes&Ce)===Ce){be=be.next,Ce===currentEntangledLane&&(Ae=!0);continue}else Se={lane:0,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},Ee===null?(_e=Ee=Se,ve=ye):Ee=Ee.next=Se,currentlyRenderingFiber$1.lanes|=Ce,workInProgressRootSkippedLanes|=Ce;Se=be.action,shouldDoubleInvokeUserFnsInHooksDEV&&me(ye,Se),ye=be.hasEagerState?be.eagerState:me(ye,Se)}else Ce={lane:Se,revertLane:be.revertLane,action:be.action,hasEagerState:be.hasEagerState,eagerState:be.eagerState,next:null},Ee===null?(_e=Ee=Ce,ve=ye):Ee=Ee.next=Ce,currentlyRenderingFiber$1.lanes|=Se,workInProgressRootSkippedLanes|=Se;be=be.next}while(be!==null&&be!==K);if(Ee===null?ve=ye:Ee.next=_e,!objectIs$2(ye,fe.memoizedState)&&(didReceiveUpdate=!0,Ae&&(me=currentEntangledActionThenable,me!==null)))throw me;fe.memoizedState=ye,fe.baseState=ve,fe.baseQueue=Ee,ge.lastRenderedState=ye}return xe===null&&(ge.lanes=0),[fe.memoizedState,ge.dispatch]}function rerenderReducer(fe){var K=updateWorkInProgressHook(),me=K.queue;if(me===null)throw Error(formatProdErrorMessage(311));me.lastRenderedReducer=fe;var ge=me.dispatch,xe=me.pending,ye=K.memoizedState;if(xe!==null){me.pending=null;var ve=xe=xe.next;do ye=fe(ye,ve.action),ve=ve.next;while(ve!==xe);objectIs$2(ye,K.memoizedState)||(didReceiveUpdate=!0),K.memoizedState=ye,K.baseQueue===null&&(K.baseState=ye),me.lastRenderedState=ye}return[ye,ge]}function updateSyncExternalStore(fe,K,me){var ge=currentlyRenderingFiber$1,xe=updateWorkInProgressHook(),ye=isHydrating;if(ye){if(me===void 0)throw Error(formatProdErrorMessage(407));me=me()}else me=K();var ve=!objectIs$2((currentHook||xe).memoizedState,me);if(ve&&(xe.memoizedState=me,didReceiveUpdate=!0),xe=xe.queue,updateEffect(subscribeToStore.bind(null,ge,xe,fe),[fe]),xe.getSnapshot!==K||ve||workInProgressHook!==null&&workInProgressHook.memoizedState.tag&1){if(ge.flags|=2048,pushEffect(9,updateStoreInstance.bind(null,ge,xe,me,K),{destroy:void 0},null),workInProgressRoot===null)throw Error(formatProdErrorMessage(349));ye||renderLanes&60||pushStoreConsistencyCheck(ge,K,me)}return me}function pushStoreConsistencyCheck(fe,K,me){fe.flags|=16384,fe={getSnapshot:K,value:me},K=currentlyRenderingFiber$1.updateQueue,K===null?(K=createFunctionComponentUpdateQueue(),currentlyRenderingFiber$1.updateQueue=K,K.stores=[fe]):(me=K.stores,me===null?K.stores=[fe]:me.push(fe))}function updateStoreInstance(fe,K,me,ge){K.value=me,K.getSnapshot=ge,checkIfSnapshotChanged$1(K)&&forceStoreRerender(fe)}function subscribeToStore(fe,K,me){return me(function(){checkIfSnapshotChanged$1(K)&&forceStoreRerender(fe)})}function checkIfSnapshotChanged$1(fe){var K=fe.getSnapshot;fe=fe.value;try{var me=K();return!objectIs$2(fe,me)}catch{return!0}}function forceStoreRerender(fe){var K=enqueueConcurrentRenderForLane(fe,2);K!==null&&scheduleUpdateOnFiber(K,fe,2)}function mountStateImpl(fe){var K=mountWorkInProgressHook();if(typeof fe=="function"){var me=fe;if(fe=me(),shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{me()}finally{setIsStrictModeForDevtools(!1)}}}return K.memoizedState=K.baseState=fe,K.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:fe},K}function updateOptimisticImpl(fe,K,me,ge){return fe.baseState=me,updateReducerImpl(fe,currentHook,typeof ge=="function"?ge:basicStateReducer)}function dispatchActionState(fe,K,me,ge,xe){if(isRenderPhaseUpdate(fe))throw Error(formatProdErrorMessage(485));if(fe=K.action,fe!==null){var ye={payload:xe,action:fe,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ve){ye.listeners.push(ve)}};ReactSharedInternals.T!==null?me(!0):ye.isTransition=!1,ge(ye),me=K.pending,me===null?(ye.next=K.pending=ye,runActionStateAction(K,ye)):(ye.next=me.next,K.pending=me.next=ye)}}function runActionStateAction(fe,K){var me=K.action,ge=K.payload,xe=fe.state;if(K.isTransition){var ye=ReactSharedInternals.T,ve={};ReactSharedInternals.T=ve;try{var _e=me(xe,ge),Ee=ReactSharedInternals.S;Ee!==null&&Ee(ve,_e),handleActionReturnValue(fe,K,_e)}catch(be){onActionError(fe,K,be)}finally{ReactSharedInternals.T=ye}}else try{ye=me(xe,ge),handleActionReturnValue(fe,K,ye)}catch(be){onActionError(fe,K,be)}}function handleActionReturnValue(fe,K,me){me!==null&&typeof me=="object"&&typeof me.then=="function"?me.then(function(ge){onActionSuccess(fe,K,ge)},function(ge){return onActionError(fe,K,ge)}):onActionSuccess(fe,K,me)}function onActionSuccess(fe,K,me){K.status="fulfilled",K.value=me,notifyActionListeners(K),fe.state=me,K=fe.pending,K!==null&&(me=K.next,me===K?fe.pending=null:(me=me.next,K.next=me,runActionStateAction(fe,me)))}function onActionError(fe,K,me){var ge=fe.pending;if(fe.pending=null,ge!==null){ge=ge.next;do K.status="rejected",K.reason=me,notifyActionListeners(K),K=K.next;while(K!==ge)}fe.action=null}function notifyActionListeners(fe){fe=fe.listeners;for(var K=0;K<fe.length;K++)(0,fe[K])()}function actionStateReducer(fe,K){return K}function mountActionState(fe,K){if(isHydrating){var me=workInProgressRoot.formState;if(me!==null){e:{var ge=currentlyRenderingFiber$1;if(isHydrating){if(nextHydratableInstance){t:{for(var xe=nextHydratableInstance,ye=rootOrSingletonContext;xe.nodeType!==8;){if(!ye){xe=null;break t}if(xe=getNextHydratable(xe.nextSibling),xe===null){xe=null;break t}}ye=xe.data,xe=ye==="F!"||ye==="F"?xe:null}if(xe){nextHydratableInstance=getNextHydratable(xe.nextSibling),ge=xe.data==="F!";break e}}throwOnHydrationMismatch(ge)}ge=!1}ge&&(K=me[0])}}return me=mountWorkInProgressHook(),me.memoizedState=me.baseState=K,ge={pending:null,lanes:0,dispatch:null,lastRenderedReducer:actionStateReducer,lastRenderedState:K},me.queue=ge,me=dispatchSetState.bind(null,currentlyRenderingFiber$1,ge),ge.dispatch=me,ge=mountStateImpl(!1),ye=dispatchOptimisticSetState.bind(null,currentlyRenderingFiber$1,!1,ge.queue),ge=mountWorkInProgressHook(),xe={state:K,dispatch:null,action:fe,pending:null},ge.queue=xe,me=dispatchActionState.bind(null,currentlyRenderingFiber$1,xe,ye,me),xe.dispatch=me,ge.memoizedState=fe,[K,me,!1]}function updateActionState(fe){var K=updateWorkInProgressHook();return updateActionStateImpl(K,currentHook,fe)}function updateActionStateImpl(fe,K,me){K=updateReducerImpl(fe,K,actionStateReducer)[0],fe=updateReducer(basicStateReducer)[0],K=typeof K=="object"&&K!==null&&typeof K.then=="function"?useThenable(K):K;var ge=updateWorkInProgressHook(),xe=ge.queue,ye=xe.dispatch;return me!==ge.memoizedState&&(currentlyRenderingFiber$1.flags|=2048,pushEffect(9,actionStateActionEffect.bind(null,xe,me),{destroy:void 0},null)),[K,ye,fe]}function actionStateActionEffect(fe,K){fe.action=K}function rerenderActionState(fe){var K=updateWorkInProgressHook(),me=currentHook;if(me!==null)return updateActionStateImpl(K,me,fe);updateWorkInProgressHook(),K=K.memoizedState,me=updateWorkInProgressHook();var ge=me.queue.dispatch;return me.memoizedState=fe,[K,ge,!1]}function pushEffect(fe,K,me,ge){return fe={tag:fe,create:K,inst:me,deps:ge,next:null},K=currentlyRenderingFiber$1.updateQueue,K===null&&(K=createFunctionComponentUpdateQueue(),currentlyRenderingFiber$1.updateQueue=K),me=K.lastEffect,me===null?K.lastEffect=fe.next=fe:(ge=me.next,me.next=fe,fe.next=ge,K.lastEffect=fe),fe}function updateRef$1(){return updateWorkInProgressHook().memoizedState}function mountEffectImpl(fe,K,me,ge){var xe=mountWorkInProgressHook();currentlyRenderingFiber$1.flags|=fe,xe.memoizedState=pushEffect(1|K,me,{destroy:void 0},ge===void 0?null:ge)}function updateEffectImpl(fe,K,me,ge){var xe=updateWorkInProgressHook();ge=ge===void 0?null:ge;var ye=xe.memoizedState.inst;currentHook!==null&&ge!==null&&areHookInputsEqual(ge,currentHook.memoizedState.deps)?xe.memoizedState=pushEffect(K,me,ye,ge):(currentlyRenderingFiber$1.flags|=fe,xe.memoizedState=pushEffect(1|K,me,ye,ge))}function mountEffect(fe,K){mountEffectImpl(8390656,8,fe,K)}function updateEffect(fe,K){updateEffectImpl(2048,8,fe,K)}function updateInsertionEffect(fe,K){return updateEffectImpl(4,2,fe,K)}function updateLayoutEffect(fe,K){return updateEffectImpl(4,4,fe,K)}function imperativeHandleEffect(fe,K){if(typeof K=="function"){fe=fe();var me=K(fe);return function(){typeof me=="function"?me():K(null)}}if(K!=null)return fe=fe(),K.current=fe,function(){K.current=null}}function updateImperativeHandle(fe,K,me){me=me!=null?me.concat([fe]):null,updateEffectImpl(4,4,imperativeHandleEffect.bind(null,K,fe),me)}function mountDebugValue(){}function updateCallback(fe,K){var me=updateWorkInProgressHook();K=K===void 0?null:K;var ge=me.memoizedState;return K!==null&&areHookInputsEqual(K,ge[1])?ge[0]:(me.memoizedState=[fe,K],fe)}function updateMemo(fe,K){var me=updateWorkInProgressHook();K=K===void 0?null:K;var ge=me.memoizedState;if(K!==null&&areHookInputsEqual(K,ge[1]))return ge[0];if(ge=fe(),shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{fe()}finally{setIsStrictModeForDevtools(!1)}}return me.memoizedState=[ge,K],ge}function mountDeferredValueImpl(fe,K,me){return me===void 0||renderLanes&1073741824?fe.memoizedState=K:(fe.memoizedState=me,fe=requestDeferredLane(),currentlyRenderingFiber$1.lanes|=fe,workInProgressRootSkippedLanes|=fe,me)}function updateDeferredValueImpl(fe,K,me,ge){return objectIs$2(me,K)?me:currentTreeHiddenStackCursor.current!==null?(fe=mountDeferredValueImpl(fe,me,ge),objectIs$2(fe,K)||(didReceiveUpdate=!0),fe):renderLanes&42?(fe=requestDeferredLane(),currentlyRenderingFiber$1.lanes|=fe,workInProgressRootSkippedLanes|=fe,K):(didReceiveUpdate=!0,fe.memoizedState=me)}function startTransition(fe,K,me,ge,xe){var ye=ReactDOMSharedInternals.p;ReactDOMSharedInternals.p=ye!==0&&8>ye?ye:8;var ve=ReactSharedInternals.T,_e={};ReactSharedInternals.T=_e,dispatchOptimisticSetState(fe,!1,K,me);try{var Ee=xe(),be=ReactSharedInternals.S;if(be!==null&&be(_e,Ee),Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Ae=chainThenableValue(Ee,ge);dispatchSetStateInternal(fe,K,Ae,requestUpdateLane(fe))}else dispatchSetStateInternal(fe,K,ge,requestUpdateLane(fe))}catch(Se){dispatchSetStateInternal(fe,K,{then:function(){},status:"rejected",reason:Se},requestUpdateLane())}finally{ReactDOMSharedInternals.p=ye,ReactSharedInternals.T=ve}}function noop$2$1(){}function startHostTransition(fe,K,me,ge){if(fe.tag!==5)throw Error(formatProdErrorMessage(476));var xe=ensureFormComponentIsStateful(fe).queue;startTransition(fe,xe,K,sharedNotPendingObject,me===null?noop$2$1:function(){return requestFormReset$1(fe),me(ge)})}function ensureFormComponentIsStateful(fe){var K=fe.memoizedState;if(K!==null)return K;K={memoizedState:sharedNotPendingObject,baseState:sharedNotPendingObject,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:sharedNotPendingObject},next:null};var me={};return K.next={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:basicStateReducer,lastRenderedState:me},next:null},fe.memoizedState=K,fe=fe.alternate,fe!==null&&(fe.memoizedState=K),K}function requestFormReset$1(fe){var K=ensureFormComponentIsStateful(fe).next.queue;dispatchSetStateInternal(fe,K,{},requestUpdateLane())}function useHostTransitionStatus(){return readContext(HostTransitionContext)}function updateId(){return updateWorkInProgressHook().memoizedState}function updateRefresh(){return updateWorkInProgressHook().memoizedState}function refreshCache(fe){for(var K=fe.return;K!==null;){switch(K.tag){case 24:case 3:var me=requestUpdateLane();fe=createUpdate(me);var ge=enqueueUpdate(K,fe,me);ge!==null&&(scheduleUpdateOnFiber(ge,K,me),entangleTransitions(ge,K,me)),K={cache:createCache()},fe.payload=K;return}K=K.return}}function dispatchReducerAction(fe,K,me){var ge=requestUpdateLane();me={lane:ge,revertLane:0,action:me,hasEagerState:!1,eagerState:null,next:null},isRenderPhaseUpdate(fe)?enqueueRenderPhaseUpdate(K,me):(me=enqueueConcurrentHookUpdate(fe,K,me,ge),me!==null&&(scheduleUpdateOnFiber(me,fe,ge),entangleTransitionUpdate(me,K,ge)))}function dispatchSetState(fe,K,me){var ge=requestUpdateLane();dispatchSetStateInternal(fe,K,me,ge)}function dispatchSetStateInternal(fe,K,me,ge){var xe={lane:ge,revertLane:0,action:me,hasEagerState:!1,eagerState:null,next:null};if(isRenderPhaseUpdate(fe))enqueueRenderPhaseUpdate(K,xe);else{var ye=fe.alternate;if(fe.lanes===0&&(ye===null||ye.lanes===0)&&(ye=K.lastRenderedReducer,ye!==null))try{var ve=K.lastRenderedState,_e=ye(ve,me);if(xe.hasEagerState=!0,xe.eagerState=_e,objectIs$2(_e,ve))return enqueueUpdate$1(fe,K,xe,0),workInProgressRoot===null&&finishQueueingConcurrentUpdates(),!1}catch{}finally{}if(me=enqueueConcurrentHookUpdate(fe,K,xe,ge),me!==null)return scheduleUpdateOnFiber(me,fe,ge),entangleTransitionUpdate(me,K,ge),!0}return!1}function dispatchOptimisticSetState(fe,K,me,ge){if(ge={lane:2,revertLane:requestTransitionLane(),action:ge,hasEagerState:!1,eagerState:null,next:null},isRenderPhaseUpdate(fe)){if(K)throw Error(formatProdErrorMessage(479))}else K=enqueueConcurrentHookUpdate(fe,me,ge,2),K!==null&&scheduleUpdateOnFiber(K,fe,2)}function isRenderPhaseUpdate(fe){var K=fe.alternate;return fe===currentlyRenderingFiber$1||K!==null&&K===currentlyRenderingFiber$1}function enqueueRenderPhaseUpdate(fe,K){didScheduleRenderPhaseUpdateDuringThisPass=didScheduleRenderPhaseUpdate=!0;var me=fe.pending;me===null?K.next=K:(K.next=me.next,me.next=K),fe.pending=K}function entangleTransitionUpdate(fe,K,me){if(me&4194176){var ge=K.lanes;ge&=fe.pendingLanes,me|=ge,K.lanes=me,markRootEntangled(fe,me)}}var ContextOnlyDispatcher={readContext,use,useCallback:throwInvalidHookError,useContext:throwInvalidHookError,useEffect:throwInvalidHookError,useImperativeHandle:throwInvalidHookError,useLayoutEffect:throwInvalidHookError,useInsertionEffect:throwInvalidHookError,useMemo:throwInvalidHookError,useReducer:throwInvalidHookError,useRef:throwInvalidHookError,useState:throwInvalidHookError,useDebugValue:throwInvalidHookError,useDeferredValue:throwInvalidHookError,useTransition:throwInvalidHookError,useSyncExternalStore:throwInvalidHookError,useId:throwInvalidHookError};ContextOnlyDispatcher.useCacheRefresh=throwInvalidHookError;ContextOnlyDispatcher.useMemoCache=throwInvalidHookError;ContextOnlyDispatcher.useHostTransitionStatus=throwInvalidHookError;ContextOnlyDispatcher.useFormState=throwInvalidHookError;ContextOnlyDispatcher.useActionState=throwInvalidHookError;ContextOnlyDispatcher.useOptimistic=throwInvalidHookError;var HooksDispatcherOnMount={readContext,use,useCallback:function(fe,K){return mountWorkInProgressHook().memoizedState=[fe,K===void 0?null:K],fe},useContext:readContext,useEffect:mountEffect,useImperativeHandle:function(fe,K,me){me=me!=null?me.concat([fe]):null,mountEffectImpl(4194308,4,imperativeHandleEffect.bind(null,K,fe),me)},useLayoutEffect:function(fe,K){return mountEffectImpl(4194308,4,fe,K)},useInsertionEffect:function(fe,K){mountEffectImpl(4,2,fe,K)},useMemo:function(fe,K){var me=mountWorkInProgressHook();K=K===void 0?null:K;var ge=fe();if(shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{fe()}finally{setIsStrictModeForDevtools(!1)}}return me.memoizedState=[ge,K],ge},useReducer:function(fe,K,me){var ge=mountWorkInProgressHook();if(me!==void 0){var xe=me(K);if(shouldDoubleInvokeUserFnsInHooksDEV){setIsStrictModeForDevtools(!0);try{me(K)}finally{setIsStrictModeForDevtools(!1)}}}else xe=K;return ge.memoizedState=ge.baseState=xe,fe={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fe,lastRenderedState:xe},ge.queue=fe,fe=fe.dispatch=dispatchReducerAction.bind(null,currentlyRenderingFiber$1,fe),[ge.memoizedState,fe]},useRef:function(fe){var K=mountWorkInProgressHook();return fe={current:fe},K.memoizedState=fe},useState:function(fe){fe=mountStateImpl(fe);var K=fe.queue,me=dispatchSetState.bind(null,currentlyRenderingFiber$1,K);return K.dispatch=me,[fe.memoizedState,me]},useDebugValue:mountDebugValue,useDeferredValue:function(fe,K){var me=mountWorkInProgressHook();return mountDeferredValueImpl(me,fe,K)},useTransition:function(){var fe=mountStateImpl(!1);return fe=startTransition.bind(null,currentlyRenderingFiber$1,fe.queue,!0,!1),mountWorkInProgressHook().memoizedState=fe,[!1,fe]},useSyncExternalStore:function(fe,K,me){var ge=currentlyRenderingFiber$1,xe=mountWorkInProgressHook();if(isHydrating){if(me===void 0)throw Error(formatProdErrorMessage(407));me=me()}else{if(me=K(),workInProgressRoot===null)throw Error(formatProdErrorMessage(349));workInProgressRootRenderLanes&60||pushStoreConsistencyCheck(ge,K,me)}xe.memoizedState=me;var ye={value:me,getSnapshot:K};return xe.queue=ye,mountEffect(subscribeToStore.bind(null,ge,ye,fe),[fe]),ge.flags|=2048,pushEffect(9,updateStoreInstance.bind(null,ge,ye,me,K),{destroy:void 0},null),me},useId:function(){var fe=mountWorkInProgressHook(),K=workInProgressRoot.identifierPrefix;if(isHydrating){var me=treeContextOverflow,ge=treeContextId;me=(ge&~(1<<32-clz32(ge)-1)).toString(32)+me,K=":"+K+"R"+me,me=localIdCounter++,0<me&&(K+="H"+me.toString(32)),K+=":"}else me=globalClientIdCounter++,K=":"+K+"r"+me.toString(32)+":";return fe.memoizedState=K},useCacheRefresh:function(){return mountWorkInProgressHook().memoizedState=refreshCache.bind(null,currentlyRenderingFiber$1)}};HooksDispatcherOnMount.useMemoCache=useMemoCache;HooksDispatcherOnMount.useHostTransitionStatus=useHostTransitionStatus;HooksDispatcherOnMount.useFormState=mountActionState;HooksDispatcherOnMount.useActionState=mountActionState;HooksDispatcherOnMount.useOptimistic=function(fe){var K=mountWorkInProgressHook();K.memoizedState=K.baseState=fe;var me={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return K.queue=me,K=dispatchOptimisticSetState.bind(null,currentlyRenderingFiber$1,!0,me),me.dispatch=K,[fe,K]};var HooksDispatcherOnUpdate={readContext,use,useCallback:updateCallback,useContext:readContext,useEffect:updateEffect,useImperativeHandle:updateImperativeHandle,useInsertionEffect:updateInsertionEffect,useLayoutEffect:updateLayoutEffect,useMemo:updateMemo,useReducer:updateReducer,useRef:updateRef$1,useState:function(){return updateReducer(basicStateReducer)},useDebugValue:mountDebugValue,useDeferredValue:function(fe,K){var me=updateWorkInProgressHook();return updateDeferredValueImpl(me,currentHook.memoizedState,fe,K)},useTransition:function(){var fe=updateReducer(basicStateReducer)[0],K=updateWorkInProgressHook().memoizedState;return[typeof fe=="boolean"?fe:useThenable(fe),K]},useSyncExternalStore:updateSyncExternalStore,useId:updateId};HooksDispatcherOnUpdate.useCacheRefresh=updateRefresh;HooksDispatcherOnUpdate.useMemoCache=useMemoCache;HooksDispatcherOnUpdate.useHostTransitionStatus=useHostTransitionStatus;HooksDispatcherOnUpdate.useFormState=updateActionState;HooksDispatcherOnUpdate.useActionState=updateActionState;HooksDispatcherOnUpdate.useOptimistic=function(fe,K){var me=updateWorkInProgressHook();return updateOptimisticImpl(me,currentHook,fe,K)};var HooksDispatcherOnRerender={readContext,use,useCallback:updateCallback,useContext:readContext,useEffect:updateEffect,useImperativeHandle:updateImperativeHandle,useInsertionEffect:updateInsertionEffect,useLayoutEffect:updateLayoutEffect,useMemo:updateMemo,useReducer:rerenderReducer,useRef:updateRef$1,useState:function(){return rerenderReducer(basicStateReducer)},useDebugValue:mountDebugValue,useDeferredValue:function(fe,K){var me=updateWorkInProgressHook();return currentHook===null?mountDeferredValueImpl(me,fe,K):updateDeferredValueImpl(me,currentHook.memoizedState,fe,K)},useTransition:function(){var fe=rerenderReducer(basicStateReducer)[0],K=updateWorkInProgressHook().memoizedState;return[typeof fe=="boolean"?fe:useThenable(fe),K]},useSyncExternalStore:updateSyncExternalStore,useId:updateId};HooksDispatcherOnRerender.useCacheRefresh=updateRefresh;HooksDispatcherOnRerender.useMemoCache=useMemoCache;HooksDispatcherOnRerender.useHostTransitionStatus=useHostTransitionStatus;HooksDispatcherOnRerender.useFormState=rerenderActionState;HooksDispatcherOnRerender.useActionState=rerenderActionState;HooksDispatcherOnRerender.useOptimistic=function(fe,K){var me=updateWorkInProgressHook();return currentHook!==null?updateOptimisticImpl(me,currentHook,fe,K):(me.baseState=fe,[fe,me.queue.dispatch])};function applyDerivedStateFromProps(fe,K,me,ge){K=fe.memoizedState,me=me(ge,K),me=me==null?K:assign({},K,me),fe.memoizedState=me,fe.lanes===0&&(fe.updateQueue.baseState=me)}var classComponentUpdater={isMounted:function(fe){return(fe=fe._reactInternals)?getNearestMountedFiber(fe)===fe:!1},enqueueSetState:function(fe,K,me){fe=fe._reactInternals;var ge=requestUpdateLane(),xe=createUpdate(ge);xe.payload=K,me!=null&&(xe.callback=me),K=enqueueUpdate(fe,xe,ge),K!==null&&(scheduleUpdateOnFiber(K,fe,ge),entangleTransitions(K,fe,ge))},enqueueReplaceState:function(fe,K,me){fe=fe._reactInternals;var ge=requestUpdateLane(),xe=createUpdate(ge);xe.tag=1,xe.payload=K,me!=null&&(xe.callback=me),K=enqueueUpdate(fe,xe,ge),K!==null&&(scheduleUpdateOnFiber(K,fe,ge),entangleTransitions(K,fe,ge))},enqueueForceUpdate:function(fe,K){fe=fe._reactInternals;var me=requestUpdateLane(),ge=createUpdate(me);ge.tag=2,K!=null&&(ge.callback=K),K=enqueueUpdate(fe,ge,me),K!==null&&(scheduleUpdateOnFiber(K,fe,me),entangleTransitions(K,fe,me))}};function checkShouldComponentUpdate(fe,K,me,ge,xe,ye,ve){return fe=fe.stateNode,typeof fe.shouldComponentUpdate=="function"?fe.shouldComponentUpdate(ge,ye,ve):K.prototype&&K.prototype.isPureReactComponent?!shallowEqual(me,ge)||!shallowEqual(xe,ye):!0}function callComponentWillReceiveProps(fe,K,me,ge){fe=K.state,typeof K.componentWillReceiveProps=="function"&&K.componentWillReceiveProps(me,ge),typeof K.UNSAFE_componentWillReceiveProps=="function"&&K.UNSAFE_componentWillReceiveProps(me,ge),K.state!==fe&&classComponentUpdater.enqueueReplaceState(K,K.state,null)}function resolveClassComponentProps(fe,K){var me=K;if("ref"in K){me={};for(var ge in K)ge!=="ref"&&(me[ge]=K[ge])}if(fe=fe.defaultProps){me===K&&(me=assign({},me));for(var xe in fe)me[xe]===void 0&&(me[xe]=fe[xe])}return me}var reportGlobalError=typeof reportError=="function"?reportError:function(fe){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof fe=="object"&&fe!==null&&typeof fe.message=="string"?String(fe.message):String(fe),error:fe});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",fe);return}console.error(fe)};function defaultOnUncaughtError(fe){reportGlobalError(fe)}function defaultOnCaughtError(fe){console.error(fe)}function defaultOnRecoverableError(fe){reportGlobalError(fe)}function logUncaughtError(fe,K){try{var me=fe.onUncaughtError;me(K.value,{componentStack:K.stack})}catch(ge){setTimeout(function(){throw ge})}}function logCaughtError(fe,K,me){try{var ge=fe.onCaughtError;ge(me.value,{componentStack:me.stack,errorBoundary:K.tag===1?K.stateNode:null})}catch(xe){setTimeout(function(){throw xe})}}function createRootErrorUpdate(fe,K,me){return me=createUpdate(me),me.tag=3,me.payload={element:null},me.callback=function(){logUncaughtError(fe,K)},me}function createClassErrorUpdate(fe){return fe=createUpdate(fe),fe.tag=3,fe}function initializeClassErrorUpdate(fe,K,me,ge){var xe=me.type.getDerivedStateFromError;if(typeof xe=="function"){var ye=ge.value;fe.payload=function(){return xe(ye)},fe.callback=function(){logCaughtError(K,me,ge)}}var ve=me.stateNode;ve!==null&&typeof ve.componentDidCatch=="function"&&(fe.callback=function(){logCaughtError(K,me,ge),typeof xe!="function"&&(legacyErrorBoundariesThatAlreadyFailed===null?legacyErrorBoundariesThatAlreadyFailed=new Set([this]):legacyErrorBoundariesThatAlreadyFailed.add(this));var _e=ge.stack;this.componentDidCatch(ge.value,{componentStack:_e!==null?_e:""})})}function throwException(fe,K,me,ge,xe){if(me.flags|=32768,ge!==null&&typeof ge=="object"&&typeof ge.then=="function"){if(K=me.alternate,K!==null&&propagateParentContextChanges(K,me,xe,!0),me=suspenseHandlerStackCursor.current,me!==null){switch(me.tag){case 13:return shellBoundary===null?renderDidSuspendDelayIfPossible():me.alternate===null&&workInProgressRootExitStatus===0&&(workInProgressRootExitStatus=3),me.flags&=-257,me.flags|=65536,me.lanes=xe,ge===noopSuspenseyCommitThenable?me.flags|=16384:(K=me.updateQueue,K===null?me.updateQueue=new Set([ge]):K.add(ge),attachPingListener(fe,ge,xe)),!1;case 22:return me.flags|=65536,ge===noopSuspenseyCommitThenable?me.flags|=16384:(K=me.updateQueue,K===null?(K={transitions:null,markerInstances:null,retryQueue:new Set([ge])},me.updateQueue=K):(me=K.retryQueue,me===null?K.retryQueue=new Set([ge]):me.add(ge)),attachPingListener(fe,ge,xe)),!1}throw Error(formatProdErrorMessage(435,me.tag))}return attachPingListener(fe,ge,xe),renderDidSuspendDelayIfPossible(),!1}if(isHydrating)return K=suspenseHandlerStackCursor.current,K!==null?(!(K.flags&65536)&&(K.flags|=256),K.flags|=65536,K.lanes=xe,ge!==HydrationMismatchException&&(fe=Error(formatProdErrorMessage(422),{cause:ge}),queueHydrationError(createCapturedValueAtFiber(fe,me)))):(ge!==HydrationMismatchException&&(K=Error(formatProdErrorMessage(423),{cause:ge}),queueHydrationError(createCapturedValueAtFiber(K,me))),fe=fe.current.alternate,fe.flags|=65536,xe&=-xe,fe.lanes|=xe,ge=createCapturedValueAtFiber(ge,me),xe=createRootErrorUpdate(fe.stateNode,ge,xe),enqueueCapturedUpdate(fe,xe),workInProgressRootExitStatus!==4&&(workInProgressRootExitStatus=2)),!1;var ye=Error(formatProdErrorMessage(520),{cause:ge});if(ye=createCapturedValueAtFiber(ye,me),workInProgressRootConcurrentErrors===null?workInProgressRootConcurrentErrors=[ye]:workInProgressRootConcurrentErrors.push(ye),workInProgressRootExitStatus!==4&&(workInProgressRootExitStatus=2),K===null)return!0;ge=createCapturedValueAtFiber(ge,me),me=K;do{switch(me.tag){case 3:return me.flags|=65536,fe=xe&-xe,me.lanes|=fe,fe=createRootErrorUpdate(me.stateNode,ge,fe),enqueueCapturedUpdate(me,fe),!1;case 1:if(K=me.type,ye=me.stateNode,(me.flags&128)===0&&(typeof K.getDerivedStateFromError=="function"||ye!==null&&typeof ye.componentDidCatch=="function"&&(legacyErrorBoundariesThatAlreadyFailed===null||!legacyErrorBoundariesThatAlreadyFailed.has(ye))))return me.flags|=65536,xe&=-xe,me.lanes|=xe,xe=createClassErrorUpdate(xe),initializeClassErrorUpdate(xe,fe,me,ge),enqueueCapturedUpdate(me,xe),!1}me=me.return}while(me!==null);return!1}var SelectiveHydrationException=Error(formatProdErrorMessage(461)),didReceiveUpdate=!1;function reconcileChildren(fe,K,me,ge){K.child=fe===null?mountChildFibers(K,null,me,ge):reconcileChildFibers(K,fe.child,me,ge)}function updateForwardRef(fe,K,me,ge,xe){me=me.render;var ye=K.ref;if("ref"in ge){var ve={};for(var _e in ge)_e!=="ref"&&(ve[_e]=ge[_e])}else ve=ge;return prepareToReadContext(K),ge=renderWithHooks(fe,K,me,ve,ye,xe),_e=checkDidRenderIdHook(),fe!==null&&!didReceiveUpdate?(bailoutHooks(fe,K,xe),bailoutOnAlreadyFinishedWork(fe,K,xe)):(isHydrating&&_e&&pushMaterializedTreeId(K),K.flags|=1,reconcileChildren(fe,K,ge,xe),K.child)}function updateMemoComponent(fe,K,me,ge,xe){if(fe===null){var ye=me.type;return typeof ye=="function"&&!shouldConstruct(ye)&&ye.defaultProps===void 0&&me.compare===null?(K.tag=15,K.type=ye,updateSimpleMemoComponent(fe,K,ye,ge,xe)):(fe=createFiberFromTypeAndProps(me.type,null,ge,K,K.mode,xe),fe.ref=K.ref,fe.return=K,K.child=fe)}if(ye=fe.child,!checkScheduledUpdateOrContext(fe,xe)){var ve=ye.memoizedProps;if(me=me.compare,me=me!==null?me:shallowEqual,me(ve,ge)&&fe.ref===K.ref)return bailoutOnAlreadyFinishedWork(fe,K,xe)}return K.flags|=1,fe=createWorkInProgress(ye,ge),fe.ref=K.ref,fe.return=K,K.child=fe}function updateSimpleMemoComponent(fe,K,me,ge,xe){if(fe!==null){var ye=fe.memoizedProps;if(shallowEqual(ye,ge)&&fe.ref===K.ref)if(didReceiveUpdate=!1,K.pendingProps=ge=ye,checkScheduledUpdateOrContext(fe,xe))fe.flags&131072&&(didReceiveUpdate=!0);else return K.lanes=fe.lanes,bailoutOnAlreadyFinishedWork(fe,K,xe)}return updateFunctionComponent(fe,K,me,ge,xe)}function updateOffscreenComponent(fe,K,me){var ge=K.pendingProps,xe=ge.children,ye=(K.stateNode._pendingVisibility&2)!==0,ve=fe!==null?fe.memoizedState:null;if(markRef(fe,K),ge.mode==="hidden"||ye){if(K.flags&128){if(ge=ve!==null?ve.baseLanes|me:me,fe!==null){for(xe=K.child=fe.child,ye=0;xe!==null;)ye=ye|xe.lanes|xe.childLanes,xe=xe.sibling;K.childLanes=ye&~ge}else K.childLanes=0,K.child=null;return deferHiddenOffscreenComponent(fe,K,ge,me)}if(me&536870912)K.memoizedState={baseLanes:0,cachePool:null},fe!==null&&pushTransition(K,ve!==null?ve.cachePool:null),ve!==null?pushHiddenContext(K,ve):reuseHiddenContextOnStack(),pushOffscreenSuspenseHandler(K);else return K.lanes=K.childLanes=536870912,deferHiddenOffscreenComponent(fe,K,ve!==null?ve.baseLanes|me:me,me)}else ve!==null?(pushTransition(K,ve.cachePool),pushHiddenContext(K,ve),reuseSuspenseHandlerOnStack(),K.memoizedState=null):(fe!==null&&pushTransition(K,null),reuseHiddenContextOnStack(),reuseSuspenseHandlerOnStack());return reconcileChildren(fe,K,xe,me),K.child}function deferHiddenOffscreenComponent(fe,K,me,ge){var xe=peekCacheFromPool();return xe=xe===null?null:{parent:CacheContext._currentValue,pool:xe},K.memoizedState={baseLanes:me,cachePool:xe},fe!==null&&pushTransition(K,null),reuseHiddenContextOnStack(),pushOffscreenSuspenseHandler(K),fe!==null&&propagateParentContextChanges(fe,K,ge,!0),null}function markRef(fe,K){var me=K.ref;if(me===null)fe!==null&&fe.ref!==null&&(K.flags|=2097664);else{if(typeof me!="function"&&typeof me!="object")throw Error(formatProdErrorMessage(284));(fe===null||fe.ref!==me)&&(K.flags|=2097664)}}function updateFunctionComponent(fe,K,me,ge,xe){return prepareToReadContext(K),me=renderWithHooks(fe,K,me,ge,void 0,xe),ge=checkDidRenderIdHook(),fe!==null&&!didReceiveUpdate?(bailoutHooks(fe,K,xe),bailoutOnAlreadyFinishedWork(fe,K,xe)):(isHydrating&&ge&&pushMaterializedTreeId(K),K.flags|=1,reconcileChildren(fe,K,me,xe),K.child)}function replayFunctionComponent(fe,K,me,ge,xe,ye){return prepareToReadContext(K),K.updateQueue=null,me=renderWithHooksAgain(K,ge,me,xe),finishRenderingHooks(fe),ge=checkDidRenderIdHook(),fe!==null&&!didReceiveUpdate?(bailoutHooks(fe,K,ye),bailoutOnAlreadyFinishedWork(fe,K,ye)):(isHydrating&&ge&&pushMaterializedTreeId(K),K.flags|=1,reconcileChildren(fe,K,me,ye),K.child)}function updateClassComponent(fe,K,me,ge,xe){if(prepareToReadContext(K),K.stateNode===null){var ye=emptyContextObject,ve=me.contextType;typeof ve=="object"&&ve!==null&&(ye=readContext(ve)),ye=new me(ge,ye),K.memoizedState=ye.state!==null&&ye.state!==void 0?ye.state:null,ye.updater=classComponentUpdater,K.stateNode=ye,ye._reactInternals=K,ye=K.stateNode,ye.props=ge,ye.state=K.memoizedState,ye.refs={},initializeUpdateQueue(K),ve=me.contextType,ye.context=typeof ve=="object"&&ve!==null?readContext(ve):emptyContextObject,ye.state=K.memoizedState,ve=me.getDerivedStateFromProps,typeof ve=="function"&&(applyDerivedStateFromProps(K,me,ve,ge),ye.state=K.memoizedState),typeof me.getDerivedStateFromProps=="function"||typeof ye.getSnapshotBeforeUpdate=="function"||typeof ye.UNSAFE_componentWillMount!="function"&&typeof ye.componentWillMount!="function"||(ve=ye.state,typeof ye.componentWillMount=="function"&&ye.componentWillMount(),typeof ye.UNSAFE_componentWillMount=="function"&&ye.UNSAFE_componentWillMount(),ve!==ye.state&&classComponentUpdater.enqueueReplaceState(ye,ye.state,null),processUpdateQueue(K,ge,ye,xe),suspendIfUpdateReadFromEntangledAsyncAction(),ye.state=K.memoizedState),typeof ye.componentDidMount=="function"&&(K.flags|=4194308),ge=!0}else if(fe===null){ye=K.stateNode;var _e=K.memoizedProps,Ee=resolveClassComponentProps(me,_e);ye.props=Ee;var be=ye.context,Ae=me.contextType;ve=emptyContextObject,typeof Ae=="object"&&Ae!==null&&(ve=readContext(Ae));var Se=me.getDerivedStateFromProps;Ae=typeof Se=="function"||typeof ye.getSnapshotBeforeUpdate=="function",_e=K.pendingProps!==_e,Ae||typeof ye.UNSAFE_componentWillReceiveProps!="function"&&typeof ye.componentWillReceiveProps!="function"||(_e||be!==ve)&&callComponentWillReceiveProps(K,ye,ge,ve),hasForceUpdate=!1;var Ce=K.memoizedState;ye.state=Ce,processUpdateQueue(K,ge,ye,xe),suspendIfUpdateReadFromEntangledAsyncAction(),be=K.memoizedState,_e||Ce!==be||hasForceUpdate?(typeof Se=="function"&&(applyDerivedStateFromProps(K,me,Se,ge),be=K.memoizedState),(Ee=hasForceUpdate||checkShouldComponentUpdate(K,me,Ee,ge,Ce,be,ve))?(Ae||typeof ye.UNSAFE_componentWillMount!="function"&&typeof ye.componentWillMount!="function"||(typeof ye.componentWillMount=="function"&&ye.componentWillMount(),typeof ye.UNSAFE_componentWillMount=="function"&&ye.UNSAFE_componentWillMount()),typeof ye.componentDidMount=="function"&&(K.flags|=4194308)):(typeof ye.componentDidMount=="function"&&(K.flags|=4194308),K.memoizedProps=ge,K.memoizedState=be),ye.props=ge,ye.state=be,ye.context=ve,ge=Ee):(typeof ye.componentDidMount=="function"&&(K.flags|=4194308),ge=!1)}else{ye=K.stateNode,cloneUpdateQueue(fe,K),ve=K.memoizedProps,Ae=resolveClassComponentProps(me,ve),ye.props=Ae,Se=K.pendingProps,Ce=ye.context,be=me.contextType,Ee=emptyContextObject,typeof be=="object"&&be!==null&&(Ee=readContext(be)),_e=me.getDerivedStateFromProps,(be=typeof _e=="function"||typeof ye.getSnapshotBeforeUpdate=="function")||typeof ye.UNSAFE_componentWillReceiveProps!="function"&&typeof ye.componentWillReceiveProps!="function"||(ve!==Se||Ce!==Ee)&&callComponentWillReceiveProps(K,ye,ge,Ee),hasForceUpdate=!1,Ce=K.memoizedState,ye.state=Ce,processUpdateQueue(K,ge,ye,xe),suspendIfUpdateReadFromEntangledAsyncAction();var Te=K.memoizedState;ve!==Se||Ce!==Te||hasForceUpdate||fe!==null&&fe.dependencies!==null&&checkIfContextChanged(fe.dependencies)?(typeof _e=="function"&&(applyDerivedStateFromProps(K,me,_e,ge),Te=K.memoizedState),(Ae=hasForceUpdate||checkShouldComponentUpdate(K,me,Ae,ge,Ce,Te,Ee)||fe!==null&&fe.dependencies!==null&&checkIfContextChanged(fe.dependencies))?(be||typeof ye.UNSAFE_componentWillUpdate!="function"&&typeof ye.componentWillUpdate!="function"||(typeof ye.componentWillUpdate=="function"&&ye.componentWillUpdate(ge,Te,Ee),typeof ye.UNSAFE_componentWillUpdate=="function"&&ye.UNSAFE_componentWillUpdate(ge,Te,Ee)),typeof ye.componentDidUpdate=="function"&&(K.flags|=4),typeof ye.getSnapshotBeforeUpdate=="function"&&(K.flags|=1024)):(typeof ye.componentDidUpdate!="function"||ve===fe.memoizedProps&&Ce===fe.memoizedState||(K.flags|=4),typeof ye.getSnapshotBeforeUpdate!="function"||ve===fe.memoizedProps&&Ce===fe.memoizedState||(K.flags|=1024),K.memoizedProps=ge,K.memoizedState=Te),ye.props=ge,ye.state=Te,ye.context=Ee,ge=Ae):(typeof ye.componentDidUpdate!="function"||ve===fe.memoizedProps&&Ce===fe.memoizedState||(K.flags|=4),typeof ye.getSnapshotBeforeUpdate!="function"||ve===fe.memoizedProps&&Ce===fe.memoizedState||(K.flags|=1024),ge=!1)}return ye=ge,markRef(fe,K),ge=(K.flags&128)!==0,ye||ge?(ye=K.stateNode,me=ge&&typeof me.getDerivedStateFromError!="function"?null:ye.render(),K.flags|=1,fe!==null&&ge?(K.child=reconcileChildFibers(K,fe.child,null,xe),K.child=reconcileChildFibers(K,null,me,xe)):reconcileChildren(fe,K,me,xe),K.memoizedState=ye.state,fe=K.child):fe=bailoutOnAlreadyFinishedWork(fe,K,xe),fe}function mountHostRootWithoutHydrating(fe,K,me,ge){return resetHydrationState(),K.flags|=256,reconcileChildren(fe,K,me,ge),K.child}var SUSPENDED_MARKER={dehydrated:null,treeContext:null,retryLane:0};function mountSuspenseOffscreenState(fe){return{baseLanes:fe,cachePool:getSuspendedCache()}}function getRemainingWorkInPrimaryTree(fe,K,me){return fe=fe!==null?fe.childLanes&~me:0,K&&(fe|=workInProgressDeferredLane),fe}function updateSuspenseComponent(fe,K,me){var ge=K.pendingProps,xe=!1,ye=(K.flags&128)!==0,ve;if((ve=ye)||(ve=fe!==null&&fe.memoizedState===null?!1:(suspenseStackCursor.current&2)!==0),ve&&(xe=!0,K.flags&=-129),ve=(K.flags&32)!==0,K.flags&=-33,fe===null){if(isHydrating){if(xe?pushPrimaryTreeSuspenseHandler(K):reuseSuspenseHandlerOnStack(),isHydrating){var _e=nextHydratableInstance,Ee;if(Ee=_e){e:{for(Ee=_e,_e=rootOrSingletonContext;Ee.nodeType!==8;){if(!_e){_e=null;break e}if(Ee=getNextHydratable(Ee.nextSibling),Ee===null){_e=null;break e}}_e=Ee}_e!==null?(K.memoizedState={dehydrated:_e,treeContext:treeContextProvider!==null?{id:treeContextId,overflow:treeContextOverflow}:null,retryLane:536870912},Ee=createFiberImplClass(18,null,null,0),Ee.stateNode=_e,Ee.return=K,K.child=Ee,hydrationParentFiber=K,nextHydratableInstance=null,Ee=!0):Ee=!1}Ee||throwOnHydrationMismatch(K)}if(_e=K.memoizedState,_e!==null&&(_e=_e.dehydrated,_e!==null))return _e.data==="$!"?K.lanes=16:K.lanes=536870912,null;popSuspenseHandler(K)}return _e=ge.children,ge=ge.fallback,xe?(reuseSuspenseHandlerOnStack(),xe=K.mode,_e=mountWorkInProgressOffscreenFiber({mode:"hidden",children:_e},xe),ge=createFiberFromFragment(ge,xe,me,null),_e.return=K,ge.return=K,_e.sibling=ge,K.child=_e,xe=K.child,xe.memoizedState=mountSuspenseOffscreenState(me),xe.childLanes=getRemainingWorkInPrimaryTree(fe,ve,me),K.memoizedState=SUSPENDED_MARKER,ge):(pushPrimaryTreeSuspenseHandler(K),mountSuspensePrimaryChildren(K,_e))}if(Ee=fe.memoizedState,Ee!==null&&(_e=Ee.dehydrated,_e!==null)){if(ye)K.flags&256?(pushPrimaryTreeSuspenseHandler(K),K.flags&=-257,K=retrySuspenseComponentWithoutHydrating(fe,K,me)):K.memoizedState!==null?(reuseSuspenseHandlerOnStack(),K.child=fe.child,K.flags|=128,K=null):(reuseSuspenseHandlerOnStack(),xe=ge.fallback,_e=K.mode,ge=mountWorkInProgressOffscreenFiber({mode:"visible",children:ge.children},_e),xe=createFiberFromFragment(xe,_e,me,null),xe.flags|=2,ge.return=K,xe.return=K,ge.sibling=xe,K.child=ge,reconcileChildFibers(K,fe.child,null,me),ge=K.child,ge.memoizedState=mountSuspenseOffscreenState(me),ge.childLanes=getRemainingWorkInPrimaryTree(fe,ve,me),K.memoizedState=SUSPENDED_MARKER,K=xe);else if(pushPrimaryTreeSuspenseHandler(K),_e.data==="$!"){if(ve=_e.nextSibling&&_e.nextSibling.dataset,ve)var be=ve.dgst;ve=be,ge=Error(formatProdErrorMessage(419)),ge.stack="",ge.digest=ve,queueHydrationError({value:ge,source:null,stack:null}),K=retrySuspenseComponentWithoutHydrating(fe,K,me)}else if(didReceiveUpdate||propagateParentContextChanges(fe,K,me,!1),ve=(me&fe.childLanes)!==0,didReceiveUpdate||ve){if(ve=workInProgressRoot,ve!==null){if(ge=me&-me,ge&42)ge=1;else switch(ge){case 2:ge=1;break;case 8:ge=4;break;case 32:ge=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:ge=64;break;case 268435456:ge=134217728;break;default:ge=0}if(ge=ge&(ve.suspendedLanes|me)?0:ge,ge!==0&&ge!==Ee.retryLane)throw Ee.retryLane=ge,enqueueConcurrentRenderForLane(fe,ge),scheduleUpdateOnFiber(ve,fe,ge),SelectiveHydrationException}_e.data==="$?"||renderDidSuspendDelayIfPossible(),K=retrySuspenseComponentWithoutHydrating(fe,K,me)}else _e.data==="$?"?(K.flags|=128,K.child=fe.child,K=retryDehydratedSuspenseBoundary.bind(null,fe),_e._reactRetry=K,K=null):(fe=Ee.treeContext,nextHydratableInstance=getNextHydratable(_e.nextSibling),hydrationParentFiber=K,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!1,fe!==null&&(idStack[idStackIndex++]=treeContextId,idStack[idStackIndex++]=treeContextOverflow,idStack[idStackIndex++]=treeContextProvider,treeContextId=fe.id,treeContextOverflow=fe.overflow,treeContextProvider=K),K=mountSuspensePrimaryChildren(K,ge.children),K.flags|=4096);return K}return xe?(reuseSuspenseHandlerOnStack(),xe=ge.fallback,_e=K.mode,Ee=fe.child,be=Ee.sibling,ge=createWorkInProgress(Ee,{mode:"hidden",children:ge.children}),ge.subtreeFlags=Ee.subtreeFlags&31457280,be!==null?xe=createWorkInProgress(be,xe):(xe=createFiberFromFragment(xe,_e,me,null),xe.flags|=2),xe.return=K,ge.return=K,ge.sibling=xe,K.child=ge,ge=xe,xe=K.child,_e=fe.child.memoizedState,_e===null?_e=mountSuspenseOffscreenState(me):(Ee=_e.cachePool,Ee!==null?(be=CacheContext._currentValue,Ee=Ee.parent!==be?{parent:be,pool:be}:Ee):Ee=getSuspendedCache(),_e={baseLanes:_e.baseLanes|me,cachePool:Ee}),xe.memoizedState=_e,xe.childLanes=getRemainingWorkInPrimaryTree(fe,ve,me),K.memoizedState=SUSPENDED_MARKER,ge):(pushPrimaryTreeSuspenseHandler(K),me=fe.child,fe=me.sibling,me=createWorkInProgress(me,{mode:"visible",children:ge.children}),me.return=K,me.sibling=null,fe!==null&&(ve=K.deletions,ve===null?(K.deletions=[fe],K.flags|=16):ve.push(fe)),K.child=me,K.memoizedState=null,me)}function mountSuspensePrimaryChildren(fe,K){return K=mountWorkInProgressOffscreenFiber({mode:"visible",children:K},fe.mode),K.return=fe,fe.child=K}function mountWorkInProgressOffscreenFiber(fe,K){return createFiberFromOffscreen(fe,K,0,null)}function retrySuspenseComponentWithoutHydrating(fe,K,me){return reconcileChildFibers(K,fe.child,null,me),fe=mountSuspensePrimaryChildren(K,K.pendingProps.children),fe.flags|=2,K.memoizedState=null,fe}function scheduleSuspenseWorkOnFiber(fe,K,me){fe.lanes|=K;var ge=fe.alternate;ge!==null&&(ge.lanes|=K),scheduleContextWorkOnParentPath(fe.return,K,me)}function initSuspenseListRenderState(fe,K,me,ge,xe){var ye=fe.memoizedState;ye===null?fe.memoizedState={isBackwards:K,rendering:null,renderingStartTime:0,last:ge,tail:me,tailMode:xe}:(ye.isBackwards=K,ye.rendering=null,ye.renderingStartTime=0,ye.last=ge,ye.tail=me,ye.tailMode=xe)}function updateSuspenseListComponent(fe,K,me){var ge=K.pendingProps,xe=ge.revealOrder,ye=ge.tail;if(reconcileChildren(fe,K,ge.children,me),ge=suspenseStackCursor.current,ge&2)ge=ge&1|2,K.flags|=128;else{if(fe!==null&&fe.flags&128)e:for(fe=K.child;fe!==null;){if(fe.tag===13)fe.memoizedState!==null&&scheduleSuspenseWorkOnFiber(fe,me,K);else if(fe.tag===19)scheduleSuspenseWorkOnFiber(fe,me,K);else if(fe.child!==null){fe.child.return=fe,fe=fe.child;continue}if(fe===K)break e;for(;fe.sibling===null;){if(fe.return===null||fe.return===K)break e;fe=fe.return}fe.sibling.return=fe.return,fe=fe.sibling}ge&=1}switch(push$1(suspenseStackCursor,ge),xe){case"forwards":for(me=K.child,xe=null;me!==null;)fe=me.alternate,fe!==null&&findFirstSuspended(fe)===null&&(xe=me),me=me.sibling;me=xe,me===null?(xe=K.child,K.child=null):(xe=me.sibling,me.sibling=null),initSuspenseListRenderState(K,!1,xe,me,ye);break;case"backwards":for(me=null,xe=K.child,K.child=null;xe!==null;){if(fe=xe.alternate,fe!==null&&findFirstSuspended(fe)===null){K.child=xe;break}fe=xe.sibling,xe.sibling=me,me=xe,xe=fe}initSuspenseListRenderState(K,!0,me,null,ye);break;case"together":initSuspenseListRenderState(K,!1,null,null,void 0);break;default:K.memoizedState=null}return K.child}function bailoutOnAlreadyFinishedWork(fe,K,me){if(fe!==null&&(K.dependencies=fe.dependencies),workInProgressRootSkippedLanes|=K.lanes,!(me&K.childLanes))if(fe!==null){if(propagateParentContextChanges(fe,K,me,!1),(me&K.childLanes)===0)return null}else return null;if(fe!==null&&K.child!==fe.child)throw Error(formatProdErrorMessage(153));if(K.child!==null){for(fe=K.child,me=createWorkInProgress(fe,fe.pendingProps),K.child=me,me.return=K;fe.sibling!==null;)fe=fe.sibling,me=me.sibling=createWorkInProgress(fe,fe.pendingProps),me.return=K;me.sibling=null}return K.child}function checkScheduledUpdateOrContext(fe,K){return fe.lanes&K?!0:(fe=fe.dependencies,!!(fe!==null&&checkIfContextChanged(fe)))}function attemptEarlyBailoutIfNoScheduledUpdate(fe,K,me){switch(K.tag){case 3:pushHostContainer(K,K.stateNode.containerInfo),pushProvider(K,CacheContext,fe.memoizedState.cache),resetHydrationState();break;case 27:case 5:pushHostContext(K);break;case 4:pushHostContainer(K,K.stateNode.containerInfo);break;case 10:pushProvider(K,K.type,K.memoizedProps.value);break;case 13:var ge=K.memoizedState;if(ge!==null)return ge.dehydrated!==null?(pushPrimaryTreeSuspenseHandler(K),K.flags|=128,null):me&K.child.childLanes?updateSuspenseComponent(fe,K,me):(pushPrimaryTreeSuspenseHandler(K),fe=bailoutOnAlreadyFinishedWork(fe,K,me),fe!==null?fe.sibling:null);pushPrimaryTreeSuspenseHandler(K);break;case 19:var xe=(fe.flags&128)!==0;if(ge=(me&K.childLanes)!==0,ge||(propagateParentContextChanges(fe,K,me,!1),ge=(me&K.childLanes)!==0),xe){if(ge)return updateSuspenseListComponent(fe,K,me);K.flags|=128}if(xe=K.memoizedState,xe!==null&&(xe.rendering=null,xe.tail=null,xe.lastEffect=null),push$1(suspenseStackCursor,suspenseStackCursor.current),ge)break;return null;case 22:case 23:return K.lanes=0,updateOffscreenComponent(fe,K,me);case 24:pushProvider(K,CacheContext,fe.memoizedState.cache)}return bailoutOnAlreadyFinishedWork(fe,K,me)}function beginWork(fe,K,me){if(fe!==null)if(fe.memoizedProps!==K.pendingProps)didReceiveUpdate=!0;else{if(!checkScheduledUpdateOrContext(fe,me)&&!(K.flags&128))return didReceiveUpdate=!1,attemptEarlyBailoutIfNoScheduledUpdate(fe,K,me);didReceiveUpdate=!!(fe.flags&131072)}else didReceiveUpdate=!1,isHydrating&&K.flags&1048576&&pushTreeId(K,treeForkCount,K.index);switch(K.lanes=0,K.tag){case 16:e:{fe=K.pendingProps;var ge=K.elementType,xe=ge._init;if(ge=xe(ge._payload),K.type=ge,typeof ge=="function")shouldConstruct(ge)?(fe=resolveClassComponentProps(ge,fe),K.tag=1,K=updateClassComponent(null,K,ge,fe,me)):(K.tag=0,K=updateFunctionComponent(null,K,ge,fe,me));else{if(ge!=null){if(xe=ge.$$typeof,xe===REACT_FORWARD_REF_TYPE){K.tag=11,K=updateForwardRef(null,K,ge,fe,me);break e}else if(xe===REACT_MEMO_TYPE){K.tag=14,K=updateMemoComponent(null,K,ge,fe,me);break e}}throw K=getComponentNameFromType(ge)||ge,Error(formatProdErrorMessage(306,K,""))}}return K;case 0:return updateFunctionComponent(fe,K,K.type,K.pendingProps,me);case 1:return ge=K.type,xe=resolveClassComponentProps(ge,K.pendingProps),updateClassComponent(fe,K,ge,xe,me);case 3:e:{if(pushHostContainer(K,K.stateNode.containerInfo),fe===null)throw Error(formatProdErrorMessage(387));var ye=K.pendingProps;xe=K.memoizedState,ge=xe.element,cloneUpdateQueue(fe,K),processUpdateQueue(K,ye,null,me);var ve=K.memoizedState;if(ye=ve.cache,pushProvider(K,CacheContext,ye),ye!==xe.cache&&propagateContextChanges(K,[CacheContext],me,!0),suspendIfUpdateReadFromEntangledAsyncAction(),ye=ve.element,xe.isDehydrated)if(xe={element:ye,isDehydrated:!1,cache:ve.cache},K.updateQueue.baseState=xe,K.memoizedState=xe,K.flags&256){K=mountHostRootWithoutHydrating(fe,K,ye,me);break e}else if(ye!==ge){ge=createCapturedValueAtFiber(Error(formatProdErrorMessage(424)),K),queueHydrationError(ge),K=mountHostRootWithoutHydrating(fe,K,ye,me);break e}else for(nextHydratableInstance=getNextHydratable(K.stateNode.containerInfo.firstChild),hydrationParentFiber=K,isHydrating=!0,hydrationErrors=null,rootOrSingletonContext=!0,me=mountChildFibers(K,null,ye,me),K.child=me;me;)me.flags=me.flags&-3|4096,me=me.sibling;else{if(resetHydrationState(),ye===ge){K=bailoutOnAlreadyFinishedWork(fe,K,me);break e}reconcileChildren(fe,K,ye,me)}K=K.child}return K;case 26:return markRef(fe,K),fe===null?(me=getResource(K.type,null,K.pendingProps,null))?K.memoizedState=me:isHydrating||(me=K.type,fe=K.pendingProps,ge=getOwnerDocumentFromRootContainer(rootInstanceStackCursor.current).createElement(me),ge[internalInstanceKey]=K,ge[internalPropsKey]=fe,setInitialProperties(ge,me,fe),markNodeAsHoistable(ge),K.stateNode=ge):K.memoizedState=getResource(K.type,fe.memoizedProps,K.pendingProps,fe.memoizedState),null;case 27:return pushHostContext(K),fe===null&&isHydrating&&(ge=K.stateNode=resolveSingletonInstance(K.type,K.pendingProps,rootInstanceStackCursor.current),hydrationParentFiber=K,rootOrSingletonContext=!0,nextHydratableInstance=getNextHydratable(ge.firstChild)),ge=K.pendingProps.children,fe!==null||isHydrating?reconcileChildren(fe,K,ge,me):K.child=reconcileChildFibers(K,null,ge,me),markRef(fe,K),K.child;case 5:return fe===null&&isHydrating&&((xe=ge=nextHydratableInstance)&&(ge=canHydrateInstance(ge,K.type,K.pendingProps,rootOrSingletonContext),ge!==null?(K.stateNode=ge,hydrationParentFiber=K,nextHydratableInstance=getNextHydratable(ge.firstChild),rootOrSingletonContext=!1,xe=!0):xe=!1),xe||throwOnHydrationMismatch(K)),pushHostContext(K),xe=K.type,ye=K.pendingProps,ve=fe!==null?fe.memoizedProps:null,ge=ye.children,shouldSetTextContent(xe,ye)?ge=null:ve!==null&&shouldSetTextContent(xe,ve)&&(K.flags|=32),K.memoizedState!==null&&(xe=renderWithHooks(fe,K,TransitionAwareHostComponent,null,null,me),HostTransitionContext._currentValue=xe),markRef(fe,K),reconcileChildren(fe,K,ge,me),K.child;case 6:return fe===null&&isHydrating&&((fe=me=nextHydratableInstance)&&(me=canHydrateTextInstance(me,K.pendingProps,rootOrSingletonContext),me!==null?(K.stateNode=me,hydrationParentFiber=K,nextHydratableInstance=null,fe=!0):fe=!1),fe||throwOnHydrationMismatch(K)),null;case 13:return updateSuspenseComponent(fe,K,me);case 4:return pushHostContainer(K,K.stateNode.containerInfo),ge=K.pendingProps,fe===null?K.child=reconcileChildFibers(K,null,ge,me):reconcileChildren(fe,K,ge,me),K.child;case 11:return updateForwardRef(fe,K,K.type,K.pendingProps,me);case 7:return reconcileChildren(fe,K,K.pendingProps,me),K.child;case 8:return reconcileChildren(fe,K,K.pendingProps.children,me),K.child;case 12:return reconcileChildren(fe,K,K.pendingProps.children,me),K.child;case 10:return ge=K.pendingProps,pushProvider(K,K.type,ge.value),reconcileChildren(fe,K,ge.children,me),K.child;case 9:return xe=K.type._context,ge=K.pendingProps.children,prepareToReadContext(K),xe=readContext(xe),ge=ge(xe),K.flags|=1,reconcileChildren(fe,K,ge,me),K.child;case 14:return updateMemoComponent(fe,K,K.type,K.pendingProps,me);case 15:return updateSimpleMemoComponent(fe,K,K.type,K.pendingProps,me);case 19:return updateSuspenseListComponent(fe,K,me);case 22:return updateOffscreenComponent(fe,K,me);case 24:return prepareToReadContext(K),ge=readContext(CacheContext),fe===null?(xe=peekCacheFromPool(),xe===null&&(xe=workInProgressRoot,ye=createCache(),xe.pooledCache=ye,ye.refCount++,ye!==null&&(xe.pooledCacheLanes|=me),xe=ye),K.memoizedState={parent:ge,cache:xe},initializeUpdateQueue(K),pushProvider(K,CacheContext,xe)):(fe.lanes&me&&(cloneUpdateQueue(fe,K),processUpdateQueue(K,null,null,me),suspendIfUpdateReadFromEntangledAsyncAction()),xe=fe.memoizedState,ye=K.memoizedState,xe.parent!==ge?(xe={parent:ge,cache:ge},K.memoizedState=xe,K.lanes===0&&(K.memoizedState=K.updateQueue.baseState=xe),pushProvider(K,CacheContext,ge)):(ge=ye.cache,pushProvider(K,CacheContext,ge),ge!==xe.cache&&propagateContextChanges(K,[CacheContext],me,!0))),reconcileChildren(fe,K,K.pendingProps.children,me),K.child;case 29:throw K.pendingProps}throw Error(formatProdErrorMessage(156,K.tag))}var valueCursor=createCursor(null),currentlyRenderingFiber=null,lastContextDependency=null;function pushProvider(fe,K,me){push$1(valueCursor,K._currentValue),K._currentValue=me}function popProvider(fe){fe._currentValue=valueCursor.current,pop(valueCursor)}function scheduleContextWorkOnParentPath(fe,K,me){for(;fe!==null;){var ge=fe.alternate;if((fe.childLanes&K)!==K?(fe.childLanes|=K,ge!==null&&(ge.childLanes|=K)):ge!==null&&(ge.childLanes&K)!==K&&(ge.childLanes|=K),fe===me)break;fe=fe.return}}function propagateContextChanges(fe,K,me,ge){var xe=fe.child;for(xe!==null&&(xe.return=fe);xe!==null;){var ye=xe.dependencies;if(ye!==null){var ve=xe.child;ye=ye.firstContext;e:for(;ye!==null;){var _e=ye;ye=xe;for(var Ee=0;Ee<K.length;Ee++)if(_e.context===K[Ee]){ye.lanes|=me,_e=ye.alternate,_e!==null&&(_e.lanes|=me),scheduleContextWorkOnParentPath(ye.return,me,fe),ge||(ve=null);break e}ye=_e.next}}else if(xe.tag===18){if(ve=xe.return,ve===null)throw Error(formatProdErrorMessage(341));ve.lanes|=me,ye=ve.alternate,ye!==null&&(ye.lanes|=me),scheduleContextWorkOnParentPath(ve,me,fe),ve=null}else ve=xe.child;if(ve!==null)ve.return=xe;else for(ve=xe;ve!==null;){if(ve===fe){ve=null;break}if(xe=ve.sibling,xe!==null){xe.return=ve.return,ve=xe;break}ve=ve.return}xe=ve}}function propagateParentContextChanges(fe,K,me,ge){fe=null;for(var xe=K,ye=!1;xe!==null;){if(!ye){if(xe.flags&524288)ye=!0;else if(xe.flags&262144)break}if(xe.tag===10){var ve=xe.alternate;if(ve===null)throw Error(formatProdErrorMessage(387));if(ve=ve.memoizedProps,ve!==null){var _e=xe.type;objectIs$2(xe.pendingProps.value,ve.value)||(fe!==null?fe.push(_e):fe=[_e])}}else if(xe===hostTransitionProviderCursor.current){if(ve=xe.alternate,ve===null)throw Error(formatProdErrorMessage(387));ve.memoizedState.memoizedState!==xe.memoizedState.memoizedState&&(fe!==null?fe.push(HostTransitionContext):fe=[HostTransitionContext])}xe=xe.return}fe!==null&&propagateContextChanges(K,fe,me,ge),K.flags|=262144}function checkIfContextChanged(fe){for(fe=fe.firstContext;fe!==null;){if(!objectIs$2(fe.context._currentValue,fe.memoizedValue))return!0;fe=fe.next}return!1}function prepareToReadContext(fe){currentlyRenderingFiber=fe,lastContextDependency=null,fe=fe.dependencies,fe!==null&&(fe.firstContext=null)}function readContext(fe){return readContextForConsumer(currentlyRenderingFiber,fe)}function readContextDuringReconciliation(fe,K){return currentlyRenderingFiber===null&&prepareToReadContext(fe),readContextForConsumer(fe,K)}function readContextForConsumer(fe,K){var me=K._currentValue;if(K={context:K,memoizedValue:me,next:null},lastContextDependency===null){if(fe===null)throw Error(formatProdErrorMessage(308));lastContextDependency=K,fe.dependencies={lanes:0,firstContext:K},fe.flags|=524288}else lastContextDependency=lastContextDependency.next=K;return me}var hasForceUpdate=!1;function initializeUpdateQueue(fe){fe.updateQueue={baseState:fe.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function cloneUpdateQueue(fe,K){fe=fe.updateQueue,K.updateQueue===fe&&(K.updateQueue={baseState:fe.baseState,firstBaseUpdate:fe.firstBaseUpdate,lastBaseUpdate:fe.lastBaseUpdate,shared:fe.shared,callbacks:null})}function createUpdate(fe){return{lane:fe,tag:0,payload:null,callback:null,next:null}}function enqueueUpdate(fe,K,me){var ge=fe.updateQueue;if(ge===null)return null;if(ge=ge.shared,executionContext&2){var xe=ge.pending;return xe===null?K.next=K:(K.next=xe.next,xe.next=K),ge.pending=K,K=getRootForUpdatedFiber(fe),markUpdateLaneFromFiberToRoot(fe,null,me),K}return enqueueUpdate$1(fe,ge,K,me),getRootForUpdatedFiber(fe)}function entangleTransitions(fe,K,me){if(K=K.updateQueue,K!==null&&(K=K.shared,(me&4194176)!==0)){var ge=K.lanes;ge&=fe.pendingLanes,me|=ge,K.lanes=me,markRootEntangled(fe,me)}}function enqueueCapturedUpdate(fe,K){var me=fe.updateQueue,ge=fe.alternate;if(ge!==null&&(ge=ge.updateQueue,me===ge)){var xe=null,ye=null;if(me=me.firstBaseUpdate,me!==null){do{var ve={lane:me.lane,tag:me.tag,payload:me.payload,callback:null,next:null};ye===null?xe=ye=ve:ye=ye.next=ve,me=me.next}while(me!==null);ye===null?xe=ye=K:ye=ye.next=K}else xe=ye=K;me={baseState:ge.baseState,firstBaseUpdate:xe,lastBaseUpdate:ye,shared:ge.shared,callbacks:ge.callbacks},fe.updateQueue=me;return}fe=me.lastBaseUpdate,fe===null?me.firstBaseUpdate=K:fe.next=K,me.lastBaseUpdate=K}var didReadFromEntangledAsyncAction=!1;function suspendIfUpdateReadFromEntangledAsyncAction(){if(didReadFromEntangledAsyncAction){var fe=currentEntangledActionThenable;if(fe!==null)throw fe}}function processUpdateQueue(fe,K,me,ge){didReadFromEntangledAsyncAction=!1;var xe=fe.updateQueue;hasForceUpdate=!1;var ye=xe.firstBaseUpdate,ve=xe.lastBaseUpdate,_e=xe.shared.pending;if(_e!==null){xe.shared.pending=null;var Ee=_e,be=Ee.next;Ee.next=null,ve===null?ye=be:ve.next=be,ve=Ee;var Ae=fe.alternate;Ae!==null&&(Ae=Ae.updateQueue,_e=Ae.lastBaseUpdate,_e!==ve&&(_e===null?Ae.firstBaseUpdate=be:_e.next=be,Ae.lastBaseUpdate=Ee))}if(ye!==null){var Se=xe.baseState;ve=0,Ae=be=Ee=null,_e=ye;do{var Ce=_e.lane&-536870913,Te=Ce!==_e.lane;if(Te?(workInProgressRootRenderLanes&Ce)===Ce:(ge&Ce)===Ce){Ce!==0&&Ce===currentEntangledLane&&(didReadFromEntangledAsyncAction=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var Re=fe,De=_e;Ce=K;var Ie=me;switch(De.tag){case 1:if(Re=De.payload,typeof Re=="function"){Se=Re.call(Ie,Se,Ce);break e}Se=Re;break e;case 3:Re.flags=Re.flags&-65537|128;case 0:if(Re=De.payload,Ce=typeof Re=="function"?Re.call(Ie,Se,Ce):Re,Ce==null)break e;Se=assign({},Se,Ce);break e;case 2:hasForceUpdate=!0}}Ce=_e.callback,Ce!==null&&(fe.flags|=64,Te&&(fe.flags|=8192),Te=xe.callbacks,Te===null?xe.callbacks=[Ce]:Te.push(Ce))}else Te={lane:Ce,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},Ae===null?(be=Ae=Te,Ee=Se):Ae=Ae.next=Te,ve|=Ce;if(_e=_e.next,_e===null){if(_e=xe.shared.pending,_e===null)break;Te=_e,_e=Te.next,Te.next=null,xe.lastBaseUpdate=Te,xe.shared.pending=null}}while(!0);Ae===null&&(Ee=Se),xe.baseState=Ee,xe.firstBaseUpdate=be,xe.lastBaseUpdate=Ae,ye===null&&(xe.shared.lanes=0),workInProgressRootSkippedLanes|=ve,fe.lanes=ve,fe.memoizedState=Se}}function callCallback(fe,K){if(typeof fe!="function")throw Error(formatProdErrorMessage(191,fe));fe.call(K)}function commitCallbacks(fe,K){var me=fe.callbacks;if(me!==null)for(fe.callbacks=null,fe=0;fe<me.length;fe++)callCallback(me[fe],K)}function commitHookEffectListMount(fe,K){try{var me=K.updateQueue,ge=me!==null?me.lastEffect:null;if(ge!==null){var xe=ge.next;me=xe;do{if((me.tag&fe)===fe){ge=void 0;var ye=me.create,ve=me.inst;ge=ye(),ve.destroy=ge}me=me.next}while(me!==xe)}}catch(_e){captureCommitPhaseError(K,K.return,_e)}}function commitHookEffectListUnmount(fe,K,me){try{var ge=K.updateQueue,xe=ge!==null?ge.lastEffect:null;if(xe!==null){var ye=xe.next;ge=ye;do{if((ge.tag&fe)===fe){var ve=ge.inst,_e=ve.destroy;if(_e!==void 0){ve.destroy=void 0,xe=K;var Ee=me;try{_e()}catch(be){captureCommitPhaseError(xe,Ee,be)}}}ge=ge.next}while(ge!==ye)}}catch(be){captureCommitPhaseError(K,K.return,be)}}function commitClassCallbacks(fe){var K=fe.updateQueue;if(K!==null){var me=fe.stateNode;try{commitCallbacks(K,me)}catch(ge){captureCommitPhaseError(fe,fe.return,ge)}}}function safelyCallComponentWillUnmount(fe,K,me){me.props=resolveClassComponentProps(fe.type,fe.memoizedProps),me.state=fe.memoizedState;try{me.componentWillUnmount()}catch(ge){captureCommitPhaseError(fe,K,ge)}}function safelyAttachRef(fe,K){try{var me=fe.ref;if(me!==null){var ge=fe.stateNode;switch(fe.tag){case 26:case 27:case 5:var xe=ge;break;default:xe=ge}typeof me=="function"?fe.refCleanup=me(xe):me.current=xe}}catch(ye){captureCommitPhaseError(fe,K,ye)}}function safelyDetachRef(fe,K){var me=fe.ref,ge=fe.refCleanup;if(me!==null)if(typeof ge=="function")try{ge()}catch(xe){captureCommitPhaseError(fe,K,xe)}finally{fe.refCleanup=null,fe=fe.alternate,fe!=null&&(fe.refCleanup=null)}else if(typeof me=="function")try{me(null)}catch(xe){captureCommitPhaseError(fe,K,xe)}else me.current=null}function commitHostMount(fe){var K=fe.type,me=fe.memoizedProps,ge=fe.stateNode;try{e:switch(K){case"button":case"input":case"select":case"textarea":me.autoFocus&&ge.focus();break e;case"img":me.src?ge.src=me.src:me.srcSet&&(ge.srcset=me.srcSet)}}catch(xe){captureCommitPhaseError(fe,fe.return,xe)}}function commitHostUpdate(fe,K,me){try{var ge=fe.stateNode;updateProperties(ge,fe.type,me,K),ge[internalPropsKey]=K}catch(xe){captureCommitPhaseError(fe,fe.return,xe)}}function isHostParent(fe){return fe.tag===5||fe.tag===3||fe.tag===26||fe.tag===27||fe.tag===4}function getHostSibling(fe){e:for(;;){for(;fe.sibling===null;){if(fe.return===null||isHostParent(fe.return))return null;fe=fe.return}for(fe.sibling.return=fe.return,fe=fe.sibling;fe.tag!==5&&fe.tag!==6&&fe.tag!==27&&fe.tag!==18;){if(fe.flags&2||fe.child===null||fe.tag===4)continue e;fe.child.return=fe,fe=fe.child}if(!(fe.flags&2))return fe.stateNode}}function insertOrAppendPlacementNodeIntoContainer(fe,K,me){var ge=fe.tag;if(ge===5||ge===6)fe=fe.stateNode,K?me.nodeType===8?me.parentNode.insertBefore(fe,K):me.insertBefore(fe,K):(me.nodeType===8?(K=me.parentNode,K.insertBefore(fe,me)):(K=me,K.appendChild(fe)),me=me._reactRootContainer,me!=null||K.onclick!==null||(K.onclick=noop$1$1));else if(ge!==4&&ge!==27&&(fe=fe.child,fe!==null))for(insertOrAppendPlacementNodeIntoContainer(fe,K,me),fe=fe.sibling;fe!==null;)insertOrAppendPlacementNodeIntoContainer(fe,K,me),fe=fe.sibling}function insertOrAppendPlacementNode(fe,K,me){var ge=fe.tag;if(ge===5||ge===6)fe=fe.stateNode,K?me.insertBefore(fe,K):me.appendChild(fe);else if(ge!==4&&ge!==27&&(fe=fe.child,fe!==null))for(insertOrAppendPlacementNode(fe,K,me),fe=fe.sibling;fe!==null;)insertOrAppendPlacementNode(fe,K,me),fe=fe.sibling}var offscreenSubtreeIsHidden=!1,offscreenSubtreeWasHidden=!1,needsFormReset=!1,PossiblyWeakSet=typeof WeakSet=="function"?WeakSet:Set,nextEffect=null,shouldFireAfterActiveInstanceBlur=!1;function commitBeforeMutationEffects(fe,K){if(fe=fe.containerInfo,eventsEnabled=_enabled,fe=getActiveElementDeep(fe),hasSelectionCapabilities(fe)){if("selectionStart"in fe)var me={start:fe.selectionStart,end:fe.selectionEnd};else e:{me=(me=fe.ownerDocument)&&me.defaultView||window;var ge=me.getSelection&&me.getSelection();if(ge&&ge.rangeCount!==0){me=ge.anchorNode;var xe=ge.anchorOffset,ye=ge.focusNode;ge=ge.focusOffset;try{me.nodeType,ye.nodeType}catch{me=null;break e}var ve=0,_e=-1,Ee=-1,be=0,Ae=0,Se=fe,Ce=null;t:for(;;){for(var Te;Se!==me||xe!==0&&Se.nodeType!==3||(_e=ve+xe),Se!==ye||ge!==0&&Se.nodeType!==3||(Ee=ve+ge),Se.nodeType===3&&(ve+=Se.nodeValue.length),(Te=Se.firstChild)!==null;)Ce=Se,Se=Te;for(;;){if(Se===fe)break t;if(Ce===me&&++be===xe&&(_e=ve),Ce===ye&&++Ae===ge&&(Ee=ve),(Te=Se.nextSibling)!==null)break;Se=Ce,Ce=Se.parentNode}Se=Te}me=_e===-1||Ee===-1?null:{start:_e,end:Ee}}else me=null}me=me||{start:0,end:0}}else me=null;for(selectionInformation={focusedElem:fe,selectionRange:me},_enabled=!1,nextEffect=K;nextEffect!==null;)if(K=nextEffect,fe=K.child,(K.subtreeFlags&1028)!==0&&fe!==null)fe.return=K,nextEffect=fe;else for(;nextEffect!==null;){switch(K=nextEffect,ye=K.alternate,fe=K.flags,K.tag){case 0:break;case 11:case 15:break;case 1:if(fe&1024&&ye!==null){fe=void 0,me=K,xe=ye.memoizedProps,ye=ye.memoizedState,ge=me.stateNode;try{var Re=resolveClassComponentProps(me.type,xe,me.elementType===me.type);fe=ge.getSnapshotBeforeUpdate(Re,ye),ge.__reactInternalSnapshotBeforeUpdate=fe}catch(De){captureCommitPhaseError(me,me.return,De)}}break;case 3:if(fe&1024){if(fe=K.stateNode.containerInfo,me=fe.nodeType,me===9)clearContainerSparingly(fe);else if(me===1)switch(fe.nodeName){case"HEAD":case"HTML":case"BODY":clearContainerSparingly(fe);break;default:fe.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(fe&1024)throw Error(formatProdErrorMessage(163))}if(fe=K.sibling,fe!==null){fe.return=K.return,nextEffect=fe;break}nextEffect=K.return}return Re=shouldFireAfterActiveInstanceBlur,shouldFireAfterActiveInstanceBlur=!1,Re}function commitLayoutEffectOnFiber(fe,K,me){var ge=me.flags;switch(me.tag){case 0:case 11:case 15:recursivelyTraverseLayoutEffects(fe,me),ge&4&&commitHookEffectListMount(5,me);break;case 1:if(recursivelyTraverseLayoutEffects(fe,me),ge&4)if(fe=me.stateNode,K===null)try{fe.componentDidMount()}catch(_e){captureCommitPhaseError(me,me.return,_e)}else{var xe=resolveClassComponentProps(me.type,K.memoizedProps);K=K.memoizedState;try{fe.componentDidUpdate(xe,K,fe.__reactInternalSnapshotBeforeUpdate)}catch(_e){captureCommitPhaseError(me,me.return,_e)}}ge&64&&commitClassCallbacks(me),ge&512&&safelyAttachRef(me,me.return);break;case 3:if(recursivelyTraverseLayoutEffects(fe,me),ge&64&&(ge=me.updateQueue,ge!==null)){if(fe=null,me.child!==null)switch(me.child.tag){case 27:case 5:fe=me.child.stateNode;break;case 1:fe=me.child.stateNode}try{commitCallbacks(ge,fe)}catch(_e){captureCommitPhaseError(me,me.return,_e)}}break;case 26:recursivelyTraverseLayoutEffects(fe,me),ge&512&&safelyAttachRef(me,me.return);break;case 27:case 5:recursivelyTraverseLayoutEffects(fe,me),K===null&&ge&4&&commitHostMount(me),ge&512&&safelyAttachRef(me,me.return);break;case 12:recursivelyTraverseLayoutEffects(fe,me);break;case 13:recursivelyTraverseLayoutEffects(fe,me),ge&4&&commitSuspenseHydrationCallbacks(fe,me);break;case 22:if(xe=me.memoizedState!==null||offscreenSubtreeIsHidden,!xe){K=K!==null&&K.memoizedState!==null||offscreenSubtreeWasHidden;var ye=offscreenSubtreeIsHidden,ve=offscreenSubtreeWasHidden;offscreenSubtreeIsHidden=xe,(offscreenSubtreeWasHidden=K)&&!ve?recursivelyTraverseReappearLayoutEffects(fe,me,(me.subtreeFlags&8772)!==0):recursivelyTraverseLayoutEffects(fe,me),offscreenSubtreeIsHidden=ye,offscreenSubtreeWasHidden=ve}ge&512&&(me.memoizedProps.mode==="manual"?safelyAttachRef(me,me.return):safelyDetachRef(me,me.return));break;default:recursivelyTraverseLayoutEffects(fe,me)}}function detachFiberAfterEffects(fe){var K=fe.alternate;K!==null&&(fe.alternate=null,detachFiberAfterEffects(K)),fe.child=null,fe.deletions=null,fe.sibling=null,fe.tag===5&&(K=fe.stateNode,K!==null&&detachDeletedInstance(K)),fe.stateNode=null,fe.return=null,fe.dependencies=null,fe.memoizedProps=null,fe.memoizedState=null,fe.pendingProps=null,fe.stateNode=null,fe.updateQueue=null}var hostParent=null,hostParentIsContainer=!1;function recursivelyTraverseDeletionEffects(fe,K,me){for(me=me.child;me!==null;)commitDeletionEffectsOnFiber(fe,K,me),me=me.sibling}function commitDeletionEffectsOnFiber(fe,K,me){if(injectedHook&&typeof injectedHook.onCommitFiberUnmount=="function")try{injectedHook.onCommitFiberUnmount(rendererID,me)}catch{}switch(me.tag){case 26:offscreenSubtreeWasHidden||safelyDetachRef(me,K),recursivelyTraverseDeletionEffects(fe,K,me),me.memoizedState?me.memoizedState.count--:me.stateNode&&(me=me.stateNode,me.parentNode.removeChild(me));break;case 27:offscreenSubtreeWasHidden||safelyDetachRef(me,K);var ge=hostParent,xe=hostParentIsContainer;for(hostParent=me.stateNode,recursivelyTraverseDeletionEffects(fe,K,me),me=me.stateNode,K=me.attributes;K.length;)me.removeAttributeNode(K[0]);detachDeletedInstance(me),hostParent=ge,hostParentIsContainer=xe;break;case 5:offscreenSubtreeWasHidden||safelyDetachRef(me,K);case 6:xe=hostParent;var ye=hostParentIsContainer;if(hostParent=null,recursivelyTraverseDeletionEffects(fe,K,me),hostParent=xe,hostParentIsContainer=ye,hostParent!==null)if(hostParentIsContainer)try{fe=hostParent,ge=me.stateNode,fe.nodeType===8?fe.parentNode.removeChild(ge):fe.removeChild(ge)}catch(ve){captureCommitPhaseError(me,K,ve)}else try{hostParent.removeChild(me.stateNode)}catch(ve){captureCommitPhaseError(me,K,ve)}break;case 18:hostParent!==null&&(hostParentIsContainer?(K=hostParent,me=me.stateNode,K.nodeType===8?clearSuspenseBoundary(K.parentNode,me):K.nodeType===1&&clearSuspenseBoundary(K,me),retryIfBlockedOn(K)):clearSuspenseBoundary(hostParent,me.stateNode));break;case 4:ge=hostParent,xe=hostParentIsContainer,hostParent=me.stateNode.containerInfo,hostParentIsContainer=!0,recursivelyTraverseDeletionEffects(fe,K,me),hostParent=ge,hostParentIsContainer=xe;break;case 0:case 11:case 14:case 15:offscreenSubtreeWasHidden||commitHookEffectListUnmount(2,me,K),offscreenSubtreeWasHidden||commitHookEffectListUnmount(4,me,K),recursivelyTraverseDeletionEffects(fe,K,me);break;case 1:offscreenSubtreeWasHidden||(safelyDetachRef(me,K),ge=me.stateNode,typeof ge.componentWillUnmount=="function"&&safelyCallComponentWillUnmount(me,K,ge)),recursivelyTraverseDeletionEffects(fe,K,me);break;case 21:recursivelyTraverseDeletionEffects(fe,K,me);break;case 22:offscreenSubtreeWasHidden||safelyDetachRef(me,K),offscreenSubtreeWasHidden=(ge=offscreenSubtreeWasHidden)||me.memoizedState!==null,recursivelyTraverseDeletionEffects(fe,K,me),offscreenSubtreeWasHidden=ge;break;default:recursivelyTraverseDeletionEffects(fe,K,me)}}function commitSuspenseHydrationCallbacks(fe,K){if(K.memoizedState===null&&(fe=K.alternate,fe!==null&&(fe=fe.memoizedState,fe!==null&&(fe=fe.dehydrated,fe!==null))))try{retryIfBlockedOn(fe)}catch(me){captureCommitPhaseError(K,K.return,me)}}function getRetryCache(fe){switch(fe.tag){case 13:case 19:var K=fe.stateNode;return K===null&&(K=fe.stateNode=new PossiblyWeakSet),K;case 22:return fe=fe.stateNode,K=fe._retryCache,K===null&&(K=fe._retryCache=new PossiblyWeakSet),K;default:throw Error(formatProdErrorMessage(435,fe.tag))}}function attachSuspenseRetryListeners(fe,K){var me=getRetryCache(fe);K.forEach(function(ge){var xe=resolveRetryWakeable.bind(null,fe,ge);me.has(ge)||(me.add(ge),ge.then(xe,xe))})}function recursivelyTraverseMutationEffects(fe,K){var me=K.deletions;if(me!==null)for(var ge=0;ge<me.length;ge++){var xe=me[ge],ye=fe,ve=K,_e=ve;e:for(;_e!==null;){switch(_e.tag){case 27:case 5:hostParent=_e.stateNode,hostParentIsContainer=!1;break e;case 3:hostParent=_e.stateNode.containerInfo,hostParentIsContainer=!0;break e;case 4:hostParent=_e.stateNode.containerInfo,hostParentIsContainer=!0;break e}_e=_e.return}if(hostParent===null)throw Error(formatProdErrorMessage(160));commitDeletionEffectsOnFiber(ye,ve,xe),hostParent=null,hostParentIsContainer=!1,ye=xe.alternate,ye!==null&&(ye.return=null),xe.return=null}if(K.subtreeFlags&13878)for(K=K.child;K!==null;)commitMutationEffectsOnFiber(K,fe),K=K.sibling}var currentHoistableRoot=null;function commitMutationEffectsOnFiber(fe,K){var me=fe.alternate,ge=fe.flags;switch(fe.tag){case 0:case 11:case 14:case 15:recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe),ge&4&&(commitHookEffectListUnmount(3,fe,fe.return),commitHookEffectListMount(3,fe),commitHookEffectListUnmount(5,fe,fe.return));break;case 1:recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe),ge&512&&(offscreenSubtreeWasHidden||me===null||safelyDetachRef(me,me.return)),ge&64&&offscreenSubtreeIsHidden&&(fe=fe.updateQueue,fe!==null&&(ge=fe.callbacks,ge!==null&&(me=fe.shared.hiddenCallbacks,fe.shared.hiddenCallbacks=me===null?ge:me.concat(ge))));break;case 26:var xe=currentHoistableRoot;if(recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe),ge&512&&(offscreenSubtreeWasHidden||me===null||safelyDetachRef(me,me.return)),ge&4){var ye=me!==null?me.memoizedState:null;if(ge=fe.memoizedState,me===null)if(ge===null)if(fe.stateNode===null){e:{ge=fe.type,me=fe.memoizedProps,xe=xe.ownerDocument||xe;t:switch(ge){case"title":ye=xe.getElementsByTagName("title")[0],(!ye||ye[internalHoistableMarker]||ye[internalInstanceKey]||ye.namespaceURI==="http://www.w3.org/2000/svg"||ye.hasAttribute("itemprop"))&&(ye=xe.createElement(ge),xe.head.insertBefore(ye,xe.querySelector("head > title"))),setInitialProperties(ye,ge,me),ye[internalInstanceKey]=fe,markNodeAsHoistable(ye),ge=ye;break e;case"link":var ve=getHydratableHoistableCache("link","href",xe).get(ge+(me.href||""));if(ve){for(var _e=0;_e<ve.length;_e++)if(ye=ve[_e],ye.getAttribute("href")===(me.href==null?null:me.href)&&ye.getAttribute("rel")===(me.rel==null?null:me.rel)&&ye.getAttribute("title")===(me.title==null?null:me.title)&&ye.getAttribute("crossorigin")===(me.crossOrigin==null?null:me.crossOrigin)){ve.splice(_e,1);break t}}ye=xe.createElement(ge),setInitialProperties(ye,ge,me),xe.head.appendChild(ye);break;case"meta":if(ve=getHydratableHoistableCache("meta","content",xe).get(ge+(me.content||""))){for(_e=0;_e<ve.length;_e++)if(ye=ve[_e],ye.getAttribute("content")===(me.content==null?null:""+me.content)&&ye.getAttribute("name")===(me.name==null?null:me.name)&&ye.getAttribute("property")===(me.property==null?null:me.property)&&ye.getAttribute("http-equiv")===(me.httpEquiv==null?null:me.httpEquiv)&&ye.getAttribute("charset")===(me.charSet==null?null:me.charSet)){ve.splice(_e,1);break t}}ye=xe.createElement(ge),setInitialProperties(ye,ge,me),xe.head.appendChild(ye);break;default:throw Error(formatProdErrorMessage(468,ge))}ye[internalInstanceKey]=fe,markNodeAsHoistable(ye),ge=ye}fe.stateNode=ge}else mountHoistable(xe,fe.type,fe.stateNode);else fe.stateNode=acquireResource(xe,ge,fe.memoizedProps);else ye!==ge?(ye===null?me.stateNode!==null&&(me=me.stateNode,me.parentNode.removeChild(me)):ye.count--,ge===null?mountHoistable(xe,fe.type,fe.stateNode):acquireResource(xe,ge,fe.memoizedProps)):ge===null&&fe.stateNode!==null&&commitHostUpdate(fe,fe.memoizedProps,me.memoizedProps)}break;case 27:if(ge&4&&fe.alternate===null){xe=fe.stateNode,ye=fe.memoizedProps;try{for(var Ee=xe.firstChild;Ee;){var be=Ee.nextSibling,Ae=Ee.nodeName;Ee[internalHoistableMarker]||Ae==="HEAD"||Ae==="BODY"||Ae==="SCRIPT"||Ae==="STYLE"||Ae==="LINK"&&Ee.rel.toLowerCase()==="stylesheet"||xe.removeChild(Ee),Ee=be}for(var Se=fe.type,Ce=xe.attributes;Ce.length;)xe.removeAttributeNode(Ce[0]);setInitialProperties(xe,Se,ye),xe[internalInstanceKey]=fe,xe[internalPropsKey]=ye}catch(Re){captureCommitPhaseError(fe,fe.return,Re)}}case 5:if(recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe),ge&512&&(offscreenSubtreeWasHidden||me===null||safelyDetachRef(me,me.return)),fe.flags&32){xe=fe.stateNode;try{setTextContent(xe,"")}catch(Re){captureCommitPhaseError(fe,fe.return,Re)}}ge&4&&fe.stateNode!=null&&(xe=fe.memoizedProps,commitHostUpdate(fe,xe,me!==null?me.memoizedProps:xe)),ge&1024&&(needsFormReset=!0);break;case 6:if(recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe),ge&4){if(fe.stateNode===null)throw Error(formatProdErrorMessage(162));ge=fe.memoizedProps,me=fe.stateNode;try{me.nodeValue=ge}catch(Re){captureCommitPhaseError(fe,fe.return,Re)}}break;case 3:if(tagCaches=null,xe=currentHoistableRoot,currentHoistableRoot=getHoistableRoot(K.containerInfo),recursivelyTraverseMutationEffects(K,fe),currentHoistableRoot=xe,commitReconciliationEffects(fe),ge&4&&me!==null&&me.memoizedState.isDehydrated)try{retryIfBlockedOn(K.containerInfo)}catch(Re){captureCommitPhaseError(fe,fe.return,Re)}needsFormReset&&(needsFormReset=!1,recursivelyResetForms(fe));break;case 4:ge=currentHoistableRoot,currentHoistableRoot=getHoistableRoot(fe.stateNode.containerInfo),recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe),currentHoistableRoot=ge;break;case 12:recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe);break;case 13:recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe),fe.child.flags&8192&&fe.memoizedState!==null!=(me!==null&&me.memoizedState!==null)&&(globalMostRecentFallbackTime=now$1()),ge&4&&(ge=fe.updateQueue,ge!==null&&(fe.updateQueue=null,attachSuspenseRetryListeners(fe,ge)));break;case 22:if(ge&512&&(offscreenSubtreeWasHidden||me===null||safelyDetachRef(me,me.return)),Ee=fe.memoizedState!==null,be=me!==null&&me.memoizedState!==null,Ae=offscreenSubtreeIsHidden,Se=offscreenSubtreeWasHidden,offscreenSubtreeIsHidden=Ae||Ee,offscreenSubtreeWasHidden=Se||be,recursivelyTraverseMutationEffects(K,fe),offscreenSubtreeWasHidden=Se,offscreenSubtreeIsHidden=Ae,commitReconciliationEffects(fe),K=fe.stateNode,K._current=fe,K._visibility&=-3,K._visibility|=K._pendingVisibility&2,ge&8192&&(K._visibility=Ee?K._visibility&-2:K._visibility|1,Ee&&(K=offscreenSubtreeIsHidden||offscreenSubtreeWasHidden,me===null||be||K||recursivelyTraverseDisappearLayoutEffects(fe)),fe.memoizedProps===null||fe.memoizedProps.mode!=="manual"))e:for(me=null,K=fe;;){if(K.tag===5||K.tag===26||K.tag===27){if(me===null){be=me=K;try{if(xe=be.stateNode,Ee)ye=xe.style,typeof ye.setProperty=="function"?ye.setProperty("display","none","important"):ye.display="none";else{ve=be.stateNode,_e=be.memoizedProps.style;var Te=_e!=null&&_e.hasOwnProperty("display")?_e.display:null;ve.style.display=Te==null||typeof Te=="boolean"?"":(""+Te).trim()}}catch(Re){captureCommitPhaseError(be,be.return,Re)}}}else if(K.tag===6){if(me===null){be=K;try{be.stateNode.nodeValue=Ee?"":be.memoizedProps}catch(Re){captureCommitPhaseError(be,be.return,Re)}}}else if((K.tag!==22&&K.tag!==23||K.memoizedState===null||K===fe)&&K.child!==null){K.child.return=K,K=K.child;continue}if(K===fe)break e;for(;K.sibling===null;){if(K.return===null||K.return===fe)break e;me===K&&(me=null),K=K.return}me===K&&(me=null),K.sibling.return=K.return,K=K.sibling}ge&4&&(ge=fe.updateQueue,ge!==null&&(me=ge.retryQueue,me!==null&&(ge.retryQueue=null,attachSuspenseRetryListeners(fe,me))));break;case 19:recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe),ge&4&&(ge=fe.updateQueue,ge!==null&&(fe.updateQueue=null,attachSuspenseRetryListeners(fe,ge)));break;case 21:break;default:recursivelyTraverseMutationEffects(K,fe),commitReconciliationEffects(fe)}}function commitReconciliationEffects(fe){var K=fe.flags;if(K&2){try{if(fe.tag!==27){e:{for(var me=fe.return;me!==null;){if(isHostParent(me)){var ge=me;break e}me=me.return}throw Error(formatProdErrorMessage(160))}switch(ge.tag){case 27:var xe=ge.stateNode,ye=getHostSibling(fe);insertOrAppendPlacementNode(fe,ye,xe);break;case 5:var ve=ge.stateNode;ge.flags&32&&(setTextContent(ve,""),ge.flags&=-33);var _e=getHostSibling(fe);insertOrAppendPlacementNode(fe,_e,ve);break;case 3:case 4:var Ee=ge.stateNode.containerInfo,be=getHostSibling(fe);insertOrAppendPlacementNodeIntoContainer(fe,be,Ee);break;default:throw Error(formatProdErrorMessage(161))}}}catch(Ae){captureCommitPhaseError(fe,fe.return,Ae)}fe.flags&=-3}K&4096&&(fe.flags&=-4097)}function recursivelyResetForms(fe){if(fe.subtreeFlags&1024)for(fe=fe.child;fe!==null;){var K=fe;recursivelyResetForms(K),K.tag===5&&K.flags&1024&&K.stateNode.reset(),fe=fe.sibling}}function recursivelyTraverseLayoutEffects(fe,K){if(K.subtreeFlags&8772)for(K=K.child;K!==null;)commitLayoutEffectOnFiber(fe,K.alternate,K),K=K.sibling}function recursivelyTraverseDisappearLayoutEffects(fe){for(fe=fe.child;fe!==null;){var K=fe;switch(K.tag){case 0:case 11:case 14:case 15:commitHookEffectListUnmount(4,K,K.return),recursivelyTraverseDisappearLayoutEffects(K);break;case 1:safelyDetachRef(K,K.return);var me=K.stateNode;typeof me.componentWillUnmount=="function"&&safelyCallComponentWillUnmount(K,K.return,me),recursivelyTraverseDisappearLayoutEffects(K);break;case 26:case 27:case 5:safelyDetachRef(K,K.return),recursivelyTraverseDisappearLayoutEffects(K);break;case 22:safelyDetachRef(K,K.return),K.memoizedState===null&&recursivelyTraverseDisappearLayoutEffects(K);break;default:recursivelyTraverseDisappearLayoutEffects(K)}fe=fe.sibling}}function recursivelyTraverseReappearLayoutEffects(fe,K,me){for(me=me&&(K.subtreeFlags&8772)!==0,K=K.child;K!==null;){var ge=K.alternate,xe=fe,ye=K,ve=ye.flags;switch(ye.tag){case 0:case 11:case 15:recursivelyTraverseReappearLayoutEffects(xe,ye,me),commitHookEffectListMount(4,ye);break;case 1:if(recursivelyTraverseReappearLayoutEffects(xe,ye,me),ge=ye,xe=ge.stateNode,typeof xe.componentDidMount=="function")try{xe.componentDidMount()}catch(be){captureCommitPhaseError(ge,ge.return,be)}if(ge=ye,xe=ge.updateQueue,xe!==null){var _e=ge.stateNode;try{var Ee=xe.shared.hiddenCallbacks;if(Ee!==null)for(xe.shared.hiddenCallbacks=null,xe=0;xe<Ee.length;xe++)callCallback(Ee[xe],_e)}catch(be){captureCommitPhaseError(ge,ge.return,be)}}me&&ve&64&&commitClassCallbacks(ye),safelyAttachRef(ye,ye.return);break;case 26:case 27:case 5:recursivelyTraverseReappearLayoutEffects(xe,ye,me),me&&ge===null&&ve&4&&commitHostMount(ye),safelyAttachRef(ye,ye.return);break;case 12:recursivelyTraverseReappearLayoutEffects(xe,ye,me);break;case 13:recursivelyTraverseReappearLayoutEffects(xe,ye,me),me&&ve&4&&commitSuspenseHydrationCallbacks(xe,ye);break;case 22:ye.memoizedState===null&&recursivelyTraverseReappearLayoutEffects(xe,ye,me),safelyAttachRef(ye,ye.return);break;default:recursivelyTraverseReappearLayoutEffects(xe,ye,me)}K=K.sibling}}function commitOffscreenPassiveMountEffects(fe,K){var me=null;fe!==null&&fe.memoizedState!==null&&fe.memoizedState.cachePool!==null&&(me=fe.memoizedState.cachePool.pool),fe=null,K.memoizedState!==null&&K.memoizedState.cachePool!==null&&(fe=K.memoizedState.cachePool.pool),fe!==me&&(fe!=null&&fe.refCount++,me!=null&&releaseCache(me))}function commitCachePassiveMountEffect(fe,K){fe=null,K.alternate!==null&&(fe=K.alternate.memoizedState.cache),K=K.memoizedState.cache,K!==fe&&(K.refCount++,fe!=null&&releaseCache(fe))}function recursivelyTraversePassiveMountEffects(fe,K,me,ge){if(K.subtreeFlags&10256)for(K=K.child;K!==null;)commitPassiveMountOnFiber(fe,K,me,ge),K=K.sibling}function commitPassiveMountOnFiber(fe,K,me,ge){var xe=K.flags;switch(K.tag){case 0:case 11:case 15:recursivelyTraversePassiveMountEffects(fe,K,me,ge),xe&2048&&commitHookEffectListMount(9,K);break;case 3:recursivelyTraversePassiveMountEffects(fe,K,me,ge),xe&2048&&(fe=null,K.alternate!==null&&(fe=K.alternate.memoizedState.cache),K=K.memoizedState.cache,K!==fe&&(K.refCount++,fe!=null&&releaseCache(fe)));break;case 12:if(xe&2048){recursivelyTraversePassiveMountEffects(fe,K,me,ge),fe=K.stateNode;try{var ye=K.memoizedProps,ve=ye.id,_e=ye.onPostCommit;typeof _e=="function"&&_e(ve,K.alternate===null?"mount":"update",fe.passiveEffectDuration,-0)}catch(Ee){captureCommitPhaseError(K,K.return,Ee)}}else recursivelyTraversePassiveMountEffects(fe,K,me,ge);break;case 23:break;case 22:ye=K.stateNode,K.memoizedState!==null?ye._visibility&4?recursivelyTraversePassiveMountEffects(fe,K,me,ge):recursivelyTraverseAtomicPassiveEffects(fe,K):ye._visibility&4?recursivelyTraversePassiveMountEffects(fe,K,me,ge):(ye._visibility|=4,recursivelyTraverseReconnectPassiveEffects(fe,K,me,ge,(K.subtreeFlags&10256)!==0)),xe&2048&&commitOffscreenPassiveMountEffects(K.alternate,K);break;case 24:recursivelyTraversePassiveMountEffects(fe,K,me,ge),xe&2048&&commitCachePassiveMountEffect(K.alternate,K);break;default:recursivelyTraversePassiveMountEffects(fe,K,me,ge)}}function recursivelyTraverseReconnectPassiveEffects(fe,K,me,ge,xe){for(xe=xe&&(K.subtreeFlags&10256)!==0,K=K.child;K!==null;){var ye=fe,ve=K,_e=me,Ee=ge,be=ve.flags;switch(ve.tag){case 0:case 11:case 15:recursivelyTraverseReconnectPassiveEffects(ye,ve,_e,Ee,xe),commitHookEffectListMount(8,ve);break;case 23:break;case 22:var Ae=ve.stateNode;ve.memoizedState!==null?Ae._visibility&4?recursivelyTraverseReconnectPassiveEffects(ye,ve,_e,Ee,xe):recursivelyTraverseAtomicPassiveEffects(ye,ve):(Ae._visibility|=4,recursivelyTraverseReconnectPassiveEffects(ye,ve,_e,Ee,xe)),xe&&be&2048&&commitOffscreenPassiveMountEffects(ve.alternate,ve);break;case 24:recursivelyTraverseReconnectPassiveEffects(ye,ve,_e,Ee,xe),xe&&be&2048&&commitCachePassiveMountEffect(ve.alternate,ve);break;default:recursivelyTraverseReconnectPassiveEffects(ye,ve,_e,Ee,xe)}K=K.sibling}}function recursivelyTraverseAtomicPassiveEffects(fe,K){if(K.subtreeFlags&10256)for(K=K.child;K!==null;){var me=fe,ge=K,xe=ge.flags;switch(ge.tag){case 22:recursivelyTraverseAtomicPassiveEffects(me,ge),xe&2048&&commitOffscreenPassiveMountEffects(ge.alternate,ge);break;case 24:recursivelyTraverseAtomicPassiveEffects(me,ge),xe&2048&&commitCachePassiveMountEffect(ge.alternate,ge);break;default:recursivelyTraverseAtomicPassiveEffects(me,ge)}K=K.sibling}}var suspenseyCommitFlag=8192;function recursivelyAccumulateSuspenseyCommit(fe){if(fe.subtreeFlags&suspenseyCommitFlag)for(fe=fe.child;fe!==null;)accumulateSuspenseyCommitOnFiber(fe),fe=fe.sibling}function accumulateSuspenseyCommitOnFiber(fe){switch(fe.tag){case 26:recursivelyAccumulateSuspenseyCommit(fe),fe.flags&suspenseyCommitFlag&&fe.memoizedState!==null&&suspendResource(currentHoistableRoot,fe.memoizedState,fe.memoizedProps);break;case 5:recursivelyAccumulateSuspenseyCommit(fe);break;case 3:case 4:var K=currentHoistableRoot;currentHoistableRoot=getHoistableRoot(fe.stateNode.containerInfo),recursivelyAccumulateSuspenseyCommit(fe),currentHoistableRoot=K;break;case 22:fe.memoizedState===null&&(K=fe.alternate,K!==null&&K.memoizedState!==null?(K=suspenseyCommitFlag,suspenseyCommitFlag=16777216,recursivelyAccumulateSuspenseyCommit(fe),suspenseyCommitFlag=K):recursivelyAccumulateSuspenseyCommit(fe));break;default:recursivelyAccumulateSuspenseyCommit(fe)}}function detachAlternateSiblings(fe){var K=fe.alternate;if(K!==null&&(fe=K.child,fe!==null)){K.child=null;do K=fe.sibling,fe.sibling=null,fe=K;while(fe!==null)}}function recursivelyTraversePassiveUnmountEffects(fe){var K=fe.deletions;if(fe.flags&16){if(K!==null)for(var me=0;me<K.length;me++){var ge=K[me];nextEffect=ge,commitPassiveUnmountEffectsInsideOfDeletedTree_begin(ge,fe)}detachAlternateSiblings(fe)}if(fe.subtreeFlags&10256)for(fe=fe.child;fe!==null;)commitPassiveUnmountOnFiber(fe),fe=fe.sibling}function commitPassiveUnmountOnFiber(fe){switch(fe.tag){case 0:case 11:case 15:recursivelyTraversePassiveUnmountEffects(fe),fe.flags&2048&&commitHookEffectListUnmount(9,fe,fe.return);break;case 3:recursivelyTraversePassiveUnmountEffects(fe);break;case 12:recursivelyTraversePassiveUnmountEffects(fe);break;case 22:var K=fe.stateNode;fe.memoizedState!==null&&K._visibility&4&&(fe.return===null||fe.return.tag!==13)?(K._visibility&=-5,recursivelyTraverseDisconnectPassiveEffects(fe)):recursivelyTraversePassiveUnmountEffects(fe);break;default:recursivelyTraversePassiveUnmountEffects(fe)}}function recursivelyTraverseDisconnectPassiveEffects(fe){var K=fe.deletions;if(fe.flags&16){if(K!==null)for(var me=0;me<K.length;me++){var ge=K[me];nextEffect=ge,commitPassiveUnmountEffectsInsideOfDeletedTree_begin(ge,fe)}detachAlternateSiblings(fe)}for(fe=fe.child;fe!==null;){switch(K=fe,K.tag){case 0:case 11:case 15:commitHookEffectListUnmount(8,K,K.return),recursivelyTraverseDisconnectPassiveEffects(K);break;case 22:me=K.stateNode,me._visibility&4&&(me._visibility&=-5,recursivelyTraverseDisconnectPassiveEffects(K));break;default:recursivelyTraverseDisconnectPassiveEffects(K)}fe=fe.sibling}}function commitPassiveUnmountEffectsInsideOfDeletedTree_begin(fe,K){for(;nextEffect!==null;){var me=nextEffect;switch(me.tag){case 0:case 11:case 15:commitHookEffectListUnmount(8,me,K);break;case 23:case 22:if(me.memoizedState!==null&&me.memoizedState.cachePool!==null){var ge=me.memoizedState.cachePool.pool;ge!=null&&ge.refCount++}break;case 24:releaseCache(me.memoizedState.cache)}if(ge=me.child,ge!==null)ge.return=me,nextEffect=ge;else e:for(me=fe;nextEffect!==null;){ge=nextEffect;var xe=ge.sibling,ye=ge.return;if(detachFiberAfterEffects(ge),ge===me){nextEffect=null;break e}if(xe!==null){xe.return=ye,nextEffect=xe;break e}nextEffect=ye}}}function FiberNode(fe,K,me,ge){this.tag=fe,this.key=me,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=K,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ge,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function createFiberImplClass(fe,K,me,ge){return new FiberNode(fe,K,me,ge)}function shouldConstruct(fe){return fe=fe.prototype,!(!fe||!fe.isReactComponent)}function createWorkInProgress(fe,K){var me=fe.alternate;return me===null?(me=createFiberImplClass(fe.tag,K,fe.key,fe.mode),me.elementType=fe.elementType,me.type=fe.type,me.stateNode=fe.stateNode,me.alternate=fe,fe.alternate=me):(me.pendingProps=K,me.type=fe.type,me.flags=0,me.subtreeFlags=0,me.deletions=null),me.flags=fe.flags&31457280,me.childLanes=fe.childLanes,me.lanes=fe.lanes,me.child=fe.child,me.memoizedProps=fe.memoizedProps,me.memoizedState=fe.memoizedState,me.updateQueue=fe.updateQueue,K=fe.dependencies,me.dependencies=K===null?null:{lanes:K.lanes,firstContext:K.firstContext},me.sibling=fe.sibling,me.index=fe.index,me.ref=fe.ref,me.refCleanup=fe.refCleanup,me}function resetWorkInProgress(fe,K){fe.flags&=31457282;var me=fe.alternate;return me===null?(fe.childLanes=0,fe.lanes=K,fe.child=null,fe.subtreeFlags=0,fe.memoizedProps=null,fe.memoizedState=null,fe.updateQueue=null,fe.dependencies=null,fe.stateNode=null):(fe.childLanes=me.childLanes,fe.lanes=me.lanes,fe.child=me.child,fe.subtreeFlags=0,fe.deletions=null,fe.memoizedProps=me.memoizedProps,fe.memoizedState=me.memoizedState,fe.updateQueue=me.updateQueue,fe.type=me.type,K=me.dependencies,fe.dependencies=K===null?null:{lanes:K.lanes,firstContext:K.firstContext}),fe}function createFiberFromTypeAndProps(fe,K,me,ge,xe,ye){var ve=0;if(ge=fe,typeof fe=="function")shouldConstruct(fe)&&(ve=1);else if(typeof fe=="string")ve=isHostHoistableType(fe,me,contextStackCursor.current)?26:fe==="html"||fe==="head"||fe==="body"?27:5;else e:switch(fe){case REACT_FRAGMENT_TYPE:return createFiberFromFragment(me.children,xe,ye,K);case REACT_STRICT_MODE_TYPE:ve=8,xe|=24;break;case REACT_PROFILER_TYPE:return fe=createFiberImplClass(12,me,K,xe|2),fe.elementType=REACT_PROFILER_TYPE,fe.lanes=ye,fe;case REACT_SUSPENSE_TYPE:return fe=createFiberImplClass(13,me,K,xe),fe.elementType=REACT_SUSPENSE_TYPE,fe.lanes=ye,fe;case REACT_SUSPENSE_LIST_TYPE:return fe=createFiberImplClass(19,me,K,xe),fe.elementType=REACT_SUSPENSE_LIST_TYPE,fe.lanes=ye,fe;case REACT_OFFSCREEN_TYPE:return createFiberFromOffscreen(me,xe,ye,K);default:if(typeof fe=="object"&&fe!==null)switch(fe.$$typeof){case REACT_PROVIDER_TYPE:case REACT_CONTEXT_TYPE:ve=10;break e;case REACT_CONSUMER_TYPE:ve=9;break e;case REACT_FORWARD_REF_TYPE:ve=11;break e;case REACT_MEMO_TYPE:ve=14;break e;case REACT_LAZY_TYPE:ve=16,ge=null;break e}ve=29,me=Error(formatProdErrorMessage(130,fe===null?"null":typeof fe,"")),ge=null}return K=createFiberImplClass(ve,me,K,xe),K.elementType=fe,K.type=ge,K.lanes=ye,K}function createFiberFromFragment(fe,K,me,ge){return fe=createFiberImplClass(7,fe,ge,K),fe.lanes=me,fe}function createFiberFromOffscreen(fe,K,me,ge){fe=createFiberImplClass(22,fe,ge,K),fe.elementType=REACT_OFFSCREEN_TYPE,fe.lanes=me;var xe={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var ye=xe._current;if(ye===null)throw Error(formatProdErrorMessage(456));if(!(xe._pendingVisibility&2)){var ve=enqueueConcurrentRenderForLane(ye,2);ve!==null&&(xe._pendingVisibility|=2,scheduleUpdateOnFiber(ve,ye,2))}},attach:function(){var ye=xe._current;if(ye===null)throw Error(formatProdErrorMessage(456));if(xe._pendingVisibility&2){var ve=enqueueConcurrentRenderForLane(ye,2);ve!==null&&(xe._pendingVisibility&=-3,scheduleUpdateOnFiber(ve,ye,2))}}};return fe.stateNode=xe,fe}function createFiberFromText(fe,K,me){return fe=createFiberImplClass(6,fe,null,K),fe.lanes=me,fe}function createFiberFromPortal(fe,K,me){return K=createFiberImplClass(4,fe.children!==null?fe.children:[],fe.key,K),K.lanes=me,K.stateNode={containerInfo:fe.containerInfo,pendingChildren:null,implementation:fe.implementation},K}function markUpdate(fe){fe.flags|=4}function preloadResourceAndSuspendIfNeeded(fe,K){if(K.type!=="stylesheet"||K.state.loading&4)fe.flags&=-16777217;else if(fe.flags|=16777216,!preloadResource(K)){if(K=suspenseHandlerStackCursor.current,K!==null&&((workInProgressRootRenderLanes&4194176)===workInProgressRootRenderLanes?shellBoundary!==null:(workInProgressRootRenderLanes&62914560)!==workInProgressRootRenderLanes&&!(workInProgressRootRenderLanes&536870912)||K!==shellBoundary))throw suspendedThenable=noopSuspenseyCommitThenable,SuspenseyCommitException;fe.flags|=8192}}function scheduleRetryEffect(fe,K){K!==null&&(fe.flags|=4),fe.flags&16384&&(K=fe.tag!==22?claimNextRetryLane():536870912,fe.lanes|=K,workInProgressSuspendedRetryLanes|=K)}function cutOffTailIfNeeded(fe,K){if(!isHydrating)switch(fe.tailMode){case"hidden":K=fe.tail;for(var me=null;K!==null;)K.alternate!==null&&(me=K),K=K.sibling;me===null?fe.tail=null:me.sibling=null;break;case"collapsed":me=fe.tail;for(var ge=null;me!==null;)me.alternate!==null&&(ge=me),me=me.sibling;ge===null?K||fe.tail===null?fe.tail=null:fe.tail.sibling=null:ge.sibling=null}}function bubbleProperties(fe){var K=fe.alternate!==null&&fe.alternate.child===fe.child,me=0,ge=0;if(K)for(var xe=fe.child;xe!==null;)me|=xe.lanes|xe.childLanes,ge|=xe.subtreeFlags&31457280,ge|=xe.flags&31457280,xe.return=fe,xe=xe.sibling;else for(xe=fe.child;xe!==null;)me|=xe.lanes|xe.childLanes,ge|=xe.subtreeFlags,ge|=xe.flags,xe.return=fe,xe=xe.sibling;return fe.subtreeFlags|=ge,fe.childLanes=me,K}function completeWork(fe,K,me){var ge=K.pendingProps;switch(popTreeContext(K),K.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bubbleProperties(K),null;case 1:return bubbleProperties(K),null;case 3:return me=K.stateNode,ge=null,fe!==null&&(ge=fe.memoizedState.cache),K.memoizedState.cache!==ge&&(K.flags|=2048),popProvider(CacheContext),popHostContainer(),me.pendingContext&&(me.context=me.pendingContext,me.pendingContext=null),(fe===null||fe.child===null)&&(popHydrationState(K)?markUpdate(K):fe===null||fe.memoizedState.isDehydrated&&!(K.flags&256)||(K.flags|=1024,hydrationErrors!==null&&(queueRecoverableErrors(hydrationErrors),hydrationErrors=null))),bubbleProperties(K),null;case 26:return me=K.memoizedState,fe===null?(markUpdate(K),me!==null?(bubbleProperties(K),preloadResourceAndSuspendIfNeeded(K,me)):(bubbleProperties(K),K.flags&=-16777217)):me?me!==fe.memoizedState?(markUpdate(K),bubbleProperties(K),preloadResourceAndSuspendIfNeeded(K,me)):(bubbleProperties(K),K.flags&=-16777217):(fe.memoizedProps!==ge&&markUpdate(K),bubbleProperties(K),K.flags&=-16777217),null;case 27:popHostContext(K),me=rootInstanceStackCursor.current;var xe=K.type;if(fe!==null&&K.stateNode!=null)fe.memoizedProps!==ge&&markUpdate(K);else{if(!ge){if(K.stateNode===null)throw Error(formatProdErrorMessage(166));return bubbleProperties(K),null}fe=contextStackCursor.current,popHydrationState(K)?prepareToHydrateHostInstance(K):(fe=resolveSingletonInstance(xe,ge,me),K.stateNode=fe,markUpdate(K))}return bubbleProperties(K),null;case 5:if(popHostContext(K),me=K.type,fe!==null&&K.stateNode!=null)fe.memoizedProps!==ge&&markUpdate(K);else{if(!ge){if(K.stateNode===null)throw Error(formatProdErrorMessage(166));return bubbleProperties(K),null}if(fe=contextStackCursor.current,popHydrationState(K))prepareToHydrateHostInstance(K);else{switch(xe=getOwnerDocumentFromRootContainer(rootInstanceStackCursor.current),fe){case 1:fe=xe.createElementNS("http://www.w3.org/2000/svg",me);break;case 2:fe=xe.createElementNS("http://www.w3.org/1998/Math/MathML",me);break;default:switch(me){case"svg":fe=xe.createElementNS("http://www.w3.org/2000/svg",me);break;case"math":fe=xe.createElementNS("http://www.w3.org/1998/Math/MathML",me);break;case"script":fe=xe.createElement("div"),fe.innerHTML="<script><\/script>",fe=fe.removeChild(fe.firstChild);break;case"select":fe=typeof ge.is=="string"?xe.createElement("select",{is:ge.is}):xe.createElement("select"),ge.multiple?fe.multiple=!0:ge.size&&(fe.size=ge.size);break;default:fe=typeof ge.is=="string"?xe.createElement(me,{is:ge.is}):xe.createElement(me)}}fe[internalInstanceKey]=K,fe[internalPropsKey]=ge;e:for(xe=K.child;xe!==null;){if(xe.tag===5||xe.tag===6)fe.appendChild(xe.stateNode);else if(xe.tag!==4&&xe.tag!==27&&xe.child!==null){xe.child.return=xe,xe=xe.child;continue}if(xe===K)break e;for(;xe.sibling===null;){if(xe.return===null||xe.return===K)break e;xe=xe.return}xe.sibling.return=xe.return,xe=xe.sibling}K.stateNode=fe;e:switch(setInitialProperties(fe,me,ge),me){case"button":case"input":case"select":case"textarea":fe=!!ge.autoFocus;break e;case"img":fe=!0;break e;default:fe=!1}fe&&markUpdate(K)}}return bubbleProperties(K),K.flags&=-16777217,null;case 6:if(fe&&K.stateNode!=null)fe.memoizedProps!==ge&&markUpdate(K);else{if(typeof ge!="string"&&K.stateNode===null)throw Error(formatProdErrorMessage(166));if(fe=rootInstanceStackCursor.current,popHydrationState(K)){if(fe=K.stateNode,me=K.memoizedProps,ge=null,xe=hydrationParentFiber,xe!==null)switch(xe.tag){case 27:case 5:ge=xe.memoizedProps}fe[internalInstanceKey]=K,fe=!!(fe.nodeValue===me||ge!==null&&ge.suppressHydrationWarning===!0||checkForUnmatchedText(fe.nodeValue,me)),fe||throwOnHydrationMismatch(K)}else fe=getOwnerDocumentFromRootContainer(fe).createTextNode(ge),fe[internalInstanceKey]=K,K.stateNode=fe}return bubbleProperties(K),null;case 13:if(ge=K.memoizedState,fe===null||fe.memoizedState!==null&&fe.memoizedState.dehydrated!==null){if(xe=popHydrationState(K),ge!==null&&ge.dehydrated!==null){if(fe===null){if(!xe)throw Error(formatProdErrorMessage(318));if(xe=K.memoizedState,xe=xe!==null?xe.dehydrated:null,!xe)throw Error(formatProdErrorMessage(317));xe[internalInstanceKey]=K}else resetHydrationState(),!(K.flags&128)&&(K.memoizedState=null),K.flags|=4;bubbleProperties(K),xe=!1}else hydrationErrors!==null&&(queueRecoverableErrors(hydrationErrors),hydrationErrors=null),xe=!0;if(!xe)return K.flags&256?(popSuspenseHandler(K),K):(popSuspenseHandler(K),null)}if(popSuspenseHandler(K),K.flags&128)return K.lanes=me,K;if(me=ge!==null,fe=fe!==null&&fe.memoizedState!==null,me){ge=K.child,xe=null,ge.alternate!==null&&ge.alternate.memoizedState!==null&&ge.alternate.memoizedState.cachePool!==null&&(xe=ge.alternate.memoizedState.cachePool.pool);var ye=null;ge.memoizedState!==null&&ge.memoizedState.cachePool!==null&&(ye=ge.memoizedState.cachePool.pool),ye!==xe&&(ge.flags|=2048)}return me!==fe&&me&&(K.child.flags|=8192),scheduleRetryEffect(K,K.updateQueue),bubbleProperties(K),null;case 4:return popHostContainer(),fe===null&&listenToAllSupportedEvents(K.stateNode.containerInfo),bubbleProperties(K),null;case 10:return popProvider(K.type),bubbleProperties(K),null;case 19:if(pop(suspenseStackCursor),xe=K.memoizedState,xe===null)return bubbleProperties(K),null;if(ge=(K.flags&128)!==0,ye=xe.rendering,ye===null)if(ge)cutOffTailIfNeeded(xe,!1);else{if(workInProgressRootExitStatus!==0||fe!==null&&fe.flags&128)for(fe=K.child;fe!==null;){if(ye=findFirstSuspended(fe),ye!==null){for(K.flags|=128,cutOffTailIfNeeded(xe,!1),fe=ye.updateQueue,K.updateQueue=fe,scheduleRetryEffect(K,fe),K.subtreeFlags=0,fe=me,me=K.child;me!==null;)resetWorkInProgress(me,fe),me=me.sibling;return push$1(suspenseStackCursor,suspenseStackCursor.current&1|2),K.child}fe=fe.sibling}xe.tail!==null&&now$1()>workInProgressRootRenderTargetTime&&(K.flags|=128,ge=!0,cutOffTailIfNeeded(xe,!1),K.lanes=4194304)}else{if(!ge)if(fe=findFirstSuspended(ye),fe!==null){if(K.flags|=128,ge=!0,fe=fe.updateQueue,K.updateQueue=fe,scheduleRetryEffect(K,fe),cutOffTailIfNeeded(xe,!0),xe.tail===null&&xe.tailMode==="hidden"&&!ye.alternate&&!isHydrating)return bubbleProperties(K),null}else 2*now$1()-xe.renderingStartTime>workInProgressRootRenderTargetTime&&me!==536870912&&(K.flags|=128,ge=!0,cutOffTailIfNeeded(xe,!1),K.lanes=4194304);xe.isBackwards?(ye.sibling=K.child,K.child=ye):(fe=xe.last,fe!==null?fe.sibling=ye:K.child=ye,xe.last=ye)}return xe.tail!==null?(K=xe.tail,xe.rendering=K,xe.tail=K.sibling,xe.renderingStartTime=now$1(),K.sibling=null,fe=suspenseStackCursor.current,push$1(suspenseStackCursor,ge?fe&1|2:fe&1),K):(bubbleProperties(K),null);case 22:case 23:return popSuspenseHandler(K),popHiddenContext(),ge=K.memoizedState!==null,fe!==null?fe.memoizedState!==null!==ge&&(K.flags|=8192):ge&&(K.flags|=8192),ge?me&536870912&&!(K.flags&128)&&(bubbleProperties(K),K.subtreeFlags&6&&(K.flags|=8192)):bubbleProperties(K),me=K.updateQueue,me!==null&&scheduleRetryEffect(K,me.retryQueue),me=null,fe!==null&&fe.memoizedState!==null&&fe.memoizedState.cachePool!==null&&(me=fe.memoizedState.cachePool.pool),ge=null,K.memoizedState!==null&&K.memoizedState.cachePool!==null&&(ge=K.memoizedState.cachePool.pool),ge!==me&&(K.flags|=2048),fe!==null&&pop(resumedCache),null;case 24:return me=null,fe!==null&&(me=fe.memoizedState.cache),K.memoizedState.cache!==me&&(K.flags|=2048),popProvider(CacheContext),bubbleProperties(K),null;case 25:return null}throw Error(formatProdErrorMessage(156,K.tag))}function unwindWork(fe,K){switch(popTreeContext(K),K.tag){case 1:return fe=K.flags,fe&65536?(K.flags=fe&-65537|128,K):null;case 3:return popProvider(CacheContext),popHostContainer(),fe=K.flags,fe&65536&&!(fe&128)?(K.flags=fe&-65537|128,K):null;case 26:case 27:case 5:return popHostContext(K),null;case 13:if(popSuspenseHandler(K),fe=K.memoizedState,fe!==null&&fe.dehydrated!==null){if(K.alternate===null)throw Error(formatProdErrorMessage(340));resetHydrationState()}return fe=K.flags,fe&65536?(K.flags=fe&-65537|128,K):null;case 19:return pop(suspenseStackCursor),null;case 4:return popHostContainer(),null;case 10:return popProvider(K.type),null;case 22:case 23:return popSuspenseHandler(K),popHiddenContext(),fe!==null&&pop(resumedCache),fe=K.flags,fe&65536?(K.flags=fe&-65537|128,K):null;case 24:return popProvider(CacheContext),null;case 25:return null;default:return null}}function unwindInterruptedWork(fe,K){switch(popTreeContext(K),K.tag){case 3:popProvider(CacheContext),popHostContainer();break;case 26:case 27:case 5:popHostContext(K);break;case 4:popHostContainer();break;case 13:popSuspenseHandler(K);break;case 19:pop(suspenseStackCursor);break;case 10:popProvider(K.type);break;case 22:case 23:popSuspenseHandler(K),popHiddenContext(),fe!==null&&pop(resumedCache);break;case 24:popProvider(CacheContext)}}var DefaultAsyncDispatcher={getCacheForType:function(fe){var K=readContext(CacheContext),me=K.data.get(fe);return me===void 0&&(me=fe(),K.data.set(fe,me)),me}},PossiblyWeakMap=typeof WeakMap=="function"?WeakMap:Map,executionContext=0,workInProgressRoot=null,workInProgress=null,workInProgressRootRenderLanes=0,workInProgressSuspendedReason=0,workInProgressThrownValue=null,workInProgressRootDidSkipSuspendedSiblings=!1,workInProgressRootIsPrerendering=!1,workInProgressRootDidAttachPingListener=!1,entangledRenderLanes=0,workInProgressRootExitStatus=0,workInProgressRootSkippedLanes=0,workInProgressRootInterleavedUpdatedLanes=0,workInProgressRootPingedLanes=0,workInProgressDeferredLane=0,workInProgressSuspendedRetryLanes=0,workInProgressRootConcurrentErrors=null,workInProgressRootRecoverableErrors=null,workInProgressRootDidIncludeRecursiveRenderUpdate=!1,globalMostRecentFallbackTime=0,workInProgressRootRenderTargetTime=1/0,workInProgressTransitions=null,legacyErrorBoundariesThatAlreadyFailed=null,rootDoesHavePassiveEffects=!1,rootWithPendingPassiveEffects=null,pendingPassiveEffectsLanes=0,pendingPassiveEffectsRemainingLanes=0,pendingPassiveTransitions=null,nestedUpdateCount=0,rootWithNestedUpdates=null;function requestUpdateLane(){if(executionContext&2&&workInProgressRootRenderLanes!==0)return workInProgressRootRenderLanes&-workInProgressRootRenderLanes;if(ReactSharedInternals.T!==null){var fe=currentEntangledLane;return fe!==0?fe:requestTransitionLane()}return resolveUpdatePriority()}function requestDeferredLane(){workInProgressDeferredLane===0&&(workInProgressDeferredLane=!(workInProgressRootRenderLanes&536870912)||isHydrating?claimNextTransitionLane():536870912);var fe=suspenseHandlerStackCursor.current;return fe!==null&&(fe.flags|=32),workInProgressDeferredLane}function scheduleUpdateOnFiber(fe,K,me){(fe===workInProgressRoot&&workInProgressSuspendedReason===2||fe.cancelPendingCommit!==null)&&(prepareFreshStack(fe,0),markRootSuspended(fe,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)),markRootUpdated$1(fe,me),(!(executionContext&2)||fe!==workInProgressRoot)&&(fe===workInProgressRoot&&(!(executionContext&2)&&(workInProgressRootInterleavedUpdatedLanes|=me),workInProgressRootExitStatus===4&&markRootSuspended(fe,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)),ensureRootIsScheduled(fe))}function performWorkOnRoot(fe,K,me){if(executionContext&6)throw Error(formatProdErrorMessage(327));var ge=!me&&(K&60)===0&&(K&fe.expiredLanes)===0||checkIfRootIsPrerendering(fe,K),xe=ge?renderRootConcurrent(fe,K):renderRootSync(fe,K,!0),ye=ge;do{if(xe===0){workInProgressRootIsPrerendering&&!ge&&markRootSuspended(fe,K,0,!1);break}else if(xe===6)markRootSuspended(fe,K,0,!workInProgressRootDidSkipSuspendedSiblings);else{if(me=fe.current.alternate,ye&&!isRenderConsistentWithExternalStores(me)){xe=renderRootSync(fe,K,!1),ye=!1;continue}if(xe===2){if(ye=K,fe.errorRecoveryDisabledLanes&ye)var ve=0;else ve=fe.pendingLanes&-536870913,ve=ve!==0?ve:ve&536870912?536870912:0;if(ve!==0){K=ve;e:{var _e=fe;xe=workInProgressRootConcurrentErrors;var Ee=_e.current.memoizedState.isDehydrated;if(Ee&&(prepareFreshStack(_e,ve).flags|=256),ve=renderRootSync(_e,ve,!1),ve!==2){if(workInProgressRootDidAttachPingListener&&!Ee){_e.errorRecoveryDisabledLanes|=ye,workInProgressRootInterleavedUpdatedLanes|=ye,xe=4;break e}ye=workInProgressRootRecoverableErrors,workInProgressRootRecoverableErrors=xe,ye!==null&&queueRecoverableErrors(ye)}xe=ve}if(ye=!1,xe!==2)continue}}if(xe===1){prepareFreshStack(fe,0),markRootSuspended(fe,K,0,!0);break}e:{switch(ge=fe,xe){case 0:case 1:throw Error(formatProdErrorMessage(345));case 4:if((K&4194176)===K){markRootSuspended(ge,K,workInProgressDeferredLane,!workInProgressRootDidSkipSuspendedSiblings);break e}break;case 2:workInProgressRootRecoverableErrors=null;break;case 3:case 5:break;default:throw Error(formatProdErrorMessage(329))}if(ge.finishedWork=me,ge.finishedLanes=K,(K&62914560)===K&&(ye=globalMostRecentFallbackTime+300-now$1(),10<ye)){if(markRootSuspended(ge,K,workInProgressDeferredLane,!workInProgressRootDidSkipSuspendedSiblings),getNextLanes(ge,0)!==0)break e;ge.timeoutHandle=scheduleTimeout(commitRootWhenReady.bind(null,ge,me,workInProgressRootRecoverableErrors,workInProgressTransitions,workInProgressRootDidIncludeRecursiveRenderUpdate,K,workInProgressDeferredLane,workInProgressRootInterleavedUpdatedLanes,workInProgressSuspendedRetryLanes,workInProgressRootDidSkipSuspendedSiblings,2,-0,0),ye);break e}commitRootWhenReady(ge,me,workInProgressRootRecoverableErrors,workInProgressTransitions,workInProgressRootDidIncludeRecursiveRenderUpdate,K,workInProgressDeferredLane,workInProgressRootInterleavedUpdatedLanes,workInProgressSuspendedRetryLanes,workInProgressRootDidSkipSuspendedSiblings,0,-0,0)}}break}while(!0);ensureRootIsScheduled(fe)}function queueRecoverableErrors(fe){workInProgressRootRecoverableErrors===null?workInProgressRootRecoverableErrors=fe:workInProgressRootRecoverableErrors.push.apply(workInProgressRootRecoverableErrors,fe)}function commitRootWhenReady(fe,K,me,ge,xe,ye,ve,_e,Ee,be,Ae,Se,Ce){var Te=K.subtreeFlags;if((Te&8192||(Te&16785408)===16785408)&&(suspendedState={stylesheets:null,count:0,unsuspend:noop$5},accumulateSuspenseyCommitOnFiber(K),K=waitForCommitToBeReady(),K!==null)){fe.cancelPendingCommit=K(commitRoot.bind(null,fe,me,ge,xe,ve,_e,Ee,1,Se,Ce)),markRootSuspended(fe,ye,ve,!be);return}commitRoot(fe,me,ge,xe,ve,_e,Ee,Ae,Se,Ce)}function isRenderConsistentWithExternalStores(fe){for(var K=fe;;){var me=K.tag;if((me===0||me===11||me===15)&&K.flags&16384&&(me=K.updateQueue,me!==null&&(me=me.stores,me!==null)))for(var ge=0;ge<me.length;ge++){var xe=me[ge],ye=xe.getSnapshot;xe=xe.value;try{if(!objectIs$2(ye(),xe))return!1}catch{return!1}}if(me=K.child,K.subtreeFlags&16384&&me!==null)me.return=K,K=me;else{if(K===fe)break;for(;K.sibling===null;){if(K.return===null||K.return===fe)return!0;K=K.return}K.sibling.return=K.return,K=K.sibling}}return!0}function markRootSuspended(fe,K,me,ge){K&=~workInProgressRootPingedLanes,K&=~workInProgressRootInterleavedUpdatedLanes,fe.suspendedLanes|=K,fe.pingedLanes&=~K,ge&&(fe.warmLanes|=K),ge=fe.expirationTimes;for(var xe=K;0<xe;){var ye=31-clz32(xe),ve=1<<ye;ge[ye]=-1,xe&=~ve}me!==0&&markSpawnedDeferredLane(fe,me,K)}function flushSyncWork$1(){return executionContext&6?!0:(flushSyncWorkAcrossRoots_impl(0),!1)}function resetWorkInProgressStack(){if(workInProgress!==null){if(workInProgressSuspendedReason===0)var fe=workInProgress.return;else fe=workInProgress,lastContextDependency=currentlyRenderingFiber=null,resetHooksOnUnwind(fe),thenableState$1=null,thenableIndexCounter$1=0,fe=workInProgress;for(;fe!==null;)unwindInterruptedWork(fe.alternate,fe),fe=fe.return;workInProgress=null}}function prepareFreshStack(fe,K){fe.finishedWork=null,fe.finishedLanes=0;var me=fe.timeoutHandle;me!==-1&&(fe.timeoutHandle=-1,cancelTimeout(me)),me=fe.cancelPendingCommit,me!==null&&(fe.cancelPendingCommit=null,me()),resetWorkInProgressStack(),workInProgressRoot=fe,workInProgress=me=createWorkInProgress(fe.current,null),workInProgressRootRenderLanes=K,workInProgressSuspendedReason=0,workInProgressThrownValue=null,workInProgressRootDidSkipSuspendedSiblings=!1,workInProgressRootIsPrerendering=checkIfRootIsPrerendering(fe,K),workInProgressRootDidAttachPingListener=!1,workInProgressSuspendedRetryLanes=workInProgressDeferredLane=workInProgressRootPingedLanes=workInProgressRootInterleavedUpdatedLanes=workInProgressRootSkippedLanes=workInProgressRootExitStatus=0,workInProgressRootRecoverableErrors=workInProgressRootConcurrentErrors=null,workInProgressRootDidIncludeRecursiveRenderUpdate=!1,K&8&&(K|=K&32);var ge=fe.entangledLanes;if(ge!==0)for(fe=fe.entanglements,ge&=K;0<ge;){var xe=31-clz32(ge),ye=1<<xe;K|=fe[xe],ge&=~ye}return entangledRenderLanes=K,finishQueueingConcurrentUpdates(),me}function handleThrow(fe,K){currentlyRenderingFiber$1=null,ReactSharedInternals.H=ContextOnlyDispatcher,K===SuspenseException?(K=getSuspendedThenable(),workInProgressSuspendedReason=3):K===SuspenseyCommitException?(K=getSuspendedThenable(),workInProgressSuspendedReason=4):workInProgressSuspendedReason=K===SelectiveHydrationException?8:K!==null&&typeof K=="object"&&typeof K.then=="function"?6:1,workInProgressThrownValue=K,workInProgress===null&&(workInProgressRootExitStatus=1,logUncaughtError(fe,createCapturedValueAtFiber(K,fe.current)))}function pushDispatcher(){var fe=ReactSharedInternals.H;return ReactSharedInternals.H=ContextOnlyDispatcher,fe===null?ContextOnlyDispatcher:fe}function pushAsyncDispatcher(){var fe=ReactSharedInternals.A;return ReactSharedInternals.A=DefaultAsyncDispatcher,fe}function renderDidSuspendDelayIfPossible(){workInProgressRootExitStatus=4,workInProgressRootDidSkipSuspendedSiblings||(workInProgressRootRenderLanes&4194176)!==workInProgressRootRenderLanes&&suspenseHandlerStackCursor.current!==null||(workInProgressRootIsPrerendering=!0),!(workInProgressRootSkippedLanes&134217727)&&!(workInProgressRootInterleavedUpdatedLanes&134217727)||workInProgressRoot===null||markRootSuspended(workInProgressRoot,workInProgressRootRenderLanes,workInProgressDeferredLane,!1)}function renderRootSync(fe,K,me){var ge=executionContext;executionContext|=2;var xe=pushDispatcher(),ye=pushAsyncDispatcher();(workInProgressRoot!==fe||workInProgressRootRenderLanes!==K)&&(workInProgressTransitions=null,prepareFreshStack(fe,K)),K=!1;var ve=workInProgressRootExitStatus;e:do try{if(workInProgressSuspendedReason!==0&&workInProgress!==null){var _e=workInProgress,Ee=workInProgressThrownValue;switch(workInProgressSuspendedReason){case 8:resetWorkInProgressStack(),ve=6;break e;case 3:case 2:case 6:suspenseHandlerStackCursor.current===null&&(K=!0);var be=workInProgressSuspendedReason;if(workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(fe,_e,Ee,be),me&&workInProgressRootIsPrerendering){ve=0;break e}break;default:be=workInProgressSuspendedReason,workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(fe,_e,Ee,be)}}workLoopSync(),ve=workInProgressRootExitStatus;break}catch(Ae){handleThrow(fe,Ae)}while(!0);return K&&fe.shellSuspendCounter++,lastContextDependency=currentlyRenderingFiber=null,executionContext=ge,ReactSharedInternals.H=xe,ReactSharedInternals.A=ye,workInProgress===null&&(workInProgressRoot=null,workInProgressRootRenderLanes=0,finishQueueingConcurrentUpdates()),ve}function workLoopSync(){for(;workInProgress!==null;)performUnitOfWork(workInProgress)}function renderRootConcurrent(fe,K){var me=executionContext;executionContext|=2;var ge=pushDispatcher(),xe=pushAsyncDispatcher();workInProgressRoot!==fe||workInProgressRootRenderLanes!==K?(workInProgressTransitions=null,workInProgressRootRenderTargetTime=now$1()+500,prepareFreshStack(fe,K)):workInProgressRootIsPrerendering=checkIfRootIsPrerendering(fe,K);e:do try{if(workInProgressSuspendedReason!==0&&workInProgress!==null){K=workInProgress;var ye=workInProgressThrownValue;t:switch(workInProgressSuspendedReason){case 1:workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(fe,K,ye,1);break;case 2:if(isThenableResolved(ye)){workInProgressSuspendedReason=0,workInProgressThrownValue=null,replaySuspendedUnitOfWork(K);break}K=function(){workInProgressSuspendedReason===2&&workInProgressRoot===fe&&(workInProgressSuspendedReason=7),ensureRootIsScheduled(fe)},ye.then(K,K);break e;case 3:workInProgressSuspendedReason=7;break e;case 4:workInProgressSuspendedReason=5;break e;case 7:isThenableResolved(ye)?(workInProgressSuspendedReason=0,workInProgressThrownValue=null,replaySuspendedUnitOfWork(K)):(workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(fe,K,ye,7));break;case 5:var ve=null;switch(workInProgress.tag){case 26:ve=workInProgress.memoizedState;case 5:case 27:var _e=workInProgress;if(!ve||preloadResource(ve)){workInProgressSuspendedReason=0,workInProgressThrownValue=null;var Ee=_e.sibling;if(Ee!==null)workInProgress=Ee;else{var be=_e.return;be!==null?(workInProgress=be,completeUnitOfWork(be)):workInProgress=null}break t}}workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(fe,K,ye,5);break;case 6:workInProgressSuspendedReason=0,workInProgressThrownValue=null,throwAndUnwindWorkLoop(fe,K,ye,6);break;case 8:resetWorkInProgressStack(),workInProgressRootExitStatus=6;break e;default:throw Error(formatProdErrorMessage(462))}}workLoopConcurrent();break}catch(Ae){handleThrow(fe,Ae)}while(!0);return lastContextDependency=currentlyRenderingFiber=null,ReactSharedInternals.H=ge,ReactSharedInternals.A=xe,executionContext=me,workInProgress!==null?0:(workInProgressRoot=null,workInProgressRootRenderLanes=0,finishQueueingConcurrentUpdates(),workInProgressRootExitStatus)}function workLoopConcurrent(){for(;workInProgress!==null&&!shouldYield();)performUnitOfWork(workInProgress)}function performUnitOfWork(fe){var K=beginWork(fe.alternate,fe,entangledRenderLanes);fe.memoizedProps=fe.pendingProps,K===null?completeUnitOfWork(fe):workInProgress=K}function replaySuspendedUnitOfWork(fe){var K=fe,me=K.alternate;switch(K.tag){case 15:case 0:K=replayFunctionComponent(me,K,K.pendingProps,K.type,void 0,workInProgressRootRenderLanes);break;case 11:K=replayFunctionComponent(me,K,K.pendingProps,K.type.render,K.ref,workInProgressRootRenderLanes);break;case 5:resetHooksOnUnwind(K);default:unwindInterruptedWork(me,K),K=workInProgress=resetWorkInProgress(K,entangledRenderLanes),K=beginWork(me,K,entangledRenderLanes)}fe.memoizedProps=fe.pendingProps,K===null?completeUnitOfWork(fe):workInProgress=K}function throwAndUnwindWorkLoop(fe,K,me,ge){lastContextDependency=currentlyRenderingFiber=null,resetHooksOnUnwind(K),thenableState$1=null,thenableIndexCounter$1=0;var xe=K.return;try{if(throwException(fe,xe,K,me,workInProgressRootRenderLanes)){workInProgressRootExitStatus=1,logUncaughtError(fe,createCapturedValueAtFiber(me,fe.current)),workInProgress=null;return}}catch(ye){if(xe!==null)throw workInProgress=xe,ye;workInProgressRootExitStatus=1,logUncaughtError(fe,createCapturedValueAtFiber(me,fe.current)),workInProgress=null;return}K.flags&32768?(isHydrating||ge===1?fe=!0:workInProgressRootIsPrerendering||workInProgressRootRenderLanes&536870912?fe=!1:(workInProgressRootDidSkipSuspendedSiblings=fe=!0,(ge===2||ge===3||ge===6)&&(ge=suspenseHandlerStackCursor.current,ge!==null&&ge.tag===13&&(ge.flags|=16384))),unwindUnitOfWork(K,fe)):completeUnitOfWork(K)}function completeUnitOfWork(fe){var K=fe;do{if(K.flags&32768){unwindUnitOfWork(K,workInProgressRootDidSkipSuspendedSiblings);return}fe=K.return;var me=completeWork(K.alternate,K,entangledRenderLanes);if(me!==null){workInProgress=me;return}if(K=K.sibling,K!==null){workInProgress=K;return}workInProgress=K=fe}while(K!==null);workInProgressRootExitStatus===0&&(workInProgressRootExitStatus=5)}function unwindUnitOfWork(fe,K){do{var me=unwindWork(fe.alternate,fe);if(me!==null){me.flags&=32767,workInProgress=me;return}if(me=fe.return,me!==null&&(me.flags|=32768,me.subtreeFlags=0,me.deletions=null),!K&&(fe=fe.sibling,fe!==null)){workInProgress=fe;return}workInProgress=fe=me}while(fe!==null);workInProgressRootExitStatus=6,workInProgress=null}function commitRoot(fe,K,me,ge,xe,ye,ve,_e,Ee,be){var Ae=ReactSharedInternals.T,Se=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=2,ReactSharedInternals.T=null,commitRootImpl(fe,K,me,ge,Se,xe,ye,ve,_e,Ee,be)}finally{ReactSharedInternals.T=Ae,ReactDOMSharedInternals.p=Se}}function commitRootImpl(fe,K,me,ge,xe,ye,ve,_e){do flushPassiveEffects();while(rootWithPendingPassiveEffects!==null);if(executionContext&6)throw Error(formatProdErrorMessage(327));var Ee=fe.finishedWork;if(ge=fe.finishedLanes,Ee===null)return null;if(fe.finishedWork=null,fe.finishedLanes=0,Ee===fe.current)throw Error(formatProdErrorMessage(177));fe.callbackNode=null,fe.callbackPriority=0,fe.cancelPendingCommit=null;var be=Ee.lanes|Ee.childLanes;if(be|=concurrentlyUpdatedLanes,markRootFinished(fe,ge,be,ye,ve,_e),fe===workInProgressRoot&&(workInProgress=workInProgressRoot=null,workInProgressRootRenderLanes=0),!(Ee.subtreeFlags&10256)&&!(Ee.flags&10256)||rootDoesHavePassiveEffects||(rootDoesHavePassiveEffects=!0,pendingPassiveEffectsRemainingLanes=be,pendingPassiveTransitions=me,scheduleCallback$1(NormalPriority$1,function(){return flushPassiveEffects(),null})),me=(Ee.flags&15990)!==0,Ee.subtreeFlags&15990||me?(me=ReactSharedInternals.T,ReactSharedInternals.T=null,ye=ReactDOMSharedInternals.p,ReactDOMSharedInternals.p=2,ve=executionContext,executionContext|=4,commitBeforeMutationEffects(fe,Ee),commitMutationEffectsOnFiber(Ee,fe),restoreSelection(selectionInformation,fe.containerInfo),_enabled=!!eventsEnabled,selectionInformation=eventsEnabled=null,fe.current=Ee,commitLayoutEffectOnFiber(fe,Ee.alternate,Ee),requestPaint(),executionContext=ve,ReactDOMSharedInternals.p=ye,ReactSharedInternals.T=me):fe.current=Ee,rootDoesHavePassiveEffects?(rootDoesHavePassiveEffects=!1,rootWithPendingPassiveEffects=fe,pendingPassiveEffectsLanes=ge):releaseRootPooledCache(fe,be),be=fe.pendingLanes,be===0&&(legacyErrorBoundariesThatAlreadyFailed=null),onCommitRoot(Ee.stateNode),ensureRootIsScheduled(fe),K!==null)for(xe=fe.onRecoverableError,Ee=0;Ee<K.length;Ee++)be=K[Ee],xe(be.value,{componentStack:be.stack});return pendingPassiveEffectsLanes&3&&flushPassiveEffects(),be=fe.pendingLanes,ge&4194218&&be&42?fe===rootWithNestedUpdates?nestedUpdateCount++:(nestedUpdateCount=0,rootWithNestedUpdates=fe):nestedUpdateCount=0,flushSyncWorkAcrossRoots_impl(0),null}function releaseRootPooledCache(fe,K){(fe.pooledCacheLanes&=K)===0&&(K=fe.pooledCache,K!=null&&(fe.pooledCache=null,releaseCache(K)))}function flushPassiveEffects(){if(rootWithPendingPassiveEffects!==null){var fe=rootWithPendingPassiveEffects,K=pendingPassiveEffectsRemainingLanes;pendingPassiveEffectsRemainingLanes=0;var me=lanesToEventPriority(pendingPassiveEffectsLanes),ge=ReactSharedInternals.T,xe=ReactDOMSharedInternals.p;try{if(ReactDOMSharedInternals.p=32>me?32:me,ReactSharedInternals.T=null,rootWithPendingPassiveEffects===null)var ye=!1;else{me=pendingPassiveTransitions,pendingPassiveTransitions=null;var ve=rootWithPendingPassiveEffects,_e=pendingPassiveEffectsLanes;if(rootWithPendingPassiveEffects=null,pendingPassiveEffectsLanes=0,executionContext&6)throw Error(formatProdErrorMessage(331));var Ee=executionContext;if(executionContext|=4,commitPassiveUnmountOnFiber(ve.current),commitPassiveMountOnFiber(ve,ve.current,_e,me),executionContext=Ee,flushSyncWorkAcrossRoots_impl(0,!1),injectedHook&&typeof injectedHook.onPostCommitFiberRoot=="function")try{injectedHook.onPostCommitFiberRoot(rendererID,ve)}catch{}ye=!0}return ye}finally{ReactDOMSharedInternals.p=xe,ReactSharedInternals.T=ge,releaseRootPooledCache(fe,K)}}return!1}function captureCommitPhaseErrorOnRoot(fe,K,me){K=createCapturedValueAtFiber(me,K),K=createRootErrorUpdate(fe.stateNode,K,2),fe=enqueueUpdate(fe,K,2),fe!==null&&(markRootUpdated$1(fe,2),ensureRootIsScheduled(fe))}function captureCommitPhaseError(fe,K,me){if(fe.tag===3)captureCommitPhaseErrorOnRoot(fe,fe,me);else for(;K!==null;){if(K.tag===3){captureCommitPhaseErrorOnRoot(K,fe,me);break}else if(K.tag===1){var ge=K.stateNode;if(typeof K.type.getDerivedStateFromError=="function"||typeof ge.componentDidCatch=="function"&&(legacyErrorBoundariesThatAlreadyFailed===null||!legacyErrorBoundariesThatAlreadyFailed.has(ge))){fe=createCapturedValueAtFiber(me,fe),me=createClassErrorUpdate(2),ge=enqueueUpdate(K,me,2),ge!==null&&(initializeClassErrorUpdate(me,ge,K,fe),markRootUpdated$1(ge,2),ensureRootIsScheduled(ge));break}}K=K.return}}function attachPingListener(fe,K,me){var ge=fe.pingCache;if(ge===null){ge=fe.pingCache=new PossiblyWeakMap;var xe=new Set;ge.set(K,xe)}else xe=ge.get(K),xe===void 0&&(xe=new Set,ge.set(K,xe));xe.has(me)||(workInProgressRootDidAttachPingListener=!0,xe.add(me),fe=pingSuspendedRoot.bind(null,fe,K,me),K.then(fe,fe))}function pingSuspendedRoot(fe,K,me){var ge=fe.pingCache;ge!==null&&ge.delete(K),fe.pingedLanes|=fe.suspendedLanes&me,fe.warmLanes&=~me,workInProgressRoot===fe&&(workInProgressRootRenderLanes&me)===me&&(workInProgressRootExitStatus===4||workInProgressRootExitStatus===3&&(workInProgressRootRenderLanes&62914560)===workInProgressRootRenderLanes&&300>now$1()-globalMostRecentFallbackTime?!(executionContext&2)&&prepareFreshStack(fe,0):workInProgressRootPingedLanes|=me,workInProgressSuspendedRetryLanes===workInProgressRootRenderLanes&&(workInProgressSuspendedRetryLanes=0)),ensureRootIsScheduled(fe)}function retryTimedOutBoundary(fe,K){K===0&&(K=claimNextRetryLane()),fe=enqueueConcurrentRenderForLane(fe,K),fe!==null&&(markRootUpdated$1(fe,K),ensureRootIsScheduled(fe))}function retryDehydratedSuspenseBoundary(fe){var K=fe.memoizedState,me=0;K!==null&&(me=K.retryLane),retryTimedOutBoundary(fe,me)}function resolveRetryWakeable(fe,K){var me=0;switch(fe.tag){case 13:var ge=fe.stateNode,xe=fe.memoizedState;xe!==null&&(me=xe.retryLane);break;case 19:ge=fe.stateNode;break;case 22:ge=fe.stateNode._retryCache;break;default:throw Error(formatProdErrorMessage(314))}ge!==null&&ge.delete(K),retryTimedOutBoundary(fe,me)}function scheduleCallback$1(fe,K){return scheduleCallback$3(fe,K)}var firstScheduledRoot=null,lastScheduledRoot=null,didScheduleMicrotask=!1,mightHavePendingSyncWork=!1,isFlushingWork=!1,currentEventTransitionLane=0;function ensureRootIsScheduled(fe){fe!==lastScheduledRoot&&fe.next===null&&(lastScheduledRoot===null?firstScheduledRoot=lastScheduledRoot=fe:lastScheduledRoot=lastScheduledRoot.next=fe),mightHavePendingSyncWork=!0,didScheduleMicrotask||(didScheduleMicrotask=!0,scheduleImmediateTask(processRootScheduleInMicrotask))}function flushSyncWorkAcrossRoots_impl(fe,K){if(!isFlushingWork&&mightHavePendingSyncWork){isFlushingWork=!0;do for(var me=!1,ge=firstScheduledRoot;ge!==null;){if(fe!==0){var xe=ge.pendingLanes;if(xe===0)var ye=0;else{var ve=ge.suspendedLanes,_e=ge.pingedLanes;ye=(1<<31-clz32(42|fe)+1)-1,ye&=xe&~(ve&~_e),ye=ye&201326677?ye&201326677|1:ye?ye|2:0}ye!==0&&(me=!0,performSyncWorkOnRoot(ge,ye))}else ye=workInProgressRootRenderLanes,ye=getNextLanes(ge,ge===workInProgressRoot?ye:0),!(ye&3)||checkIfRootIsPrerendering(ge,ye)||(me=!0,performSyncWorkOnRoot(ge,ye));ge=ge.next}while(me);isFlushingWork=!1}}function processRootScheduleInMicrotask(){mightHavePendingSyncWork=didScheduleMicrotask=!1;var fe=0;currentEventTransitionLane!==0&&(shouldAttemptEagerTransition()&&(fe=currentEventTransitionLane),currentEventTransitionLane=0);for(var K=now$1(),me=null,ge=firstScheduledRoot;ge!==null;){var xe=ge.next,ye=scheduleTaskForRootDuringMicrotask(ge,K);ye===0?(ge.next=null,me===null?firstScheduledRoot=xe:me.next=xe,xe===null&&(lastScheduledRoot=me)):(me=ge,(fe!==0||ye&3)&&(mightHavePendingSyncWork=!0)),ge=xe}flushSyncWorkAcrossRoots_impl(fe)}function scheduleTaskForRootDuringMicrotask(fe,K){for(var me=fe.suspendedLanes,ge=fe.pingedLanes,xe=fe.expirationTimes,ye=fe.pendingLanes&-62914561;0<ye;){var ve=31-clz32(ye),_e=1<<ve,Ee=xe[ve];Ee===-1?(!(_e&me)||_e&ge)&&(xe[ve]=computeExpirationTime(_e,K)):Ee<=K&&(fe.expiredLanes|=_e),ye&=~_e}if(K=workInProgressRoot,me=workInProgressRootRenderLanes,me=getNextLanes(fe,fe===K?me:0),ge=fe.callbackNode,me===0||fe===K&&workInProgressSuspendedReason===2||fe.cancelPendingCommit!==null)return ge!==null&&ge!==null&&cancelCallback$1(ge),fe.callbackNode=null,fe.callbackPriority=0;if(!(me&3)||checkIfRootIsPrerendering(fe,me)){if(K=me&-me,K===fe.callbackPriority)return K;switch(ge!==null&&cancelCallback$1(ge),lanesToEventPriority(me)){case 2:case 8:me=UserBlockingPriority;break;case 32:me=NormalPriority$1;break;case 268435456:me=IdlePriority;break;default:me=NormalPriority$1}return ge=performWorkOnRootViaSchedulerTask.bind(null,fe),me=scheduleCallback$3(me,ge),fe.callbackPriority=K,fe.callbackNode=me,K}return ge!==null&&ge!==null&&cancelCallback$1(ge),fe.callbackPriority=2,fe.callbackNode=null,2}function performWorkOnRootViaSchedulerTask(fe,K){var me=fe.callbackNode;if(flushPassiveEffects()&&fe.callbackNode!==me)return null;var ge=workInProgressRootRenderLanes;return ge=getNextLanes(fe,fe===workInProgressRoot?ge:0),ge===0?null:(performWorkOnRoot(fe,ge,K),scheduleTaskForRootDuringMicrotask(fe,now$1()),fe.callbackNode!=null&&fe.callbackNode===me?performWorkOnRootViaSchedulerTask.bind(null,fe):null)}function performSyncWorkOnRoot(fe,K){if(flushPassiveEffects())return null;performWorkOnRoot(fe,K,!0)}function scheduleImmediateTask(fe){scheduleMicrotask(function(){executionContext&6?scheduleCallback$3(ImmediatePriority,fe):fe()})}function requestTransitionLane(){return currentEventTransitionLane===0&&(currentEventTransitionLane=claimNextTransitionLane()),currentEventTransitionLane}function coerceFormActionProp(fe){return fe==null||typeof fe=="symbol"||typeof fe=="boolean"?null:typeof fe=="function"?fe:sanitizeURL(""+fe)}function createFormDataWithSubmitter(fe,K){var me=K.ownerDocument.createElement("input");return me.name=K.name,me.value=K.value,fe.id&&me.setAttribute("form",fe.id),K.parentNode.insertBefore(me,K),fe=new FormData(fe),me.parentNode.removeChild(me),fe}function extractEvents$1(fe,K,me,ge,xe){if(K==="submit"&&me&&me.stateNode===xe){var ye=coerceFormActionProp((xe[internalPropsKey]||null).action),ve=ge.submitter;ve&&(K=(K=ve[internalPropsKey]||null)?coerceFormActionProp(K.formAction):ve.getAttribute("formAction"),K!==null&&(ye=K,ve=null));var _e=new SyntheticEvent("action","action",null,ge,xe);fe.push({event:_e,listeners:[{instance:null,listener:function(){if(ge.defaultPrevented){if(currentEventTransitionLane!==0){var Ee=ve?createFormDataWithSubmitter(xe,ve):new FormData(xe);startHostTransition(me,{pending:!0,data:Ee,method:xe.method,action:ye},null,Ee)}}else typeof ye=="function"&&(_e.preventDefault(),Ee=ve?createFormDataWithSubmitter(xe,ve):new FormData(xe),startHostTransition(me,{pending:!0,data:Ee,method:xe.method,action:ye},ye,Ee))},currentTarget:xe}]})}}for(var i$jscomp$inline_1439=0;i$jscomp$inline_1439<simpleEventPluginEvents.length;i$jscomp$inline_1439++){var eventName$jscomp$inline_1440=simpleEventPluginEvents[i$jscomp$inline_1439],domEventName$jscomp$inline_1441=eventName$jscomp$inline_1440.toLowerCase(),capitalizedEvent$jscomp$inline_1442=eventName$jscomp$inline_1440[0].toUpperCase()+eventName$jscomp$inline_1440.slice(1);registerSimpleEvent(domEventName$jscomp$inline_1441,"on"+capitalizedEvent$jscomp$inline_1442)}registerSimpleEvent(ANIMATION_END,"onAnimationEnd");registerSimpleEvent(ANIMATION_ITERATION,"onAnimationIteration");registerSimpleEvent(ANIMATION_START,"onAnimationStart");registerSimpleEvent("dblclick","onDoubleClick");registerSimpleEvent("focusin","onFocus");registerSimpleEvent("focusout","onBlur");registerSimpleEvent(TRANSITION_RUN,"onTransitionRun");registerSimpleEvent(TRANSITION_START,"onTransitionStart");registerSimpleEvent(TRANSITION_CANCEL,"onTransitionCancel");registerSimpleEvent(TRANSITION_END,"onTransitionEnd");registerDirectEvent("onMouseEnter",["mouseout","mouseover"]);registerDirectEvent("onMouseLeave",["mouseout","mouseover"]);registerDirectEvent("onPointerEnter",["pointerout","pointerover"]);registerDirectEvent("onPointerLeave",["pointerout","pointerover"]);registerTwoPhaseEvent("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));registerTwoPhaseEvent("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));registerTwoPhaseEvent("onBeforeInput",["compositionend","keypress","textInput","paste"]);registerTwoPhaseEvent("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));registerTwoPhaseEvent("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));registerTwoPhaseEvent("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mediaEventTypes="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),nonDelegatedEvents=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mediaEventTypes));function processDispatchQueue(fe,K){K=(K&4)!==0;for(var me=0;me<fe.length;me++){var ge=fe[me],xe=ge.event;ge=ge.listeners;e:{var ye=void 0;if(K)for(var ve=ge.length-1;0<=ve;ve--){var _e=ge[ve],Ee=_e.instance,be=_e.currentTarget;if(_e=_e.listener,Ee!==ye&&xe.isPropagationStopped())break e;ye=_e,xe.currentTarget=be;try{ye(xe)}catch(Ae){reportGlobalError(Ae)}xe.currentTarget=null,ye=Ee}else for(ve=0;ve<ge.length;ve++){if(_e=ge[ve],Ee=_e.instance,be=_e.currentTarget,_e=_e.listener,Ee!==ye&&xe.isPropagationStopped())break e;ye=_e,xe.currentTarget=be;try{ye(xe)}catch(Ae){reportGlobalError(Ae)}xe.currentTarget=null,ye=Ee}}}}function listenToNonDelegatedEvent(fe,K){var me=K[internalEventHandlersKey];me===void 0&&(me=K[internalEventHandlersKey]=new Set);var ge=fe+"__bubble";me.has(ge)||(addTrappedEventListener(K,fe,2,!1),me.add(ge))}function listenToNativeEvent(fe,K,me){var ge=0;K&&(ge|=4),addTrappedEventListener(me,fe,ge,K)}var listeningMarker="_reactListening"+Math.random().toString(36).slice(2);function listenToAllSupportedEvents(fe){if(!fe[listeningMarker]){fe[listeningMarker]=!0,allNativeEvents.forEach(function(me){me!=="selectionchange"&&(nonDelegatedEvents.has(me)||listenToNativeEvent(me,!1,fe),listenToNativeEvent(me,!0,fe))});var K=fe.nodeType===9?fe:fe.ownerDocument;K===null||K[listeningMarker]||(K[listeningMarker]=!0,listenToNativeEvent("selectionchange",!1,K))}}function addTrappedEventListener(fe,K,me,ge){switch(getEventPriority(K)){case 2:var xe=dispatchDiscreteEvent;break;case 8:xe=dispatchContinuousEvent;break;default:xe=dispatchEvent}me=xe.bind(null,K,me,fe),xe=void 0,!passiveBrowserEventsSupported||K!=="touchstart"&&K!=="touchmove"&&K!=="wheel"||(xe=!0),ge?xe!==void 0?fe.addEventListener(K,me,{capture:!0,passive:xe}):fe.addEventListener(K,me,!0):xe!==void 0?fe.addEventListener(K,me,{passive:xe}):fe.addEventListener(K,me,!1)}function dispatchEventForPluginEventSystem(fe,K,me,ge,xe){var ye=ge;if(!(K&1)&&!(K&2)&&ge!==null)e:for(;;){if(ge===null)return;var ve=ge.tag;if(ve===3||ve===4){var _e=ge.stateNode.containerInfo;if(_e===xe||_e.nodeType===8&&_e.parentNode===xe)break;if(ve===4)for(ve=ge.return;ve!==null;){var Ee=ve.tag;if((Ee===3||Ee===4)&&(Ee=ve.stateNode.containerInfo,Ee===xe||Ee.nodeType===8&&Ee.parentNode===xe))return;ve=ve.return}for(;_e!==null;){if(ve=getClosestInstanceFromNode(_e),ve===null)return;if(Ee=ve.tag,Ee===5||Ee===6||Ee===26||Ee===27){ge=ye=ve;continue e}_e=_e.parentNode}}ge=ge.return}batchedUpdates$1(function(){var be=ye,Ae=getEventTarget(me),Se=[];e:{var Ce=topLevelEventsToReactNames.get(fe);if(Ce!==void 0){var Te=SyntheticEvent,Re=fe;switch(fe){case"keypress":if(getEventCharCode(me)===0)break e;case"keydown":case"keyup":Te=SyntheticKeyboardEvent;break;case"focusin":Re="focus",Te=SyntheticFocusEvent;break;case"focusout":Re="blur",Te=SyntheticFocusEvent;break;case"beforeblur":case"afterblur":Te=SyntheticFocusEvent;break;case"click":if(me.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Te=SyntheticMouseEvent;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Te=SyntheticDragEvent;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Te=SyntheticTouchEvent;break;case ANIMATION_END:case ANIMATION_ITERATION:case ANIMATION_START:Te=SyntheticAnimationEvent;break;case TRANSITION_END:Te=SyntheticTransitionEvent;break;case"scroll":case"scrollend":Te=SyntheticUIEvent;break;case"wheel":Te=SyntheticWheelEvent;break;case"copy":case"cut":case"paste":Te=SyntheticClipboardEvent;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Te=SyntheticPointerEvent;break;case"toggle":case"beforetoggle":Te=SyntheticToggleEvent}var De=(K&4)!==0,Ie=!De&&(fe==="scroll"||fe==="scrollend"),Be=De?Ce!==null?Ce+"Capture":null:Ce;De=[];for(var Le=be,Oe;Le!==null;){var Fe=Le;if(Oe=Fe.stateNode,Fe=Fe.tag,Fe!==5&&Fe!==26&&Fe!==27||Oe===null||Be===null||(Fe=getListener(Le,Be),Fe!=null&&De.push(createDispatchListener(Le,Fe,Oe))),Ie)break;Le=Le.return}0<De.length&&(Ce=new Te(Ce,Re,null,me,Ae),Se.push({event:Ce,listeners:De}))}}if(!(K&7)){e:{if(Ce=fe==="mouseover"||fe==="pointerover",Te=fe==="mouseout"||fe==="pointerout",Ce&&me!==currentReplayingEvent&&(Re=me.relatedTarget||me.fromElement)&&(getClosestInstanceFromNode(Re)||Re[internalContainerInstanceKey]))break e;if((Te||Ce)&&(Ce=Ae.window===Ae?Ae:(Ce=Ae.ownerDocument)?Ce.defaultView||Ce.parentWindow:window,Te?(Re=me.relatedTarget||me.toElement,Te=be,Re=Re?getClosestInstanceFromNode(Re):null,Re!==null&&(Ie=getNearestMountedFiber(Re),De=Re.tag,Re!==Ie||De!==5&&De!==27&&De!==6)&&(Re=null)):(Te=null,Re=be),Te!==Re)){if(De=SyntheticMouseEvent,Fe="onMouseLeave",Be="onMouseEnter",Le="mouse",(fe==="pointerout"||fe==="pointerover")&&(De=SyntheticPointerEvent,Fe="onPointerLeave",Be="onPointerEnter",Le="pointer"),Ie=Te==null?Ce:getNodeFromInstance(Te),Oe=Re==null?Ce:getNodeFromInstance(Re),Ce=new De(Fe,Le+"leave",Te,me,Ae),Ce.target=Ie,Ce.relatedTarget=Oe,Fe=null,getClosestInstanceFromNode(Ae)===be&&(De=new De(Be,Le+"enter",Re,me,Ae),De.target=Oe,De.relatedTarget=Ie,Fe=De),Ie=Fe,Te&&Re)t:{for(De=Te,Be=Re,Le=0,Oe=De;Oe;Oe=getParent(Oe))Le++;for(Oe=0,Fe=Be;Fe;Fe=getParent(Fe))Oe++;for(;0<Le-Oe;)De=getParent(De),Le--;for(;0<Oe-Le;)Be=getParent(Be),Oe--;for(;Le--;){if(De===Be||Be!==null&&De===Be.alternate)break t;De=getParent(De),Be=getParent(Be)}De=null}else De=null;Te!==null&&accumulateEnterLeaveListenersForEvent(Se,Ce,Te,De,!1),Re!==null&&Ie!==null&&accumulateEnterLeaveListenersForEvent(Se,Ie,Re,De,!0)}}e:{if(Ce=be?getNodeFromInstance(be):window,Te=Ce.nodeName&&Ce.nodeName.toLowerCase(),Te==="select"||Te==="input"&&Ce.type==="file")var Ue=getTargetInstForChangeEvent;else if(isTextInputElement(Ce))if(isInputEventSupported)Ue=getTargetInstForInputOrChangeEvent;else{Ue=getTargetInstForInputEventPolyfill;var Ne=handleEventsForInputEventPolyfill}else Te=Ce.nodeName,!Te||Te.toLowerCase()!=="input"||Ce.type!=="checkbox"&&Ce.type!=="radio"?be&&isCustomElement(be.elementType)&&(Ue=getTargetInstForChangeEvent):Ue=getTargetInstForClickEvent;if(Ue&&(Ue=Ue(fe,be))){createAndAccumulateChangeEvent(Se,Ue,me,Ae);break e}Ne&&Ne(fe,Ce,be),fe==="focusout"&&be&&Ce.type==="number"&&be.memoizedProps.value!=null&&setDefaultValue(Ce,"number",Ce.value)}switch(Ne=be?getNodeFromInstance(be):window,fe){case"focusin":(isTextInputElement(Ne)||Ne.contentEditable==="true")&&(activeElement$2=Ne,activeElementInst=be,lastSelection=null);break;case"focusout":lastSelection=activeElementInst=activeElement$2=null;break;case"mousedown":mouseDown=!0;break;case"contextmenu":case"mouseup":case"dragend":mouseDown=!1,constructSelectEvent(Se,me,Ae);break;case"selectionchange":if(skipSelectionChangeEvent)break;case"keydown":case"keyup":constructSelectEvent(Se,me,Ae)}var He;if(canUseCompositionEvent)e:{switch(fe){case"compositionstart":var ze="onCompositionStart";break e;case"compositionend":ze="onCompositionEnd";break e;case"compositionupdate":ze="onCompositionUpdate";break e}ze=void 0}else isComposing?isFallbackCompositionEnd(fe,me)&&(ze="onCompositionEnd"):fe==="keydown"&&me.keyCode===229&&(ze="onCompositionStart");ze&&(useFallbackCompositionData&&me.locale!=="ko"&&(isComposing||ze!=="onCompositionStart"?ze==="onCompositionEnd"&&isComposing&&(He=getData()):(root$4=Ae,startText="value"in root$4?root$4.value:root$4.textContent,isComposing=!0)),Ne=accumulateTwoPhaseListeners(be,ze),0<Ne.length&&(ze=new SyntheticCompositionEvent(ze,fe,null,me,Ae),Se.push({event:ze,listeners:Ne}),He?ze.data=He:(He=getDataFromCustomEvent(me),He!==null&&(ze.data=He)))),(He=canUseTextInputEvent?getNativeBeforeInputChars(fe,me):getFallbackBeforeInputChars(fe,me))&&(ze=accumulateTwoPhaseListeners(be,"onBeforeInput"),0<ze.length&&(Ne=new SyntheticCompositionEvent("onBeforeInput","beforeinput",null,me,Ae),Se.push({event:Ne,listeners:ze}),Ne.data=He)),extractEvents$1(Se,fe,be,me,Ae)}processDispatchQueue(Se,K)})}function createDispatchListener(fe,K,me){return{instance:fe,listener:K,currentTarget:me}}function accumulateTwoPhaseListeners(fe,K){for(var me=K+"Capture",ge=[];fe!==null;){var xe=fe,ye=xe.stateNode;xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ye===null||(xe=getListener(fe,me),xe!=null&&ge.unshift(createDispatchListener(fe,xe,ye)),xe=getListener(fe,K),xe!=null&&ge.push(createDispatchListener(fe,xe,ye))),fe=fe.return}return ge}function getParent(fe){if(fe===null)return null;do fe=fe.return;while(fe&&fe.tag!==5&&fe.tag!==27);return fe||null}function accumulateEnterLeaveListenersForEvent(fe,K,me,ge,xe){for(var ye=K._reactName,ve=[];me!==null&&me!==ge;){var _e=me,Ee=_e.alternate,be=_e.stateNode;if(_e=_e.tag,Ee!==null&&Ee===ge)break;_e!==5&&_e!==26&&_e!==27||be===null||(Ee=be,xe?(be=getListener(me,ye),be!=null&&ve.unshift(createDispatchListener(me,be,Ee))):xe||(be=getListener(me,ye),be!=null&&ve.push(createDispatchListener(me,be,Ee)))),me=me.return}ve.length!==0&&fe.push({event:K,listeners:ve})}var NORMALIZE_NEWLINES_REGEX=/\r\n?/g,NORMALIZE_NULL_AND_REPLACEMENT_REGEX=/\u0000|\uFFFD/g;function normalizeMarkupForTextOrAttribute(fe){return(typeof fe=="string"?fe:""+fe).replace(NORMALIZE_NEWLINES_REGEX,`
`).replace(NORMALIZE_NULL_AND_REPLACEMENT_REGEX,"")}function checkForUnmatchedText(fe,K){return K=normalizeMarkupForTextOrAttribute(K),normalizeMarkupForTextOrAttribute(fe)===K}function noop$1$1(){}function setProp(fe,K,me,ge,xe,ye){switch(me){case"children":typeof ge=="string"?K==="body"||K==="textarea"&&ge===""||setTextContent(fe,ge):(typeof ge=="number"||typeof ge=="bigint")&&K!=="body"&&setTextContent(fe,""+ge);break;case"className":setValueForKnownAttribute(fe,"class",ge);break;case"tabIndex":setValueForKnownAttribute(fe,"tabindex",ge);break;case"dir":case"role":case"viewBox":case"width":case"height":setValueForKnownAttribute(fe,me,ge);break;case"style":setValueForStyles(fe,ge,ye);break;case"data":if(K!=="object"){setValueForKnownAttribute(fe,"data",ge);break}case"src":case"href":if(ge===""&&(K!=="a"||me!=="href")){fe.removeAttribute(me);break}if(ge==null||typeof ge=="function"||typeof ge=="symbol"||typeof ge=="boolean"){fe.removeAttribute(me);break}ge=sanitizeURL(""+ge),fe.setAttribute(me,ge);break;case"action":case"formAction":if(typeof ge=="function"){fe.setAttribute(me,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof ye=="function"&&(me==="formAction"?(K!=="input"&&setProp(fe,K,"name",xe.name,xe,null),setProp(fe,K,"formEncType",xe.formEncType,xe,null),setProp(fe,K,"formMethod",xe.formMethod,xe,null),setProp(fe,K,"formTarget",xe.formTarget,xe,null)):(setProp(fe,K,"encType",xe.encType,xe,null),setProp(fe,K,"method",xe.method,xe,null),setProp(fe,K,"target",xe.target,xe,null)));if(ge==null||typeof ge=="symbol"||typeof ge=="boolean"){fe.removeAttribute(me);break}ge=sanitizeURL(""+ge),fe.setAttribute(me,ge);break;case"onClick":ge!=null&&(fe.onclick=noop$1$1);break;case"onScroll":ge!=null&&listenToNonDelegatedEvent("scroll",fe);break;case"onScrollEnd":ge!=null&&listenToNonDelegatedEvent("scrollend",fe);break;case"dangerouslySetInnerHTML":if(ge!=null){if(typeof ge!="object"||!("__html"in ge))throw Error(formatProdErrorMessage(61));if(me=ge.__html,me!=null){if(xe.children!=null)throw Error(formatProdErrorMessage(60));fe.innerHTML=me}}break;case"multiple":fe.multiple=ge&&typeof ge!="function"&&typeof ge!="symbol";break;case"muted":fe.muted=ge&&typeof ge!="function"&&typeof ge!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(ge==null||typeof ge=="function"||typeof ge=="boolean"||typeof ge=="symbol"){fe.removeAttribute("xlink:href");break}me=sanitizeURL(""+ge),fe.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",me);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":ge!=null&&typeof ge!="function"&&typeof ge!="symbol"?fe.setAttribute(me,""+ge):fe.removeAttribute(me);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":ge&&typeof ge!="function"&&typeof ge!="symbol"?fe.setAttribute(me,""):fe.removeAttribute(me);break;case"capture":case"download":ge===!0?fe.setAttribute(me,""):ge!==!1&&ge!=null&&typeof ge!="function"&&typeof ge!="symbol"?fe.setAttribute(me,ge):fe.removeAttribute(me);break;case"cols":case"rows":case"size":case"span":ge!=null&&typeof ge!="function"&&typeof ge!="symbol"&&!isNaN(ge)&&1<=ge?fe.setAttribute(me,ge):fe.removeAttribute(me);break;case"rowSpan":case"start":ge==null||typeof ge=="function"||typeof ge=="symbol"||isNaN(ge)?fe.removeAttribute(me):fe.setAttribute(me,ge);break;case"popover":listenToNonDelegatedEvent("beforetoggle",fe),listenToNonDelegatedEvent("toggle",fe),setValueForAttribute(fe,"popover",ge);break;case"xlinkActuate":setValueForNamespacedAttribute(fe,"http://www.w3.org/1999/xlink","xlink:actuate",ge);break;case"xlinkArcrole":setValueForNamespacedAttribute(fe,"http://www.w3.org/1999/xlink","xlink:arcrole",ge);break;case"xlinkRole":setValueForNamespacedAttribute(fe,"http://www.w3.org/1999/xlink","xlink:role",ge);break;case"xlinkShow":setValueForNamespacedAttribute(fe,"http://www.w3.org/1999/xlink","xlink:show",ge);break;case"xlinkTitle":setValueForNamespacedAttribute(fe,"http://www.w3.org/1999/xlink","xlink:title",ge);break;case"xlinkType":setValueForNamespacedAttribute(fe,"http://www.w3.org/1999/xlink","xlink:type",ge);break;case"xmlBase":setValueForNamespacedAttribute(fe,"http://www.w3.org/XML/1998/namespace","xml:base",ge);break;case"xmlLang":setValueForNamespacedAttribute(fe,"http://www.w3.org/XML/1998/namespace","xml:lang",ge);break;case"xmlSpace":setValueForNamespacedAttribute(fe,"http://www.w3.org/XML/1998/namespace","xml:space",ge);break;case"is":setValueForAttribute(fe,"is",ge);break;case"innerText":case"textContent":break;default:(!(2<me.length)||me[0]!=="o"&&me[0]!=="O"||me[1]!=="n"&&me[1]!=="N")&&(me=aliases.get(me)||me,setValueForAttribute(fe,me,ge))}}function setPropOnCustomElement(fe,K,me,ge,xe,ye){switch(me){case"style":setValueForStyles(fe,ge,ye);break;case"dangerouslySetInnerHTML":if(ge!=null){if(typeof ge!="object"||!("__html"in ge))throw Error(formatProdErrorMessage(61));if(me=ge.__html,me!=null){if(xe.children!=null)throw Error(formatProdErrorMessage(60));fe.innerHTML=me}}break;case"children":typeof ge=="string"?setTextContent(fe,ge):(typeof ge=="number"||typeof ge=="bigint")&&setTextContent(fe,""+ge);break;case"onScroll":ge!=null&&listenToNonDelegatedEvent("scroll",fe);break;case"onScrollEnd":ge!=null&&listenToNonDelegatedEvent("scrollend",fe);break;case"onClick":ge!=null&&(fe.onclick=noop$1$1);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!registrationNameDependencies.hasOwnProperty(me))e:{if(me[0]==="o"&&me[1]==="n"&&(xe=me.endsWith("Capture"),K=me.slice(2,xe?me.length-7:void 0),ye=fe[internalPropsKey]||null,ye=ye!=null?ye[me]:null,typeof ye=="function"&&fe.removeEventListener(K,ye,xe),typeof ge=="function")){typeof ye!="function"&&ye!==null&&(me in fe?fe[me]=null:fe.hasAttribute(me)&&fe.removeAttribute(me)),fe.addEventListener(K,ge,xe);break e}me in fe?fe[me]=ge:ge===!0?fe.setAttribute(me,""):setValueForAttribute(fe,me,ge)}}}function setInitialProperties(fe,K,me){switch(K){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":listenToNonDelegatedEvent("error",fe),listenToNonDelegatedEvent("load",fe);var ge=!1,xe=!1,ye;for(ye in me)if(me.hasOwnProperty(ye)){var ve=me[ye];if(ve!=null)switch(ye){case"src":ge=!0;break;case"srcSet":xe=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(formatProdErrorMessage(137,K));default:setProp(fe,K,ye,ve,me,null)}}xe&&setProp(fe,K,"srcSet",me.srcSet,me,null),ge&&setProp(fe,K,"src",me.src,me,null);return;case"input":listenToNonDelegatedEvent("invalid",fe);var _e=ye=ve=xe=null,Ee=null,be=null;for(ge in me)if(me.hasOwnProperty(ge)){var Ae=me[ge];if(Ae!=null)switch(ge){case"name":xe=Ae;break;case"type":ve=Ae;break;case"checked":Ee=Ae;break;case"defaultChecked":be=Ae;break;case"value":ye=Ae;break;case"defaultValue":_e=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(formatProdErrorMessage(137,K));break;default:setProp(fe,K,ge,Ae,me,null)}}initInput(fe,ye,_e,Ee,be,ve,xe,!1),track$1(fe);return;case"select":listenToNonDelegatedEvent("invalid",fe),ge=ve=ye=null;for(xe in me)if(me.hasOwnProperty(xe)&&(_e=me[xe],_e!=null))switch(xe){case"value":ye=_e;break;case"defaultValue":ve=_e;break;case"multiple":ge=_e;default:setProp(fe,K,xe,_e,me,null)}K=ye,me=ve,fe.multiple=!!ge,K!=null?updateOptions(fe,!!ge,K,!1):me!=null&&updateOptions(fe,!!ge,me,!0);return;case"textarea":listenToNonDelegatedEvent("invalid",fe),ye=xe=ge=null;for(ve in me)if(me.hasOwnProperty(ve)&&(_e=me[ve],_e!=null))switch(ve){case"value":ge=_e;break;case"defaultValue":xe=_e;break;case"children":ye=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(formatProdErrorMessage(91));break;default:setProp(fe,K,ve,_e,me,null)}initTextarea(fe,ge,xe,ye),track$1(fe);return;case"option":for(Ee in me)if(me.hasOwnProperty(Ee)&&(ge=me[Ee],ge!=null))switch(Ee){case"selected":fe.selected=ge&&typeof ge!="function"&&typeof ge!="symbol";break;default:setProp(fe,K,Ee,ge,me,null)}return;case"dialog":listenToNonDelegatedEvent("cancel",fe),listenToNonDelegatedEvent("close",fe);break;case"iframe":case"object":listenToNonDelegatedEvent("load",fe);break;case"video":case"audio":for(ge=0;ge<mediaEventTypes.length;ge++)listenToNonDelegatedEvent(mediaEventTypes[ge],fe);break;case"image":listenToNonDelegatedEvent("error",fe),listenToNonDelegatedEvent("load",fe);break;case"details":listenToNonDelegatedEvent("toggle",fe);break;case"embed":case"source":case"link":listenToNonDelegatedEvent("error",fe),listenToNonDelegatedEvent("load",fe);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(be in me)if(me.hasOwnProperty(be)&&(ge=me[be],ge!=null))switch(be){case"children":case"dangerouslySetInnerHTML":throw Error(formatProdErrorMessage(137,K));default:setProp(fe,K,be,ge,me,null)}return;default:if(isCustomElement(K)){for(Ae in me)me.hasOwnProperty(Ae)&&(ge=me[Ae],ge!==void 0&&setPropOnCustomElement(fe,K,Ae,ge,me,void 0));return}}for(_e in me)me.hasOwnProperty(_e)&&(ge=me[_e],ge!=null&&setProp(fe,K,_e,ge,me,null))}function updateProperties(fe,K,me,ge){switch(K){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var xe=null,ye=null,ve=null,_e=null,Ee=null,be=null,Ae=null;for(Te in me){var Se=me[Te];if(me.hasOwnProperty(Te)&&Se!=null)switch(Te){case"checked":break;case"value":break;case"defaultValue":Ee=Se;default:ge.hasOwnProperty(Te)||setProp(fe,K,Te,null,ge,Se)}}for(var Ce in ge){var Te=ge[Ce];if(Se=me[Ce],ge.hasOwnProperty(Ce)&&(Te!=null||Se!=null))switch(Ce){case"type":ye=Te;break;case"name":xe=Te;break;case"checked":be=Te;break;case"defaultChecked":Ae=Te;break;case"value":ve=Te;break;case"defaultValue":_e=Te;break;case"children":case"dangerouslySetInnerHTML":if(Te!=null)throw Error(formatProdErrorMessage(137,K));break;default:Te!==Se&&setProp(fe,K,Ce,Te,ge,Se)}}updateInput(fe,ve,_e,Ee,be,Ae,ye,xe);return;case"select":Te=ve=_e=Ce=null;for(ye in me)if(Ee=me[ye],me.hasOwnProperty(ye)&&Ee!=null)switch(ye){case"value":break;case"multiple":Te=Ee;default:ge.hasOwnProperty(ye)||setProp(fe,K,ye,null,ge,Ee)}for(xe in ge)if(ye=ge[xe],Ee=me[xe],ge.hasOwnProperty(xe)&&(ye!=null||Ee!=null))switch(xe){case"value":Ce=ye;break;case"defaultValue":_e=ye;break;case"multiple":ve=ye;default:ye!==Ee&&setProp(fe,K,xe,ye,ge,Ee)}K=_e,me=ve,ge=Te,Ce!=null?updateOptions(fe,!!me,Ce,!1):!!ge!=!!me&&(K!=null?updateOptions(fe,!!me,K,!0):updateOptions(fe,!!me,me?[]:"",!1));return;case"textarea":Te=Ce=null;for(_e in me)if(xe=me[_e],me.hasOwnProperty(_e)&&xe!=null&&!ge.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:setProp(fe,K,_e,null,ge,xe)}for(ve in ge)if(xe=ge[ve],ye=me[ve],ge.hasOwnProperty(ve)&&(xe!=null||ye!=null))switch(ve){case"value":Ce=xe;break;case"defaultValue":Te=xe;break;case"children":break;case"dangerouslySetInnerHTML":if(xe!=null)throw Error(formatProdErrorMessage(91));break;default:xe!==ye&&setProp(fe,K,ve,xe,ge,ye)}updateTextarea(fe,Ce,Te);return;case"option":for(var Re in me)if(Ce=me[Re],me.hasOwnProperty(Re)&&Ce!=null&&!ge.hasOwnProperty(Re))switch(Re){case"selected":fe.selected=!1;break;default:setProp(fe,K,Re,null,ge,Ce)}for(Ee in ge)if(Ce=ge[Ee],Te=me[Ee],ge.hasOwnProperty(Ee)&&Ce!==Te&&(Ce!=null||Te!=null))switch(Ee){case"selected":fe.selected=Ce&&typeof Ce!="function"&&typeof Ce!="symbol";break;default:setProp(fe,K,Ee,Ce,ge,Te)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in me)Ce=me[De],me.hasOwnProperty(De)&&Ce!=null&&!ge.hasOwnProperty(De)&&setProp(fe,K,De,null,ge,Ce);for(be in ge)if(Ce=ge[be],Te=me[be],ge.hasOwnProperty(be)&&Ce!==Te&&(Ce!=null||Te!=null))switch(be){case"children":case"dangerouslySetInnerHTML":if(Ce!=null)throw Error(formatProdErrorMessage(137,K));break;default:setProp(fe,K,be,Ce,ge,Te)}return;default:if(isCustomElement(K)){for(var Ie in me)Ce=me[Ie],me.hasOwnProperty(Ie)&&Ce!==void 0&&!ge.hasOwnProperty(Ie)&&setPropOnCustomElement(fe,K,Ie,void 0,ge,Ce);for(Ae in ge)Ce=ge[Ae],Te=me[Ae],!ge.hasOwnProperty(Ae)||Ce===Te||Ce===void 0&&Te===void 0||setPropOnCustomElement(fe,K,Ae,Ce,ge,Te);return}}for(var Be in me)Ce=me[Be],me.hasOwnProperty(Be)&&Ce!=null&&!ge.hasOwnProperty(Be)&&setProp(fe,K,Be,null,ge,Ce);for(Se in ge)Ce=ge[Se],Te=me[Se],!ge.hasOwnProperty(Se)||Ce===Te||Ce==null&&Te==null||setProp(fe,K,Se,Ce,ge,Te)}var eventsEnabled=null,selectionInformation=null;function getOwnerDocumentFromRootContainer(fe){return fe.nodeType===9?fe:fe.ownerDocument}function getOwnHostContext(fe){switch(fe){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function getChildHostContextProd(fe,K){if(fe===0)switch(K){case"svg":return 1;case"math":return 2;default:return 0}return fe===1&&K==="foreignObject"?0:fe}function shouldSetTextContent(fe,K){return fe==="textarea"||fe==="noscript"||typeof K.children=="string"||typeof K.children=="number"||typeof K.children=="bigint"||typeof K.dangerouslySetInnerHTML=="object"&&K.dangerouslySetInnerHTML!==null&&K.dangerouslySetInnerHTML.__html!=null}var currentPopstateTransitionEvent=null;function shouldAttemptEagerTransition(){var fe=window.event;return fe&&fe.type==="popstate"?fe===currentPopstateTransitionEvent?!1:(currentPopstateTransitionEvent=fe,!0):(currentPopstateTransitionEvent=null,!1)}var scheduleTimeout=typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout=typeof clearTimeout=="function"?clearTimeout:void 0,localPromise=typeof Promise=="function"?Promise:void 0,scheduleMicrotask=typeof queueMicrotask=="function"?queueMicrotask:typeof localPromise<"u"?function(fe){return localPromise.resolve(null).then(fe).catch(handleErrorInNextTick)}:scheduleTimeout;function handleErrorInNextTick(fe){setTimeout(function(){throw fe})}function clearSuspenseBoundary(fe,K){var me=K,ge=0;do{var xe=me.nextSibling;if(fe.removeChild(me),xe&&xe.nodeType===8)if(me=xe.data,me==="/$"){if(ge===0){fe.removeChild(xe),retryIfBlockedOn(K);return}ge--}else me!=="$"&&me!=="$?"&&me!=="$!"||ge++;me=xe}while(me);retryIfBlockedOn(K)}function clearContainerSparingly(fe){var K=fe.firstChild;for(K&&K.nodeType===10&&(K=K.nextSibling);K;){var me=K;switch(K=K.nextSibling,me.nodeName){case"HTML":case"HEAD":case"BODY":clearContainerSparingly(me),detachDeletedInstance(me);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(me.rel.toLowerCase()==="stylesheet")continue}fe.removeChild(me)}}function canHydrateInstance(fe,K,me,ge){for(;fe.nodeType===1;){var xe=me;if(fe.nodeName.toLowerCase()!==K.toLowerCase()){if(!ge&&(fe.nodeName!=="INPUT"||fe.type!=="hidden"))break}else if(ge){if(!fe[internalHoistableMarker])switch(K){case"meta":if(!fe.hasAttribute("itemprop"))break;return fe;case"link":if(ye=fe.getAttribute("rel"),ye==="stylesheet"&&fe.hasAttribute("data-precedence"))break;if(ye!==xe.rel||fe.getAttribute("href")!==(xe.href==null?null:xe.href)||fe.getAttribute("crossorigin")!==(xe.crossOrigin==null?null:xe.crossOrigin)||fe.getAttribute("title")!==(xe.title==null?null:xe.title))break;return fe;case"style":if(fe.hasAttribute("data-precedence"))break;return fe;case"script":if(ye=fe.getAttribute("src"),(ye!==(xe.src==null?null:xe.src)||fe.getAttribute("type")!==(xe.type==null?null:xe.type)||fe.getAttribute("crossorigin")!==(xe.crossOrigin==null?null:xe.crossOrigin))&&ye&&fe.hasAttribute("async")&&!fe.hasAttribute("itemprop"))break;return fe;default:return fe}}else if(K==="input"&&fe.type==="hidden"){var ye=xe.name==null?null:""+xe.name;if(xe.type==="hidden"&&fe.getAttribute("name")===ye)return fe}else return fe;if(fe=getNextHydratable(fe.nextSibling),fe===null)break}return null}function canHydrateTextInstance(fe,K,me){if(K==="")return null;for(;fe.nodeType!==3;)if((fe.nodeType!==1||fe.nodeName!=="INPUT"||fe.type!=="hidden")&&!me||(fe=getNextHydratable(fe.nextSibling),fe===null))return null;return fe}function getNextHydratable(fe){for(;fe!=null;fe=fe.nextSibling){var K=fe.nodeType;if(K===1||K===3)break;if(K===8){if(K=fe.data,K==="$"||K==="$!"||K==="$?"||K==="F!"||K==="F")break;if(K==="/$")return null}}return fe}function getParentSuspenseInstance(fe){fe=fe.previousSibling;for(var K=0;fe;){if(fe.nodeType===8){var me=fe.data;if(me==="$"||me==="$!"||me==="$?"){if(K===0)return fe;K--}else me==="/$"&&K++}fe=fe.previousSibling}return null}function resolveSingletonInstance(fe,K,me){switch(K=getOwnerDocumentFromRootContainer(me),fe){case"html":if(fe=K.documentElement,!fe)throw Error(formatProdErrorMessage(452));return fe;case"head":if(fe=K.head,!fe)throw Error(formatProdErrorMessage(453));return fe;case"body":if(fe=K.body,!fe)throw Error(formatProdErrorMessage(454));return fe;default:throw Error(formatProdErrorMessage(451))}}var preloadPropsMap=new Map,preconnectsSet=new Set;function getHoistableRoot(fe){return typeof fe.getRootNode=="function"?fe.getRootNode():fe.ownerDocument}var previousDispatcher=ReactDOMSharedInternals.d;ReactDOMSharedInternals.d={f:flushSyncWork,r:requestFormReset,D:prefetchDNS,C:preconnect,L:preload$1,m:preloadModule,X:preinitScript,S:preinitStyle,M:preinitModuleScript};function flushSyncWork(){var fe=previousDispatcher.f(),K=flushSyncWork$1();return fe||K}function requestFormReset(fe){var K=getInstanceFromNode(fe);K!==null&&K.tag===5&&K.type==="form"?requestFormReset$1(K):previousDispatcher.r(fe)}var globalDocument=typeof document>"u"?null:document;function preconnectAs(fe,K,me){var ge=globalDocument;if(ge&&typeof K=="string"&&K){var xe=escapeSelectorAttributeValueInsideDoubleQuotes(K);xe='link[rel="'+fe+'"][href="'+xe+'"]',typeof me=="string"&&(xe+='[crossorigin="'+me+'"]'),preconnectsSet.has(xe)||(preconnectsSet.add(xe),fe={rel:fe,crossOrigin:me,href:K},ge.querySelector(xe)===null&&(K=ge.createElement("link"),setInitialProperties(K,"link",fe),markNodeAsHoistable(K),ge.head.appendChild(K)))}}function prefetchDNS(fe){previousDispatcher.D(fe),preconnectAs("dns-prefetch",fe,null)}function preconnect(fe,K){previousDispatcher.C(fe,K),preconnectAs("preconnect",fe,K)}function preload$1(fe,K,me){previousDispatcher.L(fe,K,me);var ge=globalDocument;if(ge&&fe&&K){var xe='link[rel="preload"][as="'+escapeSelectorAttributeValueInsideDoubleQuotes(K)+'"]';K==="image"&&me&&me.imageSrcSet?(xe+='[imagesrcset="'+escapeSelectorAttributeValueInsideDoubleQuotes(me.imageSrcSet)+'"]',typeof me.imageSizes=="string"&&(xe+='[imagesizes="'+escapeSelectorAttributeValueInsideDoubleQuotes(me.imageSizes)+'"]')):xe+='[href="'+escapeSelectorAttributeValueInsideDoubleQuotes(fe)+'"]';var ye=xe;switch(K){case"style":ye=getStyleKey(fe);break;case"script":ye=getScriptKey(fe)}preloadPropsMap.has(ye)||(fe=assign({rel:"preload",href:K==="image"&&me&&me.imageSrcSet?void 0:fe,as:K},me),preloadPropsMap.set(ye,fe),ge.querySelector(xe)!==null||K==="style"&&ge.querySelector(getStylesheetSelectorFromKey(ye))||K==="script"&&ge.querySelector(getScriptSelectorFromKey(ye))||(K=ge.createElement("link"),setInitialProperties(K,"link",fe),markNodeAsHoistable(K),ge.head.appendChild(K)))}}function preloadModule(fe,K){previousDispatcher.m(fe,K);var me=globalDocument;if(me&&fe){var ge=K&&typeof K.as=="string"?K.as:"script",xe='link[rel="modulepreload"][as="'+escapeSelectorAttributeValueInsideDoubleQuotes(ge)+'"][href="'+escapeSelectorAttributeValueInsideDoubleQuotes(fe)+'"]',ye=xe;switch(ge){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":ye=getScriptKey(fe)}if(!preloadPropsMap.has(ye)&&(fe=assign({rel:"modulepreload",href:fe},K),preloadPropsMap.set(ye,fe),me.querySelector(xe)===null)){switch(ge){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(me.querySelector(getScriptSelectorFromKey(ye)))return}ge=me.createElement("link"),setInitialProperties(ge,"link",fe),markNodeAsHoistable(ge),me.head.appendChild(ge)}}}function preinitStyle(fe,K,me){previousDispatcher.S(fe,K,me);var ge=globalDocument;if(ge&&fe){var xe=getResourcesFromRoot(ge).hoistableStyles,ye=getStyleKey(fe);K=K||"default";var ve=xe.get(ye);if(!ve){var _e={loading:0,preload:null};if(ve=ge.querySelector(getStylesheetSelectorFromKey(ye)))_e.loading=5;else{fe=assign({rel:"stylesheet",href:fe,"data-precedence":K},me),(me=preloadPropsMap.get(ye))&&adoptPreloadPropsForStylesheet(fe,me);var Ee=ve=ge.createElement("link");markNodeAsHoistable(Ee),setInitialProperties(Ee,"link",fe),Ee._p=new Promise(function(be,Ae){Ee.onload=be,Ee.onerror=Ae}),Ee.addEventListener("load",function(){_e.loading|=1}),Ee.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,insertStylesheet(ve,K,ge)}ve={type:"stylesheet",instance:ve,count:1,state:_e},xe.set(ye,ve)}}}function preinitScript(fe,K){previousDispatcher.X(fe,K);var me=globalDocument;if(me&&fe){var ge=getResourcesFromRoot(me).hoistableScripts,xe=getScriptKey(fe),ye=ge.get(xe);ye||(ye=me.querySelector(getScriptSelectorFromKey(xe)),ye||(fe=assign({src:fe,async:!0},K),(K=preloadPropsMap.get(xe))&&adoptPreloadPropsForScript(fe,K),ye=me.createElement("script"),markNodeAsHoistable(ye),setInitialProperties(ye,"link",fe),me.head.appendChild(ye)),ye={type:"script",instance:ye,count:1,state:null},ge.set(xe,ye))}}function preinitModuleScript(fe,K){previousDispatcher.M(fe,K);var me=globalDocument;if(me&&fe){var ge=getResourcesFromRoot(me).hoistableScripts,xe=getScriptKey(fe),ye=ge.get(xe);ye||(ye=me.querySelector(getScriptSelectorFromKey(xe)),ye||(fe=assign({src:fe,async:!0,type:"module"},K),(K=preloadPropsMap.get(xe))&&adoptPreloadPropsForScript(fe,K),ye=me.createElement("script"),markNodeAsHoistable(ye),setInitialProperties(ye,"link",fe),me.head.appendChild(ye)),ye={type:"script",instance:ye,count:1,state:null},ge.set(xe,ye))}}function getResource(fe,K,me,ge){var xe=(xe=rootInstanceStackCursor.current)?getHoistableRoot(xe):null;if(!xe)throw Error(formatProdErrorMessage(446));switch(fe){case"meta":case"title":return null;case"style":return typeof me.precedence=="string"&&typeof me.href=="string"?(K=getStyleKey(me.href),me=getResourcesFromRoot(xe).hoistableStyles,ge=me.get(K),ge||(ge={type:"style",instance:null,count:0,state:null},me.set(K,ge)),ge):{type:"void",instance:null,count:0,state:null};case"link":if(me.rel==="stylesheet"&&typeof me.href=="string"&&typeof me.precedence=="string"){fe=getStyleKey(me.href);var ye=getResourcesFromRoot(xe).hoistableStyles,ve=ye.get(fe);if(ve||(xe=xe.ownerDocument||xe,ve={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},ye.set(fe,ve),(ye=xe.querySelector(getStylesheetSelectorFromKey(fe)))&&!ye._p&&(ve.instance=ye,ve.state.loading=5),preloadPropsMap.has(fe)||(me={rel:"preload",as:"style",href:me.href,crossOrigin:me.crossOrigin,integrity:me.integrity,media:me.media,hrefLang:me.hrefLang,referrerPolicy:me.referrerPolicy},preloadPropsMap.set(fe,me),ye||preloadStylesheet(xe,fe,me,ve.state))),K&&ge===null)throw Error(formatProdErrorMessage(528,""));return ve}if(K&&ge!==null)throw Error(formatProdErrorMessage(529,""));return null;case"script":return K=me.async,me=me.src,typeof me=="string"&&K&&typeof K!="function"&&typeof K!="symbol"?(K=getScriptKey(me),me=getResourcesFromRoot(xe).hoistableScripts,ge=me.get(K),ge||(ge={type:"script",instance:null,count:0,state:null},me.set(K,ge)),ge):{type:"void",instance:null,count:0,state:null};default:throw Error(formatProdErrorMessage(444,fe))}}function getStyleKey(fe){return'href="'+escapeSelectorAttributeValueInsideDoubleQuotes(fe)+'"'}function getStylesheetSelectorFromKey(fe){return'link[rel="stylesheet"]['+fe+"]"}function stylesheetPropsFromRawProps(fe){return assign({},fe,{"data-precedence":fe.precedence,precedence:null})}function preloadStylesheet(fe,K,me,ge){fe.querySelector('link[rel="preload"][as="style"]['+K+"]")?ge.loading=1:(K=fe.createElement("link"),ge.preload=K,K.addEventListener("load",function(){return ge.loading|=1}),K.addEventListener("error",function(){return ge.loading|=2}),setInitialProperties(K,"link",me),markNodeAsHoistable(K),fe.head.appendChild(K))}function getScriptKey(fe){return'[src="'+escapeSelectorAttributeValueInsideDoubleQuotes(fe)+'"]'}function getScriptSelectorFromKey(fe){return"script[async]"+fe}function acquireResource(fe,K,me){if(K.count++,K.instance===null)switch(K.type){case"style":var ge=fe.querySelector('style[data-href~="'+escapeSelectorAttributeValueInsideDoubleQuotes(me.href)+'"]');if(ge)return K.instance=ge,markNodeAsHoistable(ge),ge;var xe=assign({},me,{"data-href":me.href,"data-precedence":me.precedence,href:null,precedence:null});return ge=(fe.ownerDocument||fe).createElement("style"),markNodeAsHoistable(ge),setInitialProperties(ge,"style",xe),insertStylesheet(ge,me.precedence,fe),K.instance=ge;case"stylesheet":xe=getStyleKey(me.href);var ye=fe.querySelector(getStylesheetSelectorFromKey(xe));if(ye)return K.state.loading|=4,K.instance=ye,markNodeAsHoistable(ye),ye;ge=stylesheetPropsFromRawProps(me),(xe=preloadPropsMap.get(xe))&&adoptPreloadPropsForStylesheet(ge,xe),ye=(fe.ownerDocument||fe).createElement("link"),markNodeAsHoistable(ye);var ve=ye;return ve._p=new Promise(function(_e,Ee){ve.onload=_e,ve.onerror=Ee}),setInitialProperties(ye,"link",ge),K.state.loading|=4,insertStylesheet(ye,me.precedence,fe),K.instance=ye;case"script":return ye=getScriptKey(me.src),(xe=fe.querySelector(getScriptSelectorFromKey(ye)))?(K.instance=xe,markNodeAsHoistable(xe),xe):(ge=me,(xe=preloadPropsMap.get(ye))&&(ge=assign({},me),adoptPreloadPropsForScript(ge,xe)),fe=fe.ownerDocument||fe,xe=fe.createElement("script"),markNodeAsHoistable(xe),setInitialProperties(xe,"link",ge),fe.head.appendChild(xe),K.instance=xe);case"void":return null;default:throw Error(formatProdErrorMessage(443,K.type))}else K.type==="stylesheet"&&!(K.state.loading&4)&&(ge=K.instance,K.state.loading|=4,insertStylesheet(ge,me.precedence,fe));return K.instance}function insertStylesheet(fe,K,me){for(var ge=me.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),xe=ge.length?ge[ge.length-1]:null,ye=xe,ve=0;ve<ge.length;ve++){var _e=ge[ve];if(_e.dataset.precedence===K)ye=_e;else if(ye!==xe)break}ye?ye.parentNode.insertBefore(fe,ye.nextSibling):(K=me.nodeType===9?me.head:me,K.insertBefore(fe,K.firstChild))}function adoptPreloadPropsForStylesheet(fe,K){fe.crossOrigin==null&&(fe.crossOrigin=K.crossOrigin),fe.referrerPolicy==null&&(fe.referrerPolicy=K.referrerPolicy),fe.title==null&&(fe.title=K.title)}function adoptPreloadPropsForScript(fe,K){fe.crossOrigin==null&&(fe.crossOrigin=K.crossOrigin),fe.referrerPolicy==null&&(fe.referrerPolicy=K.referrerPolicy),fe.integrity==null&&(fe.integrity=K.integrity)}var tagCaches=null;function getHydratableHoistableCache(fe,K,me){if(tagCaches===null){var ge=new Map,xe=tagCaches=new Map;xe.set(me,ge)}else xe=tagCaches,ge=xe.get(me),ge||(ge=new Map,xe.set(me,ge));if(ge.has(fe))return ge;for(ge.set(fe,null),me=me.getElementsByTagName(fe),xe=0;xe<me.length;xe++){var ye=me[xe];if(!(ye[internalHoistableMarker]||ye[internalInstanceKey]||fe==="link"&&ye.getAttribute("rel")==="stylesheet")&&ye.namespaceURI!=="http://www.w3.org/2000/svg"){var ve=ye.getAttribute(K)||"";ve=fe+ve;var _e=ge.get(ve);_e?_e.push(ye):ge.set(ve,[ye])}}return ge}function mountHoistable(fe,K,me){fe=fe.ownerDocument||fe,fe.head.insertBefore(me,K==="title"?fe.querySelector("head > title"):null)}function isHostHoistableType(fe,K,me){if(me===1||K.itemProp!=null)return!1;switch(fe){case"meta":case"title":return!0;case"style":if(typeof K.precedence!="string"||typeof K.href!="string"||K.href==="")break;return!0;case"link":if(typeof K.rel!="string"||typeof K.href!="string"||K.href===""||K.onLoad||K.onError)break;switch(K.rel){case"stylesheet":return fe=K.disabled,typeof K.precedence=="string"&&fe==null;default:return!0}case"script":if(K.async&&typeof K.async!="function"&&typeof K.async!="symbol"&&!K.onLoad&&!K.onError&&K.src&&typeof K.src=="string")return!0}return!1}function preloadResource(fe){return!(fe.type==="stylesheet"&&!(fe.state.loading&3))}var suspendedState=null;function noop$5(){}function suspendResource(fe,K,me){if(suspendedState===null)throw Error(formatProdErrorMessage(475));var ge=suspendedState;if(K.type==="stylesheet"&&(typeof me.media!="string"||matchMedia(me.media).matches!==!1)&&!(K.state.loading&4)){if(K.instance===null){var xe=getStyleKey(me.href),ye=fe.querySelector(getStylesheetSelectorFromKey(xe));if(ye){fe=ye._p,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"&&(ge.count++,ge=onUnsuspend.bind(ge),fe.then(ge,ge)),K.state.loading|=4,K.instance=ye,markNodeAsHoistable(ye);return}ye=fe.ownerDocument||fe,me=stylesheetPropsFromRawProps(me),(xe=preloadPropsMap.get(xe))&&adoptPreloadPropsForStylesheet(me,xe),ye=ye.createElement("link"),markNodeAsHoistable(ye);var ve=ye;ve._p=new Promise(function(_e,Ee){ve.onload=_e,ve.onerror=Ee}),setInitialProperties(ye,"link",me),K.instance=ye}ge.stylesheets===null&&(ge.stylesheets=new Map),ge.stylesheets.set(K,fe),(fe=K.state.preload)&&!(K.state.loading&3)&&(ge.count++,K=onUnsuspend.bind(ge),fe.addEventListener("load",K),fe.addEventListener("error",K))}}function waitForCommitToBeReady(){if(suspendedState===null)throw Error(formatProdErrorMessage(475));var fe=suspendedState;return fe.stylesheets&&fe.count===0&&insertSuspendedStylesheets(fe,fe.stylesheets),0<fe.count?function(K){var me=setTimeout(function(){if(fe.stylesheets&&insertSuspendedStylesheets(fe,fe.stylesheets),fe.unsuspend){var ge=fe.unsuspend;fe.unsuspend=null,ge()}},6e4);return fe.unsuspend=K,function(){fe.unsuspend=null,clearTimeout(me)}}:null}function onUnsuspend(){if(this.count--,this.count===0){if(this.stylesheets)insertSuspendedStylesheets(this,this.stylesheets);else if(this.unsuspend){var fe=this.unsuspend;this.unsuspend=null,fe()}}}var precedencesByRoot=null;function insertSuspendedStylesheets(fe,K){fe.stylesheets=null,fe.unsuspend!==null&&(fe.count++,precedencesByRoot=new Map,K.forEach(insertStylesheetIntoRoot,fe),precedencesByRoot=null,onUnsuspend.call(fe))}function insertStylesheetIntoRoot(fe,K){if(!(K.state.loading&4)){var me=precedencesByRoot.get(fe);if(me)var ge=me.get(null);else{me=new Map,precedencesByRoot.set(fe,me);for(var xe=fe.querySelectorAll("link[data-precedence],style[data-precedence]"),ye=0;ye<xe.length;ye++){var ve=xe[ye];(ve.nodeName==="LINK"||ve.getAttribute("media")!=="not all")&&(me.set(ve.dataset.precedence,ve),ge=ve)}ge&&me.set(null,ge)}xe=K.instance,ve=xe.getAttribute("data-precedence"),ye=me.get(ve)||ge,ye===ge&&me.set(null,xe),me.set(ve,xe),this.count++,ge=onUnsuspend.bind(this),xe.addEventListener("load",ge),xe.addEventListener("error",ge),ye?ye.parentNode.insertBefore(xe,ye.nextSibling):(fe=fe.nodeType===9?fe.head:fe,fe.insertBefore(xe,fe.firstChild)),K.state.loading|=4}}var HostTransitionContext={$$typeof:REACT_CONTEXT_TYPE,Provider:null,Consumer:null,_currentValue:sharedNotPendingObject,_currentValue2:sharedNotPendingObject,_threadCount:0};function FiberRootNode(fe,K,me,ge,xe,ye,ve,_e){this.tag=1,this.containerInfo=fe,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=createLaneMap(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=createLaneMap(0),this.hiddenUpdates=createLaneMap(null),this.identifierPrefix=ge,this.onUncaughtError=xe,this.onCaughtError=ye,this.onRecoverableError=ve,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=_e,this.incompleteTransitions=new Map}function createFiberRoot(fe,K,me,ge,xe,ye,ve,_e,Ee,be,Ae,Se){return fe=new FiberRootNode(fe,K,me,ve,_e,Ee,be,Se),K=1,ye===!0&&(K|=24),ye=createFiberImplClass(3,null,null,K),fe.current=ye,ye.stateNode=fe,K=createCache(),K.refCount++,fe.pooledCache=K,K.refCount++,ye.memoizedState={element:ge,isDehydrated:me,cache:K},initializeUpdateQueue(ye),fe}function getContextForSubtree(fe){return fe?(fe=emptyContextObject,fe):emptyContextObject}function updateContainerImpl(fe,K,me,ge,xe,ye){xe=getContextForSubtree(xe),ge.context===null?ge.context=xe:ge.pendingContext=xe,ge=createUpdate(K),ge.payload={element:me},ye=ye===void 0?null:ye,ye!==null&&(ge.callback=ye),me=enqueueUpdate(fe,ge,K),me!==null&&(scheduleUpdateOnFiber(me,fe,K),entangleTransitions(me,fe,K))}function markRetryLaneImpl(fe,K){if(fe=fe.memoizedState,fe!==null&&fe.dehydrated!==null){var me=fe.retryLane;fe.retryLane=me!==0&&me<K?me:K}}function markRetryLaneIfNotHydrated(fe,K){markRetryLaneImpl(fe,K),(fe=fe.alternate)&&markRetryLaneImpl(fe,K)}function attemptContinuousHydration(fe){if(fe.tag===13){var K=enqueueConcurrentRenderForLane(fe,67108864);K!==null&&scheduleUpdateOnFiber(K,fe,67108864),markRetryLaneIfNotHydrated(fe,67108864)}}var _enabled=!0;function dispatchDiscreteEvent(fe,K,me,ge){var xe=ReactSharedInternals.T;ReactSharedInternals.T=null;var ye=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=2,dispatchEvent(fe,K,me,ge)}finally{ReactDOMSharedInternals.p=ye,ReactSharedInternals.T=xe}}function dispatchContinuousEvent(fe,K,me,ge){var xe=ReactSharedInternals.T;ReactSharedInternals.T=null;var ye=ReactDOMSharedInternals.p;try{ReactDOMSharedInternals.p=8,dispatchEvent(fe,K,me,ge)}finally{ReactDOMSharedInternals.p=ye,ReactSharedInternals.T=xe}}function dispatchEvent(fe,K,me,ge){if(_enabled){var xe=findInstanceBlockingEvent(ge);if(xe===null)dispatchEventForPluginEventSystem(fe,K,ge,return_targetInst,me),clearIfContinuousEvent(fe,ge);else if(queueIfContinuousEvent(xe,fe,K,me,ge))ge.stopPropagation();else if(clearIfContinuousEvent(fe,ge),K&4&&-1<discreteReplayableEvents.indexOf(fe)){for(;xe!==null;){var ye=getInstanceFromNode(xe);if(ye!==null)switch(ye.tag){case 3:if(ye=ye.stateNode,ye.current.memoizedState.isDehydrated){var ve=getHighestPriorityLanes(ye.pendingLanes);if(ve!==0){var _e=ye;for(_e.pendingLanes|=2,_e.entangledLanes|=2;ve;){var Ee=1<<31-clz32(ve);_e.entanglements[1]|=Ee,ve&=~Ee}ensureRootIsScheduled(ye),!(executionContext&6)&&(workInProgressRootRenderTargetTime=now$1()+500,flushSyncWorkAcrossRoots_impl(0))}}break;case 13:_e=enqueueConcurrentRenderForLane(ye,2),_e!==null&&scheduleUpdateOnFiber(_e,ye,2),flushSyncWork$1(),markRetryLaneIfNotHydrated(ye,2)}if(ye=findInstanceBlockingEvent(ge),ye===null&&dispatchEventForPluginEventSystem(fe,K,ge,return_targetInst,me),ye===xe)break;xe=ye}xe!==null&&ge.stopPropagation()}else dispatchEventForPluginEventSystem(fe,K,ge,null,me)}}function findInstanceBlockingEvent(fe){return fe=getEventTarget(fe),findInstanceBlockingTarget(fe)}var return_targetInst=null;function findInstanceBlockingTarget(fe){if(return_targetInst=null,fe=getClosestInstanceFromNode(fe),fe!==null){var K=getNearestMountedFiber(fe);if(K===null)fe=null;else{var me=K.tag;if(me===13){if(fe=getSuspenseInstanceFromFiber(K),fe!==null)return fe;fe=null}else if(me===3){if(K.stateNode.current.memoizedState.isDehydrated)return K.tag===3?K.stateNode.containerInfo:null;fe=null}else K!==fe&&(fe=null)}}return return_targetInst=fe,null}function getEventPriority(fe){switch(fe){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(getCurrentPriorityLevel()){case ImmediatePriority:return 2;case UserBlockingPriority:return 8;case NormalPriority$1:case LowPriority:return 32;case IdlePriority:return 268435456;default:return 32}default:return 32}}var hasScheduledReplayAttempt=!1,queuedFocus=null,queuedDrag=null,queuedMouse=null,queuedPointers=new Map,queuedPointerCaptures=new Map,queuedExplicitHydrationTargets=[],discreteReplayableEvents="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function clearIfContinuousEvent(fe,K){switch(fe){case"focusin":case"focusout":queuedFocus=null;break;case"dragenter":case"dragleave":queuedDrag=null;break;case"mouseover":case"mouseout":queuedMouse=null;break;case"pointerover":case"pointerout":queuedPointers.delete(K.pointerId);break;case"gotpointercapture":case"lostpointercapture":queuedPointerCaptures.delete(K.pointerId)}}function accumulateOrCreateContinuousQueuedReplayableEvent(fe,K,me,ge,xe,ye){return fe===null||fe.nativeEvent!==ye?(fe={blockedOn:K,domEventName:me,eventSystemFlags:ge,nativeEvent:ye,targetContainers:[xe]},K!==null&&(K=getInstanceFromNode(K),K!==null&&attemptContinuousHydration(K)),fe):(fe.eventSystemFlags|=ge,K=fe.targetContainers,xe!==null&&K.indexOf(xe)===-1&&K.push(xe),fe)}function queueIfContinuousEvent(fe,K,me,ge,xe){switch(K){case"focusin":return queuedFocus=accumulateOrCreateContinuousQueuedReplayableEvent(queuedFocus,fe,K,me,ge,xe),!0;case"dragenter":return queuedDrag=accumulateOrCreateContinuousQueuedReplayableEvent(queuedDrag,fe,K,me,ge,xe),!0;case"mouseover":return queuedMouse=accumulateOrCreateContinuousQueuedReplayableEvent(queuedMouse,fe,K,me,ge,xe),!0;case"pointerover":var ye=xe.pointerId;return queuedPointers.set(ye,accumulateOrCreateContinuousQueuedReplayableEvent(queuedPointers.get(ye)||null,fe,K,me,ge,xe)),!0;case"gotpointercapture":return ye=xe.pointerId,queuedPointerCaptures.set(ye,accumulateOrCreateContinuousQueuedReplayableEvent(queuedPointerCaptures.get(ye)||null,fe,K,me,ge,xe)),!0}return!1}function attemptExplicitHydrationTarget(fe){var K=getClosestInstanceFromNode(fe.target);if(K!==null){var me=getNearestMountedFiber(K);if(me!==null){if(K=me.tag,K===13){if(K=getSuspenseInstanceFromFiber(me),K!==null){fe.blockedOn=K,runWithPriority(fe.priority,function(){if(me.tag===13){var ge=requestUpdateLane(),xe=enqueueConcurrentRenderForLane(me,ge);xe!==null&&scheduleUpdateOnFiber(xe,me,ge),markRetryLaneIfNotHydrated(me,ge)}});return}}else if(K===3&&me.stateNode.current.memoizedState.isDehydrated){fe.blockedOn=me.tag===3?me.stateNode.containerInfo:null;return}}}fe.blockedOn=null}function attemptReplayContinuousQueuedEvent(fe){if(fe.blockedOn!==null)return!1;for(var K=fe.targetContainers;0<K.length;){var me=findInstanceBlockingEvent(fe.nativeEvent);if(me===null){me=fe.nativeEvent;var ge=new me.constructor(me.type,me);currentReplayingEvent=ge,me.target.dispatchEvent(ge),currentReplayingEvent=null}else return K=getInstanceFromNode(me),K!==null&&attemptContinuousHydration(K),fe.blockedOn=me,!1;K.shift()}return!0}function attemptReplayContinuousQueuedEventInMap(fe,K,me){attemptReplayContinuousQueuedEvent(fe)&&me.delete(K)}function replayUnblockedEvents(){hasScheduledReplayAttempt=!1,queuedFocus!==null&&attemptReplayContinuousQueuedEvent(queuedFocus)&&(queuedFocus=null),queuedDrag!==null&&attemptReplayContinuousQueuedEvent(queuedDrag)&&(queuedDrag=null),queuedMouse!==null&&attemptReplayContinuousQueuedEvent(queuedMouse)&&(queuedMouse=null),queuedPointers.forEach(attemptReplayContinuousQueuedEventInMap),queuedPointerCaptures.forEach(attemptReplayContinuousQueuedEventInMap)}function scheduleCallbackIfUnblocked(fe,K){fe.blockedOn===K&&(fe.blockedOn=null,hasScheduledReplayAttempt||(hasScheduledReplayAttempt=!0,Scheduler.unstable_scheduleCallback(Scheduler.unstable_NormalPriority,replayUnblockedEvents)))}var lastScheduledReplayQueue=null;function scheduleReplayQueueIfNeeded(fe){lastScheduledReplayQueue!==fe&&(lastScheduledReplayQueue=fe,Scheduler.unstable_scheduleCallback(Scheduler.unstable_NormalPriority,function(){lastScheduledReplayQueue===fe&&(lastScheduledReplayQueue=null);for(var K=0;K<fe.length;K+=3){var me=fe[K],ge=fe[K+1],xe=fe[K+2];if(typeof ge!="function"){if(findInstanceBlockingTarget(ge||me)===null)continue;break}var ye=getInstanceFromNode(me);ye!==null&&(fe.splice(K,3),K-=3,startHostTransition(ye,{pending:!0,data:xe,method:me.method,action:ge},ge,xe))}}))}function retryIfBlockedOn(fe){function K(Ee){return scheduleCallbackIfUnblocked(Ee,fe)}queuedFocus!==null&&scheduleCallbackIfUnblocked(queuedFocus,fe),queuedDrag!==null&&scheduleCallbackIfUnblocked(queuedDrag,fe),queuedMouse!==null&&scheduleCallbackIfUnblocked(queuedMouse,fe),queuedPointers.forEach(K),queuedPointerCaptures.forEach(K);for(var me=0;me<queuedExplicitHydrationTargets.length;me++){var ge=queuedExplicitHydrationTargets[me];ge.blockedOn===fe&&(ge.blockedOn=null)}for(;0<queuedExplicitHydrationTargets.length&&(me=queuedExplicitHydrationTargets[0],me.blockedOn===null);)attemptExplicitHydrationTarget(me),me.blockedOn===null&&queuedExplicitHydrationTargets.shift();if(me=(fe.ownerDocument||fe).$$reactFormReplay,me!=null)for(ge=0;ge<me.length;ge+=3){var xe=me[ge],ye=me[ge+1],ve=xe[internalPropsKey]||null;if(typeof ye=="function")ve||scheduleReplayQueueIfNeeded(me);else if(ve){var _e=null;if(ye&&ye.hasAttribute("formAction")){if(xe=ye,ve=ye[internalPropsKey]||null)_e=ve.formAction;else if(findInstanceBlockingTarget(xe)!==null)continue}else _e=ve.action;typeof _e=="function"?me[ge+1]=_e:(me.splice(ge,3),ge-=3),scheduleReplayQueueIfNeeded(me)}}}function ReactDOMRoot(fe){this._internalRoot=fe}ReactDOMHydrationRoot.prototype.render=ReactDOMRoot.prototype.render=function(fe){var K=this._internalRoot;if(K===null)throw Error(formatProdErrorMessage(409));var me=K.current,ge=requestUpdateLane();updateContainerImpl(me,ge,fe,K,null,null)};ReactDOMHydrationRoot.prototype.unmount=ReactDOMRoot.prototype.unmount=function(){var fe=this._internalRoot;if(fe!==null){this._internalRoot=null;var K=fe.containerInfo;fe.tag===0&&flushPassiveEffects(),updateContainerImpl(fe.current,2,null,fe,null,null),flushSyncWork$1(),K[internalContainerInstanceKey]=null}};function ReactDOMHydrationRoot(fe){this._internalRoot=fe}ReactDOMHydrationRoot.prototype.unstable_scheduleHydration=function(fe){if(fe){var K=resolveUpdatePriority();fe={blockedOn:null,target:fe,priority:K};for(var me=0;me<queuedExplicitHydrationTargets.length&&K!==0&&K<queuedExplicitHydrationTargets[me].priority;me++);queuedExplicitHydrationTargets.splice(me,0,fe),me===0&&attemptExplicitHydrationTarget(fe)}};var isomorphicReactPackageVersion$jscomp$inline_1686=React$2.version;if(isomorphicReactPackageVersion$jscomp$inline_1686!=="19.0.0")throw Error(formatProdErrorMessage(527,isomorphicReactPackageVersion$jscomp$inline_1686,"19.0.0"));ReactDOMSharedInternals.findDOMNode=function(fe){var K=fe._reactInternals;if(K===void 0)throw typeof fe.render=="function"?Error(formatProdErrorMessage(188)):(fe=Object.keys(fe).join(","),Error(formatProdErrorMessage(268,fe)));return fe=findCurrentFiberUsingSlowPath(K),fe=fe!==null?findCurrentHostFiberImpl(fe):null,fe=fe===null?null:fe.stateNode,fe};var internals$jscomp$inline_2165={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:ReactSharedInternals,findFiberByHostInstance:getClosestInstanceFromNode,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hook$jscomp$inline_2166=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hook$jscomp$inline_2166.isDisabled&&hook$jscomp$inline_2166.supportsFiber)try{rendererID=hook$jscomp$inline_2166.inject(internals$jscomp$inline_2165),injectedHook=hook$jscomp$inline_2166}catch{}}reactDomClient_production.createRoot=function(fe,K){if(!isValidContainer(fe))throw Error(formatProdErrorMessage(299));var me=!1,ge="",xe=defaultOnUncaughtError,ye=defaultOnCaughtError,ve=defaultOnRecoverableError,_e=null;return K!=null&&(K.unstable_strictMode===!0&&(me=!0),K.identifierPrefix!==void 0&&(ge=K.identifierPrefix),K.onUncaughtError!==void 0&&(xe=K.onUncaughtError),K.onCaughtError!==void 0&&(ye=K.onCaughtError),K.onRecoverableError!==void 0&&(ve=K.onRecoverableError),K.unstable_transitionCallbacks!==void 0&&(_e=K.unstable_transitionCallbacks)),K=createFiberRoot(fe,1,!1,null,null,me,ge,xe,ye,ve,_e,null),fe[internalContainerInstanceKey]=K.current,listenToAllSupportedEvents(fe.nodeType===8?fe.parentNode:fe),new ReactDOMRoot(K)};reactDomClient_production.hydrateRoot=function(fe,K,me){if(!isValidContainer(fe))throw Error(formatProdErrorMessage(299));var ge=!1,xe="",ye=defaultOnUncaughtError,ve=defaultOnCaughtError,_e=defaultOnRecoverableError,Ee=null,be=null;return me!=null&&(me.unstable_strictMode===!0&&(ge=!0),me.identifierPrefix!==void 0&&(xe=me.identifierPrefix),me.onUncaughtError!==void 0&&(ye=me.onUncaughtError),me.onCaughtError!==void 0&&(ve=me.onCaughtError),me.onRecoverableError!==void 0&&(_e=me.onRecoverableError),me.unstable_transitionCallbacks!==void 0&&(Ee=me.unstable_transitionCallbacks),me.formState!==void 0&&(be=me.formState)),K=createFiberRoot(fe,1,!0,K,me??null,ge,xe,ye,ve,_e,Ee,be),K.context=getContextForSubtree(null),me=K.current,ge=requestUpdateLane(),xe=createUpdate(ge),xe.callback=null,enqueueUpdate(me,xe,ge),K.current.lanes=ge,markRootUpdated$1(K,ge),ensureRootIsScheduled(K),fe[internalContainerInstanceKey]=K.current,listenToAllSupportedEvents(fe),new ReactDOMHydrationRoot(K)};reactDomClient_production.version="19.0.0";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(fe){console.error(fe)}}checkDCE(),client.exports=reactDomClient_production;var clientExports=client.exports;const ReactDOM=getDefaultExportFromCjs(clientExports);var observerMap=new Map,RootIds=new WeakMap,rootId=0,unsupportedValue=void 0;function getRootId(fe){return fe?(RootIds.has(fe)||(rootId+=1,RootIds.set(fe,rootId.toString())),RootIds.get(fe)):"0"}function optionsToId(fe){return Object.keys(fe).sort().filter(K=>fe[K]!==void 0).map(K=>`${K}_${K==="root"?getRootId(fe.root):fe[K]}`).toString()}function createObserver(fe){const K=optionsToId(fe);let me=observerMap.get(K);if(!me){const ge=new Map;let xe;const ye=new IntersectionObserver(ve=>{ve.forEach(_e=>{var Ee;const be=_e.isIntersecting&&xe.some(Ae=>_e.intersectionRatio>=Ae);fe.trackVisibility&&typeof _e.isVisible>"u"&&(_e.isVisible=be),(Ee=ge.get(_e.target))==null||Ee.forEach(Ae=>{Ae(be,_e)})})},fe);xe=ye.thresholds||(Array.isArray(fe.threshold)?fe.threshold:[fe.threshold||0]),me={id:K,observer:ye,elements:ge},observerMap.set(K,me)}return me}function observe(fe,K,me={},ge=unsupportedValue){if(typeof window.IntersectionObserver>"u"&&ge!==void 0){const Ee=fe.getBoundingClientRect();return K(ge,{isIntersecting:ge,target:fe,intersectionRatio:typeof me.threshold=="number"?me.threshold:0,time:0,boundingClientRect:Ee,intersectionRect:Ee,rootBounds:Ee}),()=>{}}const{id:xe,observer:ye,elements:ve}=createObserver(me),_e=ve.get(fe)||[];return ve.has(fe)||ve.set(fe,_e),_e.push(K),ye.observe(fe),function(){_e.splice(_e.indexOf(K),1),_e.length===0&&(ve.delete(fe),ye.unobserve(fe)),ve.size===0&&(ye.disconnect(),observerMap.delete(xe))}}function useInView({threshold:fe,delay:K,trackVisibility:me,rootMargin:ge,root:xe,triggerOnce:ye,skip:ve,initialInView:_e,fallbackInView:Ee,onChange:be}={}){var Ae;const[Se,Ce]=reactExports.useState(null),Te=reactExports.useRef(be),[Re,De]=reactExports.useState({inView:!!_e,entry:void 0});Te.current=be,reactExports.useEffect(()=>{if(ve||!Se)return;let Oe;return Oe=observe(Se,(Fe,Ue)=>{De({inView:Fe,entry:Ue}),Te.current&&Te.current(Fe,Ue),Ue.isIntersecting&&ye&&Oe&&(Oe(),Oe=void 0)},{root:xe,rootMargin:ge,threshold:fe,trackVisibility:me,delay:K},Ee),()=>{Oe&&Oe()}},[Array.isArray(fe)?fe.toString():fe,Se,xe,ge,ye,ve,me,Ee,K]);const Ie=(Ae=Re.entry)==null?void 0:Ae.target,Be=reactExports.useRef(void 0);!Se&&Ie&&!ye&&!ve&&Be.current!==Ie&&(Be.current=Ie,De({inView:!!_e,entry:void 0}));const Le=[Ce,Re.inView,Re.entry];return Le.ref=Le[0],Le.inView=Le[1],Le.entry=Le[2],Le}function clamp$5(fe,K,me){return K===void 0&&me===void 0?fe:K!==void 0&&me===void 0?Math.max(fe,K):Math.min(K===void 0&&me!==void 0?fe:Math.max(fe,K),me)}function randomId(fe="mantine-"){return`${fe}${Math.random().toString(36).slice(2,11)}`}function useCallbackRef$1(fe){const K=reactExports.useRef(fe);return reactExports.useEffect(()=>{K.current=fe}),reactExports.useMemo(()=>(...me)=>K.current?.(...me),[])}const noop$4=()=>{};function useDebouncedCallback(fe,K){const me=typeof K=="number"?K:K.delay,ge=typeof K=="number"?!1:K.flushOnUnmount,xe=useCallbackRef$1(fe),ye=reactExports.useRef(0),ve=Object.assign(reactExports.useCallback((..._e)=>{window.clearTimeout(ye.current);const Ee=()=>{ye.current!==0&&(ye.current=0,xe(..._e))};ve.flush=Ee,ye.current=window.setTimeout(Ee,me)},[xe,me]),{flush:noop$4});return reactExports.useEffect(()=>()=>{window.clearTimeout(ye.current),ge&&ve.flush()},[ve,ge]),ve}const DEFAULT_EVENTS=["mousedown","touchstart"];function useClickOutside(fe,K,me){const ge=reactExports.useRef(null);return reactExports.useEffect(()=>{const xe=ye=>{const{target:ve}=ye??{};if(Array.isArray(me)){const _e=ve?.hasAttribute("data-ignore-outside-clicks")||!document.body.contains(ve)&&ve.tagName!=="HTML";me.every(be=>!!be&&!ye.composedPath().includes(be))&&!_e&&fe()}else ge.current&&!ge.current.contains(ve)&&fe()};return(K||DEFAULT_EVENTS).forEach(ye=>document.addEventListener(ye,xe)),()=>{(K||DEFAULT_EVENTS).forEach(ye=>document.removeEventListener(ye,xe))}},[ge,fe,me]),ge}function useClipboard({timeout:fe=2e3}={}){const[K,me]=reactExports.useState(null),[ge,xe]=reactExports.useState(!1),[ye,ve]=reactExports.useState(null),_e=Ae=>{window.clearTimeout(ye),ve(window.setTimeout(()=>xe(!1),fe)),xe(Ae)};return{copy:Ae=>{"clipboard"in navigator?navigator.clipboard.writeText(Ae).then(()=>_e(!0)).catch(Se=>me(Se)):me(new Error("useClipboard: navigator.clipboard is not supported"))},reset:()=>{xe(!1),me(null),window.clearTimeout(ye)},error:K,copied:ge}}function attachMediaListener(fe,K){try{return fe.addEventListener("change",K),()=>fe.removeEventListener("change",K)}catch{return fe.addListener(K),()=>fe.removeListener(K)}}function getInitialValue(fe,K){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(fe).matches:!1}function useMediaQuery(fe,K,{getInitialValueInEffect:me}={getInitialValueInEffect:!0}){const[ge,xe]=reactExports.useState(me?K:getInitialValue(fe)),ye=reactExports.useRef(null);return reactExports.useEffect(()=>{if("matchMedia"in window)return ye.current=window.matchMedia(fe),xe(ye.current.matches),attachMediaListener(ye.current,ve=>xe(ve.matches))},[fe]),ge}function useColorScheme(fe,K){return useMediaQuery("(prefers-color-scheme: dark)",fe==="dark",K)?"dark":"light"}const useIsomorphicEffect$1=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useDidUpdate(fe,K){const me=reactExports.useRef(!1);reactExports.useEffect(()=>()=>{me.current=!1},[]),reactExports.useEffect(()=>{if(me.current)return fe();me.current=!0},K)}function useFocusReturn({opened:fe,shouldReturnFocus:K=!0}){const me=reactExports.useRef(null),ge=()=>{me.current&&"focus"in me.current&&typeof me.current.focus=="function"&&me.current?.focus({preventScroll:!0})};return useDidUpdate(()=>{let xe=-1;const ye=ve=>{ve.key==="Tab"&&window.clearTimeout(xe)};return document.addEventListener("keydown",ye),fe?me.current=document.activeElement:K&&(xe=window.setTimeout(ge,10)),()=>{window.clearTimeout(xe),document.removeEventListener("keydown",ye)}},[fe,K]),ge}const TABBABLE_NODES=/input|select|textarea|button|object/,FOCUS_SELECTOR="a, input, select, textarea, button, object, [tabindex]";function hidden(fe){return fe.style.display==="none"}function visible(fe){if(fe.getAttribute("aria-hidden")||fe.getAttribute("hidden")||fe.getAttribute("type")==="hidden")return!1;let me=fe;for(;me&&!(me===document.body||me.nodeType===11);){if(hidden(me))return!1;me=me.parentNode}return!0}function getElementTabIndex(fe){let K=fe.getAttribute("tabindex");return K===null&&(K=void 0),parseInt(K,10)}function focusable(fe){const K=fe.nodeName.toLowerCase(),me=!Number.isNaN(getElementTabIndex(fe));return(TABBABLE_NODES.test(K)&&!fe.disabled||fe instanceof HTMLAnchorElement&&fe.href||me)&&visible(fe)}function tabbable(fe){const K=getElementTabIndex(fe);return(Number.isNaN(K)||K>=0)&&focusable(fe)}function findTabbableDescendants(fe){return Array.from(fe.querySelectorAll(FOCUS_SELECTOR)).filter(tabbable)}function scopeTab(fe,K){const me=findTabbableDescendants(fe);if(!me.length){K.preventDefault();return}const ge=me[K.shiftKey?0:me.length-1],xe=fe.getRootNode();let ye=ge===xe.activeElement||fe===xe.activeElement;const ve=xe.activeElement;if(ve.tagName==="INPUT"&&ve.getAttribute("type")==="radio"&&(ye=me.filter(Ae=>Ae.getAttribute("type")==="radio"&&Ae.getAttribute("name")===ve.getAttribute("name")).includes(ge)),!ye)return;K.preventDefault();const Ee=me[K.shiftKey?me.length-1:0];Ee&&Ee.focus()}function useFocusTrap(fe=!0){const K=reactExports.useRef(null),me=xe=>{let ye=xe.querySelector("[data-autofocus]");if(!ye){const ve=Array.from(xe.querySelectorAll(FOCUS_SELECTOR));ye=ve.find(tabbable)||ve.find(focusable)||null,!ye&&focusable(xe)&&(ye=xe)}ye&&ye.focus({preventScroll:!0})},ge=reactExports.useCallback(xe=>{fe&&xe!==null&&K.current!==xe&&(xe?(setTimeout(()=>{xe.getRootNode()&&me(xe)}),K.current=xe):K.current=null)},[fe]);return reactExports.useEffect(()=>{if(!fe)return;K.current&&setTimeout(()=>me(K.current));const xe=ye=>{ye.key==="Tab"&&K.current&&scopeTab(K.current,ye)};return document.addEventListener("keydown",xe),()=>document.removeEventListener("keydown",xe)},[fe]),ge}const reducer=fe=>(fe+1)%1e6;function useForceUpdate(){const[,fe]=reactExports.useReducer(reducer,0);return fe}const __useId=React$4.useId||(()=>{});function useReactId$1(){const fe=__useId();return fe?`mantine-${fe.replace(/:/g,"")}`:""}function useId$1(fe){const K=useReactId$1(),[me,ge]=reactExports.useState(K);return useIsomorphicEffect$1(()=>{ge(randomId())},[]),typeof fe=="string"?fe:typeof window>"u"?K:me}function useWindowEvent(fe,K,me){reactExports.useEffect(()=>(window.addEventListener(fe,K,me),()=>window.removeEventListener(fe,K,me)),[fe,K])}function assignRef$1(fe,K){if(typeof fe=="function")return fe(K);typeof fe=="object"&&fe!==null&&"current"in fe&&(fe.current=K)}function mergeRefs(...fe){const K=new Map;return me=>{if(fe.forEach(ge=>{const xe=assignRef$1(ge,me);xe&&K.set(ge,xe)}),K.size>0)return()=>{fe.forEach(ge=>{const xe=K.get(ge);xe?xe():assignRef$1(ge,null)}),K.clear()}}}function useMergedRef(...fe){return reactExports.useCallback(mergeRefs(...fe),fe)}function clampUseMovePosition(fe){return{x:clamp$5(fe.x,0,1),y:clamp$5(fe.y,0,1)}}function useMove(fe,K,me="ltr"){const ge=reactExports.useRef(null),xe=reactExports.useRef(!1),ye=reactExports.useRef(!1),ve=reactExports.useRef(0),[_e,Ee]=reactExports.useState(!1);return reactExports.useEffect(()=>{xe.current=!0},[]),reactExports.useEffect(()=>{const be=ge.current,Ae=({x:Oe,y:Fe})=>{cancelAnimationFrame(ve.current),ve.current=requestAnimationFrame(()=>{if(xe.current&&be){be.style.userSelect="none";const Ue=be.getBoundingClientRect();if(Ue.width&&Ue.height){const Ne=clamp$5((Oe-Ue.left)/Ue.width,0,1);fe({x:me==="ltr"?Ne:1-Ne,y:clamp$5((Fe-Ue.top)/Ue.height,0,1)})}}})},Se=()=>{document.addEventListener("mousemove",Ie),document.addEventListener("mouseup",Re),document.addEventListener("touchmove",Le),document.addEventListener("touchend",Re)},Ce=()=>{document.removeEventListener("mousemove",Ie),document.removeEventListener("mouseup",Re),document.removeEventListener("touchmove",Le),document.removeEventListener("touchend",Re)},Te=()=>{!ye.current&&xe.current&&(ye.current=!0,typeof K?.onScrubStart=="function"&&K.onScrubStart(),Ee(!0),Se())},Re=()=>{ye.current&&xe.current&&(ye.current=!1,Ee(!1),Ce(),setTimeout(()=>{typeof K?.onScrubEnd=="function"&&K.onScrubEnd()},0))},De=Oe=>{Te(),Oe.preventDefault(),Ie(Oe)},Ie=Oe=>Ae({x:Oe.clientX,y:Oe.clientY}),Be=Oe=>{Oe.cancelable&&Oe.preventDefault(),Te(),Le(Oe)},Le=Oe=>{Oe.cancelable&&Oe.preventDefault(),Ae({x:Oe.changedTouches[0].clientX,y:Oe.changedTouches[0].clientY})};return be?.addEventListener("mousedown",De),be?.addEventListener("touchstart",Be,{passive:!1}),()=>{be&&(be.removeEventListener("mousedown",De),be.removeEventListener("touchstart",Be))}},[me,fe]),{ref:ge,active:_e}}function useUncontrolled({value:fe,defaultValue:K,finalValue:me,onChange:ge=()=>{}}){const[xe,ye]=reactExports.useState(K!==void 0?K:me),ve=(_e,...Ee)=>{ye(_e),ge?.(_e,...Ee)};return fe!==void 0?[fe,ge,!0]:[xe,ve,!1]}function useReducedMotion(fe,K){return useMediaQuery("(prefers-reduced-motion: reduce)",fe,K)}const defaultState={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function useResizeObserver$1(fe){const K=reactExports.useRef(0),me=reactExports.useRef(null),[ge,xe]=reactExports.useState(defaultState),ye=reactExports.useMemo(()=>typeof window<"u"?new ResizeObserver(ve=>{const _e=ve[0];_e&&(cancelAnimationFrame(K.current),K.current=requestAnimationFrame(()=>{me.current&&xe(_e.contentRect)}))}):null,[]);return reactExports.useEffect(()=>(me.current&&ye?.observe(me.current,fe),()=>{ye?.disconnect(),K.current&&cancelAnimationFrame(K.current)}),[me.current]),[me,ge]}function useElementSize(fe){const[K,{width:me,height:ge}]=useResizeObserver$1(fe);return{ref:K,width:me,height:ge}}function useDisclosure(fe=!1,K){const{onOpen:me,onClose:ge}={},[xe,ye]=reactExports.useState(fe),ve=reactExports.useCallback(()=>{ye(be=>be||(me?.(),!0))},[me]),_e=reactExports.useCallback(()=>{ye(be=>be&&(ge?.(),!1))},[ge]),Ee=reactExports.useCallback(()=>{xe?_e():ve()},[_e,ve,xe]);return[xe,{open:ve,close:_e,toggle:Ee}]}function usePrevious(fe){const K=reactExports.useRef(void 0);return reactExports.useEffect(()=>{K.current=fe},[fe]),K.current}function isOpera(){return navigator.userAgent.includes("OPR")}function useEyeDropper(){const[fe,K]=reactExports.useState(!1);useIsomorphicEffect$1(()=>{K(typeof window<"u"&&!isOpera()&&"EyeDropper"in window)},[]);const me=reactExports.useCallback((ge={})=>fe?new window.EyeDropper().open(ge):Promise.resolve(void 0),[fe]);return{supported:fe,open:me}}function createStore$3(fe){let K=fe,me=!1;const ge=new Set;return{getState(){return K},updateState(xe){K=typeof xe=="function"?xe(K):xe},setState(xe){this.updateState(xe),ge.forEach(ye=>ye(K))},initialize(xe){me||(K=xe,me=!0)},subscribe(xe){return ge.add(xe),()=>ge.delete(xe)}}}function useStore$2(fe){return reactExports.useSyncExternalStore(fe.subscribe,()=>fe.getState(),()=>fe.getState())}function getDistributedNotifications(fe,K,me){const ge=[],xe=[],ye={};for(const ve of fe){const _e=ve.position||K;ye[_e]=ye[_e]||0,ye[_e]+=1,ye[_e]<=me?xe.push(ve):ge.push(ve)}return{notifications:xe,queue:ge}}const createNotificationsStore=()=>createStore$3({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),notificationsStore=createNotificationsStore(),useNotifications=(fe=notificationsStore)=>useStore$2(fe);function updateNotificationsState(fe,K){const me=fe.getState(),ge=K([...me.notifications,...me.queue]),xe=getDistributedNotifications(ge,me.defaultPosition,me.limit);fe.setState({notifications:xe.notifications,queue:xe.queue,limit:me.limit,defaultPosition:me.defaultPosition})}function showNotification(fe,K=notificationsStore){const me=fe.id||randomId();return updateNotificationsState(K,ge=>fe.id&&ge.some(xe=>xe.id===fe.id)?ge:[...ge,{...fe,id:me}]),me}function hideNotification(fe,K=notificationsStore){return updateNotificationsState(K,me=>me.filter(ge=>ge.id===fe?(ge.onClose?.(ge),!1):!0)),fe}function updateNotification(fe,K=notificationsStore){return updateNotificationsState(K,me=>me.map(ge=>ge.id===fe.id?{...ge,...fe}:ge)),fe.id}function cleanNotifications(fe=notificationsStore){updateNotificationsState(fe,()=>[])}function cleanNotificationsQueue(fe=notificationsStore){updateNotificationsState(fe,K=>K.slice(0,fe.getState().limit))}const notifications={show:showNotification,hide:hideNotification,update:updateNotification,clean:cleanNotifications,cleanQueue:cleanNotificationsQueue,updateState:updateNotificationsState};function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(fe){for(var K=1;K<arguments.length;K++){var me=arguments[K];for(var ge in me)({}).hasOwnProperty.call(me,ge)&&(fe[ge]=me[ge])}return fe},_extends$2.apply(null,arguments)}function _objectWithoutPropertiesLoose(fe,K){if(fe==null)return{};var me={};for(var ge in fe)if({}.hasOwnProperty.call(fe,ge)){if(K.indexOf(ge)!==-1)continue;me[ge]=fe[ge]}return me}function _setPrototypeOf(fe,K){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(me,ge){return me.__proto__=ge,me},_setPrototypeOf(fe,K)}function _inheritsLoose(fe,K){fe.prototype=Object.create(K.prototype),fe.prototype.constructor=fe,_setPrototypeOf(fe,K)}var propTypes$2={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function fe(ge,xe,ye,ve,_e,Ee){if(Ee!==ReactPropTypesSecret){var be=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw be.name="Invariant Violation",be}}fe.isRequired=fe;function K(){return fe}var me={array:fe,bigint:fe,bool:fe,func:fe,number:fe,object:fe,string:fe,symbol:fe,any:fe,arrayOf:K,element:fe,elementType:fe,instanceOf:K,node:fe,objectOf:K,oneOf:K,oneOfType:K,shape:K,exact:K,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return me.PropTypes=me,me};propTypes$2.exports=factoryWithThrowingShims();var propTypesExports=propTypes$2.exports;const config={disabled:!1},TransitionGroupContext=React$4.createContext(null);var forceReflow=function(K){return K.scrollTop},UNMOUNTED="unmounted",EXITED="exited",ENTERING="entering",ENTERED="entered",EXITING="exiting",Transition$2=function(fe){_inheritsLoose(K,fe);function K(ge,xe){var ye;ye=fe.call(this,ge,xe)||this;var ve=xe,_e=ve&&!ve.isMounting?ge.enter:ge.appear,Ee;return ye.appearStatus=null,ge.in?_e?(Ee=EXITED,ye.appearStatus=ENTERING):Ee=ENTERED:ge.unmountOnExit||ge.mountOnEnter?Ee=UNMOUNTED:Ee=EXITED,ye.state={status:Ee},ye.nextCallback=null,ye}K.getDerivedStateFromProps=function(xe,ye){var ve=xe.in;return ve&&ye.status===UNMOUNTED?{status:EXITED}:null};var me=K.prototype;return me.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},me.componentDidUpdate=function(xe){var ye=null;if(xe!==this.props){var ve=this.state.status;this.props.in?ve!==ENTERING&&ve!==ENTERED&&(ye=ENTERING):(ve===ENTERING||ve===ENTERED)&&(ye=EXITING)}this.updateStatus(!1,ye)},me.componentWillUnmount=function(){this.cancelNextCallback()},me.getTimeouts=function(){var xe=this.props.timeout,ye,ve,_e;return ye=ve=_e=xe,xe!=null&&typeof xe!="number"&&(ye=xe.exit,ve=xe.enter,_e=xe.appear!==void 0?xe.appear:ve),{exit:ye,enter:ve,appear:_e}},me.updateStatus=function(xe,ye){if(xe===void 0&&(xe=!1),ye!==null)if(this.cancelNextCallback(),ye===ENTERING){if(this.props.unmountOnExit||this.props.mountOnEnter){var ve=this.props.nodeRef?this.props.nodeRef.current:ReactDOM$2.findDOMNode(this);ve&&forceReflow(ve)}this.performEnter(xe)}else this.performExit();else this.props.unmountOnExit&&this.state.status===EXITED&&this.setState({status:UNMOUNTED})},me.performEnter=function(xe){var ye=this,ve=this.props.enter,_e=this.context?this.context.isMounting:xe,Ee=this.props.nodeRef?[_e]:[ReactDOM$2.findDOMNode(this),_e],be=Ee[0],Ae=Ee[1],Se=this.getTimeouts(),Ce=_e?Se.appear:Se.enter;if(!xe&&!ve||config.disabled){this.safeSetState({status:ENTERED},function(){ye.props.onEntered(be)});return}this.props.onEnter(be,Ae),this.safeSetState({status:ENTERING},function(){ye.props.onEntering(be,Ae),ye.onTransitionEnd(Ce,function(){ye.safeSetState({status:ENTERED},function(){ye.props.onEntered(be,Ae)})})})},me.performExit=function(){var xe=this,ye=this.props.exit,ve=this.getTimeouts(),_e=this.props.nodeRef?void 0:ReactDOM$2.findDOMNode(this);if(!ye||config.disabled){this.safeSetState({status:EXITED},function(){xe.props.onExited(_e)});return}this.props.onExit(_e),this.safeSetState({status:EXITING},function(){xe.props.onExiting(_e),xe.onTransitionEnd(ve.exit,function(){xe.safeSetState({status:EXITED},function(){xe.props.onExited(_e)})})})},me.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},me.safeSetState=function(xe,ye){ye=this.setNextCallback(ye),this.setState(xe,ye)},me.setNextCallback=function(xe){var ye=this,ve=!0;return this.nextCallback=function(_e){ve&&(ve=!1,ye.nextCallback=null,xe(_e))},this.nextCallback.cancel=function(){ve=!1},this.nextCallback},me.onTransitionEnd=function(xe,ye){this.setNextCallback(ye);var ve=this.props.nodeRef?this.props.nodeRef.current:ReactDOM$2.findDOMNode(this),_e=xe==null&&!this.props.addEndListener;if(!ve||_e){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var Ee=this.props.nodeRef?[this.nextCallback]:[ve,this.nextCallback],be=Ee[0],Ae=Ee[1];this.props.addEndListener(be,Ae)}xe!=null&&setTimeout(this.nextCallback,xe)},me.render=function(){var xe=this.state.status;if(xe===UNMOUNTED)return null;var ye=this.props,ve=ye.children;ye.in,ye.mountOnEnter,ye.unmountOnExit,ye.appear,ye.enter,ye.exit,ye.timeout,ye.addEndListener,ye.onEnter,ye.onEntering,ye.onEntered,ye.onExit,ye.onExiting,ye.onExited,ye.nodeRef;var _e=_objectWithoutPropertiesLoose(ye,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return React$4.createElement(TransitionGroupContext.Provider,{value:null},typeof ve=="function"?ve(xe,_e):React$4.cloneElement(React$4.Children.only(ve),_e))},K}(React$4.Component);Transition$2.contextType=TransitionGroupContext;Transition$2.propTypes={};function noop$3(){}Transition$2.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:noop$3,onEntering:noop$3,onEntered:noop$3,onExit:noop$3,onExiting:noop$3,onExited:noop$3};Transition$2.UNMOUNTED=UNMOUNTED;Transition$2.EXITED=EXITED;Transition$2.ENTERING=ENTERING;Transition$2.ENTERED=ENTERED;Transition$2.EXITING=EXITING;function _assertThisInitialized(fe){if(fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function getChildMapping(fe,K){var me=function(ye){return K&&reactExports.isValidElement(ye)?K(ye):ye},ge=Object.create(null);return fe&&reactExports.Children.map(fe,function(xe){return xe}).forEach(function(xe){ge[xe.key]=me(xe)}),ge}function mergeChildMappings(fe,K){fe=fe||{},K=K||{};function me(Ae){return Ae in K?K[Ae]:fe[Ae]}var ge=Object.create(null),xe=[];for(var ye in fe)ye in K?xe.length&&(ge[ye]=xe,xe=[]):xe.push(ye);var ve,_e={};for(var Ee in K){if(ge[Ee])for(ve=0;ve<ge[Ee].length;ve++){var be=ge[Ee][ve];_e[ge[Ee][ve]]=me(be)}_e[Ee]=me(Ee)}for(ve=0;ve<xe.length;ve++)_e[xe[ve]]=me(xe[ve]);return _e}function getProp(fe,K,me){return me[K]!=null?me[K]:fe.props[K]}function getInitialChildMapping(fe,K){return getChildMapping(fe.children,function(me){return reactExports.cloneElement(me,{onExited:K.bind(null,me),in:!0,appear:getProp(me,"appear",fe),enter:getProp(me,"enter",fe),exit:getProp(me,"exit",fe)})})}function getNextChildMapping(fe,K,me){var ge=getChildMapping(fe.children),xe=mergeChildMappings(K,ge);return Object.keys(xe).forEach(function(ye){var ve=xe[ye];if(reactExports.isValidElement(ve)){var _e=ye in K,Ee=ye in ge,be=K[ye],Ae=reactExports.isValidElement(be)&&!be.props.in;Ee&&(!_e||Ae)?xe[ye]=reactExports.cloneElement(ve,{onExited:me.bind(null,ve),in:!0,exit:getProp(ve,"exit",fe),enter:getProp(ve,"enter",fe)}):!Ee&&_e&&!Ae?xe[ye]=reactExports.cloneElement(ve,{in:!1}):Ee&&_e&&reactExports.isValidElement(be)&&(xe[ye]=reactExports.cloneElement(ve,{onExited:me.bind(null,ve),in:be.props.in,exit:getProp(ve,"exit",fe),enter:getProp(ve,"enter",fe)}))}}),xe}var values$1=Object.values||function(fe){return Object.keys(fe).map(function(K){return fe[K]})},defaultProps$1t={component:"div",childFactory:function(K){return K}},TransitionGroup=function(fe){_inheritsLoose(K,fe);function K(ge,xe){var ye;ye=fe.call(this,ge,xe)||this;var ve=ye.handleExited.bind(_assertThisInitialized(ye));return ye.state={contextValue:{isMounting:!0},handleExited:ve,firstRender:!0},ye}var me=K.prototype;return me.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},me.componentWillUnmount=function(){this.mounted=!1},K.getDerivedStateFromProps=function(xe,ye){var ve=ye.children,_e=ye.handleExited,Ee=ye.firstRender;return{children:Ee?getInitialChildMapping(xe,_e):getNextChildMapping(xe,ve,_e),firstRender:!1}},me.handleExited=function(xe,ye){var ve=getChildMapping(this.props.children);xe.key in ve||(xe.props.onExited&&xe.props.onExited(ye),this.mounted&&this.setState(function(_e){var Ee=_extends$2({},_e.children);return delete Ee[xe.key],{children:Ee}}))},me.render=function(){var xe=this.props,ye=xe.component,ve=xe.childFactory,_e=_objectWithoutPropertiesLoose(xe,["component","childFactory"]),Ee=this.state.contextValue,be=values$1(this.state.children).map(ve);return delete _e.appear,delete _e.enter,delete _e.exit,ye===null?React$4.createElement(TransitionGroupContext.Provider,{value:Ee},be):React$4.createElement(TransitionGroupContext.Provider,{value:Ee},React$4.createElement(ye,_e,be))},K}(React$4.Component);TransitionGroup.propTypes={};TransitionGroup.defaultProps=defaultProps$1t;var __assign=function(){return __assign=Object.assign||function(K){for(var me,ge=1,xe=arguments.length;ge<xe;ge++){me=arguments[ge];for(var ye in me)Object.prototype.hasOwnProperty.call(me,ye)&&(K[ye]=me[ye])}return K},__assign.apply(this,arguments)};function __rest$1(fe,K){var me={};for(var ge in fe)Object.prototype.hasOwnProperty.call(fe,ge)&&K.indexOf(ge)<0&&(me[ge]=fe[ge]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var xe=0,ge=Object.getOwnPropertySymbols(fe);xe<ge.length;xe++)K.indexOf(ge[xe])<0&&Object.prototype.propertyIsEnumerable.call(fe,ge[xe])&&(me[ge[xe]]=fe[ge[xe]]);return me}function __spreadArray$1(fe,K,me){if(me||arguments.length===2)for(var ge=0,xe=K.length,ye;ge<xe;ge++)(ye||!(ge in K))&&(ye||(ye=Array.prototype.slice.call(K,0,ge)),ye[ge]=K[ge]);return fe.concat(ye||Array.prototype.slice.call(K))}typeof SuppressedError=="function"&&SuppressedError;var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size";function assignRef(fe,K){return typeof fe=="function"?fe(K):fe&&(fe.current=K),fe}function useCallbackRef(fe,K){var me=reactExports.useState(function(){return{value:fe,callback:K,facade:{get current(){return me.value},set current(ge){var xe=me.value;xe!==ge&&(me.value=ge,me.callback(ge,xe))}}}})[0];return me.callback=K,me.facade}var useIsomorphicLayoutEffect$1=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs$1(fe,K){var me=useCallbackRef(null,function(ge){return fe.forEach(function(xe){return assignRef(xe,ge)})});return useIsomorphicLayoutEffect$1(function(){var ge=currentValues.get(me);if(ge){var xe=new Set(ge),ye=new Set(fe),ve=me.current;xe.forEach(function(_e){ye.has(_e)||assignRef(_e,null)}),ye.forEach(function(_e){xe.has(_e)||assignRef(_e,ve)})}currentValues.set(me,fe)},[fe]),me}function ItoI(fe){return fe}function innerCreateMedium(fe,K){K===void 0&&(K=ItoI);var me=[],ge=!1,xe={read:function(){if(ge)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return me.length?me[me.length-1]:fe},useMedium:function(ye){var ve=K(ye,ge);return me.push(ve),function(){me=me.filter(function(_e){return _e!==ve})}},assignSyncMedium:function(ye){for(ge=!0;me.length;){var ve=me;me=[],ve.forEach(ye)}me={push:function(_e){return ye(_e)},filter:function(){return me}}},assignMedium:function(ye){ge=!0;var ve=[];if(me.length){var _e=me;me=[],_e.forEach(ye),ve=me}var Ee=function(){var Ae=ve;ve=[],Ae.forEach(ye)},be=function(){return Promise.resolve().then(Ee)};be(),me={push:function(Ae){ve.push(Ae),be()},filter:function(Ae){return ve=ve.filter(Ae),me}}}};return xe}function createSidecarMedium(fe){fe===void 0&&(fe={});var K=innerCreateMedium(null);return K.options=__assign({async:!0,ssr:!1},fe),K}var SideCar$1=function(fe){var K=fe.sideCar,me=__rest$1(fe,["sideCar"]);if(!K)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var ge=K.read();if(!ge)throw new Error("Sidecar medium not found");return reactExports.createElement(ge,__assign({},me))};SideCar$1.isSideCarExport=!0;function exportSidecar(fe,K){return fe.useMedium(K),SideCar$1}var effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(fe,K){var me=reactExports.useRef(null),ge=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),xe=ge[0],ye=ge[1],ve=fe.forwardProps,_e=fe.children,Ee=fe.className,be=fe.removeScrollBar,Ae=fe.enabled,Se=fe.shards,Ce=fe.sideCar,Te=fe.noIsolation,Re=fe.inert,De=fe.allowPinchZoom,Ie=fe.as,Be=Ie===void 0?"div":Ie,Le=fe.gapMode,Oe=__rest$1(fe,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Fe=Ce,Ue=useMergeRefs$1([me,K]),Ne=__assign(__assign({},Oe),xe);return reactExports.createElement(reactExports.Fragment,null,Ae&&reactExports.createElement(Fe,{sideCar:effectCar,removeScrollBar:be,shards:Se,noIsolation:Te,inert:Re,setCallbacks:ye,allowPinchZoom:!!De,lockRef:me,gapMode:Le}),ve?reactExports.cloneElement(reactExports.Children.only(_e),__assign(__assign({},Ne),{ref:Ue})):reactExports.createElement(Be,__assign({},Ne,{className:Ee,ref:Ue}),_e))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var fe=document.createElement("style");fe.type="text/css";var K=getNonce();return K&&fe.setAttribute("nonce",K),fe}function injectStyles(fe,K){fe.styleSheet?fe.styleSheet.cssText=K:fe.appendChild(document.createTextNode(K))}function insertStyleTag(fe){var K=document.head||document.getElementsByTagName("head")[0];K.appendChild(fe)}var stylesheetSingleton=function(){var fe=0,K=null;return{add:function(me){fe==0&&(K=makeStyleTag())&&(injectStyles(K,me),insertStyleTag(K)),fe++},remove:function(){fe--,!fe&&K&&(K.parentNode&&K.parentNode.removeChild(K),K=null)}}},styleHookSingleton=function(){var fe=stylesheetSingleton();return function(K,me){reactExports.useEffect(function(){return fe.add(K),function(){fe.remove()}},[K&&me])}},styleSingleton=function(){var fe=styleHookSingleton(),K=function(me){var ge=me.styles,xe=me.dynamic;return fe(ge,xe),null};return K},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(fe){return parseInt(fe||"",10)||0},getOffset=function(fe){var K=window.getComputedStyle(document.body),me=K[fe==="padding"?"paddingLeft":"marginLeft"],ge=K[fe==="padding"?"paddingTop":"marginTop"],xe=K[fe==="padding"?"paddingRight":"marginRight"];return[parse$1(me),parse$1(ge),parse$1(xe)]},getGapWidth=function(fe){if(fe===void 0&&(fe="margin"),typeof window>"u")return zeroGap;var K=getOffset(fe),me=document.documentElement.clientWidth,ge=window.innerWidth;return{left:K[0],top:K[1],right:K[2],gap:Math.max(0,ge-me+K[2]-K[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles=function(fe,K,me,ge){var xe=fe.left,ye=fe.top,ve=fe.right,_e=fe.gap;return me===void 0&&(me="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(ge,`;
   padding-right: `).concat(_e,"px ").concat(ge,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(ge,`;
    overscroll-behavior: contain;
    `).concat([K&&"position: relative ".concat(ge,";"),me==="margin"&&`
    padding-left: `.concat(xe,`px;
    padding-top: `).concat(ye,`px;
    padding-right: `).concat(ve,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(_e,"px ").concat(ge,`;
    `),me==="padding"&&"padding-right: ".concat(_e,"px ").concat(ge,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(_e,"px ").concat(ge,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(_e,"px ").concat(ge,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(ge,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(ge,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(_e,`px;
  }
`)},getCurrentUseCounter=function(){var fe=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(fe)?fe:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var fe=getCurrentUseCounter()-1;fe<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,fe.toString())}},[])},RemoveScrollBar=function(fe){var K=fe.noRelative,me=fe.noImportant,ge=fe.gapMode,xe=ge===void 0?"margin":ge;useLockAttribute();var ye=reactExports.useMemo(function(){return getGapWidth(xe)},[xe]);return reactExports.createElement(Style,{styles:getStyles(ye,!K,xe,me?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(fe){return fe.tagName==="TEXTAREA"},elementCanBeScrolled=function(fe,K){if(!(fe instanceof Element))return!1;var me=window.getComputedStyle(fe);return me[K]!=="hidden"&&!(me.overflowY===me.overflowX&&!alwaysContainsScroll(fe)&&me[K]==="visible")},elementCouldBeVScrolled=function(fe){return elementCanBeScrolled(fe,"overflowY")},elementCouldBeHScrolled=function(fe){return elementCanBeScrolled(fe,"overflowX")},locationCouldBeScrolled=function(fe,K){var me=K.ownerDocument,ge=K;do{typeof ShadowRoot<"u"&&ge instanceof ShadowRoot&&(ge=ge.host);var xe=elementCouldBeScrolled(fe,ge);if(xe){var ye=getScrollVariables(fe,ge),ve=ye[1],_e=ye[2];if(ve>_e)return!0}ge=ge.parentNode}while(ge&&ge!==me.body);return!1},getVScrollVariables=function(fe){var K=fe.scrollTop,me=fe.scrollHeight,ge=fe.clientHeight;return[K,me,ge]},getHScrollVariables=function(fe){var K=fe.scrollLeft,me=fe.scrollWidth,ge=fe.clientWidth;return[K,me,ge]},elementCouldBeScrolled=function(fe,K){return fe==="v"?elementCouldBeVScrolled(K):elementCouldBeHScrolled(K)},getScrollVariables=function(fe,K){return fe==="v"?getVScrollVariables(K):getHScrollVariables(K)},getDirectionFactor=function(fe,K){return fe==="h"&&K==="rtl"?-1:1},handleScroll=function(fe,K,me,ge,xe){var ye=getDirectionFactor(fe,window.getComputedStyle(K).direction),ve=ye*ge,_e=me.target,Ee=K.contains(_e),be=!1,Ae=ve>0,Se=0,Ce=0;do{var Te=getScrollVariables(fe,_e),Re=Te[0],De=Te[1],Ie=Te[2],Be=De-Ie-ye*Re;(Re||Be)&&elementCouldBeScrolled(fe,_e)&&(Se+=Be,Ce+=Re),_e instanceof ShadowRoot?_e=_e.host:_e=_e.parentNode}while(!Ee&&_e!==document.body||Ee&&(K.contains(_e)||K===_e));return(Ae&&Math.abs(Se)<1||!Ae&&Math.abs(Ce)<1)&&(be=!0),be},getTouchXY=function(fe){return"changedTouches"in fe?[fe.changedTouches[0].clientX,fe.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(fe){return[fe.deltaX,fe.deltaY]},extractRef=function(fe){return fe&&"current"in fe?fe.current:fe},deltaCompare=function(fe,K){return fe[0]===K[0]&&fe[1]===K[1]},generateStyle=function(fe){return`
  .block-interactivity-`.concat(fe,` {pointer-events: none;}
  .allow-interactivity-`).concat(fe,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(fe){var K=reactExports.useRef([]),me=reactExports.useRef([0,0]),ge=reactExports.useRef(),xe=reactExports.useState(idCounter++)[0],ye=reactExports.useState(styleSingleton)[0],ve=reactExports.useRef(fe);reactExports.useEffect(function(){ve.current=fe},[fe]),reactExports.useEffect(function(){if(fe.inert){document.body.classList.add("block-interactivity-".concat(xe));var De=__spreadArray$1([fe.lockRef.current],(fe.shards||[]).map(extractRef),!0).filter(Boolean);return De.forEach(function(Ie){return Ie.classList.add("allow-interactivity-".concat(xe))}),function(){document.body.classList.remove("block-interactivity-".concat(xe)),De.forEach(function(Ie){return Ie.classList.remove("allow-interactivity-".concat(xe))})}}},[fe.inert,fe.lockRef.current,fe.shards]);var _e=reactExports.useCallback(function(De,Ie){if("touches"in De&&De.touches.length===2||De.type==="wheel"&&De.ctrlKey)return!ve.current.allowPinchZoom;var Be=getTouchXY(De),Le=me.current,Oe="deltaX"in De?De.deltaX:Le[0]-Be[0],Fe="deltaY"in De?De.deltaY:Le[1]-Be[1],Ue,Ne=De.target,He=Math.abs(Oe)>Math.abs(Fe)?"h":"v";if("touches"in De&&He==="h"&&Ne.type==="range")return!1;var ze=locationCouldBeScrolled(He,Ne);if(!ze)return!0;if(ze?Ue=He:(Ue=He==="v"?"h":"v",ze=locationCouldBeScrolled(He,Ne)),!ze)return!1;if(!ge.current&&"changedTouches"in De&&(Oe||Fe)&&(ge.current=Ue),!Ue)return!0;var je=ge.current||Ue;return handleScroll(je,Ie,De,je==="h"?Oe:Fe)},[]),Ee=reactExports.useCallback(function(De){var Ie=De;if(!(!lockStack.length||lockStack[lockStack.length-1]!==ye)){var Be="deltaY"in Ie?getDeltaXY(Ie):getTouchXY(Ie),Le=K.current.filter(function(Ue){return Ue.name===Ie.type&&(Ue.target===Ie.target||Ie.target===Ue.shadowParent)&&deltaCompare(Ue.delta,Be)})[0];if(Le&&Le.should){Ie.cancelable&&Ie.preventDefault();return}if(!Le){var Oe=(ve.current.shards||[]).map(extractRef).filter(Boolean).filter(function(Ue){return Ue.contains(Ie.target)}),Fe=Oe.length>0?_e(Ie,Oe[0]):!ve.current.noIsolation;Fe&&Ie.cancelable&&Ie.preventDefault()}}},[]),be=reactExports.useCallback(function(De,Ie,Be,Le){var Oe={name:De,delta:Ie,target:Be,should:Le,shadowParent:getOutermostShadowParent(Be)};K.current.push(Oe),setTimeout(function(){K.current=K.current.filter(function(Fe){return Fe!==Oe})},1)},[]),Ae=reactExports.useCallback(function(De){me.current=getTouchXY(De),ge.current=void 0},[]),Se=reactExports.useCallback(function(De){be(De.type,getDeltaXY(De),De.target,_e(De,fe.lockRef.current))},[]),Ce=reactExports.useCallback(function(De){be(De.type,getTouchXY(De),De.target,_e(De,fe.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(ye),fe.setCallbacks({onScrollCapture:Se,onWheelCapture:Se,onTouchMoveCapture:Ce}),document.addEventListener("wheel",Ee,nonPassive),document.addEventListener("touchmove",Ee,nonPassive),document.addEventListener("touchstart",Ae,nonPassive),function(){lockStack=lockStack.filter(function(De){return De!==ye}),document.removeEventListener("wheel",Ee,nonPassive),document.removeEventListener("touchmove",Ee,nonPassive),document.removeEventListener("touchstart",Ae,nonPassive)}},[]);var Te=fe.removeScrollBar,Re=fe.inert;return reactExports.createElement(reactExports.Fragment,null,Re?reactExports.createElement(ye,{styles:generateStyle(xe)}):null,Te?reactExports.createElement(RemoveScrollBar,{gapMode:fe.gapMode}):null)}function getOutermostShadowParent(fe){for(var K=null;fe!==null;)fe instanceof ShadowRoot&&(K=fe.host,fe=fe.host),fe=fe.parentNode;return K}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(fe,K){return reactExports.createElement(RemoveScroll,__assign({},fe,{ref:K,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;function keys$1(fe){return Object.keys(fe)}function isObject(fe){return fe&&typeof fe=="object"&&!Array.isArray(fe)}function deepMerge(fe,K){const me={...fe},ge=K;return isObject(fe)&&isObject(K)&&Object.keys(K).forEach(xe=>{isObject(ge[xe])&&xe in fe?me[xe]=deepMerge(me[xe],ge[xe]):me[xe]=ge[xe]}),me}function camelToKebabCase(fe){return fe.replace(/[A-Z]/g,K=>`-${K.toLowerCase()}`)}function getTransformedScaledValue(fe){return typeof fe!="string"||!fe.includes("var(--mantine-scale)")?fe:fe.match(/^calc\((.*?)\)$/)?.[1].split("*")[0].trim()}function px$1(fe){const K=getTransformedScaledValue(fe);return typeof K=="number"?K:typeof K=="string"?K.includes("calc")||K.includes("var")?K:K.includes("px")?Number(K.replace("px","")):K.includes("rem")?Number(K.replace("rem",""))*16:K.includes("em")?Number(K.replace("em",""))*16:Number(K):NaN}function scaleRem(fe){return fe==="0rem"?"0rem":`calc(${fe} * var(--mantine-scale))`}function createConverter(fe,{shouldScale:K=!1}={}){function me(ge){if(ge===0||ge==="0")return`0${fe}`;if(typeof ge=="number"){const xe=`${ge/16}${fe}`;return K?scaleRem(xe):xe}if(typeof ge=="string"){if(ge===""||ge.startsWith("calc(")||ge.startsWith("clamp(")||ge.includes("rgba("))return ge;if(ge.includes(","))return ge.split(",").map(ye=>me(ye)).join(",");if(ge.includes(" "))return ge.split(" ").map(ye=>me(ye)).join(" ");if(ge.includes(fe))return K?scaleRem(ge):ge;const xe=ge.replace("px","");if(!Number.isNaN(Number(xe))){const ye=`${Number(xe)/16}${fe}`;return K?scaleRem(ye):ye}}return ge}return me}const rem=createConverter("rem",{shouldScale:!0}),em=createConverter("em");function filterProps(fe){return Object.keys(fe).reduce((K,me)=>(fe[me]!==void 0&&(K[me]=fe[me]),K),{})}function isNumberLike(fe){if(typeof fe=="number")return!0;if(typeof fe=="string"){if(fe.startsWith("calc(")||fe.startsWith("var(")||fe.includes(" ")&&fe.trim()!=="")return!0;const K=/^[+-]?[0-9]+(\.[0-9]+)?(px|em|rem|ex|ch|lh|rlh|vw|vh|vmin|vmax|vb|vi|svw|svh|lvw|lvh|dvw|dvh|cm|mm|in|pt|pc|q|cqw|cqh|cqi|cqb|cqmin|cqmax|%)?$/;return fe.trim().split(/\s+/).every(ge=>K.test(ge))}return!1}function isElement$1(fe){return Array.isArray(fe)||fe===null?!1:typeof fe=="object"?fe.type!==reactExports.Fragment:!1}function createSafeContext(fe){const K=reactExports.createContext(null);return[({children:xe,value:ye})=>jsxRuntimeExports.jsx(K.Provider,{value:ye,children:xe}),()=>{const xe=reactExports.useContext(K);if(xe===null)throw new Error(fe);return xe}]}function createOptionalContext(fe=null){const K=reactExports.createContext(fe);return[({children:xe,value:ye})=>jsxRuntimeExports.jsx(K.Provider,{value:ye,children:xe}),()=>reactExports.useContext(K)]}function getSafeId(fe,K){return me=>{if(typeof me!="string"||me.trim().length===0)throw new Error(K);return`${fe}-${me}`}}function findElementAncestor(fe,K){let me=fe;for(;(me=me.parentElement)&&!me.matches(K););return me}function getPreviousIndex$1(fe,K,me){for(let ge=fe-1;ge>=0;ge-=1)if(!K[ge].disabled)return ge;if(me){for(let ge=K.length-1;ge>-1;ge-=1)if(!K[ge].disabled)return ge}return fe}function getNextIndex$1(fe,K,me){for(let ge=fe+1;ge<K.length;ge+=1)if(!K[ge].disabled)return ge;if(me){for(let ge=0;ge<K.length;ge+=1)if(!K[ge].disabled)return ge}return fe}function onSameLevel(fe,K,me){return findElementAncestor(fe,me)===findElementAncestor(K,me)}function createScopedKeydownHandler({parentSelector:fe,siblingSelector:K,onKeyDown:me,loop:ge=!0,activateOnFocus:xe=!1,dir:ye="rtl",orientation:ve}){return _e=>{me?.(_e);const Ee=Array.from(findElementAncestor(_e.currentTarget,fe)?.querySelectorAll(K)||[]).filter(Re=>onSameLevel(_e.currentTarget,Re,fe)),be=Ee.findIndex(Re=>_e.currentTarget===Re),Ae=getNextIndex$1(be,Ee,ge),Se=getPreviousIndex$1(be,Ee,ge),Ce=ye==="rtl"?Se:Ae,Te=ye==="rtl"?Ae:Se;switch(_e.key){case"ArrowRight":{ve==="horizontal"&&(_e.stopPropagation(),_e.preventDefault(),Ee[Ce].focus(),xe&&Ee[Ce].click());break}case"ArrowLeft":{ve==="horizontal"&&(_e.stopPropagation(),_e.preventDefault(),Ee[Te].focus(),xe&&Ee[Te].click());break}case"ArrowUp":{ve==="vertical"&&(_e.stopPropagation(),_e.preventDefault(),Ee[Se].focus(),xe&&Ee[Se].click());break}case"ArrowDown":{ve==="vertical"&&(_e.stopPropagation(),_e.preventDefault(),Ee[Ae].focus(),xe&&Ee[Ae].click());break}case"Home":{_e.stopPropagation(),_e.preventDefault(),!Ee[0].disabled&&Ee[0].focus();break}case"End":{_e.stopPropagation(),_e.preventDefault();const Re=Ee.length-1;!Ee[Re].disabled&&Ee[Re].focus();break}}}}const elevations={app:100,modal:200,popover:300,overlay:400,max:9999};function getDefaultZIndex(fe){return elevations[fe]}const noop$2=()=>{};function closeOnEscape(fe,K={active:!0}){return typeof fe!="function"||!K.active?K.onKeyDown||noop$2:me=>{me.key==="Escape"&&(fe(me),K.onTrigger?.())}}function getSize(fe,K="size",me=!0){if(fe!==void 0)return isNumberLike(fe)?me?rem(fe):fe:`var(--${K}-${fe})`}function getSpacing(fe){return getSize(fe,"mantine-spacing")}function getRadius(fe){return fe===void 0?"var(--mantine-radius-default)":getSize(fe,"mantine-radius")}function getFontSize(fe){return getSize(fe,"mantine-font-size")}function getLineHeight(fe){return getSize(fe,"mantine-line-height",!1)}function getShadow(fe){if(fe)return getSize(fe,"mantine-shadow",!1)}var define_process_env_default={};function getEnv(){return typeof process<"u"&&define_process_env_default?"production":"development"}function findClosestNumber(fe,K){return K.length===0?fe:K.reduce((me,ge)=>Math.abs(ge-fe)<Math.abs(me-fe)?ge:me)}function getRefProp(fe){const K=React$4.version;return typeof React$4.version!="string"||K.startsWith("18.")?fe?.ref:fe?.props?.ref}function createVarsResolver(fe){return fe}function r$1(fe){var K,me,ge="";if(typeof fe=="string"||typeof fe=="number")ge+=fe;else if(typeof fe=="object")if(Array.isArray(fe)){var xe=fe.length;for(K=0;K<xe;K++)fe[K]&&(me=r$1(fe[K]))&&(ge&&(ge+=" "),ge+=me)}else for(me in fe)fe[me]&&(ge&&(ge+=" "),ge+=me);return ge}function clsx(){for(var fe,K,me=0,ge="",xe=arguments.length;me<xe;me++)(fe=arguments[me])&&(K=r$1(fe))&&(ge&&(ge+=" "),ge+=K);return ge}const EMPTY_CLASS_NAMES={};function mergeClassNames(fe){const K={};return fe.forEach(me=>{Object.entries(me).forEach(([ge,xe])=>{K[ge]?K[ge]=clsx(K[ge],xe):K[ge]=xe})}),K}function resolveClassNames({theme:fe,classNames:K,props:me,stylesCtx:ge}){const ye=(Array.isArray(K)?K:[K]).map(ve=>typeof ve=="function"?ve(fe,me,ge):ve||EMPTY_CLASS_NAMES);return mergeClassNames(ye)}function resolveStyles({theme:fe,styles:K,props:me,stylesCtx:ge}){return(Array.isArray(K)?K:[K]).reduce((ye,ve)=>typeof ve=="function"?{...ye,...ve(fe,me,ge)}:{...ye,...ve},{})}const MantineContext=reactExports.createContext(null);function useMantineContext(){const fe=reactExports.useContext(MantineContext);if(!fe)throw new Error("[@mantine/core] MantineProvider was not found in tree");return fe}function useMantineCssVariablesResolver(){return useMantineContext().cssVariablesResolver}function useMantineClassNamesPrefix(){return useMantineContext().classNamesPrefix}function useMantineStyleNonce(){return useMantineContext().getStyleNonce}function useMantineWithStaticClasses(){return useMantineContext().withStaticClasses}function useMantineIsHeadless(){return useMantineContext().headless}function useMantineSxTransform(){return useMantineContext().stylesTransform?.sx}function useMantineStylesTransform(){return useMantineContext().stylesTransform?.styles}function useMantineEnv(){return useMantineContext().env||"default"}function isHexColor(fe){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(fe)}function hexToRgba$1(fe){let K=fe.replace("#","");if(K.length===3){const ve=K.split("");K=[ve[0],ve[0],ve[1],ve[1],ve[2],ve[2]].join("")}if(K.length===8){const ve=parseInt(K.slice(6,8),16)/255;return{r:parseInt(K.slice(0,2),16),g:parseInt(K.slice(2,4),16),b:parseInt(K.slice(4,6),16),a:ve}}const me=parseInt(K,16),ge=me>>16&255,xe=me>>8&255,ye=me&255;return{r:ge,g:xe,b:ye,a:1}}function rgbStringToRgba(fe){const[K,me,ge,xe]=fe.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:K,g:me,b:ge,a:xe||1}}function hslStringToRgba(fe){const K=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,me=fe.match(K);if(!me)return{r:0,g:0,b:0,a:1};const ge=parseInt(me[1],10),xe=parseInt(me[2],10)/100,ye=parseInt(me[3],10)/100,ve=me[5]?parseFloat(me[5]):void 0,_e=(1-Math.abs(2*ye-1))*xe,Ee=ge/60,be=_e*(1-Math.abs(Ee%2-1)),Ae=ye-_e/2;let Se,Ce,Te;return Ee>=0&&Ee<1?(Se=_e,Ce=be,Te=0):Ee>=1&&Ee<2?(Se=be,Ce=_e,Te=0):Ee>=2&&Ee<3?(Se=0,Ce=_e,Te=be):Ee>=3&&Ee<4?(Se=0,Ce=be,Te=_e):Ee>=4&&Ee<5?(Se=be,Ce=0,Te=_e):(Se=_e,Ce=0,Te=be),{r:Math.round((Se+Ae)*255),g:Math.round((Ce+Ae)*255),b:Math.round((Te+Ae)*255),a:ve||1}}function toRgba(fe){return isHexColor(fe)?hexToRgba$1(fe):fe.startsWith("rgb")?rgbStringToRgba(fe):fe.startsWith("hsl")?hslStringToRgba(fe):{r:0,g:0,b:0,a:1}}function darken(fe,K){if(fe.startsWith("var("))return`color-mix(in srgb, ${fe}, black ${K*100}%)`;const{r:me,g:ge,b:xe,a:ye}=toRgba(fe),ve=1-K,_e=Ee=>Math.round(Ee*ve);return`rgba(${_e(me)}, ${_e(ge)}, ${_e(xe)}, ${ye})`}function getPrimaryShade(fe,K){return typeof fe.primaryShade=="number"?fe.primaryShade:K==="dark"?fe.primaryShade.dark:fe.primaryShade.light}function gammaCorrect(fe){return fe<=.03928?fe/12.92:((fe+.055)/1.055)**2.4}function getLightnessFromOklch(fe){const K=fe.match(/oklch\((.*?)%\s/);return K?parseFloat(K[1]):null}function luminance(fe){if(fe.startsWith("oklch("))return(getLightnessFromOklch(fe)||0)/100;const{r:K,g:me,b:ge}=toRgba(fe),xe=K/255,ye=me/255,ve=ge/255,_e=gammaCorrect(xe),Ee=gammaCorrect(ye),be=gammaCorrect(ve);return .2126*_e+.7152*Ee+.0722*be}function isLightColor(fe,K=.179){return fe.startsWith("var(")?!1:luminance(fe)>K}function parseThemeColor({color:fe,theme:K,colorScheme:me}){if(typeof fe!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof fe}`);if(fe==="bright")return{color:fe,value:me==="dark"?K.white:K.black,shade:void 0,isThemeColor:!1,isLight:isLightColor(me==="dark"?K.white:K.black,K.luminanceThreshold),variable:"--mantine-color-bright"};if(fe==="dimmed")return{color:fe,value:me==="dark"?K.colors.dark[2]:K.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:isLightColor(me==="dark"?K.colors.dark[2]:K.colors.gray[6],K.luminanceThreshold),variable:"--mantine-color-dimmed"};if(fe==="white"||fe==="black")return{color:fe,value:fe==="white"?K.white:K.black,shade:void 0,isThemeColor:!1,isLight:isLightColor(fe==="white"?K.white:K.black,K.luminanceThreshold),variable:`--mantine-color-${fe}`};const[ge,xe]=fe.split("."),ye=xe?Number(xe):void 0,ve=ge in K.colors;if(ve){const _e=ye!==void 0?K.colors[ge][ye]:K.colors[ge][getPrimaryShade(K,me||"light")];return{color:ge,value:_e,shade:ye,isThemeColor:ve,isLight:isLightColor(_e,K.luminanceThreshold),variable:xe?`--mantine-color-${ge}-${ye}`:`--mantine-color-${ge}-filled`}}return{color:fe,value:fe,isThemeColor:ve,isLight:isLightColor(fe,K.luminanceThreshold),shade:ye,variable:void 0}}function getThemeColor(fe,K){const me=parseThemeColor({color:fe||K.primaryColor,theme:K});return me.variable?`var(${me.variable})`:fe}function getGradient(fe,K){const me={from:fe?.from||K.defaultGradient.from,to:fe?.to||K.defaultGradient.to,deg:fe?.deg??K.defaultGradient.deg??0},ge=getThemeColor(me.from,K),xe=getThemeColor(me.to,K);return`linear-gradient(${me.deg}deg, ${ge} 0%, ${xe} 100%)`}function rgba$1(fe,K){if(typeof fe!="string"||K>1||K<0)return"rgba(0, 0, 0, 1)";if(fe.startsWith("var(")){const ye=(1-K)*100;return`color-mix(in srgb, ${fe}, transparent ${ye}%)`}if(fe.startsWith("oklch"))return fe.includes("/")?fe.replace(/\/\s*[\d.]+\s*\)/,`/ ${K})`):fe.replace(")",` / ${K})`);const{r:me,g:ge,b:xe}=toRgba(fe);return`rgba(${me}, ${ge}, ${xe}, ${K})`}const alpha=rgba$1,defaultVariantColorsResolver=({color:fe,theme:K,variant:me,gradient:ge,autoContrast:xe})=>{const ye=parseThemeColor({color:fe,theme:K}),ve=typeof xe=="boolean"?xe:K.autoContrast;if(me==="filled"){const _e=ve&&ye.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return ye.isThemeColor?ye.shade===void 0?{background:`var(--mantine-color-${fe}-filled)`,hover:`var(--mantine-color-${fe}-filled-hover)`,color:_e,border:`${rem(1)} solid transparent`}:{background:`var(--mantine-color-${ye.color}-${ye.shade})`,hover:`var(--mantine-color-${ye.color}-${ye.shade===9?8:ye.shade+1})`,color:_e,border:`${rem(1)} solid transparent`}:{background:fe,hover:darken(fe,.1),color:_e,border:`${rem(1)} solid transparent`}}if(me==="light"){if(ye.isThemeColor){if(ye.shade===void 0)return{background:`var(--mantine-color-${fe}-light)`,hover:`var(--mantine-color-${fe}-light-hover)`,color:`var(--mantine-color-${fe}-light-color)`,border:`${rem(1)} solid transparent`};const _e=K.colors[ye.color][ye.shade];return{background:rgba$1(_e,.1),hover:rgba$1(_e,.12),color:`var(--mantine-color-${ye.color}-${Math.min(ye.shade,6)})`,border:`${rem(1)} solid transparent`}}return{background:rgba$1(fe,.1),hover:rgba$1(fe,.12),color:fe,border:`${rem(1)} solid transparent`}}if(me==="outline")return ye.isThemeColor?ye.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${fe}-outline-hover)`,color:`var(--mantine-color-${fe}-outline)`,border:`${rem(1)} solid var(--mantine-color-${fe}-outline)`}:{background:"transparent",hover:rgba$1(K.colors[ye.color][ye.shade],.05),color:`var(--mantine-color-${ye.color}-${ye.shade})`,border:`${rem(1)} solid var(--mantine-color-${ye.color}-${ye.shade})`}:{background:"transparent",hover:rgba$1(fe,.05),color:fe,border:`${rem(1)} solid ${fe}`};if(me==="subtle"){if(ye.isThemeColor){if(ye.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${fe}-light-hover)`,color:`var(--mantine-color-${fe}-light-color)`,border:`${rem(1)} solid transparent`};const _e=K.colors[ye.color][ye.shade];return{background:"transparent",hover:rgba$1(_e,.12),color:`var(--mantine-color-${ye.color}-${Math.min(ye.shade,6)})`,border:`${rem(1)} solid transparent`}}return{background:"transparent",hover:rgba$1(fe,.12),color:fe,border:`${rem(1)} solid transparent`}}return me==="transparent"?ye.isThemeColor?ye.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${fe}-light-color)`,border:`${rem(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${ye.color}-${Math.min(ye.shade,6)})`,border:`${rem(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:fe,border:`${rem(1)} solid transparent`}:me==="white"?ye.isThemeColor?ye.shade===void 0?{background:"var(--mantine-color-white)",hover:darken(K.white,.01),color:`var(--mantine-color-${fe}-filled)`,border:`${rem(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:darken(K.white,.01),color:`var(--mantine-color-${ye.color}-${ye.shade})`,border:`${rem(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:darken(K.white,.01),color:fe,border:`${rem(1)} solid transparent`}:me==="gradient"?{background:getGradient(ge,K),hover:getGradient(ge,K),color:"var(--mantine-color-white)",border:"none"}:me==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${rem(1)} solid var(--mantine-color-default-border)`}:{}},DEFAULT_COLORS={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},DEFAULT_FONT_FAMILY="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",DEFAULT_THEME={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:DEFAULT_COLORS,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:defaultVariantColorsResolver,autoContrast:!1,luminanceThreshold:.3,fontFamily:DEFAULT_FONT_FAMILY,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:DEFAULT_FONT_FAMILY,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:rem(34),lineHeight:"1.3"},h2:{fontSize:rem(26),lineHeight:"1.35"},h3:{fontSize:rem(22),lineHeight:"1.4"},h4:{fontSize:rem(18),lineHeight:"1.45"},h5:{fontSize:rem(16),lineHeight:"1.5"},h6:{fontSize:rem(14),lineHeight:"1.5"}}},fontSizes:{xs:rem(12),sm:rem(14),md:rem(16),lg:rem(18),xl:rem(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:rem(2),sm:rem(4),md:rem(8),lg:rem(16),xl:rem(32)},spacing:{xs:rem(10),sm:rem(12),md:rem(16),lg:rem(20),xl:rem(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), 0 ${rem(1)} ${rem(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${rem(10)} ${rem(15)} ${rem(-5)}, rgba(0, 0, 0, 0.04) 0 ${rem(7)} ${rem(7)} ${rem(-5)}`,md:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${rem(20)} ${rem(25)} ${rem(-5)}, rgba(0, 0, 0, 0.04) 0 ${rem(10)} ${rem(10)} ${rem(-5)}`,lg:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${rem(28)} ${rem(23)} ${rem(-7)}, rgba(0, 0, 0, 0.04) 0 ${rem(12)} ${rem(12)} ${rem(-7)}`,xl:`0 ${rem(1)} ${rem(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${rem(36)} ${rem(28)} ${rem(-7)}, rgba(0, 0, 0, 0.04) 0 ${rem(17)} ${rem(17)} ${rem(-7)}`},other:{},components:{}};function isMantineColorScheme(fe){return fe==="auto"||fe==="dark"||fe==="light"}function localStorageColorSchemeManager({key:fe="mantine-color-scheme-value"}={}){let K;return{get:me=>{if(typeof window>"u")return me;try{const ge=window.localStorage.getItem(fe);return isMantineColorScheme(ge)?ge:me}catch{return me}},set:me=>{try{window.localStorage.setItem(fe,me)}catch(ge){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",ge)}},subscribe:me=>{K=ge=>{ge.storageArea===window.localStorage&&ge.key===fe&&isMantineColorScheme(ge.newValue)&&me(ge.newValue)},window.addEventListener("storage",K)},unsubscribe:()=>{window.removeEventListener("storage",K)},clear:()=>{window.localStorage.removeItem(fe)}}}const INVALID_PRIMARY_COLOR_ERROR="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more – https://mantine.dev/theming/colors/#primary-color",INVALID_PRIMARY_SHADE_ERROR="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function isValidPrimaryShade(fe){return fe<0||fe>9?!1:parseInt(fe.toString(),10)===fe}function validateMantineTheme(fe){if(!(fe.primaryColor in fe.colors))throw new Error(INVALID_PRIMARY_COLOR_ERROR);if(typeof fe.primaryShade=="object"&&(!isValidPrimaryShade(fe.primaryShade.dark)||!isValidPrimaryShade(fe.primaryShade.light)))throw new Error(INVALID_PRIMARY_SHADE_ERROR);if(typeof fe.primaryShade=="number"&&!isValidPrimaryShade(fe.primaryShade))throw new Error(INVALID_PRIMARY_SHADE_ERROR)}function mergeMantineTheme(fe,K){if(!K)return validateMantineTheme(fe),fe;const me=deepMerge(fe,K);return K.fontFamily&&!K.headings?.fontFamily&&(me.headings.fontFamily=K.fontFamily),validateMantineTheme(me),me}const MantineThemeContext=reactExports.createContext(null),useSafeMantineTheme=()=>reactExports.useContext(MantineThemeContext)||DEFAULT_THEME;function useMantineTheme(){const fe=reactExports.useContext(MantineThemeContext);if(!fe)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return fe}function MantineThemeProvider({theme:fe,children:K,inherit:me=!0}){const ge=useSafeMantineTheme(),xe=reactExports.useMemo(()=>mergeMantineTheme(me?ge:DEFAULT_THEME,fe),[fe,ge,me]);return jsxRuntimeExports.jsx(MantineThemeContext.Provider,{value:xe,children:K})}MantineThemeProvider.displayName="@mantine/core/MantineThemeProvider";function MantineClasses(){const fe=useMantineTheme(),K=useMantineStyleNonce(),me=keys$1(fe.breakpoints).reduce((ge,xe)=>{const ye=fe.breakpoints[xe].includes("px"),ve=px$1(fe.breakpoints[xe]),_e=ye?`${ve-.1}px`:em(ve-.1),Ee=ye?`${ve}px`:em(ve);return`${ge}@media (max-width: ${_e}) {.mantine-visible-from-${xe} {display: none !important;}}@media (min-width: ${Ee}) {.mantine-hidden-from-${xe} {display: none !important;}}`},"");return jsxRuntimeExports.jsx("style",{"data-mantine-styles":"classes",nonce:K?.(),dangerouslySetInnerHTML:{__html:me}})}function cssVariablesObjectToString(fe){return Object.entries(fe).map(([K,me])=>`${K}: ${me};`).join("")}function wrapWithSelector(fe,K){return(Array.isArray(fe)?fe:[fe]).reduce((ge,xe)=>`${xe}{${ge}}`,K)}function convertCssVariables(fe,K){const me=cssVariablesObjectToString(fe.variables),ge=me?wrapWithSelector(K,me):"",xe=cssVariablesObjectToString(fe.dark),ye=cssVariablesObjectToString(fe.light),ve=xe?wrapWithSelector(K===":host"?`${K}([data-mantine-color-scheme="dark"])`:`${K}[data-mantine-color-scheme="dark"]`,xe):"",_e=ye?wrapWithSelector(K===":host"?`${K}([data-mantine-color-scheme="light"])`:`${K}[data-mantine-color-scheme="light"]`,ye):"";return`${ge}${ve}${_e}`}function getContrastColor({color:fe,theme:K,autoContrast:me}){return(typeof me=="boolean"?me:K.autoContrast)&&parseThemeColor({color:fe||K.primaryColor,theme:K}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function getPrimaryContrastColor(fe,K){return getContrastColor({color:fe.colors[fe.primaryColor][getPrimaryShade(fe,K)],theme:fe,autoContrast:null})}function getCSSColorVariables({theme:fe,color:K,colorScheme:me,name:ge=K,withColorValues:xe=!0}){if(!fe.colors[K])return{};if(me==="light"){const _e=getPrimaryShade(fe,"light"),Ee={[`--mantine-color-${ge}-text`]:`var(--mantine-color-${ge}-filled)`,[`--mantine-color-${ge}-filled`]:`var(--mantine-color-${ge}-${_e})`,[`--mantine-color-${ge}-filled-hover`]:`var(--mantine-color-${ge}-${_e===9?8:_e+1})`,[`--mantine-color-${ge}-light`]:alpha(fe.colors[K][_e],.1),[`--mantine-color-${ge}-light-hover`]:alpha(fe.colors[K][_e],.12),[`--mantine-color-${ge}-light-color`]:`var(--mantine-color-${ge}-${_e})`,[`--mantine-color-${ge}-outline`]:`var(--mantine-color-${ge}-${_e})`,[`--mantine-color-${ge}-outline-hover`]:alpha(fe.colors[K][_e],.05)};return xe?{[`--mantine-color-${ge}-0`]:fe.colors[K][0],[`--mantine-color-${ge}-1`]:fe.colors[K][1],[`--mantine-color-${ge}-2`]:fe.colors[K][2],[`--mantine-color-${ge}-3`]:fe.colors[K][3],[`--mantine-color-${ge}-4`]:fe.colors[K][4],[`--mantine-color-${ge}-5`]:fe.colors[K][5],[`--mantine-color-${ge}-6`]:fe.colors[K][6],[`--mantine-color-${ge}-7`]:fe.colors[K][7],[`--mantine-color-${ge}-8`]:fe.colors[K][8],[`--mantine-color-${ge}-9`]:fe.colors[K][9],...Ee}:Ee}const ye=getPrimaryShade(fe,"dark"),ve={[`--mantine-color-${ge}-text`]:`var(--mantine-color-${ge}-4)`,[`--mantine-color-${ge}-filled`]:`var(--mantine-color-${ge}-${ye})`,[`--mantine-color-${ge}-filled-hover`]:`var(--mantine-color-${ge}-${ye===9?8:ye+1})`,[`--mantine-color-${ge}-light`]:alpha(fe.colors[K][Math.max(0,ye-2)],.15),[`--mantine-color-${ge}-light-hover`]:alpha(fe.colors[K][Math.max(0,ye-2)],.2),[`--mantine-color-${ge}-light-color`]:`var(--mantine-color-${ge}-${Math.max(ye-5,0)})`,[`--mantine-color-${ge}-outline`]:`var(--mantine-color-${ge}-${Math.max(ye-4,0)})`,[`--mantine-color-${ge}-outline-hover`]:alpha(fe.colors[K][Math.max(ye-4,0)],.05)};return xe?{[`--mantine-color-${ge}-0`]:fe.colors[K][0],[`--mantine-color-${ge}-1`]:fe.colors[K][1],[`--mantine-color-${ge}-2`]:fe.colors[K][2],[`--mantine-color-${ge}-3`]:fe.colors[K][3],[`--mantine-color-${ge}-4`]:fe.colors[K][4],[`--mantine-color-${ge}-5`]:fe.colors[K][5],[`--mantine-color-${ge}-6`]:fe.colors[K][6],[`--mantine-color-${ge}-7`]:fe.colors[K][7],[`--mantine-color-${ge}-8`]:fe.colors[K][8],[`--mantine-color-${ge}-9`]:fe.colors[K][9],...ve}:ve}function isVirtualColor(fe){return!!fe&&typeof fe=="object"&&"mantine-virtual-color"in fe}function assignSizeVariables(fe,K,me){keys$1(K).forEach(ge=>Object.assign(fe,{[`--mantine-${me}-${ge}`]:K[ge]}))}const defaultCssVariablesResolver=fe=>{const K=getPrimaryShade(fe,"light"),me=fe.defaultRadius in fe.radius?fe.radius[fe.defaultRadius]:rem(fe.defaultRadius),ge={variables:{"--mantine-scale":fe.scale.toString(),"--mantine-cursor-type":fe.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":fe.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":fe.fontSmoothing?"grayscale":"unset","--mantine-color-white":fe.white,"--mantine-color-black":fe.black,"--mantine-line-height":fe.lineHeights.md,"--mantine-font-family":fe.fontFamily,"--mantine-font-family-monospace":fe.fontFamilyMonospace,"--mantine-font-family-headings":fe.headings.fontFamily,"--mantine-heading-font-weight":fe.headings.fontWeight,"--mantine-heading-text-wrap":fe.headings.textWrap,"--mantine-radius-default":me,"--mantine-primary-color-filled":`var(--mantine-color-${fe.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${fe.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${fe.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${fe.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${fe.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":getPrimaryContrastColor(fe,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":fe.black,"--mantine-color-body":fe.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${fe.primaryColor}-${K})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":getPrimaryContrastColor(fe,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${fe.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};assignSizeVariables(ge.variables,fe.breakpoints,"breakpoint"),assignSizeVariables(ge.variables,fe.spacing,"spacing"),assignSizeVariables(ge.variables,fe.fontSizes,"font-size"),assignSizeVariables(ge.variables,fe.lineHeights,"line-height"),assignSizeVariables(ge.variables,fe.shadows,"shadow"),assignSizeVariables(ge.variables,fe.radius,"radius"),fe.colors[fe.primaryColor].forEach((ye,ve)=>{ge.variables[`--mantine-primary-color-${ve}`]=`var(--mantine-color-${fe.primaryColor}-${ve})`}),keys$1(fe.colors).forEach(ye=>{const ve=fe.colors[ye];if(isVirtualColor(ve)){Object.assign(ge.light,getCSSColorVariables({theme:fe,name:ve.name,color:ve.light,colorScheme:"light",withColorValues:!0})),Object.assign(ge.dark,getCSSColorVariables({theme:fe,name:ve.name,color:ve.dark,colorScheme:"dark",withColorValues:!0}));return}ve.forEach((_e,Ee)=>{ge.variables[`--mantine-color-${ye}-${Ee}`]=_e}),Object.assign(ge.light,getCSSColorVariables({theme:fe,color:ye,colorScheme:"light",withColorValues:!1})),Object.assign(ge.dark,getCSSColorVariables({theme:fe,color:ye,colorScheme:"dark",withColorValues:!1}))});const xe=fe.headings.sizes;return keys$1(xe).forEach(ye=>{ge.variables[`--mantine-${ye}-font-size`]=xe[ye].fontSize,ge.variables[`--mantine-${ye}-line-height`]=xe[ye].lineHeight,ge.variables[`--mantine-${ye}-font-weight`]=xe[ye].fontWeight||fe.headings.fontWeight}),ge};function getMergedVariables({theme:fe,generator:K}){const me=defaultCssVariablesResolver(fe),ge=K?.(fe);return ge?deepMerge(me,ge):me}const defaultCssVariables=defaultCssVariablesResolver(DEFAULT_THEME);function removeDefaultVariables(fe){const K={variables:{},light:{},dark:{}};return keys$1(fe.variables).forEach(me=>{defaultCssVariables.variables[me]!==fe.variables[me]&&(K.variables[me]=fe.variables[me])}),keys$1(fe.light).forEach(me=>{defaultCssVariables.light[me]!==fe.light[me]&&(K.light[me]=fe.light[me])}),keys$1(fe.dark).forEach(me=>{defaultCssVariables.dark[me]!==fe.dark[me]&&(K.dark[me]=fe.dark[me])}),K}function getColorSchemeCssVariables(fe){return`
  ${fe}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${fe}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function MantineCssVariables({cssVariablesSelector:fe,deduplicateCssVariables:K}){const me=useMantineTheme(),ge=useMantineStyleNonce(),xe=useMantineCssVariablesResolver(),ye=getMergedVariables({theme:me,generator:xe}),ve=fe===":root"&&K,_e=ve?removeDefaultVariables(ye):ye,Ee=convertCssVariables(_e,fe);return Ee?jsxRuntimeExports.jsx("style",{"data-mantine-styles":!0,nonce:ge?.(),dangerouslySetInnerHTML:{__html:`${Ee}${ve?"":getColorSchemeCssVariables(fe)}`}}):null}MantineCssVariables.displayName="@mantine/CssVariables";function suppressNextjsWarning(){const fe=console.error;console.error=(...K)=>{K.length>1&&typeof K[0]=="string"&&K[0].toLowerCase().includes("extra attributes from the server")&&typeof K[1]=="string"&&K[1].toLowerCase().includes("data-mantine-color-scheme")||fe(...K)}}function setColorSchemeAttribute(fe,K){const me=typeof window<"u"&&"matchMedia"in window&&window.matchMedia("(prefers-color-scheme: dark)")?.matches,ge=fe!=="auto"?fe:me?"dark":"light";K()?.setAttribute("data-mantine-color-scheme",ge)}function useProviderColorScheme({manager:fe,defaultColorScheme:K,getRootElement:me,forceColorScheme:ge}){const xe=reactExports.useRef(null),[ye,ve]=reactExports.useState(()=>fe.get(K)),_e=ge||ye,Ee=reactExports.useCallback(Ae=>{ge||(setColorSchemeAttribute(Ae,me),ve(Ae),fe.set(Ae))},[fe.set,_e,ge]),be=reactExports.useCallback(()=>{ve(K),setColorSchemeAttribute(K,me),fe.clear()},[fe.clear,K]);return reactExports.useEffect(()=>(fe.subscribe(Ee),fe.unsubscribe),[fe.subscribe,fe.unsubscribe]),useIsomorphicEffect$1(()=>{setColorSchemeAttribute(fe.get(K),me)},[]),reactExports.useEffect(()=>{if(ge)return setColorSchemeAttribute(ge,me),()=>{};ge===void 0&&setColorSchemeAttribute(ye,me),typeof window<"u"&&"matchMedia"in window&&(xe.current=window.matchMedia("(prefers-color-scheme: dark)"));const Ae=Se=>{ye==="auto"&&setColorSchemeAttribute(Se.matches?"dark":"light",me)};return xe.current?.addEventListener("change",Ae),()=>xe.current?.removeEventListener("change",Ae)},[ye,ge]),{colorScheme:_e,setColorScheme:Ee,clearColorScheme:be}}function useRespectReduceMotion({respectReducedMotion:fe,getRootElement:K}){useIsomorphicEffect$1(()=>{fe&&K()?.setAttribute("data-respect-reduced-motion","true")},[fe])}suppressNextjsWarning();function MantineProvider({theme:fe,children:K,getStyleNonce:me,withStaticClasses:ge=!0,withGlobalClasses:xe=!0,deduplicateCssVariables:ye=!0,withCssVariables:ve=!0,cssVariablesSelector:_e=":root",classNamesPrefix:Ee="mantine",colorSchemeManager:be=localStorageColorSchemeManager(),defaultColorScheme:Ae="light",getRootElement:Se=()=>document.documentElement,cssVariablesResolver:Ce,forceColorScheme:Te,stylesTransform:Re,env:De}){const{colorScheme:Ie,setColorScheme:Be,clearColorScheme:Le}=useProviderColorScheme({defaultColorScheme:Ae,forceColorScheme:Te,manager:be,getRootElement:Se});return useRespectReduceMotion({respectReducedMotion:fe?.respectReducedMotion||!1,getRootElement:Se}),jsxRuntimeExports.jsx(MantineContext.Provider,{value:{colorScheme:Ie,setColorScheme:Be,clearColorScheme:Le,getRootElement:Se,classNamesPrefix:Ee,getStyleNonce:me,cssVariablesResolver:Ce,cssVariablesSelector:_e,withStaticClasses:ge,stylesTransform:Re,env:De},children:jsxRuntimeExports.jsxs(MantineThemeProvider,{theme:fe,children:[ve&&jsxRuntimeExports.jsx(MantineCssVariables,{cssVariablesSelector:_e,deduplicateCssVariables:ye}),xe&&jsxRuntimeExports.jsx(MantineClasses,{}),K]})})}MantineProvider.displayName="@mantine/core/MantineProvider";function useResolvedStylesApi({classNames:fe,styles:K,props:me,stylesCtx:ge}){const xe=useMantineTheme();return{resolvedClassNames:resolveClassNames({theme:xe,classNames:fe,props:me,stylesCtx:ge||void 0}),resolvedStyles:resolveStyles({theme:xe,styles:K,props:me,stylesCtx:ge||void 0})}}const FOCUS_CLASS_NAMES={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function getGlobalClassNames({theme:fe,options:K,unstyled:me}){return clsx(K?.focusable&&!me&&(fe.focusClassName||FOCUS_CLASS_NAMES[fe.focusRing]),K?.active&&!me&&fe.activeClassName)}function getOptionsClassNames({selector:fe,stylesCtx:K,options:me,props:ge,theme:xe}){return resolveClassNames({theme:xe,classNames:me?.classNames,props:me?.props||ge,stylesCtx:K})[fe]}function getResolvedClassNames({selector:fe,stylesCtx:K,theme:me,classNames:ge,props:xe}){return resolveClassNames({theme:me,classNames:ge,props:xe,stylesCtx:K})[fe]}function getRootClassName({rootSelector:fe,selector:K,className:me}){return fe===K?me:void 0}function getSelectorClassName({selector:fe,classes:K,unstyled:me}){return me?void 0:K[fe]}function getStaticClassNames({themeName:fe,classNamesPrefix:K,selector:me,withStaticClass:ge}){return ge===!1?[]:fe.map(xe=>`${K}-${xe}-${me}`)}function getThemeClassNames({themeName:fe,theme:K,selector:me,props:ge,stylesCtx:xe}){return fe.map(ye=>resolveClassNames({theme:K,classNames:K.components[ye]?.classNames,props:ge,stylesCtx:xe})?.[me])}function getVariantClassName({options:fe,classes:K,selector:me,unstyled:ge}){return fe?.variant&&!ge?K[`${me}--${fe.variant}`]:void 0}function getClassName({theme:fe,options:K,themeName:me,selector:ge,classNamesPrefix:xe,classNames:ye,classes:ve,unstyled:_e,className:Ee,rootSelector:be,props:Ae,stylesCtx:Se,withStaticClasses:Ce,headless:Te,transformedStyles:Re}){return clsx(getGlobalClassNames({theme:fe,options:K,unstyled:_e||Te}),getThemeClassNames({theme:fe,themeName:me,selector:ge,props:Ae,stylesCtx:Se}),getVariantClassName({options:K,classes:ve,selector:ge,unstyled:_e}),getResolvedClassNames({selector:ge,stylesCtx:Se,theme:fe,classNames:ye,props:Ae}),getResolvedClassNames({selector:ge,stylesCtx:Se,theme:fe,classNames:Re,props:Ae}),getOptionsClassNames({selector:ge,stylesCtx:Se,options:K,props:Ae,theme:fe}),getRootClassName({rootSelector:be,selector:ge,className:Ee}),getSelectorClassName({selector:ge,classes:ve,unstyled:_e||Te}),Ce&&!Te&&getStaticClassNames({themeName:me,classNamesPrefix:xe,selector:ge,withStaticClass:K?.withStaticClass}),K?.className)}function getThemeStyles({theme:fe,themeName:K,props:me,stylesCtx:ge,selector:xe}){return K.map(ye=>resolveStyles({theme:fe,styles:fe.components[ye]?.styles,props:me,stylesCtx:ge})[xe]).reduce((ye,ve)=>({...ye,...ve}),{})}function resolveStyle({style:fe,theme:K}){return Array.isArray(fe)?[...fe].reduce((me,ge)=>({...me,...resolveStyle({style:ge,theme:K})}),{}):typeof fe=="function"?fe(K):fe??{}}function mergeVars(fe){return fe.reduce((K,me)=>(me&&Object.keys(me).forEach(ge=>{K[ge]={...K[ge],...filterProps(me[ge])}}),K),{})}function resolveVars({vars:fe,varsResolver:K,theme:me,props:ge,stylesCtx:xe,selector:ye,themeName:ve,headless:_e}){return mergeVars([_e?{}:K?.(me,ge,xe),...ve.map(Ee=>me.components?.[Ee]?.vars?.(me,ge,xe)),fe?.(me,ge,xe)])?.[ye]}function getStyle({theme:fe,themeName:K,selector:me,options:ge,props:xe,stylesCtx:ye,rootSelector:ve,styles:_e,style:Ee,vars:be,varsResolver:Ae,headless:Se,withStylesTransform:Ce}){return{...!Ce&&getThemeStyles({theme:fe,themeName:K,props:xe,stylesCtx:ye,selector:me}),...!Ce&&resolveStyles({theme:fe,styles:_e,props:xe,stylesCtx:ye})[me],...!Ce&&resolveStyles({theme:fe,styles:ge?.styles,props:ge?.props||xe,stylesCtx:ye})[me],...resolveVars({theme:fe,props:xe,stylesCtx:ye,vars:be,varsResolver:Ae,selector:me,themeName:K,headless:Se}),...ve===me?resolveStyle({style:Ee,theme:fe}):null,...resolveStyle({style:ge?.style,theme:fe})}}function useStylesTransform({props:fe,stylesCtx:K,themeName:me}){const ge=useMantineTheme(),xe=useMantineStylesTransform()?.();return{getTransformedStyles:ve=>xe?[...ve.map(Ee=>xe(Ee,{props:fe,theme:ge,ctx:K})),...me.map(Ee=>xe(ge.components[Ee]?.styles,{props:fe,theme:ge,ctx:K}))].filter(Boolean):[],withStylesTransform:!!xe}}function useStyles({name:fe,classes:K,props:me,stylesCtx:ge,className:xe,style:ye,rootSelector:ve="root",unstyled:_e,classNames:Ee,styles:be,vars:Ae,varsResolver:Se}){const Ce=useMantineTheme(),Te=useMantineClassNamesPrefix(),Re=useMantineWithStaticClasses(),De=useMantineIsHeadless(),Ie=(Array.isArray(fe)?fe:[fe]).filter(Oe=>Oe),{withStylesTransform:Be,getTransformedStyles:Le}=useStylesTransform({props:me,stylesCtx:ge,themeName:Ie});return(Oe,Fe)=>({className:getClassName({theme:Ce,options:Fe,themeName:Ie,selector:Oe,classNamesPrefix:Te,classNames:Ee,classes:K,unstyled:_e,className:xe,rootSelector:ve,props:me,stylesCtx:ge,withStaticClasses:Re,headless:De,transformedStyles:Le([Fe?.styles,be])}),style:getStyle({theme:Ce,themeName:Ie,selector:Oe,options:Fe,props:me,stylesCtx:ge,rootSelector:ve,styles:be,style:ye,vars:Ae,varsResolver:Se,headless:De,withStylesTransform:Be})})}function getAutoContrastValue(fe,K){return typeof fe=="boolean"?fe:K.autoContrast}function disableTransition(fe){const K=document.createElement("style");return K.setAttribute("data-mantine-styles","inline"),K.innerHTML="*, *::before, *::after {transition: none !important;}",K.setAttribute("data-mantine-disable-transition","true"),fe&&K.setAttribute("nonce",fe),document.head.appendChild(K),()=>document.querySelectorAll("[data-mantine-disable-transition]").forEach(ge=>ge.remove())}function useMantineColorScheme({keepTransitions:fe}={}){const K=reactExports.useRef(noop$2),me=reactExports.useRef(-1),ge=reactExports.useContext(MantineContext),xe=useMantineStyleNonce(),ye=reactExports.useRef(xe?.());if(!ge)throw new Error("[@mantine/core] MantineProvider was not found in tree");const ve=Se=>{ge.setColorScheme(Se),K.current=fe?()=>{}:disableTransition(ye.current),window.clearTimeout(me.current),me.current=window.setTimeout(()=>{K.current?.()},10)},_e=()=>{ge.clearColorScheme(),K.current=fe?()=>{}:disableTransition(ye.current),window.clearTimeout(me.current),me.current=window.setTimeout(()=>{K.current?.()},10)},Ee=useColorScheme("light",{getInitialValueInEffect:!1}),be=ge.colorScheme==="auto"?Ee:ge.colorScheme,Ae=reactExports.useCallback(()=>ve(be==="light"?"dark":"light"),[ve,be]);return reactExports.useEffect(()=>()=>{K.current?.(),window.clearTimeout(me.current)},[]),{colorScheme:ge.colorScheme,setColorScheme:ve,clearColorScheme:_e,toggleColorScheme:Ae}}const getScript=({defaultColorScheme:fe,localStorageKey:K,forceColorScheme:me})=>me?`document.documentElement.setAttribute("data-mantine-color-scheme", '${me}');`:`try {
  var _colorScheme = window.localStorage.getItem("${K}");
  var colorScheme = _colorScheme === "light" || _colorScheme === "dark" || _colorScheme === "auto" ? _colorScheme : "${fe}";
  var computedColorScheme = colorScheme !== "auto" ? colorScheme : window.matchMedia("(prefers-color-scheme: dark)").matches ? "dark" : "light";
  document.documentElement.setAttribute("data-mantine-color-scheme", computedColorScheme);
} catch (e) {}
`;function ColorSchemeScript({defaultColorScheme:fe="light",localStorageKey:K="mantine-color-scheme-value",forceColorScheme:me,...ge}){const xe=["light","dark","auto"].includes(fe)?fe:"light";return jsxRuntimeExports.jsx("script",{...ge,"data-mantine-script":!0,dangerouslySetInnerHTML:{__html:getScript({defaultColorScheme:xe,localStorageKey:K,forceColorScheme:me})}})}function useProps(fe,K,me){const ge=useMantineTheme(),xe=ge.components[fe]?.defaultProps,ye=typeof xe=="function"?xe(ge):xe;return{...K,...ye,...filterProps(me)}}function createTheme(fe){return fe}function cssObjectToString(fe){return keys$1(fe).reduce((K,me)=>fe[me]!==void 0?`${K}${camelToKebabCase(me)}:${fe[me]};`:K,"").trim()}function stylesToString({selector:fe,styles:K,media:me,container:ge}){const xe=K?cssObjectToString(K):"",ye=Array.isArray(me)?me.map(_e=>`@media${_e.query}{${fe}{${cssObjectToString(_e.styles)}}}`):[],ve=Array.isArray(ge)?ge.map(_e=>`@container ${_e.query}{${fe}{${cssObjectToString(_e.styles)}}}`):[];return`${xe?`${fe}{${xe}}`:""}${ye.join("")}${ve.join("")}`.trim()}function InlineStyles(fe){const K=useMantineStyleNonce();return jsxRuntimeExports.jsx("style",{"data-mantine-styles":"inline",nonce:K?.(),dangerouslySetInnerHTML:{__html:stylesToString(fe)}})}function extractStyleProps(fe){const{m:K,mx:me,my:ge,mt:xe,mb:ye,ml:ve,mr:_e,me:Ee,ms:be,p:Ae,px:Se,py:Ce,pt:Te,pb:Re,pl:De,pr:Ie,pe:Be,ps:Le,bd:Oe,bg:Fe,c:Ue,opacity:Ne,ff:He,fz:ze,fw:je,lts:Ge,ta:Xe,lh:qe,fs:Qe,tt:nt,td:Nt,w:Ye,miw:at,maw:rt,h:Ft,mih:Je,mah:Wt,bgsz:Kt,bgp:Pt,bgr:Yt,bga:Gt,pos:an,top:pn,left:En,bottom:$n,right:Un,inset:kn,display:bn,flex:Mn,hiddenFrom:zt,visibleFrom:Dn,lightHidden:hn,darkHidden:mn,sx:dn,...Hn}=fe;return{styleProps:filterProps({m:K,mx:me,my:ge,mt:xe,mb:ye,ml:ve,mr:_e,me:Ee,ms:be,p:Ae,px:Se,py:Ce,pt:Te,pb:Re,pl:De,pr:Ie,pe:Be,ps:Le,bd:Oe,bg:Fe,c:Ue,opacity:Ne,ff:He,fz:ze,fw:je,lts:Ge,ta:Xe,lh:qe,fs:Qe,tt:nt,td:Nt,w:Ye,miw:at,maw:rt,h:Ft,mih:Je,mah:Wt,bgsz:Kt,bgp:Pt,bgr:Yt,bga:Gt,pos:an,top:pn,left:En,bottom:$n,right:Un,inset:kn,display:bn,flex:Mn,hiddenFrom:zt,visibleFrom:Dn,lightHidden:hn,darkHidden:mn,sx:dn}),rest:Hn}}const STYlE_PROPS_DATA={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"size",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function colorResolver(fe,K){const me=parseThemeColor({color:fe,theme:K});return me.color==="dimmed"?"var(--mantine-color-dimmed)":me.color==="bright"?"var(--mantine-color-bright)":me.variable?`var(${me.variable})`:me.color}function textColorResolver(fe,K){const me=parseThemeColor({color:fe,theme:K});return me.isThemeColor&&me.shade===void 0?`var(--mantine-color-${me.color}-text)`:colorResolver(fe,K)}function borderResolver(fe,K){if(typeof fe=="number")return rem(fe);if(typeof fe=="string"){const[me,ge,...xe]=fe.split(" ").filter(ve=>ve.trim()!=="");let ye=`${rem(me)}`;return ge&&(ye+=` ${ge}`),xe.length>0&&(ye+=` ${colorResolver(xe.join(" "),K)}`),ye.trim()}return fe}const values={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function fontFamilyResolver(fe){return typeof fe=="string"&&fe in values?values[fe]:fe}const headings$2=["h1","h2","h3","h4","h5","h6"];function fontSizeResolver(fe,K){return typeof fe=="string"&&fe in K.fontSizes?`var(--mantine-font-size-${fe})`:typeof fe=="string"&&headings$2.includes(fe)?`var(--mantine-${fe}-font-size)`:typeof fe=="number"||typeof fe=="string"?rem(fe):fe}function identityResolver(fe){return fe}const headings$1=["h1","h2","h3","h4","h5","h6"];function lineHeightResolver(fe,K){return typeof fe=="string"&&fe in K.lineHeights?`var(--mantine-line-height-${fe})`:typeof fe=="string"&&headings$1.includes(fe)?`var(--mantine-${fe}-line-height)`:fe}function sizeResolver(fe){return typeof fe=="number"?rem(fe):fe}function spacingResolver(fe,K){if(typeof fe=="number")return rem(fe);if(typeof fe=="string"){const me=fe.replace("-","");if(!(me in K.spacing))return rem(fe);const ge=`--mantine-spacing-${me}`;return fe.startsWith("-")?`calc(var(${ge}) * -1)`:`var(${ge})`}return fe}const resolvers={color:colorResolver,textColor:textColorResolver,fontSize:fontSizeResolver,spacing:spacingResolver,identity:identityResolver,size:sizeResolver,lineHeight:lineHeightResolver,fontFamily:fontFamilyResolver,border:borderResolver};function replaceMediaQuery(fe){return fe.replace("(min-width: ","").replace("em)","")}function sortMediaQueries({media:fe,...K}){const ge=Object.keys(fe).sort((xe,ye)=>Number(replaceMediaQuery(xe))-Number(replaceMediaQuery(ye))).map(xe=>({query:xe,styles:fe[xe]}));return{...K,media:ge}}function hasResponsiveStyles(fe){if(typeof fe!="object"||fe===null)return!1;const K=Object.keys(fe);return!(K.length===1&&K[0]==="base")}function getBaseValue(fe){return typeof fe=="object"&&fe!==null?"base"in fe?fe.base:void 0:fe}function getBreakpointKeys(fe){return typeof fe=="object"&&fe!==null?keys$1(fe).filter(K=>K!=="base"):[]}function getBreakpointValue$1(fe,K){return typeof fe=="object"&&fe!==null&&K in fe?fe[K]:fe}function parseStyleProps({styleProps:fe,data:K,theme:me}){return sortMediaQueries(keys$1(fe).reduce((ge,xe)=>{if(xe==="hiddenFrom"||xe==="visibleFrom"||xe==="sx")return ge;const ye=K[xe],ve=Array.isArray(ye.property)?ye.property:[ye.property],_e=getBaseValue(fe[xe]);if(!hasResponsiveStyles(fe[xe]))return ve.forEach(be=>{ge.inlineStyles[be]=resolvers[ye.type](_e,me)}),ge;ge.hasResponsiveStyles=!0;const Ee=getBreakpointKeys(fe[xe]);return ve.forEach(be=>{_e&&(ge.styles[be]=resolvers[ye.type](_e,me)),Ee.forEach(Ae=>{const Se=`(min-width: ${me.breakpoints[Ae]})`;ge.media[Se]={...ge.media[Se],[be]:resolvers[ye.type](getBreakpointValue$1(fe[xe],Ae),me)}})}),ge},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function useRandomClassName(){return`__m__-${reactExports.useId().replace(/:/g,"")}`}function getStyleObject(fe,K){return Array.isArray(fe)?[...fe].reduce((me,ge)=>({...me,...getStyleObject(ge,K)}),{}):typeof fe=="function"?fe(K):fe??{}}function createPolymorphicComponent(fe){return fe}function transformModKey(fe){return fe.startsWith("data-")?fe:`data-${fe}`}function getMod(fe){return Object.keys(fe).reduce((K,me)=>{const ge=fe[me];return ge===void 0||ge===""||ge===!1||ge===null||(K[transformModKey(me)]=fe[me]),K},{})}function getBoxMod(fe){return fe?typeof fe=="string"?{[transformModKey(fe)]:!0}:Array.isArray(fe)?[...fe].reduce((K,me)=>({...K,...getBoxMod(me)}),{}):getMod(fe):null}function mergeStyles(fe,K){return Array.isArray(fe)?[...fe].reduce((me,ge)=>({...me,...mergeStyles(ge,K)}),{}):typeof fe=="function"?fe(K):fe??{}}function getBoxStyle({theme:fe,style:K,vars:me,styleProps:ge}){const xe=mergeStyles(K,fe),ye=mergeStyles(me,fe);return{...xe,...ye,...ge}}const _Box=reactExports.forwardRef(({component:fe,style:K,__vars:me,className:ge,variant:xe,mod:ye,size:ve,hiddenFrom:_e,visibleFrom:Ee,lightHidden:be,darkHidden:Ae,renderRoot:Se,__size:Ce,...Te},Re)=>{const De=useMantineTheme(),Ie=fe||"div",{styleProps:Be,rest:Le}=extractStyleProps(Te),Fe=useMantineSxTransform()?.()?.(Be.sx),Ue=useRandomClassName(),Ne=parseStyleProps({styleProps:Be,theme:De,data:STYlE_PROPS_DATA}),He={ref:Re,style:getBoxStyle({theme:De,style:K,vars:me,styleProps:Ne.inlineStyles}),className:clsx(ge,Fe,{[Ue]:Ne.hasResponsiveStyles,"mantine-light-hidden":be,"mantine-dark-hidden":Ae,[`mantine-hidden-from-${_e}`]:_e,[`mantine-visible-from-${Ee}`]:Ee}),"data-variant":xe,"data-size":isNumberLike(ve)?void 0:ve||void 0,size:Ce,...getBoxMod(ye),...Le};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Ne.hasResponsiveStyles&&jsxRuntimeExports.jsx(InlineStyles,{selector:`.${Ue}`,styles:Ne.styles,media:Ne.media}),typeof Se=="function"?Se(He):jsxRuntimeExports.jsx(Ie,{...He})]})});_Box.displayName="@mantine/core/Box";const Box=_Box;function identity$2(fe){return fe}function factory(fe){const K=reactExports.forwardRef(fe);return K.extend=identity$2,K.withProps=me=>{const ge=reactExports.forwardRef((xe,ye)=>jsxRuntimeExports.jsx(K,{...me,...xe,ref:ye}));return ge.extend=K.extend,ge.displayName=`WithProps(${K.displayName})`,ge},K}function polymorphicFactory(fe){const K=reactExports.forwardRef(fe);return K.withProps=me=>{const ge=reactExports.forwardRef((xe,ye)=>jsxRuntimeExports.jsx(K,{...me,...xe,ref:ye}));return ge.extend=K.extend,ge.displayName=`WithProps(${K.displayName})`,ge},K.extend=identity$2,K}const DirectionContext=reactExports.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function useDirection(){return reactExports.useContext(DirectionContext)}function getAutoHeightDuration(fe){if(!fe||typeof fe=="string")return 0;const K=fe/36;return Math.round((4+15*K**.25+K/5)*10)}function getElementHeight(fe){return fe?.current?fe.current.scrollHeight:"auto"}const raf=typeof window<"u"&&window.requestAnimationFrame;function useCollapse({transitionDuration:fe,transitionTimingFunction:K="ease",onTransitionEnd:me=()=>{},opened:ge}){const xe=reactExports.useRef(null),ye=0,ve={display:"none",height:0,overflow:"hidden"},[_e,Ee]=reactExports.useState(ge?{}:ve),be=Re=>{reactDomExports.flushSync(()=>Ee(Re))},Ae=Re=>{be(De=>({...De,...Re}))};function Se(Re){const De=fe||getAutoHeightDuration(Re);return{transition:`height ${De}ms ${K}, opacity ${De}ms ${K}`}}useDidUpdate(()=>{typeof raf=="function"&&raf(ge?()=>{Ae({willChange:"height",display:"block",overflow:"hidden"}),raf(()=>{const Re=getElementHeight(xe);Ae({...Se(Re),height:Re})})}:()=>{const Re=getElementHeight(xe);Ae({...Se(Re),willChange:"height",height:Re}),raf(()=>Ae({height:ye,overflow:"hidden"}))})},[ge]);const Ce=Re=>{if(!(Re.target!==xe.current||Re.propertyName!=="height"))if(ge){const De=getElementHeight(xe);De===_e.height?be({}):Ae({height:De}),me()}else _e.height===ye&&(be(ve),me())};function Te({style:Re={},refKey:De="ref",...Ie}={}){const Be=Ie[De];return{"aria-hidden":!ge,...Ie,[De]:mergeRefs(xe,Be),onTransitionEnd:Ce,style:{boxSizing:"border-box",...Re,..._e}}}return Te}const defaultProps$1s={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},Collapse=factory((fe,K)=>{const{children:me,in:ge,transitionDuration:xe,transitionTimingFunction:ye,style:ve,onTransitionEnd:_e,animateOpacity:Ee,...be}=useProps("Collapse",defaultProps$1s,fe),Ae=useMantineTheme(),Se=useReducedMotion(),Te=(Ae.respectReducedMotion?Se:!1)?0:xe,Re=useCollapse({opened:ge,transitionDuration:Te,transitionTimingFunction:ye,onTransitionEnd:_e});return Te===0?ge?jsxRuntimeExports.jsx(Box,{...be,children:me}):null:jsxRuntimeExports.jsx(Box,{...Re({style:{opacity:ge||!Ee?1:0,transition:Ee?`opacity ${Te}ms ${ye}`:"none",...getStyleObject(ve,Ae)},ref:K,...be}),children:me})});Collapse.displayName="@mantine/core/Collapse";function hasWindow(){return typeof window<"u"}function getNodeName(fe){return isNode$2(fe)?(fe.nodeName||"").toLowerCase():"#document"}function getWindow(fe){var K;return(fe==null||(K=fe.ownerDocument)==null?void 0:K.defaultView)||window}function getDocumentElement(fe){var K;return(K=(isNode$2(fe)?fe.ownerDocument:fe.document)||window.document)==null?void 0:K.documentElement}function isNode$2(fe){return hasWindow()?fe instanceof Node||fe instanceof getWindow(fe).Node:!1}function isElement(fe){return hasWindow()?fe instanceof Element||fe instanceof getWindow(fe).Element:!1}function isHTMLElement(fe){return hasWindow()?fe instanceof HTMLElement||fe instanceof getWindow(fe).HTMLElement:!1}function isShadowRoot(fe){return!hasWindow()||typeof ShadowRoot>"u"?!1:fe instanceof ShadowRoot||fe instanceof getWindow(fe).ShadowRoot}function isOverflowElement(fe){const{overflow:K,overflowX:me,overflowY:ge,display:xe}=getComputedStyle$1(fe);return/auto|scroll|overlay|hidden|clip/.test(K+ge+me)&&!["inline","contents"].includes(xe)}function isTableElement(fe){return["table","td","th"].includes(getNodeName(fe))}function isTopLayer(fe){return[":popover-open",":modal"].some(K=>{try{return fe.matches(K)}catch{return!1}})}function isContainingBlock(fe){const K=isWebKit(),me=isElement(fe)?getComputedStyle$1(fe):fe;return["transform","translate","scale","rotate","perspective"].some(ge=>me[ge]?me[ge]!=="none":!1)||(me.containerType?me.containerType!=="normal":!1)||!K&&(me.backdropFilter?me.backdropFilter!=="none":!1)||!K&&(me.filter?me.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(ge=>(me.willChange||"").includes(ge))||["paint","layout","strict","content"].some(ge=>(me.contain||"").includes(ge))}function getContainingBlock(fe){let K=getParentNode(fe);for(;isHTMLElement(K)&&!isLastTraversableNode(K);){if(isContainingBlock(K))return K;if(isTopLayer(K))return null;K=getParentNode(K)}return null}function isWebKit(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function isLastTraversableNode(fe){return["html","body","#document"].includes(getNodeName(fe))}function getComputedStyle$1(fe){return getWindow(fe).getComputedStyle(fe)}function getNodeScroll(fe){return isElement(fe)?{scrollLeft:fe.scrollLeft,scrollTop:fe.scrollTop}:{scrollLeft:fe.scrollX,scrollTop:fe.scrollY}}function getParentNode(fe){if(getNodeName(fe)==="html")return fe;const K=fe.assignedSlot||fe.parentNode||isShadowRoot(fe)&&fe.host||getDocumentElement(fe);return isShadowRoot(K)?K.host:K}function getNearestOverflowAncestor(fe){const K=getParentNode(fe);return isLastTraversableNode(K)?fe.ownerDocument?fe.ownerDocument.body:fe.body:isHTMLElement(K)&&isOverflowElement(K)?K:getNearestOverflowAncestor(K)}function getOverflowAncestors(fe,K,me){var ge;K===void 0&&(K=[]),me===void 0&&(me=!0);const xe=getNearestOverflowAncestor(fe),ye=xe===((ge=fe.ownerDocument)==null?void 0:ge.body),ve=getWindow(xe);if(ye){const _e=getFrameElement(ve);return K.concat(ve,ve.visualViewport||[],isOverflowElement(xe)?xe:[],_e&&me?getOverflowAncestors(_e):[])}return K.concat(xe,getOverflowAncestors(xe,[],me))}function getFrameElement(fe){return fe.parent&&Object.getPrototypeOf(fe.parent)?fe.frameElement:null}function activeElement(fe){let K=fe.activeElement;for(;((me=K)==null||(me=me.shadowRoot)==null?void 0:me.activeElement)!=null;){var me;K=K.shadowRoot.activeElement}return K}function contains(fe,K){if(!fe||!K)return!1;const me=K.getRootNode==null?void 0:K.getRootNode();if(fe.contains(K))return!0;if(me&&isShadowRoot(me)){let ge=K;for(;ge;){if(fe===ge)return!0;ge=ge.parentNode||ge.host}}return!1}function getPlatform(){const fe=navigator.userAgentData;return fe!=null&&fe.platform?fe.platform:navigator.platform}function getUserAgent(){const fe=navigator.userAgentData;return fe&&Array.isArray(fe.brands)?fe.brands.map(K=>{let{brand:me,version:ge}=K;return me+"/"+ge}).join(" "):navigator.userAgent}function isVirtualPointerEvent(fe){return isJSDOM()?!1:!isAndroid()&&fe.width===0&&fe.height===0||isAndroid()&&fe.width===1&&fe.height===1&&fe.pressure===0&&fe.detail===0&&fe.pointerType==="mouse"||fe.width<1&&fe.height<1&&fe.pressure===0&&fe.detail===0&&fe.pointerType==="touch"}function isSafari(){return/apple/i.test(navigator.vendor)}function isAndroid(){const fe=/android/i;return fe.test(getPlatform())||fe.test(getUserAgent())}function isMac$1(){return getPlatform().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function isJSDOM(){return getUserAgent().includes("jsdom/")}function isMouseLikePointerType(fe,K){const me=["mouse","pen"];return me.push("",void 0),me.includes(fe)}function isReactEvent(fe){return"nativeEvent"in fe}function isRootElement(fe){return fe.matches("html,body")}function getDocument(fe){return fe?.ownerDocument||document}function isEventTargetWithin(fe,K){if(K==null)return!1;if("composedPath"in fe)return fe.composedPath().includes(K);const me=fe;return me.target!=null&&K.contains(me.target)}function getTarget(fe){return"composedPath"in fe?fe.composedPath()[0]:fe.target}const TYPEABLE_SELECTOR="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function isTypeableElement(fe){return isHTMLElement(fe)&&fe.matches(TYPEABLE_SELECTOR)}const min=Math.min,max$2=Math.max,round$1=Math.round,floor=Math.floor,createCoords=fe=>({x:fe,y:fe}),oppositeSideMap={left:"right",right:"left",bottom:"top",top:"bottom"},oppositeAlignmentMap={start:"end",end:"start"};function clamp$4(fe,K,me){return max$2(fe,min(K,me))}function evaluate$1(fe,K){return typeof fe=="function"?fe(K):fe}function getSide(fe){return fe.split("-")[0]}function getAlignment(fe){return fe.split("-")[1]}function getOppositeAxis(fe){return fe==="x"?"y":"x"}function getAxisLength(fe){return fe==="y"?"height":"width"}function getSideAxis(fe){return["top","bottom"].includes(getSide(fe))?"y":"x"}function getAlignmentAxis(fe){return getOppositeAxis(getSideAxis(fe))}function getAlignmentSides(fe,K,me){me===void 0&&(me=!1);const ge=getAlignment(fe),xe=getAlignmentAxis(fe),ye=getAxisLength(xe);let ve=xe==="x"?ge===(me?"end":"start")?"right":"left":ge==="start"?"bottom":"top";return K.reference[ye]>K.floating[ye]&&(ve=getOppositePlacement(ve)),[ve,getOppositePlacement(ve)]}function getExpandedPlacements(fe){const K=getOppositePlacement(fe);return[getOppositeAlignmentPlacement(fe),K,getOppositeAlignmentPlacement(K)]}function getOppositeAlignmentPlacement(fe){return fe.replace(/start|end/g,K=>oppositeAlignmentMap[K])}function getSideList(fe,K,me){const ge=["left","right"],xe=["right","left"],ye=["top","bottom"],ve=["bottom","top"];switch(fe){case"top":case"bottom":return me?K?xe:ge:K?ge:xe;case"left":case"right":return K?ye:ve;default:return[]}}function getOppositeAxisPlacements(fe,K,me,ge){const xe=getAlignment(fe);let ye=getSideList(getSide(fe),me==="start",ge);return xe&&(ye=ye.map(ve=>ve+"-"+xe),K&&(ye=ye.concat(ye.map(getOppositeAlignmentPlacement)))),ye}function getOppositePlacement(fe){return fe.replace(/left|right|bottom|top/g,K=>oppositeSideMap[K])}function expandPaddingObject(fe){return{top:0,right:0,bottom:0,left:0,...fe}}function getPaddingObject(fe){return typeof fe!="number"?expandPaddingObject(fe):{top:fe,right:fe,bottom:fe,left:fe}}function rectToClientRect(fe){const{x:K,y:me,width:ge,height:xe}=fe;return{width:ge,height:xe,top:me,left:K,right:K+ge,bottom:me+xe,x:K,y:me}}function computeCoordsFromPlacement(fe,K,me){let{reference:ge,floating:xe}=fe;const ye=getSideAxis(K),ve=getAlignmentAxis(K),_e=getAxisLength(ve),Ee=getSide(K),be=ye==="y",Ae=ge.x+ge.width/2-xe.width/2,Se=ge.y+ge.height/2-xe.height/2,Ce=ge[_e]/2-xe[_e]/2;let Te;switch(Ee){case"top":Te={x:Ae,y:ge.y-xe.height};break;case"bottom":Te={x:Ae,y:ge.y+ge.height};break;case"right":Te={x:ge.x+ge.width,y:Se};break;case"left":Te={x:ge.x-xe.width,y:Se};break;default:Te={x:ge.x,y:ge.y}}switch(getAlignment(K)){case"start":Te[ve]-=Ce*(me&&be?-1:1);break;case"end":Te[ve]+=Ce*(me&&be?-1:1);break}return Te}const computePosition$1=async(fe,K,me)=>{const{placement:ge="bottom",strategy:xe="absolute",middleware:ye=[],platform:ve}=me,_e=ye.filter(Boolean),Ee=await(ve.isRTL==null?void 0:ve.isRTL(K));let be=await ve.getElementRects({reference:fe,floating:K,strategy:xe}),{x:Ae,y:Se}=computeCoordsFromPlacement(be,ge,Ee),Ce=ge,Te={},Re=0;for(let De=0;De<_e.length;De++){const{name:Ie,fn:Be}=_e[De],{x:Le,y:Oe,data:Fe,reset:Ue}=await Be({x:Ae,y:Se,initialPlacement:ge,placement:Ce,strategy:xe,middlewareData:Te,rects:be,platform:ve,elements:{reference:fe,floating:K}});Ae=Le??Ae,Se=Oe??Se,Te={...Te,[Ie]:{...Te[Ie],...Fe}},Ue&&Re<=50&&(Re++,typeof Ue=="object"&&(Ue.placement&&(Ce=Ue.placement),Ue.rects&&(be=Ue.rects===!0?await ve.getElementRects({reference:fe,floating:K,strategy:xe}):Ue.rects),{x:Ae,y:Se}=computeCoordsFromPlacement(be,Ce,Ee)),De=-1)}return{x:Ae,y:Se,placement:Ce,strategy:xe,middlewareData:Te}};async function detectOverflow(fe,K){var me;K===void 0&&(K={});const{x:ge,y:xe,platform:ye,rects:ve,elements:_e,strategy:Ee}=fe,{boundary:be="clippingAncestors",rootBoundary:Ae="viewport",elementContext:Se="floating",altBoundary:Ce=!1,padding:Te=0}=evaluate$1(K,fe),Re=getPaddingObject(Te),Ie=_e[Ce?Se==="floating"?"reference":"floating":Se],Be=rectToClientRect(await ye.getClippingRect({element:(me=await(ye.isElement==null?void 0:ye.isElement(Ie)))==null||me?Ie:Ie.contextElement||await(ye.getDocumentElement==null?void 0:ye.getDocumentElement(_e.floating)),boundary:be,rootBoundary:Ae,strategy:Ee})),Le=Se==="floating"?{x:ge,y:xe,width:ve.floating.width,height:ve.floating.height}:ve.reference,Oe=await(ye.getOffsetParent==null?void 0:ye.getOffsetParent(_e.floating)),Fe=await(ye.isElement==null?void 0:ye.isElement(Oe))?await(ye.getScale==null?void 0:ye.getScale(Oe))||{x:1,y:1}:{x:1,y:1},Ue=rectToClientRect(ye.convertOffsetParentRelativeRectToViewportRelativeRect?await ye.convertOffsetParentRelativeRectToViewportRelativeRect({elements:_e,rect:Le,offsetParent:Oe,strategy:Ee}):Le);return{top:(Be.top-Ue.top+Re.top)/Fe.y,bottom:(Ue.bottom-Be.bottom+Re.bottom)/Fe.y,left:(Be.left-Ue.left+Re.left)/Fe.x,right:(Ue.right-Be.right+Re.right)/Fe.x}}const arrow$3=fe=>({name:"arrow",options:fe,async fn(K){const{x:me,y:ge,placement:xe,rects:ye,platform:ve,elements:_e,middlewareData:Ee}=K,{element:be,padding:Ae=0}=evaluate$1(fe,K)||{};if(be==null)return{};const Se=getPaddingObject(Ae),Ce={x:me,y:ge},Te=getAlignmentAxis(xe),Re=getAxisLength(Te),De=await ve.getDimensions(be),Ie=Te==="y",Be=Ie?"top":"left",Le=Ie?"bottom":"right",Oe=Ie?"clientHeight":"clientWidth",Fe=ye.reference[Re]+ye.reference[Te]-Ce[Te]-ye.floating[Re],Ue=Ce[Te]-ye.reference[Te],Ne=await(ve.getOffsetParent==null?void 0:ve.getOffsetParent(be));let He=Ne?Ne[Oe]:0;(!He||!await(ve.isElement==null?void 0:ve.isElement(Ne)))&&(He=_e.floating[Oe]||ye.floating[Re]);const ze=Fe/2-Ue/2,je=He/2-De[Re]/2-1,Ge=min(Se[Be],je),Xe=min(Se[Le],je),qe=Ge,Qe=He-De[Re]-Xe,nt=He/2-De[Re]/2+ze,Nt=clamp$4(qe,nt,Qe),Ye=!Ee.arrow&&getAlignment(xe)!=null&&nt!==Nt&&ye.reference[Re]/2-(nt<qe?Ge:Xe)-De[Re]/2<0,at=Ye?nt<qe?nt-qe:nt-Qe:0;return{[Te]:Ce[Te]+at,data:{[Te]:Nt,centerOffset:nt-Nt-at,...Ye&&{alignmentOffset:at}},reset:Ye}}}),flip$2=function(fe){return fe===void 0&&(fe={}),{name:"flip",options:fe,async fn(K){var me,ge;const{placement:xe,middlewareData:ye,rects:ve,initialPlacement:_e,platform:Ee,elements:be}=K,{mainAxis:Ae=!0,crossAxis:Se=!0,fallbackPlacements:Ce,fallbackStrategy:Te="bestFit",fallbackAxisSideDirection:Re="none",flipAlignment:De=!0,...Ie}=evaluate$1(fe,K);if((me=ye.arrow)!=null&&me.alignmentOffset)return{};const Be=getSide(xe),Le=getSideAxis(_e),Oe=getSide(_e)===_e,Fe=await(Ee.isRTL==null?void 0:Ee.isRTL(be.floating)),Ue=Ce||(Oe||!De?[getOppositePlacement(_e)]:getExpandedPlacements(_e)),Ne=Re!=="none";!Ce&&Ne&&Ue.push(...getOppositeAxisPlacements(_e,De,Re,Fe));const He=[_e,...Ue],ze=await detectOverflow(K,Ie),je=[];let Ge=((ge=ye.flip)==null?void 0:ge.overflows)||[];if(Ae&&je.push(ze[Be]),Se){const nt=getAlignmentSides(xe,ve,Fe);je.push(ze[nt[0]],ze[nt[1]])}if(Ge=[...Ge,{placement:xe,overflows:je}],!je.every(nt=>nt<=0)){var Xe,qe;const nt=(((Xe=ye.flip)==null?void 0:Xe.index)||0)+1,Nt=He[nt];if(Nt)return{data:{index:nt,overflows:Ge},reset:{placement:Nt}};let Ye=(qe=Ge.filter(at=>at.overflows[0]<=0).sort((at,rt)=>at.overflows[1]-rt.overflows[1])[0])==null?void 0:qe.placement;if(!Ye)switch(Te){case"bestFit":{var Qe;const at=(Qe=Ge.filter(rt=>{if(Ne){const Ft=getSideAxis(rt.placement);return Ft===Le||Ft==="y"}return!0}).map(rt=>[rt.placement,rt.overflows.filter(Ft=>Ft>0).reduce((Ft,Je)=>Ft+Je,0)]).sort((rt,Ft)=>rt[1]-Ft[1])[0])==null?void 0:Qe[0];at&&(Ye=at);break}case"initialPlacement":Ye=_e;break}if(xe!==Ye)return{reset:{placement:Ye}}}return{}}}};function getBoundingRect(fe){const K=min(...fe.map(ye=>ye.left)),me=min(...fe.map(ye=>ye.top)),ge=max$2(...fe.map(ye=>ye.right)),xe=max$2(...fe.map(ye=>ye.bottom));return{x:K,y:me,width:ge-K,height:xe-me}}function getRectsByLine(fe){const K=fe.slice().sort((xe,ye)=>xe.y-ye.y),me=[];let ge=null;for(let xe=0;xe<K.length;xe++){const ye=K[xe];!ge||ye.y-ge.y>ge.height/2?me.push([ye]):me[me.length-1].push(ye),ge=ye}return me.map(xe=>rectToClientRect(getBoundingRect(xe)))}const inline$2=function(fe){return fe===void 0&&(fe={}),{name:"inline",options:fe,async fn(K){const{placement:me,elements:ge,rects:xe,platform:ye,strategy:ve}=K,{padding:_e=2,x:Ee,y:be}=evaluate$1(fe,K),Ae=Array.from(await(ye.getClientRects==null?void 0:ye.getClientRects(ge.reference))||[]),Se=getRectsByLine(Ae),Ce=rectToClientRect(getBoundingRect(Ae)),Te=getPaddingObject(_e);function Re(){if(Se.length===2&&Se[0].left>Se[1].right&&Ee!=null&&be!=null)return Se.find(Ie=>Ee>Ie.left-Te.left&&Ee<Ie.right+Te.right&&be>Ie.top-Te.top&&be<Ie.bottom+Te.bottom)||Ce;if(Se.length>=2){if(getSideAxis(me)==="y"){const Ge=Se[0],Xe=Se[Se.length-1],qe=getSide(me)==="top",Qe=Ge.top,nt=Xe.bottom,Nt=qe?Ge.left:Xe.left,Ye=qe?Ge.right:Xe.right,at=Ye-Nt,rt=nt-Qe;return{top:Qe,bottom:nt,left:Nt,right:Ye,width:at,height:rt,x:Nt,y:Qe}}const Ie=getSide(me)==="left",Be=max$2(...Se.map(Ge=>Ge.right)),Le=min(...Se.map(Ge=>Ge.left)),Oe=Se.filter(Ge=>Ie?Ge.left===Le:Ge.right===Be),Fe=Oe[0].top,Ue=Oe[Oe.length-1].bottom,Ne=Le,He=Be,ze=He-Ne,je=Ue-Fe;return{top:Fe,bottom:Ue,left:Ne,right:He,width:ze,height:je,x:Ne,y:Fe}}return Ce}const De=await ye.getElementRects({reference:{getBoundingClientRect:Re},floating:ge.floating,strategy:ve});return xe.reference.x!==De.reference.x||xe.reference.y!==De.reference.y||xe.reference.width!==De.reference.width||xe.reference.height!==De.reference.height?{reset:{rects:De}}:{}}}};async function convertValueToCoords(fe,K){const{placement:me,platform:ge,elements:xe}=fe,ye=await(ge.isRTL==null?void 0:ge.isRTL(xe.floating)),ve=getSide(me),_e=getAlignment(me),Ee=getSideAxis(me)==="y",be=["left","top"].includes(ve)?-1:1,Ae=ye&&Ee?-1:1,Se=evaluate$1(K,fe);let{mainAxis:Ce,crossAxis:Te,alignmentAxis:Re}=typeof Se=="number"?{mainAxis:Se,crossAxis:0,alignmentAxis:null}:{mainAxis:Se.mainAxis||0,crossAxis:Se.crossAxis||0,alignmentAxis:Se.alignmentAxis};return _e&&typeof Re=="number"&&(Te=_e==="end"?Re*-1:Re),Ee?{x:Te*Ae,y:Ce*be}:{x:Ce*be,y:Te*Ae}}const offset$2=function(fe){return fe===void 0&&(fe=0),{name:"offset",options:fe,async fn(K){var me,ge;const{x:xe,y:ye,placement:ve,middlewareData:_e}=K,Ee=await convertValueToCoords(K,fe);return ve===((me=_e.offset)==null?void 0:me.placement)&&(ge=_e.arrow)!=null&&ge.alignmentOffset?{}:{x:xe+Ee.x,y:ye+Ee.y,data:{...Ee,placement:ve}}}}},shift$2=function(fe){return fe===void 0&&(fe={}),{name:"shift",options:fe,async fn(K){const{x:me,y:ge,placement:xe}=K,{mainAxis:ye=!0,crossAxis:ve=!1,limiter:_e={fn:Ie=>{let{x:Be,y:Le}=Ie;return{x:Be,y:Le}}},...Ee}=evaluate$1(fe,K),be={x:me,y:ge},Ae=await detectOverflow(K,Ee),Se=getSideAxis(getSide(xe)),Ce=getOppositeAxis(Se);let Te=be[Ce],Re=be[Se];if(ye){const Ie=Ce==="y"?"top":"left",Be=Ce==="y"?"bottom":"right",Le=Te+Ae[Ie],Oe=Te-Ae[Be];Te=clamp$4(Le,Te,Oe)}if(ve){const Ie=Se==="y"?"top":"left",Be=Se==="y"?"bottom":"right",Le=Re+Ae[Ie],Oe=Re-Ae[Be];Re=clamp$4(Le,Re,Oe)}const De=_e.fn({...K,[Ce]:Te,[Se]:Re});return{...De,data:{x:De.x-me,y:De.y-ge,enabled:{[Ce]:ye,[Se]:ve}}}}}},limitShift$2=function(fe){return fe===void 0&&(fe={}),{options:fe,fn(K){const{x:me,y:ge,placement:xe,rects:ye,middlewareData:ve}=K,{offset:_e=0,mainAxis:Ee=!0,crossAxis:be=!0}=evaluate$1(fe,K),Ae={x:me,y:ge},Se=getSideAxis(xe),Ce=getOppositeAxis(Se);let Te=Ae[Ce],Re=Ae[Se];const De=evaluate$1(_e,K),Ie=typeof De=="number"?{mainAxis:De,crossAxis:0}:{mainAxis:0,crossAxis:0,...De};if(Ee){const Oe=Ce==="y"?"height":"width",Fe=ye.reference[Ce]-ye.floating[Oe]+Ie.mainAxis,Ue=ye.reference[Ce]+ye.reference[Oe]-Ie.mainAxis;Te<Fe?Te=Fe:Te>Ue&&(Te=Ue)}if(be){var Be,Le;const Oe=Ce==="y"?"width":"height",Fe=["top","left"].includes(getSide(xe)),Ue=ye.reference[Se]-ye.floating[Oe]+(Fe&&((Be=ve.offset)==null?void 0:Be[Se])||0)+(Fe?0:Ie.crossAxis),Ne=ye.reference[Se]+ye.reference[Oe]+(Fe?0:((Le=ve.offset)==null?void 0:Le[Se])||0)-(Fe?Ie.crossAxis:0);Re<Ue?Re=Ue:Re>Ne&&(Re=Ne)}return{[Ce]:Te,[Se]:Re}}}},size$2=function(fe){return fe===void 0&&(fe={}),{name:"size",options:fe,async fn(K){var me,ge;const{placement:xe,rects:ye,platform:ve,elements:_e}=K,{apply:Ee=()=>{},...be}=evaluate$1(fe,K),Ae=await detectOverflow(K,be),Se=getSide(xe),Ce=getAlignment(xe),Te=getSideAxis(xe)==="y",{width:Re,height:De}=ye.floating;let Ie,Be;Se==="top"||Se==="bottom"?(Ie=Se,Be=Ce===(await(ve.isRTL==null?void 0:ve.isRTL(_e.floating))?"start":"end")?"left":"right"):(Be=Se,Ie=Ce==="end"?"top":"bottom");const Le=De-Ae.top-Ae.bottom,Oe=Re-Ae.left-Ae.right,Fe=min(De-Ae[Ie],Le),Ue=min(Re-Ae[Be],Oe),Ne=!K.middlewareData.shift;let He=Fe,ze=Ue;if((me=K.middlewareData.shift)!=null&&me.enabled.x&&(ze=Oe),(ge=K.middlewareData.shift)!=null&&ge.enabled.y&&(He=Le),Ne&&!Ce){const Ge=max$2(Ae.left,0),Xe=max$2(Ae.right,0),qe=max$2(Ae.top,0),Qe=max$2(Ae.bottom,0);Te?ze=Re-2*(Ge!==0||Xe!==0?Ge+Xe:max$2(Ae.left,Ae.right)):He=De-2*(qe!==0||Qe!==0?qe+Qe:max$2(Ae.top,Ae.bottom))}await Ee({...K,availableWidth:ze,availableHeight:He});const je=await ve.getDimensions(_e.floating);return Re!==je.width||De!==je.height?{reset:{rects:!0}}:{}}}};function getCssDimensions(fe){const K=getComputedStyle$1(fe);let me=parseFloat(K.width)||0,ge=parseFloat(K.height)||0;const xe=isHTMLElement(fe),ye=xe?fe.offsetWidth:me,ve=xe?fe.offsetHeight:ge,_e=round$1(me)!==ye||round$1(ge)!==ve;return _e&&(me=ye,ge=ve),{width:me,height:ge,$:_e}}function unwrapElement(fe){return isElement(fe)?fe:fe.contextElement}function getScale(fe){const K=unwrapElement(fe);if(!isHTMLElement(K))return createCoords(1);const me=K.getBoundingClientRect(),{width:ge,height:xe,$:ye}=getCssDimensions(K);let ve=(ye?round$1(me.width):me.width)/ge,_e=(ye?round$1(me.height):me.height)/xe;return(!ve||!Number.isFinite(ve))&&(ve=1),(!_e||!Number.isFinite(_e))&&(_e=1),{x:ve,y:_e}}const noOffsets=createCoords(0);function getVisualOffsets(fe){const K=getWindow(fe);return!isWebKit()||!K.visualViewport?noOffsets:{x:K.visualViewport.offsetLeft,y:K.visualViewport.offsetTop}}function shouldAddVisualOffsets(fe,K,me){return K===void 0&&(K=!1),!me||K&&me!==getWindow(fe)?!1:K}function getBoundingClientRect(fe,K,me,ge){K===void 0&&(K=!1),me===void 0&&(me=!1);const xe=fe.getBoundingClientRect(),ye=unwrapElement(fe);let ve=createCoords(1);K&&(ge?isElement(ge)&&(ve=getScale(ge)):ve=getScale(fe));const _e=shouldAddVisualOffsets(ye,me,ge)?getVisualOffsets(ye):createCoords(0);let Ee=(xe.left+_e.x)/ve.x,be=(xe.top+_e.y)/ve.y,Ae=xe.width/ve.x,Se=xe.height/ve.y;if(ye){const Ce=getWindow(ye),Te=ge&&isElement(ge)?getWindow(ge):ge;let Re=Ce,De=getFrameElement(Re);for(;De&&ge&&Te!==Re;){const Ie=getScale(De),Be=De.getBoundingClientRect(),Le=getComputedStyle$1(De),Oe=Be.left+(De.clientLeft+parseFloat(Le.paddingLeft))*Ie.x,Fe=Be.top+(De.clientTop+parseFloat(Le.paddingTop))*Ie.y;Ee*=Ie.x,be*=Ie.y,Ae*=Ie.x,Se*=Ie.y,Ee+=Oe,be+=Fe,Re=getWindow(De),De=getFrameElement(Re)}}return rectToClientRect({width:Ae,height:Se,x:Ee,y:be})}function getWindowScrollBarX(fe,K){const me=getNodeScroll(fe).scrollLeft;return K?K.left+me:getBoundingClientRect(getDocumentElement(fe)).left+me}function getHTMLOffset(fe,K,me){me===void 0&&(me=!1);const ge=fe.getBoundingClientRect(),xe=ge.left+K.scrollLeft-(me?0:getWindowScrollBarX(fe,ge)),ye=ge.top+K.scrollTop;return{x:xe,y:ye}}function convertOffsetParentRelativeRectToViewportRelativeRect(fe){let{elements:K,rect:me,offsetParent:ge,strategy:xe}=fe;const ye=xe==="fixed",ve=getDocumentElement(ge),_e=K?isTopLayer(K.floating):!1;if(ge===ve||_e&&ye)return me;let Ee={scrollLeft:0,scrollTop:0},be=createCoords(1);const Ae=createCoords(0),Se=isHTMLElement(ge);if((Se||!Se&&!ye)&&((getNodeName(ge)!=="body"||isOverflowElement(ve))&&(Ee=getNodeScroll(ge)),isHTMLElement(ge))){const Te=getBoundingClientRect(ge);be=getScale(ge),Ae.x=Te.x+ge.clientLeft,Ae.y=Te.y+ge.clientTop}const Ce=ve&&!Se&&!ye?getHTMLOffset(ve,Ee,!0):createCoords(0);return{width:me.width*be.x,height:me.height*be.y,x:me.x*be.x-Ee.scrollLeft*be.x+Ae.x+Ce.x,y:me.y*be.y-Ee.scrollTop*be.y+Ae.y+Ce.y}}function getClientRects(fe){return Array.from(fe.getClientRects())}function getDocumentRect(fe){const K=getDocumentElement(fe),me=getNodeScroll(fe),ge=fe.ownerDocument.body,xe=max$2(K.scrollWidth,K.clientWidth,ge.scrollWidth,ge.clientWidth),ye=max$2(K.scrollHeight,K.clientHeight,ge.scrollHeight,ge.clientHeight);let ve=-me.scrollLeft+getWindowScrollBarX(fe);const _e=-me.scrollTop;return getComputedStyle$1(ge).direction==="rtl"&&(ve+=max$2(K.clientWidth,ge.clientWidth)-xe),{width:xe,height:ye,x:ve,y:_e}}function getViewportRect(fe,K){const me=getWindow(fe),ge=getDocumentElement(fe),xe=me.visualViewport;let ye=ge.clientWidth,ve=ge.clientHeight,_e=0,Ee=0;if(xe){ye=xe.width,ve=xe.height;const be=isWebKit();(!be||be&&K==="fixed")&&(_e=xe.offsetLeft,Ee=xe.offsetTop)}return{width:ye,height:ve,x:_e,y:Ee}}function getInnerBoundingClientRect(fe,K){const me=getBoundingClientRect(fe,!0,K==="fixed"),ge=me.top+fe.clientTop,xe=me.left+fe.clientLeft,ye=isHTMLElement(fe)?getScale(fe):createCoords(1),ve=fe.clientWidth*ye.x,_e=fe.clientHeight*ye.y,Ee=xe*ye.x,be=ge*ye.y;return{width:ve,height:_e,x:Ee,y:be}}function getClientRectFromClippingAncestor(fe,K,me){let ge;if(K==="viewport")ge=getViewportRect(fe,me);else if(K==="document")ge=getDocumentRect(getDocumentElement(fe));else if(isElement(K))ge=getInnerBoundingClientRect(K,me);else{const xe=getVisualOffsets(fe);ge={x:K.x-xe.x,y:K.y-xe.y,width:K.width,height:K.height}}return rectToClientRect(ge)}function hasFixedPositionAncestor(fe,K){const me=getParentNode(fe);return me===K||!isElement(me)||isLastTraversableNode(me)?!1:getComputedStyle$1(me).position==="fixed"||hasFixedPositionAncestor(me,K)}function getClippingElementAncestors(fe,K){const me=K.get(fe);if(me)return me;let ge=getOverflowAncestors(fe,[],!1).filter(_e=>isElement(_e)&&getNodeName(_e)!=="body"),xe=null;const ye=getComputedStyle$1(fe).position==="fixed";let ve=ye?getParentNode(fe):fe;for(;isElement(ve)&&!isLastTraversableNode(ve);){const _e=getComputedStyle$1(ve),Ee=isContainingBlock(ve);!Ee&&_e.position==="fixed"&&(xe=null),(ye?!Ee&&!xe:!Ee&&_e.position==="static"&&!!xe&&["absolute","fixed"].includes(xe.position)||isOverflowElement(ve)&&!Ee&&hasFixedPositionAncestor(fe,ve))?ge=ge.filter(Ae=>Ae!==ve):xe=_e,ve=getParentNode(ve)}return K.set(fe,ge),ge}function getClippingRect(fe){let{element:K,boundary:me,rootBoundary:ge,strategy:xe}=fe;const ve=[...me==="clippingAncestors"?isTopLayer(K)?[]:getClippingElementAncestors(K,this._c):[].concat(me),ge],_e=ve[0],Ee=ve.reduce((be,Ae)=>{const Se=getClientRectFromClippingAncestor(K,Ae,xe);return be.top=max$2(Se.top,be.top),be.right=min(Se.right,be.right),be.bottom=min(Se.bottom,be.bottom),be.left=max$2(Se.left,be.left),be},getClientRectFromClippingAncestor(K,_e,xe));return{width:Ee.right-Ee.left,height:Ee.bottom-Ee.top,x:Ee.left,y:Ee.top}}function getDimensions(fe){const{width:K,height:me}=getCssDimensions(fe);return{width:K,height:me}}function getRectRelativeToOffsetParent(fe,K,me){const ge=isHTMLElement(K),xe=getDocumentElement(K),ye=me==="fixed",ve=getBoundingClientRect(fe,!0,ye,K);let _e={scrollLeft:0,scrollTop:0};const Ee=createCoords(0);if(ge||!ge&&!ye)if((getNodeName(K)!=="body"||isOverflowElement(xe))&&(_e=getNodeScroll(K)),ge){const Ce=getBoundingClientRect(K,!0,ye,K);Ee.x=Ce.x+K.clientLeft,Ee.y=Ce.y+K.clientTop}else xe&&(Ee.x=getWindowScrollBarX(xe));const be=xe&&!ge&&!ye?getHTMLOffset(xe,_e):createCoords(0),Ae=ve.left+_e.scrollLeft-Ee.x-be.x,Se=ve.top+_e.scrollTop-Ee.y-be.y;return{x:Ae,y:Se,width:ve.width,height:ve.height}}function isStaticPositioned(fe){return getComputedStyle$1(fe).position==="static"}function getTrueOffsetParent(fe,K){if(!isHTMLElement(fe)||getComputedStyle$1(fe).position==="fixed")return null;if(K)return K(fe);let me=fe.offsetParent;return getDocumentElement(fe)===me&&(me=me.ownerDocument.body),me}function getOffsetParent(fe,K){const me=getWindow(fe);if(isTopLayer(fe))return me;if(!isHTMLElement(fe)){let xe=getParentNode(fe);for(;xe&&!isLastTraversableNode(xe);){if(isElement(xe)&&!isStaticPositioned(xe))return xe;xe=getParentNode(xe)}return me}let ge=getTrueOffsetParent(fe,K);for(;ge&&isTableElement(ge)&&isStaticPositioned(ge);)ge=getTrueOffsetParent(ge,K);return ge&&isLastTraversableNode(ge)&&isStaticPositioned(ge)&&!isContainingBlock(ge)?me:ge||getContainingBlock(fe)||me}const getElementRects=async function(fe){const K=this.getOffsetParent||getOffsetParent,me=this.getDimensions,ge=await me(fe.floating);return{reference:getRectRelativeToOffsetParent(fe.reference,await K(fe.floating),fe.strategy),floating:{x:0,y:0,width:ge.width,height:ge.height}}};function isRTL(fe){return getComputedStyle$1(fe).direction==="rtl"}const platform={convertOffsetParentRelativeRectToViewportRelativeRect,getDocumentElement,getClippingRect,getOffsetParent,getElementRects,getClientRects,getDimensions,getScale,isElement,isRTL};function rectsAreEqual(fe,K){return fe.x===K.x&&fe.y===K.y&&fe.width===K.width&&fe.height===K.height}function observeMove(fe,K){let me=null,ge;const xe=getDocumentElement(fe);function ye(){var _e;clearTimeout(ge),(_e=me)==null||_e.disconnect(),me=null}function ve(_e,Ee){_e===void 0&&(_e=!1),Ee===void 0&&(Ee=1),ye();const be=fe.getBoundingClientRect(),{left:Ae,top:Se,width:Ce,height:Te}=be;if(_e||K(),!Ce||!Te)return;const Re=floor(Se),De=floor(xe.clientWidth-(Ae+Ce)),Ie=floor(xe.clientHeight-(Se+Te)),Be=floor(Ae),Oe={rootMargin:-Re+"px "+-De+"px "+-Ie+"px "+-Be+"px",threshold:max$2(0,min(1,Ee))||1};let Fe=!0;function Ue(Ne){const He=Ne[0].intersectionRatio;if(He!==Ee){if(!Fe)return ve();He?ve(!1,He):ge=setTimeout(()=>{ve(!1,1e-7)},1e3)}He===1&&!rectsAreEqual(be,fe.getBoundingClientRect())&&ve(),Fe=!1}try{me=new IntersectionObserver(Ue,{...Oe,root:xe.ownerDocument})}catch{me=new IntersectionObserver(Ue,Oe)}me.observe(fe)}return ve(!0),ye}function autoUpdate(fe,K,me,ge){ge===void 0&&(ge={});const{ancestorScroll:xe=!0,ancestorResize:ye=!0,elementResize:ve=typeof ResizeObserver=="function",layoutShift:_e=typeof IntersectionObserver=="function",animationFrame:Ee=!1}=ge,be=unwrapElement(fe),Ae=xe||ye?[...be?getOverflowAncestors(be):[],...getOverflowAncestors(K)]:[];Ae.forEach(Be=>{xe&&Be.addEventListener("scroll",me,{passive:!0}),ye&&Be.addEventListener("resize",me)});const Se=be&&_e?observeMove(be,me):null;let Ce=-1,Te=null;ve&&(Te=new ResizeObserver(Be=>{let[Le]=Be;Le&&Le.target===be&&Te&&(Te.unobserve(K),cancelAnimationFrame(Ce),Ce=requestAnimationFrame(()=>{var Oe;(Oe=Te)==null||Oe.observe(K)})),me()}),be&&!Ee&&Te.observe(be),Te.observe(K));let Re,De=Ee?getBoundingClientRect(fe):null;Ee&&Ie();function Ie(){const Be=getBoundingClientRect(fe);De&&!rectsAreEqual(De,Be)&&me(),De=Be,Re=requestAnimationFrame(Ie)}return me(),()=>{var Be;Ae.forEach(Le=>{xe&&Le.removeEventListener("scroll",me),ye&&Le.removeEventListener("resize",me)}),Se?.(),(Be=Te)==null||Be.disconnect(),Te=null,Ee&&cancelAnimationFrame(Re)}}const offset$1=offset$2,shift$1=shift$2,flip$1=flip$2,size$1=size$2,arrow$2=arrow$3,inline$1=inline$2,limitShift$1=limitShift$2,computePosition=(fe,K,me)=>{const ge=new Map,xe={platform,...me},ye={...xe.platform,_c:ge};return computePosition$1(fe,K,{...xe,platform:ye})};var index$4=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function deepEqual(fe,K){if(fe===K)return!0;if(typeof fe!=typeof K)return!1;if(typeof fe=="function"&&fe.toString()===K.toString())return!0;let me,ge,xe;if(fe&&K&&typeof fe=="object"){if(Array.isArray(fe)){if(me=fe.length,me!==K.length)return!1;for(ge=me;ge--!==0;)if(!deepEqual(fe[ge],K[ge]))return!1;return!0}if(xe=Object.keys(fe),me=xe.length,me!==Object.keys(K).length)return!1;for(ge=me;ge--!==0;)if(!{}.hasOwnProperty.call(K,xe[ge]))return!1;for(ge=me;ge--!==0;){const ye=xe[ge];if(!(ye==="_owner"&&fe.$$typeof)&&!deepEqual(fe[ye],K[ye]))return!1}return!0}return fe!==fe&&K!==K}function getDPR(fe){return typeof window>"u"?1:(fe.ownerDocument.defaultView||window).devicePixelRatio||1}function roundByDPR(fe,K){const me=getDPR(fe);return Math.round(K*me)/me}function useLatestRef$1(fe){const K=reactExports.useRef(fe);return index$4(()=>{K.current=fe}),K}function useFloating$1(fe){fe===void 0&&(fe={});const{placement:K="bottom",strategy:me="absolute",middleware:ge=[],platform:xe,elements:{reference:ye,floating:ve}={},transform:_e=!0,whileElementsMounted:Ee,open:be}=fe,[Ae,Se]=reactExports.useState({x:0,y:0,strategy:me,placement:K,middlewareData:{},isPositioned:!1}),[Ce,Te]=reactExports.useState(ge);deepEqual(Ce,ge)||Te(ge);const[Re,De]=reactExports.useState(null),[Ie,Be]=reactExports.useState(null),Le=reactExports.useCallback(rt=>{rt!==Ne.current&&(Ne.current=rt,De(rt))},[]),Oe=reactExports.useCallback(rt=>{rt!==He.current&&(He.current=rt,Be(rt))},[]),Fe=ye||Re,Ue=ve||Ie,Ne=reactExports.useRef(null),He=reactExports.useRef(null),ze=reactExports.useRef(Ae),je=Ee!=null,Ge=useLatestRef$1(Ee),Xe=useLatestRef$1(xe),qe=useLatestRef$1(be),Qe=reactExports.useCallback(()=>{if(!Ne.current||!He.current)return;const rt={placement:K,strategy:me,middleware:Ce};Xe.current&&(rt.platform=Xe.current),computePosition(Ne.current,He.current,rt).then(Ft=>{const Je={...Ft,isPositioned:qe.current!==!1};nt.current&&!deepEqual(ze.current,Je)&&(ze.current=Je,reactDomExports.flushSync(()=>{Se(Je)}))})},[Ce,K,me,Xe,qe]);index$4(()=>{be===!1&&ze.current.isPositioned&&(ze.current.isPositioned=!1,Se(rt=>({...rt,isPositioned:!1})))},[be]);const nt=reactExports.useRef(!1);index$4(()=>(nt.current=!0,()=>{nt.current=!1}),[]),index$4(()=>{if(Fe&&(Ne.current=Fe),Ue&&(He.current=Ue),Fe&&Ue){if(Ge.current)return Ge.current(Fe,Ue,Qe);Qe()}},[Fe,Ue,Qe,Ge,je]);const Nt=reactExports.useMemo(()=>({reference:Ne,floating:He,setReference:Le,setFloating:Oe}),[Le,Oe]),Ye=reactExports.useMemo(()=>({reference:Fe,floating:Ue}),[Fe,Ue]),at=reactExports.useMemo(()=>{const rt={position:me,left:0,top:0};if(!Ye.floating)return rt;const Ft=roundByDPR(Ye.floating,Ae.x),Je=roundByDPR(Ye.floating,Ae.y);return _e?{...rt,transform:"translate("+Ft+"px, "+Je+"px)",...getDPR(Ye.floating)>=1.5&&{willChange:"transform"}}:{position:me,left:Ft,top:Je}},[me,_e,Ye.floating,Ae.x,Ae.y]);return reactExports.useMemo(()=>({...Ae,update:Qe,refs:Nt,elements:Ye,floatingStyles:at}),[Ae,Qe,Nt,Ye,at])}const arrow$1=fe=>{function K(me){return{}.hasOwnProperty.call(me,"current")}return{name:"arrow",options:fe,fn(me){const{element:ge,padding:xe}=typeof fe=="function"?fe(me):fe;return ge&&K(ge)?ge.current!=null?arrow$2({element:ge.current,padding:xe}).fn(me):{}:ge?arrow$2({element:ge,padding:xe}).fn(me):{}}}},offset=(fe,K)=>({...offset$1(fe),options:[fe,K]}),shift=(fe,K)=>({...shift$1(fe),options:[fe,K]}),limitShift=(fe,K)=>({...limitShift$1(fe),options:[fe,K]}),flip=(fe,K)=>({...flip$1(fe),options:[fe,K]}),size=(fe,K)=>({...size$1(fe),options:[fe,K]}),inline=(fe,K)=>({...inline$1(fe),options:[fe,K]}),arrow=(fe,K)=>({...arrow$1(fe),options:[fe,K]});function useMergeRefs(fe){return reactExports.useMemo(()=>fe.every(K=>K==null)?null:K=>{fe.forEach(me=>{typeof me=="function"?me(K):me!=null&&(me.current=K)})},fe)}const SafeReact={...React$5},useInsertionEffect=SafeReact.useInsertionEffect,useSafeInsertionEffect=useInsertionEffect||(fe=>fe());function useEffectEvent(fe){const K=reactExports.useRef(()=>{});return useSafeInsertionEffect(()=>{K.current=fe}),reactExports.useCallback(function(){for(var me=arguments.length,ge=new Array(me),xe=0;xe<me;xe++)ge[xe]=arguments[xe];return K.current==null?void 0:K.current(...ge)},[])}var index$3=typeof document<"u"?reactExports.useLayoutEffect:reactExports.useEffect;let serverHandoffComplete=!1,count=0;const genId=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+count++;function useFloatingId(){const[fe,K]=reactExports.useState(()=>serverHandoffComplete?genId():void 0);return index$3(()=>{fe==null&&K(genId())},[]),reactExports.useEffect(()=>{serverHandoffComplete=!0},[]),fe}const useReactId=SafeReact.useId,useId=useReactId||useFloatingId;function createPubSub(){const fe=new Map;return{emit(K,me){var ge;(ge=fe.get(K))==null||ge.forEach(xe=>xe(me))},on(K,me){fe.set(K,[...fe.get(K)||[],me])},off(K,me){var ge;fe.set(K,((ge=fe.get(K))==null?void 0:ge.filter(xe=>xe!==me))||[])}}}const FloatingNodeContext=reactExports.createContext(null),FloatingTreeContext=reactExports.createContext(null),useFloatingParentNodeId=()=>{var fe;return((fe=reactExports.useContext(FloatingNodeContext))==null?void 0:fe.id)||null},useFloatingTree=()=>reactExports.useContext(FloatingTreeContext);function createAttribute(fe){return"data-floating-ui-"+fe}function useLatestRef(fe){const K=reactExports.useRef(fe);return index$3(()=>{K.current=fe}),K}const safePolygonIdentifier=createAttribute("safe-polygon");function getDelay(fe,K,me){return me&&!isMouseLikePointerType(me)?0:typeof fe=="number"?fe:fe?.[K]}function useHover(fe,K){K===void 0&&(K={});const{open:me,onOpenChange:ge,dataRef:xe,events:ye,elements:ve}=fe,{enabled:_e=!0,delay:Ee=0,handleClose:be=null,mouseOnly:Ae=!1,restMs:Se=0,move:Ce=!0}=K,Te=useFloatingTree(),Re=useFloatingParentNodeId(),De=useLatestRef(be),Ie=useLatestRef(Ee),Be=useLatestRef(me),Le=reactExports.useRef(),Oe=reactExports.useRef(-1),Fe=reactExports.useRef(),Ue=reactExports.useRef(-1),Ne=reactExports.useRef(!0),He=reactExports.useRef(!1),ze=reactExports.useRef(()=>{}),je=reactExports.useRef(!1),Ge=reactExports.useCallback(()=>{var at;const rt=(at=xe.current.openEvent)==null?void 0:at.type;return rt?.includes("mouse")&&rt!=="mousedown"},[xe]);reactExports.useEffect(()=>{if(!_e)return;function at(rt){let{open:Ft}=rt;Ft||(clearTimeout(Oe.current),clearTimeout(Ue.current),Ne.current=!0,je.current=!1)}return ye.on("openchange",at),()=>{ye.off("openchange",at)}},[_e,ye]),reactExports.useEffect(()=>{if(!_e||!De.current||!me)return;function at(Ft){Ge()&&ge(!1,Ft,"hover")}const rt=getDocument(ve.floating).documentElement;return rt.addEventListener("mouseleave",at),()=>{rt.removeEventListener("mouseleave",at)}},[ve.floating,me,ge,_e,De,Ge]);const Xe=reactExports.useCallback(function(at,rt,Ft){rt===void 0&&(rt=!0),Ft===void 0&&(Ft="hover");const Je=getDelay(Ie.current,"close",Le.current);Je&&!Fe.current?(clearTimeout(Oe.current),Oe.current=window.setTimeout(()=>ge(!1,at,Ft),Je)):rt&&(clearTimeout(Oe.current),ge(!1,at,Ft))},[Ie,ge]),qe=useEffectEvent(()=>{ze.current(),Fe.current=void 0}),Qe=useEffectEvent(()=>{if(He.current){const at=getDocument(ve.floating).body;at.style.pointerEvents="",at.removeAttribute(safePolygonIdentifier),He.current=!1}}),nt=useEffectEvent(()=>xe.current.openEvent?["click","mousedown"].includes(xe.current.openEvent.type):!1);reactExports.useEffect(()=>{if(!_e)return;function at(Wt){if(clearTimeout(Oe.current),Ne.current=!1,Ae&&!isMouseLikePointerType(Le.current)||Se>0&&!getDelay(Ie.current,"open"))return;const Kt=getDelay(Ie.current,"open",Le.current);Kt?Oe.current=window.setTimeout(()=>{Be.current||ge(!0,Wt,"hover")},Kt):me||ge(!0,Wt,"hover")}function rt(Wt){if(nt())return;ze.current();const Kt=getDocument(ve.floating);if(clearTimeout(Ue.current),je.current=!1,De.current&&xe.current.floatingContext){me||clearTimeout(Oe.current),Fe.current=De.current({...xe.current.floatingContext,tree:Te,x:Wt.clientX,y:Wt.clientY,onClose(){Qe(),qe(),nt()||Xe(Wt,!0,"safe-polygon")}});const Yt=Fe.current;Kt.addEventListener("mousemove",Yt),ze.current=()=>{Kt.removeEventListener("mousemove",Yt)};return}(Le.current==="touch"?!contains(ve.floating,Wt.relatedTarget):!0)&&Xe(Wt)}function Ft(Wt){nt()||xe.current.floatingContext&&(De.current==null||De.current({...xe.current.floatingContext,tree:Te,x:Wt.clientX,y:Wt.clientY,onClose(){Qe(),qe(),nt()||Xe(Wt)}})(Wt))}if(isElement(ve.domReference)){var Je;const Wt=ve.domReference;return me&&Wt.addEventListener("mouseleave",Ft),(Je=ve.floating)==null||Je.addEventListener("mouseleave",Ft),Ce&&Wt.addEventListener("mousemove",at,{once:!0}),Wt.addEventListener("mouseenter",at),Wt.addEventListener("mouseleave",rt),()=>{var Kt;me&&Wt.removeEventListener("mouseleave",Ft),(Kt=ve.floating)==null||Kt.removeEventListener("mouseleave",Ft),Ce&&Wt.removeEventListener("mousemove",at),Wt.removeEventListener("mouseenter",at),Wt.removeEventListener("mouseleave",rt)}}},[ve,_e,fe,Ae,Se,Ce,Xe,qe,Qe,ge,me,Be,Te,Ie,De,xe,nt]),index$3(()=>{var at;if(_e&&me&&(at=De.current)!=null&&at.__options.blockPointerEvents&&Ge()){He.current=!0;const Ft=ve.floating;if(isElement(ve.domReference)&&Ft){var rt;const Je=getDocument(ve.floating).body;Je.setAttribute(safePolygonIdentifier,"");const Wt=ve.domReference,Kt=Te==null||(rt=Te.nodesRef.current.find(Pt=>Pt.id===Re))==null||(rt=rt.context)==null?void 0:rt.elements.floating;return Kt&&(Kt.style.pointerEvents=""),Je.style.pointerEvents="none",Wt.style.pointerEvents="auto",Ft.style.pointerEvents="auto",()=>{Je.style.pointerEvents="",Wt.style.pointerEvents="",Ft.style.pointerEvents=""}}}},[_e,me,Re,ve,Te,De,Ge]),index$3(()=>{me||(Le.current=void 0,je.current=!1,qe(),Qe())},[me,qe,Qe]),reactExports.useEffect(()=>()=>{qe(),clearTimeout(Oe.current),clearTimeout(Ue.current),Qe()},[_e,ve.domReference,qe,Qe]);const Nt=reactExports.useMemo(()=>{function at(rt){Le.current=rt.pointerType}return{onPointerDown:at,onPointerEnter:at,onMouseMove(rt){const{nativeEvent:Ft}=rt;function Je(){!Ne.current&&!Be.current&&ge(!0,Ft,"hover")}Ae&&!isMouseLikePointerType(Le.current)||me||Se===0||je.current&&rt.movementX**2+rt.movementY**2<2||(clearTimeout(Ue.current),Le.current==="touch"?Je():(je.current=!0,Ue.current=window.setTimeout(Je,Se)))}}},[Ae,ge,me,Be,Se]),Ye=reactExports.useMemo(()=>({onMouseEnter(){clearTimeout(Oe.current)},onMouseLeave(at){nt()||Xe(at.nativeEvent,!1)}}),[Xe,nt]);return reactExports.useMemo(()=>_e?{reference:Nt,floating:Ye}:{},[_e,Nt,Ye])}const NOOP=()=>{},FloatingDelayGroupContext=reactExports.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:NOOP,setState:NOOP,isInstantPhase:!1}),useDelayGroupContext=()=>reactExports.useContext(FloatingDelayGroupContext);function FloatingDelayGroup(fe){const{children:K,delay:me,timeoutMs:ge=0}=fe,[xe,ye]=reactExports.useReducer((Ee,be)=>({...Ee,...be}),{delay:me,timeoutMs:ge,initialDelay:me,currentId:null,isInstantPhase:!1}),ve=reactExports.useRef(null),_e=reactExports.useCallback(Ee=>{ye({currentId:Ee})},[]);return index$3(()=>{xe.currentId?ve.current===null?ve.current=xe.currentId:xe.isInstantPhase||ye({isInstantPhase:!0}):(xe.isInstantPhase&&ye({isInstantPhase:!1}),ve.current=null)},[xe.currentId,xe.isInstantPhase]),reactExports.createElement(FloatingDelayGroupContext.Provider,{value:reactExports.useMemo(()=>({...xe,setState:ye,setCurrentId:_e}),[xe,_e])},K)}function useDelayGroup(fe,K){K===void 0&&(K={});const{open:me,onOpenChange:ge,floatingId:xe}=fe,{id:ye,enabled:ve=!0}=K,_e=ye??xe,Ee=useDelayGroupContext(),{currentId:be,setCurrentId:Ae,initialDelay:Se,setState:Ce,timeoutMs:Te}=Ee;return index$3(()=>{ve&&be&&(Ce({delay:{open:1,close:getDelay(Se,"close")}}),be!==_e&&ge(!1))},[ve,_e,ge,Ce,be,Se]),index$3(()=>{function Re(){ge(!1),Ce({delay:Se,currentId:null})}if(ve&&be&&!me&&be===_e){if(Te){const De=window.setTimeout(Re,Te);return()=>{clearTimeout(De)}}Re()}},[ve,me,Ce,be,_e,ge,Se,Te]),index$3(()=>{ve&&(Ae===NOOP||!me||Ae(_e))},[ve,me,Ae,_e]),Ee}function getChildren(fe,K){let me=fe.filter(xe=>{var ye;return xe.parentId===K&&((ye=xe.context)==null?void 0:ye.open)}),ge=me;for(;ge.length;)ge=fe.filter(xe=>{var ye;return(ye=ge)==null?void 0:ye.some(ve=>{var _e;return xe.parentId===ve.id&&((_e=xe.context)==null?void 0:_e.open)})}),me=me.concat(ge);return me}const FOCUSABLE_ATTRIBUTE="data-floating-ui-focusable",bubbleHandlerKeys={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},captureHandlerKeys={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},normalizeProp=fe=>{var K,me;return{escapeKey:typeof fe=="boolean"?fe:(K=fe?.escapeKey)!=null?K:!1,outsidePress:typeof fe=="boolean"?fe:(me=fe?.outsidePress)!=null?me:!0}};function useDismiss(fe,K){K===void 0&&(K={});const{open:me,onOpenChange:ge,elements:xe,dataRef:ye}=fe,{enabled:ve=!0,escapeKey:_e=!0,outsidePress:Ee=!0,outsidePressEvent:be="pointerdown",referencePress:Ae=!1,referencePressEvent:Se="pointerdown",ancestorScroll:Ce=!1,bubbles:Te,capture:Re}=K,De=useFloatingTree(),Ie=useEffectEvent(typeof Ee=="function"?Ee:()=>!1),Be=typeof Ee=="function"?Ie:Ee,Le=reactExports.useRef(!1),Oe=reactExports.useRef(!1),{escapeKey:Fe,outsidePress:Ue}=normalizeProp(Te),{escapeKey:Ne,outsidePress:He}=normalizeProp(Re),ze=reactExports.useRef(!1),je=useEffectEvent(Nt=>{var Ye;if(!me||!ve||!_e||Nt.key!=="Escape"||ze.current)return;const at=(Ye=ye.current.floatingContext)==null?void 0:Ye.nodeId,rt=De?getChildren(De.nodesRef.current,at):[];if(!Fe&&(Nt.stopPropagation(),rt.length>0)){let Ft=!0;if(rt.forEach(Je=>{var Wt;if((Wt=Je.context)!=null&&Wt.open&&!Je.context.dataRef.current.__escapeKeyBubbles){Ft=!1;return}}),!Ft)return}ge(!1,isReactEvent(Nt)?Nt.nativeEvent:Nt,"escape-key")}),Ge=useEffectEvent(Nt=>{var Ye;const at=()=>{var rt;je(Nt),(rt=getTarget(Nt))==null||rt.removeEventListener("keydown",at)};(Ye=getTarget(Nt))==null||Ye.addEventListener("keydown",at)}),Xe=useEffectEvent(Nt=>{var Ye;const at=Le.current;Le.current=!1;const rt=Oe.current;if(Oe.current=!1,be==="click"&&rt||at||typeof Be=="function"&&!Be(Nt))return;const Ft=getTarget(Nt),Je="["+createAttribute("inert")+"]",Wt=getDocument(xe.floating).querySelectorAll(Je);let Kt=isElement(Ft)?Ft:null;for(;Kt&&!isLastTraversableNode(Kt);){const an=getParentNode(Kt);if(isLastTraversableNode(an)||!isElement(an))break;Kt=an}if(Wt.length&&isElement(Ft)&&!isRootElement(Ft)&&!contains(Ft,xe.floating)&&Array.from(Wt).every(an=>!contains(Kt,an)))return;if(isHTMLElement(Ft)&&nt){const an=Ft.clientWidth>0&&Ft.scrollWidth>Ft.clientWidth,pn=Ft.clientHeight>0&&Ft.scrollHeight>Ft.clientHeight;let En=pn&&Nt.offsetX>Ft.clientWidth;if(pn&&getComputedStyle$1(Ft).direction==="rtl"&&(En=Nt.offsetX<=Ft.offsetWidth-Ft.clientWidth),En||an&&Nt.offsetY>Ft.clientHeight)return}const Pt=(Ye=ye.current.floatingContext)==null?void 0:Ye.nodeId,Yt=De&&getChildren(De.nodesRef.current,Pt).some(an=>{var pn;return isEventTargetWithin(Nt,(pn=an.context)==null?void 0:pn.elements.floating)});if(isEventTargetWithin(Nt,xe.floating)||isEventTargetWithin(Nt,xe.domReference)||Yt)return;const Gt=De?getChildren(De.nodesRef.current,Pt):[];if(Gt.length>0){let an=!0;if(Gt.forEach(pn=>{var En;if((En=pn.context)!=null&&En.open&&!pn.context.dataRef.current.__outsidePressBubbles){an=!1;return}}),!an)return}ge(!1,Nt,"outside-press")}),qe=useEffectEvent(Nt=>{var Ye;const at=()=>{var rt;Xe(Nt),(rt=getTarget(Nt))==null||rt.removeEventListener(be,at)};(Ye=getTarget(Nt))==null||Ye.addEventListener(be,at)});reactExports.useEffect(()=>{if(!me||!ve)return;ye.current.__escapeKeyBubbles=Fe,ye.current.__outsidePressBubbles=Ue;let Nt=-1;function Ye(Wt){ge(!1,Wt,"ancestor-scroll")}function at(){window.clearTimeout(Nt),ze.current=!0}function rt(){Nt=window.setTimeout(()=>{ze.current=!1},isWebKit()?5:0)}const Ft=getDocument(xe.floating);_e&&(Ft.addEventListener("keydown",Ne?Ge:je,Ne),Ft.addEventListener("compositionstart",at),Ft.addEventListener("compositionend",rt)),Be&&Ft.addEventListener(be,He?qe:Xe,He);let Je=[];return Ce&&(isElement(xe.domReference)&&(Je=getOverflowAncestors(xe.domReference)),isElement(xe.floating)&&(Je=Je.concat(getOverflowAncestors(xe.floating))),!isElement(xe.reference)&&xe.reference&&xe.reference.contextElement&&(Je=Je.concat(getOverflowAncestors(xe.reference.contextElement)))),Je=Je.filter(Wt=>{var Kt;return Wt!==((Kt=Ft.defaultView)==null?void 0:Kt.visualViewport)}),Je.forEach(Wt=>{Wt.addEventListener("scroll",Ye,{passive:!0})}),()=>{_e&&(Ft.removeEventListener("keydown",Ne?Ge:je,Ne),Ft.removeEventListener("compositionstart",at),Ft.removeEventListener("compositionend",rt)),Be&&Ft.removeEventListener(be,He?qe:Xe,He),Je.forEach(Wt=>{Wt.removeEventListener("scroll",Ye)}),window.clearTimeout(Nt)}},[ye,xe,_e,Be,be,me,ge,Ce,ve,Fe,Ue,je,Ne,Ge,Xe,He,qe]),reactExports.useEffect(()=>{Le.current=!1},[Be,be]);const Qe=reactExports.useMemo(()=>({onKeyDown:je,[bubbleHandlerKeys[Se]]:Nt=>{Ae&&ge(!1,Nt.nativeEvent,"reference-press")}}),[je,ge,Ae,Se]),nt=reactExports.useMemo(()=>({onKeyDown:je,onMouseDown(){Oe.current=!0},onMouseUp(){Oe.current=!0},[captureHandlerKeys[be]]:()=>{Le.current=!0}}),[je,be]);return reactExports.useMemo(()=>ve?{reference:Qe,floating:nt}:{},[ve,Qe,nt])}function useFloatingRootContext(fe){const{open:K=!1,onOpenChange:me,elements:ge}=fe,xe=useId(),ye=reactExports.useRef({}),[ve]=reactExports.useState(()=>createPubSub()),_e=useFloatingParentNodeId()!=null,[Ee,be]=reactExports.useState(ge.reference),Ae=useEffectEvent((Te,Re,De)=>{ye.current.openEvent=Te?Re:void 0,ve.emit("openchange",{open:Te,event:Re,reason:De,nested:_e}),me?.(Te,Re,De)}),Se=reactExports.useMemo(()=>({setPositionReference:be}),[]),Ce=reactExports.useMemo(()=>({reference:Ee||ge.reference||null,floating:ge.floating||null,domReference:ge.reference}),[Ee,ge.reference,ge.floating]);return reactExports.useMemo(()=>({dataRef:ye,open:K,onOpenChange:Ae,elements:Ce,events:ve,floatingId:xe,refs:Se}),[K,Ae,Ce,ve,xe,Se])}function useFloating(fe){fe===void 0&&(fe={});const{nodeId:K}=fe,me=useFloatingRootContext({...fe,elements:{reference:null,floating:null,...fe.elements}}),ge=fe.rootContext||me,xe=ge.elements,[ye,ve]=reactExports.useState(null),[_e,Ee]=reactExports.useState(null),Ae=xe?.domReference||ye,Se=reactExports.useRef(null),Ce=useFloatingTree();index$3(()=>{Ae&&(Se.current=Ae)},[Ae]);const Te=useFloating$1({...fe,elements:{...xe,..._e&&{reference:_e}}}),Re=reactExports.useCallback(Oe=>{const Fe=isElement(Oe)?{getBoundingClientRect:()=>Oe.getBoundingClientRect(),contextElement:Oe}:Oe;Ee(Fe),Te.refs.setReference(Fe)},[Te.refs]),De=reactExports.useCallback(Oe=>{(isElement(Oe)||Oe===null)&&(Se.current=Oe,ve(Oe)),(isElement(Te.refs.reference.current)||Te.refs.reference.current===null||Oe!==null&&!isElement(Oe))&&Te.refs.setReference(Oe)},[Te.refs]),Ie=reactExports.useMemo(()=>({...Te.refs,setReference:De,setPositionReference:Re,domReference:Se}),[Te.refs,De,Re]),Be=reactExports.useMemo(()=>({...Te.elements,domReference:Ae}),[Te.elements,Ae]),Le=reactExports.useMemo(()=>({...Te,...ge,refs:Ie,elements:Be,nodeId:K}),[Te,Ie,Be,K,ge]);return index$3(()=>{ge.dataRef.current.floatingContext=Le;const Oe=Ce?.nodesRef.current.find(Fe=>Fe.id===K);Oe&&(Oe.context=Le)}),reactExports.useMemo(()=>({...Te,context:Le,refs:Ie,elements:Be}),[Te,Ie,Be,Le])}function useFocus(fe,K){K===void 0&&(K={});const{open:me,onOpenChange:ge,events:xe,dataRef:ye,elements:ve}=fe,{enabled:_e=!0,visibleOnly:Ee=!0}=K,be=reactExports.useRef(!1),Ae=reactExports.useRef(),Se=reactExports.useRef(!0);reactExports.useEffect(()=>{if(!_e)return;const Te=getWindow(ve.domReference);function Re(){!me&&isHTMLElement(ve.domReference)&&ve.domReference===activeElement(getDocument(ve.domReference))&&(be.current=!0)}function De(){Se.current=!0}return Te.addEventListener("blur",Re),Te.addEventListener("keydown",De,!0),()=>{Te.removeEventListener("blur",Re),Te.removeEventListener("keydown",De,!0)}},[ve.domReference,me,_e]),reactExports.useEffect(()=>{if(!_e)return;function Te(Re){let{reason:De}=Re;(De==="reference-press"||De==="escape-key")&&(be.current=!0)}return xe.on("openchange",Te),()=>{xe.off("openchange",Te)}},[xe,_e]),reactExports.useEffect(()=>()=>{clearTimeout(Ae.current)},[]);const Ce=reactExports.useMemo(()=>({onPointerDown(Te){isVirtualPointerEvent(Te.nativeEvent)||(Se.current=!1)},onMouseLeave(){be.current=!1},onFocus(Te){if(be.current)return;const Re=getTarget(Te.nativeEvent);if(Ee&&isElement(Re))try{if(isSafari()&&isMac$1())throw Error();if(!Re.matches(":focus-visible"))return}catch{if(!Se.current&&!isTypeableElement(Re))return}ge(!0,Te.nativeEvent,"focus")},onBlur(Te){be.current=!1;const Re=Te.relatedTarget,De=Te.nativeEvent,Ie=isElement(Re)&&Re.hasAttribute(createAttribute("focus-guard"))&&Re.getAttribute("data-type")==="outside";Ae.current=window.setTimeout(()=>{var Be;const Le=activeElement(ve.domReference?ve.domReference.ownerDocument:document);!Re&&Le===ve.domReference||contains((Be=ye.current.floatingContext)==null?void 0:Be.refs.floating.current,Le)||contains(ve.domReference,Le)||Ie||ge(!1,De,"focus")})}}),[ye,ve.domReference,ge,Ee]);return reactExports.useMemo(()=>_e?{reference:Ce}:{},[_e,Ce])}const ACTIVE_KEY="active",SELECTED_KEY="selected";function mergeProps(fe,K,me){const ge=new Map,xe=me==="item";let ye=fe;if(xe&&fe){const{[ACTIVE_KEY]:ve,[SELECTED_KEY]:_e,...Ee}=fe;ye=Ee}return{...me==="floating"&&{tabIndex:-1,[FOCUSABLE_ATTRIBUTE]:""},...ye,...K.map(ve=>{const _e=ve?ve[me]:null;return typeof _e=="function"?fe?_e(fe):null:_e}).concat(fe).reduce((ve,_e)=>(_e&&Object.entries(_e).forEach(Ee=>{let[be,Ae]=Ee;if(!(xe&&[ACTIVE_KEY,SELECTED_KEY].includes(be)))if(be.indexOf("on")===0){if(ge.has(be)||ge.set(be,[]),typeof Ae=="function"){var Se;(Se=ge.get(be))==null||Se.push(Ae),ve[be]=function(){for(var Ce,Te=arguments.length,Re=new Array(Te),De=0;De<Te;De++)Re[De]=arguments[De];return(Ce=ge.get(be))==null?void 0:Ce.map(Ie=>Ie(...Re)).find(Ie=>Ie!==void 0)}}}else ve[be]=Ae}),ve),{})}}function useInteractions(fe){fe===void 0&&(fe=[]);const K=fe.map(_e=>_e?.reference),me=fe.map(_e=>_e?.floating),ge=fe.map(_e=>_e?.item),xe=reactExports.useCallback(_e=>mergeProps(_e,fe,"reference"),K),ye=reactExports.useCallback(_e=>mergeProps(_e,fe,"floating"),me),ve=reactExports.useCallback(_e=>mergeProps(_e,fe,"item"),ge);return reactExports.useMemo(()=>({getReferenceProps:xe,getFloatingProps:ye,getItemProps:ve}),[xe,ye,ve])}const componentRoleToAriaRoleMap=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function useRole(fe,K){var me;K===void 0&&(K={});const{open:ge,floatingId:xe}=fe,{enabled:ye=!0,role:ve="dialog"}=K,_e=(me=componentRoleToAriaRoleMap.get(ve))!=null?me:ve,Ee=useId(),Ae=useFloatingParentNodeId()!=null,Se=reactExports.useMemo(()=>_e==="tooltip"||ve==="label"?{["aria-"+(ve==="label"?"labelledby":"describedby")]:ge?xe:void 0}:{"aria-expanded":ge?"true":"false","aria-haspopup":_e==="alertdialog"?"dialog":_e,"aria-controls":ge?xe:void 0,..._e==="listbox"&&{role:"combobox"},..._e==="menu"&&{id:Ee},..._e==="menu"&&Ae&&{role:"menuitem"},...ve==="select"&&{"aria-autocomplete":"none"},...ve==="combobox"&&{"aria-autocomplete":"list"}},[_e,xe,Ae,ge,Ee,ve]),Ce=reactExports.useMemo(()=>{const Re={id:xe,..._e&&{role:_e}};return _e==="tooltip"||ve==="label"?Re:{...Re,..._e==="menu"&&{"aria-labelledby":Ee}}},[_e,xe,Ee,ve]),Te=reactExports.useCallback(Re=>{let{active:De,selected:Ie}=Re;const Be={role:"option",...De&&{id:xe+"-option"}};switch(ve){case"select":return{...Be,"aria-selected":De&&Ie};case"combobox":return{...Be,...De&&{"aria-selected":!0}}}return{}},[xe,ve]);return reactExports.useMemo(()=>ye?{reference:Se,floating:Ce,item:Te}:{},[ye,Se,Ce,Te])}const[ScrollAreaProvider,useScrollAreaContext]=createSafeContext("ScrollArea.Root component was not found in tree");function useResizeObserver(fe,K){const me=useCallbackRef$1(K);useIsomorphicEffect$1(()=>{let ge=0;if(fe){const xe=new ResizeObserver(()=>{cancelAnimationFrame(ge),ge=window.requestAnimationFrame(me)});return xe.observe(fe),()=>{window.cancelAnimationFrame(ge),xe.unobserve(fe)}}},[fe,me])}const Corner=reactExports.forwardRef((fe,K)=>{const{style:me,...ge}=fe,xe=useScrollAreaContext(),[ye,ve]=reactExports.useState(0),[_e,Ee]=reactExports.useState(0),be=!!(ye&&_e);return useResizeObserver(xe.scrollbarX,()=>{const Ae=xe.scrollbarX?.offsetHeight||0;xe.onCornerHeightChange(Ae),Ee(Ae)}),useResizeObserver(xe.scrollbarY,()=>{const Ae=xe.scrollbarY?.offsetWidth||0;xe.onCornerWidthChange(Ae),ve(Ae)}),be?jsxRuntimeExports.jsx("div",{...ge,ref:K,style:{...me,width:ye,height:_e}}):null}),ScrollAreaCorner=reactExports.forwardRef((fe,K)=>{const me=useScrollAreaContext(),ge=!!(me.scrollbarX&&me.scrollbarY);return me.type!=="scroll"&&ge?jsxRuntimeExports.jsx(Corner,{...fe,ref:K}):null}),defaultProps$1r={scrollHideDelay:1e3,type:"hover"},ScrollAreaRoot=reactExports.forwardRef((fe,K)=>{const me=useProps("ScrollAreaRoot",defaultProps$1r,fe),{type:ge,scrollHideDelay:xe,scrollbars:ye,...ve}=me,[_e,Ee]=reactExports.useState(null),[be,Ae]=reactExports.useState(null),[Se,Ce]=reactExports.useState(null),[Te,Re]=reactExports.useState(null),[De,Ie]=reactExports.useState(null),[Be,Le]=reactExports.useState(0),[Oe,Fe]=reactExports.useState(0),[Ue,Ne]=reactExports.useState(!1),[He,ze]=reactExports.useState(!1),je=useMergedRef(K,Ge=>Ee(Ge));return jsxRuntimeExports.jsx(ScrollAreaProvider,{value:{type:ge,scrollHideDelay:xe,scrollArea:_e,viewport:be,onViewportChange:Ae,content:Se,onContentChange:Ce,scrollbarX:Te,onScrollbarXChange:Re,scrollbarXEnabled:Ue,onScrollbarXEnabledChange:Ne,scrollbarY:De,onScrollbarYChange:Ie,scrollbarYEnabled:He,onScrollbarYEnabledChange:ze,onCornerWidthChange:Le,onCornerHeightChange:Fe},children:jsxRuntimeExports.jsx(Box,{...ve,ref:je,__vars:{"--sa-corner-width":ye!=="xy"?"0px":`${Be}px`,"--sa-corner-height":ye!=="xy"?"0px":`${Oe}px`}})})});ScrollAreaRoot.displayName="@mantine/core/ScrollAreaRoot";function getThumbRatio(fe,K){const me=fe/K;return Number.isNaN(me)?0:me}function getThumbSize(fe){const K=getThumbRatio(fe.viewport,fe.content),me=fe.scrollbar.paddingStart+fe.scrollbar.paddingEnd,ge=(fe.scrollbar.size-me)*K;return Math.max(ge,18)}function linearScale(fe,K){return me=>{if(fe[0]===fe[1]||K[0]===K[1])return K[0];const ge=(K[1]-K[0])/(fe[1]-fe[0]);return K[0]+ge*(me-fe[0])}}function clamp$3(fe,[K,me]){return Math.min(me,Math.max(K,fe))}function getThumbOffsetFromScroll(fe,K,me="ltr"){const ge=getThumbSize(K),xe=K.scrollbar.paddingStart+K.scrollbar.paddingEnd,ye=K.scrollbar.size-xe,ve=K.content-K.viewport,_e=ye-ge,Ee=me==="ltr"?[0,ve]:[ve*-1,0],be=clamp$3(fe,Ee);return linearScale([0,ve],[0,_e])(be)}function getScrollPositionFromPointer(fe,K,me,ge="ltr"){const xe=getThumbSize(me),ye=xe/2,ve=K||ye,_e=xe-ve,Ee=me.scrollbar.paddingStart+ve,be=me.scrollbar.size-me.scrollbar.paddingEnd-_e,Ae=me.content-me.viewport,Se=ge==="ltr"?[0,Ae]:[Ae*-1,0];return linearScale([Ee,be],Se)(fe)}function isScrollingWithinScrollbarBounds(fe,K){return fe>0&&fe<K}function toInt(fe){return fe?parseInt(fe,10):0}function composeEventHandlers(fe,K,{checkForDefaultPrevented:me=!0}={}){return ge=>{fe?.(ge),(me===!1||!ge.defaultPrevented)&&K?.(ge)}}const[ScrollbarProvider,useScrollbarContext]=createSafeContext("ScrollAreaScrollbar was not found in tree"),Scrollbar=reactExports.forwardRef((fe,K)=>{const{sizes:me,hasThumb:ge,onThumbChange:xe,onThumbPointerUp:ye,onThumbPointerDown:ve,onThumbPositionChange:_e,onDragScroll:Ee,onWheelScroll:be,onResize:Ae,...Se}=fe,Ce=useScrollAreaContext(),[Te,Re]=reactExports.useState(null),De=useMergedRef(K,ze=>Re(ze)),Ie=reactExports.useRef(null),Be=reactExports.useRef(""),{viewport:Le}=Ce,Oe=me.content-me.viewport,Fe=useCallbackRef$1(be),Ue=useCallbackRef$1(_e),Ne=useDebouncedCallback(Ae,10),He=ze=>{if(Ie.current){const je=ze.clientX-Ie.current.left,Ge=ze.clientY-Ie.current.top;Ee({x:je,y:Ge})}};return reactExports.useEffect(()=>{const ze=je=>{const Ge=je.target;Te?.contains(Ge)&&Fe(je,Oe)};return document.addEventListener("wheel",ze,{passive:!1}),()=>document.removeEventListener("wheel",ze,{passive:!1})},[Le,Te,Oe,Fe]),reactExports.useEffect(Ue,[me,Ue]),useResizeObserver(Te,Ne),useResizeObserver(Ce.content,Ne),jsxRuntimeExports.jsx(ScrollbarProvider,{value:{scrollbar:Te,hasThumb:ge,onThumbChange:useCallbackRef$1(xe),onThumbPointerUp:useCallbackRef$1(ye),onThumbPositionChange:Ue,onThumbPointerDown:useCallbackRef$1(ve)},children:jsxRuntimeExports.jsx("div",{...Se,ref:De,"data-mantine-scrollbar":!0,style:{position:"absolute",...Se.style},onPointerDown:composeEventHandlers(fe.onPointerDown,ze=>{ze.preventDefault(),ze.button===0&&(ze.target.setPointerCapture(ze.pointerId),Ie.current=Te.getBoundingClientRect(),Be.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",He(ze))}),onPointerMove:composeEventHandlers(fe.onPointerMove,He),onPointerUp:composeEventHandlers(fe.onPointerUp,ze=>{const je=ze.target;je.hasPointerCapture(ze.pointerId)&&(ze.preventDefault(),je.releasePointerCapture(ze.pointerId))}),onLostPointerCapture:()=>{document.body.style.webkitUserSelect=Be.current,Ie.current=null}})})}),ScrollAreaScrollbarX=reactExports.forwardRef((fe,K)=>{const{sizes:me,onSizesChange:ge,style:xe,...ye}=fe,ve=useScrollAreaContext(),[_e,Ee]=reactExports.useState(),be=reactExports.useRef(null),Ae=useMergedRef(K,be,ve.onScrollbarXChange);return reactExports.useEffect(()=>{be.current&&Ee(getComputedStyle(be.current))},[be]),jsxRuntimeExports.jsx(Scrollbar,{"data-orientation":"horizontal",...ye,ref:Ae,sizes:me,style:{...xe,"--sa-thumb-width":`${getThumbSize(me)}px`},onThumbPointerDown:Se=>fe.onThumbPointerDown(Se.x),onDragScroll:Se=>fe.onDragScroll(Se.x),onWheelScroll:(Se,Ce)=>{if(ve.viewport){const Te=ve.viewport.scrollLeft+Se.deltaX;fe.onWheelScroll(Te),isScrollingWithinScrollbarBounds(Te,Ce)&&Se.preventDefault()}},onResize:()=>{be.current&&ve.viewport&&_e&&ge({content:ve.viewport.scrollWidth,viewport:ve.viewport.offsetWidth,scrollbar:{size:be.current.clientWidth,paddingStart:toInt(_e.paddingLeft),paddingEnd:toInt(_e.paddingRight)}})}})});ScrollAreaScrollbarX.displayName="@mantine/core/ScrollAreaScrollbarX";const ScrollAreaScrollbarY=reactExports.forwardRef((fe,K)=>{const{sizes:me,onSizesChange:ge,style:xe,...ye}=fe,ve=useScrollAreaContext(),[_e,Ee]=reactExports.useState(),be=reactExports.useRef(null),Ae=useMergedRef(K,be,ve.onScrollbarYChange);return reactExports.useEffect(()=>{be.current&&Ee(window.getComputedStyle(be.current))},[]),jsxRuntimeExports.jsx(Scrollbar,{...ye,"data-orientation":"vertical",ref:Ae,sizes:me,style:{"--sa-thumb-height":`${getThumbSize(me)}px`,...xe},onThumbPointerDown:Se=>fe.onThumbPointerDown(Se.y),onDragScroll:Se=>fe.onDragScroll(Se.y),onWheelScroll:(Se,Ce)=>{if(ve.viewport){const Te=ve.viewport.scrollTop+Se.deltaY;fe.onWheelScroll(Te),isScrollingWithinScrollbarBounds(Te,Ce)&&Se.preventDefault()}},onResize:()=>{be.current&&ve.viewport&&_e&&ge({content:ve.viewport.scrollHeight,viewport:ve.viewport.offsetHeight,scrollbar:{size:be.current.clientHeight,paddingStart:toInt(_e.paddingTop),paddingEnd:toInt(_e.paddingBottom)}})}})});ScrollAreaScrollbarY.displayName="@mantine/core/ScrollAreaScrollbarY";const ScrollAreaScrollbarVisible=reactExports.forwardRef((fe,K)=>{const{orientation:me="vertical",...ge}=fe,{dir:xe}=useDirection(),ye=useScrollAreaContext(),ve=reactExports.useRef(null),_e=reactExports.useRef(0),[Ee,be]=reactExports.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),Ae=getThumbRatio(Ee.viewport,Ee.content),Se={...ge,sizes:Ee,onSizesChange:be,hasThumb:Ae>0&&Ae<1,onThumbChange:Te=>{ve.current=Te},onThumbPointerUp:()=>{_e.current=0},onThumbPointerDown:Te=>{_e.current=Te}},Ce=(Te,Re)=>getScrollPositionFromPointer(Te,_e.current,Ee,Re);return me==="horizontal"?jsxRuntimeExports.jsx(ScrollAreaScrollbarX,{...Se,ref:K,onThumbPositionChange:()=>{if(ye.viewport&&ve.current){const Te=ye.viewport.scrollLeft,Re=getThumbOffsetFromScroll(Te,Ee,xe);ve.current.style.transform=`translate3d(${Re}px, 0, 0)`}},onWheelScroll:Te=>{ye.viewport&&(ye.viewport.scrollLeft=Te)},onDragScroll:Te=>{ye.viewport&&(ye.viewport.scrollLeft=Ce(Te,xe))}}):me==="vertical"?jsxRuntimeExports.jsx(ScrollAreaScrollbarY,{...Se,ref:K,onThumbPositionChange:()=>{if(ye.viewport&&ve.current){const Te=ye.viewport.scrollTop,Re=getThumbOffsetFromScroll(Te,Ee);Ee.scrollbar.size===0?ve.current.style.setProperty("--thumb-opacity","0"):ve.current.style.setProperty("--thumb-opacity","1"),ve.current.style.transform=`translate3d(0, ${Re}px, 0)`}},onWheelScroll:Te=>{ye.viewport&&(ye.viewport.scrollTop=Te)},onDragScroll:Te=>{ye.viewport&&(ye.viewport.scrollTop=Ce(Te))}}):null});ScrollAreaScrollbarVisible.displayName="@mantine/core/ScrollAreaScrollbarVisible";const ScrollAreaScrollbarAuto=reactExports.forwardRef((fe,K)=>{const me=useScrollAreaContext(),{forceMount:ge,...xe}=fe,[ye,ve]=reactExports.useState(!1),_e=fe.orientation==="horizontal",Ee=useDebouncedCallback(()=>{if(me.viewport){const be=me.viewport.offsetWidth<me.viewport.scrollWidth,Ae=me.viewport.offsetHeight<me.viewport.scrollHeight;ve(_e?be:Ae)}},10);return useResizeObserver(me.viewport,Ee),useResizeObserver(me.content,Ee),ge||ye?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":ye?"visible":"hidden",...xe,ref:K}):null});ScrollAreaScrollbarAuto.displayName="@mantine/core/ScrollAreaScrollbarAuto";const ScrollAreaScrollbarHover=reactExports.forwardRef((fe,K)=>{const{forceMount:me,...ge}=fe,xe=useScrollAreaContext(),[ye,ve]=reactExports.useState(!1);return reactExports.useEffect(()=>{const{scrollArea:_e}=xe;let Ee=0;if(_e){const be=()=>{window.clearTimeout(Ee),ve(!0)},Ae=()=>{Ee=window.setTimeout(()=>ve(!1),xe.scrollHideDelay)};return _e.addEventListener("pointerenter",be),_e.addEventListener("pointerleave",Ae),()=>{window.clearTimeout(Ee),_e.removeEventListener("pointerenter",be),_e.removeEventListener("pointerleave",Ae)}}},[xe.scrollArea,xe.scrollHideDelay]),me||ye?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{"data-state":ye?"visible":"hidden",...ge,ref:K}):null});ScrollAreaScrollbarHover.displayName="@mantine/core/ScrollAreaScrollbarHover";const ScrollAreaScrollbarScroll=reactExports.forwardRef((fe,K)=>{const{forceMount:me,...ge}=fe,xe=useScrollAreaContext(),ye=fe.orientation==="horizontal",[ve,_e]=reactExports.useState("hidden"),Ee=useDebouncedCallback(()=>_e("idle"),100);return reactExports.useEffect(()=>{if(ve==="idle"){const be=window.setTimeout(()=>_e("hidden"),xe.scrollHideDelay);return()=>window.clearTimeout(be)}},[ve,xe.scrollHideDelay]),reactExports.useEffect(()=>{const{viewport:be}=xe,Ae=ye?"scrollLeft":"scrollTop";if(be){let Se=be[Ae];const Ce=()=>{const Te=be[Ae];Se!==Te&&(_e("scrolling"),Ee()),Se=Te};return be.addEventListener("scroll",Ce),()=>be.removeEventListener("scroll",Ce)}},[xe.viewport,ye,Ee]),me||ve!=="hidden"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{"data-state":ve==="hidden"?"hidden":"visible",...ge,ref:K,onPointerEnter:composeEventHandlers(fe.onPointerEnter,()=>_e("interacting")),onPointerLeave:composeEventHandlers(fe.onPointerLeave,()=>_e("idle"))}):null}),ScrollAreaScrollbar=reactExports.forwardRef((fe,K)=>{const{forceMount:me,...ge}=fe,xe=useScrollAreaContext(),{onScrollbarXEnabledChange:ye,onScrollbarYEnabledChange:ve}=xe,_e=fe.orientation==="horizontal";return reactExports.useEffect(()=>(_e?ye(!0):ve(!0),()=>{_e?ye(!1):ve(!1)}),[_e,ye,ve]),xe.type==="hover"?jsxRuntimeExports.jsx(ScrollAreaScrollbarHover,{...ge,ref:K,forceMount:me}):xe.type==="scroll"?jsxRuntimeExports.jsx(ScrollAreaScrollbarScroll,{...ge,ref:K,forceMount:me}):xe.type==="auto"?jsxRuntimeExports.jsx(ScrollAreaScrollbarAuto,{...ge,ref:K,forceMount:me}):xe.type==="always"?jsxRuntimeExports.jsx(ScrollAreaScrollbarVisible,{...ge,ref:K}):null});ScrollAreaScrollbar.displayName="@mantine/core/ScrollAreaScrollbar";function addUnlinkedScrollListener(fe,K=()=>{}){let me={left:fe.scrollLeft,top:fe.scrollTop},ge=0;return function xe(){const ye={left:fe.scrollLeft,top:fe.scrollTop},ve=me.left!==ye.left,_e=me.top!==ye.top;(ve||_e)&&K(),me=ye,ge=window.requestAnimationFrame(xe)}(),()=>window.cancelAnimationFrame(ge)}const Thumb$3=reactExports.forwardRef((fe,K)=>{const{style:me,...ge}=fe,xe=useScrollAreaContext(),ye=useScrollbarContext(),{onThumbPositionChange:ve}=ye,_e=useMergedRef(K,Ae=>ye.onThumbChange(Ae)),Ee=reactExports.useRef(void 0),be=useDebouncedCallback(()=>{Ee.current&&(Ee.current(),Ee.current=void 0)},100);return reactExports.useEffect(()=>{const{viewport:Ae}=xe;if(Ae){const Se=()=>{if(be(),!Ee.current){const Ce=addUnlinkedScrollListener(Ae,ve);Ee.current=Ce,ve()}};return ve(),Ae.addEventListener("scroll",Se),()=>Ae.removeEventListener("scroll",Se)}},[xe.viewport,be,ve]),jsxRuntimeExports.jsx("div",{"data-state":ye.hasThumb?"visible":"hidden",...ge,ref:_e,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...me},onPointerDownCapture:composeEventHandlers(fe.onPointerDownCapture,Ae=>{const Ce=Ae.target.getBoundingClientRect(),Te=Ae.clientX-Ce.left,Re=Ae.clientY-Ce.top;ye.onThumbPointerDown({x:Te,y:Re})}),onPointerUp:composeEventHandlers(fe.onPointerUp,ye.onThumbPointerUp)})});Thumb$3.displayName="@mantine/core/ScrollAreaThumb";const ScrollAreaThumb=reactExports.forwardRef((fe,K)=>{const{forceMount:me,...ge}=fe,xe=useScrollbarContext();return me||xe.hasThumb?jsxRuntimeExports.jsx(Thumb$3,{ref:K,...ge}):null});ScrollAreaThumb.displayName="@mantine/core/ScrollAreaThumb";const ScrollAreaViewport=reactExports.forwardRef(({children:fe,style:K,...me},ge)=>{const xe=useScrollAreaContext(),ye=useMergedRef(ge,xe.onViewportChange);return jsxRuntimeExports.jsx(Box,{...me,ref:ye,style:{overflowX:xe.scrollbarXEnabled?"scroll":"hidden",overflowY:xe.scrollbarYEnabled?"scroll":"hidden",...K},children:jsxRuntimeExports.jsx("div",{style:{minWidth:"100%",display:"table"},ref:xe.onContentChange,children:fe})})});ScrollAreaViewport.displayName="@mantine/core/ScrollAreaViewport";var __default__$F={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const defaultProps$1q={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},varsResolver$L=(fe,{scrollbarSize:K,overscrollBehavior:me})=>({root:{"--scrollarea-scrollbar-size":rem(K),"--scrollarea-over-scroll-behavior":me}}),ScrollArea=factory((fe,K)=>{const me=useProps("ScrollArea",defaultProps$1q,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,scrollbarSize:Ee,vars:be,type:Ae,scrollHideDelay:Se,viewportProps:Ce,viewportRef:Te,onScrollPositionChange:Re,children:De,offsetScrollbars:Ie,scrollbars:Be,onBottomReached:Le,onTopReached:Oe,overscrollBehavior:Fe,...Ue}=me,[Ne,He]=reactExports.useState(!1),[ze,je]=reactExports.useState(!1),[Ge,Xe]=reactExports.useState(!1),qe=useStyles({name:"ScrollArea",props:me,classes:__default__$F,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:be,varsResolver:varsResolver$L}),Qe=reactExports.useRef(null),nt=useMergeRefs([Te,Qe]);return reactExports.useEffect(()=>{if(!Qe.current||Ie!=="present")return;const Nt=Qe.current,Ye=new ResizeObserver(()=>{const{scrollHeight:at,clientHeight:rt,scrollWidth:Ft,clientWidth:Je}=Nt;je(at>rt),Xe(Ft>Je)});return Ye.observe(Nt),()=>Ye.disconnect()},[Qe,Ie]),jsxRuntimeExports.jsxs(ScrollAreaRoot,{type:Ae==="never"?"always":Ae,scrollHideDelay:Se,ref:K,scrollbars:Be,...qe("root"),...Ue,children:[jsxRuntimeExports.jsx(ScrollAreaViewport,{...Ce,...qe("viewport",{style:Ce?.style}),ref:nt,"data-offset-scrollbars":Ie===!0?"xy":Ie||void 0,"data-scrollbars":Be||void 0,"data-horizontal-hidden":Ie==="present"&&!Ge?"true":void 0,"data-vertical-hidden":Ie==="present"&&!ze?"true":void 0,onScroll:Nt=>{Ce?.onScroll?.(Nt),Re?.({x:Nt.currentTarget.scrollLeft,y:Nt.currentTarget.scrollTop});const{scrollTop:Ye,scrollHeight:at,clientHeight:rt}=Nt.currentTarget;Ye-(at-rt)>=0&&Le?.(),Ye===0&&Oe?.()},children:De}),(Be==="xy"||Be==="x")&&jsxRuntimeExports.jsx(ScrollAreaScrollbar,{...qe("scrollbar"),orientation:"horizontal","data-hidden":Ae==="never"||void 0,forceMount:!0,onMouseEnter:()=>He(!0),onMouseLeave:()=>He(!1),children:jsxRuntimeExports.jsx(ScrollAreaThumb,{...qe("thumb")})}),(Be==="xy"||Be==="y")&&jsxRuntimeExports.jsx(ScrollAreaScrollbar,{...qe("scrollbar"),orientation:"vertical","data-hidden":Ae==="never"||void 0,forceMount:!0,onMouseEnter:()=>He(!0),onMouseLeave:()=>He(!1),children:jsxRuntimeExports.jsx(ScrollAreaThumb,{...qe("thumb")})}),jsxRuntimeExports.jsx(ScrollAreaCorner,{...qe("corner"),"data-hovered":Ne||void 0,"data-hidden":Ae==="never"||void 0})]})});ScrollArea.displayName="@mantine/core/ScrollArea";const ScrollAreaAutosize=factory((fe,K)=>{const{children:me,classNames:ge,styles:xe,scrollbarSize:ye,scrollHideDelay:ve,type:_e,dir:Ee,offsetScrollbars:be,viewportRef:Ae,onScrollPositionChange:Se,unstyled:Ce,variant:Te,viewportProps:Re,scrollbars:De,style:Ie,vars:Be,onBottomReached:Le,onTopReached:Oe,...Fe}=useProps("ScrollAreaAutosize",defaultProps$1q,fe);return jsxRuntimeExports.jsx(Box,{...Fe,ref:K,style:[{display:"flex",overflow:"auto"},Ie],children:jsxRuntimeExports.jsx(Box,{style:{display:"flex",flexDirection:"column",flex:1},children:jsxRuntimeExports.jsx(ScrollArea,{classNames:ge,styles:xe,scrollHideDelay:ve,scrollbarSize:ye,type:_e,dir:Ee,offsetScrollbars:be,viewportRef:Ae,onScrollPositionChange:Se,unstyled:Ce,variant:Te,viewportProps:Re,vars:Be,scrollbars:De,onBottomReached:Le,onTopReached:Oe,children:me})})})});ScrollArea.classes=__default__$F;ScrollAreaAutosize.displayName="@mantine/core/ScrollAreaAutosize";ScrollAreaAutosize.classes=__default__$F;ScrollArea.Autosize=ScrollAreaAutosize;var __default__$E={root:"m_87cf2631"};const defaultProps$1p={__staticSelector:"UnstyledButton"},UnstyledButton=polymorphicFactory((fe,K)=>{const me=useProps("UnstyledButton",defaultProps$1p,fe),{className:ge,component:xe="button",__staticSelector:ye,unstyled:ve,classNames:_e,styles:Ee,style:be,...Ae}=me,Se=useStyles({name:ye,props:me,classes:__default__$E,className:ge,style:be,classNames:_e,styles:Ee,unstyled:ve});return jsxRuntimeExports.jsx(Box,{...Se("root",{focusable:!0}),component:xe,ref:K,type:xe==="button"?"button":void 0,...Ae})});UnstyledButton.classes=__default__$E;UnstyledButton.displayName="@mantine/core/UnstyledButton";var __default__$D={root:"m_515a97f8"};const defaultProps$1o={},VisuallyHidden=factory((fe,K)=>{const me=useProps("VisuallyHidden",defaultProps$1o,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,...be}=me,Ae=useStyles({name:"VisuallyHidden",classes:__default__$D,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e});return jsxRuntimeExports.jsx(Box,{component:"span",ref:K,...Ae("root"),...be})});VisuallyHidden.classes=__default__$D;VisuallyHidden.displayName="@mantine/core/VisuallyHidden";var __default__$C={root:"m_1b7284a3"};const defaultProps$1n={},varsResolver$K=(fe,{radius:K,shadow:me})=>({root:{"--paper-radius":K===void 0?void 0:getRadius(K),"--paper-shadow":getShadow(me)}}),Paper=polymorphicFactory((fe,K)=>{const me=useProps("Paper",defaultProps$1n,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,withBorder:Ee,vars:be,radius:Ae,shadow:Se,variant:Ce,mod:Te,...Re}=me,De=useStyles({name:"Paper",props:me,classes:__default__$C,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:be,varsResolver:varsResolver$K});return jsxRuntimeExports.jsx(Box,{ref:K,mod:[{"data-with-border":Ee},Te],...De("root"),variant:Ce,...Re})});Paper.classes=__default__$C;Paper.displayName="@mantine/core/Paper";function getFloatingPosition(fe,K){if(fe==="rtl"&&(K.includes("right")||K.includes("left"))){const[me,ge]=K.split("-"),xe=me==="right"?"left":"right";return ge===void 0?xe:`${xe}-${ge}`}return K}function horizontalSide(fe,K,me,ge){return fe==="center"||ge==="center"?{top:K}:fe==="end"?{bottom:me}:fe==="start"?{top:me}:{}}function verticalSide(fe,K,me,ge,xe){return fe==="center"||ge==="center"?{left:K}:fe==="end"?{[xe==="ltr"?"right":"left"]:me}:fe==="start"?{[xe==="ltr"?"left":"right"]:me}:{}}const radiusByFloatingSide={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function getArrowPositionStyles({position:fe,arrowSize:K,arrowOffset:me,arrowRadius:ge,arrowPosition:xe,arrowX:ye,arrowY:ve,dir:_e}){const[Ee,be="center"]=fe.split("-"),Ae={width:K,height:K,transform:"rotate(45deg)",position:"absolute",[radiusByFloatingSide[Ee]]:ge},Se=-K/2;return Ee==="left"?{...Ae,...horizontalSide(be,ve,me,xe),right:Se,borderLeftColor:"transparent",borderBottomColor:"transparent",clipPath:"polygon(100% 0, 0 0, 100% 100%)"}:Ee==="right"?{...Ae,...horizontalSide(be,ve,me,xe),left:Se,borderRightColor:"transparent",borderTopColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 100%)"}:Ee==="top"?{...Ae,...verticalSide(be,ye,me,xe,_e),bottom:Se,borderTopColor:"transparent",borderLeftColor:"transparent",clipPath:"polygon(0 100%, 100% 100%, 100% 0)"}:Ee==="bottom"?{...Ae,...verticalSide(be,ye,me,xe,_e),top:Se,borderBottomColor:"transparent",borderRightColor:"transparent",clipPath:"polygon(0 100%, 0 0, 100% 0)"}:{}}const FloatingArrow=reactExports.forwardRef(({position:fe,arrowSize:K,arrowOffset:me,arrowRadius:ge,arrowPosition:xe,visible:ye,arrowX:ve,arrowY:_e,style:Ee,...be},Ae)=>{const{dir:Se}=useDirection();return ye?jsxRuntimeExports.jsx("div",{...be,ref:Ae,style:{...Ee,...getArrowPositionStyles({position:fe,arrowSize:K,arrowOffset:me,arrowRadius:ge,arrowPosition:xe,dir:Se,arrowX:ve,arrowY:_e})}}):null});FloatingArrow.displayName="@mantine/core/FloatingArrow";var __default__$B={root:"m_9814e45f"};const defaultProps$1m={zIndex:getDefaultZIndex("modal")},varsResolver$J=(fe,{gradient:K,color:me,backgroundOpacity:ge,blur:xe,radius:ye,zIndex:ve})=>({root:{"--overlay-bg":K||(me!==void 0||ge!==void 0)&&rgba$1(me||"#000",ge??.6)||void 0,"--overlay-filter":xe?`blur(${rem(xe)})`:void 0,"--overlay-radius":ye===void 0?void 0:getRadius(ye),"--overlay-z-index":ve?.toString()}}),Overlay=polymorphicFactory((fe,K)=>{const me=useProps("Overlay",defaultProps$1m,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,fixed:be,center:Ae,children:Se,radius:Ce,zIndex:Te,gradient:Re,blur:De,color:Ie,backgroundOpacity:Be,mod:Le,...Oe}=me,Fe=useStyles({name:"Overlay",props:me,classes:__default__$B,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$J});return jsxRuntimeExports.jsx(Box,{ref:K,...Fe("root"),mod:[{center:Ae,fixed:be},Le],...Oe,children:Se})});Overlay.classes=__default__$B;Overlay.displayName="@mantine/core/Overlay";function createPortalNode(fe){const K=document.createElement("div");return K.setAttribute("data-portal","true"),typeof fe.className=="string"&&K.classList.add(...fe.className.split(" ").filter(Boolean)),typeof fe.style=="object"&&Object.assign(K.style,fe.style),typeof fe.id=="string"&&K.setAttribute("id",fe.id),K}function getTargetNode({target:fe,reuseTargetNode:K,...me}){if(fe)return typeof fe=="string"?document.querySelector(fe)||createPortalNode(me):fe;if(K){const ge=document.querySelector("[data-mantine-shared-portal-node]");if(ge)return ge;const xe=createPortalNode(me);return xe.setAttribute("data-mantine-shared-portal-node","true"),document.body.appendChild(xe),xe}return createPortalNode(me)}const defaultProps$1l={},Portal$1=factory((fe,K)=>{const{children:me,target:ge,reuseTargetNode:xe,...ye}=useProps("Portal",defaultProps$1l,fe),[ve,_e]=reactExports.useState(!1),Ee=reactExports.useRef(null);return useIsomorphicEffect$1(()=>(_e(!0),Ee.current=getTargetNode({target:ge,reuseTargetNode:xe,...ye}),assignRef$1(K,Ee.current),!ge&&!xe&&Ee.current&&document.body.appendChild(Ee.current),()=>{!ge&&!xe&&Ee.current&&document.body.removeChild(Ee.current)}),[ge]),!ve||!Ee.current?null:reactDomExports.createPortal(jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:me}),Ee.current)});Portal$1.displayName="@mantine/core/Portal";const OptionalPortal=factory(({withinPortal:fe=!0,children:K,...me},ge)=>useMantineEnv()==="test"||!fe?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K}):jsxRuntimeExports.jsx(Portal$1,{ref:ge,...me,children:K}));OptionalPortal.displayName="@mantine/core/OptionalPortal";const popIn=fe=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${fe==="bottom"?10:-10}px)`},transitionProperty:"transform, opacity"}),transitions={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(30px)"},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-30px)"},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(30px)"},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-30px)"},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(-20px) skew(-10deg, -5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:"translateY(20px) skew(-10deg, -5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(-5deg)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:"translateY(20px) rotate(5deg)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...popIn("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...popIn("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...popIn("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...popIn("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...popIn("top"),common:{transformOrigin:"top right"}}},transitionStatuses={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function getTransitionStyles({transition:fe,state:K,duration:me,timingFunction:ge}){const xe={WebkitBackfaceVisibility:"hidden",willChange:"transform, opacity",transitionDuration:`${me}ms`,transitionTimingFunction:ge};return typeof fe=="string"?fe in transitions?{transitionProperty:transitions[fe].transitionProperty,...xe,...transitions[fe].common,...transitions[fe][transitionStatuses[K]]}:{}:{transitionProperty:fe.transitionProperty,...xe,...fe.common,...fe[transitionStatuses[K]]}}function useTransition({duration:fe,exitDuration:K,timingFunction:me,mounted:ge,onEnter:xe,onExit:ye,onEntered:ve,onExited:_e,enterDelay:Ee,exitDelay:be}){const Ae=useMantineTheme(),Se=useReducedMotion(),Ce=Ae.respectReducedMotion?Se:!1,[Te,Re]=reactExports.useState(Ce?0:fe),[De,Ie]=reactExports.useState(ge?"entered":"exited"),Be=reactExports.useRef(-1),Le=reactExports.useRef(-1),Oe=reactExports.useRef(-1),Fe=Ne=>{const He=Ne?xe:ye,ze=Ne?ve:_e;window.clearTimeout(Be.current);const je=Ce?0:Ne?fe:K;Re(je),je===0?(typeof He=="function"&&He(),typeof ze=="function"&&ze(),Ie(Ne?"entered":"exited")):Oe.current=requestAnimationFrame(()=>{ReactDOM$2.flushSync(()=>{Ie(Ne?"pre-entering":"pre-exiting")}),Oe.current=requestAnimationFrame(()=>{typeof He=="function"&&He(),Ie(Ne?"entering":"exiting"),Be.current=window.setTimeout(()=>{typeof ze=="function"&&ze(),Ie(Ne?"entered":"exited")},je)})})},Ue=Ne=>{if(window.clearTimeout(Le.current),typeof(Ne?Ee:be)!="number"){Fe(Ne);return}Le.current=window.setTimeout(()=>{Fe(Ne)},Ne?Ee:be)};return useDidUpdate(()=>{Ue(ge)},[ge]),reactExports.useEffect(()=>()=>{window.clearTimeout(Be.current),cancelAnimationFrame(Oe.current)},[]),{transitionDuration:Te,transitionStatus:De,transitionTimingFunction:me||"ease"}}function Transition$1({keepMounted:fe,transition:K="fade",duration:me=250,exitDuration:ge=me,mounted:xe,children:ye,timingFunction:ve="ease",onExit:_e,onEntered:Ee,onEnter:be,onExited:Ae,enterDelay:Se,exitDelay:Ce}){const Te=useMantineEnv(),{transitionDuration:Re,transitionStatus:De,transitionTimingFunction:Ie}=useTransition({mounted:xe,exitDuration:ge,duration:me,timingFunction:ve,onExit:_e,onEntered:Ee,onEnter:be,onExited:Ae,enterDelay:Se,exitDelay:Ce});return Re===0||Te==="test"?xe?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ye({})}):fe?ye({display:"none"}):null:De==="exited"?fe?ye({display:"none"}):null:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:ye(getTransitionStyles({transition:K,duration:Re,state:De,timingFunction:Ie}))})}Transition$1.displayName="@mantine/core/Transition";const[PopoverContextProvider,usePopoverContext]=createSafeContext("Popover component was not found in the tree");function FocusTrap({children:fe,active:K=!0,refProp:me="ref",innerRef:ge}){const xe=useFocusTrap(K),ye=useMergedRef(xe,ge);return isElement$1(fe)?reactExports.cloneElement(fe,{[me]:ye}):fe}function FocusTrapInitialFocus(fe){return jsxRuntimeExports.jsx(VisuallyHidden,{tabIndex:-1,"data-autofocus":!0,...fe})}FocusTrap.displayName="@mantine/core/FocusTrap";FocusTrapInitialFocus.displayName="@mantine/core/FocusTrapInitialFocus";FocusTrap.InitialFocus=FocusTrapInitialFocus;var __default__$A={dropdown:"m_38a85659",arrow:"m_a31dc6c1",overlay:"m_3d7bc908"};const defaultProps$1k={},PopoverDropdown=factory((fe,K)=>{const me=useProps("PopoverDropdown",defaultProps$1k,fe),{className:ge,style:xe,vars:ye,children:ve,onKeyDownCapture:_e,variant:Ee,classNames:be,styles:Ae,...Se}=me,Ce=usePopoverContext(),Te=useFocusReturn({opened:Ce.opened,shouldReturnFocus:Ce.returnFocus}),Re=Ce.withRoles?{"aria-labelledby":Ce.getTargetId(),id:Ce.getDropdownId(),role:"dialog",tabIndex:-1}:{},De=useMergedRef(K,Ce.floating);return Ce.disabled?null:jsxRuntimeExports.jsx(OptionalPortal,{...Ce.portalProps,withinPortal:Ce.withinPortal,children:jsxRuntimeExports.jsx(Transition$1,{mounted:Ce.opened,...Ce.transitionProps,transition:Ce.transitionProps?.transition||"fade",duration:Ce.transitionProps?.duration??150,keepMounted:Ce.keepMounted,exitDuration:typeof Ce.transitionProps?.exitDuration=="number"?Ce.transitionProps.exitDuration:Ce.transitionProps?.duration,children:Ie=>jsxRuntimeExports.jsx(FocusTrap,{active:Ce.trapFocus&&Ce.opened,innerRef:De,children:jsxRuntimeExports.jsxs(Box,{...Re,...Se,variant:Ee,onKeyDownCapture:closeOnEscape(()=>{Ce.onClose?.(),Ce.onDismiss?.()},{active:Ce.closeOnEscape,onTrigger:Te,onKeyDown:_e}),"data-position":Ce.placement,"data-fixed":Ce.floatingStrategy==="fixed"||void 0,...Ce.getStyles("dropdown",{className:ge,props:me,classNames:be,styles:Ae,style:[{...Ie,zIndex:Ce.zIndex,top:Ce.y??0,left:Ce.x??0,width:Ce.width==="target"?void 0:rem(Ce.width)},Ce.resolvedStyles.dropdown,Ae?.dropdown,xe]}),children:[ve,jsxRuntimeExports.jsx(FloatingArrow,{ref:Ce.arrowRef,arrowX:Ce.arrowX,arrowY:Ce.arrowY,visible:Ce.withArrow,position:Ce.placement,arrowSize:Ce.arrowSize,arrowRadius:Ce.arrowRadius,arrowOffset:Ce.arrowOffset,arrowPosition:Ce.arrowPosition,...Ce.getStyles("arrow",{props:me,classNames:be,styles:Ae})})]})})})})});PopoverDropdown.classes=__default__$A;PopoverDropdown.displayName="@mantine/core/PopoverDropdown";const defaultProps$1j={refProp:"ref",popupType:"dialog"},PopoverTarget=factory((fe,K)=>{const{children:me,refProp:ge,popupType:xe,...ye}=useProps("PopoverTarget",defaultProps$1j,fe);if(!isElement$1(me))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const ve=ye,_e=usePopoverContext(),Ee=useMergedRef(_e.reference,getRefProp(me),K),be=_e.withRoles?{"aria-haspopup":xe,"aria-expanded":_e.opened,"aria-controls":_e.getDropdownId(),id:_e.getTargetId()}:{};return reactExports.cloneElement(me,{...ve,...be,..._e.targetProps,className:clsx(_e.targetProps.className,ve.className,me.props.className),[ge]:Ee,..._e.controlled?null:{onClick:_e.onToggle}})});PopoverTarget.displayName="@mantine/core/PopoverTarget";function useFloatingAutoUpdate({opened:fe,floating:K,position:me,positionDependencies:ge}){const[xe,ye]=reactExports.useState(0);reactExports.useEffect(()=>{if(K.refs.reference.current&&K.refs.floating.current&&fe)return autoUpdate(K.refs.reference.current,K.refs.floating.current,K.update)},[K.refs.reference.current,K.refs.floating.current,fe,xe,me]),useDidUpdate(()=>{K.update()},ge),useDidUpdate(()=>{ye(ve=>ve+1)},[fe])}function getDefaultMiddlewares$1(fe){if(fe===void 0)return{shift:!0,flip:!0};const K={...fe};return fe.shift===void 0&&(K.shift=!0),fe.flip===void 0&&(K.flip=!0),K}function getPopoverMiddlewares(fe,K){const me=getDefaultMiddlewares$1(fe.middlewares),ge=[offset(fe.offset)];return me.shift&&ge.push(shift(typeof me.shift=="boolean"?{limiter:limitShift(),padding:5}:{limiter:limitShift(),padding:5,...me.shift})),me.flip&&ge.push(typeof me.flip=="boolean"?flip():flip(me.flip)),me.inline&&ge.push(typeof me.inline=="boolean"?inline():inline(me.inline)),ge.push(arrow({element:fe.arrowRef,padding:fe.arrowOffset})),(me.size||fe.width==="target")&&ge.push(size({...typeof me.size=="boolean"?{}:me.size,apply({rects:xe,availableWidth:ye,availableHeight:ve,..._e}){const be=K().refs.floating.current?.style??{};me.size&&(typeof me.size=="object"&&me.size.apply?me.size.apply({rects:xe,availableWidth:ye,availableHeight:ve,..._e}):Object.assign(be,{maxWidth:`${ye}px`,maxHeight:`${ve}px`})),fe.width==="target"&&Object.assign(be,{width:`${xe.reference.width}px`})}})),ge}function usePopover(fe){const[K,me]=useUncontrolled({value:fe.opened,defaultValue:fe.defaultOpened,finalValue:!1,onChange:fe.onChange}),ge=reactExports.useRef(K),xe=()=>{K&&me(!1)},ye=()=>me(!K),ve=useFloating({strategy:fe.strategy,placement:fe.position,middleware:getPopoverMiddlewares(fe,()=>ve)});return useFloatingAutoUpdate({opened:K,position:fe.position,positionDependencies:fe.positionDependencies||[],floating:ve}),useDidUpdate(()=>{fe.onPositionChange?.(ve.placement)},[ve.placement]),useDidUpdate(()=>{K!==ge.current&&(K?fe.onOpen?.():fe.onClose?.()),ge.current=K},[K,fe.onClose,fe.onOpen]),{floating:ve,controlled:typeof fe.opened=="boolean",opened:K,onClose:xe,onToggle:ye}}const defaultProps$1i={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,withOverlay:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:getDefaultZIndex("popover"),__staticSelector:"Popover",width:"max-content"},varsResolver$I=(fe,{radius:K,shadow:me})=>({dropdown:{"--popover-radius":K===void 0?void 0:getRadius(K),"--popover-shadow":getShadow(me)}});function Popover(fe){const K=useProps("Popover",defaultProps$1i,fe),{children:me,position:ge,offset:xe,onPositionChange:ye,positionDependencies:ve,opened:_e,transitionProps:Ee,onExitTransitionEnd:be,onEnterTransitionEnd:Ae,width:Se,middlewares:Ce,withArrow:Te,arrowSize:Re,arrowOffset:De,arrowRadius:Ie,arrowPosition:Be,unstyled:Le,classNames:Oe,styles:Fe,closeOnClickOutside:Ue,withinPortal:Ne,portalProps:He,closeOnEscape:ze,clickOutsideEvents:je,trapFocus:Ge,onClose:Xe,onDismiss:qe,onOpen:Qe,onChange:nt,zIndex:Nt,radius:Ye,shadow:at,id:rt,defaultOpened:Ft,__staticSelector:Je,withRoles:Wt,disabled:Kt,returnFocus:Pt,variant:Yt,keepMounted:Gt,vars:an,floatingStrategy:pn,withOverlay:En,overlayProps:$n,...Un}=K,kn=useStyles({name:Je,props:K,classes:__default__$A,classNames:Oe,styles:Fe,unstyled:Le,rootSelector:"dropdown",vars:an,varsResolver:varsResolver$I}),{resolvedStyles:bn}=useResolvedStylesApi({classNames:Oe,styles:Fe,props:K}),Mn=reactExports.useRef(null),[zt,Dn]=reactExports.useState(null),[hn,mn]=reactExports.useState(null),{dir:dn}=useDirection(),Hn=useId$1(rt),Bn=usePopover({middlewares:Ce,width:Se,position:getFloatingPosition(dn,ge),offset:typeof xe=="number"?xe+(Te?Re/2:0):xe,arrowRef:Mn,arrowOffset:De,onPositionChange:ye,positionDependencies:ve,opened:_e,defaultOpened:Ft,onChange:nt,onOpen:Qe,onClose:Xe,onDismiss:qe,strategy:pn});useClickOutside(()=>{Ue&&(Bn.onClose(),qe?.())},je,[zt,hn]);const kt=reactExports.useCallback(gn=>{Dn(gn),Bn.floating.refs.setReference(gn)},[Bn.floating.refs.setReference]),Dt=reactExports.useCallback(gn=>{mn(gn),Bn.floating.refs.setFloating(gn)},[Bn.floating.refs.setFloating]),ln=reactExports.useCallback(()=>{Ee?.onExited?.(),be?.()},[Ee?.onExited,be]),nn=reactExports.useCallback(()=>{Ee?.onEntered?.(),Ae?.()},[Ee?.onEntered,Ae]);return jsxRuntimeExports.jsxs(PopoverContextProvider,{value:{returnFocus:Pt,disabled:Kt,controlled:Bn.controlled,reference:kt,floating:Dt,x:Bn.floating.x,y:Bn.floating.y,arrowX:Bn.floating?.middlewareData?.arrow?.x,arrowY:Bn.floating?.middlewareData?.arrow?.y,opened:Bn.opened,arrowRef:Mn,transitionProps:{...Ee,onExited:ln,onEntered:nn},width:Se,withArrow:Te,arrowSize:Re,arrowOffset:De,arrowRadius:Ie,arrowPosition:Be,placement:Bn.floating.placement,trapFocus:Ge,withinPortal:Ne,portalProps:He,zIndex:Nt,radius:Ye,shadow:at,closeOnEscape:ze,onDismiss:qe,onClose:Bn.onClose,onToggle:Bn.onToggle,getTargetId:()=>`${Hn}-target`,getDropdownId:()=>`${Hn}-dropdown`,withRoles:Wt,targetProps:Un,__staticSelector:Je,classNames:Oe,styles:Fe,unstyled:Le,variant:Yt,keepMounted:Gt,getStyles:kn,resolvedStyles:bn,floatingStrategy:pn},children:[me,En&&jsxRuntimeExports.jsx(Transition$1,{transition:"fade",mounted:Bn.opened,duration:Ee?.duration||250,exitDuration:Ee?.exitDuration||250,children:gn=>jsxRuntimeExports.jsx(OptionalPortal,{withinPortal:Ne,children:jsxRuntimeExports.jsx(Overlay,{...$n,...kn("overlay",{className:$n?.className,style:[gn,$n?.style]})})})})]})}Popover.Target=PopoverTarget;Popover.Dropdown=PopoverDropdown;Popover.displayName="@mantine/core/Popover";Popover.extend=fe=>fe;var __default__$z={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const Bars=reactExports.forwardRef(({className:fe,...K},me)=>jsxRuntimeExports.jsxs(Box,{component:"span",className:clsx(__default__$z.barsLoader,fe),...K,ref:me,children:[jsxRuntimeExports.jsx("span",{className:__default__$z.bar}),jsxRuntimeExports.jsx("span",{className:__default__$z.bar}),jsxRuntimeExports.jsx("span",{className:__default__$z.bar})]}));Bars.displayName="@mantine/core/Bars";const Dots=reactExports.forwardRef(({className:fe,...K},me)=>jsxRuntimeExports.jsxs(Box,{component:"span",className:clsx(__default__$z.dotsLoader,fe),...K,ref:me,children:[jsxRuntimeExports.jsx("span",{className:__default__$z.dot}),jsxRuntimeExports.jsx("span",{className:__default__$z.dot}),jsxRuntimeExports.jsx("span",{className:__default__$z.dot})]}));Dots.displayName="@mantine/core/Dots";const Oval=reactExports.forwardRef(({className:fe,...K},me)=>jsxRuntimeExports.jsx(Box,{component:"span",className:clsx(__default__$z.ovalLoader,fe),...K,ref:me}));Oval.displayName="@mantine/core/Oval";const defaultLoaders={bars:Bars,oval:Oval,dots:Dots},defaultProps$1h={loaders:defaultLoaders,type:"oval"},varsResolver$H=(fe,{size:K,color:me})=>({root:{"--loader-size":getSize(K,"loader-size"),"--loader-color":me?getThemeColor(me,fe):void 0}}),Loader$1=factory((fe,K)=>{const me=useProps("Loader",defaultProps$1h,fe),{size:ge,color:xe,type:ye,vars:ve,className:_e,style:Ee,classNames:be,styles:Ae,unstyled:Se,loaders:Ce,variant:Te,children:Re,...De}=me,Ie=useStyles({name:"Loader",props:me,classes:__default__$z,className:_e,style:Ee,classNames:be,styles:Ae,unstyled:Se,vars:ve,varsResolver:varsResolver$H});return Re?jsxRuntimeExports.jsx(Box,{...Ie("root"),ref:K,...De,children:Re}):jsxRuntimeExports.jsx(Box,{...Ie("root"),ref:K,component:Ce[ye],variant:Te,size:ge,...De})});Loader$1.defaultLoaders=defaultLoaders;Loader$1.classes=__default__$z;Loader$1.displayName="@mantine/core/Loader";var __default__$y={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const defaultProps$1g={orientation:"horizontal"},varsResolver$G=(fe,{borderWidth:K})=>({group:{"--ai-border-width":rem(K)}}),ActionIconGroup=factory((fe,K)=>{const me=useProps("ActionIconGroup",defaultProps$1g,fe),{className:ge,style:xe,classNames:ye,styles:ve,unstyled:_e,orientation:Ee,vars:be,borderWidth:Ae,variant:Se,mod:Ce,...Te}=useProps("ActionIconGroup",defaultProps$1g,fe),Re=useStyles({name:"ActionIconGroup",props:me,classes:__default__$y,className:ge,style:xe,classNames:ye,styles:ve,unstyled:_e,vars:be,varsResolver:varsResolver$G,rootSelector:"group"});return jsxRuntimeExports.jsx(Box,{...Re("group"),ref:K,variant:Se,mod:[{"data-orientation":Ee},Ce],role:"group",...Te})});ActionIconGroup.classes=__default__$y;ActionIconGroup.displayName="@mantine/core/ActionIconGroup";const defaultProps$1f={},varsResolver$F=(fe,{radius:K,color:me,gradient:ge,variant:xe,autoContrast:ye,size:ve})=>{const _e=fe.variantColorResolver({color:me||fe.primaryColor,theme:fe,gradient:ge,variant:xe||"filled",autoContrast:ye});return{groupSection:{"--section-height":getSize(ve,"section-height"),"--section-padding-x":getSize(ve,"section-padding-x"),"--section-fz":getFontSize(ve),"--section-radius":K===void 0?void 0:getRadius(K),"--section-bg":me||xe?_e.background:void 0,"--section-color":_e.color,"--section-bd":me||xe?_e.border:void 0}}},ActionIconGroupSection=factory((fe,K)=>{const me=useProps("ActionIconGroupSection",defaultProps$1f,fe),{className:ge,style:xe,classNames:ye,styles:ve,unstyled:_e,vars:Ee,variant:be,gradient:Ae,radius:Se,autoContrast:Ce,...Te}=useProps("ActionIconGroupSection",defaultProps$1f,fe),Re=useStyles({name:"ActionIconGroupSection",props:me,classes:__default__$y,className:ge,style:xe,classNames:ye,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$F,rootSelector:"groupSection"});return jsxRuntimeExports.jsx(Box,{...Re("groupSection"),ref:K,variant:be,...Te})});ActionIconGroupSection.classes=__default__$y;ActionIconGroupSection.displayName="@mantine/core/ActionIconGroupSection";const defaultProps$1e={},varsResolver$E=(fe,{size:K,radius:me,variant:ge,gradient:xe,color:ye,autoContrast:ve})=>{const _e=fe.variantColorResolver({color:ye||fe.primaryColor,theme:fe,gradient:xe,variant:ge||"filled",autoContrast:ve});return{root:{"--ai-size":getSize(K,"ai-size"),"--ai-radius":me===void 0?void 0:getRadius(me),"--ai-bg":ye||ge?_e.background:void 0,"--ai-hover":ye||ge?_e.hover:void 0,"--ai-hover-color":ye||ge?_e.hoverColor:void 0,"--ai-color":_e.color,"--ai-bd":ye||ge?_e.border:void 0}}},ActionIcon=polymorphicFactory((fe,K)=>{const me=useProps("ActionIcon",defaultProps$1e,fe),{className:ge,unstyled:xe,variant:ye,classNames:ve,styles:_e,style:Ee,loading:be,loaderProps:Ae,size:Se,color:Ce,radius:Te,__staticSelector:Re,gradient:De,vars:Ie,children:Be,disabled:Le,"data-disabled":Oe,autoContrast:Fe,mod:Ue,...Ne}=me,He=useStyles({name:["ActionIcon",Re],props:me,className:ge,style:Ee,classes:__default__$y,classNames:ve,styles:_e,unstyled:xe,vars:Ie,varsResolver:varsResolver$E});return jsxRuntimeExports.jsxs(UnstyledButton,{...He("root",{active:!Le&&!be&&!Oe}),...Ne,unstyled:xe,variant:ye,size:Se,disabled:Le||be,ref:K,mod:[{loading:be,disabled:Le||Oe},Ue],children:[jsxRuntimeExports.jsx(Transition$1,{mounted:!!be,transition:"slide-down",duration:150,children:ze=>jsxRuntimeExports.jsx(Box,{component:"span",...He("loader",{style:ze}),"aria-hidden":!0,children:jsxRuntimeExports.jsx(Loader$1,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...Ae})})}),jsxRuntimeExports.jsx(Box,{component:"span",mod:{loading:be},...He("icon"),children:Be})]})});ActionIcon.classes=__default__$y;ActionIcon.displayName="@mantine/core/ActionIcon";ActionIcon.Group=ActionIconGroup;ActionIcon.GroupSection=ActionIconGroupSection;const CloseIcon=reactExports.forwardRef(({size:fe="var(--cb-icon-size, 70%)",style:K,...me},ge)=>jsxRuntimeExports.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...K,width:fe,height:fe},ref:ge,...me,children:jsxRuntimeExports.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));CloseIcon.displayName="@mantine/core/CloseIcon";var __default__$x={root:"m_86a44da5","root--subtle":"m_220c80f2"};const defaultProps$1d={variant:"subtle"},varsResolver$D=(fe,{size:K,radius:me,iconSize:ge})=>({root:{"--cb-size":getSize(K,"cb-size"),"--cb-radius":me===void 0?void 0:getRadius(me),"--cb-icon-size":rem(ge)}}),CloseButton=polymorphicFactory((fe,K)=>{const me=useProps("CloseButton",defaultProps$1d,fe),{iconSize:ge,children:xe,vars:ye,radius:ve,className:_e,classNames:Ee,style:be,styles:Ae,unstyled:Se,"data-disabled":Ce,disabled:Te,variant:Re,icon:De,mod:Ie,__staticSelector:Be,...Le}=me,Oe=useStyles({name:Be||"CloseButton",props:me,className:_e,style:be,classes:__default__$x,classNames:Ee,styles:Ae,unstyled:Se,vars:ye,varsResolver:varsResolver$D});return jsxRuntimeExports.jsxs(UnstyledButton,{ref:K,...Le,unstyled:Se,variant:Re,disabled:Te,mod:[{disabled:Te||Ce},Ie],...Oe("root",{variant:Re,active:!Te&&!Ce}),children:[De||jsxRuntimeExports.jsx(CloseIcon,{}),xe]})});CloseButton.classes=__default__$x;CloseButton.displayName="@mantine/core/CloseButton";function filterFalsyChildren(fe){return reactExports.Children.toArray(fe).filter(Boolean)}var __default__$w={root:"m_4081bf90"};const defaultProps$1c={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},varsResolver$C=(fe,{grow:K,preventGrowOverflow:me,gap:ge,align:xe,justify:ye,wrap:ve},{childWidth:_e})=>({root:{"--group-child-width":K&&me?_e:void 0,"--group-gap":getSpacing(ge),"--group-align":xe,"--group-justify":ye,"--group-wrap":ve}}),Group$1=factory((fe,K)=>{const me=useProps("Group",defaultProps$1c,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,children:Ee,gap:be,align:Ae,justify:Se,wrap:Ce,grow:Te,preventGrowOverflow:Re,vars:De,variant:Ie,__size:Be,mod:Le,...Oe}=me,Fe=filterFalsyChildren(Ee),Ue=Fe.length,Ne=getSpacing(be??"md"),ze={childWidth:`calc(${100/Ue}% - (${Ne} - ${Ne} / ${Ue}))`},je=useStyles({name:"Group",props:me,stylesCtx:ze,className:xe,style:ye,classes:__default__$w,classNames:ge,styles:ve,unstyled:_e,vars:De,varsResolver:varsResolver$C});return jsxRuntimeExports.jsx(Box,{...je("root"),ref:K,variant:Ie,mod:[{grow:Te},Le],size:Be,...Oe,children:Fe})});Group$1.classes=__default__$w;Group$1.displayName="@mantine/core/Group";const[ModalBaseProvider,useModalBaseContext]=createSafeContext("ModalBase component was not found in tree");function useLockScroll({opened:fe,transitionDuration:K}){const[me,ge]=reactExports.useState(fe),xe=reactExports.useRef(-1),ve=useReducedMotion()?0:K;return reactExports.useEffect(()=>(fe?(ge(!0),window.clearTimeout(xe.current)):ve===0?ge(!1):xe.current=window.setTimeout(()=>ge(!1),ve),()=>window.clearTimeout(xe.current)),[fe,ve]),me}function useModal({id:fe,transitionProps:K,opened:me,trapFocus:ge,closeOnEscape:xe,onClose:ye,returnFocus:ve}){const _e=useId$1(fe),[Ee,be]=reactExports.useState(!1),[Ae,Se]=reactExports.useState(!1),Ce=typeof K?.duration=="number"?K?.duration:200,Te=useLockScroll({opened:me,transitionDuration:Ce});return useWindowEvent("keydown",Re=>{Re.key==="Escape"&&xe&&me&&Re.target?.getAttribute("data-mantine-stop-propagation")!=="true"&&ye()},{capture:!0}),useFocusReturn({opened:me,shouldReturnFocus:ge&&ve}),{_id:_e,titleMounted:Ee,bodyMounted:Ae,shouldLockScroll:Te,setTitleMounted:be,setBodyMounted:Se}}const ModalBase=reactExports.forwardRef(({keepMounted:fe,opened:K,onClose:me,id:ge,transitionProps:xe,onExitTransitionEnd:ye,onEnterTransitionEnd:ve,trapFocus:_e,closeOnEscape:Ee,returnFocus:be,closeOnClickOutside:Ae,withinPortal:Se,portalProps:Ce,lockScroll:Te,children:Re,zIndex:De,shadow:Ie,padding:Be,__vars:Le,unstyled:Oe,removeScrollProps:Fe,...Ue},Ne)=>{const{_id:He,titleMounted:ze,bodyMounted:je,shouldLockScroll:Ge,setTitleMounted:Xe,setBodyMounted:qe}=useModal({id:ge,transitionProps:xe,opened:K,trapFocus:_e,closeOnEscape:Ee,onClose:me,returnFocus:be}),{key:Qe,...nt}=Fe||{};return jsxRuntimeExports.jsx(OptionalPortal,{...Ce,withinPortal:Se,children:jsxRuntimeExports.jsx(ModalBaseProvider,{value:{opened:K,onClose:me,closeOnClickOutside:Ae,onExitTransitionEnd:ye,onEnterTransitionEnd:ve,transitionProps:{...xe,keepMounted:fe},getTitleId:()=>`${He}-title`,getBodyId:()=>`${He}-body`,titleMounted:ze,bodyMounted:je,setTitleMounted:Xe,setBodyMounted:qe,trapFocus:_e,closeOnEscape:Ee,zIndex:De,unstyled:Oe},children:jsxRuntimeExports.jsx(ReactRemoveScroll,{enabled:Ge&&Te,...nt,children:jsxRuntimeExports.jsx(Box,{ref:Ne,...Ue,__vars:{...Le,"--mb-z-index":(De||getDefaultZIndex("modal")).toString(),"--mb-shadow":getShadow(Ie),"--mb-padding":getSpacing(Be)},children:Re})},Qe)})})});ModalBase.displayName="@mantine/core/ModalBase";function useModalBodyId(){const fe=useModalBaseContext();return reactExports.useEffect(()=>(fe.setBodyMounted(!0),()=>fe.setBodyMounted(!1)),[]),fe.getBodyId()}var __default__$v={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const ModalBaseBody=reactExports.forwardRef(({className:fe,...K},me)=>{const ge=useModalBodyId(),xe=useModalBaseContext();return jsxRuntimeExports.jsx(Box,{ref:me,...K,id:ge,className:clsx({[__default__$v.body]:!xe.unstyled},fe)})});ModalBaseBody.displayName="@mantine/core/ModalBaseBody";const ModalBaseCloseButton=reactExports.forwardRef(({className:fe,onClick:K,...me},ge)=>{const xe=useModalBaseContext();return jsxRuntimeExports.jsx(CloseButton,{ref:ge,...me,onClick:ye=>{xe.onClose(),K?.(ye)},className:clsx({[__default__$v.close]:!xe.unstyled},fe),unstyled:xe.unstyled})});ModalBaseCloseButton.displayName="@mantine/core/ModalBaseCloseButton";const ModalBaseContent=reactExports.forwardRef(({transitionProps:fe,className:K,innerProps:me,onKeyDown:ge,style:xe,...ye},ve)=>{const _e=useModalBaseContext();return jsxRuntimeExports.jsx(Transition$1,{mounted:_e.opened,transition:"pop",..._e.transitionProps,onExited:()=>{_e.onExitTransitionEnd?.(),_e.transitionProps?.onExited?.()},onEntered:()=>{_e.onEnterTransitionEnd?.(),_e.transitionProps?.onEntered?.()},...fe,children:Ee=>jsxRuntimeExports.jsx("div",{...me,className:clsx({[__default__$v.inner]:!_e.unstyled},me.className),children:jsxRuntimeExports.jsx(FocusTrap,{active:_e.opened&&_e.trapFocus,innerRef:ve,children:jsxRuntimeExports.jsx(Paper,{...ye,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":_e.bodyMounted?_e.getBodyId():void 0,"aria-labelledby":_e.titleMounted?_e.getTitleId():void 0,style:[xe,Ee],className:clsx({[__default__$v.content]:!_e.unstyled},K),unstyled:_e.unstyled,children:ye.children})})})})});ModalBaseContent.displayName="@mantine/core/ModalBaseContent";const ModalBaseHeader=reactExports.forwardRef(({className:fe,...K},me)=>{const ge=useModalBaseContext();return jsxRuntimeExports.jsx(Box,{component:"header",ref:me,className:clsx({[__default__$v.header]:!ge.unstyled},fe),...K})});ModalBaseHeader.displayName="@mantine/core/ModalBaseHeader";const DEFAULT_TRANSITION={duration:200,timingFunction:"ease",transition:"fade"};function useModalTransition(fe){const K=useModalBaseContext();return{...DEFAULT_TRANSITION,...K.transitionProps,...fe}}const ModalBaseOverlay=reactExports.forwardRef(({onClick:fe,transitionProps:K,style:me,visible:ge,...xe},ye)=>{const ve=useModalBaseContext(),_e=useModalTransition(K);return jsxRuntimeExports.jsx(Transition$1,{mounted:ge!==void 0?ge:ve.opened,..._e,transition:"fade",children:Ee=>jsxRuntimeExports.jsx(Overlay,{ref:ye,fixed:!0,style:[me,Ee],zIndex:ve.zIndex,unstyled:ve.unstyled,onClick:be=>{fe?.(be),ve.closeOnClickOutside&&ve.onClose()},...xe})})});ModalBaseOverlay.displayName="@mantine/core/ModalBaseOverlay";function useModalTitle(){const fe=useModalBaseContext();return reactExports.useEffect(()=>(fe.setTitleMounted(!0),()=>fe.setTitleMounted(!1)),[]),fe.getTitleId()}const ModalBaseTitle=reactExports.forwardRef(({className:fe,...K},me)=>{const ge=useModalTitle(),xe=useModalBaseContext();return jsxRuntimeExports.jsx(Box,{component:"h2",ref:me,className:clsx({[__default__$v.title]:!xe.unstyled},fe),...K,id:ge})});ModalBaseTitle.displayName="@mantine/core/ModalBaseTitle";function NativeScrollArea({children:fe}){return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:fe})}const[InputContext,useInputContext]=createOptionalContext({size:"sm"}),defaultProps$1b={},InputClearButton=factory((fe,K)=>{const me=useProps("InputClearButton",defaultProps$1b,fe),{size:ge,variant:xe,vars:ye,classNames:ve,styles:_e,...Ee}=me,be=useInputContext(),{resolvedClassNames:Ae,resolvedStyles:Se}=useResolvedStylesApi({classNames:ve,styles:_e,props:me});return jsxRuntimeExports.jsx(CloseButton,{variant:xe||"transparent",ref:K,size:ge||be?.size||"sm",classNames:Ae,styles:Se,__staticSelector:"InputClearButton",...Ee})});InputClearButton.displayName="@mantine/core/InputClearButton";const[InputWrapperProvider,useInputWrapperContext]=createOptionalContext({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var __default__$u={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const defaultProps$1a={},varsResolver$B=(fe,{size:K})=>({description:{"--input-description-size":K===void 0?void 0:`calc(${getFontSize(K)} - ${rem(2)})`}}),InputDescription=factory((fe,K)=>{const me=useProps("InputDescription",defaultProps$1a,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,size:be,__staticSelector:Ae,__inheritStyles:Se=!0,variant:Ce,...Te}=useProps("InputDescription",defaultProps$1a,me),Re=useInputWrapperContext(),De=useStyles({name:["InputWrapper",Ae],props:me,classes:__default__$u,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,rootSelector:"description",vars:Ee,varsResolver:varsResolver$B}),Ie=Se&&Re?.getStyles||De;return jsxRuntimeExports.jsx(Box,{component:"p",ref:K,variant:Ce,size:be,...Ie("description",Re?.getStyles?{className:xe,style:ye}:void 0),...Te})});InputDescription.classes=__default__$u;InputDescription.displayName="@mantine/core/InputDescription";const defaultProps$19={},varsResolver$A=(fe,{size:K})=>({error:{"--input-error-size":K===void 0?void 0:`calc(${getFontSize(K)} - ${rem(2)})`}}),InputError=factory((fe,K)=>{const me=useProps("InputError",defaultProps$19,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,size:be,__staticSelector:Ae,__inheritStyles:Se=!0,variant:Ce,...Te}=me,Re=useStyles({name:["InputWrapper",Ae],props:me,classes:__default__$u,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,rootSelector:"error",vars:Ee,varsResolver:varsResolver$A}),De=useInputWrapperContext(),Ie=Se&&De?.getStyles||Re;return jsxRuntimeExports.jsx(Box,{component:"p",ref:K,variant:Ce,size:be,...Ie("error",De?.getStyles?{className:xe,style:ye}:void 0),...Te})});InputError.classes=__default__$u;InputError.displayName="@mantine/core/InputError";const defaultProps$18={labelElement:"label"},varsResolver$z=(fe,{size:K})=>({label:{"--input-label-size":getFontSize(K),"--input-asterisk-color":void 0}}),InputLabel=factory((fe,K)=>{const me=useProps("InputLabel",defaultProps$18,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,labelElement:be,size:Ae,required:Se,htmlFor:Ce,onMouseDown:Te,children:Re,__staticSelector:De,variant:Ie,mod:Be,...Le}=useProps("InputLabel",defaultProps$18,me),Oe=useStyles({name:["InputWrapper",De],props:me,classes:__default__$u,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,rootSelector:"label",vars:Ee,varsResolver:varsResolver$z}),Fe=useInputWrapperContext(),Ue=Fe?.getStyles||Oe;return jsxRuntimeExports.jsxs(Box,{...Ue("label",Fe?.getStyles?{className:xe,style:ye}:void 0),component:be,variant:Ie,size:Ae,ref:K,htmlFor:be==="label"?Ce:void 0,mod:[{required:Se},Be],onMouseDown:Ne=>{Te?.(Ne),!Ne.defaultPrevented&&Ne.detail>1&&Ne.preventDefault()},...Le,children:[Re,Se&&jsxRuntimeExports.jsx("span",{...Ue("required"),"aria-hidden":!0,children:" *"})]})});InputLabel.classes=__default__$u;InputLabel.displayName="@mantine/core/InputLabel";const defaultProps$17={},InputPlaceholder=factory((fe,K)=>{const me=useProps("InputPlaceholder",defaultProps$17,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,__staticSelector:be,variant:Ae,error:Se,mod:Ce,...Te}=useProps("InputPlaceholder",defaultProps$17,me),Re=useStyles({name:["InputPlaceholder",be],props:me,classes:__default__$u,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,rootSelector:"placeholder"});return jsxRuntimeExports.jsx(Box,{...Re("placeholder"),mod:[{error:!!Se},Ce],component:"span",variant:Ae,ref:K,...Te})});InputPlaceholder.classes=__default__$u;InputPlaceholder.displayName="@mantine/core/InputPlaceholder";function getInputOffsets(fe,{hasDescription:K,hasError:me}){const ge=fe.findIndex(Ee=>Ee==="input"),xe=fe.slice(0,ge),ye=fe.slice(ge+1),ve=K&&xe.includes("description")||me&&xe.includes("error");return{offsetBottom:K&&ye.includes("description")||me&&ye.includes("error"),offsetTop:ve}}const defaultProps$16={labelElement:"label",inputContainer:fe=>fe,inputWrapperOrder:["label","description","input","error"]},varsResolver$y=(fe,{size:K})=>({label:{"--input-label-size":getFontSize(K),"--input-asterisk-color":void 0},error:{"--input-error-size":K===void 0?void 0:`calc(${getFontSize(K)} - ${rem(2)})`},description:{"--input-description-size":K===void 0?void 0:`calc(${getFontSize(K)} - ${rem(2)})`}}),InputWrapper=factory((fe,K)=>{const me=useProps("InputWrapper",defaultProps$16,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,size:be,variant:Ae,__staticSelector:Se,inputContainer:Ce,inputWrapperOrder:Te,label:Re,error:De,description:Ie,labelProps:Be,descriptionProps:Le,errorProps:Oe,labelElement:Fe,children:Ue,withAsterisk:Ne,id:He,required:ze,__stylesApiProps:je,mod:Ge,...Xe}=me,qe=useStyles({name:["InputWrapper",Se],props:je||me,classes:__default__$u,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$y}),Qe={size:be,variant:Ae,__staticSelector:Se},nt=useId$1(He),Nt=typeof Ne=="boolean"?Ne:ze,Ye=Oe?.id||`${nt}-error`,at=Le?.id||`${nt}-description`,rt=nt,Ft=!!De&&typeof De!="boolean",Je=!!Ie,Wt=`${Ft?Ye:""} ${Je?at:""}`,Kt=Wt.trim().length>0?Wt.trim():void 0,Pt=Be?.id||`${nt}-label`,Yt=Re&&jsxRuntimeExports.jsx(InputLabel,{labelElement:Fe,id:Pt,htmlFor:rt,required:Nt,...Qe,...Be,children:Re},"label"),Gt=Je&&jsxRuntimeExports.jsx(InputDescription,{...Le,...Qe,size:Le?.size||Qe.size,id:Le?.id||at,children:Ie},"description"),an=jsxRuntimeExports.jsx(reactExports.Fragment,{children:Ce(Ue)},"input"),pn=Ft&&reactExports.createElement(InputError,{...Oe,...Qe,size:Oe?.size||Qe.size,key:"error",id:Oe?.id||Ye},De),En=Te.map($n=>{switch($n){case"label":return Yt;case"input":return an;case"description":return Gt;case"error":return pn;default:return null}});return jsxRuntimeExports.jsx(InputWrapperProvider,{value:{getStyles:qe,describedBy:Kt,inputId:rt,labelId:Pt,...getInputOffsets(Te,{hasDescription:Je,hasError:Ft})},children:jsxRuntimeExports.jsx(Box,{ref:K,variant:Ae,size:be,mod:[{error:!!De},Ge],...qe("root"),...Xe,children:En})})});InputWrapper.classes=__default__$u;InputWrapper.displayName="@mantine/core/InputWrapper";const defaultProps$15={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},varsResolver$x=(fe,K,me)=>({wrapper:{"--input-margin-top":me.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":me.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":getSize(K.size,"input-height"),"--input-fz":getFontSize(K.size),"--input-radius":K.radius===void 0?void 0:getRadius(K.radius),"--input-left-section-width":K.leftSectionWidth!==void 0?rem(K.leftSectionWidth):void 0,"--input-right-section-width":K.rightSectionWidth!==void 0?rem(K.rightSectionWidth):void 0,"--input-padding-y":K.multiline?getSize(K.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":K.leftSectionPointerEvents,"--input-right-section-pointer-events":K.rightSectionPointerEvents}}),Input=polymorphicFactory((fe,K)=>{const me=useProps("Input",defaultProps$15,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,required:Ee,__staticSelector:be,__stylesApiProps:Ae,size:Se,wrapperProps:Ce,error:Te,disabled:Re,leftSection:De,leftSectionProps:Ie,leftSectionWidth:Be,rightSection:Le,rightSectionProps:Oe,rightSectionWidth:Fe,rightSectionPointerEvents:Ue,leftSectionPointerEvents:Ne,variant:He,vars:ze,pointer:je,multiline:Ge,radius:Xe,id:qe,withAria:Qe,withErrorStyles:nt,mod:Nt,inputSize:Ye,__clearSection:at,__clearable:rt,__defaultRightSection:Ft,...Je}=me,{styleProps:Wt,rest:Kt}=extractStyleProps(Je),Pt=useInputWrapperContext(),Yt={offsetBottom:Pt?.offsetBottom,offsetTop:Pt?.offsetTop},Gt=useStyles({name:["Input",be],props:Ae||me,classes:__default__$u,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,stylesCtx:Yt,rootSelector:"wrapper",vars:ze,varsResolver:varsResolver$x}),an=Qe?{required:Ee,disabled:Re,"aria-invalid":!!Te,"aria-describedby":Pt?.describedBy,id:Pt?.inputId||qe}:{},pn=Le||rt&&at||Ft;return jsxRuntimeExports.jsx(InputContext,{value:{size:Se||"sm"},children:jsxRuntimeExports.jsxs(Box,{...Gt("wrapper"),...Wt,...Ce,mod:[{error:!!Te&&nt,pointer:je,disabled:Re,multiline:Ge,"data-with-right-section":!!pn,"data-with-left-section":!!De},Nt],variant:He,size:Se,children:[De&&jsxRuntimeExports.jsx("div",{...Ie,"data-position":"left",...Gt("section",{className:Ie?.className,style:Ie?.style}),children:De}),jsxRuntimeExports.jsx(Box,{component:"input",...Kt,...an,ref:K,required:Ee,mod:{disabled:Re,error:!!Te&&nt},variant:He,__size:Ye,...Gt("input")}),pn&&jsxRuntimeExports.jsx("div",{...Oe,"data-position":"right",...Gt("section",{className:Oe?.className,style:Oe?.style}),children:pn})]})})});Input.classes=__default__$u;Input.Wrapper=InputWrapper;Input.Label=InputLabel;Input.Error=InputError;Input.Description=InputDescription;Input.Placeholder=InputPlaceholder;Input.ClearButton=InputClearButton;Input.displayName="@mantine/core/Input";function useInputProps(fe,K,me){const ge=useProps(fe,K,me),{label:xe,description:ye,error:ve,required:_e,classNames:Ee,styles:be,className:Ae,unstyled:Se,__staticSelector:Ce,__stylesApiProps:Te,errorProps:Re,labelProps:De,descriptionProps:Ie,wrapperProps:Be,id:Le,size:Oe,style:Fe,inputContainer:Ue,inputWrapperOrder:Ne,withAsterisk:He,variant:ze,vars:je,mod:Ge,...Xe}=ge,{styleProps:qe,rest:Qe}=extractStyleProps(Xe),nt={label:xe,description:ye,error:ve,required:_e,classNames:Ee,className:Ae,__staticSelector:Ce,__stylesApiProps:Te||ge,errorProps:Re,labelProps:De,descriptionProps:Ie,unstyled:Se,styles:be,size:Oe,style:Fe,inputContainer:Ue,inputWrapperOrder:Ne,withAsterisk:He,variant:ze,id:Le,mod:Ge,...Be};return{...Qe,classNames:Ee,styles:be,unstyled:Se,wrapperProps:{...nt,...qe},inputProps:{required:_e,classNames:Ee,styles:be,unstyled:Se,size:Oe,__staticSelector:Ce,__stylesApiProps:Te||ge,error:ve,variant:ze,id:Le}}}const defaultProps$14={__staticSelector:"InputBase",withAria:!0},InputBase=polymorphicFactory((fe,K)=>{const{inputProps:me,wrapperProps:ge,...xe}=useInputProps("InputBase",defaultProps$14,fe);return jsxRuntimeExports.jsx(Input.Wrapper,{...ge,children:jsxRuntimeExports.jsx(Input,{...me,...xe,ref:K})})});InputBase.classes={...Input.classes,...Input.Wrapper.classes};InputBase.displayName="@mantine/core/InputBase";const FLEX_STYLE_PROPS_DATA={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var __default__$t={root:"m_8bffd616"};const defaultProps$13={},Flex=polymorphicFactory((fe,K)=>{const me=useProps("Flex",defaultProps$13,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,gap:be,rowGap:Ae,columnGap:Se,align:Ce,justify:Te,wrap:Re,direction:De,...Ie}=me,Be=useStyles({name:"Flex",classes:__default__$t,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee}),Le=useMantineTheme(),Oe=useRandomClassName(),Fe=parseStyleProps({styleProps:{gap:be,rowGap:Ae,columnGap:Se,align:Ce,justify:Te,wrap:Re,direction:De},theme:Le,data:FLEX_STYLE_PROPS_DATA});return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[Fe.hasResponsiveStyles&&jsxRuntimeExports.jsx(InlineStyles,{selector:`.${Oe}`,styles:Fe.styles,media:Fe.media}),jsxRuntimeExports.jsx(Box,{ref:K,...Be("root",{className:Oe,style:filterProps(Fe.inlineStyles)}),...Ie})]})});Flex.classes=__default__$t;Flex.displayName="@mantine/core/Flex";var __default__$s={root:"m_b6d8b162"};function getTextTruncate(fe){if(fe==="start")return"start";if(fe==="end"||fe)return"end"}const defaultProps$12={inherit:!1},varsResolver$w=(fe,{variant:K,lineClamp:me,gradient:ge,size:xe,color:ye})=>({root:{"--text-fz":getFontSize(xe),"--text-lh":getLineHeight(xe),"--text-gradient":K==="gradient"?getGradient(ge,fe):void 0,"--text-line-clamp":typeof me=="number"?me.toString():void 0,"--text-color":ye?getThemeColor(ye,fe):void 0}}),Text=polymorphicFactory((fe,K)=>{const me=useProps("Text",defaultProps$12,fe),{lineClamp:ge,truncate:xe,inline:ye,inherit:ve,gradient:_e,span:Ee,__staticSelector:be,vars:Ae,className:Se,style:Ce,classNames:Te,styles:Re,unstyled:De,variant:Ie,mod:Be,size:Le,...Oe}=me,Fe=useStyles({name:["Text",be],props:me,classes:__default__$s,className:Se,style:Ce,classNames:Te,styles:Re,unstyled:De,vars:Ae,varsResolver:varsResolver$w});return jsxRuntimeExports.jsx(Box,{...Fe("root",{focusable:!0}),ref:K,component:Ee?"span":"p",variant:Ie,mod:[{"data-truncate":getTextTruncate(xe),"data-line-clamp":typeof ge=="number","data-inline":ye,"data-inherit":ve},Be],size:Le,...Oe})});Text.classes=__default__$s;Text.displayName="@mantine/core/Text";var __default__$r={root:"m_849cf0da"};const defaultProps$11={underline:"hover"},Anchor=polymorphicFactory((fe,K)=>{const{underline:me,className:ge,unstyled:xe,mod:ye,...ve}=useProps("Anchor",defaultProps$11,fe);return jsxRuntimeExports.jsx(Text,{component:"a",ref:K,className:clsx({[__default__$r.root]:!xe},ge),...ve,mod:[{underline:me},ye],__staticSelector:"Anchor",unstyled:xe})});Anchor.classes=__default__$r;Anchor.displayName="@mantine/core/Anchor";function parseItem(fe){return typeof fe=="string"?{value:fe,label:fe}:"value"in fe&&!("label"in fe)?{value:fe.value,label:fe.value,disabled:fe.disabled}:typeof fe=="number"?{value:fe.toString(),label:fe.toString()}:"group"in fe?{group:fe.group,items:fe.items.map(K=>parseItem(K))}:fe}function getParsedComboboxData(fe){return fe?fe.map(K=>parseItem(K)):[]}function getOptionsLockup(fe){return fe.reduce((K,me)=>"group"in me?{...K,...getOptionsLockup(me.items)}:(K[me.value]=me,K),{})}var __default__$q={dropdown:"m_88b62a41",search:"m_985517d8",options:"m_b2821a6e",option:"m_92253aa5",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const defaultProps$10={error:null},varsResolver$v=(fe,{size:K,color:me})=>({chevron:{"--combobox-chevron-size":getSize(K,"combobox-chevron-size"),"--combobox-chevron-color":me?getThemeColor(me,fe):void 0}}),ComboboxChevron=factory((fe,K)=>{const me=useProps("ComboboxChevron",defaultProps$10,fe),{size:ge,error:xe,style:ye,className:ve,classNames:_e,styles:Ee,unstyled:be,vars:Ae,mod:Se,...Ce}=me,Te=useStyles({name:"ComboboxChevron",classes:__default__$q,props:me,style:ye,className:ve,classNames:_e,styles:Ee,unstyled:be,vars:Ae,varsResolver:varsResolver$v,rootSelector:"chevron"});return jsxRuntimeExports.jsx(Box,{component:"svg",...Ce,...Te("chevron"),size:ge,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:xe},Se],ref:K,children:jsxRuntimeExports.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});ComboboxChevron.classes=__default__$q;ComboboxChevron.displayName="@mantine/core/ComboboxChevron";const[ComboboxProvider,useComboboxContext]=createSafeContext("Combobox component was not found in tree"),ComboboxClearButton=reactExports.forwardRef(({size:fe,onMouseDown:K,onClick:me,onClear:ge,...xe},ye)=>jsxRuntimeExports.jsx(Input.ClearButton,{ref:ye,tabIndex:-1,"aria-hidden":!0,...xe,onMouseDown:ve=>{ve.preventDefault(),K?.(ve)},onClick:ve=>{ge(),me?.(ve)}}));ComboboxClearButton.displayName="@mantine/core/ComboboxClearButton";const defaultProps$$={},ComboboxDropdown=factory((fe,K)=>{const{classNames:me,styles:ge,className:xe,style:ye,hidden:ve,..._e}=useProps("ComboboxDropdown",defaultProps$$,fe),Ee=useComboboxContext();return jsxRuntimeExports.jsx(Popover.Dropdown,{..._e,ref:K,role:"presentation","data-hidden":ve||void 0,...Ee.getStyles("dropdown",{className:xe,style:ye,classNames:me,styles:ge})})});ComboboxDropdown.classes=__default__$q;ComboboxDropdown.displayName="@mantine/core/ComboboxDropdown";const defaultProps$_={refProp:"ref"},ComboboxDropdownTarget=factory((fe,K)=>{const{children:me,refProp:ge}=useProps("ComboboxDropdownTarget",defaultProps$_,fe);if(useComboboxContext(),!isElement$1(me))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return jsxRuntimeExports.jsx(Popover.Target,{ref:K,refProp:ge,children:me})});ComboboxDropdownTarget.displayName="@mantine/core/ComboboxDropdownTarget";const defaultProps$Z={},ComboboxEmpty=factory((fe,K)=>{const{classNames:me,className:ge,style:xe,styles:ye,vars:ve,..._e}=useProps("ComboboxEmpty",defaultProps$Z,fe),Ee=useComboboxContext();return jsxRuntimeExports.jsx(Box,{ref:K,...Ee.getStyles("empty",{className:ge,classNames:me,styles:ye,style:xe}),..._e})});ComboboxEmpty.classes=__default__$q;ComboboxEmpty.displayName="@mantine/core/ComboboxEmpty";function useComboboxTargetProps({onKeyDown:fe,withKeyboardNavigation:K,withAriaAttributes:me,withExpandedAttribute:ge,targetType:xe,autoComplete:ye}){const ve=useComboboxContext(),[_e,Ee]=reactExports.useState(null),be=Se=>{if(fe?.(Se),!ve.readOnly&&K){if(Se.nativeEvent.isComposing)return;if(Se.nativeEvent.code==="ArrowDown"&&(Se.preventDefault(),ve.store.dropdownOpened?Ee(ve.store.selectNextOption()):(ve.store.openDropdown("keyboard"),Ee(ve.store.selectActiveOption()),ve.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),Se.nativeEvent.code==="ArrowUp"&&(Se.preventDefault(),ve.store.dropdownOpened?Ee(ve.store.selectPreviousOption()):(ve.store.openDropdown("keyboard"),Ee(ve.store.selectActiveOption()),ve.store.updateSelectedOptionIndex("selected",{scrollIntoView:!0}))),Se.nativeEvent.code==="Enter"||Se.nativeEvent.code==="NumpadEnter"){if(Se.nativeEvent.keyCode===229)return;const Ce=ve.store.getSelectedOptionIndex();ve.store.dropdownOpened&&Ce!==-1?(Se.preventDefault(),ve.store.clickSelectedOption()):xe==="button"&&(Se.preventDefault(),ve.store.openDropdown("keyboard"))}Se.key==="Escape"&&ve.store.closeDropdown("keyboard"),Se.nativeEvent.code==="Space"&&xe==="button"&&(Se.preventDefault(),ve.store.toggleDropdown("keyboard"))}};return{...me?{"aria-haspopup":"listbox","aria-expanded":ge&&!!(ve.store.listId&&ve.store.dropdownOpened)||void 0,"aria-controls":ve.store.dropdownOpened?ve.store.listId:void 0,"aria-activedescendant":ve.store.dropdownOpened&&_e||void 0,autoComplete:ye,"data-expanded":ve.store.dropdownOpened||void 0,"data-mantine-stop-propagation":ve.store.dropdownOpened||void 0}:{},onKeyDown:be}}const defaultProps$Y={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ComboboxEventsTarget=factory((fe,K)=>{const{children:me,refProp:ge,withKeyboardNavigation:xe,withAriaAttributes:ye,withExpandedAttribute:ve,targetType:_e,autoComplete:Ee,...be}=useProps("ComboboxEventsTarget",defaultProps$Y,fe);if(!isElement$1(me))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const Ae=useComboboxContext(),Se=useComboboxTargetProps({targetType:_e,withAriaAttributes:ye,withKeyboardNavigation:xe,withExpandedAttribute:ve,onKeyDown:me.props.onKeyDown,autoComplete:Ee});return reactExports.cloneElement(me,{...Se,...be,[ge]:useMergedRef(K,Ae.store.targetRef,getRefProp(me))})});ComboboxEventsTarget.displayName="@mantine/core/ComboboxEventsTarget";const defaultProps$X={},ComboboxFooter=factory((fe,K)=>{const{classNames:me,className:ge,style:xe,styles:ye,vars:ve,..._e}=useProps("ComboboxFooter",defaultProps$X,fe),Ee=useComboboxContext();return jsxRuntimeExports.jsx(Box,{ref:K,...Ee.getStyles("footer",{className:ge,classNames:me,style:xe,styles:ye}),..._e,onMouseDown:be=>{be.preventDefault()}})});ComboboxFooter.classes=__default__$q;ComboboxFooter.displayName="@mantine/core/ComboboxFooter";const defaultProps$W={},ComboboxGroup=factory((fe,K)=>{const{classNames:me,className:ge,style:xe,styles:ye,vars:ve,children:_e,label:Ee,...be}=useProps("ComboboxGroup",defaultProps$W,fe),Ae=useComboboxContext();return jsxRuntimeExports.jsxs(Box,{ref:K,...Ae.getStyles("group",{className:ge,classNames:me,style:xe,styles:ye}),...be,children:[Ee&&jsxRuntimeExports.jsx("div",{...Ae.getStyles("groupLabel",{classNames:me,styles:ye}),children:Ee}),_e]})});ComboboxGroup.classes=__default__$q;ComboboxGroup.displayName="@mantine/core/ComboboxGroup";const defaultProps$V={},ComboboxHeader=factory((fe,K)=>{const{classNames:me,className:ge,style:xe,styles:ye,vars:ve,..._e}=useProps("ComboboxHeader",defaultProps$V,fe),Ee=useComboboxContext();return jsxRuntimeExports.jsx(Box,{ref:K,...Ee.getStyles("header",{className:ge,classNames:me,style:xe,styles:ye}),..._e,onMouseDown:be=>{be.preventDefault()}})});ComboboxHeader.classes=__default__$q;ComboboxHeader.displayName="@mantine/core/ComboboxHeader";function ComboboxHiddenInput({value:fe,valuesDivider:K=",",...me}){return jsxRuntimeExports.jsx("input",{type:"hidden",value:Array.isArray(fe)?fe.join(K):fe||"",...me})}ComboboxHiddenInput.displayName="@mantine/core/ComboboxHiddenInput";const defaultProps$U={},ComboboxOption=factory((fe,K)=>{const me=useProps("ComboboxOption",defaultProps$U,fe),{classNames:ge,className:xe,style:ye,styles:ve,vars:_e,onClick:Ee,id:be,active:Ae,onMouseDown:Se,onMouseOver:Ce,disabled:Te,selected:Re,mod:De,...Ie}=me,Be=useComboboxContext(),Le=reactExports.useId(),Oe=be||Le;return jsxRuntimeExports.jsx(Box,{...Be.getStyles("option",{className:xe,classNames:ge,styles:ve,style:ye}),...Ie,ref:K,id:Oe,mod:["combobox-option",{"combobox-active":Ae,"combobox-disabled":Te,"combobox-selected":Re},De],role:"option",onClick:Fe=>{Te?Fe.preventDefault():(Be.onOptionSubmit?.(me.value,me),Ee?.(Fe))},onMouseDown:Fe=>{Fe.preventDefault(),Se?.(Fe)},onMouseOver:Fe=>{Be.resetSelectionOnOptionHover&&Be.store.resetSelectedOption(),Ce?.(Fe)}})});ComboboxOption.classes=__default__$q;ComboboxOption.displayName="@mantine/core/ComboboxOption";const defaultProps$T={},ComboboxOptions=factory((fe,K)=>{const me=useProps("ComboboxOptions",defaultProps$T,fe),{classNames:ge,className:xe,style:ye,styles:ve,id:_e,onMouseDown:Ee,labelledBy:be,...Ae}=me,Se=useComboboxContext(),Ce=useId$1(_e);return reactExports.useEffect(()=>{Se.store.setListId(Ce)},[Ce]),jsxRuntimeExports.jsx(Box,{ref:K,...Se.getStyles("options",{className:xe,style:ye,classNames:ge,styles:ve}),...Ae,id:Ce,role:"listbox","aria-labelledby":be,onMouseDown:Te=>{Te.preventDefault(),Ee?.(Te)}})});ComboboxOptions.classes=__default__$q;ComboboxOptions.displayName="@mantine/core/ComboboxOptions";const defaultProps$S={withAriaAttributes:!0,withKeyboardNavigation:!0},ComboboxSearch=factory((fe,K)=>{const me=useProps("ComboboxSearch",defaultProps$S,fe),{classNames:ge,styles:xe,unstyled:ye,vars:ve,withAriaAttributes:_e,onKeyDown:Ee,withKeyboardNavigation:be,size:Ae,...Se}=me,Ce=useComboboxContext(),Te=Ce.getStyles("search"),Re=useComboboxTargetProps({targetType:"input",withAriaAttributes:_e,withKeyboardNavigation:be,withExpandedAttribute:!1,onKeyDown:Ee,autoComplete:"off"});return jsxRuntimeExports.jsx(Input,{ref:useMergedRef(K,Ce.store.searchRef),classNames:[{input:Te.className},ge],styles:[{input:Te.style},xe],size:Ae||Ce.size,...Re,...Se,__staticSelector:"Combobox"})});ComboboxSearch.classes=__default__$q;ComboboxSearch.displayName="@mantine/core/ComboboxSearch";const defaultProps$R={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},ComboboxTarget=factory((fe,K)=>{const{children:me,refProp:ge,withKeyboardNavigation:xe,withAriaAttributes:ye,withExpandedAttribute:ve,targetType:_e,autoComplete:Ee,...be}=useProps("ComboboxTarget",defaultProps$R,fe);if(!isElement$1(me))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const Ae=useComboboxContext(),Se=useComboboxTargetProps({targetType:_e,withAriaAttributes:ye,withKeyboardNavigation:xe,withExpandedAttribute:ve,onKeyDown:me.props.onKeyDown,autoComplete:Ee}),Ce=reactExports.cloneElement(me,{...Se,...be});return jsxRuntimeExports.jsx(Popover.Target,{ref:useMergedRef(K,Ae.store.targetRef),children:Ce})});ComboboxTarget.displayName="@mantine/core/ComboboxTarget";function getPreviousIndex(fe,K,me){for(let ge=fe-1;ge>=0;ge-=1)if(!K[ge].hasAttribute("data-combobox-disabled"))return ge;if(me){for(let ge=K.length-1;ge>-1;ge-=1)if(!K[ge].hasAttribute("data-combobox-disabled"))return ge}return fe}function getNextIndex(fe,K,me){for(let ge=fe+1;ge<K.length;ge+=1)if(!K[ge].hasAttribute("data-combobox-disabled"))return ge;if(me){for(let ge=0;ge<K.length;ge+=1)if(!K[ge].hasAttribute("data-combobox-disabled"))return ge}return fe}function getFirstIndex(fe){for(let K=0;K<fe.length;K+=1)if(!fe[K].hasAttribute("data-combobox-disabled"))return K;return-1}function useCombobox({defaultOpened:fe,opened:K,onOpenedChange:me,onDropdownClose:ge,onDropdownOpen:xe,loop:ye=!0,scrollBehavior:ve="instant"}={}){const[_e,Ee]=useUncontrolled({value:K,defaultValue:fe,finalValue:!1,onChange:me}),be=reactExports.useRef(null),Ae=reactExports.useRef(-1),Se=reactExports.useRef(null),Ce=reactExports.useRef(null),Te=reactExports.useRef(-1),Re=reactExports.useRef(-1),De=reactExports.useRef(-1),Ie=reactExports.useCallback((Ye="unknown")=>{_e||(Ee(!0),xe?.(Ye))},[Ee,xe,_e]),Be=reactExports.useCallback((Ye="unknown")=>{_e&&(Ee(!1),ge?.(Ye))},[Ee,ge,_e]),Le=reactExports.useCallback((Ye="unknown")=>{_e?Be(Ye):Ie(Ye)},[Be,Ie,_e]),Oe=reactExports.useCallback(()=>{const Ye=document.querySelector(`#${be.current} [data-combobox-selected]`);Ye?.removeAttribute("data-combobox-selected"),Ye?.removeAttribute("aria-selected")},[]),Fe=reactExports.useCallback(Ye=>{const rt=document.getElementById(be.current)?.querySelectorAll("[data-combobox-option]");if(!rt)return null;const Ft=Ye>=rt.length?0:Ye<0?rt.length-1:Ye;return Ae.current=Ft,rt?.[Ft]&&!rt[Ft].hasAttribute("data-combobox-disabled")?(Oe(),rt[Ft].setAttribute("data-combobox-selected","true"),rt[Ft].setAttribute("aria-selected","true"),rt[Ft].scrollIntoView({block:"nearest",behavior:ve}),rt[Ft].id):null},[ve,Oe]),Ue=reactExports.useCallback(()=>{const Ye=document.querySelector(`#${be.current} [data-combobox-active]`);if(Ye){const at=document.querySelectorAll(`#${be.current} [data-combobox-option]`),rt=Array.from(at).findIndex(Ft=>Ft===Ye);return Fe(rt)}return Fe(0)},[Fe]),Ne=reactExports.useCallback(()=>Fe(getNextIndex(Ae.current,document.querySelectorAll(`#${be.current} [data-combobox-option]`),ye)),[Fe,ye]),He=reactExports.useCallback(()=>Fe(getPreviousIndex(Ae.current,document.querySelectorAll(`#${be.current} [data-combobox-option]`),ye)),[Fe,ye]),ze=reactExports.useCallback(()=>Fe(getFirstIndex(document.querySelectorAll(`#${be.current} [data-combobox-option]`))),[Fe]),je=reactExports.useCallback((Ye="selected",at)=>{De.current=window.setTimeout(()=>{const rt=document.querySelectorAll(`#${be.current} [data-combobox-option]`),Ft=Array.from(rt).findIndex(Je=>Je.hasAttribute(`data-combobox-${Ye}`));Ae.current=Ft,at?.scrollIntoView&&rt[Ft]?.scrollIntoView({block:"nearest",behavior:ve})},0)},[]),Ge=reactExports.useCallback(()=>{Ae.current=-1,Oe()},[Oe]),Xe=reactExports.useCallback(()=>{document.querySelectorAll(`#${be.current} [data-combobox-option]`)?.[Ae.current]?.click()},[]),qe=reactExports.useCallback(Ye=>{be.current=Ye},[]),Qe=reactExports.useCallback(()=>{Te.current=window.setTimeout(()=>Se.current.focus(),0)},[]),nt=reactExports.useCallback(()=>{Re.current=window.setTimeout(()=>Ce.current.focus(),0)},[]),Nt=reactExports.useCallback(()=>Ae.current,[]);return reactExports.useEffect(()=>()=>{window.clearTimeout(Te.current),window.clearTimeout(Re.current),window.clearTimeout(De.current)},[]),{dropdownOpened:_e,openDropdown:Ie,closeDropdown:Be,toggleDropdown:Le,selectedOptionIndex:Ae.current,getSelectedOptionIndex:Nt,selectOption:Fe,selectFirstOption:ze,selectActiveOption:Ue,selectNextOption:Ne,selectPreviousOption:He,resetSelectedOption:Ge,updateSelectedOptionIndex:je,listId:be.current,setListId:qe,clickSelectedOption:Xe,searchRef:Se,focusSearchInput:Qe,targetRef:Ce,focusTarget:nt}}const defaultProps$Q={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},varsResolver$u=(fe,{size:K,dropdownPadding:me})=>({options:{"--combobox-option-fz":getFontSize(K),"--combobox-option-padding":getSize(K,"combobox-option-padding")},dropdown:{"--combobox-padding":me===void 0?void 0:rem(me),"--combobox-option-fz":getFontSize(K),"--combobox-option-padding":getSize(K,"combobox-option-padding")}});function Combobox(fe){const K=useProps("Combobox",defaultProps$Q,fe),{classNames:me,styles:ge,unstyled:xe,children:ye,store:ve,vars:_e,onOptionSubmit:Ee,onClose:be,size:Ae,dropdownPadding:Se,resetSelectionOnOptionHover:Ce,__staticSelector:Te,readOnly:Re,...De}=K,Ie=useCombobox(),Be=ve||Ie,Le=useStyles({name:Te||"Combobox",classes:__default__$q,props:K,classNames:me,styles:ge,unstyled:xe,vars:_e,varsResolver:varsResolver$u}),Oe=()=>{be?.(),Be.closeDropdown()};return jsxRuntimeExports.jsx(ComboboxProvider,{value:{getStyles:Le,store:Be,onOptionSubmit:Ee,size:Ae,resetSelectionOnOptionHover:Ce,readOnly:Re},children:jsxRuntimeExports.jsx(Popover,{opened:Be.dropdownOpened,...De,onChange:Fe=>!Fe&&Oe(),withRoles:!1,unstyled:xe,children:ye})})}const extendCombobox=fe=>fe;Combobox.extend=extendCombobox;Combobox.classes=__default__$q;Combobox.displayName="@mantine/core/Combobox";Combobox.Target=ComboboxTarget;Combobox.Dropdown=ComboboxDropdown;Combobox.Options=ComboboxOptions;Combobox.Option=ComboboxOption;Combobox.Search=ComboboxSearch;Combobox.Empty=ComboboxEmpty;Combobox.Chevron=ComboboxChevron;Combobox.Footer=ComboboxFooter;Combobox.Header=ComboboxHeader;Combobox.EventsTarget=ComboboxEventsTarget;Combobox.DropdownTarget=ComboboxDropdownTarget;Combobox.Group=ComboboxGroup;Combobox.ClearButton=ComboboxClearButton;Combobox.HiddenInput=ComboboxHiddenInput;var __default__$p={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const InlineInputClasses=__default__$p,InlineInput=reactExports.forwardRef(({__staticSelector:fe,__stylesApiProps:K,className:me,classNames:ge,styles:xe,unstyled:ye,children:ve,label:_e,description:Ee,id:be,disabled:Ae,error:Se,size:Ce,labelPosition:Te="left",bodyElement:Re="div",labelElement:De="label",variant:Ie,style:Be,vars:Le,mod:Oe,...Fe},Ue)=>{const Ne=useStyles({name:fe,props:K,className:me,style:Be,classes:__default__$p,classNames:ge,styles:xe,unstyled:ye});return jsxRuntimeExports.jsx(Box,{...Ne("root"),ref:Ue,__vars:{"--label-fz":getFontSize(Ce),"--label-lh":getSize(Ce,"label-lh")},mod:[{"label-position":Te},Oe],variant:Ie,size:Ce,...Fe,children:jsxRuntimeExports.jsxs(Box,{component:Re,htmlFor:Re==="label"?be:void 0,...Ne("body"),children:[ve,jsxRuntimeExports.jsxs("div",{...Ne("labelWrapper"),"data-disabled":Ae||void 0,children:[_e&&jsxRuntimeExports.jsx(Box,{component:De,htmlFor:De==="label"?be:void 0,...Ne("label"),"data-disabled":Ae||void 0,children:_e}),Ee&&jsxRuntimeExports.jsx(Input.Description,{size:Ce,__inheritStyles:!1,...Ne("description"),children:Ee}),Se&&typeof Se!="boolean"&&jsxRuntimeExports.jsx(Input.Error,{size:Ce,__inheritStyles:!1,...Ne("error"),children:Se})]})]})})});InlineInput.displayName="@mantine/core/InlineInput";const CheckboxGroupContext=reactExports.createContext(null),CheckboxGroupProvider=CheckboxGroupContext.Provider,useCheckboxGroupContext=()=>reactExports.useContext(CheckboxGroupContext),[CheckboxCardProvider,useCheckboxCardContext]=createOptionalContext();var __default__$o={card:"m_26775b0a"};const defaultProps$P={withBorder:!0},varsResolver$t=(fe,{radius:K})=>({card:{"--card-radius":getRadius(K)}}),CheckboxCard=factory((fe,K)=>{const me=useProps("CheckboxCard",defaultProps$P,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,checked:be,mod:Ae,withBorder:Se,value:Ce,onClick:Te,defaultChecked:Re,onChange:De,...Ie}=me,Be=useStyles({name:"CheckboxCard",classes:__default__$o,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$t,rootSelector:"card"}),Le=useCheckboxGroupContext(),Oe=typeof be=="boolean"?be:Le?Le.value.includes(Ce||""):void 0,[Fe,Ue]=useUncontrolled({value:Oe,defaultValue:Re,finalValue:!1,onChange:De});return jsxRuntimeExports.jsx(CheckboxCardProvider,{value:{checked:Fe},children:jsxRuntimeExports.jsx(UnstyledButton,{ref:K,mod:[{"with-border":Se,checked:Fe},Ae],...Be("card"),...Ie,role:"checkbox","aria-checked":Fe,onClick:Ne=>{Te?.(Ne),Le?.onChange(Ce||""),Ue(!Fe)}})})});CheckboxCard.displayName="@mantine/core/CheckboxCard";CheckboxCard.classes=__default__$o;function InputsGroupFieldset({children:fe,role:K}){const me=useInputWrapperContext();return me?jsxRuntimeExports.jsx("div",{role:K,"aria-labelledby":me.labelId,"aria-describedby":me.describedBy,children:fe}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:fe})}const defaultProps$O={},CheckboxGroup=factory((fe,K)=>{const{value:me,defaultValue:ge,onChange:xe,size:ye,wrapperProps:ve,children:_e,readOnly:Ee,...be}=useProps("CheckboxGroup",defaultProps$O,fe),[Ae,Se]=useUncontrolled({value:me,defaultValue:ge,finalValue:[],onChange:xe}),Ce=Te=>{const Re=typeof Te=="string"?Te:Te.currentTarget.value;!Ee&&Se(Ae.includes(Re)?Ae.filter(De=>De!==Re):[...Ae,Re])};return jsxRuntimeExports.jsx(CheckboxGroupProvider,{value:{value:Ae,onChange:Ce,size:ye},children:jsxRuntimeExports.jsx(Input.Wrapper,{size:ye,ref:K,...ve,...be,labelElement:"div",__staticSelector:"CheckboxGroup",children:jsxRuntimeExports.jsx(InputsGroupFieldset,{role:"group",children:_e})})})});CheckboxGroup.classes=Input.Wrapper.classes;CheckboxGroup.displayName="@mantine/core/CheckboxGroup";function CheckIcon({size:fe,style:K,...me}){const ge=fe!==void 0?{width:rem(fe),height:rem(fe),...K}:K;return jsxRuntimeExports.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:ge,"aria-hidden":!0,...me,children:jsxRuntimeExports.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function CheckboxIcon({indeterminate:fe,...K}){return fe?jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...K,children:jsxRuntimeExports.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):jsxRuntimeExports.jsx(CheckIcon,{...K})}var __default__$n={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const defaultProps$N={icon:CheckboxIcon},varsResolver$s=(fe,{radius:K,color:me,size:ge,iconColor:xe,variant:ye,autoContrast:ve})=>{const _e=parseThemeColor({color:me||fe.primaryColor,theme:fe}),Ee=_e.isThemeColor&&_e.shade===void 0?`var(--mantine-color-${_e.color}-outline)`:_e.color;return{indicator:{"--checkbox-size":getSize(ge,"checkbox-size"),"--checkbox-radius":K===void 0?void 0:getRadius(K),"--checkbox-color":ye==="outline"?Ee:getThemeColor(me,fe),"--checkbox-icon-color":xe?getThemeColor(xe,fe):getAutoContrastValue(ve,fe)?getContrastColor({color:me,theme:fe,autoContrast:ve}):void 0}}},CheckboxIndicator=factory((fe,K)=>{const me=useProps("CheckboxIndicator",defaultProps$N,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,icon:be,indeterminate:Ae,radius:Se,color:Ce,iconColor:Te,autoContrast:Re,checked:De,mod:Ie,variant:Be,disabled:Le,...Oe}=me,Fe=be,Ue=useStyles({name:"CheckboxIndicator",classes:__default__$n,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$s,rootSelector:"indicator"}),Ne=useCheckboxCardContext(),He=typeof De=="boolean"||typeof Ae=="boolean"?De||Ae:Ne?.checked||!1;return jsxRuntimeExports.jsx(Box,{ref:K,...Ue("indicator",{variant:Be}),variant:Be,mod:[{checked:He,disabled:Le},Ie],...Oe,children:jsxRuntimeExports.jsx(Fe,{indeterminate:Ae,...Ue("icon")})})});CheckboxIndicator.displayName="@mantine/core/CheckboxIndicator";CheckboxIndicator.classes=__default__$n;var __default__$m={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const defaultProps$M={labelPosition:"right",icon:CheckboxIcon},varsResolver$r=(fe,{radius:K,color:me,size:ge,iconColor:xe,variant:ye,autoContrast:ve})=>{const _e=parseThemeColor({color:me||fe.primaryColor,theme:fe}),Ee=_e.isThemeColor&&_e.shade===void 0?`var(--mantine-color-${_e.color}-outline)`:_e.color;return{root:{"--checkbox-size":getSize(ge,"checkbox-size"),"--checkbox-radius":K===void 0?void 0:getRadius(K),"--checkbox-color":ye==="outline"?Ee:getThemeColor(me,fe),"--checkbox-icon-color":xe?getThemeColor(xe,fe):getAutoContrastValue(ve,fe)?getContrastColor({color:me,theme:fe,autoContrast:ve}):void 0}}},Checkbox=factory((fe,K)=>{const me=useProps("Checkbox",defaultProps$M,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,color:be,label:Ae,id:Se,size:Ce,radius:Te,wrapperProps:Re,checked:De,labelPosition:Ie,description:Be,error:Le,disabled:Oe,variant:Fe,indeterminate:Ue,icon:Ne,rootRef:He,iconColor:ze,onChange:je,autoContrast:Ge,mod:Xe,...qe}=me,Qe=useCheckboxGroupContext(),nt=Ce||Qe?.size,Nt=Ne,Ye=useStyles({name:"Checkbox",props:me,classes:__default__$m,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$r}),{styleProps:at,rest:rt}=extractStyleProps(qe),Ft=useId$1(Se),Je=Qe?{checked:Qe.value.includes(rt.value),onChange:Wt=>{Qe.onChange(Wt),je?.(Wt)}}:{};return jsxRuntimeExports.jsx(InlineInput,{...Ye("root"),__staticSelector:"Checkbox",__stylesApiProps:me,id:Ft,size:nt,labelPosition:Ie,label:Ae,description:Be,error:Le,disabled:Oe,classNames:ge,styles:ve,unstyled:_e,"data-checked":Je.checked||De||void 0,variant:Fe,ref:He,mod:Xe,...at,...Re,children:jsxRuntimeExports.jsxs(Box,{...Ye("inner"),mod:{"data-label-position":Ie},children:[jsxRuntimeExports.jsx(Box,{component:"input",id:Ft,ref:K,checked:De,disabled:Oe,mod:{error:!!Le,indeterminate:Ue},...Ye("input",{focusable:!0,variant:Fe}),onChange:je,...rt,...Je,type:"checkbox"}),jsxRuntimeExports.jsx(Nt,{indeterminate:Ue,...Ye("icon")})]})})});Checkbox.classes={...__default__$m,...InlineInputClasses};Checkbox.displayName="@mantine/core/Checkbox";Checkbox.Group=CheckboxGroup;Checkbox.Indicator=CheckboxIndicator;Checkbox.Card=CheckboxCard;function isOptionsGroup(fe){return"group"in fe}function defaultOptionsFilter({options:fe,search:K,limit:me}){const ge=K.trim().toLowerCase(),xe=[];for(let ye=0;ye<fe.length;ye+=1){const ve=fe[ye];if(xe.length===me)return xe;isOptionsGroup(ve)&&xe.push({group:ve.group,items:defaultOptionsFilter({options:ve.items,search:K,limit:me-xe.length})}),isOptionsGroup(ve)||ve.label.toLowerCase().includes(ge)&&xe.push(ve)}return xe}function isEmptyComboboxData(fe){if(fe.length===0)return!0;for(const K of fe)if(!("group"in K)||K.items.length>0)return!1;return!0}function validateOptions(fe,K=new Set){if(Array.isArray(fe))for(const me of fe)if(isOptionsGroup(me))validateOptions(me.items,K);else{if(typeof me.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof me.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof me.value}`);if(K.has(me.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${me.value}" was provided more than once`);K.add(me.value)}}function isValueChecked(fe,K){return Array.isArray(fe)?fe.includes(K):fe===K}function Option({data:fe,withCheckIcon:K,value:me,checkIconPosition:ge,unstyled:xe,renderOption:ye}){if(!isOptionsGroup(fe)){const _e=isValueChecked(me,fe.value),Ee=K&&_e&&jsxRuntimeExports.jsx(CheckIcon,{className:__default__$q.optionsDropdownCheckIcon}),be=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[ge==="left"&&Ee,jsxRuntimeExports.jsx("span",{children:fe.label}),ge==="right"&&Ee]});return jsxRuntimeExports.jsx(Combobox.Option,{value:fe.value,disabled:fe.disabled,className:clsx({[__default__$q.optionsDropdownOption]:!xe}),"data-reverse":ge==="right"||void 0,"data-checked":_e||void 0,"aria-selected":_e,active:_e,children:typeof ye=="function"?ye({option:fe,checked:_e}):be})}const ve=fe.items.map(_e=>jsxRuntimeExports.jsx(Option,{data:_e,value:me,unstyled:xe,withCheckIcon:K,checkIconPosition:ge,renderOption:ye},_e.value));return jsxRuntimeExports.jsx(Combobox.Group,{label:fe.group,children:ve})}function OptionsDropdown({data:fe,hidden:K,hiddenWhenEmpty:me,filter:ge,search:xe,limit:ye,maxDropdownHeight:ve,withScrollArea:_e=!0,filterOptions:Ee=!0,withCheckIcon:be=!1,value:Ae,checkIconPosition:Se,nothingFoundMessage:Ce,unstyled:Te,labelId:Re,renderOption:De,scrollAreaProps:Ie,"aria-label":Be}){validateOptions(fe);const Oe=typeof xe=="string"?(ge||defaultOptionsFilter)({options:fe,search:Ee?xe:"",limit:ye??1/0}):fe,Fe=isEmptyComboboxData(Oe),Ue=Oe.map(Ne=>jsxRuntimeExports.jsx(Option,{data:Ne,withCheckIcon:be,value:Ae,checkIconPosition:Se,unstyled:Te,renderOption:De},isOptionsGroup(Ne)?Ne.group:Ne.value));return jsxRuntimeExports.jsx(Combobox.Dropdown,{hidden:K||me&&Fe,"data-composed":!0,children:jsxRuntimeExports.jsxs(Combobox.Options,{labelledBy:Re,"aria-label":Be,children:[_e?jsxRuntimeExports.jsx(ScrollArea.Autosize,{mah:ve??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...Ie,children:Ue}):Ue,Fe&&Ce&&jsxRuntimeExports.jsx(Combobox.Empty,{children:Ce})]})})}var __default__$l={root:"m_ddec01c0",icon:"m_dde7bd57",cite:"m_dde51a35"};const defaultProps$L={iconSize:48},varsResolver$q=(fe,{color:K,iconSize:me,radius:ge})=>{const xe=parseThemeColor({color:K||fe.primaryColor,theme:fe,colorScheme:"dark"}),ye=parseThemeColor({color:K||fe.primaryColor,theme:fe,colorScheme:"light"});return{root:{"--bq-bg-light":rgba$1(ye.value,.07),"--bq-bg-dark":rgba$1(xe.value,.06),"--bq-bd":getThemeColor(K,fe),"--bq-icon-size":rem(me),"--bq-radius":getRadius(ge)}}},Blockquote=factory((fe,K)=>{const me=useProps("Blockquote",defaultProps$L,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,children:be,icon:Ae,iconSize:Se,cite:Ce,...Te}=me,Re=useStyles({name:"Blockquote",classes:__default__$l,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$q});return jsxRuntimeExports.jsxs(Box,{component:"blockquote",ref:K,...Re("root"),...Te,children:[Ae&&jsxRuntimeExports.jsx("span",{...Re("icon"),children:Ae}),be,Ce&&jsxRuntimeExports.jsx("cite",{...Re("cite"),children:Ce})]})});Blockquote.classes=__default__$l;Blockquote.displayName="@mantine/core/Blockquote";var __default__$k={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const defaultProps$K={},varsResolver$p=(fe,{color:K,size:me,lineSize:ge,transitionDuration:xe,transitionTimingFunction:ye})=>({root:{"--burger-color":K?getThemeColor(K,fe):void 0,"--burger-size":getSize(me,"burger-size"),"--burger-line-size":ge?rem(ge):void 0,"--burger-transition-duration":xe===void 0?void 0:`${xe}ms`,"--burger-transition-timing-function":ye}}),Burger=factory((fe,K)=>{const me=useProps("Burger",defaultProps$K,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,opened:be,children:Ae,transitionDuration:Se,transitionTimingFunction:Ce,lineSize:Te,...Re}=me,De=useStyles({name:"Burger",classes:__default__$k,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$p});return jsxRuntimeExports.jsxs(UnstyledButton,{...De("root"),ref:K,...Re,children:[jsxRuntimeExports.jsx(Box,{mod:["reduce-motion",{opened:be}],...De("burger")}),Ae]})});Burger.classes=__default__$k;Burger.displayName="@mantine/core/Burger";var __default__$j={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844",groupSection:"m_70be2a01"};const defaultProps$J={orientation:"horizontal"},varsResolver$o=(fe,{borderWidth:K})=>({group:{"--button-border-width":rem(K)}}),ButtonGroup=factory((fe,K)=>{const me=useProps("ButtonGroup",defaultProps$J,fe),{className:ge,style:xe,classNames:ye,styles:ve,unstyled:_e,orientation:Ee,vars:be,borderWidth:Ae,variant:Se,mod:Ce,...Te}=useProps("ButtonGroup",defaultProps$J,fe),Re=useStyles({name:"ButtonGroup",props:me,classes:__default__$j,className:ge,style:xe,classNames:ye,styles:ve,unstyled:_e,vars:be,varsResolver:varsResolver$o,rootSelector:"group"});return jsxRuntimeExports.jsx(Box,{...Re("group"),ref:K,variant:Se,mod:[{"data-orientation":Ee},Ce],role:"group",...Te})});ButtonGroup.classes=__default__$j;ButtonGroup.displayName="@mantine/core/ButtonGroup";const defaultProps$I={},varsResolver$n=(fe,{radius:K,color:me,gradient:ge,variant:xe,autoContrast:ye,size:ve})=>{const _e=fe.variantColorResolver({color:me||fe.primaryColor,theme:fe,gradient:ge,variant:xe||"filled",autoContrast:ye});return{groupSection:{"--section-height":getSize(ve,"section-height"),"--section-padding-x":getSize(ve,"section-padding-x"),"--section-fz":ve?.includes("compact")?getFontSize(ve.replace("compact-","")):getFontSize(ve),"--section-radius":K===void 0?void 0:getRadius(K),"--section-bg":me||xe?_e.background:void 0,"--section-color":_e.color,"--section-bd":me||xe?_e.border:void 0}}},ButtonGroupSection=factory((fe,K)=>{const me=useProps("ButtonGroupSection",defaultProps$I,fe),{className:ge,style:xe,classNames:ye,styles:ve,unstyled:_e,vars:Ee,variant:be,gradient:Ae,radius:Se,autoContrast:Ce,...Te}=useProps("ButtonGroupSection",defaultProps$I,fe),Re=useStyles({name:"ButtonGroupSection",props:me,classes:__default__$j,className:ge,style:xe,classNames:ye,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$n,rootSelector:"groupSection"});return jsxRuntimeExports.jsx(Box,{...Re("groupSection"),ref:K,variant:be,...Te})});ButtonGroupSection.classes=__default__$j;ButtonGroupSection.displayName="@mantine/core/ButtonGroupSection";const loaderTransition={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${rem(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},defaultProps$H={},varsResolver$m=(fe,{radius:K,color:me,gradient:ge,variant:xe,size:ye,justify:ve,autoContrast:_e})=>{const Ee=fe.variantColorResolver({color:me||fe.primaryColor,theme:fe,gradient:ge,variant:xe||"filled",autoContrast:_e});return{root:{"--button-justify":ve,"--button-height":getSize(ye,"button-height"),"--button-padding-x":getSize(ye,"button-padding-x"),"--button-fz":ye?.includes("compact")?getFontSize(ye.replace("compact-","")):getFontSize(ye),"--button-radius":K===void 0?void 0:getRadius(K),"--button-bg":me||xe?Ee.background:void 0,"--button-hover":me||xe?Ee.hover:void 0,"--button-color":Ee.color,"--button-bd":me||xe?Ee.border:void 0,"--button-hover-color":me||xe?Ee.hoverColor:void 0}}},Button=polymorphicFactory((fe,K)=>{const me=useProps("Button",defaultProps$H,fe),{style:ge,vars:xe,className:ye,color:ve,disabled:_e,children:Ee,leftSection:be,rightSection:Ae,fullWidth:Se,variant:Ce,radius:Te,loading:Re,loaderProps:De,gradient:Ie,classNames:Be,styles:Le,unstyled:Oe,"data-disabled":Fe,autoContrast:Ue,mod:Ne,...He}=me,ze=useStyles({name:"Button",props:me,classes:__default__$j,className:ye,style:ge,classNames:Be,styles:Le,unstyled:Oe,vars:xe,varsResolver:varsResolver$m}),je=!!be,Ge=!!Ae;return jsxRuntimeExports.jsxs(UnstyledButton,{ref:K,...ze("root",{active:!_e&&!Re&&!Fe}),unstyled:Oe,variant:Ce,disabled:_e||Re,mod:[{disabled:_e||Fe,loading:Re,block:Se,"with-left-section":je,"with-right-section":Ge},Ne],...He,children:[jsxRuntimeExports.jsx(Transition$1,{mounted:!!Re,transition:loaderTransition,duration:150,children:Xe=>jsxRuntimeExports.jsx(Box,{component:"span",...ze("loader",{style:Xe}),"aria-hidden":!0,children:jsxRuntimeExports.jsx(Loader$1,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...De})})}),jsxRuntimeExports.jsxs("span",{...ze("inner"),children:[be&&jsxRuntimeExports.jsx(Box,{component:"span",...ze("section"),mod:{position:"left"},children:be}),jsxRuntimeExports.jsx(Box,{component:"span",mod:{loading:Re},...ze("label"),children:Ee}),Ae&&jsxRuntimeExports.jsx(Box,{component:"span",...ze("section"),mod:{position:"right"},children:Ae})]})]})});Button.classes=__default__$j;Button.displayName="@mantine/core/Button";Button.Group=ButtonGroup;Button.GroupSection=ButtonGroupSection;var __default__$i={root:"m_b183c0a2"};const defaultProps$G={},varsResolver$l=(fe,{color:K})=>({root:{"--code-bg":K?getThemeColor(K,fe):void 0}}),Code=factory((fe,K)=>{const me=useProps("Code",defaultProps$G,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,color:be,block:Ae,variant:Se,mod:Ce,...Te}=me,Re=useStyles({name:"Code",props:me,classes:__default__$i,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$l});return jsxRuntimeExports.jsx(Box,{component:Ae?"pre":"code",variant:Se,ref:K,mod:[{block:Ae},Ce],...Re("root"),...Te,dir:"ltr"})});Code.classes=__default__$i;Code.displayName="@mantine/core/Code";var __default__$h={root:"m_de3d2490",colorOverlay:"m_862f3d1b",shadowOverlay:"m_98ae7f22",alphaOverlay:"m_95709ac0",childrenOverlay:"m_93e74e3"};const defaultProps$F={withShadow:!0},varsResolver$k=(fe,{radius:K,size:me})=>({root:{"--cs-radius":K===void 0?void 0:getRadius(K),"--cs-size":rem(me)}}),ColorSwatch=polymorphicFactory((fe,K)=>{const me=useProps("ColorSwatch",defaultProps$F,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,color:be,size:Ae,radius:Se,withShadow:Ce,children:Te,variant:Re,...De}=useProps("ColorSwatch",defaultProps$F,me),Ie=useStyles({name:"ColorSwatch",props:me,classes:__default__$h,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$k});return jsxRuntimeExports.jsxs(Box,{ref:K,variant:Re,size:Ae,...Ie("root",{focusable:!0}),...De,children:[jsxRuntimeExports.jsx("span",{...Ie("alphaOverlay")}),Ce&&jsxRuntimeExports.jsx("span",{...Ie("shadowOverlay")}),jsxRuntimeExports.jsx("span",{...Ie("colorOverlay",{style:{backgroundColor:be}})}),jsxRuntimeExports.jsx("span",{...Ie("childrenOverlay"),children:Te})]})});ColorSwatch.classes=__default__$h;ColorSwatch.displayName="@mantine/core/ColorSwatch";const[ColorPickerProvider,useColorPickerContext]=createOptionalContext(null),Thumb$2=reactExports.forwardRef(({position:fe,...K},me)=>jsxRuntimeExports.jsx(Box,{ref:me,__vars:{"--thumb-y-offset":`${fe.y*100}%`,"--thumb-x-offset":`${fe.x*100}%`},...K}));Thumb$2.displayName="@mantine/core/ColorPickerThumb";var __default__$g={wrapper:"m_fee9c77",preview:"m_9dddfbac",body:"m_bffecc3e",sliders:"m_3283bb96",thumb:"m_40d572ba",swatch:"m_d8ee6fd8",swatches:"m_5711e686",saturation:"m_202a296e",saturationOverlay:"m_11b3db02",slider:"m_d856d47d",sliderOverlay:"m_8f327113"};const defaultProps$E={},ColorSlider=factory((fe,K)=>{const me=useProps("ColorSlider",defaultProps$E,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,onChange:be,onChangeEnd:Ae,maxValue:Se,round:Ce,size:Te="md",focusable:Re=!0,value:De,overlays:Ie,thumbColor:Be="transparent",onScrubStart:Le,onScrubEnd:Oe,__staticSelector:Fe="ColorPicker",...Ue}=me,Ne=useStyles({name:Fe,classes:__default__$g,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e}),ze=useColorPickerContext()?.getStyles||Ne,je=useMantineTheme(),[Ge,Xe]=reactExports.useState({y:0,x:De/Se}),qe=reactExports.useRef(Ge),Qe=rt=>Ce?Math.round(rt*Se):rt*Se,{ref:nt}=useMove(({x:rt,y:Ft})=>{qe.current={x:rt,y:Ft},be?.(Qe(rt))},{onScrubEnd:()=>{const{x:rt}=qe.current;Ae?.(Qe(rt)),Oe?.()},onScrubStart:Le});useDidUpdate(()=>{Xe({y:0,x:De/Se})},[De]);const Nt=(rt,Ft)=>{rt.preventDefault();const Je=clampUseMovePosition(Ft);be?.(Qe(Je.x)),Ae?.(Qe(Je.x))},Ye=rt=>{switch(rt.key){case"ArrowRight":{Nt(rt,{x:Ge.x+.05,y:Ge.y});break}case"ArrowLeft":{Nt(rt,{x:Ge.x-.05,y:Ge.y});break}}},at=Ie.map((rt,Ft)=>reactExports.createElement("div",{...ze("sliderOverlay"),style:rt,key:Ft}));return jsxRuntimeExports.jsxs(Box,{...Ue,ref:useMergedRef(nt,K),...ze("slider"),role:"slider","aria-valuenow":De,"aria-valuemax":Se,"aria-valuemin":0,tabIndex:Re?0:-1,onKeyDown:Ye,"data-focus-ring":je.focusRing,__vars:{"--cp-thumb-size":`var(--cp-thumb-size-${Te})`},children:[at,jsxRuntimeExports.jsx(Thumb$2,{position:Ge,...ze("thumb",{style:{top:rem(1),background:Be}})})]})});ColorSlider.displayName="@mantine/core/ColorSlider";function round(fe,K=0,me=10**K){return Math.round(me*fe)/me}function hslaToHsva({h:fe,s:K,l:me,a:ge}){const xe=K*((me<50?me:100-me)/100);return{h:fe,s:xe>0?2*xe/(me+xe)*100:0,v:me+xe,a:ge}}const angleUnits={grad:360/400,turn:360,rad:360/(Math.PI*2)};function parseHue(fe,K="deg"){return Number(fe)*(angleUnits[K]||1)}const HSL_REGEXP=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function parseHsla(fe){const K=HSL_REGEXP.exec(fe);return K?hslaToHsva({h:parseHue(K[1],K[2]),s:Number(K[3]),l:Number(K[4]),a:K[5]===void 0?1:Number(K[5])/(K[6]?100:1)}):{h:0,s:0,v:0,a:1}}function rgbaToHsva({r:fe,g:K,b:me,a:ge}){const xe=Math.max(fe,K,me),ye=xe-Math.min(fe,K,me),ve=ye?xe===fe?(K-me)/ye:xe===K?2+(me-fe)/ye:4+(fe-K)/ye:0;return{h:round(60*(ve<0?ve+6:ve),3),s:round(xe?ye/xe*100:0,3),v:round(xe/255*100,3),a:ge}}function parseHex(fe){const K=fe[0]==="#"?fe.slice(1):fe;return K.length===3?rgbaToHsva({r:parseInt(K[0]+K[0],16),g:parseInt(K[1]+K[1],16),b:parseInt(K[2]+K[2],16),a:1}):rgbaToHsva({r:parseInt(K.slice(0,2),16),g:parseInt(K.slice(2,4),16),b:parseInt(K.slice(4,6),16),a:1})}function parseHexa(fe){const K=fe[0]==="#"?fe.slice(1):fe,me=ve=>round(parseInt(ve,16)/255,3);if(K.length===4){const ve=K.slice(0,3),_e=me(K[3]+K[3]);return{...parseHex(ve),a:_e}}const ge=K.slice(0,6),xe=me(K.slice(6,8));return{...parseHex(ge),a:xe}}const RGB_REGEXP=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i;function parseRgba(fe){const K=RGB_REGEXP.exec(fe);return K?rgbaToHsva({r:Number(K[1])/(K[2]?100/255:1),g:Number(K[3])/(K[4]?100/255:1),b:Number(K[5])/(K[6]?100/255:1),a:K[7]===void 0?1:Number(K[7])/(K[8]?100:1)}):{h:0,s:0,v:0,a:1}}const VALIDATION_REGEXP={hex:/^#?([0-9A-F]{3}){1,2}$/i,hexa:/^#?([0-9A-F]{4}){1,2}$/i,rgb:/^rgb\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,rgba:/^rgba\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+(?:\.\d+)?))?\)$/i,hsl:/hsl\(\s*(\d+)\s*,\s*(\d+(?:\.\d+)?%)\s*,\s*(\d+(?:\.\d+)?%)\)/i,hsla:/^hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*(\d*(?:\.\d+)?)\)$/i},CONVERTERS$1={hex:parseHex,hexa:parseHexa,rgb:parseRgba,rgba:parseRgba,hsl:parseHsla,hsla:parseHsla};function isColorValid(fe){for(const[,K]of Object.entries(VALIDATION_REGEXP))if(K.test(fe))return!0;return!1}function parseColor(fe){if(typeof fe!="string")return{h:0,s:0,v:0,a:1};if(fe==="transparent")return{h:0,s:0,v:0,a:0};const K=fe.trim();for(const[me,ge]of Object.entries(VALIDATION_REGEXP))if(ge.test(K))return CONVERTERS$1[me](K);return{h:0,s:0,v:0,a:1}}const defaultProps$D={},AlphaSlider=reactExports.forwardRef((fe,K)=>{const{value:me,onChange:ge,onChangeEnd:xe,color:ye,...ve}=useProps("AlphaSlider",defaultProps$D,fe);return jsxRuntimeExports.jsx(ColorSlider,{...ve,ref:K,value:me,onChange:_e=>ge?.(round(_e,2)),onChangeEnd:_e=>xe?.(round(_e,2)),maxValue:1,round:!1,"data-alpha":!0,overlays:[{backgroundImage:"linear-gradient(45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(-45deg, var(--slider-checkers) 25%, transparent 25%), linear-gradient(45deg, transparent 75%, var(--slider-checkers) 75%), linear-gradient(-45deg, var(--mantine-color-body) 75%, var(--slider-checkers) 75%)",backgroundSize:`${rem(8)} ${rem(8)}`,backgroundPosition:`0 0, 0 ${rem(4)}, ${rem(4)} ${rem(-4)}, ${rem(-4)} 0`},{backgroundImage:`linear-gradient(90deg, transparent, ${ye})`},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${rem(1)} inset, rgb(0, 0, 0, .15) 0 0 ${rem(4)} inset`}]})});AlphaSlider.displayName="@mantine/core/AlphaSlider";function hsvaToRgbaObject({h:fe,s:K,v:me,a:ge}){const xe=fe/360*6,ye=K/100,ve=me/100,_e=Math.floor(xe),Ee=ve*(1-ye),be=ve*(1-(xe-_e)*ye),Ae=ve*(1-(1-xe+_e)*ye),Se=_e%6;return{r:round([ve,be,Ee,Ee,Ae,ve][Se]*255),g:round([Ae,ve,ve,be,Ee,Ee][Se]*255),b:round([Ee,Ee,Ae,ve,ve,be][Se]*255),a:round(ge,2)}}function hsvaToRgba(fe,K){const{r:me,g:ge,b:xe,a:ye}=hsvaToRgbaObject(fe);return K?`rgba(${me}, ${ge}, ${xe}, ${round(ye,2)})`:`rgb(${me}, ${ge}, ${xe})`}function hsvaToHsl({h:fe,s:K,v:me,a:ge},xe){const ye=(200-K)*me/100,ve={h:Math.round(fe),s:Math.round(ye>0&&ye<200?K*me/100/(ye<=100?ye:200-ye)*100:0),l:Math.round(ye/2)};return xe?`hsla(${ve.h}, ${ve.s}%, ${ve.l}%, ${round(ge,2)})`:`hsl(${ve.h}, ${ve.s}%, ${ve.l}%)`}function formatHexPart(fe){const K=fe.toString(16);return K.length<2?`0${K}`:K}function hsvaToHex(fe){const{r:K,g:me,b:ge}=hsvaToRgbaObject(fe);return`#${formatHexPart(K)}${formatHexPart(me)}${formatHexPart(ge)}`}function hsvaToHexa(fe){const K=Math.round(fe.a*255);return`${hsvaToHex(fe)}${formatHexPart(K)}`}const CONVERTERS={hex:hsvaToHex,hexa:fe=>hsvaToHexa(fe),rgb:fe=>hsvaToRgba(fe,!1),rgba:fe=>hsvaToRgba(fe,!0),hsl:fe=>hsvaToHsl(fe,!1),hsla:fe=>hsvaToHsl(fe,!0)};function convertHsvaTo(fe,K){return K?fe in CONVERTERS?CONVERTERS[fe](K):CONVERTERS.hex(K):"#000000"}const HueSlider=reactExports.forwardRef((fe,K)=>{const{value:me,onChange:ge,onChangeEnd:xe,color:ye,...ve}=useProps("HueSlider",{},fe);return jsxRuntimeExports.jsx(ColorSlider,{...ve,ref:K,value:me,onChange:ge,onChangeEnd:xe,maxValue:360,thumbColor:`hsl(${me}, 100%, 50%)`,round:!0,"data-hue":!0,overlays:[{backgroundImage:"linear-gradient(to right,hsl(0,100%,50%),hsl(60,100%,50%),hsl(120,100%,50%),hsl(170,100%,50%),hsl(240,100%,50%),hsl(300,100%,50%),hsl(360,100%,50%))"},{boxShadow:`rgba(0, 0, 0, .1) 0 0 0 ${rem(1)} inset, rgb(0, 0, 0, .15) 0 0 ${rem(4)} inset`}]})});HueSlider.displayName="@mantine/core/HueSlider";function Saturation({className:fe,onChange:K,onChangeEnd:me,value:ge,saturationLabel:xe,focusable:ye=!0,size:ve,color:_e,onScrubStart:Ee,onScrubEnd:be,...Ae}){const{getStyles:Se}=useColorPickerContext(),[Ce,Te]=reactExports.useState({x:ge.s/100,y:1-ge.v/100}),Re=reactExports.useRef(Ce),{ref:De}=useMove(({x:Le,y:Oe})=>{Re.current={x:Le,y:Oe},K({s:Math.round(Le*100),v:Math.round((1-Oe)*100)})},{onScrubEnd:()=>{const{x:Le,y:Oe}=Re.current;me({s:Math.round(Le*100),v:Math.round((1-Oe)*100)}),be?.()},onScrubStart:Ee});reactExports.useEffect(()=>{Te({x:ge.s/100,y:1-ge.v/100})},[ge.s,ge.v]);const Ie=(Le,Oe)=>{Le.preventDefault();const Fe=clampUseMovePosition(Oe);K({s:Math.round(Fe.x*100),v:Math.round((1-Fe.y)*100)}),me({s:Math.round(Fe.x*100),v:Math.round((1-Fe.y)*100)})},Be=Le=>{switch(Le.key){case"ArrowUp":{Ie(Le,{y:Ce.y-.05,x:Ce.x});break}case"ArrowDown":{Ie(Le,{y:Ce.y+.05,x:Ce.x});break}case"ArrowRight":{Ie(Le,{x:Ce.x+.05,y:Ce.y});break}case"ArrowLeft":{Ie(Le,{x:Ce.x-.05,y:Ce.y});break}}};return jsxRuntimeExports.jsxs(Box,{...Se("saturation"),ref:De,...Ae,role:"slider","aria-label":xe,"aria-valuenow":Ce.x,"aria-valuetext":convertHsvaTo("rgba",ge),tabIndex:ye?0:-1,onKeyDown:Be,children:[jsxRuntimeExports.jsx("div",{...Se("saturationOverlay",{style:{backgroundColor:`hsl(${ge.h}, 100%, 50%)`}})}),jsxRuntimeExports.jsx("div",{...Se("saturationOverlay",{style:{backgroundImage:"linear-gradient(90deg, #fff, transparent)"}})}),jsxRuntimeExports.jsx("div",{...Se("saturationOverlay",{style:{backgroundImage:"linear-gradient(0deg, #000, transparent)"}})}),jsxRuntimeExports.jsx(Thumb$2,{position:Ce,...Se("thumb",{style:{backgroundColor:_e}})})]})}Saturation.displayName="@mantine/core/Saturation";const Swatches=reactExports.forwardRef(({className:fe,datatype:K,setValue:me,onChangeEnd:ge,size:xe,focusable:ye,data:ve,swatchesPerRow:_e,...Ee},be)=>{const Ae=useColorPickerContext(),Se=ve.map((Ce,Te)=>reactExports.createElement(ColorSwatch,{...Ae.getStyles("swatch"),unstyled:Ae.unstyled,component:"button",type:"button",color:Ce,key:Te,radius:"sm",onClick:()=>{me(Ce),ge?.(Ce)},"aria-label":Ce,tabIndex:ye?0:-1,"data-swatch":!0}));return jsxRuntimeExports.jsx(Box,{...Ae.getStyles("swatches"),ref:be,...Ee,children:Se})});Swatches.displayName="@mantine/core/Swatches";const defaultProps$C={swatchesPerRow:7,withPicker:!0,focusable:!0,size:"md",__staticSelector:"ColorPicker"},varsResolver$j=(fe,{size:K,swatchesPerRow:me})=>({wrapper:{"--cp-preview-size":getSize(K,"cp-preview-size"),"--cp-width":getSize(K,"cp-width"),"--cp-body-spacing":getSpacing(K),"--cp-swatch-size":`${100/me}%`,"--cp-thumb-size":getSize(K,"cp-thumb-size"),"--cp-saturation-height":getSize(K,"cp-saturation-height")}}),ColorPicker=factory((fe,K)=>{const me=useProps("ColorPicker",defaultProps$C,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,format:be,value:Ae,defaultValue:Se,onChange:Ce,onChangeEnd:Te,withPicker:Re,size:De,saturationLabel:Ie,hueLabel:Be,alphaLabel:Le,focusable:Oe,swatches:Fe,swatchesPerRow:Ue,fullWidth:Ne,onColorSwatchClick:He,__staticSelector:ze,mod:je,...Ge}=me,Xe=useStyles({name:ze,props:me,classes:__default__$g,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,rootSelector:"wrapper",vars:Ee,varsResolver:varsResolver$j}),qe=reactExports.useRef(be),Qe=reactExports.useRef(""),nt=reactExports.useRef(-1),Nt=reactExports.useRef(!1),Ye=be==="hexa"||be==="rgba"||be==="hsla",[at,rt,Ft]=useUncontrolled({value:Ae,defaultValue:Se,finalValue:"#FFFFFF",onChange:Ce}),[Je,Wt]=reactExports.useState(parseColor(at)),Kt=()=>{window.clearTimeout(nt.current),Nt.current=!0},Pt=()=>{window.clearTimeout(nt.current),nt.current=window.setTimeout(()=>{Nt.current=!1},200)},Yt=Gt=>{Wt(an=>{const pn={...an,...Gt};return Qe.current=convertHsvaTo(qe.current,pn),pn}),rt(Qe.current)};return useDidUpdate(()=>{isColorValid(Ae)&&!Nt.current&&Wt(parseColor(Ae))},[Ae]),useDidUpdate(()=>{qe.current=be,rt(convertHsvaTo(be,Je))},[be]),jsxRuntimeExports.jsx(ColorPickerProvider,{value:{getStyles:Xe,unstyled:_e},children:jsxRuntimeExports.jsxs(Box,{ref:K,...Xe("wrapper"),size:De,mod:[{"full-width":Ne},je],...Ge,children:[Re&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Saturation,{value:Je,onChange:Yt,onChangeEnd:({s:Gt,v:an})=>Te?.(convertHsvaTo(qe.current,{...Je,s:Gt,v:an})),color:at,size:De,focusable:Oe,saturationLabel:Ie,onScrubStart:Kt,onScrubEnd:Pt}),jsxRuntimeExports.jsxs("div",{...Xe("body"),children:[jsxRuntimeExports.jsxs("div",{...Xe("sliders"),children:[jsxRuntimeExports.jsx(HueSlider,{value:Je.h,onChange:Gt=>Yt({h:Gt}),onChangeEnd:Gt=>Te?.(convertHsvaTo(qe.current,{...Je,h:Gt})),size:De,focusable:Oe,"aria-label":Be,onScrubStart:Kt,onScrubEnd:Pt}),Ye&&jsxRuntimeExports.jsx(AlphaSlider,{value:Je.a,onChange:Gt=>Yt({a:Gt}),onChangeEnd:Gt=>{Te?.(convertHsvaTo(qe.current,{...Je,a:Gt}))},size:De,color:convertHsvaTo("hex",Je),focusable:Oe,"aria-label":Le,onScrubStart:Kt,onScrubEnd:Pt})]}),Ye&&jsxRuntimeExports.jsx(ColorSwatch,{color:at,radius:"sm",size:"var(--cp-preview-size)",...Xe("preview")})]})]}),Array.isArray(Fe)&&jsxRuntimeExports.jsx(Swatches,{data:Fe,swatchesPerRow:Ue,focusable:Oe,setValue:rt,onChangeEnd:Gt=>{const an=convertHsvaTo(be,parseColor(Gt));He?.(an),Te?.(an),Ft||Wt(parseColor(Gt))}})]})})});ColorPicker.classes=__default__$g;ColorPicker.displayName="@mantine/core/ColorPicker";function EyeDropperIcon({style:fe,...K}){return jsxRuntimeExports.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--ci-eye-dropper-icon-size)",height:"var(--ci-eye-dropper-icon-size)",...fe},viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",...K,children:[jsxRuntimeExports.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),jsxRuntimeExports.jsx("path",{d:"M11 7l6 6"}),jsxRuntimeExports.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}var __default__$f={eyeDropperIcon:"m_b077c2bc",colorPreview:"m_c5ccdcab",dropdown:"m_5ece2cd7"};const defaultProps$B={format:"hex",fixOnBlur:!0,withPreview:!0,swatchesPerRow:7,withPicker:!0,popoverProps:{transitionProps:{transition:"fade",duration:0}},withEyeDropper:!0},varsResolver$i=(fe,{size:K})=>({eyeDropperIcon:{"--ci-eye-dropper-icon-size":getSize(K,"ci-eye-dropper-icon-size")},colorPreview:{"--ci-preview-size":getSize(K,"ci-preview-size")}}),ColorInput=factory((fe,K)=>{const me=useProps("ColorInput",defaultProps$B,fe),{classNames:ge,styles:xe,unstyled:ye,disallowInput:ve,fixOnBlur:_e,popoverProps:Ee,withPreview:be,withEyeDropper:Ae,eyeDropperIcon:Se,closeOnColorSwatchClick:Ce,eyeDropperButtonProps:Te,value:Re,defaultValue:De,onChange:Ie,onChangeEnd:Be,onClick:Le,onFocus:Oe,onBlur:Fe,inputProps:Ue,format:Ne,wrapperProps:He,readOnly:ze,withPicker:je,swatches:Ge,disabled:Xe,leftSection:qe,rightSection:Qe,swatchesPerRow:nt,...Nt}=useInputProps("ColorInput",defaultProps$B,fe),Ye=useStyles({name:"ColorInput",props:me,classes:__default__$f,classNames:ge,styles:xe,unstyled:ye,rootSelector:"wrapper",vars:me.vars,varsResolver:varsResolver$i}),{resolvedClassNames:at,resolvedStyles:rt}=useResolvedStylesApi({classNames:ge,styles:xe,props:me}),[Ft,Je]=reactExports.useState(!1),[Wt,Kt]=reactExports.useState(""),[Pt,Yt]=useUncontrolled({value:Re,defaultValue:De,finalValue:"",onChange:Ie}),{supported:Gt,open:an}=useEyeDropper(),pn=jsxRuntimeExports.jsx(ActionIcon,{...Te,...Ye("eyeDropperButton",{className:Te?.className,style:Te?.style}),variant:"subtle",color:"gray",size:Ue.size,unstyled:ye,onClick:()=>an().then(kn=>{if(kn?.sRGBHex){const bn=convertHsvaTo(Ne,parseColor(kn.sRGBHex));Yt(bn),Be?.(bn)}}).catch(()=>{}),children:Se||jsxRuntimeExports.jsx(EyeDropperIcon,{...Ye("eyeDropperIcon")})}),En=kn=>{Oe?.(kn),Je(!0)},$n=kn=>{_e&&Yt(Wt),Fe?.(kn),Je(!1)},Un=kn=>{Le?.(kn),Je(!0)};return reactExports.useEffect(()=>{(isColorValid(Pt)||Pt.trim()==="")&&Kt(Pt)},[Pt]),useDidUpdate(()=>{isColorValid(Pt)&&Yt(convertHsvaTo(Ne,parseColor(Pt)))},[Ne]),jsxRuntimeExports.jsx(Input.Wrapper,{...He,classNames:at,styles:rt,__staticSelector:"ColorInput",children:jsxRuntimeExports.jsxs(Popover,{__staticSelector:"ColorInput",position:"bottom-start",offset:5,opened:Ft,...Ee,classNames:at,styles:rt,unstyled:ye,withRoles:!1,disabled:ze||je===!1&&(!Array.isArray(Ge)||Ge.length===0),children:[jsxRuntimeExports.jsx(Popover.Target,{children:jsxRuntimeExports.jsx(Input,{autoComplete:"off",...Nt,...Ue,classNames:at,styles:rt,disabled:Xe,ref:K,__staticSelector:"ColorInput",onFocus:En,onBlur:$n,onClick:Un,spellCheck:!1,value:Pt,onChange:kn=>{const bn=kn.currentTarget.value;Yt(bn),isColorValid(bn)&&Be?.(convertHsvaTo(Ne,parseColor(bn)))},leftSection:qe||(be?jsxRuntimeExports.jsx(ColorSwatch,{color:isColorValid(Pt)?Pt:"#fff",size:"var(--ci-preview-size)",...Ye("colorPreview")}):null),readOnly:ve||ze,pointer:ve,unstyled:ye,rightSection:Qe||(Ae&&!Xe&&!ze&&Gt?pn:null)})}),jsxRuntimeExports.jsx(Popover.Dropdown,{onMouseDown:kn=>kn.preventDefault(),className:__default__$f.dropdown,children:jsxRuntimeExports.jsx(ColorPicker,{__staticSelector:"ColorInput",value:Pt,onChange:Yt,onChangeEnd:Be,format:Ne,swatches:Ge,swatchesPerRow:nt,withPicker:je,size:Ue.size,focusable:!1,unstyled:ye,styles:rt,classNames:at,onColorSwatchClick:()=>Ce&&Je(!1)})})]})})});ColorInput.classes=InputBase.classes;ColorInput.displayName="@mantine/core/ColorInput";var __default__$e={root:"m_7485cace"};const defaultProps$A={},varsResolver$h=(fe,{size:K,fluid:me})=>({root:{"--container-size":me?void 0:getSize(K,"container-size")}}),Container=factory((fe,K)=>{const me=useProps("Container",defaultProps$A,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,fluid:be,mod:Ae,...Se}=me,Ce=useStyles({name:"Container",classes:__default__$e,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$h});return jsxRuntimeExports.jsx(Box,{ref:K,mod:[{fluid:be},Ae],...Ce("root"),...Se})});Container.classes=__default__$e;Container.displayName="@mantine/core/Container";const defaultProps$z={timeout:1e3};function CopyButton(fe){const{children:K,timeout:me,value:ge,...xe}=useProps("CopyButton",defaultProps$z,fe),ye=useClipboard({timeout:me}),ve=()=>ye.copy(ge);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:K({copy:ve,copied:ye.copied,...xe})})}CopyButton.displayName="@mantine/core/CopyButton";var __default__$d={root:"m_3eebeb36",label:"m_9e365f20"};const defaultProps$y={orientation:"horizontal"},varsResolver$g=(fe,{color:K,variant:me,size:ge})=>({root:{"--divider-color":K?getThemeColor(K,fe):void 0,"--divider-border-style":me,"--divider-size":getSize(ge,"divider-size")}}),Divider=factory((fe,K)=>{const me=useProps("Divider",defaultProps$y,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,color:be,orientation:Ae,label:Se,labelPosition:Ce,mod:Te,...Re}=me,De=useStyles({name:"Divider",classes:__default__$d,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$g});return jsxRuntimeExports.jsx(Box,{ref:K,mod:[{orientation:Ae,"with-label":!!Se},Te],...De("root"),...Re,role:"separator",children:Se&&jsxRuntimeExports.jsx(Box,{component:"span",mod:{position:Ce},...De("label"),children:Se})})});Divider.classes=__default__$d;Divider.displayName="@mantine/core/Divider";var __default__$c={root:"m_9e117634"};const defaultProps$x={},varsResolver$f=(fe,{radius:K,fit:me})=>({root:{"--image-radius":K===void 0?void 0:getRadius(K),"--image-object-fit":me}}),Image$1=polymorphicFactory((fe,K)=>{const me=useProps("Image",defaultProps$x,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,onError:be,src:Ae,radius:Se,fit:Ce,fallbackSrc:Te,mod:Re,...De}=me,[Ie,Be]=reactExports.useState(!Ae);reactExports.useEffect(()=>Be(!Ae),[Ae]);const Le=useStyles({name:"Image",classes:__default__$c,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$f});return Ie&&Te?jsxRuntimeExports.jsx(Box,{component:"img",ref:K,src:Te,...Le("root"),onError:be,mod:["fallback",Re],...De}):jsxRuntimeExports.jsx(Box,{component:"img",ref:K,...Le("root"),src:Ae,onError:Oe=>{be?.(Oe),Be(!0)},mod:Re,...De})});Image$1.classes=__default__$c;Image$1.displayName="@mantine/core/Image";var index$2=reactExports.useLayoutEffect,useLatest=function(K){var me=React$4.useRef(K);return index$2(function(){me.current=K}),me},updateRef=function(K,me){if(typeof K=="function"){K(me);return}K.current=me},useComposedRef=function(K,me){var ge=React$4.useRef();return React$4.useCallback(function(xe){K.current=xe,ge.current&&updateRef(ge.current,null),ge.current=me,me&&updateRef(me,xe)},[me])},HIDDEN_TEXTAREA_STYLE={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},forceHiddenStyles=function(K){Object.keys(HIDDEN_TEXTAREA_STYLE).forEach(function(me){K.style.setProperty(me,HIDDEN_TEXTAREA_STYLE[me],"important")})},forceHiddenStyles$1=forceHiddenStyles,hiddenTextarea=null,getHeight=function(K,me){var ge=K.scrollHeight;return me.sizingStyle.boxSizing==="border-box"?ge+me.borderSize:ge-me.paddingSize};function calculateNodeHeight(fe,K,me,ge){me===void 0&&(me=1),ge===void 0&&(ge=1/0),hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),hiddenTextarea.setAttribute("tabindex","-1"),hiddenTextarea.setAttribute("aria-hidden","true"),forceHiddenStyles$1(hiddenTextarea)),hiddenTextarea.parentNode===null&&document.body.appendChild(hiddenTextarea);var xe=fe.paddingSize,ye=fe.borderSize,ve=fe.sizingStyle,_e=ve.boxSizing;Object.keys(ve).forEach(function(Ce){var Te=Ce;hiddenTextarea.style[Te]=ve[Te]}),forceHiddenStyles$1(hiddenTextarea),hiddenTextarea.value=K;var Ee=getHeight(hiddenTextarea,fe);hiddenTextarea.value=K,Ee=getHeight(hiddenTextarea,fe),hiddenTextarea.value="x";var be=hiddenTextarea.scrollHeight-xe,Ae=be*me;_e==="border-box"&&(Ae=Ae+xe+ye),Ee=Math.max(Ae,Ee);var Se=be*ge;return _e==="border-box"&&(Se=Se+xe+ye),Ee=Math.min(Se,Ee),[Ee,be]}var noop$1=function(){},pick=function(K,me){return K.reduce(function(ge,xe){return ge[xe]=me[xe],ge},{})},SIZING_STYLE=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],isIE=!!document.documentElement.currentStyle,getSizingData=function(K){var me=window.getComputedStyle(K);if(me===null)return null;var ge=pick(SIZING_STYLE,me),xe=ge.boxSizing;if(xe==="")return null;isIE&&xe==="border-box"&&(ge.width=parseFloat(ge.width)+parseFloat(ge.borderRightWidth)+parseFloat(ge.borderLeftWidth)+parseFloat(ge.paddingRight)+parseFloat(ge.paddingLeft)+"px");var ye=parseFloat(ge.paddingBottom)+parseFloat(ge.paddingTop),ve=parseFloat(ge.borderBottomWidth)+parseFloat(ge.borderTopWidth);return{sizingStyle:ge,paddingSize:ye,borderSize:ve}},getSizingData$1=getSizingData;function useListener(fe,K,me){var ge=useLatest(me);reactExports.useLayoutEffect(function(){var xe=function(ve){return ge.current(ve)};if(fe)return fe.addEventListener(K,xe),function(){return fe.removeEventListener(K,xe)}},[])}var useWindowResizeListener=function(K){useListener(window,"resize",K)},useFontsLoadedListener=function(K){useListener(document.fonts,"loadingdone",K)},_excluded=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],TextareaAutosize=function(K,me){var ge=K.cacheMeasurements,xe=K.maxRows,ye=K.minRows,ve=K.onChange,_e=ve===void 0?noop$1:ve,Ee=K.onHeightChange,be=Ee===void 0?noop$1:Ee,Ae=_objectWithoutPropertiesLoose(K,_excluded),Se=Ae.value!==void 0,Ce=reactExports.useRef(null),Te=useComposedRef(Ce,me),Re=reactExports.useRef(0),De=reactExports.useRef(),Ie=function(){var Oe=Ce.current,Fe=ge&&De.current?De.current:getSizingData$1(Oe);if(Fe){De.current=Fe;var Ue=calculateNodeHeight(Fe,Oe.value||Oe.placeholder||"x",ye,xe),Ne=Ue[0],He=Ue[1];Re.current!==Ne&&(Re.current=Ne,Oe.style.setProperty("height",Ne+"px","important"),be(Ne,{rowHeight:He}))}},Be=function(Oe){Se||Ie(),_e(Oe)};return reactExports.useLayoutEffect(Ie),useWindowResizeListener(Ie),useFontsLoadedListener(Ie),reactExports.createElement("textarea",_extends$2({},Ae,{onChange:Be,ref:Te}))},index$1=reactExports.forwardRef(TextareaAutosize);const defaultProps$w={},Textarea=factory((fe,K)=>{const{autosize:me,maxRows:ge,minRows:xe,__staticSelector:ye,resize:ve,..._e}=useProps("Textarea",defaultProps$w,fe),Ee=me&&getEnv()!=="test",be=Ee?{maxRows:ge,minRows:xe}:{};return jsxRuntimeExports.jsx(InputBase,{component:Ee?index$1:"textarea",ref:K,..._e,__staticSelector:ye||"Textarea",multiline:!0,"data-no-overflow":me&&ge===void 0||void 0,__vars:{"--input-resize":ve},...be})});Textarea.classes=InputBase.classes;Textarea.displayName="@mantine/core/Textarea";const[ListProvider,useListContext]=createSafeContext("List component was not found in tree");var __default__$b={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const defaultProps$v={},ListItem=factory((fe,K)=>{const me=useProps("ListItem",defaultProps$v,fe),{classNames:ge,className:xe,style:ye,styles:ve,vars:_e,icon:Ee,children:be,mod:Ae,...Se}=me,Ce=useListContext(),Te=Ee||Ce.icon,Re={classNames:ge,styles:ve};return jsxRuntimeExports.jsx(Box,{...Ce.getStyles("item",{...Re,className:xe,style:ye}),component:"li",mod:[{"with-icon":!!Te,centered:Ce.center},Ae],ref:K,...Se,children:jsxRuntimeExports.jsxs("div",{...Ce.getStyles("itemWrapper",Re),children:[Te&&jsxRuntimeExports.jsx("span",{...Ce.getStyles("itemIcon",Re),children:Te}),jsxRuntimeExports.jsx("span",{...Ce.getStyles("itemLabel",Re),children:be})]})})});ListItem.classes=__default__$b;ListItem.displayName="@mantine/core/ListItem";const defaultProps$u={type:"unordered"},varsResolver$e=(fe,{size:K,spacing:me})=>({root:{"--list-fz":getFontSize(K),"--list-lh":getLineHeight(K),"--list-spacing":getSpacing(me)}}),List=factory((fe,K)=>{const me=useProps("List",defaultProps$u,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,children:be,type:Ae,withPadding:Se,icon:Ce,spacing:Te,center:Re,listStyleType:De,mod:Ie,...Be}=me,Le=useStyles({name:"List",classes:__default__$b,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$e});return jsxRuntimeExports.jsx(ListProvider,{value:{center:Re,icon:Ce,getStyles:Le},children:jsxRuntimeExports.jsx(Box,{...Le("root",{style:{listStyleType:De}}),component:Ae==="unordered"?"ul":"ol",mod:[{"with-padding":Se},Ie],ref:K,...Be,children:be})})});List.classes=__default__$b;List.displayName="@mantine/core/List";List.Item=ListItem;const[ModalProvider,useModalContext]=createSafeContext("Modal component was not found in tree");var __default__$a={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const defaultProps$t={},ModalBody=factory((fe,K)=>{const me=useProps("ModalBody",defaultProps$t,fe),{classNames:ge,className:xe,style:ye,styles:ve,vars:_e,...Ee}=me,be=useModalContext();return jsxRuntimeExports.jsx(ModalBaseBody,{ref:K,...be.getStyles("body",{classNames:ge,style:ye,styles:ve,className:xe}),...Ee})});ModalBody.classes=__default__$a;ModalBody.displayName="@mantine/core/ModalBody";const defaultProps$s={},ModalCloseButton=factory((fe,K)=>{const me=useProps("ModalCloseButton",defaultProps$s,fe),{classNames:ge,className:xe,style:ye,styles:ve,vars:_e,...Ee}=me,be=useModalContext();return jsxRuntimeExports.jsx(ModalBaseCloseButton,{ref:K,...be.getStyles("close",{classNames:ge,style:ye,styles:ve,className:xe}),...Ee})});ModalCloseButton.classes=__default__$a;ModalCloseButton.displayName="@mantine/core/ModalCloseButton";const defaultProps$r={},ModalContent=factory((fe,K)=>{const me=useProps("ModalContent",defaultProps$r,fe),{classNames:ge,className:xe,style:ye,styles:ve,vars:_e,children:Ee,__hidden:be,...Ae}=me,Se=useModalContext(),Ce=Se.scrollAreaComponent||NativeScrollArea;return jsxRuntimeExports.jsx(ModalBaseContent,{...Se.getStyles("content",{className:xe,style:ye,styles:ve,classNames:ge}),innerProps:Se.getStyles("inner",{className:xe,style:ye,styles:ve,classNames:ge}),"data-full-screen":Se.fullScreen||void 0,"data-modal-content":!0,"data-hidden":be||void 0,ref:K,...Ae,children:jsxRuntimeExports.jsx(Ce,{style:{maxHeight:Se.fullScreen?"100dvh":`calc(100dvh - (${rem(Se.yOffset)} * 2))`},children:Ee})})});ModalContent.classes=__default__$a;ModalContent.displayName="@mantine/core/ModalContent";const defaultProps$q={},ModalHeader=factory((fe,K)=>{const me=useProps("ModalHeader",defaultProps$q,fe),{classNames:ge,className:xe,style:ye,styles:ve,vars:_e,...Ee}=me,be=useModalContext();return jsxRuntimeExports.jsx(ModalBaseHeader,{ref:K,...be.getStyles("header",{classNames:ge,style:ye,styles:ve,className:xe}),...Ee})});ModalHeader.classes=__default__$a;ModalHeader.displayName="@mantine/core/ModalHeader";const defaultProps$p={},ModalOverlay=factory((fe,K)=>{const me=useProps("ModalOverlay",defaultProps$p,fe),{classNames:ge,className:xe,style:ye,styles:ve,vars:_e,...Ee}=me,be=useModalContext();return jsxRuntimeExports.jsx(ModalBaseOverlay,{ref:K,...be.getStyles("overlay",{classNames:ge,style:ye,styles:ve,className:xe}),...Ee})});ModalOverlay.classes=__default__$a;ModalOverlay.displayName="@mantine/core/ModalOverlay";const defaultProps$o={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:getDefaultZIndex("modal"),transitionProps:{duration:200,transition:"fade-down"},yOffset:"5dvh"},varsResolver$d=(fe,{radius:K,size:me,yOffset:ge,xOffset:xe})=>({root:{"--modal-radius":K===void 0?void 0:getRadius(K),"--modal-size":getSize(me,"modal-size"),"--modal-y-offset":rem(ge),"--modal-x-offset":rem(xe)}}),ModalRoot=factory((fe,K)=>{const me=useProps("ModalRoot",defaultProps$o,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,yOffset:be,scrollAreaComponent:Ae,radius:Se,fullScreen:Ce,centered:Te,xOffset:Re,__staticSelector:De,...Ie}=me,Be=useStyles({name:De,classes:__default__$a,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$d});return jsxRuntimeExports.jsx(ModalProvider,{value:{yOffset:be,scrollAreaComponent:Ae,getStyles:Be,fullScreen:Ce},children:jsxRuntimeExports.jsx(ModalBase,{ref:K,...Be("root"),"data-full-screen":Ce||void 0,"data-centered":Te||void 0,unstyled:_e,...Ie})})});ModalRoot.classes=__default__$a;ModalRoot.displayName="@mantine/core/ModalRoot";const[ModalStackProvider,useModalStackContext]=createOptionalContext();function ModalStack({children:fe}){const[K,me]=reactExports.useState([]),[ge,xe]=reactExports.useState(getDefaultZIndex("modal"));return jsxRuntimeExports.jsx(ModalStackProvider,{value:{stack:K,addModal:(ye,ve)=>{me(_e=>[...new Set([..._e,ye])]),xe(_e=>typeof ve=="number"&&typeof _e=="number"?Math.max(_e,ve):_e)},removeModal:ye=>me(ve=>ve.filter(_e=>_e!==ye)),getZIndex:ye=>`calc(${ge} + ${K.indexOf(ye)} + 1)`,currentId:K[K.length-1],maxZIndex:ge},children:fe})}ModalStack.displayName="@mantine/core/ModalStack";const defaultProps$n={},ModalTitle=factory((fe,K)=>{const me=useProps("ModalTitle",defaultProps$n,fe),{classNames:ge,className:xe,style:ye,styles:ve,vars:_e,...Ee}=me,be=useModalContext();return jsxRuntimeExports.jsx(ModalBaseTitle,{ref:K,...be.getStyles("title",{classNames:ge,style:ye,styles:ve,className:xe}),...Ee})});ModalTitle.classes=__default__$a;ModalTitle.displayName="@mantine/core/ModalTitle";const defaultProps$m={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:getDefaultZIndex("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Modal=factory((fe,K)=>{const{title:me,withOverlay:ge,overlayProps:xe,withCloseButton:ye,closeButtonProps:ve,children:_e,radius:Ee,opened:be,stackId:Ae,zIndex:Se,...Ce}=useProps("Modal",defaultProps$m,fe),Te=useModalStackContext(),Re=!!me||ye,De=Te&&Ae?{closeOnEscape:Te.currentId===Ae,trapFocus:Te.currentId===Ae,zIndex:Te.getZIndex(Ae)}:{},Ie=ge===!1?!1:Ae&&Te?Te.currentId===Ae:be;return reactExports.useEffect(()=>{Te&&Ae&&(be?Te.addModal(Ae,Se||getDefaultZIndex("modal")):Te.removeModal(Ae))},[be,Ae,Se]),jsxRuntimeExports.jsxs(ModalRoot,{ref:K,radius:Ee,opened:be,zIndex:Te&&Ae?Te.getZIndex(Ae):Se,...Ce,...De,children:[ge&&jsxRuntimeExports.jsx(ModalOverlay,{visible:Ie,transitionProps:Te&&Ae?{duration:0}:void 0,...xe}),jsxRuntimeExports.jsxs(ModalContent,{radius:Ee,__hidden:Te&&Ae&&be?Ae!==Te.currentId:!1,children:[Re&&jsxRuntimeExports.jsxs(ModalHeader,{children:[me&&jsxRuntimeExports.jsx(ModalTitle,{children:me}),ye&&jsxRuntimeExports.jsx(ModalCloseButton,{...ve})]}),jsxRuntimeExports.jsx(ModalBody,{children:_e})]})]})});Modal.classes=__default__$a;Modal.displayName="@mantine/core/Modal";Modal.Root=ModalRoot;Modal.Overlay=ModalOverlay;Modal.Content=ModalContent;Modal.Body=ModalBody;Modal.Header=ModalHeader;Modal.Title=ModalTitle;Modal.CloseButton=ModalCloseButton;Modal.Stack=ModalStack;var __default__$9={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const defaultProps$l={withCloseButton:!0},varsResolver$c=(fe,{radius:K,color:me})=>({root:{"--notification-radius":K===void 0?void 0:getRadius(K),"--notification-color":me?getThemeColor(me,fe):void 0}}),Notification=factory((fe,K)=>{const me=useProps("Notification",defaultProps$l,fe),{className:ge,color:xe,radius:ye,loading:ve,withCloseButton:_e,withBorder:Ee,title:be,icon:Ae,children:Se,onClose:Ce,closeButtonProps:Te,classNames:Re,style:De,styles:Ie,unstyled:Be,variant:Le,vars:Oe,mod:Fe,loaderProps:Ue,...Ne}=me,He=useStyles({name:"Notification",classes:__default__$9,props:me,className:ge,style:De,classNames:Re,styles:Ie,unstyled:Be,vars:Oe,varsResolver:varsResolver$c});return jsxRuntimeExports.jsxs(Box,{...He("root"),mod:[{"data-with-icon":!!Ae||ve,"data-with-border":Ee},Fe],ref:K,variant:Le,...Ne,role:"alert",children:[Ae&&!ve&&jsxRuntimeExports.jsx("div",{...He("icon"),children:Ae}),ve&&jsxRuntimeExports.jsx(Loader$1,{size:28,color:xe,...Ue,...He("loader")}),jsxRuntimeExports.jsxs("div",{...He("body"),children:[be&&jsxRuntimeExports.jsx("div",{...He("title"),children:be}),jsxRuntimeExports.jsx(Box,{...He("description"),mod:{"data-with-title":!!be},children:Se})]}),_e&&jsxRuntimeExports.jsx(CloseButton,{iconSize:16,color:"gray",...Te,unstyled:Be,onClick:Ce,...He("closeButton")})]})});Notification.classes=__default__$9;Notification.displayName="@mantine/core/Notification";function __rest(fe,K){var me={};for(var ge in fe)Object.prototype.hasOwnProperty.call(fe,ge)&&K.indexOf(ge)<0&&(me[ge]=fe[ge]);if(fe!=null&&typeof Object.getOwnPropertySymbols=="function")for(var xe=0,ge=Object.getOwnPropertySymbols(fe);xe<ge.length;xe++)K.indexOf(ge[xe])<0&&Object.prototype.propertyIsEnumerable.call(fe,ge[xe])&&(me[ge[xe]]=fe[ge[xe]]);return me}var SourceType;(function(fe){fe.event="event",fe.props="prop"})(SourceType||(SourceType={}));function noop(){}function memoizeOnce(fe){var K,me=void 0;return function(){for(var ge=[],xe=arguments.length;xe--;)ge[xe]=arguments[xe];return K&&ge.length===K.length&&ge.every(function(ye,ve){return ye===K[ve]})||(K=ge,me=fe.apply(void 0,ge)),me}}function charIsNumber(fe){return!!(fe||"").match(/\d/)}function isNil(fe){return fe==null}function isNanValue(fe){return typeof fe=="number"&&isNaN(fe)}function isNotValidValue(fe){return isNil(fe)||isNanValue(fe)||typeof fe=="number"&&!isFinite(fe)}function escapeRegExp(fe){return fe.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function getThousandsGroupRegex(fe){switch(fe){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function applyThousandSeparator(fe,K,me){var ge=getThousandsGroupRegex(me),xe=fe.search(/[1-9]/);return xe=xe===-1?fe.length:xe,fe.substring(0,xe)+fe.substring(xe,fe.length).replace(ge,"$1"+K)}function usePersistentCallback(fe){var K=reactExports.useRef(fe);K.current=fe;var me=reactExports.useRef(function(){for(var ge=[],xe=arguments.length;xe--;)ge[xe]=arguments[xe];return K.current.apply(K,ge)});return me.current}function splitDecimal(fe,K){K===void 0&&(K=!0);var me=fe[0]==="-",ge=me&&K;fe=fe.replace("-","");var xe=fe.split("."),ye=xe[0],ve=xe[1]||"";return{beforeDecimal:ye,afterDecimal:ve,hasNegation:me,addNegation:ge}}function fixLeadingZero(fe){if(!fe)return fe;var K=fe[0]==="-";K&&(fe=fe.substring(1,fe.length));var me=fe.split("."),ge=me[0].replace(/^0+/,"")||"0",xe=me[1]||"";return(K?"-":"")+ge+(xe?"."+xe:"")}function limitToScale(fe,K,me){for(var ge="",xe=me?"0":"",ye=0;ye<=K-1;ye++)ge+=fe[ye]||xe;return ge}function repeat$1(fe,K){return Array(K+1).join(fe)}function toNumericString(fe){var K=fe+"",me=K[0]==="-"?"-":"";me&&(K=K.substring(1));var ge=K.split(/[eE]/g),xe=ge[0],ye=ge[1];if(ye=Number(ye),!ye)return me+xe;xe=xe.replace(".","");var ve=1+ye,_e=xe.length;return ve<0?xe="0."+repeat$1("0",Math.abs(ve))+xe:ve>=_e?xe=xe+repeat$1("0",ve-_e):xe=(xe.substring(0,ve)||"0")+"."+xe.substring(ve),me+xe}function roundToPrecision(fe,K,me){if(["","-"].indexOf(fe)!==-1)return fe;var ge=(fe.indexOf(".")!==-1||me)&&K,xe=splitDecimal(fe),ye=xe.beforeDecimal,ve=xe.afterDecimal,_e=xe.hasNegation,Ee=parseFloat("0."+(ve||"0")),be=ve.length<=K?"0."+ve:Ee.toFixed(K),Ae=be.split("."),Se=ye;ye&&Number(Ae[0])&&(Se=ye.split("").reverse().reduce(function(De,Ie,Be){return De.length>Be?(Number(De[0])+Number(Ie)).toString()+De.substring(1,De.length):Ie+De},Ae[0]));var Ce=limitToScale(Ae[1]||"",K,me),Te=_e?"-":"",Re=ge?".":"";return""+Te+Se+Re+Ce}function setCaretPosition(fe,K){if(fe.value=fe.value,fe!==null){if(fe.createTextRange){var me=fe.createTextRange();return me.move("character",K),me.select(),!0}return fe.selectionStart||fe.selectionStart===0?(fe.focus(),fe.setSelectionRange(K,K),!0):(fe.focus(),!1)}}var findChangeRange=memoizeOnce(function(fe,K){for(var me=0,ge=0,xe=fe.length,ye=K.length;fe[me]===K[me]&&me<xe;)me++;for(;fe[xe-1-ge]===K[ye-1-ge]&&ye-ge>me&&xe-ge>me;)ge++;return{from:{start:me,end:xe-ge},to:{start:me,end:ye-ge}}}),findChangedRangeFromCaretPositions=function(fe,K){var me=Math.min(fe.selectionStart,K);return{from:{start:me,end:fe.selectionEnd},to:{start:me,end:K}}};function clamp$2(fe,K,me){return Math.min(Math.max(fe,K),me)}function geInputCaretPosition(fe){return Math.max(fe.selectionStart,fe.selectionEnd)}function addInputMode(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function getDefaultChangeMeta(fe){return{from:{start:0,end:0},to:{start:0,end:fe.length},lastValue:""}}function defaultIsCharacterSame(fe){var K=fe.currentValue,me=fe.formattedValue,ge=fe.currentValueIndex,xe=fe.formattedValueIndex;return K[ge]===me[xe]}function getCaretPosition(fe,K,me,ge,xe,ye,ve){ve===void 0&&(ve=defaultIsCharacterSame);var _e=xe.findIndex(function(Fe){return Fe}),Ee=fe.slice(0,_e);!K&&!me.startsWith(Ee)&&(K=Ee,me=Ee+me,ge=ge+Ee.length);for(var be=me.length,Ae=fe.length,Se={},Ce=new Array(be),Te=0;Te<be;Te++){Ce[Te]=-1;for(var Re=0,De=Ae;Re<De;Re++){var Ie=ve({currentValue:me,lastValue:K,formattedValue:fe,currentValueIndex:Te,formattedValueIndex:Re});if(Ie&&Se[Re]!==!0){Ce[Te]=Re,Se[Re]=!0;break}}}for(var Be=ge;Be<be&&(Ce[Be]===-1||!ye(me[Be]));)Be++;var Le=Be===be||Ce[Be]===-1?Ae:Ce[Be];for(Be=ge-1;Be>0&&Ce[Be]===-1;)Be--;var Oe=Be===-1||Ce[Be]===-1?0:Ce[Be]+1;return Oe>Le?Le:ge-Oe<Le-ge?Oe:Le}function getCaretPosInBoundary(fe,K,me,ge){var xe=fe.length;if(K=clamp$2(K,0,xe),ge==="left"){for(;K>=0&&!me[K];)K--;K===-1&&(K=me.indexOf(!0))}else{for(;K<=xe&&!me[K];)K++;K>xe&&(K=me.lastIndexOf(!0))}return K===-1&&(K=xe),K}function caretUnknownFormatBoundary(fe){for(var K=Array.from({length:fe.length+1}).map(function(){return!0}),me=0,ge=K.length;me<ge;me++)K[me]=!!(charIsNumber(fe[me])||charIsNumber(fe[me-1]));return K}function useInternalValues(fe,K,me,ge,xe,ye){ye===void 0&&(ye=noop);var ve=usePersistentCallback(function(Re,De){var Ie,Be;return isNotValidValue(Re)?(Be="",Ie=""):typeof Re=="number"||De?(Be=typeof Re=="number"?toNumericString(Re):Re,Ie=ge(Be)):(Be=xe(Re,void 0),Ie=ge(Be)),{formattedValue:Ie,numAsString:Be}}),_e=reactExports.useState(function(){return ve(isNil(fe)?K:fe,me)}),Ee=_e[0],be=_e[1],Ae=function(Re,De){Re.formattedValue!==Ee.formattedValue&&be({formattedValue:Re.formattedValue,numAsString:Re.value}),ye(Re,De)},Se=fe,Ce=me;isNil(fe)&&(Se=Ee.numAsString,Ce=!0);var Te=ve(Se,Ce);return reactExports.useMemo(function(){be(Te)},[Te.formattedValue]),[Ee,Ae]}function defaultRemoveFormatting(fe){return fe.replace(/[^0-9]/g,"")}function defaultFormat(fe){return fe}function NumberFormatBase(fe){var K=fe.type;K===void 0&&(K="text");var me=fe.displayType;me===void 0&&(me="input");var ge=fe.customInput,xe=fe.renderText,ye=fe.getInputRef,ve=fe.format;ve===void 0&&(ve=defaultFormat);var _e=fe.removeFormatting;_e===void 0&&(_e=defaultRemoveFormatting);var Ee=fe.defaultValue,be=fe.valueIsNumericString,Ae=fe.onValueChange,Se=fe.isAllowed,Ce=fe.onChange;Ce===void 0&&(Ce=noop);var Te=fe.onKeyDown;Te===void 0&&(Te=noop);var Re=fe.onMouseUp;Re===void 0&&(Re=noop);var De=fe.onFocus;De===void 0&&(De=noop);var Ie=fe.onBlur;Ie===void 0&&(Ie=noop);var Be=fe.value,Le=fe.getCaretBoundary;Le===void 0&&(Le=caretUnknownFormatBoundary);var Oe=fe.isValidInputCharacter;Oe===void 0&&(Oe=charIsNumber);var Fe=fe.isCharacterSame,Ue=__rest(fe,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),Ne=useInternalValues(Be,Ee,!!be,ve,_e,Ae),He=Ne[0],ze=He.formattedValue,je=He.numAsString,Ge=Ne[1],Xe=reactExports.useRef(),qe=reactExports.useRef({formattedValue:ze,numAsString:je}),Qe=function(mn,dn){qe.current={formattedValue:mn.formattedValue,numAsString:mn.value},Ge(mn,dn)},nt=reactExports.useState(!1),Nt=nt[0],Ye=nt[1],at=reactExports.useRef(null),rt=reactExports.useRef({setCaretTimeout:null,focusTimeout:null});reactExports.useEffect(function(){return Ye(!0),function(){clearTimeout(rt.current.setCaretTimeout),clearTimeout(rt.current.focusTimeout)}},[]);var Ft=ve,Je=function(mn,dn){var Hn=parseFloat(dn);return{formattedValue:mn,value:dn,floatValue:isNaN(Hn)?void 0:Hn}},Wt=function(mn,dn,Hn){mn.selectionStart===0&&mn.selectionEnd===mn.value.length||(setCaretPosition(mn,dn),rt.current.setCaretTimeout=setTimeout(function(){mn.value===Hn&&mn.selectionStart!==dn&&setCaretPosition(mn,dn)},0))},Kt=function(mn,dn,Hn){return getCaretPosInBoundary(mn,dn,Le(mn),Hn)},Pt=function(mn,dn,Hn){var Bn=Le(dn),kt=getCaretPosition(dn,ze,mn,Hn,Bn,Oe,Fe);return kt=getCaretPosInBoundary(dn,kt,Bn),kt},Yt=function(mn){var dn=mn.formattedValue;dn===void 0&&(dn="");var Hn=mn.input,Bn=mn.source,kt=mn.event,Dt=mn.numAsString,ln;if(Hn){var nn=mn.inputValue||Hn.value,gn=geInputCaretPosition(Hn);Hn.value=dn,ln=Pt(nn,dn,gn),ln!==void 0&&Wt(Hn,ln,dn)}dn!==ze&&Qe(Je(dn,Dt),{event:kt,source:Bn})};reactExports.useEffect(function(){var mn=qe.current,dn=mn.formattedValue,Hn=mn.numAsString;(ze!==dn||je!==Hn)&&Qe(Je(ze,je),{event:void 0,source:SourceType.props})},[ze,je]);var Gt=at.current?geInputCaretPosition(at.current):void 0,an=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;an(function(){var mn=at.current;if(ze!==qe.current.formattedValue&&mn){var dn=Pt(qe.current.formattedValue,ze,Gt);mn.value=ze,Wt(mn,dn,ze)}},[ze]);var pn=function(mn,dn,Hn){var Bn=dn.target,kt=Xe.current?findChangedRangeFromCaretPositions(Xe.current,Bn.selectionEnd):findChangeRange(ze,mn),Dt=Object.assign(Object.assign({},kt),{lastValue:ze}),ln=_e(mn,Dt),nn=Ft(ln);if(ln=_e(nn,void 0),Se&&!Se(Je(nn,ln))){var gn=dn.target,Xt=geInputCaretPosition(gn),on=Pt(mn,ze,Xt);return gn.value=ze,Wt(gn,on,ze),!1}return Yt({formattedValue:nn,numAsString:ln,inputValue:mn,event:dn,source:Hn,input:dn.target}),!0},En=function(mn,dn){dn===void 0&&(dn=0);var Hn=mn.selectionStart,Bn=mn.selectionEnd;Xe.current={selectionStart:Hn,selectionEnd:Bn+dn}},$n=function(mn){var dn=mn.target,Hn=dn.value,Bn=pn(Hn,mn,SourceType.event);Bn&&Ce(mn),Xe.current=void 0},Un=function(mn){var dn=mn.target,Hn=mn.key,Bn=dn.selectionStart,kt=dn.selectionEnd,Dt=dn.value;Dt===void 0&&(Dt="");var ln;Hn==="ArrowLeft"||Hn==="Backspace"?ln=Math.max(Bn-1,0):Hn==="ArrowRight"?ln=Math.min(Bn+1,Dt.length):Hn==="Delete"&&(ln=Bn);var nn=0;Hn==="Delete"&&Bn===kt&&(nn=1);var gn=Hn==="ArrowLeft"||Hn==="ArrowRight";if(ln===void 0||Bn!==kt&&!gn){Te(mn),En(dn,nn);return}var Xt=ln;if(gn){var on=Hn==="ArrowLeft"?"left":"right";Xt=Kt(Dt,ln,on),Xt!==ln&&mn.preventDefault()}else Hn==="Delete"&&!Oe(Dt[ln])?Xt=Kt(Dt,ln,"right"):Hn==="Backspace"&&!Oe(Dt[ln])&&(Xt=Kt(Dt,ln,"left"));Xt!==ln&&Wt(dn,Xt,Dt),Te(mn),En(dn,nn)},kn=function(mn){var dn=mn.target,Hn=function(){var Bn=dn.selectionStart,kt=dn.selectionEnd,Dt=dn.value;if(Dt===void 0&&(Dt=""),Bn===kt){var ln=Kt(Dt,Bn);ln!==Bn&&Wt(dn,ln,Dt)}};Hn(),requestAnimationFrame(function(){Hn()}),Re(mn),En(dn)},bn=function(mn){mn.persist&&mn.persist();var dn=mn.target,Hn=mn.currentTarget;at.current=dn,rt.current.focusTimeout=setTimeout(function(){var Bn=dn.selectionStart,kt=dn.selectionEnd,Dt=dn.value;Dt===void 0&&(Dt="");var ln=Kt(Dt,Bn);ln!==Bn&&!(Bn===0&&kt===Dt.length)&&Wt(dn,ln,Dt),De(Object.assign(Object.assign({},mn),{currentTarget:Hn}))},0)},Mn=function(mn){at.current=null,clearTimeout(rt.current.focusTimeout),clearTimeout(rt.current.setCaretTimeout),Ie(mn)},zt=Nt&&addInputMode()?"numeric":void 0,Dn=Object.assign({inputMode:zt},Ue,{type:K,value:ze,onChange:$n,onKeyDown:Un,onMouseUp:kn,onFocus:bn,onBlur:Mn});if(me==="text")return xe?React$4.createElement(React$4.Fragment,null,xe(ze,Ue)||null):React$4.createElement("span",Object.assign({},Ue,{ref:ye}),ze);if(ge){var hn=ge;return React$4.createElement(hn,Object.assign({},Dn,{ref:ye}))}return React$4.createElement("input",Object.assign({},Dn,{ref:ye}))}function format(fe,K){var me=K.decimalScale,ge=K.fixedDecimalScale,xe=K.prefix;xe===void 0&&(xe="");var ye=K.suffix;ye===void 0&&(ye="");var ve=K.allowNegative,_e=K.thousandsGroupStyle;if(_e===void 0&&(_e="thousand"),fe===""||fe==="-")return fe;var Ee=getSeparators(K),be=Ee.thousandSeparator,Ae=Ee.decimalSeparator,Se=me!==0&&fe.indexOf(".")!==-1||me&&ge,Ce=splitDecimal(fe,ve),Te=Ce.beforeDecimal,Re=Ce.afterDecimal,De=Ce.addNegation;return me!==void 0&&(Re=limitToScale(Re,me,!!ge)),be&&(Te=applyThousandSeparator(Te,be,_e)),xe&&(Te=xe+Te),ye&&(Re=Re+ye),De&&(Te="-"+Te),fe=Te+(Se&&Ae||"")+Re,fe}function getSeparators(fe){var K=fe.decimalSeparator;K===void 0&&(K=".");var me=fe.thousandSeparator,ge=fe.allowedDecimalSeparators;return me===!0&&(me=","),ge||(ge=[K,"."]),{decimalSeparator:K,thousandSeparator:me,allowedDecimalSeparators:ge}}function handleNegation(fe,K){fe===void 0&&(fe="");var me=new RegExp("(-)"),ge=new RegExp("(-)(.)*(-)"),xe=me.test(fe),ye=ge.test(fe);return fe=fe.replace(/-/g,""),xe&&!ye&&K&&(fe="-"+fe),fe}function getNumberRegex(fe,K){return new RegExp("(^-)|[0-9]|"+escapeRegExp(fe),"g")}function isNumericString(fe,K,me){return fe===""?!0:!K?.match(/\d/)&&!me?.match(/\d/)&&typeof fe=="string"&&!isNaN(Number(fe))}function removeFormatting(fe,K,me){var ge;K===void 0&&(K=getDefaultChangeMeta(fe));var xe=me.allowNegative,ye=me.prefix;ye===void 0&&(ye="");var ve=me.suffix;ve===void 0&&(ve="");var _e=me.decimalScale,Ee=K.from,be=K.to,Ae=be.start,Se=be.end,Ce=getSeparators(me),Te=Ce.allowedDecimalSeparators,Re=Ce.decimalSeparator,De=fe[Se]===Re;if(charIsNumber(fe)&&(fe===ye||fe===ve)&&K.lastValue==="")return fe;if(Se-Ae===1&&Te.indexOf(fe[Ae])!==-1){var Ie=_e===0?"":Re;fe=fe.substring(0,Ae)+Ie+fe.substring(Ae+1,fe.length)}var Be=function(at,rt,Ft){var Je=!1,Wt=!1;ye.startsWith("-")?Je=!1:at.startsWith("--")?(Je=!1,Wt=!0):ve.startsWith("-")&&at.length===ve.length?Je=!1:at[0]==="-"&&(Je=!0);var Kt=Je?1:0;return Wt&&(Kt=2),Kt&&(at=at.substring(Kt),rt-=Kt,Ft-=Kt),{value:at,start:rt,end:Ft,hasNegation:Je}},Le=Be(fe,Ae,Se),Oe=Le.hasNegation;ge=Le,fe=ge.value,Ae=ge.start,Se=ge.end;var Fe=Be(K.lastValue,Ee.start,Ee.end),Ue=Fe.start,Ne=Fe.end,He=Fe.value,ze=fe.substring(Ae,Se);fe.length&&He.length&&(Ue>He.length-ve.length||Ne<ye.length)&&!(ze&&ve.startsWith(ze))&&(fe=He);var je=0;fe.startsWith(ye)?je+=ye.length:Ae<ye.length&&(je=Ae),fe=fe.substring(je),Se-=je;var Ge=fe.length,Xe=fe.length-ve.length;fe.endsWith(ve)?Ge=Xe:(Se>Xe||Se>fe.length-ve.length)&&(Ge=Se),fe=fe.substring(0,Ge),fe=handleNegation(Oe?"-"+fe:fe,xe),fe=(fe.match(getNumberRegex(Re))||[]).join("");var qe=fe.indexOf(Re);fe=fe.replace(new RegExp(escapeRegExp(Re),"g"),function(at,rt){return rt===qe?".":""});var Qe=splitDecimal(fe,xe),nt=Qe.beforeDecimal,Nt=Qe.afterDecimal,Ye=Qe.addNegation;return be.end-be.start<Ee.end-Ee.start&&nt===""&&De&&!parseFloat(Nt)&&(fe=Ye?"-":""),fe}function getCaretBoundary(fe,K){var me=K.prefix;me===void 0&&(me="");var ge=K.suffix;ge===void 0&&(ge="");var xe=Array.from({length:fe.length+1}).map(function(){return!0}),ye=fe[0]==="-";xe.fill(!1,0,me.length+(ye?1:0));var ve=fe.length;return xe.fill(!1,ve-ge.length+1,ve+1),xe}function validateAndUpdateProps(fe){var K=getSeparators(fe),me=K.thousandSeparator,ge=K.decimalSeparator,xe=fe.prefix;xe===void 0&&(xe="");var ye=fe.allowNegative;if(ye===void 0&&(ye=!0),me===ge)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+me+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+ge+` (default value for decimalSeparator is .)
     `);return xe.startsWith("-")&&ye&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+xe+`
      allowNegative: `+ye+`
    `),ye=!1),Object.assign(Object.assign({},fe),{allowNegative:ye})}function useNumericFormat(fe){fe=validateAndUpdateProps(fe),fe.decimalSeparator,fe.allowedDecimalSeparators,fe.thousandsGroupStyle;var K=fe.suffix,me=fe.allowNegative,ge=fe.allowLeadingZeros,xe=fe.onKeyDown;xe===void 0&&(xe=noop);var ye=fe.onBlur;ye===void 0&&(ye=noop);var ve=fe.thousandSeparator,_e=fe.decimalScale,Ee=fe.fixedDecimalScale,be=fe.prefix;be===void 0&&(be="");var Ae=fe.defaultValue,Se=fe.value,Ce=fe.valueIsNumericString,Te=fe.onValueChange,Re=__rest(fe,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),De=getSeparators(fe),Ie=De.decimalSeparator,Be=De.allowedDecimalSeparators,Le=function(Ye){return format(Ye,fe)},Oe=function(Ye,at){return removeFormatting(Ye,at,fe)},Fe=isNil(Se)?Ae:Se,Ue=Ce??isNumericString(Fe,be,K);isNil(Se)?isNil(Ae)||(Ue=Ue||typeof Ae=="number"):Ue=Ue||typeof Se=="number";var Ne=function(Ye){return isNotValidValue(Ye)?Ye:(typeof Ye=="number"&&(Ye=toNumericString(Ye)),Ue&&typeof _e=="number"?roundToPrecision(Ye,_e,!!Ee):Ye)},He=useInternalValues(Ne(Se),Ne(Ae),!!Ue,Le,Oe,Te),ze=He[0],je=ze.numAsString,Ge=ze.formattedValue,Xe=He[1],qe=function(Ye){var at=Ye.target,rt=Ye.key,Ft=at.selectionStart,Je=at.selectionEnd,Wt=at.value;if(Wt===void 0&&(Wt=""),(rt==="Backspace"||rt==="Delete")&&Je<be.length){Ye.preventDefault();return}if(Ft!==Je){xe(Ye);return}rt==="Backspace"&&Wt[0]==="-"&&Ft===be.length+1&&me&&setCaretPosition(at,1),_e&&Ee&&(rt==="Backspace"&&Wt[Ft-1]===Ie?(setCaretPosition(at,Ft-1),Ye.preventDefault()):rt==="Delete"&&Wt[Ft]===Ie&&Ye.preventDefault()),Be?.includes(rt)&&Wt[Ft]===Ie&&setCaretPosition(at,Ft+1);var Kt=ve===!0?",":ve;rt==="Backspace"&&Wt[Ft-1]===Kt&&setCaretPosition(at,Ft-1),rt==="Delete"&&Wt[Ft]===Kt&&setCaretPosition(at,Ft+1),xe(Ye)},Qe=function(Ye){var at=je;if(at.match(/\d/g)||(at=""),ge||(at=fixLeadingZero(at)),Ee&&_e&&(at=roundToPrecision(at,_e,Ee)),at!==je){var rt=format(at,fe);Xe({formattedValue:rt,value:at,floatValue:parseFloat(at)},{event:Ye,source:SourceType.event})}ye(Ye)},nt=function(Ye){return Ye===Ie?!0:charIsNumber(Ye)},Nt=function(Ye){var at=Ye.currentValue,rt=Ye.lastValue,Ft=Ye.formattedValue,Je=Ye.currentValueIndex,Wt=Ye.formattedValueIndex,Kt=at[Je],Pt=Ft[Wt],Yt=findChangeRange(rt,at),Gt=Yt.to,an=function(pn){return Oe(pn).indexOf(".")+be.length};return Se===0&&Ee&&_e&&at[Gt.start]===Ie&&an(at)<Je&&an(Ft)>Wt?!1:Je>=Gt.start&&Je<Gt.end&&Be&&Be.includes(Kt)&&Pt===Ie?!0:Kt===Pt};return Object.assign(Object.assign({},Re),{value:Ge,valueIsNumericString:!1,isValidInputCharacter:nt,isCharacterSame:Nt,onValueChange:Xe,format:Le,removeFormatting:Oe,getCaretBoundary:function(Ye){return getCaretBoundary(Ye,fe)},onKeyDown:qe,onBlur:Qe})}function NumericFormat(fe){var K=useNumericFormat(fe);return React$4.createElement(NumberFormatBase,Object.assign({},K))}function NumberInputChevron({direction:fe,style:K,...me}){return jsxRuntimeExports.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:fe==="up"?"rotate(180deg)":void 0,...K},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...me,children:jsxRuntimeExports.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var __default__$8={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const leadingDecimalZeroPattern=/^(0\.0*|-0(\.0*)?)$/,leadingZerosPattern=/^-?0\d+(\.\d+)?\.?$/;function isNumberString(fe){return typeof fe=="string"&&fe!==""&&!Number.isNaN(Number(fe))}function canIncrement(fe){return typeof fe=="number"?fe<Number.MAX_SAFE_INTEGER:fe===""||isNumberString(fe)&&Number(fe)<Number.MAX_SAFE_INTEGER}function getDecimalPlaces(fe){return fe.toString().replace(".","").length}function isValidNumber(fe,K){return(typeof fe=="number"?fe<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(fe)))&&!Number.isNaN(fe)&&getDecimalPlaces(K)<14&&K!==""}function isInRange(fe,K,me){if(fe===void 0)return!0;const ge=K===void 0||fe>=K,xe=me===void 0||fe<=me;return ge&&xe}const defaultProps$k={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},varsResolver$b=(fe,{size:K})=>({controls:{"--ni-chevron-size":getSize(K,"ni-chevron-size")}}),NumberInput=factory((fe,K)=>{const me=useProps("NumberInput",defaultProps$k,fe),{className:ge,classNames:xe,styles:ye,unstyled:ve,vars:_e,onChange:Ee,onValueChange:be,value:Ae,defaultValue:Se,max:Ce,min:Te,step:Re,hideControls:De,rightSection:Ie,isAllowed:Be,clampBehavior:Le,onBlur:Oe,allowDecimal:Fe,decimalScale:Ue,onKeyDown:Ne,onKeyDownCapture:He,handlersRef:ze,startValue:je,disabled:Ge,rightSectionPointerEvents:Xe,allowNegative:qe,readOnly:Qe,size:nt,rightSectionWidth:Nt,stepHoldInterval:Ye,stepHoldDelay:at,allowLeadingZeros:rt,withKeyboardEvents:Ft,trimLeadingZeroesOnBlur:Je,...Wt}=me,Kt=useStyles({name:"NumberInput",classes:__default__$8,props:me,classNames:xe,styles:ye,unstyled:ve,vars:_e,varsResolver:varsResolver$b}),{resolvedClassNames:Pt,resolvedStyles:Yt}=useResolvedStylesApi({classNames:xe,styles:ye,props:me}),[Gt,an]=useUncontrolled({value:Ae,defaultValue:Se,finalValue:"",onChange:Ee}),pn=at!==void 0&&Ye!==void 0,En=reactExports.useRef(null),$n=reactExports.useRef(null),Un=reactExports.useRef(0),kn=(nn,gn)=>{gn.source==="event"&&an(isValidNumber(nn.floatValue,nn.value)&&!leadingDecimalZeroPattern.test(nn.value)&&!(rt&&leadingZerosPattern.test(nn.value))?nn.floatValue:nn.value),be?.(nn,gn)},bn=nn=>{const gn=String(nn).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return gn?Math.max(0,(gn[1]?gn[1].length:0)-(gn[2]?+gn[2]:0)):0},Mn=nn=>{En.current&&typeof nn<"u"&&En.current.setSelectionRange(nn,nn)},zt=reactExports.useRef(noop$2);zt.current=()=>{if(!canIncrement(Gt))return;let nn;const gn=bn(Gt),Xt=bn(Re),on=Math.max(gn,Xt),Rt=10**on;if(!isNumberString(Gt)&&(typeof Gt!="number"||Number.isNaN(Gt)))nn=clamp$5(je,Te,Ce);else if(Ce!==void 0){const sr=(Math.round(Number(Gt)*Rt)+Math.round(Re*Rt))/Rt;nn=sr<=Ce?sr:Ce}else nn=(Math.round(Number(Gt)*Rt)+Math.round(Re*Rt))/Rt;const An=nn.toFixed(on);an(parseFloat(An)),be?.({floatValue:parseFloat(An),formattedValue:An,value:An},{source:"increment"}),setTimeout(()=>Mn(En.current?.value.length),0)};const Dn=reactExports.useRef(noop$2);Dn.current=()=>{if(!canIncrement(Gt))return;let nn;const gn=Te!==void 0?Te:qe?Number.MIN_SAFE_INTEGER:0,Xt=bn(Gt),on=bn(Re),Rt=Math.max(Xt,on),An=10**Rt;if(!isNumberString(Gt)&&typeof Gt!="number"||Number.isNaN(Gt))nn=clamp$5(je,gn,Ce);else{const zn=(Math.round(Number(Gt)*An)-Math.round(Re*An))/An;nn=gn!==void 0&&zn<gn?gn:zn}const sr=nn.toFixed(Rt);an(parseFloat(sr)),be?.({floatValue:parseFloat(sr),formattedValue:sr,value:sr},{source:"decrement"}),setTimeout(()=>Mn(En.current?.value.length),0)};const hn=nn=>{Ne?.(nn),!(Qe||!Ft)&&(nn.key==="ArrowUp"&&(nn.preventDefault(),zt.current()),nn.key==="ArrowDown"&&(nn.preventDefault(),Dn.current()))},mn=nn=>{if(He?.(nn),nn.key==="Backspace"){const gn=En.current;gn.selectionStart===0&&gn.selectionStart===gn.selectionEnd&&(nn.preventDefault(),window.setTimeout(()=>Mn(0),0))}},dn=nn=>{let gn=Gt;if(Le==="blur"&&typeof gn=="number"&&(gn=clamp$5(gn,Te,Ce)),Je&&typeof gn=="string"&&bn(gn)<15){const Xt=gn.toString().replace(/^0+/,""),on=parseFloat(Xt);gn=Number.isNaN(on)||on>Number.MAX_SAFE_INTEGER?Xt:clamp$5(on,Te,Ce)}Gt!==gn&&an(gn),Oe?.(nn)};assignRef$1(ze,{increment:zt.current,decrement:Dn.current});const Hn=nn=>{nn?zt.current():Dn.current(),Un.current+=1},Bn=nn=>{if(Hn(nn),pn){const gn=typeof Ye=="number"?Ye:Ye(Un.current);$n.current=window.setTimeout(()=>Bn(nn),gn)}},kt=(nn,gn)=>{nn.preventDefault(),En.current?.focus(),Hn(gn),pn&&($n.current=window.setTimeout(()=>Bn(gn),at))},Dt=()=>{$n.current&&window.clearTimeout($n.current),$n.current=null,Un.current=0},ln=jsxRuntimeExports.jsxs("div",{...Kt("controls"),children:[jsxRuntimeExports.jsx(UnstyledButton,{...Kt("control"),tabIndex:-1,"aria-hidden":!0,disabled:Ge||typeof Gt=="number"&&Ce!==void 0&&Gt>=Ce,mod:{direction:"up"},onMouseDown:nn=>nn.preventDefault(),onPointerDown:nn=>{kt(nn,!0)},onPointerUp:Dt,onPointerLeave:Dt,children:jsxRuntimeExports.jsx(NumberInputChevron,{direction:"up"})}),jsxRuntimeExports.jsx(UnstyledButton,{...Kt("control"),tabIndex:-1,"aria-hidden":!0,disabled:Ge||typeof Gt=="number"&&Te!==void 0&&Gt<=Te,mod:{direction:"down"},onMouseDown:nn=>nn.preventDefault(),onPointerDown:nn=>{kt(nn,!1)},onPointerUp:Dt,onPointerLeave:Dt,children:jsxRuntimeExports.jsx(NumberInputChevron,{direction:"down"})})]});return jsxRuntimeExports.jsx(InputBase,{component:NumericFormat,allowNegative:qe,className:clsx(__default__$8.root,ge),size:nt,...Wt,readOnly:Qe,disabled:Ge,value:Gt,getInputRef:useMergedRef(K,En),onValueChange:kn,rightSection:De||Qe||!canIncrement(Gt)?Ie:Ie||ln,classNames:Pt,styles:Yt,unstyled:ve,__staticSelector:"NumberInput",decimalScale:Fe?Ue:0,onKeyDown:hn,onKeyDownCapture:mn,rightSectionPointerEvents:Xe??(Ge?"none":void 0),rightSectionWidth:Nt??`var(--ni-right-section-width-${nt||"sm"})`,allowLeadingZeros:rt,onBlur:dn,isAllowed:nn=>Le==="strict"?Be?Be(nn)&&isInRange(nn.floatValue,Te,Ce):isInRange(nn.floatValue,Te,Ce):Be?Be(nn):!0})});NumberInput.classes={...InputBase.classes,...__default__$8};NumberInput.displayName="@mantine/core/NumberInput";const[ProgressProvider,useProgressContext]=createSafeContext("Progress.Root component was not found in tree");var __default__$7={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const defaultProps$j={},ProgressLabel=factory((fe,K)=>{const{classNames:me,className:ge,style:xe,styles:ye,vars:ve,..._e}=useProps("ProgressLabel",defaultProps$j,fe),Ee=useProgressContext();return jsxRuntimeExports.jsx(Box,{ref:K,...Ee.getStyles("label",{className:ge,style:xe,classNames:me,styles:ye}),..._e})});ProgressLabel.classes=__default__$7;ProgressLabel.displayName="@mantine/core/ProgressLabel";const defaultProps$i={},varsResolver$a=(fe,{size:K,radius:me,transitionDuration:ge})=>({root:{"--progress-size":getSize(K,"progress-size"),"--progress-radius":me===void 0?void 0:getRadius(me),"--progress-transition-duration":typeof ge=="number"?`${ge}ms`:void 0}}),ProgressRoot=factory((fe,K)=>{const me=useProps("ProgressRoot",defaultProps$i,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,autoContrast:be,transitionDuration:Ae,...Se}=me,Ce=useStyles({name:"Progress",classes:__default__$7,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$a});return jsxRuntimeExports.jsx(ProgressProvider,{value:{getStyles:Ce,autoContrast:be},children:jsxRuntimeExports.jsx(Box,{ref:K,...Ce("root"),...Se})})});ProgressRoot.classes=__default__$7;ProgressRoot.displayName="@mantine/core/ProgressRoot";const defaultProps$h={withAria:!0},ProgressSection=factory((fe,K)=>{const{classNames:me,className:ge,style:xe,styles:ye,vars:ve,value:_e,withAria:Ee,color:be,striped:Ae,animated:Se,mod:Ce,...Te}=useProps("ProgressSection",defaultProps$h,fe),Re=useProgressContext(),De=useMantineTheme(),Ie=Ee?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":_e,"aria-valuetext":`${_e}%`}:{};return jsxRuntimeExports.jsx(Box,{ref:K,...Re.getStyles("section",{className:ge,classNames:me,styles:ye,style:xe}),...Te,...Ie,mod:[{striped:Ae||Se,animated:Se},Ce],__vars:{"--progress-section-width":`${_e}%`,"--progress-section-color":getThemeColor(be,De),"--progress-label-color":getAutoContrastValue(Re.autoContrast,De)?getContrastColor({color:be,theme:De,autoContrast:Re.autoContrast}):void 0}})});ProgressSection.classes=__default__$7;ProgressSection.displayName="@mantine/core/ProgressSection";const defaultProps$g={},Progress=factory((fe,K)=>{const me=useProps("Progress",defaultProps$g,fe),{value:ge,classNames:xe,styles:ye,vars:ve,color:_e,striped:Ee,animated:be,"aria-label":Ae,...Se}=me,{resolvedClassNames:Ce,resolvedStyles:Te}=useResolvedStylesApi({classNames:xe,styles:ye,props:me});return jsxRuntimeExports.jsx(ProgressRoot,{ref:K,classNames:Ce,styles:Te,vars:ve,...Se,children:jsxRuntimeExports.jsx(ProgressSection,{value:ge,color:_e,striped:Ee,animated:be,"aria-label":Ae})})});Progress.classes=__default__$7;Progress.displayName="@mantine/core/Progress";Progress.Section=ProgressSection;Progress.Root=ProgressRoot;Progress.Label=ProgressLabel;const defaultTransition={duration:100,transition:"fade"};function getTransitionProps(fe,K){return{...defaultTransition,...K,...fe}}function useFloatingTooltip({offset:fe,position:K,defaultOpened:me}){const[ge,xe]=reactExports.useState(me),ye=reactExports.useRef(null),{x:ve,y:_e,elements:Ee,refs:be,update:Ae,placement:Se}=useFloating({placement:K,middleware:[shift({crossAxis:!0,padding:5,rootBoundary:"document"})]}),Ce=Se.includes("right")?fe:K.includes("left")?fe*-1:0,Te=Se.includes("bottom")?fe:K.includes("top")?fe*-1:0,Re=reactExports.useCallback(({clientX:De,clientY:Ie})=>{be.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:De,y:Ie,left:De+Ce,top:Ie+Te,right:De,bottom:Ie}}})},[Ee.reference]);return reactExports.useEffect(()=>{if(be.floating.current){const De=ye.current;De.addEventListener("mousemove",Re);const Ie=getOverflowAncestors(be.floating.current);return Ie.forEach(Be=>{Be.addEventListener("scroll",Ae)}),()=>{De.removeEventListener("mousemove",Re),Ie.forEach(Be=>{Be.removeEventListener("scroll",Ae)})}}},[Ee.reference,be.floating.current,Ae,Re,ge]),{handleMouseMove:Re,x:ve,y:_e,opened:ge,setOpened:xe,boundaryRef:ye,floating:be.setFloating}}var __default__$6={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const defaultProps$f={refProp:"ref",withinPortal:!0,offset:10,defaultOpened:!1,position:"right",zIndex:getDefaultZIndex("popover")},varsResolver$9=(fe,{radius:K,color:me})=>({tooltip:{"--tooltip-radius":K===void 0?void 0:getRadius(K),"--tooltip-bg":me?getThemeColor(me,fe):void 0,"--tooltip-color":me?"var(--mantine-color-white)":void 0}}),TooltipFloating=factory((fe,K)=>{const me=useProps("TooltipFloating",defaultProps$f,fe),{children:ge,refProp:xe,withinPortal:ye,style:ve,className:_e,classNames:Ee,styles:be,unstyled:Ae,radius:Se,color:Ce,label:Te,offset:Re,position:De,multiline:Ie,zIndex:Be,disabled:Le,defaultOpened:Oe,variant:Fe,vars:Ue,portalProps:Ne,...He}=me,ze=useMantineTheme(),je=useStyles({name:"TooltipFloating",props:me,classes:__default__$6,className:_e,style:ve,classNames:Ee,styles:be,unstyled:Ae,rootSelector:"tooltip",vars:Ue,varsResolver:varsResolver$9}),{handleMouseMove:Ge,x:Xe,y:qe,opened:Qe,boundaryRef:nt,floating:Nt,setOpened:Ye}=useFloatingTooltip({offset:Re,position:De,defaultOpened:Oe});if(!isElement$1(ge))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const at=useMergedRef(nt,getRefProp(ge),K),rt=ge.props,Ft=Wt=>{rt.onMouseEnter?.(Wt),Ge(Wt),Ye(!0)},Je=Wt=>{rt.onMouseLeave?.(Wt),Ye(!1)};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(OptionalPortal,{...Ne,withinPortal:ye,children:jsxRuntimeExports.jsx(Box,{...He,...je("tooltip",{style:{...getStyleObject(ve,ze),zIndex:Be,display:!Le&&Qe?"block":"none",top:(qe&&Math.round(qe))??"",left:(Xe&&Math.round(Xe))??""}}),variant:Fe,ref:Nt,mod:{multiline:Ie},children:Te})}),reactExports.cloneElement(ge,{...rt,[xe]:at,onMouseEnter:Ft,onMouseLeave:Je})]})});TooltipFloating.classes=__default__$6;TooltipFloating.displayName="@mantine/core/TooltipFloating";const TooltipGroupContext=reactExports.createContext(!1),TooltipGroupProvider=TooltipGroupContext.Provider,useTooltipGroupContext=()=>reactExports.useContext(TooltipGroupContext),defaultProps$e={openDelay:0,closeDelay:0};function TooltipGroup(fe){const{openDelay:K,closeDelay:me,children:ge}=useProps("TooltipGroup",defaultProps$e,fe);return jsxRuntimeExports.jsx(TooltipGroupProvider,{value:!0,children:jsxRuntimeExports.jsx(FloatingDelayGroup,{delay:{open:K,close:me},children:ge})})}TooltipGroup.displayName="@mantine/core/TooltipGroup";TooltipGroup.extend=fe=>fe;function getDefaultMiddlewares(fe){if(fe===void 0)return{shift:!0,flip:!0};const K={...fe};return fe.shift===void 0&&(K.shift=!0),fe.flip===void 0&&(K.flip=!0),K}function getTooltipMiddlewares(fe){const K=getDefaultMiddlewares(fe.middlewares),me=[offset(fe.offset)];return K.shift&&me.push(shift(typeof K.shift=="boolean"?{padding:8}:{padding:8,...K.shift})),K.flip&&me.push(typeof K.flip=="boolean"?flip():flip(K.flip)),me.push(arrow({element:fe.arrowRef,padding:fe.arrowOffset})),K.inline?me.push(typeof K.inline=="boolean"?inline():inline(K.inline)):fe.inline&&me.push(inline()),me}function useTooltip(fe){const[K,me]=reactExports.useState(fe.defaultOpened),xe=typeof fe.opened=="boolean"?fe.opened:K,ye=useTooltipGroupContext(),ve=useId$1(),_e=reactExports.useCallback(Ne=>{me(Ne),Ne&&Le(ve)},[ve]),{x:Ee,y:be,context:Ae,refs:Se,update:Ce,placement:Te,middlewareData:{arrow:{x:Re,y:De}={}}}=useFloating({strategy:fe.strategy,placement:fe.position,open:xe,onOpenChange:_e,middleware:getTooltipMiddlewares(fe)}),{delay:Ie,currentId:Be,setCurrentId:Le}=useDelayGroup(Ae,{id:ve}),{getReferenceProps:Oe,getFloatingProps:Fe}=useInteractions([useHover(Ae,{enabled:fe.events?.hover,delay:ye?Ie:{open:fe.openDelay,close:fe.closeDelay},mouseOnly:!fe.events?.touch}),useFocus(Ae,{enabled:fe.events?.focus,visibleOnly:!0}),useRole(Ae,{role:"tooltip"}),useDismiss(Ae,{enabled:typeof fe.opened>"u"})]);useFloatingAutoUpdate({opened:xe,position:fe.position,positionDependencies:fe.positionDependencies,floating:{refs:Se,update:Ce}}),useDidUpdate(()=>{fe.onPositionChange?.(Te)},[Te]);const Ue=xe&&Be&&Be!==ve;return{x:Ee,y:be,arrowX:Re,arrowY:De,reference:Se.setReference,floating:Se.setFloating,getFloatingProps:Fe,getReferenceProps:Oe,isGroupPhase:Ue,opened:xe,placement:Te}}const defaultProps$d={position:"top",refProp:"ref",withinPortal:!0,inline:!1,defaultOpened:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:getDefaultZIndex("popover"),positionDependencies:[],middlewares:{flip:!0,shift:!0,inline:!1}},varsResolver$8=(fe,{radius:K,color:me})=>({tooltip:{"--tooltip-radius":K===void 0?void 0:getRadius(K),"--tooltip-bg":me?getThemeColor(me,fe):void 0,"--tooltip-color":me?"var(--mantine-color-white)":void 0}}),Tooltip=factory((fe,K)=>{const me=useProps("Tooltip",defaultProps$d,fe),{children:ge,position:xe,refProp:ye,label:ve,openDelay:_e,closeDelay:Ee,onPositionChange:be,opened:Ae,defaultOpened:Se,withinPortal:Ce,radius:Te,color:Re,classNames:De,styles:Ie,unstyled:Be,style:Le,className:Oe,withArrow:Fe,arrowSize:Ue,arrowOffset:Ne,arrowRadius:He,arrowPosition:ze,offset:je,transitionProps:Ge,multiline:Xe,events:qe,zIndex:Qe,disabled:nt,positionDependencies:Nt,onClick:Ye,onMouseEnter:at,onMouseLeave:rt,inline:Ft,variant:Je,keepMounted:Wt,vars:Kt,portalProps:Pt,mod:Yt,floatingStrategy:Gt,middlewares:an,...pn}=useProps("Tooltip",defaultProps$d,me),{dir:En}=useDirection(),$n=reactExports.useRef(null),Un=useTooltip({position:getFloatingPosition(En,xe),closeDelay:Ee,openDelay:_e,onPositionChange:be,opened:Ae,defaultOpened:Se,events:qe,arrowRef:$n,arrowOffset:Ne,offset:typeof je=="number"?je+(Fe?Ue/2:0):je,positionDependencies:[...Nt,ge],inline:Ft,strategy:Gt,middlewares:an}),kn=useStyles({name:"Tooltip",props:me,classes:__default__$6,className:Oe,style:Le,classNames:De,styles:Ie,unstyled:Be,rootSelector:"tooltip",vars:Kt,varsResolver:varsResolver$8});if(!isElement$1(ge))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const bn=useMergedRef(Un.reference,getRefProp(ge),K),Mn=getTransitionProps(Ge,{duration:100,transition:"fade"}),zt=ge.props;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(OptionalPortal,{...Pt,withinPortal:Ce,children:jsxRuntimeExports.jsx(Transition$1,{...Mn,keepMounted:Wt,mounted:!nt&&!!Un.opened,duration:Un.isGroupPhase?10:Mn.duration,children:Dn=>jsxRuntimeExports.jsxs(Box,{...pn,"data-fixed":Gt==="fixed"||void 0,variant:Je,mod:[{multiline:Xe},Yt],...Un.getFloatingProps({ref:Un.floating,className:kn("tooltip").className,style:{...kn("tooltip").style,...Dn,zIndex:Qe,top:Un.y??0,left:Un.x??0}}),children:[ve,jsxRuntimeExports.jsx(FloatingArrow,{ref:$n,arrowX:Un.arrowX,arrowY:Un.arrowY,visible:Fe,position:Un.placement,arrowSize:Ue,arrowOffset:Ne,arrowRadius:He,arrowPosition:ze,...kn("arrow")})]})})}),reactExports.cloneElement(ge,Un.getReferenceProps({onClick:Ye,onMouseEnter:at,onMouseLeave:rt,onMouseMove:me.onMouseMove,onPointerDown:me.onPointerDown,onPointerEnter:me.onPointerEnter,className:clsx(Oe,zt.className),...zt,[ye]:bn}))]})});Tooltip.classes=__default__$6;Tooltip.displayName="@mantine/core/Tooltip";Tooltip.Floating=TooltipFloating;Tooltip.Group=TooltipGroup;const defaultProps$c={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Select=factory((fe,K)=>{const me=useProps("Select",defaultProps$c,fe),{classNames:ge,styles:xe,unstyled:ye,vars:ve,dropdownOpened:_e,defaultDropdownOpened:Ee,onDropdownClose:be,onDropdownOpen:Ae,onFocus:Se,onBlur:Ce,onClick:Te,onChange:Re,data:De,value:Ie,defaultValue:Be,selectFirstOptionOnChange:Le,onOptionSubmit:Oe,comboboxProps:Fe,readOnly:Ue,disabled:Ne,filter:He,limit:ze,withScrollArea:je,maxDropdownHeight:Ge,size:Xe,searchable:qe,rightSection:Qe,checkIconPosition:nt,withCheckIcon:Nt,nothingFoundMessage:Ye,name:at,form:rt,searchValue:Ft,defaultSearchValue:Je,onSearchChange:Wt,allowDeselect:Kt,error:Pt,rightSectionPointerEvents:Yt,id:Gt,clearable:an,clearButtonProps:pn,hiddenInputProps:En,renderOption:$n,onClear:Un,autoComplete:kn,scrollAreaProps:bn,__defaultRightSection:Mn,__clearSection:zt,__clearable:Dn,chevronColor:hn,...mn}=me,dn=reactExports.useMemo(()=>getParsedComboboxData(De),[De]),Hn=reactExports.useMemo(()=>getOptionsLockup(dn),[dn]),Bn=useId$1(Gt),[kt,Dt,ln]=useUncontrolled({value:Ie,defaultValue:Be,finalValue:null,onChange:Re}),nn=typeof kt=="string"?Hn[kt]:void 0,gn=usePrevious(nn),[Xt,on]=useUncontrolled({value:Ft,defaultValue:Je,finalValue:nn?nn.label:"",onChange:Wt}),Rt=useCombobox({opened:_e,defaultOpened:Ee,onDropdownOpen:()=>{Ae?.(),Rt.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{be?.(),Rt.resetSelectedOption()}}),{resolvedClassNames:An,resolvedStyles:sr}=useResolvedStylesApi({props:me,styles:xe,classNames:ge});reactExports.useEffect(()=>{Le&&Rt.selectFirstOption()},[Le,kt]),reactExports.useEffect(()=>{Ie===null&&on(""),typeof Ie=="string"&&nn&&(gn?.value!==nn.value||gn?.label!==nn.label)&&on(nn.label)},[Ie,nn]);const zn=jsxRuntimeExports.jsx(Combobox.ClearButton,{...pn,onClear:()=>{Dt(null,null),on(""),Un?.()}}),In=an&&!!kt&&!Ne&&!Ue;return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Combobox,{store:Rt,__staticSelector:"Select",classNames:An,styles:sr,unstyled:ye,readOnly:Ue,onOptionSubmit:er=>{Oe?.(er);const Kn=Kt&&Hn[er].value===kt?null:Hn[er],lr=Kn?Kn.value:null;lr!==kt&&Dt(lr,Kn),!ln&&on(typeof lr=="string"&&Kn?.label||""),Rt.closeDropdown()},size:Xe,...Fe,children:[jsxRuntimeExports.jsx(Combobox.Target,{targetType:qe?"input":"button",autoComplete:kn,children:jsxRuntimeExports.jsx(InputBase,{id:Bn,ref:K,__defaultRightSection:jsxRuntimeExports.jsx(Combobox.Chevron,{size:Xe,error:Pt,unstyled:ye,color:hn}),__clearSection:zn,__clearable:In,rightSection:Qe,rightSectionPointerEvents:Yt||(In?"all":"none"),...mn,size:Xe,__staticSelector:"Select",disabled:Ne,readOnly:Ue||!qe,value:Xt,onChange:er=>{on(er.currentTarget.value),Rt.openDropdown(),Le&&Rt.selectFirstOption()},onFocus:er=>{qe&&Rt.openDropdown(),Se?.(er)},onBlur:er=>{qe&&Rt.closeDropdown(),on(kt!=null&&Hn[kt]?.label||""),Ce?.(er)},onClick:er=>{qe?Rt.openDropdown():Rt.toggleDropdown(),Te?.(er)},classNames:An,styles:sr,unstyled:ye,pointer:!qe,error:Pt})}),jsxRuntimeExports.jsx(OptionsDropdown,{data:dn,hidden:Ue||Ne,filter:He,search:Xt,limit:ze,hiddenWhenEmpty:!Ye,withScrollArea:je,maxDropdownHeight:Ge,filterOptions:qe&&nn?.label!==Xt,value:kt,checkIconPosition:nt,withCheckIcon:Nt,nothingFoundMessage:Ye,unstyled:ye,labelId:mn.label?`${Bn}-label`:void 0,"aria-label":mn.label?void 0:mn["aria-label"],renderOption:$n,scrollAreaProps:bn})]}),jsxRuntimeExports.jsx(Combobox.HiddenInput,{value:kt,name:at,form:rt,disabled:Ne,...En})]})});Select.classes={...InputBase.classes,...Combobox.classes};Select.displayName="@mantine/core/Select";const[SliderProvider$1,useSliderContext$1]=createSafeContext("SliderProvider was not found in tree"),SliderRoot$1=reactExports.forwardRef(({size:fe,disabled:K,variant:me,color:ge,thumbSize:xe,radius:ye,...ve},_e)=>{const{getStyles:Ee}=useSliderContext$1();return jsxRuntimeExports.jsx(Box,{tabIndex:-1,variant:me,size:fe,ref:_e,...Ee("root"),...ve})});SliderRoot$1.displayName="@mantine/core/SliderRoot";const Thumb$1=reactExports.forwardRef(({max:fe,min:K,value:me,position:ge,label:xe,dragging:ye,onMouseDown:ve,onKeyDownCapture:_e,labelTransitionProps:Ee,labelAlwaysOn:be,thumbLabel:Ae,onFocus:Se,onBlur:Ce,showLabelOnHover:Te,isHovered:Re,children:De=null,disabled:Ie},Be)=>{const{getStyles:Le}=useSliderContext$1(),[Oe,Fe]=reactExports.useState(!1),Ue=be||ye||Oe||Te&&Re;return jsxRuntimeExports.jsxs(Box,{tabIndex:0,role:"slider","aria-label":Ae,"aria-valuemax":fe,"aria-valuemin":K,"aria-valuenow":me,ref:Be,__vars:{"--slider-thumb-offset":`${ge}%`},...Le("thumb",{focusable:!0}),mod:{dragging:ye,disabled:Ie},onFocus:Ne=>{Fe(!0),typeof Se=="function"&&Se(Ne)},onBlur:Ne=>{Fe(!1),typeof Ce=="function"&&Ce(Ne)},onTouchStart:ve,onMouseDown:ve,onKeyDownCapture:_e,onClick:Ne=>Ne.stopPropagation(),children:[De,jsxRuntimeExports.jsx(Transition$1,{mounted:xe!=null&&!!Ue,transition:"fade",duration:0,...Ee,children:Ne=>jsxRuntimeExports.jsx("div",{...Le("label",{style:Ne}),children:xe})})]})});Thumb$1.displayName="@mantine/core/SliderThumb";function getPosition$1({value:fe,min:K,max:me}){const ge=(fe-K)/(me-K)*100;return Math.min(Math.max(ge,0),100)}function isMarkFilled({mark:fe,offset:K,value:me,inverted:ge=!1}){return ge?typeof K=="number"&&fe.value<=K||fe.value>=me:typeof K=="number"?fe.value>=K&&fe.value<=me:fe.value<=me}function Marks$1({marks:fe,min:K,max:me,disabled:ge,value:xe,offset:ye,inverted:ve}){const{getStyles:_e}=useSliderContext$1();if(!fe)return null;const Ee=fe.map((be,Ae)=>reactExports.createElement(Box,{..._e("markWrapper"),__vars:{"--mark-offset":`${getPosition$1({value:be.value,min:K,max:me})}%`},key:Ae},jsxRuntimeExports.jsx(Box,{..._e("mark"),mod:{filled:isMarkFilled({mark:be,value:xe,offset:ye,inverted:ve}),disabled:ge}}),be.label&&jsxRuntimeExports.jsx("div",{..._e("markLabel"),children:be.label})));return jsxRuntimeExports.jsx("div",{children:Ee})}Marks$1.displayName="@mantine/core/SliderMarks";function Track$1({filled:fe,children:K,offset:me,disabled:ge,marksOffset:xe,inverted:ye,containerProps:ve,..._e}){const{getStyles:Ee}=useSliderContext$1();return jsxRuntimeExports.jsx(Box,{...Ee("trackContainer"),mod:{disabled:ge},...ve,children:jsxRuntimeExports.jsxs(Box,{...Ee("track"),mod:{inverted:ye,disabled:ge},children:[jsxRuntimeExports.jsx(Box,{mod:{inverted:ye,disabled:ge},__vars:{"--slider-bar-width":`calc(${fe}% + var(--slider-size))`,"--slider-bar-offset":`calc(${me}% - var(--slider-size))`},...Ee("bar")}),K,jsxRuntimeExports.jsx(Marks$1,{..._e,offset:xe,disabled:ge,inverted:ye})]})})}Track$1.displayName="@mantine/core/SliderTrack";function getChangeValue$1({value:fe,containerWidth:K,min:me,max:ge,step:xe,precision:ye}){const _e=(K?Math.min(Math.max(fe,0),K)/K:fe)*(ge-me),Ee=(_e!==0?Math.round(_e/xe)*xe:0)+me,be=Math.max(Ee,me);return ye!==void 0?Number(be.toFixed(ye)):be}function getFloatingValue(fe,K){return parseFloat(fe.toFixed(K))}function getPrecision$1(fe){if(!fe)return 0;const K=fe.toString().split(".");return K.length>1?K[1].length:0}function getNextMarkValue(fe,K){const ge=[...K].sort((xe,ye)=>xe.value-ye.value).find(xe=>xe.value>fe);return ge?ge.value:fe}function getPreviousMarkValue(fe,K){const ge=[...K].sort((xe,ye)=>ye.value-xe.value).find(xe=>xe.value<fe);return ge?ge.value:fe}function getFirstMarkValue(fe){const K=[...fe].sort((me,ge)=>me.value-ge.value);return K.length>0?K[0].value:0}function getLastMarkValue(fe){const K=[...fe].sort((me,ge)=>me.value-ge.value);return K.length>0?K[K.length-1].value:100}var __default__$5={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const defaultProps$b={radius:"xl",min:0,max:100,step:1,marks:[],label:fe=>fe,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:fe=>fe},varsResolver$7=(fe,{size:K,color:me,thumbSize:ge,radius:xe})=>({root:{"--slider-size":getSize(K,"slider-size"),"--slider-color":me?getThemeColor(me,fe):void 0,"--slider-radius":xe===void 0?void 0:getRadius(xe),"--slider-thumb-size":ge!==void 0?rem(ge):"calc(var(--slider-size) * 2)"}}),Slider=factory((fe,K)=>{const me=useProps("Slider",defaultProps$b,fe),{classNames:ge,styles:xe,value:ye,onChange:ve,onChangeEnd:_e,size:Ee,min:be,max:Ae,step:Se,precision:Ce,defaultValue:Te,name:Re,marks:De,label:Ie,labelTransitionProps:Be,labelAlwaysOn:Le,thumbLabel:Oe,showLabelOnHover:Fe,thumbChildren:Ue,disabled:Ne,unstyled:He,scale:ze,inverted:je,className:Ge,style:Xe,vars:qe,hiddenInputProps:Qe,restrictToMarks:nt,thumbProps:Nt,...Ye}=me,at=useStyles({name:"Slider",props:me,classes:__default__$5,classNames:ge,className:Ge,styles:xe,style:Xe,vars:qe,varsResolver:varsResolver$7,unstyled:He}),{dir:rt}=useDirection(),[Ft,Je]=reactExports.useState(!1),[Wt,Kt]=useUncontrolled({value:typeof ye=="number"?clamp$5(ye,be,Ae):ye,defaultValue:typeof Te=="number"?clamp$5(Te,be,Ae):Te,finalValue:clamp$5(0,be,Ae),onChange:ve}),Pt=reactExports.useRef(Wt),Yt=reactExports.useRef(null),Gt=reactExports.useRef(null),an=getPosition$1({value:Wt,min:be,max:Ae}),pn=ze(Wt),En=typeof Ie=="function"?Ie(pn):Ie,$n=Ce??getPrecision$1(Se),Un=reactExports.useCallback(({x:zt})=>{if(!Ne){const Dn=getChangeValue$1({value:zt,min:be,max:Ae,step:Se,precision:$n});Kt(nt&&De?.length?findClosestNumber(Dn,De.map(hn=>hn.value)):Dn),Pt.current=Dn}},[Ne,be,Ae,Se,$n,Kt,De,nt]),{ref:kn,active:bn}=useMove(Un,{onScrubEnd:()=>!Ne&&_e?.(nt&&De?.length?findClosestNumber(Pt.current,De.map(zt=>zt.value)):Pt.current)},rt),Mn=zt=>{if(!Ne)switch(zt.key){case"ArrowUp":{if(zt.preventDefault(),Gt.current?.focus(),nt&&De){const hn=getNextMarkValue(Wt,De);Kt(hn),_e?.(hn);break}const Dn=getFloatingValue(Math.min(Math.max(Wt+Se,be),Ae),$n);Kt(Dn),_e?.(Dn);break}case"ArrowRight":{if(zt.preventDefault(),Gt.current?.focus(),nt&&De){const hn=rt==="rtl"?getPreviousMarkValue(Wt,De):getNextMarkValue(Wt,De);Kt(hn),_e?.(hn);break}const Dn=getFloatingValue(Math.min(Math.max(rt==="rtl"?Wt-Se:Wt+Se,be),Ae),$n);Kt(Dn),_e?.(Dn);break}case"ArrowDown":{if(zt.preventDefault(),Gt.current?.focus(),nt&&De){const hn=getPreviousMarkValue(Wt,De);Kt(hn),_e?.(hn);break}const Dn=getFloatingValue(Math.min(Math.max(Wt-Se,be),Ae),$n);Kt(Dn),_e?.(Dn);break}case"ArrowLeft":{if(zt.preventDefault(),Gt.current?.focus(),nt&&De){const hn=rt==="rtl"?getNextMarkValue(Wt,De):getPreviousMarkValue(Wt,De);Kt(hn),_e?.(hn);break}const Dn=getFloatingValue(Math.min(Math.max(rt==="rtl"?Wt+Se:Wt-Se,be),Ae),$n);Kt(Dn),_e?.(Dn);break}case"Home":{if(zt.preventDefault(),Gt.current?.focus(),nt&&De){Kt(getFirstMarkValue(De)),_e?.(getFirstMarkValue(De));break}Kt(be),_e?.(be);break}case"End":{if(zt.preventDefault(),Gt.current?.focus(),nt&&De){Kt(getLastMarkValue(De)),_e?.(getLastMarkValue(De));break}Kt(Ae),_e?.(Ae);break}}};return jsxRuntimeExports.jsx(SliderProvider$1,{value:{getStyles:at},children:jsxRuntimeExports.jsxs(SliderRoot$1,{...Ye,ref:useMergedRef(K,Yt),onKeyDownCapture:Mn,onMouseDownCapture:()=>Yt.current?.focus(),size:Ee,disabled:Ne,children:[jsxRuntimeExports.jsx(Track$1,{inverted:je,offset:0,filled:an,marks:De,min:be,max:Ae,value:pn,disabled:Ne,containerProps:{ref:kn,onMouseEnter:Fe?()=>Je(!0):void 0,onMouseLeave:Fe?()=>Je(!1):void 0},children:jsxRuntimeExports.jsx(Thumb$1,{max:Ae,min:be,value:pn,position:an,dragging:bn,label:En,ref:Gt,labelTransitionProps:Be,labelAlwaysOn:Le,thumbLabel:Oe,showLabelOnHover:Fe,isHovered:Ft,disabled:Ne,...Nt,children:Ue})}),jsxRuntimeExports.jsx("input",{type:"hidden",name:Re,value:pn,...Qe})]})})});Slider.classes=__default__$5;Slider.displayName="@mantine/core/Slider";var __default__$4={root:"m_6d731127"};const defaultProps$a={gap:"md",align:"stretch",justify:"flex-start"},varsResolver$6=(fe,{gap:K,align:me,justify:ge})=>({root:{"--stack-gap":getSpacing(K),"--stack-align":me,"--stack-justify":ge}}),Stack=factory((fe,K)=>{const me=useProps("Stack",defaultProps$a,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,align:be,justify:Ae,gap:Se,variant:Ce,...Te}=me,Re=useStyles({name:"Stack",props:me,classes:__default__$4,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$6});return jsxRuntimeExports.jsx(Box,{ref:K,...Re("root"),variant:Ce,...Te})});Stack.classes=__default__$4;Stack.displayName="@mantine/core/Stack";const[TableProvider,useTableContext]=createSafeContext("Table component was not found in the tree");var __default__$3={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function getDataAttributes(fe,K){if(!K)return;const me={};return K.columnBorder&&fe.withColumnBorders&&(me["data-with-column-border"]=!0),K.rowBorder&&fe.withRowBorders&&(me["data-with-row-border"]=!0),K.striped&&fe.striped&&(me["data-striped"]=fe.striped),K.highlightOnHover&&fe.highlightOnHover&&(me["data-hover"]=!0),K.captionSide&&fe.captionSide&&(me["data-side"]=fe.captionSide),K.stickyHeader&&fe.stickyHeader&&(me["data-sticky"]=!0),me}function tableElement(fe,K){const me=`Table${fe.charAt(0).toUpperCase()}${fe.slice(1)}`,ge=factory((xe,ye)=>{const ve=useProps(me,{},xe),{classNames:_e,className:Ee,style:be,styles:Ae,...Se}=ve,Ce=useTableContext();return jsxRuntimeExports.jsx(Box,{component:fe,ref:ye,...getDataAttributes(Ce,K),...Ce.getStyles(fe,{className:Ee,classNames:_e,style:be,styles:Ae,props:ve}),...Se})});return ge.displayName=`@mantine/core/${me}`,ge.classes=__default__$3,ge}const TableTh=tableElement("th",{columnBorder:!0}),TableTd=tableElement("td",{columnBorder:!0}),TableTr=tableElement("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),TableThead=tableElement("thead",{stickyHeader:!0}),TableTbody=tableElement("tbody"),TableTfoot=tableElement("tfoot"),TableCaption=tableElement("caption",{captionSide:!0});function TableDataRenderer({data:fe}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[fe.caption&&jsxRuntimeExports.jsx(TableCaption,{children:fe.caption}),fe.head&&jsxRuntimeExports.jsx(TableThead,{children:jsxRuntimeExports.jsx(TableTr,{children:fe.head.map((K,me)=>jsxRuntimeExports.jsx(TableTh,{children:K},me))})}),fe.body&&jsxRuntimeExports.jsx(TableTbody,{children:fe.body.map((K,me)=>jsxRuntimeExports.jsx(TableTr,{children:K.map((ge,xe)=>jsxRuntimeExports.jsx(TableTd,{children:ge},xe))},me))}),fe.foot&&jsxRuntimeExports.jsx(TableTfoot,{children:jsxRuntimeExports.jsx(TableTr,{children:fe.foot.map((K,me)=>jsxRuntimeExports.jsx(TableTh,{children:K},me))})})]})}TableDataRenderer.displayName="@mantine/core/TableDataRenderer";const defaultProps$9={type:"scrollarea"},varsResolver$5=(fe,{minWidth:K,type:me})=>({scrollContainer:{"--table-min-width":rem(K),"--table-overflow":me==="native"?"auto":void 0}}),TableScrollContainer=factory((fe,K)=>{const me=useProps("TableScrollContainer",defaultProps$9,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,children:be,minWidth:Ae,type:Se,...Ce}=me,Te=useStyles({name:"TableScrollContainer",classes:__default__$3,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$5,rootSelector:"scrollContainer"});return jsxRuntimeExports.jsx(Box,{component:Se==="scrollarea"?ScrollArea:"div",...Se==="scrollarea"?{offsetScrollbars:"x"}:{},ref:K,...Te("scrollContainer"),...Ce,children:jsxRuntimeExports.jsx("div",{...Te("scrollContainerInner"),children:be})})});TableScrollContainer.classes=__default__$3;TableScrollContainer.displayName="@mantine/core/TableScrollContainer";const defaultProps$8={withRowBorders:!0,verticalSpacing:7},varsResolver$4=(fe,{layout:K,captionSide:me,horizontalSpacing:ge,verticalSpacing:xe,borderColor:ye,stripedColor:ve,highlightOnHoverColor:_e,striped:Ee,highlightOnHover:be,stickyHeaderOffset:Ae,stickyHeader:Se})=>({table:{"--table-layout":K,"--table-caption-side":me,"--table-horizontal-spacing":getSpacing(ge),"--table-vertical-spacing":getSpacing(xe),"--table-border-color":ye?getThemeColor(ye,fe):void 0,"--table-striped-color":Ee&&ve?getThemeColor(ve,fe):void 0,"--table-highlight-on-hover-color":be&&_e?getThemeColor(_e,fe):void 0,"--table-sticky-header-offset":Se?rem(Ae):void 0}}),Table=factory((fe,K)=>{const me=useProps("Table",defaultProps$8,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,horizontalSpacing:be,verticalSpacing:Ae,captionSide:Se,stripedColor:Ce,highlightOnHoverColor:Te,striped:Re,highlightOnHover:De,withColumnBorders:Ie,withRowBorders:Be,withTableBorder:Le,borderColor:Oe,layout:Fe,variant:Ue,data:Ne,children:He,stickyHeader:ze,stickyHeaderOffset:je,mod:Ge,tabularNums:Xe,...qe}=me,Qe=useStyles({name:"Table",props:me,className:xe,style:ye,classes:__default__$3,classNames:ge,styles:ve,unstyled:_e,rootSelector:"table",vars:Ee,varsResolver:varsResolver$4});return jsxRuntimeExports.jsx(TableProvider,{value:{getStyles:Qe,stickyHeader:ze,striped:Re===!0?"odd":Re||void 0,highlightOnHover:De,withColumnBorders:Ie,withRowBorders:Be,captionSide:Se||"bottom"},children:jsxRuntimeExports.jsx(Box,{component:"table",variant:Ue,ref:K,mod:[{"data-with-table-border":Le,"data-tabular-nums":Xe},Ge],...Qe("table"),...qe,children:He||!!Ne&&jsxRuntimeExports.jsx(TableDataRenderer,{data:Ne})})})});Table.classes=__default__$3;Table.displayName="@mantine/core/Table";Table.Td=TableTd;Table.Th=TableTh;Table.Tr=TableTr;Table.Thead=TableThead;Table.Tbody=TableTbody;Table.Tfoot=TableTfoot;Table.Caption=TableCaption;Table.ScrollContainer=TableScrollContainer;Table.DataRenderer=TableDataRenderer;const[TabsProvider,useTabsContext]=createSafeContext("Tabs component was not found in the tree");var __default__$2={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const defaultProps$7={},TabsList=factory((fe,K)=>{const me=useProps("TabsList",defaultProps$7,fe),{children:ge,className:xe,grow:ye,justify:ve,classNames:_e,styles:Ee,style:be,mod:Ae,...Se}=me,Ce=useTabsContext();return jsxRuntimeExports.jsx(Box,{...Se,...Ce.getStyles("list",{className:xe,style:be,classNames:_e,styles:Ee,props:me,variant:Ce.variant}),ref:K,role:"tablist",variant:Ce.variant,mod:[{grow:ye,orientation:Ce.orientation,placement:Ce.orientation==="vertical"&&Ce.placement,inverted:Ce.inverted},Ae],"aria-orientation":Ce.orientation,__vars:{"--tabs-justify":ve},children:ge})});TabsList.classes=__default__$2;TabsList.displayName="@mantine/core/TabsList";const defaultProps$6={},TabsPanel=factory((fe,K)=>{const me=useProps("TabsPanel",defaultProps$6,fe),{children:ge,className:xe,value:ye,classNames:ve,styles:_e,style:Ee,mod:be,keepMounted:Ae,...Se}=me,Ce=useTabsContext(),Te=Ce.value===ye,Re=Ce.keepMounted||Ae||Te?ge:null;return jsxRuntimeExports.jsx(Box,{...Se,...Ce.getStyles("panel",{className:xe,classNames:ve,styles:_e,style:[Ee,Te?void 0:{display:"none"}],props:me}),ref:K,mod:[{orientation:Ce.orientation},be],role:"tabpanel",id:Ce.getPanelId(ye),"aria-labelledby":Ce.getTabId(ye),children:Re})});TabsPanel.classes=__default__$2;TabsPanel.displayName="@mantine/core/TabsPanel";const defaultProps$5={},TabsTab=factory((fe,K)=>{const me=useProps("TabsTab",defaultProps$5,fe),{className:ge,children:xe,rightSection:ye,leftSection:ve,value:_e,onClick:Ee,onKeyDown:be,disabled:Ae,color:Se,style:Ce,classNames:Te,styles:Re,vars:De,mod:Ie,tabIndex:Be,...Le}=me,Oe=useMantineTheme(),{dir:Fe}=useDirection(),Ue=useTabsContext(),Ne=_e===Ue.value,He=je=>{Ue.onChange(Ue.allowTabDeactivation&&_e===Ue.value?null:_e),Ee?.(je)},ze={classNames:Te,styles:Re,props:me};return jsxRuntimeExports.jsxs(UnstyledButton,{...Le,...Ue.getStyles("tab",{className:ge,style:Ce,variant:Ue.variant,...ze}),disabled:Ae,unstyled:Ue.unstyled,variant:Ue.variant,mod:[{active:Ne,disabled:Ae,orientation:Ue.orientation,inverted:Ue.inverted,placement:Ue.orientation==="vertical"&&Ue.placement},Ie],ref:K,role:"tab",id:Ue.getTabId(_e),"aria-selected":Ne,tabIndex:Be!==void 0?Be:Ne||Ue.value===null?0:-1,"aria-controls":Ue.getPanelId(_e),onClick:He,__vars:{"--tabs-color":Se?getThemeColor(Se,Oe):void 0},onKeyDown:createScopedKeydownHandler({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:Ue.activateTabWithKeyboard,loop:Ue.loop,orientation:Ue.orientation||"horizontal",dir:Fe,onKeyDown:be}),children:[ve&&jsxRuntimeExports.jsx("span",{...Ue.getStyles("tabSection",ze),"data-position":"left",children:ve}),xe&&jsxRuntimeExports.jsx("span",{...Ue.getStyles("tabLabel",ze),children:xe}),ye&&jsxRuntimeExports.jsx("span",{...Ue.getStyles("tabSection",ze),"data-position":"right",children:ye})]})});TabsTab.classes=__default__$2;TabsTab.displayName="@mantine/core/TabsTab";const VALUE_ERROR="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",defaultProps$4={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},varsResolver$3=(fe,{radius:K,color:me,autoContrast:ge})=>({root:{"--tabs-radius":getRadius(K),"--tabs-color":getThemeColor(me,fe),"--tabs-text-color":getAutoContrastValue(ge,fe)?getContrastColor({color:me,theme:fe,autoContrast:ge}):void 0}}),Tabs=factory((fe,K)=>{const me=useProps("Tabs",defaultProps$4,fe),{defaultValue:ge,value:xe,onChange:ye,orientation:ve,children:_e,loop:Ee,id:be,activateTabWithKeyboard:Ae,allowTabDeactivation:Se,variant:Ce,color:Te,radius:Re,inverted:De,placement:Ie,keepMounted:Be,classNames:Le,styles:Oe,unstyled:Fe,className:Ue,style:Ne,vars:He,autoContrast:ze,mod:je,...Ge}=me,Xe=useId$1(be),[qe,Qe]=useUncontrolled({value:xe,defaultValue:ge,finalValue:null,onChange:ye}),nt=useStyles({name:"Tabs",props:me,classes:__default__$2,className:Ue,style:Ne,classNames:Le,styles:Oe,unstyled:Fe,vars:He,varsResolver:varsResolver$3});return jsxRuntimeExports.jsx(TabsProvider,{value:{placement:Ie,value:qe,orientation:ve,id:Xe,loop:Ee,activateTabWithKeyboard:Ae,getTabId:getSafeId(`${Xe}-tab`,VALUE_ERROR),getPanelId:getSafeId(`${Xe}-panel`,VALUE_ERROR),onChange:Qe,allowTabDeactivation:Se,variant:Ce,color:Te,radius:Re,inverted:De,keepMounted:Be,unstyled:Fe,getStyles:nt},children:jsxRuntimeExports.jsx(Box,{ref:K,id:Xe,variant:Ce,mod:[{orientation:ve,inverted:ve==="horizontal"&&De,placement:ve==="vertical"&&Ie},je],...nt("root"),...Ge,children:_e})})});Tabs.classes=__default__$2;Tabs.displayName="@mantine/core/Tabs";Tabs.Tab=TabsTab;Tabs.Panel=TabsPanel;Tabs.List=TabsList;const defaultProps$3={},TextInput=factory((fe,K)=>{const me=useProps("TextInput",defaultProps$3,fe);return jsxRuntimeExports.jsx(InputBase,{component:"input",ref:K,...me,__staticSelector:"TextInput"})});TextInput.classes=InputBase.classes;TextInput.displayName="@mantine/core/TextInput";const headings=["h1","h2","h3","h4","h5","h6"],sizes=["xs","sm","md","lg","xl"];function getTitleSize(fe,K){const me=K!==void 0?K:`h${fe}`;return headings.includes(me)?{fontSize:`var(--mantine-${me}-font-size)`,fontWeight:`var(--mantine-${me}-font-weight)`,lineHeight:`var(--mantine-${me}-line-height)`}:sizes.includes(me)?{fontSize:`var(--mantine-font-size-${me})`,fontWeight:`var(--mantine-h${fe}-font-weight)`,lineHeight:`var(--mantine-h${fe}-line-height)`}:{fontSize:rem(me),fontWeight:`var(--mantine-h${fe}-font-weight)`,lineHeight:`var(--mantine-h${fe}-line-height)`}}var __default__$1={root:"m_8a5d1357"};const defaultProps$2={order:1},varsResolver$2=(fe,{order:K,size:me,lineClamp:ge,textWrap:xe})=>{const ye=getTitleSize(K,me);return{root:{"--title-fw":ye.fontWeight,"--title-lh":ye.lineHeight,"--title-fz":ye.fontSize,"--title-line-clamp":typeof ge=="number"?ge.toString():void 0,"--title-text-wrap":xe}}},Title=factory((fe,K)=>{const me=useProps("Title",defaultProps$2,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,order:Ee,vars:be,size:Ae,variant:Se,lineClamp:Ce,textWrap:Te,mod:Re,...De}=me,Ie=useStyles({name:"Title",props:me,classes:__default__$1,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:be,varsResolver:varsResolver$2});return[1,2,3,4,5,6].includes(Ee)?jsxRuntimeExports.jsx(Box,{...Ie("root"),component:`h${Ee}`,variant:Se,ref:K,mod:[{order:Ee,"data-line-clamp":typeof Ce=="number"},Re],size:Ae,...De}):null});Title.classes=__default__$1;Title.displayName="@mantine/core/Title";const positions=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function getGroupedNotifications(fe,K){return fe.reduce((me,ge)=>(me[ge.position||K].push(ge),me),positions.reduce((me,ge)=>(me[ge]=[],me),{}))}const transforms={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},noTransform={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function getNotificationStateStyles({state:fe,maxHeight:K,position:me,transitionDuration:ge}){const[xe,ye]=me.split("-"),ve=ye==="center"?`${xe}-center`:ye,_e={opacity:0,maxHeight:K,transform:transforms[ve],transitionDuration:`${ge}ms, ${ge}ms, ${ge}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},Ee={opacity:1,transform:noTransform[ve]},be={opacity:0,maxHeight:0,transform:transforms[ve]};return{..._e,...{entering:Ee,entered:Ee,exiting:be,exited:be}[fe]}}function getAutoClose(fe,K){return typeof K=="number"?K:K===!1||fe===!1?!1:fe}const NotificationContainer=reactExports.forwardRef(({data:fe,onHide:K,autoClose:me,...ge},xe)=>{const{autoClose:ye,message:ve,..._e}=fe,Ee=getAutoClose(me,fe.autoClose),be=reactExports.useRef(-1),Ae=()=>window.clearTimeout(be.current),Se=()=>{K(fe.id),Ae()},Ce=()=>{typeof Ee=="number"&&(be.current=window.setTimeout(Se,Ee))};return reactExports.useEffect(()=>{fe.onOpen?.(fe)},[]),reactExports.useEffect(()=>(Ce(),Ae),[Ee]),jsxRuntimeExports.jsx(Notification,{...ge,..._e,onClose:Se,ref:xe,onMouseEnter:Ae,onMouseLeave:Ce,children:ve})});NotificationContainer.displayName="@mantine/notifications/NotificationContainer";var __default__={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const Transition=Transition$2,defaultProps$1={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:getDefaultZIndex("overlay"),store:notificationsStore,withinPortal:!0},varsResolver$1=(fe,{zIndex:K,containerWidth:me})=>({root:{"--notifications-z-index":K?.toString(),"--notifications-container-width":rem(me)}}),Notifications=factory((fe,K)=>{const me=useProps("Notifications",defaultProps$1,fe),{classNames:ge,className:xe,style:ye,styles:ve,unstyled:_e,vars:Ee,position:be,autoClose:Ae,transitionDuration:Se,containerWidth:Ce,notificationMaxHeight:Te,limit:Re,zIndex:De,store:Ie,portalProps:Be,withinPortal:Le,...Oe}=me,Fe=useMantineTheme(),Ue=useNotifications(Ie),Ne=useForceUpdate(),He=useReducedMotion(),ze=reactExports.useRef({}),je=reactExports.useRef(0),Xe=(Fe.respectReducedMotion?He:!1)?1:Se,qe=useStyles({name:"Notifications",classes:__default__,props:me,className:xe,style:ye,classNames:ge,styles:ve,unstyled:_e,vars:Ee,varsResolver:varsResolver$1});reactExports.useEffect(()=>{Ie?.updateState(Nt=>({...Nt,limit:Re||5,defaultPosition:be}))},[Re,be]),useDidUpdate(()=>{Ue.notifications.length>je.current&&setTimeout(()=>Ne(),0),je.current=Ue.notifications.length},[Ue.notifications]);const Qe=getGroupedNotifications(Ue.notifications,be),nt=positions.reduce((Nt,Ye)=>(Nt[Ye]=Qe[Ye].map(({style:at,...rt})=>jsxRuntimeExports.jsx(Transition,{timeout:Xe,onEnter:()=>ze.current[rt.id].offsetHeight,nodeRef:{current:ze.current[rt.id]},children:Ft=>jsxRuntimeExports.jsx(NotificationContainer,{ref:Je=>{ze.current[rt.id]=Je},data:rt,onHide:Je=>hideNotification(Je,Ie),autoClose:Ae,...qe("notification",{style:{...getNotificationStateStyles({state:Ft,position:Ye,transitionDuration:Xe,maxHeight:Te}),...at}})})},rt.id)),Nt),{});return jsxRuntimeExports.jsxs(OptionalPortal,{withinPortal:Le,...Be,children:[jsxRuntimeExports.jsx(Box,{...qe("root"),"data-position":"top-center",ref:K,...Oe,children:jsxRuntimeExports.jsx(TransitionGroup,{children:nt["top-center"]})}),jsxRuntimeExports.jsx(Box,{...qe("root"),"data-position":"top-left",...Oe,children:jsxRuntimeExports.jsx(TransitionGroup,{children:nt["top-left"]})}),jsxRuntimeExports.jsx(Box,{...qe("root",{className:ReactRemoveScroll.classNames.fullWidth}),"data-position":"top-right",...Oe,children:jsxRuntimeExports.jsx(TransitionGroup,{children:nt["top-right"]})}),jsxRuntimeExports.jsx(Box,{...qe("root",{className:ReactRemoveScroll.classNames.fullWidth}),"data-position":"bottom-right",...Oe,children:jsxRuntimeExports.jsx(TransitionGroup,{children:nt["bottom-right"]})}),jsxRuntimeExports.jsx(Box,{...qe("root"),"data-position":"bottom-left",...Oe,children:jsxRuntimeExports.jsx(TransitionGroup,{children:nt["bottom-left"]})}),jsxRuntimeExports.jsx(Box,{...qe("root"),"data-position":"bottom-center",...Oe,children:jsxRuntimeExports.jsx(TransitionGroup,{children:nt["bottom-center"]})})]})});Notifications.classes=__default__;Notifications.displayName="@mantine/notifications/Notifications";Notifications.show=notifications.show;Notifications.hide=notifications.hide;Notifications.update=notifications.update;Notifications.clean=notifications.clean;Notifications.cleanQueue=notifications.cleanQueue;Notifications.updateState=notifications.updateState;/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const REVISION="174",MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},CullFaceNone=0,CullFaceBack=1,CullFaceFront=2,CullFaceFrontBack=3,BasicShadowMap=0,PCFShadowMap=1,PCFSoftShadowMap=2,VSMShadowMap=3,FrontSide=0,BackSide=1,DoubleSide=2,NoBlending=0,NormalBlending=1,AdditiveBlending=2,SubtractiveBlending=3,MultiplyBlending=4,CustomBlending=5,AddEquation=100,SubtractEquation=101,ReverseSubtractEquation=102,MinEquation=103,MaxEquation=104,ZeroFactor=200,OneFactor=201,SrcColorFactor=202,OneMinusSrcColorFactor=203,SrcAlphaFactor=204,OneMinusSrcAlphaFactor=205,DstAlphaFactor=206,OneMinusDstAlphaFactor=207,DstColorFactor=208,OneMinusDstColorFactor=209,SrcAlphaSaturateFactor=210,ConstantColorFactor=211,OneMinusConstantColorFactor=212,ConstantAlphaFactor=213,OneMinusConstantAlphaFactor=214,NeverDepth=0,AlwaysDepth=1,LessDepth=2,LessEqualDepth=3,EqualDepth=4,GreaterEqualDepth=5,GreaterDepth=6,NotEqualDepth=7,MultiplyOperation=0,MixOperation=1,AddOperation=2,NoToneMapping=0,LinearToneMapping=1,ReinhardToneMapping=2,CineonToneMapping=3,ACESFilmicToneMapping=4,CustomToneMapping=5,AgXToneMapping=6,NeutralToneMapping=7,AttachedBindMode="attached",DetachedBindMode="detached",UVMapping=300,CubeReflectionMapping=301,CubeRefractionMapping=302,EquirectangularReflectionMapping=303,EquirectangularRefractionMapping=304,CubeUVReflectionMapping=306,RepeatWrapping=1e3,ClampToEdgeWrapping=1001,MirroredRepeatWrapping=1002,NearestFilter=1003,NearestMipmapNearestFilter=1004,NearestMipMapNearestFilter=1004,NearestMipmapLinearFilter=1005,NearestMipMapLinearFilter=1005,LinearFilter=1006,LinearMipmapNearestFilter=1007,LinearMipMapNearestFilter=1007,LinearMipmapLinearFilter=1008,LinearMipMapLinearFilter=1008,UnsignedByteType=1009,ByteType=1010,ShortType=1011,UnsignedShortType=1012,IntType=1013,UnsignedIntType=1014,FloatType=1015,HalfFloatType=1016,UnsignedShort4444Type=1017,UnsignedShort5551Type=1018,UnsignedInt248Type=1020,UnsignedInt5999Type=35902,AlphaFormat=1021,RGBFormat=1022,RGBAFormat=1023,LuminanceFormat=1024,LuminanceAlphaFormat=1025,DepthFormat=1026,DepthStencilFormat=1027,RedFormat=1028,RedIntegerFormat=1029,RGFormat=1030,RGIntegerFormat=1031,RGBIntegerFormat=1032,RGBAIntegerFormat=1033,RGB_S3TC_DXT1_Format=33776,RGBA_S3TC_DXT1_Format=33777,RGBA_S3TC_DXT3_Format=33778,RGBA_S3TC_DXT5_Format=33779,RGB_PVRTC_4BPPV1_Format=35840,RGB_PVRTC_2BPPV1_Format=35841,RGBA_PVRTC_4BPPV1_Format=35842,RGBA_PVRTC_2BPPV1_Format=35843,RGB_ETC1_Format=36196,RGB_ETC2_Format=37492,RGBA_ETC2_EAC_Format=37496,RGBA_ASTC_4x4_Format=37808,RGBA_ASTC_5x4_Format=37809,RGBA_ASTC_5x5_Format=37810,RGBA_ASTC_6x5_Format=37811,RGBA_ASTC_6x6_Format=37812,RGBA_ASTC_8x5_Format=37813,RGBA_ASTC_8x6_Format=37814,RGBA_ASTC_8x8_Format=37815,RGBA_ASTC_10x5_Format=37816,RGBA_ASTC_10x6_Format=37817,RGBA_ASTC_10x8_Format=37818,RGBA_ASTC_10x10_Format=37819,RGBA_ASTC_12x10_Format=37820,RGBA_ASTC_12x12_Format=37821,RGBA_BPTC_Format=36492,RGB_BPTC_SIGNED_Format=36494,RGB_BPTC_UNSIGNED_Format=36495,RED_RGTC1_Format=36283,SIGNED_RED_RGTC1_Format=36284,RED_GREEN_RGTC2_Format=36285,SIGNED_RED_GREEN_RGTC2_Format=36286,LoopOnce=2200,LoopRepeat=2201,LoopPingPong=2202,InterpolateDiscrete=2300,InterpolateLinear=2301,InterpolateSmooth=2302,ZeroCurvatureEnding=2400,ZeroSlopeEnding=2401,WrapAroundEnding=2402,NormalAnimationBlendMode=2500,AdditiveAnimationBlendMode=2501,TrianglesDrawMode=0,TriangleStripDrawMode=1,TriangleFanDrawMode=2,BasicDepthPacking=3200,RGBADepthPacking=3201,RGBDepthPacking=3202,RGDepthPacking=3203,TangentSpaceNormalMap=0,ObjectSpaceNormalMap=1,NoColorSpace="",SRGBColorSpace="srgb",LinearSRGBColorSpace="srgb-linear",LinearTransfer="linear",SRGBTransfer="srgb",ZeroStencilOp=0,KeepStencilOp=7680,ReplaceStencilOp=7681,IncrementStencilOp=7682,DecrementStencilOp=7683,IncrementWrapStencilOp=34055,DecrementWrapStencilOp=34056,InvertStencilOp=5386,NeverStencilFunc=512,LessStencilFunc=513,EqualStencilFunc=514,LessEqualStencilFunc=515,GreaterStencilFunc=516,NotEqualStencilFunc=517,GreaterEqualStencilFunc=518,AlwaysStencilFunc=519,NeverCompare=512,LessCompare=513,EqualCompare=514,LessEqualCompare=515,GreaterCompare=516,NotEqualCompare=517,GreaterEqualCompare=518,AlwaysCompare=519,StaticDrawUsage=35044,DynamicDrawUsage=35048,StreamDrawUsage=35040,StaticReadUsage=35045,DynamicReadUsage=35049,StreamReadUsage=35041,StaticCopyUsage=35046,DynamicCopyUsage=35050,StreamCopyUsage=35042,GLSL1="100",GLSL3="300 es",WebGLCoordinateSystem=2e3,WebGPUCoordinateSystem=2001,TimestampQuery={COMPUTE:"compute",RENDER:"render"};let EventDispatcher$2=class{addEventListener(K,me){this._listeners===void 0&&(this._listeners={});const ge=this._listeners;ge[K]===void 0&&(ge[K]=[]),ge[K].indexOf(me)===-1&&ge[K].push(me)}hasEventListener(K,me){const ge=this._listeners;return ge===void 0?!1:ge[K]!==void 0&&ge[K].indexOf(me)!==-1}removeEventListener(K,me){const ge=this._listeners;if(ge===void 0)return;const xe=ge[K];if(xe!==void 0){const ye=xe.indexOf(me);ye!==-1&&xe.splice(ye,1)}}dispatchEvent(K){const me=this._listeners;if(me===void 0)return;const ge=me[K.type];if(ge!==void 0){K.target=this;const xe=ge.slice(0);for(let ye=0,ve=xe.length;ye<ve;ye++)xe[ye].call(this,K);K.target=null}}};const _lut=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let _seed=1234567;const DEG2RAD$1=Math.PI/180,RAD2DEG=180/Math.PI;function generateUUID(){const fe=Math.random()*4294967295|0,K=Math.random()*4294967295|0,me=Math.random()*4294967295|0,ge=Math.random()*4294967295|0;return(_lut[fe&255]+_lut[fe>>8&255]+_lut[fe>>16&255]+_lut[fe>>24&255]+"-"+_lut[K&255]+_lut[K>>8&255]+"-"+_lut[K>>16&15|64]+_lut[K>>24&255]+"-"+_lut[me&63|128]+_lut[me>>8&255]+"-"+_lut[me>>16&255]+_lut[me>>24&255]+_lut[ge&255]+_lut[ge>>8&255]+_lut[ge>>16&255]+_lut[ge>>24&255]).toLowerCase()}function clamp$1(fe,K,me){return Math.max(K,Math.min(me,fe))}function euclideanModulo(fe,K){return(fe%K+K)%K}function mapLinear(fe,K,me,ge,xe){return ge+(fe-K)*(xe-ge)/(me-K)}function inverseLerp(fe,K,me){return fe!==K?(me-fe)/(K-fe):0}function lerp(fe,K,me){return(1-me)*fe+me*K}function damp(fe,K,me,ge){return lerp(fe,K,1-Math.exp(-me*ge))}function pingpong(fe,K=1){return K-Math.abs(euclideanModulo(fe,K*2)-K)}function smoothstep(fe,K,me){return fe<=K?0:fe>=me?1:(fe=(fe-K)/(me-K),fe*fe*(3-2*fe))}function smootherstep(fe,K,me){return fe<=K?0:fe>=me?1:(fe=(fe-K)/(me-K),fe*fe*fe*(fe*(fe*6-15)+10))}function randInt(fe,K){return fe+Math.floor(Math.random()*(K-fe+1))}function randFloat(fe,K){return fe+Math.random()*(K-fe)}function randFloatSpread(fe){return fe*(.5-Math.random())}function seededRandom(fe){fe!==void 0&&(_seed=fe);let K=_seed+=1831565813;return K=Math.imul(K^K>>>15,K|1),K^=K+Math.imul(K^K>>>7,K|61),((K^K>>>14)>>>0)/4294967296}function degToRad(fe){return fe*DEG2RAD$1}function radToDeg(fe){return fe*RAD2DEG}function isPowerOfTwo(fe){return(fe&fe-1)===0&&fe!==0}function ceilPowerOfTwo(fe){return Math.pow(2,Math.ceil(Math.log(fe)/Math.LN2))}function floorPowerOfTwo(fe){return Math.pow(2,Math.floor(Math.log(fe)/Math.LN2))}function setQuaternionFromProperEuler(fe,K,me,ge,xe){const ye=Math.cos,ve=Math.sin,_e=ye(me/2),Ee=ve(me/2),be=ye((K+ge)/2),Ae=ve((K+ge)/2),Se=ye((K-ge)/2),Ce=ve((K-ge)/2),Te=ye((ge-K)/2),Re=ve((ge-K)/2);switch(xe){case"XYX":fe.set(_e*Ae,Ee*Se,Ee*Ce,_e*be);break;case"YZY":fe.set(Ee*Ce,_e*Ae,Ee*Se,_e*be);break;case"ZXZ":fe.set(Ee*Se,Ee*Ce,_e*Ae,_e*be);break;case"XZX":fe.set(_e*Ae,Ee*Re,Ee*Te,_e*be);break;case"YXY":fe.set(Ee*Te,_e*Ae,Ee*Re,_e*be);break;case"ZYZ":fe.set(Ee*Re,Ee*Te,_e*Ae,_e*be);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+xe)}}function denormalize(fe,K){switch(K.constructor){case Float32Array:return fe;case Uint32Array:return fe/4294967295;case Uint16Array:return fe/65535;case Uint8Array:return fe/255;case Int32Array:return Math.max(fe/2147483647,-1);case Int16Array:return Math.max(fe/32767,-1);case Int8Array:return Math.max(fe/127,-1);default:throw new Error("Invalid component type.")}}function normalize$2(fe,K){switch(K.constructor){case Float32Array:return fe;case Uint32Array:return Math.round(fe*4294967295);case Uint16Array:return Math.round(fe*65535);case Uint8Array:return Math.round(fe*255);case Int32Array:return Math.round(fe*2147483647);case Int16Array:return Math.round(fe*32767);case Int8Array:return Math.round(fe*127);default:throw new Error("Invalid component type.")}}const MathUtils={DEG2RAD:DEG2RAD$1,RAD2DEG,generateUUID,clamp:clamp$1,euclideanModulo,mapLinear,inverseLerp,lerp,damp,pingpong,smoothstep,smootherstep,randInt,randFloat,randFloatSpread,seededRandom,degToRad,radToDeg,isPowerOfTwo,ceilPowerOfTwo,floorPowerOfTwo,setQuaternionFromProperEuler,normalize:normalize$2,denormalize};class Vector2{constructor(K=0,me=0){Vector2.prototype.isVector2=!0,this.x=K,this.y=me}get width(){return this.x}set width(K){this.x=K}get height(){return this.y}set height(K){this.y=K}set(K,me){return this.x=K,this.y=me,this}setScalar(K){return this.x=K,this.y=K,this}setX(K){return this.x=K,this}setY(K){return this.y=K,this}setComponent(K,me){switch(K){case 0:this.x=me;break;case 1:this.y=me;break;default:throw new Error("index is out of range: "+K)}return this}getComponent(K){switch(K){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+K)}}clone(){return new this.constructor(this.x,this.y)}copy(K){return this.x=K.x,this.y=K.y,this}add(K){return this.x+=K.x,this.y+=K.y,this}addScalar(K){return this.x+=K,this.y+=K,this}addVectors(K,me){return this.x=K.x+me.x,this.y=K.y+me.y,this}addScaledVector(K,me){return this.x+=K.x*me,this.y+=K.y*me,this}sub(K){return this.x-=K.x,this.y-=K.y,this}subScalar(K){return this.x-=K,this.y-=K,this}subVectors(K,me){return this.x=K.x-me.x,this.y=K.y-me.y,this}multiply(K){return this.x*=K.x,this.y*=K.y,this}multiplyScalar(K){return this.x*=K,this.y*=K,this}divide(K){return this.x/=K.x,this.y/=K.y,this}divideScalar(K){return this.multiplyScalar(1/K)}applyMatrix3(K){const me=this.x,ge=this.y,xe=K.elements;return this.x=xe[0]*me+xe[3]*ge+xe[6],this.y=xe[1]*me+xe[4]*ge+xe[7],this}min(K){return this.x=Math.min(this.x,K.x),this.y=Math.min(this.y,K.y),this}max(K){return this.x=Math.max(this.x,K.x),this.y=Math.max(this.y,K.y),this}clamp(K,me){return this.x=clamp$1(this.x,K.x,me.x),this.y=clamp$1(this.y,K.y,me.y),this}clampScalar(K,me){return this.x=clamp$1(this.x,K,me),this.y=clamp$1(this.y,K,me),this}clampLength(K,me){const ge=this.length();return this.divideScalar(ge||1).multiplyScalar(clamp$1(ge,K,me))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(K){return this.x*K.x+this.y*K.y}cross(K){return this.x*K.y-this.y*K.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(K){const me=Math.sqrt(this.lengthSq()*K.lengthSq());if(me===0)return Math.PI/2;const ge=this.dot(K)/me;return Math.acos(clamp$1(ge,-1,1))}distanceTo(K){return Math.sqrt(this.distanceToSquared(K))}distanceToSquared(K){const me=this.x-K.x,ge=this.y-K.y;return me*me+ge*ge}manhattanDistanceTo(K){return Math.abs(this.x-K.x)+Math.abs(this.y-K.y)}setLength(K){return this.normalize().multiplyScalar(K)}lerp(K,me){return this.x+=(K.x-this.x)*me,this.y+=(K.y-this.y)*me,this}lerpVectors(K,me,ge){return this.x=K.x+(me.x-K.x)*ge,this.y=K.y+(me.y-K.y)*ge,this}equals(K){return K.x===this.x&&K.y===this.y}fromArray(K,me=0){return this.x=K[me],this.y=K[me+1],this}toArray(K=[],me=0){return K[me]=this.x,K[me+1]=this.y,K}fromBufferAttribute(K,me){return this.x=K.getX(me),this.y=K.getY(me),this}rotateAround(K,me){const ge=Math.cos(me),xe=Math.sin(me),ye=this.x-K.x,ve=this.y-K.y;return this.x=ye*ge-ve*xe+K.x,this.y=ye*xe+ve*ge+K.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Matrix3{constructor(K,me,ge,xe,ye,ve,_e,Ee,be){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],K!==void 0&&this.set(K,me,ge,xe,ye,ve,_e,Ee,be)}set(K,me,ge,xe,ye,ve,_e,Ee,be){const Ae=this.elements;return Ae[0]=K,Ae[1]=xe,Ae[2]=_e,Ae[3]=me,Ae[4]=ye,Ae[5]=Ee,Ae[6]=ge,Ae[7]=ve,Ae[8]=be,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(K){const me=this.elements,ge=K.elements;return me[0]=ge[0],me[1]=ge[1],me[2]=ge[2],me[3]=ge[3],me[4]=ge[4],me[5]=ge[5],me[6]=ge[6],me[7]=ge[7],me[8]=ge[8],this}extractBasis(K,me,ge){return K.setFromMatrix3Column(this,0),me.setFromMatrix3Column(this,1),ge.setFromMatrix3Column(this,2),this}setFromMatrix4(K){const me=K.elements;return this.set(me[0],me[4],me[8],me[1],me[5],me[9],me[2],me[6],me[10]),this}multiply(K){return this.multiplyMatrices(this,K)}premultiply(K){return this.multiplyMatrices(K,this)}multiplyMatrices(K,me){const ge=K.elements,xe=me.elements,ye=this.elements,ve=ge[0],_e=ge[3],Ee=ge[6],be=ge[1],Ae=ge[4],Se=ge[7],Ce=ge[2],Te=ge[5],Re=ge[8],De=xe[0],Ie=xe[3],Be=xe[6],Le=xe[1],Oe=xe[4],Fe=xe[7],Ue=xe[2],Ne=xe[5],He=xe[8];return ye[0]=ve*De+_e*Le+Ee*Ue,ye[3]=ve*Ie+_e*Oe+Ee*Ne,ye[6]=ve*Be+_e*Fe+Ee*He,ye[1]=be*De+Ae*Le+Se*Ue,ye[4]=be*Ie+Ae*Oe+Se*Ne,ye[7]=be*Be+Ae*Fe+Se*He,ye[2]=Ce*De+Te*Le+Re*Ue,ye[5]=Ce*Ie+Te*Oe+Re*Ne,ye[8]=Ce*Be+Te*Fe+Re*He,this}multiplyScalar(K){const me=this.elements;return me[0]*=K,me[3]*=K,me[6]*=K,me[1]*=K,me[4]*=K,me[7]*=K,me[2]*=K,me[5]*=K,me[8]*=K,this}determinant(){const K=this.elements,me=K[0],ge=K[1],xe=K[2],ye=K[3],ve=K[4],_e=K[5],Ee=K[6],be=K[7],Ae=K[8];return me*ve*Ae-me*_e*be-ge*ye*Ae+ge*_e*Ee+xe*ye*be-xe*ve*Ee}invert(){const K=this.elements,me=K[0],ge=K[1],xe=K[2],ye=K[3],ve=K[4],_e=K[5],Ee=K[6],be=K[7],Ae=K[8],Se=Ae*ve-_e*be,Ce=_e*Ee-Ae*ye,Te=be*ye-ve*Ee,Re=me*Se+ge*Ce+xe*Te;if(Re===0)return this.set(0,0,0,0,0,0,0,0,0);const De=1/Re;return K[0]=Se*De,K[1]=(xe*be-Ae*ge)*De,K[2]=(_e*ge-xe*ve)*De,K[3]=Ce*De,K[4]=(Ae*me-xe*Ee)*De,K[5]=(xe*ye-_e*me)*De,K[6]=Te*De,K[7]=(ge*Ee-be*me)*De,K[8]=(ve*me-ge*ye)*De,this}transpose(){let K;const me=this.elements;return K=me[1],me[1]=me[3],me[3]=K,K=me[2],me[2]=me[6],me[6]=K,K=me[5],me[5]=me[7],me[7]=K,this}getNormalMatrix(K){return this.setFromMatrix4(K).invert().transpose()}transposeIntoArray(K){const me=this.elements;return K[0]=me[0],K[1]=me[3],K[2]=me[6],K[3]=me[1],K[4]=me[4],K[5]=me[7],K[6]=me[2],K[7]=me[5],K[8]=me[8],this}setUvTransform(K,me,ge,xe,ye,ve,_e){const Ee=Math.cos(ye),be=Math.sin(ye);return this.set(ge*Ee,ge*be,-ge*(Ee*ve+be*_e)+ve+K,-xe*be,xe*Ee,-xe*(-be*ve+Ee*_e)+_e+me,0,0,1),this}scale(K,me){return this.premultiply(_m3.makeScale(K,me)),this}rotate(K){return this.premultiply(_m3.makeRotation(-K)),this}translate(K,me){return this.premultiply(_m3.makeTranslation(K,me)),this}makeTranslation(K,me){return K.isVector2?this.set(1,0,K.x,0,1,K.y,0,0,1):this.set(1,0,K,0,1,me,0,0,1),this}makeRotation(K){const me=Math.cos(K),ge=Math.sin(K);return this.set(me,-ge,0,ge,me,0,0,0,1),this}makeScale(K,me){return this.set(K,0,0,0,me,0,0,0,1),this}equals(K){const me=this.elements,ge=K.elements;for(let xe=0;xe<9;xe++)if(me[xe]!==ge[xe])return!1;return!0}fromArray(K,me=0){for(let ge=0;ge<9;ge++)this.elements[ge]=K[ge+me];return this}toArray(K=[],me=0){const ge=this.elements;return K[me]=ge[0],K[me+1]=ge[1],K[me+2]=ge[2],K[me+3]=ge[3],K[me+4]=ge[4],K[me+5]=ge[5],K[me+6]=ge[6],K[me+7]=ge[7],K[me+8]=ge[8],K}clone(){return new this.constructor().fromArray(this.elements)}}const _m3=new Matrix3;function arrayNeedsUint32(fe){for(let K=fe.length-1;K>=0;--K)if(fe[K]>=65535)return!0;return!1}const TYPED_ARRAYS={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function getTypedArray(fe,K){return new TYPED_ARRAYS[fe](K)}function createElementNS(fe){return document.createElementNS("http://www.w3.org/1999/xhtml",fe)}function createCanvasElement(){const fe=createElementNS("canvas");return fe.style.display="block",fe}const _cache={};function warnOnce(fe){fe in _cache||(_cache[fe]=!0,console.warn(fe))}function probeAsync(fe,K,me){return new Promise(function(ge,xe){function ye(){switch(fe.clientWaitSync(K,fe.SYNC_FLUSH_COMMANDS_BIT,0)){case fe.WAIT_FAILED:xe();break;case fe.TIMEOUT_EXPIRED:setTimeout(ye,me);break;default:ge()}}setTimeout(ye,me)})}function toNormalizedProjectionMatrix(fe){const K=fe.elements;K[2]=.5*K[2]+.5*K[3],K[6]=.5*K[6]+.5*K[7],K[10]=.5*K[10]+.5*K[11],K[14]=.5*K[14]+.5*K[15]}function toReversedProjectionMatrix(fe){const K=fe.elements;K[11]===-1?(K[10]=-K[10]-1,K[14]=-K[14]):(K[10]=-K[10],K[14]=-K[14]+1)}const LINEAR_REC709_TO_XYZ=new Matrix3().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),XYZ_TO_LINEAR_REC709=new Matrix3().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const fe={enabled:!0,workingColorSpace:LinearSRGBColorSpace,spaces:{},convert:function(xe,ye,ve){return this.enabled===!1||ye===ve||!ye||!ve||(this.spaces[ye].transfer===SRGBTransfer&&(xe.r=SRGBToLinear(xe.r),xe.g=SRGBToLinear(xe.g),xe.b=SRGBToLinear(xe.b)),this.spaces[ye].primaries!==this.spaces[ve].primaries&&(xe.applyMatrix3(this.spaces[ye].toXYZ),xe.applyMatrix3(this.spaces[ve].fromXYZ)),this.spaces[ve].transfer===SRGBTransfer&&(xe.r=LinearToSRGB(xe.r),xe.g=LinearToSRGB(xe.g),xe.b=LinearToSRGB(xe.b))),xe},fromWorkingColorSpace:function(xe,ye){return this.convert(xe,this.workingColorSpace,ye)},toWorkingColorSpace:function(xe,ye){return this.convert(xe,ye,this.workingColorSpace)},getPrimaries:function(xe){return this.spaces[xe].primaries},getTransfer:function(xe){return xe===NoColorSpace?LinearTransfer:this.spaces[xe].transfer},getLuminanceCoefficients:function(xe,ye=this.workingColorSpace){return xe.fromArray(this.spaces[ye].luminanceCoefficients)},define:function(xe){Object.assign(this.spaces,xe)},_getMatrix:function(xe,ye,ve){return xe.copy(this.spaces[ye].toXYZ).multiply(this.spaces[ve].fromXYZ)},_getDrawingBufferColorSpace:function(xe){return this.spaces[xe].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(xe=this.workingColorSpace){return this.spaces[xe].workingColorSpaceConfig.unpackColorSpace}},K=[.64,.33,.3,.6,.15,.06],me=[.2126,.7152,.0722],ge=[.3127,.329];return fe.define({[LinearSRGBColorSpace]:{primaries:K,whitePoint:ge,transfer:LinearTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:me,workingColorSpaceConfig:{unpackColorSpace:SRGBColorSpace},outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}},[SRGBColorSpace]:{primaries:K,whitePoint:ge,transfer:SRGBTransfer,toXYZ:LINEAR_REC709_TO_XYZ,fromXYZ:XYZ_TO_LINEAR_REC709,luminanceCoefficients:me,outputColorSpaceConfig:{drawingBufferColorSpace:SRGBColorSpace}}}),fe}const ColorManagement=createColorManagement();function SRGBToLinear(fe){return fe<.04045?fe*.0773993808:Math.pow(fe*.9478672986+.0521327014,2.4)}function LinearToSRGB(fe){return fe<.0031308?fe*12.92:1.055*Math.pow(fe,.41666)-.055}let _canvas;class ImageUtils{static getDataURL(K){if(/^data:/i.test(K.src)||typeof HTMLCanvasElement>"u")return K.src;let me;if(K instanceof HTMLCanvasElement)me=K;else{_canvas===void 0&&(_canvas=createElementNS("canvas")),_canvas.width=K.width,_canvas.height=K.height;const ge=_canvas.getContext("2d");K instanceof ImageData?ge.putImageData(K,0,0):ge.drawImage(K,0,0,K.width,K.height),me=_canvas}return me.toDataURL("image/png")}static sRGBToLinear(K){if(typeof HTMLImageElement<"u"&&K instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&K instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&K instanceof ImageBitmap){const me=createElementNS("canvas");me.width=K.width,me.height=K.height;const ge=me.getContext("2d");ge.drawImage(K,0,0,K.width,K.height);const xe=ge.getImageData(0,0,K.width,K.height),ye=xe.data;for(let ve=0;ve<ye.length;ve++)ye[ve]=SRGBToLinear(ye[ve]/255)*255;return ge.putImageData(xe,0,0),me}else if(K.data){const me=K.data.slice(0);for(let ge=0;ge<me.length;ge++)me instanceof Uint8Array||me instanceof Uint8ClampedArray?me[ge]=Math.floor(SRGBToLinear(me[ge]/255)*255):me[ge]=SRGBToLinear(me[ge]);return{data:me,width:K.width,height:K.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),K}}let _sourceId=0;class Source{constructor(K=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_sourceId++}),this.uuid=generateUUID(),this.data=K,this.dataReady=!0,this.version=0}set needsUpdate(K){K===!0&&this.version++}toJSON(K){const me=K===void 0||typeof K=="string";if(!me&&K.images[this.uuid]!==void 0)return K.images[this.uuid];const ge={uuid:this.uuid,url:""},xe=this.data;if(xe!==null){let ye;if(Array.isArray(xe)){ye=[];for(let ve=0,_e=xe.length;ve<_e;ve++)xe[ve].isDataTexture?ye.push(serializeImage(xe[ve].image)):ye.push(serializeImage(xe[ve]))}else ye=serializeImage(xe);ge.url=ye}return me||(K.images[this.uuid]=ge),ge}}function serializeImage(fe){return typeof HTMLImageElement<"u"&&fe instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&fe instanceof ImageBitmap?ImageUtils.getDataURL(fe):fe.data?{data:Array.from(fe.data),width:fe.width,height:fe.height,type:fe.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let _textureId=0;class Texture extends EventDispatcher$2{constructor(K=Texture.DEFAULT_IMAGE,me=Texture.DEFAULT_MAPPING,ge=ClampToEdgeWrapping,xe=ClampToEdgeWrapping,ye=LinearFilter,ve=LinearMipmapLinearFilter,_e=RGBAFormat,Ee=UnsignedByteType,be=Texture.DEFAULT_ANISOTROPY,Ae=NoColorSpace){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:_textureId++}),this.uuid=generateUUID(),this.name="",this.source=new Source(K),this.mipmaps=[],this.mapping=me,this.channel=0,this.wrapS=ge,this.wrapT=xe,this.magFilter=ye,this.minFilter=ve,this.anisotropy=be,this.format=_e,this.internalFormat=null,this.type=Ee,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=Ae,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(K=null){this.source.data=K}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(K){return this.name=K.name,this.source=K.source,this.mipmaps=K.mipmaps.slice(0),this.mapping=K.mapping,this.channel=K.channel,this.wrapS=K.wrapS,this.wrapT=K.wrapT,this.magFilter=K.magFilter,this.minFilter=K.minFilter,this.anisotropy=K.anisotropy,this.format=K.format,this.internalFormat=K.internalFormat,this.type=K.type,this.offset.copy(K.offset),this.repeat.copy(K.repeat),this.center.copy(K.center),this.rotation=K.rotation,this.matrixAutoUpdate=K.matrixAutoUpdate,this.matrix.copy(K.matrix),this.generateMipmaps=K.generateMipmaps,this.premultiplyAlpha=K.premultiplyAlpha,this.flipY=K.flipY,this.unpackAlignment=K.unpackAlignment,this.colorSpace=K.colorSpace,this.renderTarget=K.renderTarget,this.isRenderTargetTexture=K.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(K.userData)),this.needsUpdate=!0,this}toJSON(K){const me=K===void 0||typeof K=="string";if(!me&&K.textures[this.uuid]!==void 0)return K.textures[this.uuid];const ge={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(K).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(ge.userData=this.userData),me||(K.textures[this.uuid]=ge),ge}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(K){if(this.mapping!==UVMapping)return K;if(K.applyMatrix3(this.matrix),K.x<0||K.x>1)switch(this.wrapS){case RepeatWrapping:K.x=K.x-Math.floor(K.x);break;case ClampToEdgeWrapping:K.x=K.x<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(K.x)%2)===1?K.x=Math.ceil(K.x)-K.x:K.x=K.x-Math.floor(K.x);break}if(K.y<0||K.y>1)switch(this.wrapT){case RepeatWrapping:K.y=K.y-Math.floor(K.y);break;case ClampToEdgeWrapping:K.y=K.y<0?0:1;break;case MirroredRepeatWrapping:Math.abs(Math.floor(K.y)%2)===1?K.y=Math.ceil(K.y)-K.y:K.y=K.y-Math.floor(K.y);break}return this.flipY&&(K.y=1-K.y),K}set needsUpdate(K){K===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(K){K===!0&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null;Texture.DEFAULT_MAPPING=UVMapping;Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(K=0,me=0,ge=0,xe=1){Vector4.prototype.isVector4=!0,this.x=K,this.y=me,this.z=ge,this.w=xe}get width(){return this.z}set width(K){this.z=K}get height(){return this.w}set height(K){this.w=K}set(K,me,ge,xe){return this.x=K,this.y=me,this.z=ge,this.w=xe,this}setScalar(K){return this.x=K,this.y=K,this.z=K,this.w=K,this}setX(K){return this.x=K,this}setY(K){return this.y=K,this}setZ(K){return this.z=K,this}setW(K){return this.w=K,this}setComponent(K,me){switch(K){case 0:this.x=me;break;case 1:this.y=me;break;case 2:this.z=me;break;case 3:this.w=me;break;default:throw new Error("index is out of range: "+K)}return this}getComponent(K){switch(K){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+K)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(K){return this.x=K.x,this.y=K.y,this.z=K.z,this.w=K.w!==void 0?K.w:1,this}add(K){return this.x+=K.x,this.y+=K.y,this.z+=K.z,this.w+=K.w,this}addScalar(K){return this.x+=K,this.y+=K,this.z+=K,this.w+=K,this}addVectors(K,me){return this.x=K.x+me.x,this.y=K.y+me.y,this.z=K.z+me.z,this.w=K.w+me.w,this}addScaledVector(K,me){return this.x+=K.x*me,this.y+=K.y*me,this.z+=K.z*me,this.w+=K.w*me,this}sub(K){return this.x-=K.x,this.y-=K.y,this.z-=K.z,this.w-=K.w,this}subScalar(K){return this.x-=K,this.y-=K,this.z-=K,this.w-=K,this}subVectors(K,me){return this.x=K.x-me.x,this.y=K.y-me.y,this.z=K.z-me.z,this.w=K.w-me.w,this}multiply(K){return this.x*=K.x,this.y*=K.y,this.z*=K.z,this.w*=K.w,this}multiplyScalar(K){return this.x*=K,this.y*=K,this.z*=K,this.w*=K,this}applyMatrix4(K){const me=this.x,ge=this.y,xe=this.z,ye=this.w,ve=K.elements;return this.x=ve[0]*me+ve[4]*ge+ve[8]*xe+ve[12]*ye,this.y=ve[1]*me+ve[5]*ge+ve[9]*xe+ve[13]*ye,this.z=ve[2]*me+ve[6]*ge+ve[10]*xe+ve[14]*ye,this.w=ve[3]*me+ve[7]*ge+ve[11]*xe+ve[15]*ye,this}divide(K){return this.x/=K.x,this.y/=K.y,this.z/=K.z,this.w/=K.w,this}divideScalar(K){return this.multiplyScalar(1/K)}setAxisAngleFromQuaternion(K){this.w=2*Math.acos(K.w);const me=Math.sqrt(1-K.w*K.w);return me<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=K.x/me,this.y=K.y/me,this.z=K.z/me),this}setAxisAngleFromRotationMatrix(K){let me,ge,xe,ye;const Ee=K.elements,be=Ee[0],Ae=Ee[4],Se=Ee[8],Ce=Ee[1],Te=Ee[5],Re=Ee[9],De=Ee[2],Ie=Ee[6],Be=Ee[10];if(Math.abs(Ae-Ce)<.01&&Math.abs(Se-De)<.01&&Math.abs(Re-Ie)<.01){if(Math.abs(Ae+Ce)<.1&&Math.abs(Se+De)<.1&&Math.abs(Re+Ie)<.1&&Math.abs(be+Te+Be-3)<.1)return this.set(1,0,0,0),this;me=Math.PI;const Oe=(be+1)/2,Fe=(Te+1)/2,Ue=(Be+1)/2,Ne=(Ae+Ce)/4,He=(Se+De)/4,ze=(Re+Ie)/4;return Oe>Fe&&Oe>Ue?Oe<.01?(ge=0,xe=.707106781,ye=.707106781):(ge=Math.sqrt(Oe),xe=Ne/ge,ye=He/ge):Fe>Ue?Fe<.01?(ge=.707106781,xe=0,ye=.707106781):(xe=Math.sqrt(Fe),ge=Ne/xe,ye=ze/xe):Ue<.01?(ge=.707106781,xe=.707106781,ye=0):(ye=Math.sqrt(Ue),ge=He/ye,xe=ze/ye),this.set(ge,xe,ye,me),this}let Le=Math.sqrt((Ie-Re)*(Ie-Re)+(Se-De)*(Se-De)+(Ce-Ae)*(Ce-Ae));return Math.abs(Le)<.001&&(Le=1),this.x=(Ie-Re)/Le,this.y=(Se-De)/Le,this.z=(Ce-Ae)/Le,this.w=Math.acos((be+Te+Be-1)/2),this}setFromMatrixPosition(K){const me=K.elements;return this.x=me[12],this.y=me[13],this.z=me[14],this.w=me[15],this}min(K){return this.x=Math.min(this.x,K.x),this.y=Math.min(this.y,K.y),this.z=Math.min(this.z,K.z),this.w=Math.min(this.w,K.w),this}max(K){return this.x=Math.max(this.x,K.x),this.y=Math.max(this.y,K.y),this.z=Math.max(this.z,K.z),this.w=Math.max(this.w,K.w),this}clamp(K,me){return this.x=clamp$1(this.x,K.x,me.x),this.y=clamp$1(this.y,K.y,me.y),this.z=clamp$1(this.z,K.z,me.z),this.w=clamp$1(this.w,K.w,me.w),this}clampScalar(K,me){return this.x=clamp$1(this.x,K,me),this.y=clamp$1(this.y,K,me),this.z=clamp$1(this.z,K,me),this.w=clamp$1(this.w,K,me),this}clampLength(K,me){const ge=this.length();return this.divideScalar(ge||1).multiplyScalar(clamp$1(ge,K,me))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(K){return this.x*K.x+this.y*K.y+this.z*K.z+this.w*K.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(K){return this.normalize().multiplyScalar(K)}lerp(K,me){return this.x+=(K.x-this.x)*me,this.y+=(K.y-this.y)*me,this.z+=(K.z-this.z)*me,this.w+=(K.w-this.w)*me,this}lerpVectors(K,me,ge){return this.x=K.x+(me.x-K.x)*ge,this.y=K.y+(me.y-K.y)*ge,this.z=K.z+(me.z-K.z)*ge,this.w=K.w+(me.w-K.w)*ge,this}equals(K){return K.x===this.x&&K.y===this.y&&K.z===this.z&&K.w===this.w}fromArray(K,me=0){return this.x=K[me],this.y=K[me+1],this.z=K[me+2],this.w=K[me+3],this}toArray(K=[],me=0){return K[me]=this.x,K[me+1]=this.y,K[me+2]=this.z,K[me+3]=this.w,K}fromBufferAttribute(K,me){return this.x=K.getX(me),this.y=K.getY(me),this.z=K.getZ(me),this.w=K.getW(me),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher$2{constructor(K=1,me=1,ge={}){super(),this.isRenderTarget=!0,this.width=K,this.height=me,this.depth=1,this.scissor=new Vector4(0,0,K,me),this.scissorTest=!1,this.viewport=new Vector4(0,0,K,me);const xe={width:K,height:me,depth:1};ge=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:LinearFilter,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},ge);const ye=new Texture(xe,ge.mapping,ge.wrapS,ge.wrapT,ge.magFilter,ge.minFilter,ge.format,ge.type,ge.anisotropy,ge.colorSpace);ye.flipY=!1,ye.generateMipmaps=ge.generateMipmaps,ye.internalFormat=ge.internalFormat,this.textures=[];const ve=ge.count;for(let _e=0;_e<ve;_e++)this.textures[_e]=ye.clone(),this.textures[_e].isRenderTargetTexture=!0,this.textures[_e].renderTarget=this;this.depthBuffer=ge.depthBuffer,this.stencilBuffer=ge.stencilBuffer,this.resolveDepthBuffer=ge.resolveDepthBuffer,this.resolveStencilBuffer=ge.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=ge.depthTexture,this.samples=ge.samples}get texture(){return this.textures[0]}set texture(K){this.textures[0]=K}set depthTexture(K){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),K!==null&&(K.renderTarget=this),this._depthTexture=K}get depthTexture(){return this._depthTexture}setSize(K,me,ge=1){if(this.width!==K||this.height!==me||this.depth!==ge){this.width=K,this.height=me,this.depth=ge;for(let xe=0,ye=this.textures.length;xe<ye;xe++)this.textures[xe].image.width=K,this.textures[xe].image.height=me,this.textures[xe].image.depth=ge;this.dispose()}this.viewport.set(0,0,K,me),this.scissor.set(0,0,K,me)}clone(){return new this.constructor().copy(this)}copy(K){this.width=K.width,this.height=K.height,this.depth=K.depth,this.scissor.copy(K.scissor),this.scissorTest=K.scissorTest,this.viewport.copy(K.viewport),this.textures.length=0;for(let me=0,ge=K.textures.length;me<ge;me++){this.textures[me]=K.textures[me].clone(),this.textures[me].isRenderTargetTexture=!0,this.textures[me].renderTarget=this;const xe=Object.assign({},K.textures[me].image);this.textures[me].source=new Source(xe)}return this.depthBuffer=K.depthBuffer,this.stencilBuffer=K.stencilBuffer,this.resolveDepthBuffer=K.resolveDepthBuffer,this.resolveStencilBuffer=K.resolveStencilBuffer,K.depthTexture!==null&&(this.depthTexture=K.depthTexture.clone()),this.samples=K.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(K=1,me=1,ge={}){super(K,me,ge),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(K=null,me=1,ge=1,xe=1){super(null),this.isDataArrayTexture=!0,this.image={data:K,width:me,height:ge,depth:xe},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(K){this.layerUpdates.add(K)}clearLayerUpdates(){this.layerUpdates.clear()}}class WebGLArrayRenderTarget extends WebGLRenderTarget{constructor(K=1,me=1,ge=1,xe={}){super(K,me,xe),this.isWebGLArrayRenderTarget=!0,this.depth=ge,this.texture=new DataArrayTexture(null,K,me,ge),this.texture.isRenderTargetTexture=!0}}class Data3DTexture extends Texture{constructor(K=null,me=1,ge=1,xe=1){super(null),this.isData3DTexture=!0,this.image={data:K,width:me,height:ge,depth:xe},this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.wrapR=ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class WebGL3DRenderTarget extends WebGLRenderTarget{constructor(K=1,me=1,ge=1,xe={}){super(K,me,xe),this.isWebGL3DRenderTarget=!0,this.depth=ge,this.texture=new Data3DTexture(null,K,me,ge),this.texture.isRenderTargetTexture=!0}}class Quaternion{constructor(K=0,me=0,ge=0,xe=1){this.isQuaternion=!0,this._x=K,this._y=me,this._z=ge,this._w=xe}static slerpFlat(K,me,ge,xe,ye,ve,_e){let Ee=ge[xe+0],be=ge[xe+1],Ae=ge[xe+2],Se=ge[xe+3];const Ce=ye[ve+0],Te=ye[ve+1],Re=ye[ve+2],De=ye[ve+3];if(_e===0){K[me+0]=Ee,K[me+1]=be,K[me+2]=Ae,K[me+3]=Se;return}if(_e===1){K[me+0]=Ce,K[me+1]=Te,K[me+2]=Re,K[me+3]=De;return}if(Se!==De||Ee!==Ce||be!==Te||Ae!==Re){let Ie=1-_e;const Be=Ee*Ce+be*Te+Ae*Re+Se*De,Le=Be>=0?1:-1,Oe=1-Be*Be;if(Oe>Number.EPSILON){const Ue=Math.sqrt(Oe),Ne=Math.atan2(Ue,Be*Le);Ie=Math.sin(Ie*Ne)/Ue,_e=Math.sin(_e*Ne)/Ue}const Fe=_e*Le;if(Ee=Ee*Ie+Ce*Fe,be=be*Ie+Te*Fe,Ae=Ae*Ie+Re*Fe,Se=Se*Ie+De*Fe,Ie===1-_e){const Ue=1/Math.sqrt(Ee*Ee+be*be+Ae*Ae+Se*Se);Ee*=Ue,be*=Ue,Ae*=Ue,Se*=Ue}}K[me]=Ee,K[me+1]=be,K[me+2]=Ae,K[me+3]=Se}static multiplyQuaternionsFlat(K,me,ge,xe,ye,ve){const _e=ge[xe],Ee=ge[xe+1],be=ge[xe+2],Ae=ge[xe+3],Se=ye[ve],Ce=ye[ve+1],Te=ye[ve+2],Re=ye[ve+3];return K[me]=_e*Re+Ae*Se+Ee*Te-be*Ce,K[me+1]=Ee*Re+Ae*Ce+be*Se-_e*Te,K[me+2]=be*Re+Ae*Te+_e*Ce-Ee*Se,K[me+3]=Ae*Re-_e*Se-Ee*Ce-be*Te,K}get x(){return this._x}set x(K){this._x=K,this._onChangeCallback()}get y(){return this._y}set y(K){this._y=K,this._onChangeCallback()}get z(){return this._z}set z(K){this._z=K,this._onChangeCallback()}get w(){return this._w}set w(K){this._w=K,this._onChangeCallback()}set(K,me,ge,xe){return this._x=K,this._y=me,this._z=ge,this._w=xe,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(K){return this._x=K.x,this._y=K.y,this._z=K.z,this._w=K.w,this._onChangeCallback(),this}setFromEuler(K,me=!0){const ge=K._x,xe=K._y,ye=K._z,ve=K._order,_e=Math.cos,Ee=Math.sin,be=_e(ge/2),Ae=_e(xe/2),Se=_e(ye/2),Ce=Ee(ge/2),Te=Ee(xe/2),Re=Ee(ye/2);switch(ve){case"XYZ":this._x=Ce*Ae*Se+be*Te*Re,this._y=be*Te*Se-Ce*Ae*Re,this._z=be*Ae*Re+Ce*Te*Se,this._w=be*Ae*Se-Ce*Te*Re;break;case"YXZ":this._x=Ce*Ae*Se+be*Te*Re,this._y=be*Te*Se-Ce*Ae*Re,this._z=be*Ae*Re-Ce*Te*Se,this._w=be*Ae*Se+Ce*Te*Re;break;case"ZXY":this._x=Ce*Ae*Se-be*Te*Re,this._y=be*Te*Se+Ce*Ae*Re,this._z=be*Ae*Re+Ce*Te*Se,this._w=be*Ae*Se-Ce*Te*Re;break;case"ZYX":this._x=Ce*Ae*Se-be*Te*Re,this._y=be*Te*Se+Ce*Ae*Re,this._z=be*Ae*Re-Ce*Te*Se,this._w=be*Ae*Se+Ce*Te*Re;break;case"YZX":this._x=Ce*Ae*Se+be*Te*Re,this._y=be*Te*Se+Ce*Ae*Re,this._z=be*Ae*Re-Ce*Te*Se,this._w=be*Ae*Se-Ce*Te*Re;break;case"XZY":this._x=Ce*Ae*Se-be*Te*Re,this._y=be*Te*Se-Ce*Ae*Re,this._z=be*Ae*Re+Ce*Te*Se,this._w=be*Ae*Se+Ce*Te*Re;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+ve)}return me===!0&&this._onChangeCallback(),this}setFromAxisAngle(K,me){const ge=me/2,xe=Math.sin(ge);return this._x=K.x*xe,this._y=K.y*xe,this._z=K.z*xe,this._w=Math.cos(ge),this._onChangeCallback(),this}setFromRotationMatrix(K){const me=K.elements,ge=me[0],xe=me[4],ye=me[8],ve=me[1],_e=me[5],Ee=me[9],be=me[2],Ae=me[6],Se=me[10],Ce=ge+_e+Se;if(Ce>0){const Te=.5/Math.sqrt(Ce+1);this._w=.25/Te,this._x=(Ae-Ee)*Te,this._y=(ye-be)*Te,this._z=(ve-xe)*Te}else if(ge>_e&&ge>Se){const Te=2*Math.sqrt(1+ge-_e-Se);this._w=(Ae-Ee)/Te,this._x=.25*Te,this._y=(xe+ve)/Te,this._z=(ye+be)/Te}else if(_e>Se){const Te=2*Math.sqrt(1+_e-ge-Se);this._w=(ye-be)/Te,this._x=(xe+ve)/Te,this._y=.25*Te,this._z=(Ee+Ae)/Te}else{const Te=2*Math.sqrt(1+Se-ge-_e);this._w=(ve-xe)/Te,this._x=(ye+be)/Te,this._y=(Ee+Ae)/Te,this._z=.25*Te}return this._onChangeCallback(),this}setFromUnitVectors(K,me){let ge=K.dot(me)+1;return ge<Number.EPSILON?(ge=0,Math.abs(K.x)>Math.abs(K.z)?(this._x=-K.y,this._y=K.x,this._z=0,this._w=ge):(this._x=0,this._y=-K.z,this._z=K.y,this._w=ge)):(this._x=K.y*me.z-K.z*me.y,this._y=K.z*me.x-K.x*me.z,this._z=K.x*me.y-K.y*me.x,this._w=ge),this.normalize()}angleTo(K){return 2*Math.acos(Math.abs(clamp$1(this.dot(K),-1,1)))}rotateTowards(K,me){const ge=this.angleTo(K);if(ge===0)return this;const xe=Math.min(1,me/ge);return this.slerp(K,xe),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(K){return this._x*K._x+this._y*K._y+this._z*K._z+this._w*K._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let K=this.length();return K===0?(this._x=0,this._y=0,this._z=0,this._w=1):(K=1/K,this._x=this._x*K,this._y=this._y*K,this._z=this._z*K,this._w=this._w*K),this._onChangeCallback(),this}multiply(K){return this.multiplyQuaternions(this,K)}premultiply(K){return this.multiplyQuaternions(K,this)}multiplyQuaternions(K,me){const ge=K._x,xe=K._y,ye=K._z,ve=K._w,_e=me._x,Ee=me._y,be=me._z,Ae=me._w;return this._x=ge*Ae+ve*_e+xe*be-ye*Ee,this._y=xe*Ae+ve*Ee+ye*_e-ge*be,this._z=ye*Ae+ve*be+ge*Ee-xe*_e,this._w=ve*Ae-ge*_e-xe*Ee-ye*be,this._onChangeCallback(),this}slerp(K,me){if(me===0)return this;if(me===1)return this.copy(K);const ge=this._x,xe=this._y,ye=this._z,ve=this._w;let _e=ve*K._w+ge*K._x+xe*K._y+ye*K._z;if(_e<0?(this._w=-K._w,this._x=-K._x,this._y=-K._y,this._z=-K._z,_e=-_e):this.copy(K),_e>=1)return this._w=ve,this._x=ge,this._y=xe,this._z=ye,this;const Ee=1-_e*_e;if(Ee<=Number.EPSILON){const Te=1-me;return this._w=Te*ve+me*this._w,this._x=Te*ge+me*this._x,this._y=Te*xe+me*this._y,this._z=Te*ye+me*this._z,this.normalize(),this}const be=Math.sqrt(Ee),Ae=Math.atan2(be,_e),Se=Math.sin((1-me)*Ae)/be,Ce=Math.sin(me*Ae)/be;return this._w=ve*Se+this._w*Ce,this._x=ge*Se+this._x*Ce,this._y=xe*Se+this._y*Ce,this._z=ye*Se+this._z*Ce,this._onChangeCallback(),this}slerpQuaternions(K,me,ge){return this.copy(K).slerp(me,ge)}random(){const K=2*Math.PI*Math.random(),me=2*Math.PI*Math.random(),ge=Math.random(),xe=Math.sqrt(1-ge),ye=Math.sqrt(ge);return this.set(xe*Math.sin(K),xe*Math.cos(K),ye*Math.sin(me),ye*Math.cos(me))}equals(K){return K._x===this._x&&K._y===this._y&&K._z===this._z&&K._w===this._w}fromArray(K,me=0){return this._x=K[me],this._y=K[me+1],this._z=K[me+2],this._w=K[me+3],this._onChangeCallback(),this}toArray(K=[],me=0){return K[me]=this._x,K[me+1]=this._y,K[me+2]=this._z,K[me+3]=this._w,K}fromBufferAttribute(K,me){return this._x=K.getX(me),this._y=K.getY(me),this._z=K.getZ(me),this._w=K.getW(me),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(K){return this._onChangeCallback=K,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(K=0,me=0,ge=0){Vector3.prototype.isVector3=!0,this.x=K,this.y=me,this.z=ge}set(K,me,ge){return ge===void 0&&(ge=this.z),this.x=K,this.y=me,this.z=ge,this}setScalar(K){return this.x=K,this.y=K,this.z=K,this}setX(K){return this.x=K,this}setY(K){return this.y=K,this}setZ(K){return this.z=K,this}setComponent(K,me){switch(K){case 0:this.x=me;break;case 1:this.y=me;break;case 2:this.z=me;break;default:throw new Error("index is out of range: "+K)}return this}getComponent(K){switch(K){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+K)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(K){return this.x=K.x,this.y=K.y,this.z=K.z,this}add(K){return this.x+=K.x,this.y+=K.y,this.z+=K.z,this}addScalar(K){return this.x+=K,this.y+=K,this.z+=K,this}addVectors(K,me){return this.x=K.x+me.x,this.y=K.y+me.y,this.z=K.z+me.z,this}addScaledVector(K,me){return this.x+=K.x*me,this.y+=K.y*me,this.z+=K.z*me,this}sub(K){return this.x-=K.x,this.y-=K.y,this.z-=K.z,this}subScalar(K){return this.x-=K,this.y-=K,this.z-=K,this}subVectors(K,me){return this.x=K.x-me.x,this.y=K.y-me.y,this.z=K.z-me.z,this}multiply(K){return this.x*=K.x,this.y*=K.y,this.z*=K.z,this}multiplyScalar(K){return this.x*=K,this.y*=K,this.z*=K,this}multiplyVectors(K,me){return this.x=K.x*me.x,this.y=K.y*me.y,this.z=K.z*me.z,this}applyEuler(K){return this.applyQuaternion(_quaternion$4.setFromEuler(K))}applyAxisAngle(K,me){return this.applyQuaternion(_quaternion$4.setFromAxisAngle(K,me))}applyMatrix3(K){const me=this.x,ge=this.y,xe=this.z,ye=K.elements;return this.x=ye[0]*me+ye[3]*ge+ye[6]*xe,this.y=ye[1]*me+ye[4]*ge+ye[7]*xe,this.z=ye[2]*me+ye[5]*ge+ye[8]*xe,this}applyNormalMatrix(K){return this.applyMatrix3(K).normalize()}applyMatrix4(K){const me=this.x,ge=this.y,xe=this.z,ye=K.elements,ve=1/(ye[3]*me+ye[7]*ge+ye[11]*xe+ye[15]);return this.x=(ye[0]*me+ye[4]*ge+ye[8]*xe+ye[12])*ve,this.y=(ye[1]*me+ye[5]*ge+ye[9]*xe+ye[13])*ve,this.z=(ye[2]*me+ye[6]*ge+ye[10]*xe+ye[14])*ve,this}applyQuaternion(K){const me=this.x,ge=this.y,xe=this.z,ye=K.x,ve=K.y,_e=K.z,Ee=K.w,be=2*(ve*xe-_e*ge),Ae=2*(_e*me-ye*xe),Se=2*(ye*ge-ve*me);return this.x=me+Ee*be+ve*Se-_e*Ae,this.y=ge+Ee*Ae+_e*be-ye*Se,this.z=xe+Ee*Se+ye*Ae-ve*be,this}project(K){return this.applyMatrix4(K.matrixWorldInverse).applyMatrix4(K.projectionMatrix)}unproject(K){return this.applyMatrix4(K.projectionMatrixInverse).applyMatrix4(K.matrixWorld)}transformDirection(K){const me=this.x,ge=this.y,xe=this.z,ye=K.elements;return this.x=ye[0]*me+ye[4]*ge+ye[8]*xe,this.y=ye[1]*me+ye[5]*ge+ye[9]*xe,this.z=ye[2]*me+ye[6]*ge+ye[10]*xe,this.normalize()}divide(K){return this.x/=K.x,this.y/=K.y,this.z/=K.z,this}divideScalar(K){return this.multiplyScalar(1/K)}min(K){return this.x=Math.min(this.x,K.x),this.y=Math.min(this.y,K.y),this.z=Math.min(this.z,K.z),this}max(K){return this.x=Math.max(this.x,K.x),this.y=Math.max(this.y,K.y),this.z=Math.max(this.z,K.z),this}clamp(K,me){return this.x=clamp$1(this.x,K.x,me.x),this.y=clamp$1(this.y,K.y,me.y),this.z=clamp$1(this.z,K.z,me.z),this}clampScalar(K,me){return this.x=clamp$1(this.x,K,me),this.y=clamp$1(this.y,K,me),this.z=clamp$1(this.z,K,me),this}clampLength(K,me){const ge=this.length();return this.divideScalar(ge||1).multiplyScalar(clamp$1(ge,K,me))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(K){return this.x*K.x+this.y*K.y+this.z*K.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(K){return this.normalize().multiplyScalar(K)}lerp(K,me){return this.x+=(K.x-this.x)*me,this.y+=(K.y-this.y)*me,this.z+=(K.z-this.z)*me,this}lerpVectors(K,me,ge){return this.x=K.x+(me.x-K.x)*ge,this.y=K.y+(me.y-K.y)*ge,this.z=K.z+(me.z-K.z)*ge,this}cross(K){return this.crossVectors(this,K)}crossVectors(K,me){const ge=K.x,xe=K.y,ye=K.z,ve=me.x,_e=me.y,Ee=me.z;return this.x=xe*Ee-ye*_e,this.y=ye*ve-ge*Ee,this.z=ge*_e-xe*ve,this}projectOnVector(K){const me=K.lengthSq();if(me===0)return this.set(0,0,0);const ge=K.dot(this)/me;return this.copy(K).multiplyScalar(ge)}projectOnPlane(K){return _vector$c.copy(this).projectOnVector(K),this.sub(_vector$c)}reflect(K){return this.sub(_vector$c.copy(K).multiplyScalar(2*this.dot(K)))}angleTo(K){const me=Math.sqrt(this.lengthSq()*K.lengthSq());if(me===0)return Math.PI/2;const ge=this.dot(K)/me;return Math.acos(clamp$1(ge,-1,1))}distanceTo(K){return Math.sqrt(this.distanceToSquared(K))}distanceToSquared(K){const me=this.x-K.x,ge=this.y-K.y,xe=this.z-K.z;return me*me+ge*ge+xe*xe}manhattanDistanceTo(K){return Math.abs(this.x-K.x)+Math.abs(this.y-K.y)+Math.abs(this.z-K.z)}setFromSpherical(K){return this.setFromSphericalCoords(K.radius,K.phi,K.theta)}setFromSphericalCoords(K,me,ge){const xe=Math.sin(me)*K;return this.x=xe*Math.sin(ge),this.y=Math.cos(me)*K,this.z=xe*Math.cos(ge),this}setFromCylindrical(K){return this.setFromCylindricalCoords(K.radius,K.theta,K.y)}setFromCylindricalCoords(K,me,ge){return this.x=K*Math.sin(me),this.y=ge,this.z=K*Math.cos(me),this}setFromMatrixPosition(K){const me=K.elements;return this.x=me[12],this.y=me[13],this.z=me[14],this}setFromMatrixScale(K){const me=this.setFromMatrixColumn(K,0).length(),ge=this.setFromMatrixColumn(K,1).length(),xe=this.setFromMatrixColumn(K,2).length();return this.x=me,this.y=ge,this.z=xe,this}setFromMatrixColumn(K,me){return this.fromArray(K.elements,me*4)}setFromMatrix3Column(K,me){return this.fromArray(K.elements,me*3)}setFromEuler(K){return this.x=K._x,this.y=K._y,this.z=K._z,this}setFromColor(K){return this.x=K.r,this.y=K.g,this.z=K.b,this}equals(K){return K.x===this.x&&K.y===this.y&&K.z===this.z}fromArray(K,me=0){return this.x=K[me],this.y=K[me+1],this.z=K[me+2],this}toArray(K=[],me=0){return K[me]=this.x,K[me+1]=this.y,K[me+2]=this.z,K}fromBufferAttribute(K,me){return this.x=K.getX(me),this.y=K.getY(me),this.z=K.getZ(me),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const K=Math.random()*Math.PI*2,me=Math.random()*2-1,ge=Math.sqrt(1-me*me);return this.x=ge*Math.cos(K),this.y=me,this.z=ge*Math.sin(K),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const _vector$c=new Vector3,_quaternion$4=new Quaternion;class Box3{constructor(K=new Vector3(1/0,1/0,1/0),me=new Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=K,this.max=me}set(K,me){return this.min.copy(K),this.max.copy(me),this}setFromArray(K){this.makeEmpty();for(let me=0,ge=K.length;me<ge;me+=3)this.expandByPoint(_vector$b.fromArray(K,me));return this}setFromBufferAttribute(K){this.makeEmpty();for(let me=0,ge=K.count;me<ge;me++)this.expandByPoint(_vector$b.fromBufferAttribute(K,me));return this}setFromPoints(K){this.makeEmpty();for(let me=0,ge=K.length;me<ge;me++)this.expandByPoint(K[me]);return this}setFromCenterAndSize(K,me){const ge=_vector$b.copy(me).multiplyScalar(.5);return this.min.copy(K).sub(ge),this.max.copy(K).add(ge),this}setFromObject(K,me=!1){return this.makeEmpty(),this.expandByObject(K,me)}clone(){return new this.constructor().copy(this)}copy(K){return this.min.copy(K.min),this.max.copy(K.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(K){return this.isEmpty()?K.set(0,0,0):K.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(K){return this.isEmpty()?K.set(0,0,0):K.subVectors(this.max,this.min)}expandByPoint(K){return this.min.min(K),this.max.max(K),this}expandByVector(K){return this.min.sub(K),this.max.add(K),this}expandByScalar(K){return this.min.addScalar(-K),this.max.addScalar(K),this}expandByObject(K,me=!1){K.updateWorldMatrix(!1,!1);const ge=K.geometry;if(ge!==void 0){const ye=ge.getAttribute("position");if(me===!0&&ye!==void 0&&K.isInstancedMesh!==!0)for(let ve=0,_e=ye.count;ve<_e;ve++)K.isMesh===!0?K.getVertexPosition(ve,_vector$b):_vector$b.fromBufferAttribute(ye,ve),_vector$b.applyMatrix4(K.matrixWorld),this.expandByPoint(_vector$b);else K.boundingBox!==void 0?(K.boundingBox===null&&K.computeBoundingBox(),_box$4.copy(K.boundingBox)):(ge.boundingBox===null&&ge.computeBoundingBox(),_box$4.copy(ge.boundingBox)),_box$4.applyMatrix4(K.matrixWorld),this.union(_box$4)}const xe=K.children;for(let ye=0,ve=xe.length;ye<ve;ye++)this.expandByObject(xe[ye],me);return this}containsPoint(K){return K.x>=this.min.x&&K.x<=this.max.x&&K.y>=this.min.y&&K.y<=this.max.y&&K.z>=this.min.z&&K.z<=this.max.z}containsBox(K){return this.min.x<=K.min.x&&K.max.x<=this.max.x&&this.min.y<=K.min.y&&K.max.y<=this.max.y&&this.min.z<=K.min.z&&K.max.z<=this.max.z}getParameter(K,me){return me.set((K.x-this.min.x)/(this.max.x-this.min.x),(K.y-this.min.y)/(this.max.y-this.min.y),(K.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(K){return K.max.x>=this.min.x&&K.min.x<=this.max.x&&K.max.y>=this.min.y&&K.min.y<=this.max.y&&K.max.z>=this.min.z&&K.min.z<=this.max.z}intersectsSphere(K){return this.clampPoint(K.center,_vector$b),_vector$b.distanceToSquared(K.center)<=K.radius*K.radius}intersectsPlane(K){let me,ge;return K.normal.x>0?(me=K.normal.x*this.min.x,ge=K.normal.x*this.max.x):(me=K.normal.x*this.max.x,ge=K.normal.x*this.min.x),K.normal.y>0?(me+=K.normal.y*this.min.y,ge+=K.normal.y*this.max.y):(me+=K.normal.y*this.max.y,ge+=K.normal.y*this.min.y),K.normal.z>0?(me+=K.normal.z*this.min.z,ge+=K.normal.z*this.max.z):(me+=K.normal.z*this.max.z,ge+=K.normal.z*this.min.z),me<=-K.constant&&ge>=-K.constant}intersectsTriangle(K){if(this.isEmpty())return!1;this.getCenter(_center$1),_extents.subVectors(this.max,_center$1),_v0$2.subVectors(K.a,_center$1),_v1$7.subVectors(K.b,_center$1),_v2$4.subVectors(K.c,_center$1),_f0.subVectors(_v1$7,_v0$2),_f1.subVectors(_v2$4,_v1$7),_f2.subVectors(_v0$2,_v2$4);let me=[0,-_f0.z,_f0.y,0,-_f1.z,_f1.y,0,-_f2.z,_f2.y,_f0.z,0,-_f0.x,_f1.z,0,-_f1.x,_f2.z,0,-_f2.x,-_f0.y,_f0.x,0,-_f1.y,_f1.x,0,-_f2.y,_f2.x,0];return!satForAxes(me,_v0$2,_v1$7,_v2$4,_extents)||(me=[1,0,0,0,1,0,0,0,1],!satForAxes(me,_v0$2,_v1$7,_v2$4,_extents))?!1:(_triangleNormal.crossVectors(_f0,_f1),me=[_triangleNormal.x,_triangleNormal.y,_triangleNormal.z],satForAxes(me,_v0$2,_v1$7,_v2$4,_extents))}clampPoint(K,me){return me.copy(K).clamp(this.min,this.max)}distanceToPoint(K){return this.clampPoint(K,_vector$b).distanceTo(K)}getBoundingSphere(K){return this.isEmpty()?K.makeEmpty():(this.getCenter(K.center),K.radius=this.getSize(_vector$b).length()*.5),K}intersect(K){return this.min.max(K.min),this.max.min(K.max),this.isEmpty()&&this.makeEmpty(),this}union(K){return this.min.min(K.min),this.max.max(K.max),this}applyMatrix4(K){return this.isEmpty()?this:(_points[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(K),_points[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(K),_points[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(K),_points[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(K),_points[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(K),_points[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(K),_points[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(K),_points[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(K),this.setFromPoints(_points),this)}translate(K){return this.min.add(K),this.max.add(K),this}equals(K){return K.min.equals(this.min)&&K.max.equals(this.max)}}const _points=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],_vector$b=new Vector3,_box$4=new Box3,_v0$2=new Vector3,_v1$7=new Vector3,_v2$4=new Vector3,_f0=new Vector3,_f1=new Vector3,_f2=new Vector3,_center$1=new Vector3,_extents=new Vector3,_triangleNormal=new Vector3,_testAxis=new Vector3;function satForAxes(fe,K,me,ge,xe){for(let ye=0,ve=fe.length-3;ye<=ve;ye+=3){_testAxis.fromArray(fe,ye);const _e=xe.x*Math.abs(_testAxis.x)+xe.y*Math.abs(_testAxis.y)+xe.z*Math.abs(_testAxis.z),Ee=K.dot(_testAxis),be=me.dot(_testAxis),Ae=ge.dot(_testAxis);if(Math.max(-Math.max(Ee,be,Ae),Math.min(Ee,be,Ae))>_e)return!1}return!0}const _box$3=new Box3,_v1$6=new Vector3,_v2$3=new Vector3;class Sphere{constructor(K=new Vector3,me=-1){this.isSphere=!0,this.center=K,this.radius=me}set(K,me){return this.center.copy(K),this.radius=me,this}setFromPoints(K,me){const ge=this.center;me!==void 0?ge.copy(me):_box$3.setFromPoints(K).getCenter(ge);let xe=0;for(let ye=0,ve=K.length;ye<ve;ye++)xe=Math.max(xe,ge.distanceToSquared(K[ye]));return this.radius=Math.sqrt(xe),this}copy(K){return this.center.copy(K.center),this.radius=K.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(K){return K.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(K){return K.distanceTo(this.center)-this.radius}intersectsSphere(K){const me=this.radius+K.radius;return K.center.distanceToSquared(this.center)<=me*me}intersectsBox(K){return K.intersectsSphere(this)}intersectsPlane(K){return Math.abs(K.distanceToPoint(this.center))<=this.radius}clampPoint(K,me){const ge=this.center.distanceToSquared(K);return me.copy(K),ge>this.radius*this.radius&&(me.sub(this.center).normalize(),me.multiplyScalar(this.radius).add(this.center)),me}getBoundingBox(K){return this.isEmpty()?(K.makeEmpty(),K):(K.set(this.center,this.center),K.expandByScalar(this.radius),K)}applyMatrix4(K){return this.center.applyMatrix4(K),this.radius=this.radius*K.getMaxScaleOnAxis(),this}translate(K){return this.center.add(K),this}expandByPoint(K){if(this.isEmpty())return this.center.copy(K),this.radius=0,this;_v1$6.subVectors(K,this.center);const me=_v1$6.lengthSq();if(me>this.radius*this.radius){const ge=Math.sqrt(me),xe=(ge-this.radius)*.5;this.center.addScaledVector(_v1$6,xe/ge),this.radius+=xe}return this}union(K){return K.isEmpty()?this:this.isEmpty()?(this.copy(K),this):(this.center.equals(K.center)===!0?this.radius=Math.max(this.radius,K.radius):(_v2$3.subVectors(K.center,this.center).setLength(K.radius),this.expandByPoint(_v1$6.copy(K.center).add(_v2$3)),this.expandByPoint(_v1$6.copy(K.center).sub(_v2$3))),this)}equals(K){return K.center.equals(this.center)&&K.radius===this.radius}clone(){return new this.constructor().copy(this)}}const _vector$a=new Vector3,_segCenter=new Vector3,_segDir=new Vector3,_diff=new Vector3,_edge1=new Vector3,_edge2=new Vector3,_normal$1=new Vector3;class Ray{constructor(K=new Vector3,me=new Vector3(0,0,-1)){this.origin=K,this.direction=me}set(K,me){return this.origin.copy(K),this.direction.copy(me),this}copy(K){return this.origin.copy(K.origin),this.direction.copy(K.direction),this}at(K,me){return me.copy(this.origin).addScaledVector(this.direction,K)}lookAt(K){return this.direction.copy(K).sub(this.origin).normalize(),this}recast(K){return this.origin.copy(this.at(K,_vector$a)),this}closestPointToPoint(K,me){me.subVectors(K,this.origin);const ge=me.dot(this.direction);return ge<0?me.copy(this.origin):me.copy(this.origin).addScaledVector(this.direction,ge)}distanceToPoint(K){return Math.sqrt(this.distanceSqToPoint(K))}distanceSqToPoint(K){const me=_vector$a.subVectors(K,this.origin).dot(this.direction);return me<0?this.origin.distanceToSquared(K):(_vector$a.copy(this.origin).addScaledVector(this.direction,me),_vector$a.distanceToSquared(K))}distanceSqToSegment(K,me,ge,xe){_segCenter.copy(K).add(me).multiplyScalar(.5),_segDir.copy(me).sub(K).normalize(),_diff.copy(this.origin).sub(_segCenter);const ye=K.distanceTo(me)*.5,ve=-this.direction.dot(_segDir),_e=_diff.dot(this.direction),Ee=-_diff.dot(_segDir),be=_diff.lengthSq(),Ae=Math.abs(1-ve*ve);let Se,Ce,Te,Re;if(Ae>0)if(Se=ve*Ee-_e,Ce=ve*_e-Ee,Re=ye*Ae,Se>=0)if(Ce>=-Re)if(Ce<=Re){const De=1/Ae;Se*=De,Ce*=De,Te=Se*(Se+ve*Ce+2*_e)+Ce*(ve*Se+Ce+2*Ee)+be}else Ce=ye,Se=Math.max(0,-(ve*Ce+_e)),Te=-Se*Se+Ce*(Ce+2*Ee)+be;else Ce=-ye,Se=Math.max(0,-(ve*Ce+_e)),Te=-Se*Se+Ce*(Ce+2*Ee)+be;else Ce<=-Re?(Se=Math.max(0,-(-ve*ye+_e)),Ce=Se>0?-ye:Math.min(Math.max(-ye,-Ee),ye),Te=-Se*Se+Ce*(Ce+2*Ee)+be):Ce<=Re?(Se=0,Ce=Math.min(Math.max(-ye,-Ee),ye),Te=Ce*(Ce+2*Ee)+be):(Se=Math.max(0,-(ve*ye+_e)),Ce=Se>0?ye:Math.min(Math.max(-ye,-Ee),ye),Te=-Se*Se+Ce*(Ce+2*Ee)+be);else Ce=ve>0?-ye:ye,Se=Math.max(0,-(ve*Ce+_e)),Te=-Se*Se+Ce*(Ce+2*Ee)+be;return ge&&ge.copy(this.origin).addScaledVector(this.direction,Se),xe&&xe.copy(_segCenter).addScaledVector(_segDir,Ce),Te}intersectSphere(K,me){_vector$a.subVectors(K.center,this.origin);const ge=_vector$a.dot(this.direction),xe=_vector$a.dot(_vector$a)-ge*ge,ye=K.radius*K.radius;if(xe>ye)return null;const ve=Math.sqrt(ye-xe),_e=ge-ve,Ee=ge+ve;return Ee<0?null:_e<0?this.at(Ee,me):this.at(_e,me)}intersectsSphere(K){return this.distanceSqToPoint(K.center)<=K.radius*K.radius}distanceToPlane(K){const me=K.normal.dot(this.direction);if(me===0)return K.distanceToPoint(this.origin)===0?0:null;const ge=-(this.origin.dot(K.normal)+K.constant)/me;return ge>=0?ge:null}intersectPlane(K,me){const ge=this.distanceToPlane(K);return ge===null?null:this.at(ge,me)}intersectsPlane(K){const me=K.distanceToPoint(this.origin);return me===0||K.normal.dot(this.direction)*me<0}intersectBox(K,me){let ge,xe,ye,ve,_e,Ee;const be=1/this.direction.x,Ae=1/this.direction.y,Se=1/this.direction.z,Ce=this.origin;return be>=0?(ge=(K.min.x-Ce.x)*be,xe=(K.max.x-Ce.x)*be):(ge=(K.max.x-Ce.x)*be,xe=(K.min.x-Ce.x)*be),Ae>=0?(ye=(K.min.y-Ce.y)*Ae,ve=(K.max.y-Ce.y)*Ae):(ye=(K.max.y-Ce.y)*Ae,ve=(K.min.y-Ce.y)*Ae),ge>ve||ye>xe||((ye>ge||isNaN(ge))&&(ge=ye),(ve<xe||isNaN(xe))&&(xe=ve),Se>=0?(_e=(K.min.z-Ce.z)*Se,Ee=(K.max.z-Ce.z)*Se):(_e=(K.max.z-Ce.z)*Se,Ee=(K.min.z-Ce.z)*Se),ge>Ee||_e>xe)||((_e>ge||ge!==ge)&&(ge=_e),(Ee<xe||xe!==xe)&&(xe=Ee),xe<0)?null:this.at(ge>=0?ge:xe,me)}intersectsBox(K){return this.intersectBox(K,_vector$a)!==null}intersectTriangle(K,me,ge,xe,ye){_edge1.subVectors(me,K),_edge2.subVectors(ge,K),_normal$1.crossVectors(_edge1,_edge2);let ve=this.direction.dot(_normal$1),_e;if(ve>0){if(xe)return null;_e=1}else if(ve<0)_e=-1,ve=-ve;else return null;_diff.subVectors(this.origin,K);const Ee=_e*this.direction.dot(_edge2.crossVectors(_diff,_edge2));if(Ee<0)return null;const be=_e*this.direction.dot(_edge1.cross(_diff));if(be<0||Ee+be>ve)return null;const Ae=-_e*_diff.dot(_normal$1);return Ae<0?null:this.at(Ae/ve,ye)}applyMatrix4(K){return this.origin.applyMatrix4(K),this.direction.transformDirection(K),this}equals(K){return K.origin.equals(this.origin)&&K.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Matrix4{constructor(K,me,ge,xe,ye,ve,_e,Ee,be,Ae,Se,Ce,Te,Re,De,Ie){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],K!==void 0&&this.set(K,me,ge,xe,ye,ve,_e,Ee,be,Ae,Se,Ce,Te,Re,De,Ie)}set(K,me,ge,xe,ye,ve,_e,Ee,be,Ae,Se,Ce,Te,Re,De,Ie){const Be=this.elements;return Be[0]=K,Be[4]=me,Be[8]=ge,Be[12]=xe,Be[1]=ye,Be[5]=ve,Be[9]=_e,Be[13]=Ee,Be[2]=be,Be[6]=Ae,Be[10]=Se,Be[14]=Ce,Be[3]=Te,Be[7]=Re,Be[11]=De,Be[15]=Ie,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Matrix4().fromArray(this.elements)}copy(K){const me=this.elements,ge=K.elements;return me[0]=ge[0],me[1]=ge[1],me[2]=ge[2],me[3]=ge[3],me[4]=ge[4],me[5]=ge[5],me[6]=ge[6],me[7]=ge[7],me[8]=ge[8],me[9]=ge[9],me[10]=ge[10],me[11]=ge[11],me[12]=ge[12],me[13]=ge[13],me[14]=ge[14],me[15]=ge[15],this}copyPosition(K){const me=this.elements,ge=K.elements;return me[12]=ge[12],me[13]=ge[13],me[14]=ge[14],this}setFromMatrix3(K){const me=K.elements;return this.set(me[0],me[3],me[6],0,me[1],me[4],me[7],0,me[2],me[5],me[8],0,0,0,0,1),this}extractBasis(K,me,ge){return K.setFromMatrixColumn(this,0),me.setFromMatrixColumn(this,1),ge.setFromMatrixColumn(this,2),this}makeBasis(K,me,ge){return this.set(K.x,me.x,ge.x,0,K.y,me.y,ge.y,0,K.z,me.z,ge.z,0,0,0,0,1),this}extractRotation(K){const me=this.elements,ge=K.elements,xe=1/_v1$5.setFromMatrixColumn(K,0).length(),ye=1/_v1$5.setFromMatrixColumn(K,1).length(),ve=1/_v1$5.setFromMatrixColumn(K,2).length();return me[0]=ge[0]*xe,me[1]=ge[1]*xe,me[2]=ge[2]*xe,me[3]=0,me[4]=ge[4]*ye,me[5]=ge[5]*ye,me[6]=ge[6]*ye,me[7]=0,me[8]=ge[8]*ve,me[9]=ge[9]*ve,me[10]=ge[10]*ve,me[11]=0,me[12]=0,me[13]=0,me[14]=0,me[15]=1,this}makeRotationFromEuler(K){const me=this.elements,ge=K.x,xe=K.y,ye=K.z,ve=Math.cos(ge),_e=Math.sin(ge),Ee=Math.cos(xe),be=Math.sin(xe),Ae=Math.cos(ye),Se=Math.sin(ye);if(K.order==="XYZ"){const Ce=ve*Ae,Te=ve*Se,Re=_e*Ae,De=_e*Se;me[0]=Ee*Ae,me[4]=-Ee*Se,me[8]=be,me[1]=Te+Re*be,me[5]=Ce-De*be,me[9]=-_e*Ee,me[2]=De-Ce*be,me[6]=Re+Te*be,me[10]=ve*Ee}else if(K.order==="YXZ"){const Ce=Ee*Ae,Te=Ee*Se,Re=be*Ae,De=be*Se;me[0]=Ce+De*_e,me[4]=Re*_e-Te,me[8]=ve*be,me[1]=ve*Se,me[5]=ve*Ae,me[9]=-_e,me[2]=Te*_e-Re,me[6]=De+Ce*_e,me[10]=ve*Ee}else if(K.order==="ZXY"){const Ce=Ee*Ae,Te=Ee*Se,Re=be*Ae,De=be*Se;me[0]=Ce-De*_e,me[4]=-ve*Se,me[8]=Re+Te*_e,me[1]=Te+Re*_e,me[5]=ve*Ae,me[9]=De-Ce*_e,me[2]=-ve*be,me[6]=_e,me[10]=ve*Ee}else if(K.order==="ZYX"){const Ce=ve*Ae,Te=ve*Se,Re=_e*Ae,De=_e*Se;me[0]=Ee*Ae,me[4]=Re*be-Te,me[8]=Ce*be+De,me[1]=Ee*Se,me[5]=De*be+Ce,me[9]=Te*be-Re,me[2]=-be,me[6]=_e*Ee,me[10]=ve*Ee}else if(K.order==="YZX"){const Ce=ve*Ee,Te=ve*be,Re=_e*Ee,De=_e*be;me[0]=Ee*Ae,me[4]=De-Ce*Se,me[8]=Re*Se+Te,me[1]=Se,me[5]=ve*Ae,me[9]=-_e*Ae,me[2]=-be*Ae,me[6]=Te*Se+Re,me[10]=Ce-De*Se}else if(K.order==="XZY"){const Ce=ve*Ee,Te=ve*be,Re=_e*Ee,De=_e*be;me[0]=Ee*Ae,me[4]=-Se,me[8]=be*Ae,me[1]=Ce*Se+De,me[5]=ve*Ae,me[9]=Te*Se-Re,me[2]=Re*Se-Te,me[6]=_e*Ae,me[10]=De*Se+Ce}return me[3]=0,me[7]=0,me[11]=0,me[12]=0,me[13]=0,me[14]=0,me[15]=1,this}makeRotationFromQuaternion(K){return this.compose(_zero,K,_one)}lookAt(K,me,ge){const xe=this.elements;return _z.subVectors(K,me),_z.lengthSq()===0&&(_z.z=1),_z.normalize(),_x.crossVectors(ge,_z),_x.lengthSq()===0&&(Math.abs(ge.z)===1?_z.x+=1e-4:_z.z+=1e-4,_z.normalize(),_x.crossVectors(ge,_z)),_x.normalize(),_y.crossVectors(_z,_x),xe[0]=_x.x,xe[4]=_y.x,xe[8]=_z.x,xe[1]=_x.y,xe[5]=_y.y,xe[9]=_z.y,xe[2]=_x.z,xe[6]=_y.z,xe[10]=_z.z,this}multiply(K){return this.multiplyMatrices(this,K)}premultiply(K){return this.multiplyMatrices(K,this)}multiplyMatrices(K,me){const ge=K.elements,xe=me.elements,ye=this.elements,ve=ge[0],_e=ge[4],Ee=ge[8],be=ge[12],Ae=ge[1],Se=ge[5],Ce=ge[9],Te=ge[13],Re=ge[2],De=ge[6],Ie=ge[10],Be=ge[14],Le=ge[3],Oe=ge[7],Fe=ge[11],Ue=ge[15],Ne=xe[0],He=xe[4],ze=xe[8],je=xe[12],Ge=xe[1],Xe=xe[5],qe=xe[9],Qe=xe[13],nt=xe[2],Nt=xe[6],Ye=xe[10],at=xe[14],rt=xe[3],Ft=xe[7],Je=xe[11],Wt=xe[15];return ye[0]=ve*Ne+_e*Ge+Ee*nt+be*rt,ye[4]=ve*He+_e*Xe+Ee*Nt+be*Ft,ye[8]=ve*ze+_e*qe+Ee*Ye+be*Je,ye[12]=ve*je+_e*Qe+Ee*at+be*Wt,ye[1]=Ae*Ne+Se*Ge+Ce*nt+Te*rt,ye[5]=Ae*He+Se*Xe+Ce*Nt+Te*Ft,ye[9]=Ae*ze+Se*qe+Ce*Ye+Te*Je,ye[13]=Ae*je+Se*Qe+Ce*at+Te*Wt,ye[2]=Re*Ne+De*Ge+Ie*nt+Be*rt,ye[6]=Re*He+De*Xe+Ie*Nt+Be*Ft,ye[10]=Re*ze+De*qe+Ie*Ye+Be*Je,ye[14]=Re*je+De*Qe+Ie*at+Be*Wt,ye[3]=Le*Ne+Oe*Ge+Fe*nt+Ue*rt,ye[7]=Le*He+Oe*Xe+Fe*Nt+Ue*Ft,ye[11]=Le*ze+Oe*qe+Fe*Ye+Ue*Je,ye[15]=Le*je+Oe*Qe+Fe*at+Ue*Wt,this}multiplyScalar(K){const me=this.elements;return me[0]*=K,me[4]*=K,me[8]*=K,me[12]*=K,me[1]*=K,me[5]*=K,me[9]*=K,me[13]*=K,me[2]*=K,me[6]*=K,me[10]*=K,me[14]*=K,me[3]*=K,me[7]*=K,me[11]*=K,me[15]*=K,this}determinant(){const K=this.elements,me=K[0],ge=K[4],xe=K[8],ye=K[12],ve=K[1],_e=K[5],Ee=K[9],be=K[13],Ae=K[2],Se=K[6],Ce=K[10],Te=K[14],Re=K[3],De=K[7],Ie=K[11],Be=K[15];return Re*(+ye*Ee*Se-xe*be*Se-ye*_e*Ce+ge*be*Ce+xe*_e*Te-ge*Ee*Te)+De*(+me*Ee*Te-me*be*Ce+ye*ve*Ce-xe*ve*Te+xe*be*Ae-ye*Ee*Ae)+Ie*(+me*be*Se-me*_e*Te-ye*ve*Se+ge*ve*Te+ye*_e*Ae-ge*be*Ae)+Be*(-xe*_e*Ae-me*Ee*Se+me*_e*Ce+xe*ve*Se-ge*ve*Ce+ge*Ee*Ae)}transpose(){const K=this.elements;let me;return me=K[1],K[1]=K[4],K[4]=me,me=K[2],K[2]=K[8],K[8]=me,me=K[6],K[6]=K[9],K[9]=me,me=K[3],K[3]=K[12],K[12]=me,me=K[7],K[7]=K[13],K[13]=me,me=K[11],K[11]=K[14],K[14]=me,this}setPosition(K,me,ge){const xe=this.elements;return K.isVector3?(xe[12]=K.x,xe[13]=K.y,xe[14]=K.z):(xe[12]=K,xe[13]=me,xe[14]=ge),this}invert(){const K=this.elements,me=K[0],ge=K[1],xe=K[2],ye=K[3],ve=K[4],_e=K[5],Ee=K[6],be=K[7],Ae=K[8],Se=K[9],Ce=K[10],Te=K[11],Re=K[12],De=K[13],Ie=K[14],Be=K[15],Le=Se*Ie*be-De*Ce*be+De*Ee*Te-_e*Ie*Te-Se*Ee*Be+_e*Ce*Be,Oe=Re*Ce*be-Ae*Ie*be-Re*Ee*Te+ve*Ie*Te+Ae*Ee*Be-ve*Ce*Be,Fe=Ae*De*be-Re*Se*be+Re*_e*Te-ve*De*Te-Ae*_e*Be+ve*Se*Be,Ue=Re*Se*Ee-Ae*De*Ee-Re*_e*Ce+ve*De*Ce+Ae*_e*Ie-ve*Se*Ie,Ne=me*Le+ge*Oe+xe*Fe+ye*Ue;if(Ne===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const He=1/Ne;return K[0]=Le*He,K[1]=(De*Ce*ye-Se*Ie*ye-De*xe*Te+ge*Ie*Te+Se*xe*Be-ge*Ce*Be)*He,K[2]=(_e*Ie*ye-De*Ee*ye+De*xe*be-ge*Ie*be-_e*xe*Be+ge*Ee*Be)*He,K[3]=(Se*Ee*ye-_e*Ce*ye-Se*xe*be+ge*Ce*be+_e*xe*Te-ge*Ee*Te)*He,K[4]=Oe*He,K[5]=(Ae*Ie*ye-Re*Ce*ye+Re*xe*Te-me*Ie*Te-Ae*xe*Be+me*Ce*Be)*He,K[6]=(Re*Ee*ye-ve*Ie*ye-Re*xe*be+me*Ie*be+ve*xe*Be-me*Ee*Be)*He,K[7]=(ve*Ce*ye-Ae*Ee*ye+Ae*xe*be-me*Ce*be-ve*xe*Te+me*Ee*Te)*He,K[8]=Fe*He,K[9]=(Re*Se*ye-Ae*De*ye-Re*ge*Te+me*De*Te+Ae*ge*Be-me*Se*Be)*He,K[10]=(ve*De*ye-Re*_e*ye+Re*ge*be-me*De*be-ve*ge*Be+me*_e*Be)*He,K[11]=(Ae*_e*ye-ve*Se*ye-Ae*ge*be+me*Se*be+ve*ge*Te-me*_e*Te)*He,K[12]=Ue*He,K[13]=(Ae*De*xe-Re*Se*xe+Re*ge*Ce-me*De*Ce-Ae*ge*Ie+me*Se*Ie)*He,K[14]=(Re*_e*xe-ve*De*xe-Re*ge*Ee+me*De*Ee+ve*ge*Ie-me*_e*Ie)*He,K[15]=(ve*Se*xe-Ae*_e*xe+Ae*ge*Ee-me*Se*Ee-ve*ge*Ce+me*_e*Ce)*He,this}scale(K){const me=this.elements,ge=K.x,xe=K.y,ye=K.z;return me[0]*=ge,me[4]*=xe,me[8]*=ye,me[1]*=ge,me[5]*=xe,me[9]*=ye,me[2]*=ge,me[6]*=xe,me[10]*=ye,me[3]*=ge,me[7]*=xe,me[11]*=ye,this}getMaxScaleOnAxis(){const K=this.elements,me=K[0]*K[0]+K[1]*K[1]+K[2]*K[2],ge=K[4]*K[4]+K[5]*K[5]+K[6]*K[6],xe=K[8]*K[8]+K[9]*K[9]+K[10]*K[10];return Math.sqrt(Math.max(me,ge,xe))}makeTranslation(K,me,ge){return K.isVector3?this.set(1,0,0,K.x,0,1,0,K.y,0,0,1,K.z,0,0,0,1):this.set(1,0,0,K,0,1,0,me,0,0,1,ge,0,0,0,1),this}makeRotationX(K){const me=Math.cos(K),ge=Math.sin(K);return this.set(1,0,0,0,0,me,-ge,0,0,ge,me,0,0,0,0,1),this}makeRotationY(K){const me=Math.cos(K),ge=Math.sin(K);return this.set(me,0,ge,0,0,1,0,0,-ge,0,me,0,0,0,0,1),this}makeRotationZ(K){const me=Math.cos(K),ge=Math.sin(K);return this.set(me,-ge,0,0,ge,me,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(K,me){const ge=Math.cos(me),xe=Math.sin(me),ye=1-ge,ve=K.x,_e=K.y,Ee=K.z,be=ye*ve,Ae=ye*_e;return this.set(be*ve+ge,be*_e-xe*Ee,be*Ee+xe*_e,0,be*_e+xe*Ee,Ae*_e+ge,Ae*Ee-xe*ve,0,be*Ee-xe*_e,Ae*Ee+xe*ve,ye*Ee*Ee+ge,0,0,0,0,1),this}makeScale(K,me,ge){return this.set(K,0,0,0,0,me,0,0,0,0,ge,0,0,0,0,1),this}makeShear(K,me,ge,xe,ye,ve){return this.set(1,ge,ye,0,K,1,ve,0,me,xe,1,0,0,0,0,1),this}compose(K,me,ge){const xe=this.elements,ye=me._x,ve=me._y,_e=me._z,Ee=me._w,be=ye+ye,Ae=ve+ve,Se=_e+_e,Ce=ye*be,Te=ye*Ae,Re=ye*Se,De=ve*Ae,Ie=ve*Se,Be=_e*Se,Le=Ee*be,Oe=Ee*Ae,Fe=Ee*Se,Ue=ge.x,Ne=ge.y,He=ge.z;return xe[0]=(1-(De+Be))*Ue,xe[1]=(Te+Fe)*Ue,xe[2]=(Re-Oe)*Ue,xe[3]=0,xe[4]=(Te-Fe)*Ne,xe[5]=(1-(Ce+Be))*Ne,xe[6]=(Ie+Le)*Ne,xe[7]=0,xe[8]=(Re+Oe)*He,xe[9]=(Ie-Le)*He,xe[10]=(1-(Ce+De))*He,xe[11]=0,xe[12]=K.x,xe[13]=K.y,xe[14]=K.z,xe[15]=1,this}decompose(K,me,ge){const xe=this.elements;let ye=_v1$5.set(xe[0],xe[1],xe[2]).length();const ve=_v1$5.set(xe[4],xe[5],xe[6]).length(),_e=_v1$5.set(xe[8],xe[9],xe[10]).length();this.determinant()<0&&(ye=-ye),K.x=xe[12],K.y=xe[13],K.z=xe[14],_m1$2.copy(this);const be=1/ye,Ae=1/ve,Se=1/_e;return _m1$2.elements[0]*=be,_m1$2.elements[1]*=be,_m1$2.elements[2]*=be,_m1$2.elements[4]*=Ae,_m1$2.elements[5]*=Ae,_m1$2.elements[6]*=Ae,_m1$2.elements[8]*=Se,_m1$2.elements[9]*=Se,_m1$2.elements[10]*=Se,me.setFromRotationMatrix(_m1$2),ge.x=ye,ge.y=ve,ge.z=_e,this}makePerspective(K,me,ge,xe,ye,ve,_e=WebGLCoordinateSystem){const Ee=this.elements,be=2*ye/(me-K),Ae=2*ye/(ge-xe),Se=(me+K)/(me-K),Ce=(ge+xe)/(ge-xe);let Te,Re;if(_e===WebGLCoordinateSystem)Te=-(ve+ye)/(ve-ye),Re=-2*ve*ye/(ve-ye);else if(_e===WebGPUCoordinateSystem)Te=-ve/(ve-ye),Re=-ve*ye/(ve-ye);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+_e);return Ee[0]=be,Ee[4]=0,Ee[8]=Se,Ee[12]=0,Ee[1]=0,Ee[5]=Ae,Ee[9]=Ce,Ee[13]=0,Ee[2]=0,Ee[6]=0,Ee[10]=Te,Ee[14]=Re,Ee[3]=0,Ee[7]=0,Ee[11]=-1,Ee[15]=0,this}makeOrthographic(K,me,ge,xe,ye,ve,_e=WebGLCoordinateSystem){const Ee=this.elements,be=1/(me-K),Ae=1/(ge-xe),Se=1/(ve-ye),Ce=(me+K)*be,Te=(ge+xe)*Ae;let Re,De;if(_e===WebGLCoordinateSystem)Re=(ve+ye)*Se,De=-2*Se;else if(_e===WebGPUCoordinateSystem)Re=ye*Se,De=-1*Se;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+_e);return Ee[0]=2*be,Ee[4]=0,Ee[8]=0,Ee[12]=-Ce,Ee[1]=0,Ee[5]=2*Ae,Ee[9]=0,Ee[13]=-Te,Ee[2]=0,Ee[6]=0,Ee[10]=De,Ee[14]=-Re,Ee[3]=0,Ee[7]=0,Ee[11]=0,Ee[15]=1,this}equals(K){const me=this.elements,ge=K.elements;for(let xe=0;xe<16;xe++)if(me[xe]!==ge[xe])return!1;return!0}fromArray(K,me=0){for(let ge=0;ge<16;ge++)this.elements[ge]=K[ge+me];return this}toArray(K=[],me=0){const ge=this.elements;return K[me]=ge[0],K[me+1]=ge[1],K[me+2]=ge[2],K[me+3]=ge[3],K[me+4]=ge[4],K[me+5]=ge[5],K[me+6]=ge[6],K[me+7]=ge[7],K[me+8]=ge[8],K[me+9]=ge[9],K[me+10]=ge[10],K[me+11]=ge[11],K[me+12]=ge[12],K[me+13]=ge[13],K[me+14]=ge[14],K[me+15]=ge[15],K}}const _v1$5=new Vector3,_m1$2=new Matrix4,_zero=new Vector3(0,0,0),_one=new Vector3(1,1,1),_x=new Vector3,_y=new Vector3,_z=new Vector3,_matrix$2=new Matrix4,_quaternion$3=new Quaternion;class Euler{constructor(K=0,me=0,ge=0,xe=Euler.DEFAULT_ORDER){this.isEuler=!0,this._x=K,this._y=me,this._z=ge,this._order=xe}get x(){return this._x}set x(K){this._x=K,this._onChangeCallback()}get y(){return this._y}set y(K){this._y=K,this._onChangeCallback()}get z(){return this._z}set z(K){this._z=K,this._onChangeCallback()}get order(){return this._order}set order(K){this._order=K,this._onChangeCallback()}set(K,me,ge,xe=this._order){return this._x=K,this._y=me,this._z=ge,this._order=xe,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(K){return this._x=K._x,this._y=K._y,this._z=K._z,this._order=K._order,this._onChangeCallback(),this}setFromRotationMatrix(K,me=this._order,ge=!0){const xe=K.elements,ye=xe[0],ve=xe[4],_e=xe[8],Ee=xe[1],be=xe[5],Ae=xe[9],Se=xe[2],Ce=xe[6],Te=xe[10];switch(me){case"XYZ":this._y=Math.asin(clamp$1(_e,-1,1)),Math.abs(_e)<.9999999?(this._x=Math.atan2(-Ae,Te),this._z=Math.atan2(-ve,ye)):(this._x=Math.atan2(Ce,be),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp$1(Ae,-1,1)),Math.abs(Ae)<.9999999?(this._y=Math.atan2(_e,Te),this._z=Math.atan2(Ee,be)):(this._y=Math.atan2(-Se,ye),this._z=0);break;case"ZXY":this._x=Math.asin(clamp$1(Ce,-1,1)),Math.abs(Ce)<.9999999?(this._y=Math.atan2(-Se,Te),this._z=Math.atan2(-ve,be)):(this._y=0,this._z=Math.atan2(Ee,ye));break;case"ZYX":this._y=Math.asin(-clamp$1(Se,-1,1)),Math.abs(Se)<.9999999?(this._x=Math.atan2(Ce,Te),this._z=Math.atan2(Ee,ye)):(this._x=0,this._z=Math.atan2(-ve,be));break;case"YZX":this._z=Math.asin(clamp$1(Ee,-1,1)),Math.abs(Ee)<.9999999?(this._x=Math.atan2(-Ae,be),this._y=Math.atan2(-Se,ye)):(this._x=0,this._y=Math.atan2(_e,Te));break;case"XZY":this._z=Math.asin(-clamp$1(ve,-1,1)),Math.abs(ve)<.9999999?(this._x=Math.atan2(Ce,be),this._y=Math.atan2(_e,ye)):(this._x=Math.atan2(-Ae,Te),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+me)}return this._order=me,ge===!0&&this._onChangeCallback(),this}setFromQuaternion(K,me,ge){return _matrix$2.makeRotationFromQuaternion(K),this.setFromRotationMatrix(_matrix$2,me,ge)}setFromVector3(K,me=this._order){return this.set(K.x,K.y,K.z,me)}reorder(K){return _quaternion$3.setFromEuler(this),this.setFromQuaternion(_quaternion$3,K)}equals(K){return K._x===this._x&&K._y===this._y&&K._z===this._z&&K._order===this._order}fromArray(K){return this._x=K[0],this._y=K[1],this._z=K[2],K[3]!==void 0&&(this._order=K[3]),this._onChangeCallback(),this}toArray(K=[],me=0){return K[me]=this._x,K[me+1]=this._y,K[me+2]=this._z,K[me+3]=this._order,K}_onChange(K){return this._onChangeCallback=K,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(K){this.mask=(1<<K|0)>>>0}enable(K){this.mask|=1<<K|0}enableAll(){this.mask=-1}toggle(K){this.mask^=1<<K|0}disable(K){this.mask&=~(1<<K|0)}disableAll(){this.mask=0}test(K){return(this.mask&K.mask)!==0}isEnabled(K){return(this.mask&(1<<K|0))!==0}}let _object3DId=0;const _v1$4=new Vector3,_q1=new Quaternion,_m1$1$1=new Matrix4,_target=new Vector3,_position$3=new Vector3,_scale$2=new Vector3,_quaternion$2=new Quaternion,_xAxis=new Vector3(1,0,0),_yAxis=new Vector3(0,1,0),_zAxis=new Vector3(0,0,1),_addedEvent={type:"added"},_removedEvent={type:"removed"},_childaddedEvent={type:"childadded",child:null},_childremovedEvent={type:"childremoved",child:null};class Object3D extends EventDispatcher$2{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:_object3DId++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const K=new Vector3,me=new Euler,ge=new Quaternion,xe=new Vector3(1,1,1);function ye(){ge.setFromEuler(me,!1)}function ve(){me.setFromQuaternion(ge,void 0,!1)}me._onChange(ye),ge._onChange(ve),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:K},rotation:{configurable:!0,enumerable:!0,value:me},quaternion:{configurable:!0,enumerable:!0,value:ge},scale:{configurable:!0,enumerable:!0,value:xe},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(K){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(K),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(K){return this.quaternion.premultiply(K),this}setRotationFromAxisAngle(K,me){this.quaternion.setFromAxisAngle(K,me)}setRotationFromEuler(K){this.quaternion.setFromEuler(K,!0)}setRotationFromMatrix(K){this.quaternion.setFromRotationMatrix(K)}setRotationFromQuaternion(K){this.quaternion.copy(K)}rotateOnAxis(K,me){return _q1.setFromAxisAngle(K,me),this.quaternion.multiply(_q1),this}rotateOnWorldAxis(K,me){return _q1.setFromAxisAngle(K,me),this.quaternion.premultiply(_q1),this}rotateX(K){return this.rotateOnAxis(_xAxis,K)}rotateY(K){return this.rotateOnAxis(_yAxis,K)}rotateZ(K){return this.rotateOnAxis(_zAxis,K)}translateOnAxis(K,me){return _v1$4.copy(K).applyQuaternion(this.quaternion),this.position.add(_v1$4.multiplyScalar(me)),this}translateX(K){return this.translateOnAxis(_xAxis,K)}translateY(K){return this.translateOnAxis(_yAxis,K)}translateZ(K){return this.translateOnAxis(_zAxis,K)}localToWorld(K){return this.updateWorldMatrix(!0,!1),K.applyMatrix4(this.matrixWorld)}worldToLocal(K){return this.updateWorldMatrix(!0,!1),K.applyMatrix4(_m1$1$1.copy(this.matrixWorld).invert())}lookAt(K,me,ge){K.isVector3?_target.copy(K):_target.set(K,me,ge);const xe=this.parent;this.updateWorldMatrix(!0,!1),_position$3.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_m1$1$1.lookAt(_position$3,_target,this.up):_m1$1$1.lookAt(_target,_position$3,this.up),this.quaternion.setFromRotationMatrix(_m1$1$1),xe&&(_m1$1$1.extractRotation(xe.matrixWorld),_q1.setFromRotationMatrix(_m1$1$1),this.quaternion.premultiply(_q1.invert()))}add(K){if(arguments.length>1){for(let me=0;me<arguments.length;me++)this.add(arguments[me]);return this}return K===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",K),this):(K&&K.isObject3D?(K.removeFromParent(),K.parent=this,this.children.push(K),K.dispatchEvent(_addedEvent),_childaddedEvent.child=K,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",K),this)}remove(K){if(arguments.length>1){for(let ge=0;ge<arguments.length;ge++)this.remove(arguments[ge]);return this}const me=this.children.indexOf(K);return me!==-1&&(K.parent=null,this.children.splice(me,1),K.dispatchEvent(_removedEvent),_childremovedEvent.child=K,this.dispatchEvent(_childremovedEvent),_childremovedEvent.child=null),this}removeFromParent(){const K=this.parent;return K!==null&&K.remove(this),this}clear(){return this.remove(...this.children)}attach(K){return this.updateWorldMatrix(!0,!1),_m1$1$1.copy(this.matrixWorld).invert(),K.parent!==null&&(K.parent.updateWorldMatrix(!0,!1),_m1$1$1.multiply(K.parent.matrixWorld)),K.applyMatrix4(_m1$1$1),K.removeFromParent(),K.parent=this,this.children.push(K),K.updateWorldMatrix(!1,!0),K.dispatchEvent(_addedEvent),_childaddedEvent.child=K,this.dispatchEvent(_childaddedEvent),_childaddedEvent.child=null,this}getObjectById(K){return this.getObjectByProperty("id",K)}getObjectByName(K){return this.getObjectByProperty("name",K)}getObjectByProperty(K,me){if(this[K]===me)return this;for(let ge=0,xe=this.children.length;ge<xe;ge++){const ve=this.children[ge].getObjectByProperty(K,me);if(ve!==void 0)return ve}}getObjectsByProperty(K,me,ge=[]){this[K]===me&&ge.push(this);const xe=this.children;for(let ye=0,ve=xe.length;ye<ve;ye++)xe[ye].getObjectsByProperty(K,me,ge);return ge}getWorldPosition(K){return this.updateWorldMatrix(!0,!1),K.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(K){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,K,_scale$2),K}getWorldScale(K){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(_position$3,_quaternion$2,K),K}getWorldDirection(K){this.updateWorldMatrix(!0,!1);const me=this.matrixWorld.elements;return K.set(me[8],me[9],me[10]).normalize()}raycast(){}traverse(K){K(this);const me=this.children;for(let ge=0,xe=me.length;ge<xe;ge++)me[ge].traverse(K)}traverseVisible(K){if(this.visible===!1)return;K(this);const me=this.children;for(let ge=0,xe=me.length;ge<xe;ge++)me[ge].traverseVisible(K)}traverseAncestors(K){const me=this.parent;me!==null&&(K(me),me.traverseAncestors(K))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(K){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||K)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,K=!0);const me=this.children;for(let ge=0,xe=me.length;ge<xe;ge++)me[ge].updateMatrixWorld(K)}updateWorldMatrix(K,me){const ge=this.parent;if(K===!0&&ge!==null&&ge.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),me===!0){const xe=this.children;for(let ye=0,ve=xe.length;ye<ve;ye++)xe[ye].updateWorldMatrix(!1,!0)}}toJSON(K){const me=K===void 0||typeof K=="string",ge={};me&&(K={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},ge.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const xe={};xe.uuid=this.uuid,xe.type=this.type,this.name!==""&&(xe.name=this.name),this.castShadow===!0&&(xe.castShadow=!0),this.receiveShadow===!0&&(xe.receiveShadow=!0),this.visible===!1&&(xe.visible=!1),this.frustumCulled===!1&&(xe.frustumCulled=!1),this.renderOrder!==0&&(xe.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(xe.userData=this.userData),xe.layers=this.layers.mask,xe.matrix=this.matrix.toArray(),xe.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(xe.matrixAutoUpdate=!1),this.isInstancedMesh&&(xe.type="InstancedMesh",xe.count=this.count,xe.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(xe.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(xe.type="BatchedMesh",xe.perObjectFrustumCulled=this.perObjectFrustumCulled,xe.sortObjects=this.sortObjects,xe.drawRanges=this._drawRanges,xe.reservedRanges=this._reservedRanges,xe.visibility=this._visibility,xe.active=this._active,xe.bounds=this._bounds.map(_e=>({boxInitialized:_e.boxInitialized,boxMin:_e.box.min.toArray(),boxMax:_e.box.max.toArray(),sphereInitialized:_e.sphereInitialized,sphereRadius:_e.sphere.radius,sphereCenter:_e.sphere.center.toArray()})),xe.maxInstanceCount=this._maxInstanceCount,xe.maxVertexCount=this._maxVertexCount,xe.maxIndexCount=this._maxIndexCount,xe.geometryInitialized=this._geometryInitialized,xe.geometryCount=this._geometryCount,xe.matricesTexture=this._matricesTexture.toJSON(K),this._colorsTexture!==null&&(xe.colorsTexture=this._colorsTexture.toJSON(K)),this.boundingSphere!==null&&(xe.boundingSphere={center:xe.boundingSphere.center.toArray(),radius:xe.boundingSphere.radius}),this.boundingBox!==null&&(xe.boundingBox={min:xe.boundingBox.min.toArray(),max:xe.boundingBox.max.toArray()}));function ye(_e,Ee){return _e[Ee.uuid]===void 0&&(_e[Ee.uuid]=Ee.toJSON(K)),Ee.uuid}if(this.isScene)this.background&&(this.background.isColor?xe.background=this.background.toJSON():this.background.isTexture&&(xe.background=this.background.toJSON(K).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(xe.environment=this.environment.toJSON(K).uuid);else if(this.isMesh||this.isLine||this.isPoints){xe.geometry=ye(K.geometries,this.geometry);const _e=this.geometry.parameters;if(_e!==void 0&&_e.shapes!==void 0){const Ee=_e.shapes;if(Array.isArray(Ee))for(let be=0,Ae=Ee.length;be<Ae;be++){const Se=Ee[be];ye(K.shapes,Se)}else ye(K.shapes,Ee)}}if(this.isSkinnedMesh&&(xe.bindMode=this.bindMode,xe.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(ye(K.skeletons,this.skeleton),xe.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const _e=[];for(let Ee=0,be=this.material.length;Ee<be;Ee++)_e.push(ye(K.materials,this.material[Ee]));xe.material=_e}else xe.material=ye(K.materials,this.material);if(this.children.length>0){xe.children=[];for(let _e=0;_e<this.children.length;_e++)xe.children.push(this.children[_e].toJSON(K).object)}if(this.animations.length>0){xe.animations=[];for(let _e=0;_e<this.animations.length;_e++){const Ee=this.animations[_e];xe.animations.push(ye(K.animations,Ee))}}if(me){const _e=ve(K.geometries),Ee=ve(K.materials),be=ve(K.textures),Ae=ve(K.images),Se=ve(K.shapes),Ce=ve(K.skeletons),Te=ve(K.animations),Re=ve(K.nodes);_e.length>0&&(ge.geometries=_e),Ee.length>0&&(ge.materials=Ee),be.length>0&&(ge.textures=be),Ae.length>0&&(ge.images=Ae),Se.length>0&&(ge.shapes=Se),Ce.length>0&&(ge.skeletons=Ce),Te.length>0&&(ge.animations=Te),Re.length>0&&(ge.nodes=Re)}return ge.object=xe,ge;function ve(_e){const Ee=[];for(const be in _e){const Ae=_e[be];delete Ae.metadata,Ee.push(Ae)}return Ee}}clone(K){return new this.constructor().copy(this,K)}copy(K,me=!0){if(this.name=K.name,this.up.copy(K.up),this.position.copy(K.position),this.rotation.order=K.rotation.order,this.quaternion.copy(K.quaternion),this.scale.copy(K.scale),this.matrix.copy(K.matrix),this.matrixWorld.copy(K.matrixWorld),this.matrixAutoUpdate=K.matrixAutoUpdate,this.matrixWorldAutoUpdate=K.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=K.matrixWorldNeedsUpdate,this.layers.mask=K.layers.mask,this.visible=K.visible,this.castShadow=K.castShadow,this.receiveShadow=K.receiveShadow,this.frustumCulled=K.frustumCulled,this.renderOrder=K.renderOrder,this.animations=K.animations.slice(),this.userData=JSON.parse(JSON.stringify(K.userData)),me===!0)for(let ge=0;ge<K.children.length;ge++){const xe=K.children[ge];this.add(xe.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0);Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0;Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _v0$1=new Vector3,_v1$3=new Vector3,_v2$2=new Vector3,_v3$2=new Vector3,_vab=new Vector3,_vac=new Vector3,_vbc=new Vector3,_vap=new Vector3,_vbp=new Vector3,_vcp=new Vector3,_v40=new Vector4,_v41=new Vector4,_v42=new Vector4;class Triangle{constructor(K=new Vector3,me=new Vector3,ge=new Vector3){this.a=K,this.b=me,this.c=ge}static getNormal(K,me,ge,xe){xe.subVectors(ge,me),_v0$1.subVectors(K,me),xe.cross(_v0$1);const ye=xe.lengthSq();return ye>0?xe.multiplyScalar(1/Math.sqrt(ye)):xe.set(0,0,0)}static getBarycoord(K,me,ge,xe,ye){_v0$1.subVectors(xe,me),_v1$3.subVectors(ge,me),_v2$2.subVectors(K,me);const ve=_v0$1.dot(_v0$1),_e=_v0$1.dot(_v1$3),Ee=_v0$1.dot(_v2$2),be=_v1$3.dot(_v1$3),Ae=_v1$3.dot(_v2$2),Se=ve*be-_e*_e;if(Se===0)return ye.set(0,0,0),null;const Ce=1/Se,Te=(be*Ee-_e*Ae)*Ce,Re=(ve*Ae-_e*Ee)*Ce;return ye.set(1-Te-Re,Re,Te)}static containsPoint(K,me,ge,xe){return this.getBarycoord(K,me,ge,xe,_v3$2)===null?!1:_v3$2.x>=0&&_v3$2.y>=0&&_v3$2.x+_v3$2.y<=1}static getInterpolation(K,me,ge,xe,ye,ve,_e,Ee){return this.getBarycoord(K,me,ge,xe,_v3$2)===null?(Ee.x=0,Ee.y=0,"z"in Ee&&(Ee.z=0),"w"in Ee&&(Ee.w=0),null):(Ee.setScalar(0),Ee.addScaledVector(ye,_v3$2.x),Ee.addScaledVector(ve,_v3$2.y),Ee.addScaledVector(_e,_v3$2.z),Ee)}static getInterpolatedAttribute(K,me,ge,xe,ye,ve){return _v40.setScalar(0),_v41.setScalar(0),_v42.setScalar(0),_v40.fromBufferAttribute(K,me),_v41.fromBufferAttribute(K,ge),_v42.fromBufferAttribute(K,xe),ve.setScalar(0),ve.addScaledVector(_v40,ye.x),ve.addScaledVector(_v41,ye.y),ve.addScaledVector(_v42,ye.z),ve}static isFrontFacing(K,me,ge,xe){return _v0$1.subVectors(ge,me),_v1$3.subVectors(K,me),_v0$1.cross(_v1$3).dot(xe)<0}set(K,me,ge){return this.a.copy(K),this.b.copy(me),this.c.copy(ge),this}setFromPointsAndIndices(K,me,ge,xe){return this.a.copy(K[me]),this.b.copy(K[ge]),this.c.copy(K[xe]),this}setFromAttributeAndIndices(K,me,ge,xe){return this.a.fromBufferAttribute(K,me),this.b.fromBufferAttribute(K,ge),this.c.fromBufferAttribute(K,xe),this}clone(){return new this.constructor().copy(this)}copy(K){return this.a.copy(K.a),this.b.copy(K.b),this.c.copy(K.c),this}getArea(){return _v0$1.subVectors(this.c,this.b),_v1$3.subVectors(this.a,this.b),_v0$1.cross(_v1$3).length()*.5}getMidpoint(K){return K.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(K){return Triangle.getNormal(this.a,this.b,this.c,K)}getPlane(K){return K.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(K,me){return Triangle.getBarycoord(K,this.a,this.b,this.c,me)}getInterpolation(K,me,ge,xe,ye){return Triangle.getInterpolation(K,this.a,this.b,this.c,me,ge,xe,ye)}containsPoint(K){return Triangle.containsPoint(K,this.a,this.b,this.c)}isFrontFacing(K){return Triangle.isFrontFacing(this.a,this.b,this.c,K)}intersectsBox(K){return K.intersectsTriangle(this)}closestPointToPoint(K,me){const ge=this.a,xe=this.b,ye=this.c;let ve,_e;_vab.subVectors(xe,ge),_vac.subVectors(ye,ge),_vap.subVectors(K,ge);const Ee=_vab.dot(_vap),be=_vac.dot(_vap);if(Ee<=0&&be<=0)return me.copy(ge);_vbp.subVectors(K,xe);const Ae=_vab.dot(_vbp),Se=_vac.dot(_vbp);if(Ae>=0&&Se<=Ae)return me.copy(xe);const Ce=Ee*Se-Ae*be;if(Ce<=0&&Ee>=0&&Ae<=0)return ve=Ee/(Ee-Ae),me.copy(ge).addScaledVector(_vab,ve);_vcp.subVectors(K,ye);const Te=_vab.dot(_vcp),Re=_vac.dot(_vcp);if(Re>=0&&Te<=Re)return me.copy(ye);const De=Te*be-Ee*Re;if(De<=0&&be>=0&&Re<=0)return _e=be/(be-Re),me.copy(ge).addScaledVector(_vac,_e);const Ie=Ae*Re-Te*Se;if(Ie<=0&&Se-Ae>=0&&Te-Re>=0)return _vbc.subVectors(ye,xe),_e=(Se-Ae)/(Se-Ae+(Te-Re)),me.copy(xe).addScaledVector(_vbc,_e);const Be=1/(Ie+De+Ce);return ve=De*Be,_e=Ce*Be,me.copy(ge).addScaledVector(_vab,ve).addScaledVector(_vac,_e)}equals(K){return K.a.equals(this.a)&&K.b.equals(this.b)&&K.c.equals(this.c)}}const _colorKeywords={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_hslA={h:0,s:0,l:0},_hslB={h:0,s:0,l:0};function hue2rgb(fe,K,me){return me<0&&(me+=1),me>1&&(me-=1),me<1/6?fe+(K-fe)*6*me:me<1/2?K:me<2/3?fe+(K-fe)*6*(2/3-me):fe}let Color$1=class{constructor(K,me,ge){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(K,me,ge)}set(K,me,ge){if(me===void 0&&ge===void 0){const xe=K;xe&&xe.isColor?this.copy(xe):typeof xe=="number"?this.setHex(xe):typeof xe=="string"&&this.setStyle(xe)}else this.setRGB(K,me,ge);return this}setScalar(K){return this.r=K,this.g=K,this.b=K,this}setHex(K,me=SRGBColorSpace){return K=Math.floor(K),this.r=(K>>16&255)/255,this.g=(K>>8&255)/255,this.b=(K&255)/255,ColorManagement.toWorkingColorSpace(this,me),this}setRGB(K,me,ge,xe=ColorManagement.workingColorSpace){return this.r=K,this.g=me,this.b=ge,ColorManagement.toWorkingColorSpace(this,xe),this}setHSL(K,me,ge,xe=ColorManagement.workingColorSpace){if(K=euclideanModulo(K,1),me=clamp$1(me,0,1),ge=clamp$1(ge,0,1),me===0)this.r=this.g=this.b=ge;else{const ye=ge<=.5?ge*(1+me):ge+me-ge*me,ve=2*ge-ye;this.r=hue2rgb(ve,ye,K+1/3),this.g=hue2rgb(ve,ye,K),this.b=hue2rgb(ve,ye,K-1/3)}return ColorManagement.toWorkingColorSpace(this,xe),this}setStyle(K,me=SRGBColorSpace){function ge(ye){ye!==void 0&&parseFloat(ye)<1&&console.warn("THREE.Color: Alpha component of "+K+" will be ignored.")}let xe;if(xe=/^(\w+)\(([^\)]*)\)/.exec(K)){let ye;const ve=xe[1],_e=xe[2];switch(ve){case"rgb":case"rgba":if(ye=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_e))return ge(ye[4]),this.setRGB(Math.min(255,parseInt(ye[1],10))/255,Math.min(255,parseInt(ye[2],10))/255,Math.min(255,parseInt(ye[3],10))/255,me);if(ye=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_e))return ge(ye[4]),this.setRGB(Math.min(100,parseInt(ye[1],10))/100,Math.min(100,parseInt(ye[2],10))/100,Math.min(100,parseInt(ye[3],10))/100,me);break;case"hsl":case"hsla":if(ye=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_e))return ge(ye[4]),this.setHSL(parseFloat(ye[1])/360,parseFloat(ye[2])/100,parseFloat(ye[3])/100,me);break;default:console.warn("THREE.Color: Unknown color model "+K)}}else if(xe=/^\#([A-Fa-f\d]+)$/.exec(K)){const ye=xe[1],ve=ye.length;if(ve===3)return this.setRGB(parseInt(ye.charAt(0),16)/15,parseInt(ye.charAt(1),16)/15,parseInt(ye.charAt(2),16)/15,me);if(ve===6)return this.setHex(parseInt(ye,16),me);console.warn("THREE.Color: Invalid hex color "+K)}else if(K&&K.length>0)return this.setColorName(K,me);return this}setColorName(K,me=SRGBColorSpace){const ge=_colorKeywords[K.toLowerCase()];return ge!==void 0?this.setHex(ge,me):console.warn("THREE.Color: Unknown color "+K),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(K){return this.r=K.r,this.g=K.g,this.b=K.b,this}copySRGBToLinear(K){return this.r=SRGBToLinear(K.r),this.g=SRGBToLinear(K.g),this.b=SRGBToLinear(K.b),this}copyLinearToSRGB(K){return this.r=LinearToSRGB(K.r),this.g=LinearToSRGB(K.g),this.b=LinearToSRGB(K.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(K=SRGBColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),K),Math.round(clamp$1(_color.r*255,0,255))*65536+Math.round(clamp$1(_color.g*255,0,255))*256+Math.round(clamp$1(_color.b*255,0,255))}getHexString(K=SRGBColorSpace){return("000000"+this.getHex(K).toString(16)).slice(-6)}getHSL(K,me=ColorManagement.workingColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),me);const ge=_color.r,xe=_color.g,ye=_color.b,ve=Math.max(ge,xe,ye),_e=Math.min(ge,xe,ye);let Ee,be;const Ae=(_e+ve)/2;if(_e===ve)Ee=0,be=0;else{const Se=ve-_e;switch(be=Ae<=.5?Se/(ve+_e):Se/(2-ve-_e),ve){case ge:Ee=(xe-ye)/Se+(xe<ye?6:0);break;case xe:Ee=(ye-ge)/Se+2;break;case ye:Ee=(ge-xe)/Se+4;break}Ee/=6}return K.h=Ee,K.s=be,K.l=Ae,K}getRGB(K,me=ColorManagement.workingColorSpace){return ColorManagement.fromWorkingColorSpace(_color.copy(this),me),K.r=_color.r,K.g=_color.g,K.b=_color.b,K}getStyle(K=SRGBColorSpace){ColorManagement.fromWorkingColorSpace(_color.copy(this),K);const me=_color.r,ge=_color.g,xe=_color.b;return K!==SRGBColorSpace?`color(${K} ${me.toFixed(3)} ${ge.toFixed(3)} ${xe.toFixed(3)})`:`rgb(${Math.round(me*255)},${Math.round(ge*255)},${Math.round(xe*255)})`}offsetHSL(K,me,ge){return this.getHSL(_hslA),this.setHSL(_hslA.h+K,_hslA.s+me,_hslA.l+ge)}add(K){return this.r+=K.r,this.g+=K.g,this.b+=K.b,this}addColors(K,me){return this.r=K.r+me.r,this.g=K.g+me.g,this.b=K.b+me.b,this}addScalar(K){return this.r+=K,this.g+=K,this.b+=K,this}sub(K){return this.r=Math.max(0,this.r-K.r),this.g=Math.max(0,this.g-K.g),this.b=Math.max(0,this.b-K.b),this}multiply(K){return this.r*=K.r,this.g*=K.g,this.b*=K.b,this}multiplyScalar(K){return this.r*=K,this.g*=K,this.b*=K,this}lerp(K,me){return this.r+=(K.r-this.r)*me,this.g+=(K.g-this.g)*me,this.b+=(K.b-this.b)*me,this}lerpColors(K,me,ge){return this.r=K.r+(me.r-K.r)*ge,this.g=K.g+(me.g-K.g)*ge,this.b=K.b+(me.b-K.b)*ge,this}lerpHSL(K,me){this.getHSL(_hslA),K.getHSL(_hslB);const ge=lerp(_hslA.h,_hslB.h,me),xe=lerp(_hslA.s,_hslB.s,me),ye=lerp(_hslA.l,_hslB.l,me);return this.setHSL(ge,xe,ye),this}setFromVector3(K){return this.r=K.x,this.g=K.y,this.b=K.z,this}applyMatrix3(K){const me=this.r,ge=this.g,xe=this.b,ye=K.elements;return this.r=ye[0]*me+ye[3]*ge+ye[6]*xe,this.g=ye[1]*me+ye[4]*ge+ye[7]*xe,this.b=ye[2]*me+ye[5]*ge+ye[8]*xe,this}equals(K){return K.r===this.r&&K.g===this.g&&K.b===this.b}fromArray(K,me=0){return this.r=K[me],this.g=K[me+1],this.b=K[me+2],this}toArray(K=[],me=0){return K[me]=this.r,K[me+1]=this.g,K[me+2]=this.b,K}fromBufferAttribute(K,me){return this.r=K.getX(me),this.g=K.getY(me),this.b=K.getZ(me),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const _color=new Color$1;Color$1.NAMES=_colorKeywords;let _materialId=0;class Material extends EventDispatcher$2{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:_materialId++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=NormalBlending,this.side=FrontSide,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=SrcAlphaFactor,this.blendDst=OneMinusSrcAlphaFactor,this.blendEquation=AddEquation,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color$1(0,0,0),this.blendAlpha=0,this.depthFunc=LessEqualDepth,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=AlwaysStencilFunc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=KeepStencilOp,this.stencilZFail=KeepStencilOp,this.stencilZPass=KeepStencilOp,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(K){this._alphaTest>0!=K>0&&this.version++,this._alphaTest=K}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(K){if(K!==void 0)for(const me in K){const ge=K[me];if(ge===void 0){console.warn(`THREE.Material: parameter '${me}' has value of undefined.`);continue}const xe=this[me];if(xe===void 0){console.warn(`THREE.Material: '${me}' is not a property of THREE.${this.type}.`);continue}xe&&xe.isColor?xe.set(ge):xe&&xe.isVector3&&ge&&ge.isVector3?xe.copy(ge):this[me]=ge}}toJSON(K){const me=K===void 0||typeof K=="string";me&&(K={textures:{},images:{}});const ge={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};ge.uuid=this.uuid,ge.type=this.type,this.name!==""&&(ge.name=this.name),this.color&&this.color.isColor&&(ge.color=this.color.getHex()),this.roughness!==void 0&&(ge.roughness=this.roughness),this.metalness!==void 0&&(ge.metalness=this.metalness),this.sheen!==void 0&&(ge.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(ge.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(ge.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(ge.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(ge.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(ge.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(ge.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(ge.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(ge.shininess=this.shininess),this.clearcoat!==void 0&&(ge.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(ge.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(ge.clearcoatMap=this.clearcoatMap.toJSON(K).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(ge.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(K).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(ge.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(K).uuid,ge.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(ge.dispersion=this.dispersion),this.iridescence!==void 0&&(ge.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(ge.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(ge.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(ge.iridescenceMap=this.iridescenceMap.toJSON(K).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(ge.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(K).uuid),this.anisotropy!==void 0&&(ge.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(ge.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(ge.anisotropyMap=this.anisotropyMap.toJSON(K).uuid),this.map&&this.map.isTexture&&(ge.map=this.map.toJSON(K).uuid),this.matcap&&this.matcap.isTexture&&(ge.matcap=this.matcap.toJSON(K).uuid),this.alphaMap&&this.alphaMap.isTexture&&(ge.alphaMap=this.alphaMap.toJSON(K).uuid),this.lightMap&&this.lightMap.isTexture&&(ge.lightMap=this.lightMap.toJSON(K).uuid,ge.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(ge.aoMap=this.aoMap.toJSON(K).uuid,ge.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(ge.bumpMap=this.bumpMap.toJSON(K).uuid,ge.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(ge.normalMap=this.normalMap.toJSON(K).uuid,ge.normalMapType=this.normalMapType,ge.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(ge.displacementMap=this.displacementMap.toJSON(K).uuid,ge.displacementScale=this.displacementScale,ge.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(ge.roughnessMap=this.roughnessMap.toJSON(K).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(ge.metalnessMap=this.metalnessMap.toJSON(K).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(ge.emissiveMap=this.emissiveMap.toJSON(K).uuid),this.specularMap&&this.specularMap.isTexture&&(ge.specularMap=this.specularMap.toJSON(K).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(ge.specularIntensityMap=this.specularIntensityMap.toJSON(K).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(ge.specularColorMap=this.specularColorMap.toJSON(K).uuid),this.envMap&&this.envMap.isTexture&&(ge.envMap=this.envMap.toJSON(K).uuid,this.combine!==void 0&&(ge.combine=this.combine)),this.envMapRotation!==void 0&&(ge.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(ge.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(ge.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(ge.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(ge.gradientMap=this.gradientMap.toJSON(K).uuid),this.transmission!==void 0&&(ge.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(ge.transmissionMap=this.transmissionMap.toJSON(K).uuid),this.thickness!==void 0&&(ge.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(ge.thicknessMap=this.thicknessMap.toJSON(K).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(ge.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(ge.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(ge.size=this.size),this.shadowSide!==null&&(ge.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(ge.sizeAttenuation=this.sizeAttenuation),this.blending!==NormalBlending&&(ge.blending=this.blending),this.side!==FrontSide&&(ge.side=this.side),this.vertexColors===!0&&(ge.vertexColors=!0),this.opacity<1&&(ge.opacity=this.opacity),this.transparent===!0&&(ge.transparent=!0),this.blendSrc!==SrcAlphaFactor&&(ge.blendSrc=this.blendSrc),this.blendDst!==OneMinusSrcAlphaFactor&&(ge.blendDst=this.blendDst),this.blendEquation!==AddEquation&&(ge.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(ge.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(ge.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(ge.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(ge.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(ge.blendAlpha=this.blendAlpha),this.depthFunc!==LessEqualDepth&&(ge.depthFunc=this.depthFunc),this.depthTest===!1&&(ge.depthTest=this.depthTest),this.depthWrite===!1&&(ge.depthWrite=this.depthWrite),this.colorWrite===!1&&(ge.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(ge.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==AlwaysStencilFunc&&(ge.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(ge.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(ge.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==KeepStencilOp&&(ge.stencilFail=this.stencilFail),this.stencilZFail!==KeepStencilOp&&(ge.stencilZFail=this.stencilZFail),this.stencilZPass!==KeepStencilOp&&(ge.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(ge.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(ge.rotation=this.rotation),this.polygonOffset===!0&&(ge.polygonOffset=!0),this.polygonOffsetFactor!==0&&(ge.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(ge.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(ge.linewidth=this.linewidth),this.dashSize!==void 0&&(ge.dashSize=this.dashSize),this.gapSize!==void 0&&(ge.gapSize=this.gapSize),this.scale!==void 0&&(ge.scale=this.scale),this.dithering===!0&&(ge.dithering=!0),this.alphaTest>0&&(ge.alphaTest=this.alphaTest),this.alphaHash===!0&&(ge.alphaHash=!0),this.alphaToCoverage===!0&&(ge.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(ge.premultipliedAlpha=!0),this.forceSinglePass===!0&&(ge.forceSinglePass=!0),this.wireframe===!0&&(ge.wireframe=!0),this.wireframeLinewidth>1&&(ge.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(ge.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(ge.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(ge.flatShading=!0),this.visible===!1&&(ge.visible=!1),this.toneMapped===!1&&(ge.toneMapped=!1),this.fog===!1&&(ge.fog=!1),Object.keys(this.userData).length>0&&(ge.userData=this.userData);function xe(ye){const ve=[];for(const _e in ye){const Ee=ye[_e];delete Ee.metadata,ve.push(Ee)}return ve}if(me){const ye=xe(K.textures),ve=xe(K.images);ye.length>0&&(ge.textures=ye),ve.length>0&&(ge.images=ve)}return ge}clone(){return new this.constructor().copy(this)}copy(K){this.name=K.name,this.blending=K.blending,this.side=K.side,this.vertexColors=K.vertexColors,this.opacity=K.opacity,this.transparent=K.transparent,this.blendSrc=K.blendSrc,this.blendDst=K.blendDst,this.blendEquation=K.blendEquation,this.blendSrcAlpha=K.blendSrcAlpha,this.blendDstAlpha=K.blendDstAlpha,this.blendEquationAlpha=K.blendEquationAlpha,this.blendColor.copy(K.blendColor),this.blendAlpha=K.blendAlpha,this.depthFunc=K.depthFunc,this.depthTest=K.depthTest,this.depthWrite=K.depthWrite,this.stencilWriteMask=K.stencilWriteMask,this.stencilFunc=K.stencilFunc,this.stencilRef=K.stencilRef,this.stencilFuncMask=K.stencilFuncMask,this.stencilFail=K.stencilFail,this.stencilZFail=K.stencilZFail,this.stencilZPass=K.stencilZPass,this.stencilWrite=K.stencilWrite;const me=K.clippingPlanes;let ge=null;if(me!==null){const xe=me.length;ge=new Array(xe);for(let ye=0;ye!==xe;++ye)ge[ye]=me[ye].clone()}return this.clippingPlanes=ge,this.clipIntersection=K.clipIntersection,this.clipShadows=K.clipShadows,this.shadowSide=K.shadowSide,this.colorWrite=K.colorWrite,this.precision=K.precision,this.polygonOffset=K.polygonOffset,this.polygonOffsetFactor=K.polygonOffsetFactor,this.polygonOffsetUnits=K.polygonOffsetUnits,this.dithering=K.dithering,this.alphaTest=K.alphaTest,this.alphaHash=K.alphaHash,this.alphaToCoverage=K.alphaToCoverage,this.premultipliedAlpha=K.premultipliedAlpha,this.forceSinglePass=K.forceSinglePass,this.visible=K.visible,this.toneMapped=K.toneMapped,this.userData=JSON.parse(JSON.stringify(K.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(K){K===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class MeshBasicMaterial extends Material{constructor(K){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.color.copy(K.color),this.map=K.map,this.lightMap=K.lightMap,this.lightMapIntensity=K.lightMapIntensity,this.aoMap=K.aoMap,this.aoMapIntensity=K.aoMapIntensity,this.specularMap=K.specularMap,this.alphaMap=K.alphaMap,this.envMap=K.envMap,this.envMapRotation.copy(K.envMapRotation),this.combine=K.combine,this.reflectivity=K.reflectivity,this.refractionRatio=K.refractionRatio,this.wireframe=K.wireframe,this.wireframeLinewidth=K.wireframeLinewidth,this.wireframeLinecap=K.wireframeLinecap,this.wireframeLinejoin=K.wireframeLinejoin,this.fog=K.fog,this}}const _tables=_generateTables();function _generateTables(){const fe=new ArrayBuffer(4),K=new Float32Array(fe),me=new Uint32Array(fe),ge=new Uint32Array(512),xe=new Uint32Array(512);for(let Ee=0;Ee<256;++Ee){const be=Ee-127;be<-27?(ge[Ee]=0,ge[Ee|256]=32768,xe[Ee]=24,xe[Ee|256]=24):be<-14?(ge[Ee]=1024>>-be-14,ge[Ee|256]=1024>>-be-14|32768,xe[Ee]=-be-1,xe[Ee|256]=-be-1):be<=15?(ge[Ee]=be+15<<10,ge[Ee|256]=be+15<<10|32768,xe[Ee]=13,xe[Ee|256]=13):be<128?(ge[Ee]=31744,ge[Ee|256]=64512,xe[Ee]=24,xe[Ee|256]=24):(ge[Ee]=31744,ge[Ee|256]=64512,xe[Ee]=13,xe[Ee|256]=13)}const ye=new Uint32Array(2048),ve=new Uint32Array(64),_e=new Uint32Array(64);for(let Ee=1;Ee<1024;++Ee){let be=Ee<<13,Ae=0;for(;!(be&8388608);)be<<=1,Ae-=8388608;be&=-8388609,Ae+=947912704,ye[Ee]=be|Ae}for(let Ee=1024;Ee<2048;++Ee)ye[Ee]=939524096+(Ee-1024<<13);for(let Ee=1;Ee<31;++Ee)ve[Ee]=Ee<<23;ve[31]=1199570944,ve[32]=2147483648;for(let Ee=33;Ee<63;++Ee)ve[Ee]=2147483648+(Ee-32<<23);ve[63]=3347054592;for(let Ee=1;Ee<64;++Ee)Ee!==32&&(_e[Ee]=1024);return{floatView:K,uint32View:me,baseTable:ge,shiftTable:xe,mantissaTable:ye,exponentTable:ve,offsetTable:_e}}function toHalfFloat(fe){Math.abs(fe)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),fe=clamp$1(fe,-65504,65504),_tables.floatView[0]=fe;const K=_tables.uint32View[0],me=K>>23&511;return _tables.baseTable[me]+((K&8388607)>>_tables.shiftTable[me])}function fromHalfFloat(fe){const K=fe>>10;return _tables.uint32View[0]=_tables.mantissaTable[_tables.offsetTable[K]+(fe&1023)]+_tables.exponentTable[K],_tables.floatView[0]}class DataUtils{static toHalfFloat(K){return toHalfFloat(K)}static fromHalfFloat(K){return fromHalfFloat(K)}}const _vector$9=new Vector3,_vector2$1=new Vector2;let _id$2=0;class BufferAttribute{constructor(K,me,ge=!1){if(Array.isArray(K))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:_id$2++}),this.name="",this.array=K,this.itemSize=me,this.count=K!==void 0?K.length/me:0,this.normalized=ge,this.usage=StaticDrawUsage,this.updateRanges=[],this.gpuType=FloatType,this.version=0}onUploadCallback(){}set needsUpdate(K){K===!0&&this.version++}setUsage(K){return this.usage=K,this}addUpdateRange(K,me){this.updateRanges.push({start:K,count:me})}clearUpdateRanges(){this.updateRanges.length=0}copy(K){return this.name=K.name,this.array=new K.array.constructor(K.array),this.itemSize=K.itemSize,this.count=K.count,this.normalized=K.normalized,this.usage=K.usage,this.gpuType=K.gpuType,this}copyAt(K,me,ge){K*=this.itemSize,ge*=me.itemSize;for(let xe=0,ye=this.itemSize;xe<ye;xe++)this.array[K+xe]=me.array[ge+xe];return this}copyArray(K){return this.array.set(K),this}applyMatrix3(K){if(this.itemSize===2)for(let me=0,ge=this.count;me<ge;me++)_vector2$1.fromBufferAttribute(this,me),_vector2$1.applyMatrix3(K),this.setXY(me,_vector2$1.x,_vector2$1.y);else if(this.itemSize===3)for(let me=0,ge=this.count;me<ge;me++)_vector$9.fromBufferAttribute(this,me),_vector$9.applyMatrix3(K),this.setXYZ(me,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyMatrix4(K){for(let me=0,ge=this.count;me<ge;me++)_vector$9.fromBufferAttribute(this,me),_vector$9.applyMatrix4(K),this.setXYZ(me,_vector$9.x,_vector$9.y,_vector$9.z);return this}applyNormalMatrix(K){for(let me=0,ge=this.count;me<ge;me++)_vector$9.fromBufferAttribute(this,me),_vector$9.applyNormalMatrix(K),this.setXYZ(me,_vector$9.x,_vector$9.y,_vector$9.z);return this}transformDirection(K){for(let me=0,ge=this.count;me<ge;me++)_vector$9.fromBufferAttribute(this,me),_vector$9.transformDirection(K),this.setXYZ(me,_vector$9.x,_vector$9.y,_vector$9.z);return this}set(K,me=0){return this.array.set(K,me),this}getComponent(K,me){let ge=this.array[K*this.itemSize+me];return this.normalized&&(ge=denormalize(ge,this.array)),ge}setComponent(K,me,ge){return this.normalized&&(ge=normalize$2(ge,this.array)),this.array[K*this.itemSize+me]=ge,this}getX(K){let me=this.array[K*this.itemSize];return this.normalized&&(me=denormalize(me,this.array)),me}setX(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.array[K*this.itemSize]=me,this}getY(K){let me=this.array[K*this.itemSize+1];return this.normalized&&(me=denormalize(me,this.array)),me}setY(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.array[K*this.itemSize+1]=me,this}getZ(K){let me=this.array[K*this.itemSize+2];return this.normalized&&(me=denormalize(me,this.array)),me}setZ(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.array[K*this.itemSize+2]=me,this}getW(K){let me=this.array[K*this.itemSize+3];return this.normalized&&(me=denormalize(me,this.array)),me}setW(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.array[K*this.itemSize+3]=me,this}setXY(K,me,ge){return K*=this.itemSize,this.normalized&&(me=normalize$2(me,this.array),ge=normalize$2(ge,this.array)),this.array[K+0]=me,this.array[K+1]=ge,this}setXYZ(K,me,ge,xe){return K*=this.itemSize,this.normalized&&(me=normalize$2(me,this.array),ge=normalize$2(ge,this.array),xe=normalize$2(xe,this.array)),this.array[K+0]=me,this.array[K+1]=ge,this.array[K+2]=xe,this}setXYZW(K,me,ge,xe,ye){return K*=this.itemSize,this.normalized&&(me=normalize$2(me,this.array),ge=normalize$2(ge,this.array),xe=normalize$2(xe,this.array),ye=normalize$2(ye,this.array)),this.array[K+0]=me,this.array[K+1]=ge,this.array[K+2]=xe,this.array[K+3]=ye,this}onUpload(K){return this.onUploadCallback=K,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const K={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(K.name=this.name),this.usage!==StaticDrawUsage&&(K.usage=this.usage),K}}class Int8BufferAttribute extends BufferAttribute{constructor(K,me,ge){super(new Int8Array(K),me,ge)}}class Uint8BufferAttribute extends BufferAttribute{constructor(K,me,ge){super(new Uint8Array(K),me,ge)}}class Uint8ClampedBufferAttribute extends BufferAttribute{constructor(K,me,ge){super(new Uint8ClampedArray(K),me,ge)}}class Int16BufferAttribute extends BufferAttribute{constructor(K,me,ge){super(new Int16Array(K),me,ge)}}class Uint16BufferAttribute extends BufferAttribute{constructor(K,me,ge){super(new Uint16Array(K),me,ge)}}class Int32BufferAttribute extends BufferAttribute{constructor(K,me,ge){super(new Int32Array(K),me,ge)}}class Uint32BufferAttribute extends BufferAttribute{constructor(K,me,ge){super(new Uint32Array(K),me,ge)}}class Float16BufferAttribute extends BufferAttribute{constructor(K,me,ge){super(new Uint16Array(K),me,ge),this.isFloat16BufferAttribute=!0}getX(K){let me=fromHalfFloat(this.array[K*this.itemSize]);return this.normalized&&(me=denormalize(me,this.array)),me}setX(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.array[K*this.itemSize]=toHalfFloat(me),this}getY(K){let me=fromHalfFloat(this.array[K*this.itemSize+1]);return this.normalized&&(me=denormalize(me,this.array)),me}setY(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.array[K*this.itemSize+1]=toHalfFloat(me),this}getZ(K){let me=fromHalfFloat(this.array[K*this.itemSize+2]);return this.normalized&&(me=denormalize(me,this.array)),me}setZ(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.array[K*this.itemSize+2]=toHalfFloat(me),this}getW(K){let me=fromHalfFloat(this.array[K*this.itemSize+3]);return this.normalized&&(me=denormalize(me,this.array)),me}setW(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.array[K*this.itemSize+3]=toHalfFloat(me),this}setXY(K,me,ge){return K*=this.itemSize,this.normalized&&(me=normalize$2(me,this.array),ge=normalize$2(ge,this.array)),this.array[K+0]=toHalfFloat(me),this.array[K+1]=toHalfFloat(ge),this}setXYZ(K,me,ge,xe){return K*=this.itemSize,this.normalized&&(me=normalize$2(me,this.array),ge=normalize$2(ge,this.array),xe=normalize$2(xe,this.array)),this.array[K+0]=toHalfFloat(me),this.array[K+1]=toHalfFloat(ge),this.array[K+2]=toHalfFloat(xe),this}setXYZW(K,me,ge,xe,ye){return K*=this.itemSize,this.normalized&&(me=normalize$2(me,this.array),ge=normalize$2(ge,this.array),xe=normalize$2(xe,this.array),ye=normalize$2(ye,this.array)),this.array[K+0]=toHalfFloat(me),this.array[K+1]=toHalfFloat(ge),this.array[K+2]=toHalfFloat(xe),this.array[K+3]=toHalfFloat(ye),this}}class Float32BufferAttribute extends BufferAttribute{constructor(K,me,ge){super(new Float32Array(K),me,ge)}}let _id$1=0;const _m1$3=new Matrix4,_obj=new Object3D,_offset=new Vector3,_box$2=new Box3,_boxMorphTargets=new Box3,_vector$8=new Vector3;class BufferGeometry extends EventDispatcher$2{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_id$1++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(K){return Array.isArray(K)?this.index=new(arrayNeedsUint32(K)?Uint32BufferAttribute:Uint16BufferAttribute)(K,1):this.index=K,this}setIndirect(K){return this.indirect=K,this}getIndirect(){return this.indirect}getAttribute(K){return this.attributes[K]}setAttribute(K,me){return this.attributes[K]=me,this}deleteAttribute(K){return delete this.attributes[K],this}hasAttribute(K){return this.attributes[K]!==void 0}addGroup(K,me,ge=0){this.groups.push({start:K,count:me,materialIndex:ge})}clearGroups(){this.groups=[]}setDrawRange(K,me){this.drawRange.start=K,this.drawRange.count=me}applyMatrix4(K){const me=this.attributes.position;me!==void 0&&(me.applyMatrix4(K),me.needsUpdate=!0);const ge=this.attributes.normal;if(ge!==void 0){const ye=new Matrix3().getNormalMatrix(K);ge.applyNormalMatrix(ye),ge.needsUpdate=!0}const xe=this.attributes.tangent;return xe!==void 0&&(xe.transformDirection(K),xe.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(K){return _m1$3.makeRotationFromQuaternion(K),this.applyMatrix4(_m1$3),this}rotateX(K){return _m1$3.makeRotationX(K),this.applyMatrix4(_m1$3),this}rotateY(K){return _m1$3.makeRotationY(K),this.applyMatrix4(_m1$3),this}rotateZ(K){return _m1$3.makeRotationZ(K),this.applyMatrix4(_m1$3),this}translate(K,me,ge){return _m1$3.makeTranslation(K,me,ge),this.applyMatrix4(_m1$3),this}scale(K,me,ge){return _m1$3.makeScale(K,me,ge),this.applyMatrix4(_m1$3),this}lookAt(K){return _obj.lookAt(K),_obj.updateMatrix(),this.applyMatrix4(_obj.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(_offset).negate(),this.translate(_offset.x,_offset.y,_offset.z),this}setFromPoints(K){const me=this.getAttribute("position");if(me===void 0){const ge=[];for(let xe=0,ye=K.length;xe<ye;xe++){const ve=K[xe];ge.push(ve.x,ve.y,ve.z||0)}this.setAttribute("position",new Float32BufferAttribute(ge,3))}else{const ge=Math.min(K.length,me.count);for(let xe=0;xe<ge;xe++){const ye=K[xe];me.setXYZ(xe,ye.x,ye.y,ye.z||0)}K.length>me.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),me.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const K=this.attributes.position,me=this.morphAttributes.position;if(K&&K.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));return}if(K!==void 0){if(this.boundingBox.setFromBufferAttribute(K),me)for(let ge=0,xe=me.length;ge<xe;ge++){const ye=me[ge];_box$2.setFromBufferAttribute(ye),this.morphTargetsRelative?(_vector$8.addVectors(this.boundingBox.min,_box$2.min),this.boundingBox.expandByPoint(_vector$8),_vector$8.addVectors(this.boundingBox.max,_box$2.max),this.boundingBox.expandByPoint(_vector$8)):(this.boundingBox.expandByPoint(_box$2.min),this.boundingBox.expandByPoint(_box$2.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const K=this.attributes.position,me=this.morphAttributes.position;if(K&&K.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new Vector3,1/0);return}if(K){const ge=this.boundingSphere.center;if(_box$2.setFromBufferAttribute(K),me)for(let ye=0,ve=me.length;ye<ve;ye++){const _e=me[ye];_boxMorphTargets.setFromBufferAttribute(_e),this.morphTargetsRelative?(_vector$8.addVectors(_box$2.min,_boxMorphTargets.min),_box$2.expandByPoint(_vector$8),_vector$8.addVectors(_box$2.max,_boxMorphTargets.max),_box$2.expandByPoint(_vector$8)):(_box$2.expandByPoint(_boxMorphTargets.min),_box$2.expandByPoint(_boxMorphTargets.max))}_box$2.getCenter(ge);let xe=0;for(let ye=0,ve=K.count;ye<ve;ye++)_vector$8.fromBufferAttribute(K,ye),xe=Math.max(xe,ge.distanceToSquared(_vector$8));if(me)for(let ye=0,ve=me.length;ye<ve;ye++){const _e=me[ye],Ee=this.morphTargetsRelative;for(let be=0,Ae=_e.count;be<Ae;be++)_vector$8.fromBufferAttribute(_e,be),Ee&&(_offset.fromBufferAttribute(K,be),_vector$8.add(_offset)),xe=Math.max(xe,ge.distanceToSquared(_vector$8))}this.boundingSphere.radius=Math.sqrt(xe),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const K=this.index,me=this.attributes;if(K===null||me.position===void 0||me.normal===void 0||me.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const ge=me.position,xe=me.normal,ye=me.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*ge.count),4));const ve=this.getAttribute("tangent"),_e=[],Ee=[];for(let ze=0;ze<ge.count;ze++)_e[ze]=new Vector3,Ee[ze]=new Vector3;const be=new Vector3,Ae=new Vector3,Se=new Vector3,Ce=new Vector2,Te=new Vector2,Re=new Vector2,De=new Vector3,Ie=new Vector3;function Be(ze,je,Ge){be.fromBufferAttribute(ge,ze),Ae.fromBufferAttribute(ge,je),Se.fromBufferAttribute(ge,Ge),Ce.fromBufferAttribute(ye,ze),Te.fromBufferAttribute(ye,je),Re.fromBufferAttribute(ye,Ge),Ae.sub(be),Se.sub(be),Te.sub(Ce),Re.sub(Ce);const Xe=1/(Te.x*Re.y-Re.x*Te.y);isFinite(Xe)&&(De.copy(Ae).multiplyScalar(Re.y).addScaledVector(Se,-Te.y).multiplyScalar(Xe),Ie.copy(Se).multiplyScalar(Te.x).addScaledVector(Ae,-Re.x).multiplyScalar(Xe),_e[ze].add(De),_e[je].add(De),_e[Ge].add(De),Ee[ze].add(Ie),Ee[je].add(Ie),Ee[Ge].add(Ie))}let Le=this.groups;Le.length===0&&(Le=[{start:0,count:K.count}]);for(let ze=0,je=Le.length;ze<je;++ze){const Ge=Le[ze],Xe=Ge.start,qe=Ge.count;for(let Qe=Xe,nt=Xe+qe;Qe<nt;Qe+=3)Be(K.getX(Qe+0),K.getX(Qe+1),K.getX(Qe+2))}const Oe=new Vector3,Fe=new Vector3,Ue=new Vector3,Ne=new Vector3;function He(ze){Ue.fromBufferAttribute(xe,ze),Ne.copy(Ue);const je=_e[ze];Oe.copy(je),Oe.sub(Ue.multiplyScalar(Ue.dot(je))).normalize(),Fe.crossVectors(Ne,je);const Xe=Fe.dot(Ee[ze])<0?-1:1;ve.setXYZW(ze,Oe.x,Oe.y,Oe.z,Xe)}for(let ze=0,je=Le.length;ze<je;++ze){const Ge=Le[ze],Xe=Ge.start,qe=Ge.count;for(let Qe=Xe,nt=Xe+qe;Qe<nt;Qe+=3)He(K.getX(Qe+0)),He(K.getX(Qe+1)),He(K.getX(Qe+2))}}computeVertexNormals(){const K=this.index,me=this.getAttribute("position");if(me!==void 0){let ge=this.getAttribute("normal");if(ge===void 0)ge=new BufferAttribute(new Float32Array(me.count*3),3),this.setAttribute("normal",ge);else for(let Ce=0,Te=ge.count;Ce<Te;Ce++)ge.setXYZ(Ce,0,0,0);const xe=new Vector3,ye=new Vector3,ve=new Vector3,_e=new Vector3,Ee=new Vector3,be=new Vector3,Ae=new Vector3,Se=new Vector3;if(K)for(let Ce=0,Te=K.count;Ce<Te;Ce+=3){const Re=K.getX(Ce+0),De=K.getX(Ce+1),Ie=K.getX(Ce+2);xe.fromBufferAttribute(me,Re),ye.fromBufferAttribute(me,De),ve.fromBufferAttribute(me,Ie),Ae.subVectors(ve,ye),Se.subVectors(xe,ye),Ae.cross(Se),_e.fromBufferAttribute(ge,Re),Ee.fromBufferAttribute(ge,De),be.fromBufferAttribute(ge,Ie),_e.add(Ae),Ee.add(Ae),be.add(Ae),ge.setXYZ(Re,_e.x,_e.y,_e.z),ge.setXYZ(De,Ee.x,Ee.y,Ee.z),ge.setXYZ(Ie,be.x,be.y,be.z)}else for(let Ce=0,Te=me.count;Ce<Te;Ce+=3)xe.fromBufferAttribute(me,Ce+0),ye.fromBufferAttribute(me,Ce+1),ve.fromBufferAttribute(me,Ce+2),Ae.subVectors(ve,ye),Se.subVectors(xe,ye),Ae.cross(Se),ge.setXYZ(Ce+0,Ae.x,Ae.y,Ae.z),ge.setXYZ(Ce+1,Ae.x,Ae.y,Ae.z),ge.setXYZ(Ce+2,Ae.x,Ae.y,Ae.z);this.normalizeNormals(),ge.needsUpdate=!0}}normalizeNormals(){const K=this.attributes.normal;for(let me=0,ge=K.count;me<ge;me++)_vector$8.fromBufferAttribute(K,me),_vector$8.normalize(),K.setXYZ(me,_vector$8.x,_vector$8.y,_vector$8.z)}toNonIndexed(){function K(_e,Ee){const be=_e.array,Ae=_e.itemSize,Se=_e.normalized,Ce=new be.constructor(Ee.length*Ae);let Te=0,Re=0;for(let De=0,Ie=Ee.length;De<Ie;De++){_e.isInterleavedBufferAttribute?Te=Ee[De]*_e.data.stride+_e.offset:Te=Ee[De]*Ae;for(let Be=0;Be<Ae;Be++)Ce[Re++]=be[Te++]}return new BufferAttribute(Ce,Ae,Se)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const me=new BufferGeometry,ge=this.index.array,xe=this.attributes;for(const _e in xe){const Ee=xe[_e],be=K(Ee,ge);me.setAttribute(_e,be)}const ye=this.morphAttributes;for(const _e in ye){const Ee=[],be=ye[_e];for(let Ae=0,Se=be.length;Ae<Se;Ae++){const Ce=be[Ae],Te=K(Ce,ge);Ee.push(Te)}me.morphAttributes[_e]=Ee}me.morphTargetsRelative=this.morphTargetsRelative;const ve=this.groups;for(let _e=0,Ee=ve.length;_e<Ee;_e++){const be=ve[_e];me.addGroup(be.start,be.count,be.materialIndex)}return me}toJSON(){const K={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(K.uuid=this.uuid,K.type=this.type,this.name!==""&&(K.name=this.name),Object.keys(this.userData).length>0&&(K.userData=this.userData),this.parameters!==void 0){const Ee=this.parameters;for(const be in Ee)Ee[be]!==void 0&&(K[be]=Ee[be]);return K}K.data={attributes:{}};const me=this.index;me!==null&&(K.data.index={type:me.array.constructor.name,array:Array.prototype.slice.call(me.array)});const ge=this.attributes;for(const Ee in ge){const be=ge[Ee];K.data.attributes[Ee]=be.toJSON(K.data)}const xe={};let ye=!1;for(const Ee in this.morphAttributes){const be=this.morphAttributes[Ee],Ae=[];for(let Se=0,Ce=be.length;Se<Ce;Se++){const Te=be[Se];Ae.push(Te.toJSON(K.data))}Ae.length>0&&(xe[Ee]=Ae,ye=!0)}ye&&(K.data.morphAttributes=xe,K.data.morphTargetsRelative=this.morphTargetsRelative);const ve=this.groups;ve.length>0&&(K.data.groups=JSON.parse(JSON.stringify(ve)));const _e=this.boundingSphere;return _e!==null&&(K.data.boundingSphere={center:_e.center.toArray(),radius:_e.radius}),K}clone(){return new this.constructor().copy(this)}copy(K){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const me={};this.name=K.name;const ge=K.index;ge!==null&&this.setIndex(ge.clone(me));const xe=K.attributes;for(const be in xe){const Ae=xe[be];this.setAttribute(be,Ae.clone(me))}const ye=K.morphAttributes;for(const be in ye){const Ae=[],Se=ye[be];for(let Ce=0,Te=Se.length;Ce<Te;Ce++)Ae.push(Se[Ce].clone(me));this.morphAttributes[be]=Ae}this.morphTargetsRelative=K.morphTargetsRelative;const ve=K.groups;for(let be=0,Ae=ve.length;be<Ae;be++){const Se=ve[be];this.addGroup(Se.start,Se.count,Se.materialIndex)}const _e=K.boundingBox;_e!==null&&(this.boundingBox=_e.clone());const Ee=K.boundingSphere;return Ee!==null&&(this.boundingSphere=Ee.clone()),this.drawRange.start=K.drawRange.start,this.drawRange.count=K.drawRange.count,this.userData=K.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _inverseMatrix$3=new Matrix4,_ray$3=new Ray,_sphere$6=new Sphere,_sphereHitAt=new Vector3,_vA$1=new Vector3,_vB$1=new Vector3,_vC$1=new Vector3,_tempA=new Vector3,_morphA=new Vector3,_intersectionPoint$1=new Vector3,_intersectionPointWorld=new Vector3;class Mesh extends Object3D{constructor(K=new BufferGeometry,me=new MeshBasicMaterial){super(),this.isMesh=!0,this.type="Mesh",this.geometry=K,this.material=me,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(K,me){return super.copy(K,me),K.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=K.morphTargetInfluences.slice()),K.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},K.morphTargetDictionary)),this.material=Array.isArray(K.material)?K.material.slice():K.material,this.geometry=K.geometry,this}updateMorphTargets(){const me=this.geometry.morphAttributes,ge=Object.keys(me);if(ge.length>0){const xe=me[ge[0]];if(xe!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ye=0,ve=xe.length;ye<ve;ye++){const _e=xe[ye].name||String(ye);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_e]=ye}}}}getVertexPosition(K,me){const ge=this.geometry,xe=ge.attributes.position,ye=ge.morphAttributes.position,ve=ge.morphTargetsRelative;me.fromBufferAttribute(xe,K);const _e=this.morphTargetInfluences;if(ye&&_e){_morphA.set(0,0,0);for(let Ee=0,be=ye.length;Ee<be;Ee++){const Ae=_e[Ee],Se=ye[Ee];Ae!==0&&(_tempA.fromBufferAttribute(Se,K),ve?_morphA.addScaledVector(_tempA,Ae):_morphA.addScaledVector(_tempA.sub(me),Ae))}me.add(_morphA)}return me}raycast(K,me){const ge=this.geometry,xe=this.material,ye=this.matrixWorld;xe!==void 0&&(ge.boundingSphere===null&&ge.computeBoundingSphere(),_sphere$6.copy(ge.boundingSphere),_sphere$6.applyMatrix4(ye),_ray$3.copy(K.ray).recast(K.near),!(_sphere$6.containsPoint(_ray$3.origin)===!1&&(_ray$3.intersectSphere(_sphere$6,_sphereHitAt)===null||_ray$3.origin.distanceToSquared(_sphereHitAt)>(K.far-K.near)**2))&&(_inverseMatrix$3.copy(ye).invert(),_ray$3.copy(K.ray).applyMatrix4(_inverseMatrix$3),!(ge.boundingBox!==null&&_ray$3.intersectsBox(ge.boundingBox)===!1)&&this._computeIntersections(K,me,_ray$3)))}_computeIntersections(K,me,ge){let xe;const ye=this.geometry,ve=this.material,_e=ye.index,Ee=ye.attributes.position,be=ye.attributes.uv,Ae=ye.attributes.uv1,Se=ye.attributes.normal,Ce=ye.groups,Te=ye.drawRange;if(_e!==null)if(Array.isArray(ve))for(let Re=0,De=Ce.length;Re<De;Re++){const Ie=Ce[Re],Be=ve[Ie.materialIndex],Le=Math.max(Ie.start,Te.start),Oe=Math.min(_e.count,Math.min(Ie.start+Ie.count,Te.start+Te.count));for(let Fe=Le,Ue=Oe;Fe<Ue;Fe+=3){const Ne=_e.getX(Fe),He=_e.getX(Fe+1),ze=_e.getX(Fe+2);xe=checkGeometryIntersection(this,Be,K,ge,be,Ae,Se,Ne,He,ze),xe&&(xe.faceIndex=Math.floor(Fe/3),xe.face.materialIndex=Ie.materialIndex,me.push(xe))}}else{const Re=Math.max(0,Te.start),De=Math.min(_e.count,Te.start+Te.count);for(let Ie=Re,Be=De;Ie<Be;Ie+=3){const Le=_e.getX(Ie),Oe=_e.getX(Ie+1),Fe=_e.getX(Ie+2);xe=checkGeometryIntersection(this,ve,K,ge,be,Ae,Se,Le,Oe,Fe),xe&&(xe.faceIndex=Math.floor(Ie/3),me.push(xe))}}else if(Ee!==void 0)if(Array.isArray(ve))for(let Re=0,De=Ce.length;Re<De;Re++){const Ie=Ce[Re],Be=ve[Ie.materialIndex],Le=Math.max(Ie.start,Te.start),Oe=Math.min(Ee.count,Math.min(Ie.start+Ie.count,Te.start+Te.count));for(let Fe=Le,Ue=Oe;Fe<Ue;Fe+=3){const Ne=Fe,He=Fe+1,ze=Fe+2;xe=checkGeometryIntersection(this,Be,K,ge,be,Ae,Se,Ne,He,ze),xe&&(xe.faceIndex=Math.floor(Fe/3),xe.face.materialIndex=Ie.materialIndex,me.push(xe))}}else{const Re=Math.max(0,Te.start),De=Math.min(Ee.count,Te.start+Te.count);for(let Ie=Re,Be=De;Ie<Be;Ie+=3){const Le=Ie,Oe=Ie+1,Fe=Ie+2;xe=checkGeometryIntersection(this,ve,K,ge,be,Ae,Se,Le,Oe,Fe),xe&&(xe.faceIndex=Math.floor(Ie/3),me.push(xe))}}}}function checkIntersection$1(fe,K,me,ge,xe,ye,ve,_e){let Ee;if(K.side===BackSide?Ee=ge.intersectTriangle(ve,ye,xe,!0,_e):Ee=ge.intersectTriangle(xe,ye,ve,K.side===FrontSide,_e),Ee===null)return null;_intersectionPointWorld.copy(_e),_intersectionPointWorld.applyMatrix4(fe.matrixWorld);const be=me.ray.origin.distanceTo(_intersectionPointWorld);return be<me.near||be>me.far?null:{distance:be,point:_intersectionPointWorld.clone(),object:fe}}function checkGeometryIntersection(fe,K,me,ge,xe,ye,ve,_e,Ee,be){fe.getVertexPosition(_e,_vA$1),fe.getVertexPosition(Ee,_vB$1),fe.getVertexPosition(be,_vC$1);const Ae=checkIntersection$1(fe,K,me,ge,_vA$1,_vB$1,_vC$1,_intersectionPoint$1);if(Ae){const Se=new Vector3;Triangle.getBarycoord(_intersectionPoint$1,_vA$1,_vB$1,_vC$1,Se),xe&&(Ae.uv=Triangle.getInterpolatedAttribute(xe,_e,Ee,be,Se,new Vector2)),ye&&(Ae.uv1=Triangle.getInterpolatedAttribute(ye,_e,Ee,be,Se,new Vector2)),ve&&(Ae.normal=Triangle.getInterpolatedAttribute(ve,_e,Ee,be,Se,new Vector3),Ae.normal.dot(ge.direction)>0&&Ae.normal.multiplyScalar(-1));const Ce={a:_e,b:Ee,c:be,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA$1,_vB$1,_vC$1,Ce.normal),Ae.face=Ce,Ae.barycoord=Se}return Ae}class BoxGeometry extends BufferGeometry{constructor(K=1,me=1,ge=1,xe=1,ye=1,ve=1){super(),this.type="BoxGeometry",this.parameters={width:K,height:me,depth:ge,widthSegments:xe,heightSegments:ye,depthSegments:ve};const _e=this;xe=Math.floor(xe),ye=Math.floor(ye),ve=Math.floor(ve);const Ee=[],be=[],Ae=[],Se=[];let Ce=0,Te=0;Re("z","y","x",-1,-1,ge,me,K,ve,ye,0),Re("z","y","x",1,-1,ge,me,-K,ve,ye,1),Re("x","z","y",1,1,K,ge,me,xe,ve,2),Re("x","z","y",1,-1,K,ge,-me,xe,ve,3),Re("x","y","z",1,-1,K,me,ge,xe,ye,4),Re("x","y","z",-1,-1,K,me,-ge,xe,ye,5),this.setIndex(Ee),this.setAttribute("position",new Float32BufferAttribute(be,3)),this.setAttribute("normal",new Float32BufferAttribute(Ae,3)),this.setAttribute("uv",new Float32BufferAttribute(Se,2));function Re(De,Ie,Be,Le,Oe,Fe,Ue,Ne,He,ze,je){const Ge=Fe/He,Xe=Ue/ze,qe=Fe/2,Qe=Ue/2,nt=Ne/2,Nt=He+1,Ye=ze+1;let at=0,rt=0;const Ft=new Vector3;for(let Je=0;Je<Ye;Je++){const Wt=Je*Xe-Qe;for(let Kt=0;Kt<Nt;Kt++){const Pt=Kt*Ge-qe;Ft[De]=Pt*Le,Ft[Ie]=Wt*Oe,Ft[Be]=nt,be.push(Ft.x,Ft.y,Ft.z),Ft[De]=0,Ft[Ie]=0,Ft[Be]=Ne>0?1:-1,Ae.push(Ft.x,Ft.y,Ft.z),Se.push(Kt/He),Se.push(1-Je/ze),at+=1}}for(let Je=0;Je<ze;Je++)for(let Wt=0;Wt<He;Wt++){const Kt=Ce+Wt+Nt*Je,Pt=Ce+Wt+Nt*(Je+1),Yt=Ce+(Wt+1)+Nt*(Je+1),Gt=Ce+(Wt+1)+Nt*Je;Ee.push(Kt,Pt,Gt),Ee.push(Pt,Yt,Gt),rt+=6}_e.addGroup(Te,rt,je),Te+=rt,Ce+=at}}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new BoxGeometry(K.width,K.height,K.depth,K.widthSegments,K.heightSegments,K.depthSegments)}}function cloneUniforms(fe){const K={};for(const me in fe){K[me]={};for(const ge in fe[me]){const xe=fe[me][ge];xe&&(xe.isColor||xe.isMatrix3||xe.isMatrix4||xe.isVector2||xe.isVector3||xe.isVector4||xe.isTexture||xe.isQuaternion)?xe.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),K[me][ge]=null):K[me][ge]=xe.clone():Array.isArray(xe)?K[me][ge]=xe.slice():K[me][ge]=xe}}return K}function mergeUniforms(fe){const K={};for(let me=0;me<fe.length;me++){const ge=cloneUniforms(fe[me]);for(const xe in ge)K[xe]=ge[xe]}return K}function cloneUniformsGroups(fe){const K=[];for(let me=0;me<fe.length;me++)K.push(fe[me].clone());return K}function getUnlitUniformColorSpace(fe){const K=fe.getRenderTarget();return K===null?fe.outputColorSpace:K.isXRRenderTarget===!0?K.texture.colorSpace:ColorManagement.workingColorSpace}const UniformsUtils={clone:cloneUniforms,merge:mergeUniforms};var default_vertex=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,default_fragment=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ShaderMaterial extends Material{constructor(K){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=default_vertex,this.fragmentShader=default_fragment,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,K!==void 0&&this.setValues(K)}copy(K){return super.copy(K),this.fragmentShader=K.fragmentShader,this.vertexShader=K.vertexShader,this.uniforms=cloneUniforms(K.uniforms),this.uniformsGroups=cloneUniformsGroups(K.uniformsGroups),this.defines=Object.assign({},K.defines),this.wireframe=K.wireframe,this.wireframeLinewidth=K.wireframeLinewidth,this.fog=K.fog,this.lights=K.lights,this.clipping=K.clipping,this.extensions=Object.assign({},K.extensions),this.glslVersion=K.glslVersion,this}toJSON(K){const me=super.toJSON(K);me.glslVersion=this.glslVersion,me.uniforms={};for(const xe in this.uniforms){const ve=this.uniforms[xe].value;ve&&ve.isTexture?me.uniforms[xe]={type:"t",value:ve.toJSON(K).uuid}:ve&&ve.isColor?me.uniforms[xe]={type:"c",value:ve.getHex()}:ve&&ve.isVector2?me.uniforms[xe]={type:"v2",value:ve.toArray()}:ve&&ve.isVector3?me.uniforms[xe]={type:"v3",value:ve.toArray()}:ve&&ve.isVector4?me.uniforms[xe]={type:"v4",value:ve.toArray()}:ve&&ve.isMatrix3?me.uniforms[xe]={type:"m3",value:ve.toArray()}:ve&&ve.isMatrix4?me.uniforms[xe]={type:"m4",value:ve.toArray()}:me.uniforms[xe]={value:ve}}Object.keys(this.defines).length>0&&(me.defines=this.defines),me.vertexShader=this.vertexShader,me.fragmentShader=this.fragmentShader,me.lights=this.lights,me.clipping=this.clipping;const ge={};for(const xe in this.extensions)this.extensions[xe]===!0&&(ge[xe]=!0);return Object.keys(ge).length>0&&(me.extensions=ge),me}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=WebGLCoordinateSystem}copy(K,me){return super.copy(K,me),this.matrixWorldInverse.copy(K.matrixWorldInverse),this.projectionMatrix.copy(K.projectionMatrix),this.projectionMatrixInverse.copy(K.projectionMatrixInverse),this.coordinateSystem=K.coordinateSystem,this}getWorldDirection(K){return super.getWorldDirection(K).negate()}updateMatrixWorld(K){super.updateMatrixWorld(K),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(K,me){super.updateWorldMatrix(K,me),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const _v3$1=new Vector3,_minTarget=new Vector2,_maxTarget=new Vector2;class PerspectiveCamera extends Camera{constructor(K=50,me=1,ge=.1,xe=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=K,this.zoom=1,this.near=ge,this.far=xe,this.focus=10,this.aspect=me,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(K,me){return super.copy(K,me),this.fov=K.fov,this.zoom=K.zoom,this.near=K.near,this.far=K.far,this.focus=K.focus,this.aspect=K.aspect,this.view=K.view===null?null:Object.assign({},K.view),this.filmGauge=K.filmGauge,this.filmOffset=K.filmOffset,this}setFocalLength(K){const me=.5*this.getFilmHeight()/K;this.fov=RAD2DEG*2*Math.atan(me),this.updateProjectionMatrix()}getFocalLength(){const K=Math.tan(DEG2RAD$1*.5*this.fov);return .5*this.getFilmHeight()/K}getEffectiveFOV(){return RAD2DEG*2*Math.atan(Math.tan(DEG2RAD$1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(K,me,ge){_v3$1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),me.set(_v3$1.x,_v3$1.y).multiplyScalar(-K/_v3$1.z),_v3$1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),ge.set(_v3$1.x,_v3$1.y).multiplyScalar(-K/_v3$1.z)}getViewSize(K,me){return this.getViewBounds(K,_minTarget,_maxTarget),me.subVectors(_maxTarget,_minTarget)}setViewOffset(K,me,ge,xe,ye,ve){this.aspect=K/me,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=K,this.view.fullHeight=me,this.view.offsetX=ge,this.view.offsetY=xe,this.view.width=ye,this.view.height=ve,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const K=this.near;let me=K*Math.tan(DEG2RAD$1*.5*this.fov)/this.zoom,ge=2*me,xe=this.aspect*ge,ye=-.5*xe;const ve=this.view;if(this.view!==null&&this.view.enabled){const Ee=ve.fullWidth,be=ve.fullHeight;ye+=ve.offsetX*xe/Ee,me-=ve.offsetY*ge/be,xe*=ve.width/Ee,ge*=ve.height/be}const _e=this.filmOffset;_e!==0&&(ye+=K*_e/this.getFilmWidth()),this.projectionMatrix.makePerspective(ye,ye+xe,me,me-ge,K,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(K){const me=super.toJSON(K);return me.object.fov=this.fov,me.object.zoom=this.zoom,me.object.near=this.near,me.object.far=this.far,me.object.focus=this.focus,me.object.aspect=this.aspect,this.view!==null&&(me.object.view=Object.assign({},this.view)),me.object.filmGauge=this.filmGauge,me.object.filmOffset=this.filmOffset,me}}const fov=-90,aspect=1;class CubeCamera extends Object3D{constructor(K,me,ge){super(),this.type="CubeCamera",this.renderTarget=ge,this.coordinateSystem=null,this.activeMipmapLevel=0;const xe=new PerspectiveCamera(fov,aspect,K,me);xe.layers=this.layers,this.add(xe);const ye=new PerspectiveCamera(fov,aspect,K,me);ye.layers=this.layers,this.add(ye);const ve=new PerspectiveCamera(fov,aspect,K,me);ve.layers=this.layers,this.add(ve);const _e=new PerspectiveCamera(fov,aspect,K,me);_e.layers=this.layers,this.add(_e);const Ee=new PerspectiveCamera(fov,aspect,K,me);Ee.layers=this.layers,this.add(Ee);const be=new PerspectiveCamera(fov,aspect,K,me);be.layers=this.layers,this.add(be)}updateCoordinateSystem(){const K=this.coordinateSystem,me=this.children.concat(),[ge,xe,ye,ve,_e,Ee]=me;for(const be of me)this.remove(be);if(K===WebGLCoordinateSystem)ge.up.set(0,1,0),ge.lookAt(1,0,0),xe.up.set(0,1,0),xe.lookAt(-1,0,0),ye.up.set(0,0,-1),ye.lookAt(0,1,0),ve.up.set(0,0,1),ve.lookAt(0,-1,0),_e.up.set(0,1,0),_e.lookAt(0,0,1),Ee.up.set(0,1,0),Ee.lookAt(0,0,-1);else if(K===WebGPUCoordinateSystem)ge.up.set(0,-1,0),ge.lookAt(-1,0,0),xe.up.set(0,-1,0),xe.lookAt(1,0,0),ye.up.set(0,0,1),ye.lookAt(0,1,0),ve.up.set(0,0,-1),ve.lookAt(0,-1,0),_e.up.set(0,-1,0),_e.lookAt(0,0,1),Ee.up.set(0,-1,0),Ee.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+K);for(const be of me)this.add(be),be.updateMatrixWorld()}update(K,me){this.parent===null&&this.updateMatrixWorld();const{renderTarget:ge,activeMipmapLevel:xe}=this;this.coordinateSystem!==K.coordinateSystem&&(this.coordinateSystem=K.coordinateSystem,this.updateCoordinateSystem());const[ye,ve,_e,Ee,be,Ae]=this.children,Se=K.getRenderTarget(),Ce=K.getActiveCubeFace(),Te=K.getActiveMipmapLevel(),Re=K.xr.enabled;K.xr.enabled=!1;const De=ge.texture.generateMipmaps;ge.texture.generateMipmaps=!1,K.setRenderTarget(ge,0,xe),K.render(me,ye),K.setRenderTarget(ge,1,xe),K.render(me,ve),K.setRenderTarget(ge,2,xe),K.render(me,_e),K.setRenderTarget(ge,3,xe),K.render(me,Ee),K.setRenderTarget(ge,4,xe),K.render(me,be),ge.texture.generateMipmaps=De,K.setRenderTarget(ge,5,xe),K.render(me,Ae),K.setRenderTarget(Se,Ce,Te),K.xr.enabled=Re,ge.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(K,me,ge,xe,ye,ve,_e,Ee,be,Ae){K=K!==void 0?K:[],me=me!==void 0?me:CubeReflectionMapping,super(K,me,ge,xe,ye,ve,_e,Ee,be,Ae),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(K){this.image=K}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(K=1,me={}){super(K,K,me),this.isWebGLCubeRenderTarget=!0;const ge={width:K,height:K,depth:1},xe=[ge,ge,ge,ge,ge,ge];this.texture=new CubeTexture(xe,me.mapping,me.wrapS,me.wrapT,me.magFilter,me.minFilter,me.format,me.type,me.anisotropy,me.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=me.generateMipmaps!==void 0?me.generateMipmaps:!1,this.texture.minFilter=me.minFilter!==void 0?me.minFilter:LinearFilter}fromEquirectangularTexture(K,me){this.texture.type=me.type,this.texture.colorSpace=me.colorSpace,this.texture.generateMipmaps=me.generateMipmaps,this.texture.minFilter=me.minFilter,this.texture.magFilter=me.magFilter;const ge={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},xe=new BoxGeometry(5,5,5),ye=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(ge.uniforms),vertexShader:ge.vertexShader,fragmentShader:ge.fragmentShader,side:BackSide,blending:NoBlending});ye.uniforms.tEquirect.value=me;const ve=new Mesh(xe,ye),_e=me.minFilter;return me.minFilter===LinearMipmapLinearFilter&&(me.minFilter=LinearFilter),new CubeCamera(1,10,this).update(K,ve),me.minFilter=_e,ve.geometry.dispose(),ve.material.dispose(),this}clear(K,me,ge,xe){const ye=K.getRenderTarget();for(let ve=0;ve<6;ve++)K.setRenderTarget(this,ve),K.clear(me,ge,xe);K.setRenderTarget(ye)}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const _moveEvent={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(K){return this._targetRay!==null&&this._targetRay.dispatchEvent(K),this._grip!==null&&this._grip.dispatchEvent(K),this._hand!==null&&this._hand.dispatchEvent(K),this}connect(K){if(K&&K.hand){const me=this._hand;if(me)for(const ge of K.hand.values())this._getHandJoint(me,ge)}return this.dispatchEvent({type:"connected",data:K}),this}disconnect(K){return this.dispatchEvent({type:"disconnected",data:K}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(K,me,ge){let xe=null,ye=null,ve=null;const _e=this._targetRay,Ee=this._grip,be=this._hand;if(K&&me.session.visibilityState!=="visible-blurred"){if(be&&K.hand){ve=!0;for(const De of K.hand.values()){const Ie=me.getJointPose(De,ge),Be=this._getHandJoint(be,De);Ie!==null&&(Be.matrix.fromArray(Ie.transform.matrix),Be.matrix.decompose(Be.position,Be.rotation,Be.scale),Be.matrixWorldNeedsUpdate=!0,Be.jointRadius=Ie.radius),Be.visible=Ie!==null}const Ae=be.joints["index-finger-tip"],Se=be.joints["thumb-tip"],Ce=Ae.position.distanceTo(Se.position),Te=.02,Re=.005;be.inputState.pinching&&Ce>Te+Re?(be.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:K.handedness,target:this})):!be.inputState.pinching&&Ce<=Te-Re&&(be.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:K.handedness,target:this}))}else Ee!==null&&K.gripSpace&&(ye=me.getPose(K.gripSpace,ge),ye!==null&&(Ee.matrix.fromArray(ye.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.rotation,Ee.scale),Ee.matrixWorldNeedsUpdate=!0,ye.linearVelocity?(Ee.hasLinearVelocity=!0,Ee.linearVelocity.copy(ye.linearVelocity)):Ee.hasLinearVelocity=!1,ye.angularVelocity?(Ee.hasAngularVelocity=!0,Ee.angularVelocity.copy(ye.angularVelocity)):Ee.hasAngularVelocity=!1));_e!==null&&(xe=me.getPose(K.targetRaySpace,ge),xe===null&&ye!==null&&(xe=ye),xe!==null&&(_e.matrix.fromArray(xe.transform.matrix),_e.matrix.decompose(_e.position,_e.rotation,_e.scale),_e.matrixWorldNeedsUpdate=!0,xe.linearVelocity?(_e.hasLinearVelocity=!0,_e.linearVelocity.copy(xe.linearVelocity)):_e.hasLinearVelocity=!1,xe.angularVelocity?(_e.hasAngularVelocity=!0,_e.angularVelocity.copy(xe.angularVelocity)):_e.hasAngularVelocity=!1,this.dispatchEvent(_moveEvent)))}return _e!==null&&(_e.visible=xe!==null),Ee!==null&&(Ee.visible=ye!==null),be!==null&&(be.visible=ve!==null),this}_getHandJoint(K,me){if(K.joints[me.jointName]===void 0){const ge=new Group;ge.matrixAutoUpdate=!1,ge.visible=!1,K.joints[me.jointName]=ge,K.add(ge)}return K.joints[me.jointName]}}class FogExp2{constructor(K,me=25e-5){this.isFogExp2=!0,this.name="",this.color=new Color$1(K),this.density=me}clone(){return new FogExp2(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Fog{constructor(K,me=1,ge=1e3){this.isFog=!0,this.name="",this.color=new Color$1(K),this.near=me,this.far=ge}clone(){return new Fog(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(K,me){return super.copy(K,me),K.background!==null&&(this.background=K.background.clone()),K.environment!==null&&(this.environment=K.environment.clone()),K.fog!==null&&(this.fog=K.fog.clone()),this.backgroundBlurriness=K.backgroundBlurriness,this.backgroundIntensity=K.backgroundIntensity,this.backgroundRotation.copy(K.backgroundRotation),this.environmentIntensity=K.environmentIntensity,this.environmentRotation.copy(K.environmentRotation),K.overrideMaterial!==null&&(this.overrideMaterial=K.overrideMaterial.clone()),this.matrixAutoUpdate=K.matrixAutoUpdate,this}toJSON(K){const me=super.toJSON(K);return this.fog!==null&&(me.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(me.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(me.object.backgroundIntensity=this.backgroundIntensity),me.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(me.object.environmentIntensity=this.environmentIntensity),me.object.environmentRotation=this.environmentRotation.toArray(),me}}class InterleavedBuffer{constructor(K,me){this.isInterleavedBuffer=!0,this.array=K,this.stride=me,this.count=K!==void 0?K.length/me:0,this.usage=StaticDrawUsage,this.updateRanges=[],this.version=0,this.uuid=generateUUID()}onUploadCallback(){}set needsUpdate(K){K===!0&&this.version++}setUsage(K){return this.usage=K,this}addUpdateRange(K,me){this.updateRanges.push({start:K,count:me})}clearUpdateRanges(){this.updateRanges.length=0}copy(K){return this.array=new K.array.constructor(K.array),this.count=K.count,this.stride=K.stride,this.usage=K.usage,this}copyAt(K,me,ge){K*=this.stride,ge*=me.stride;for(let xe=0,ye=this.stride;xe<ye;xe++)this.array[K+xe]=me.array[ge+xe];return this}set(K,me=0){return this.array.set(K,me),this}clone(K){K.arrayBuffers===void 0&&(K.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),K.arrayBuffers[this.array.buffer._uuid]===void 0&&(K.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const me=new this.array.constructor(K.arrayBuffers[this.array.buffer._uuid]),ge=new this.constructor(me,this.stride);return ge.setUsage(this.usage),ge}onUpload(K){return this.onUploadCallback=K,this}toJSON(K){return K.arrayBuffers===void 0&&(K.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=generateUUID()),K.arrayBuffers[this.array.buffer._uuid]===void 0&&(K.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const _vector$7=new Vector3;class InterleavedBufferAttribute{constructor(K,me,ge,xe=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=K,this.itemSize=me,this.offset=ge,this.normalized=xe}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(K){this.data.needsUpdate=K}applyMatrix4(K){for(let me=0,ge=this.data.count;me<ge;me++)_vector$7.fromBufferAttribute(this,me),_vector$7.applyMatrix4(K),this.setXYZ(me,_vector$7.x,_vector$7.y,_vector$7.z);return this}applyNormalMatrix(K){for(let me=0,ge=this.count;me<ge;me++)_vector$7.fromBufferAttribute(this,me),_vector$7.applyNormalMatrix(K),this.setXYZ(me,_vector$7.x,_vector$7.y,_vector$7.z);return this}transformDirection(K){for(let me=0,ge=this.count;me<ge;me++)_vector$7.fromBufferAttribute(this,me),_vector$7.transformDirection(K),this.setXYZ(me,_vector$7.x,_vector$7.y,_vector$7.z);return this}getComponent(K,me){let ge=this.array[K*this.data.stride+this.offset+me];return this.normalized&&(ge=denormalize(ge,this.array)),ge}setComponent(K,me,ge){return this.normalized&&(ge=normalize$2(ge,this.array)),this.data.array[K*this.data.stride+this.offset+me]=ge,this}setX(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.data.array[K*this.data.stride+this.offset]=me,this}setY(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.data.array[K*this.data.stride+this.offset+1]=me,this}setZ(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.data.array[K*this.data.stride+this.offset+2]=me,this}setW(K,me){return this.normalized&&(me=normalize$2(me,this.array)),this.data.array[K*this.data.stride+this.offset+3]=me,this}getX(K){let me=this.data.array[K*this.data.stride+this.offset];return this.normalized&&(me=denormalize(me,this.array)),me}getY(K){let me=this.data.array[K*this.data.stride+this.offset+1];return this.normalized&&(me=denormalize(me,this.array)),me}getZ(K){let me=this.data.array[K*this.data.stride+this.offset+2];return this.normalized&&(me=denormalize(me,this.array)),me}getW(K){let me=this.data.array[K*this.data.stride+this.offset+3];return this.normalized&&(me=denormalize(me,this.array)),me}setXY(K,me,ge){return K=K*this.data.stride+this.offset,this.normalized&&(me=normalize$2(me,this.array),ge=normalize$2(ge,this.array)),this.data.array[K+0]=me,this.data.array[K+1]=ge,this}setXYZ(K,me,ge,xe){return K=K*this.data.stride+this.offset,this.normalized&&(me=normalize$2(me,this.array),ge=normalize$2(ge,this.array),xe=normalize$2(xe,this.array)),this.data.array[K+0]=me,this.data.array[K+1]=ge,this.data.array[K+2]=xe,this}setXYZW(K,me,ge,xe,ye){return K=K*this.data.stride+this.offset,this.normalized&&(me=normalize$2(me,this.array),ge=normalize$2(ge,this.array),xe=normalize$2(xe,this.array),ye=normalize$2(ye,this.array)),this.data.array[K+0]=me,this.data.array[K+1]=ge,this.data.array[K+2]=xe,this.data.array[K+3]=ye,this}clone(K){if(K===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const me=[];for(let ge=0;ge<this.count;ge++){const xe=ge*this.data.stride+this.offset;for(let ye=0;ye<this.itemSize;ye++)me.push(this.data.array[xe+ye])}return new BufferAttribute(new this.array.constructor(me),this.itemSize,this.normalized)}else return K.interleavedBuffers===void 0&&(K.interleavedBuffers={}),K.interleavedBuffers[this.data.uuid]===void 0&&(K.interleavedBuffers[this.data.uuid]=this.data.clone(K)),new InterleavedBufferAttribute(K.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(K){if(K===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const me=[];for(let ge=0;ge<this.count;ge++){const xe=ge*this.data.stride+this.offset;for(let ye=0;ye<this.itemSize;ye++)me.push(this.data.array[xe+ye])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:me,normalized:this.normalized}}else return K.interleavedBuffers===void 0&&(K.interleavedBuffers={}),K.interleavedBuffers[this.data.uuid]===void 0&&(K.interleavedBuffers[this.data.uuid]=this.data.toJSON(K)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class SpriteMaterial extends Material{constructor(K){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.color.copy(K.color),this.map=K.map,this.alphaMap=K.alphaMap,this.rotation=K.rotation,this.sizeAttenuation=K.sizeAttenuation,this.fog=K.fog,this}}let _geometry;const _intersectPoint=new Vector3,_worldScale$1=new Vector3,_mvPosition=new Vector3,_alignedPosition=new Vector2,_rotatedPosition=new Vector2,_viewWorldMatrix=new Matrix4,_vA$2=new Vector3,_vB$2=new Vector3,_vC$2=new Vector3,_uvA$1=new Vector2,_uvB$1=new Vector2,_uvC$1=new Vector2;class Sprite extends Object3D{constructor(K=new SpriteMaterial){if(super(),this.isSprite=!0,this.type="Sprite",_geometry===void 0){_geometry=new BufferGeometry;const me=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),ge=new InterleavedBuffer(me,5);_geometry.setIndex([0,1,2,0,2,3]),_geometry.setAttribute("position",new InterleavedBufferAttribute(ge,3,0,!1)),_geometry.setAttribute("uv",new InterleavedBufferAttribute(ge,2,3,!1))}this.geometry=_geometry,this.material=K,this.center=new Vector2(.5,.5)}raycast(K,me){K.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_worldScale$1.setFromMatrixScale(this.matrixWorld),_viewWorldMatrix.copy(K.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(K.camera.matrixWorldInverse,this.matrixWorld),_mvPosition.setFromMatrixPosition(this.modelViewMatrix),K.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_worldScale$1.multiplyScalar(-_mvPosition.z);const ge=this.material.rotation;let xe,ye;ge!==0&&(ye=Math.cos(ge),xe=Math.sin(ge));const ve=this.center;transformVertex(_vA$2.set(-.5,-.5,0),_mvPosition,ve,_worldScale$1,xe,ye),transformVertex(_vB$2.set(.5,-.5,0),_mvPosition,ve,_worldScale$1,xe,ye),transformVertex(_vC$2.set(.5,.5,0),_mvPosition,ve,_worldScale$1,xe,ye),_uvA$1.set(0,0),_uvB$1.set(1,0),_uvC$1.set(1,1);let _e=K.ray.intersectTriangle(_vA$2,_vB$2,_vC$2,!1,_intersectPoint);if(_e===null&&(transformVertex(_vB$2.set(-.5,.5,0),_mvPosition,ve,_worldScale$1,xe,ye),_uvB$1.set(0,1),_e=K.ray.intersectTriangle(_vA$2,_vC$2,_vB$2,!1,_intersectPoint),_e===null))return;const Ee=K.ray.origin.distanceTo(_intersectPoint);Ee<K.near||Ee>K.far||me.push({distance:Ee,point:_intersectPoint.clone(),uv:Triangle.getInterpolation(_intersectPoint,_vA$2,_vB$2,_vC$2,_uvA$1,_uvB$1,_uvC$1,new Vector2),face:null,object:this})}copy(K,me){return super.copy(K,me),K.center!==void 0&&this.center.copy(K.center),this.material=K.material,this}}function transformVertex(fe,K,me,ge,xe,ye){_alignedPosition.subVectors(fe,me).addScalar(.5).multiply(ge),xe!==void 0?(_rotatedPosition.x=ye*_alignedPosition.x-xe*_alignedPosition.y,_rotatedPosition.y=xe*_alignedPosition.x+ye*_alignedPosition.y):_rotatedPosition.copy(_alignedPosition),fe.copy(K),fe.x+=_rotatedPosition.x,fe.y+=_rotatedPosition.y,fe.applyMatrix4(_viewWorldMatrix)}const _v1$2=new Vector3,_v2$1=new Vector3;class LOD extends Object3D{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(K){super.copy(K,!1);const me=K.levels;for(let ge=0,xe=me.length;ge<xe;ge++){const ye=me[ge];this.addLevel(ye.object.clone(),ye.distance,ye.hysteresis)}return this.autoUpdate=K.autoUpdate,this}addLevel(K,me=0,ge=0){me=Math.abs(me);const xe=this.levels;let ye;for(ye=0;ye<xe.length&&!(me<xe[ye].distance);ye++);return xe.splice(ye,0,{distance:me,hysteresis:ge,object:K}),this.add(K),this}removeLevel(K){const me=this.levels;for(let ge=0;ge<me.length;ge++)if(me[ge].distance===K){const xe=me.splice(ge,1);return this.remove(xe[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(K){const me=this.levels;if(me.length>0){let ge,xe;for(ge=1,xe=me.length;ge<xe;ge++){let ye=me[ge].distance;if(me[ge].object.visible&&(ye-=ye*me[ge].hysteresis),K<ye)break}return me[ge-1].object}return null}raycast(K,me){if(this.levels.length>0){_v1$2.setFromMatrixPosition(this.matrixWorld);const xe=K.ray.origin.distanceTo(_v1$2);this.getObjectForDistance(xe).raycast(K,me)}}update(K){const me=this.levels;if(me.length>1){_v1$2.setFromMatrixPosition(K.matrixWorld),_v2$1.setFromMatrixPosition(this.matrixWorld);const ge=_v1$2.distanceTo(_v2$1)/K.zoom;me[0].object.visible=!0;let xe,ye;for(xe=1,ye=me.length;xe<ye;xe++){let ve=me[xe].distance;if(me[xe].object.visible&&(ve-=ve*me[xe].hysteresis),ge>=ve)me[xe-1].object.visible=!1,me[xe].object.visible=!0;else break}for(this._currentLevel=xe-1;xe<ye;xe++)me[xe].object.visible=!1}}toJSON(K){const me=super.toJSON(K);this.autoUpdate===!1&&(me.object.autoUpdate=!1),me.object.levels=[];const ge=this.levels;for(let xe=0,ye=ge.length;xe<ye;xe++){const ve=ge[xe];me.object.levels.push({object:ve.object.uuid,distance:ve.distance,hysteresis:ve.hysteresis})}return me}}const _basePosition=new Vector3,_skinIndex=new Vector4,_skinWeight=new Vector4,_vector3=new Vector3,_matrix4=new Matrix4,_vertex=new Vector3,_sphere$5=new Sphere,_inverseMatrix$2=new Matrix4,_ray$2=new Ray;let SkinnedMesh$1=class extends Mesh{constructor(K,me){super(K,me),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=AttachedBindMode,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const K=this.geometry;this.boundingBox===null&&(this.boundingBox=new Box3),this.boundingBox.makeEmpty();const me=K.getAttribute("position");for(let ge=0;ge<me.count;ge++)this.getVertexPosition(ge,_vertex),this.boundingBox.expandByPoint(_vertex)}computeBoundingSphere(){const K=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingSphere.makeEmpty();const me=K.getAttribute("position");for(let ge=0;ge<me.count;ge++)this.getVertexPosition(ge,_vertex),this.boundingSphere.expandByPoint(_vertex)}copy(K,me){return super.copy(K,me),this.bindMode=K.bindMode,this.bindMatrix.copy(K.bindMatrix),this.bindMatrixInverse.copy(K.bindMatrixInverse),this.skeleton=K.skeleton,K.boundingBox!==null&&(this.boundingBox=K.boundingBox.clone()),K.boundingSphere!==null&&(this.boundingSphere=K.boundingSphere.clone()),this}raycast(K,me){const ge=this.material,xe=this.matrixWorld;ge!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$5.copy(this.boundingSphere),_sphere$5.applyMatrix4(xe),K.ray.intersectsSphere(_sphere$5)!==!1&&(_inverseMatrix$2.copy(xe).invert(),_ray$2.copy(K.ray).applyMatrix4(_inverseMatrix$2),!(this.boundingBox!==null&&_ray$2.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(K,me,_ray$2)))}getVertexPosition(K,me){return super.getVertexPosition(K,me),this.applyBoneTransform(K,me),me}bind(K,me){this.skeleton=K,me===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),me=this.matrixWorld),this.bindMatrix.copy(me),this.bindMatrixInverse.copy(me).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const K=new Vector4,me=this.geometry.attributes.skinWeight;for(let ge=0,xe=me.count;ge<xe;ge++){K.fromBufferAttribute(me,ge);const ye=1/K.manhattanLength();ye!==1/0?K.multiplyScalar(ye):K.set(1,0,0,0),me.setXYZW(ge,K.x,K.y,K.z,K.w)}}updateMatrixWorld(K){super.updateMatrixWorld(K),this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(K,me){const ge=this.skeleton,xe=this.geometry;_skinIndex.fromBufferAttribute(xe.attributes.skinIndex,K),_skinWeight.fromBufferAttribute(xe.attributes.skinWeight,K),_basePosition.copy(me).applyMatrix4(this.bindMatrix),me.set(0,0,0);for(let ye=0;ye<4;ye++){const ve=_skinWeight.getComponent(ye);if(ve!==0){const _e=_skinIndex.getComponent(ye);_matrix4.multiplyMatrices(ge.bones[_e].matrixWorld,ge.boneInverses[_e]),me.addScaledVector(_vector3.copy(_basePosition).applyMatrix4(_matrix4),ve)}}return me.applyMatrix4(this.bindMatrixInverse)}};class Bone extends Object3D{constructor(){super(),this.isBone=!0,this.type="Bone"}}class DataTexture extends Texture{constructor(K=null,me=1,ge=1,xe,ye,ve,_e,Ee,be=NearestFilter,Ae=NearestFilter,Se,Ce){super(null,ve,_e,Ee,be,Ae,xe,ye,Se,Ce),this.isDataTexture=!0,this.image={data:K,width:me,height:ge},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const _offsetMatrix=new Matrix4,_identityMatrix$1=new Matrix4;class Skeleton{constructor(K=[],me=[]){this.uuid=generateUUID(),this.bones=K.slice(0),this.boneInverses=me,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const K=this.bones,me=this.boneInverses;if(this.boneMatrices=new Float32Array(K.length*16),me.length===0)this.calculateInverses();else if(K.length!==me.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let ge=0,xe=this.bones.length;ge<xe;ge++)this.boneInverses.push(new Matrix4)}}calculateInverses(){this.boneInverses.length=0;for(let K=0,me=this.bones.length;K<me;K++){const ge=new Matrix4;this.bones[K]&&ge.copy(this.bones[K].matrixWorld).invert(),this.boneInverses.push(ge)}}pose(){for(let K=0,me=this.bones.length;K<me;K++){const ge=this.bones[K];ge&&ge.matrixWorld.copy(this.boneInverses[K]).invert()}for(let K=0,me=this.bones.length;K<me;K++){const ge=this.bones[K];ge&&(ge.parent&&ge.parent.isBone?(ge.matrix.copy(ge.parent.matrixWorld).invert(),ge.matrix.multiply(ge.matrixWorld)):ge.matrix.copy(ge.matrixWorld),ge.matrix.decompose(ge.position,ge.quaternion,ge.scale))}}update(){const K=this.bones,me=this.boneInverses,ge=this.boneMatrices,xe=this.boneTexture;for(let ye=0,ve=K.length;ye<ve;ye++){const _e=K[ye]?K[ye].matrixWorld:_identityMatrix$1;_offsetMatrix.multiplyMatrices(_e,me[ye]),_offsetMatrix.toArray(ge,ye*16)}xe!==null&&(xe.needsUpdate=!0)}clone(){return new Skeleton(this.bones,this.boneInverses)}computeBoneTexture(){let K=Math.sqrt(this.bones.length*4);K=Math.ceil(K/4)*4,K=Math.max(K,4);const me=new Float32Array(K*K*4);me.set(this.boneMatrices);const ge=new DataTexture(me,K,K,RGBAFormat,FloatType);return ge.needsUpdate=!0,this.boneMatrices=me,this.boneTexture=ge,this}getBoneByName(K){for(let me=0,ge=this.bones.length;me<ge;me++){const xe=this.bones[me];if(xe.name===K)return xe}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(K,me){this.uuid=K.uuid;for(let ge=0,xe=K.bones.length;ge<xe;ge++){const ye=K.bones[ge];let ve=me[ye];ve===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",ye),ve=new Bone),this.bones.push(ve),this.boneInverses.push(new Matrix4().fromArray(K.boneInverses[ge]))}return this.init(),this}toJSON(){const K={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};K.uuid=this.uuid;const me=this.bones,ge=this.boneInverses;for(let xe=0,ye=me.length;xe<ye;xe++){const ve=me[xe];K.bones.push(ve.uuid);const _e=ge[xe];K.boneInverses.push(_e.toArray())}return K}}class InstancedBufferAttribute extends BufferAttribute{constructor(K,me,ge,xe=1){super(K,me,ge),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=xe}copy(K){return super.copy(K),this.meshPerAttribute=K.meshPerAttribute,this}toJSON(){const K=super.toJSON();return K.meshPerAttribute=this.meshPerAttribute,K.isInstancedBufferAttribute=!0,K}}const _instanceLocalMatrix$1=new Matrix4,_instanceWorldMatrix$1=new Matrix4,_instanceIntersects$1=[],_box3=new Box3,_identity=new Matrix4,_mesh$1$1=new Mesh,_sphere$4=new Sphere;class InstancedMesh extends Mesh{constructor(K,me,ge){super(K,me),this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(ge*16),16),this.instanceColor=null,this.morphTexture=null,this.count=ge,this.boundingBox=null,this.boundingSphere=null;for(let xe=0;xe<ge;xe++)this.setMatrixAt(xe,_identity)}computeBoundingBox(){const K=this.geometry,me=this.count;this.boundingBox===null&&(this.boundingBox=new Box3),K.boundingBox===null&&K.computeBoundingBox(),this.boundingBox.makeEmpty();for(let ge=0;ge<me;ge++)this.getMatrixAt(ge,_instanceLocalMatrix$1),_box3.copy(K.boundingBox).applyMatrix4(_instanceLocalMatrix$1),this.boundingBox.union(_box3)}computeBoundingSphere(){const K=this.geometry,me=this.count;this.boundingSphere===null&&(this.boundingSphere=new Sphere),K.boundingSphere===null&&K.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let ge=0;ge<me;ge++)this.getMatrixAt(ge,_instanceLocalMatrix$1),_sphere$4.copy(K.boundingSphere).applyMatrix4(_instanceLocalMatrix$1),this.boundingSphere.union(_sphere$4)}copy(K,me){return super.copy(K,me),this.instanceMatrix.copy(K.instanceMatrix),K.morphTexture!==null&&(this.morphTexture=K.morphTexture.clone()),K.instanceColor!==null&&(this.instanceColor=K.instanceColor.clone()),this.count=K.count,K.boundingBox!==null&&(this.boundingBox=K.boundingBox.clone()),K.boundingSphere!==null&&(this.boundingSphere=K.boundingSphere.clone()),this}getColorAt(K,me){me.fromArray(this.instanceColor.array,K*3)}getMatrixAt(K,me){me.fromArray(this.instanceMatrix.array,K*16)}getMorphAt(K,me){const ge=me.morphTargetInfluences,xe=this.morphTexture.source.data.data,ye=ge.length+1,ve=K*ye+1;for(let _e=0;_e<ge.length;_e++)ge[_e]=xe[ve+_e]}raycast(K,me){const ge=this.matrixWorld,xe=this.count;if(_mesh$1$1.geometry=this.geometry,_mesh$1$1.material=this.material,_mesh$1$1.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),_sphere$4.copy(this.boundingSphere),_sphere$4.applyMatrix4(ge),K.ray.intersectsSphere(_sphere$4)!==!1))for(let ye=0;ye<xe;ye++){this.getMatrixAt(ye,_instanceLocalMatrix$1),_instanceWorldMatrix$1.multiplyMatrices(ge,_instanceLocalMatrix$1),_mesh$1$1.matrixWorld=_instanceWorldMatrix$1,_mesh$1$1.raycast(K,_instanceIntersects$1);for(let ve=0,_e=_instanceIntersects$1.length;ve<_e;ve++){const Ee=_instanceIntersects$1[ve];Ee.instanceId=ye,Ee.object=this,me.push(Ee)}_instanceIntersects$1.length=0}}setColorAt(K,me){this.instanceColor===null&&(this.instanceColor=new InstancedBufferAttribute(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),me.toArray(this.instanceColor.array,K*3)}setMatrixAt(K,me){me.toArray(this.instanceMatrix.array,K*16)}setMorphAt(K,me){const ge=me.morphTargetInfluences,xe=ge.length+1;this.morphTexture===null&&(this.morphTexture=new DataTexture(new Float32Array(xe*this.count),xe,this.count,RedFormat,FloatType));const ye=this.morphTexture.source.data.data;let ve=0;for(let be=0;be<ge.length;be++)ve+=ge[be];const _e=this.geometry.morphTargetsRelative?1:1-ve,Ee=xe*K;ye[Ee]=_e,ye.set(ge,Ee+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const _vector1=new Vector3,_vector2=new Vector3,_normalMatrix=new Matrix3;class Plane{constructor(K=new Vector3(1,0,0),me=0){this.isPlane=!0,this.normal=K,this.constant=me}set(K,me){return this.normal.copy(K),this.constant=me,this}setComponents(K,me,ge,xe){return this.normal.set(K,me,ge),this.constant=xe,this}setFromNormalAndCoplanarPoint(K,me){return this.normal.copy(K),this.constant=-me.dot(this.normal),this}setFromCoplanarPoints(K,me,ge){const xe=_vector1.subVectors(ge,me).cross(_vector2.subVectors(K,me)).normalize();return this.setFromNormalAndCoplanarPoint(xe,K),this}copy(K){return this.normal.copy(K.normal),this.constant=K.constant,this}normalize(){const K=1/this.normal.length();return this.normal.multiplyScalar(K),this.constant*=K,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(K){return this.normal.dot(K)+this.constant}distanceToSphere(K){return this.distanceToPoint(K.center)-K.radius}projectPoint(K,me){return me.copy(K).addScaledVector(this.normal,-this.distanceToPoint(K))}intersectLine(K,me){const ge=K.delta(_vector1),xe=this.normal.dot(ge);if(xe===0)return this.distanceToPoint(K.start)===0?me.copy(K.start):null;const ye=-(K.start.dot(this.normal)+this.constant)/xe;return ye<0||ye>1?null:me.copy(K.start).addScaledVector(ge,ye)}intersectsLine(K){const me=this.distanceToPoint(K.start),ge=this.distanceToPoint(K.end);return me<0&&ge>0||ge<0&&me>0}intersectsBox(K){return K.intersectsPlane(this)}intersectsSphere(K){return K.intersectsPlane(this)}coplanarPoint(K){return K.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(K,me){const ge=me||_normalMatrix.getNormalMatrix(K),xe=this.coplanarPoint(_vector1).applyMatrix4(K),ye=this.normal.applyMatrix3(ge).normalize();return this.constant=-xe.dot(ye),this}translate(K){return this.constant-=K.dot(this.normal),this}equals(K){return K.normal.equals(this.normal)&&K.constant===this.constant}clone(){return new this.constructor().copy(this)}}const _sphere$3=new Sphere,_vector$6=new Vector3;class Frustum{constructor(K=new Plane,me=new Plane,ge=new Plane,xe=new Plane,ye=new Plane,ve=new Plane){this.planes=[K,me,ge,xe,ye,ve]}set(K,me,ge,xe,ye,ve){const _e=this.planes;return _e[0].copy(K),_e[1].copy(me),_e[2].copy(ge),_e[3].copy(xe),_e[4].copy(ye),_e[5].copy(ve),this}copy(K){const me=this.planes;for(let ge=0;ge<6;ge++)me[ge].copy(K.planes[ge]);return this}setFromProjectionMatrix(K,me=WebGLCoordinateSystem){const ge=this.planes,xe=K.elements,ye=xe[0],ve=xe[1],_e=xe[2],Ee=xe[3],be=xe[4],Ae=xe[5],Se=xe[6],Ce=xe[7],Te=xe[8],Re=xe[9],De=xe[10],Ie=xe[11],Be=xe[12],Le=xe[13],Oe=xe[14],Fe=xe[15];if(ge[0].setComponents(Ee-ye,Ce-be,Ie-Te,Fe-Be).normalize(),ge[1].setComponents(Ee+ye,Ce+be,Ie+Te,Fe+Be).normalize(),ge[2].setComponents(Ee+ve,Ce+Ae,Ie+Re,Fe+Le).normalize(),ge[3].setComponents(Ee-ve,Ce-Ae,Ie-Re,Fe-Le).normalize(),ge[4].setComponents(Ee-_e,Ce-Se,Ie-De,Fe-Oe).normalize(),me===WebGLCoordinateSystem)ge[5].setComponents(Ee+_e,Ce+Se,Ie+De,Fe+Oe).normalize();else if(me===WebGPUCoordinateSystem)ge[5].setComponents(_e,Se,De,Oe).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+me);return this}intersectsObject(K){if(K.boundingSphere!==void 0)K.boundingSphere===null&&K.computeBoundingSphere(),_sphere$3.copy(K.boundingSphere).applyMatrix4(K.matrixWorld);else{const me=K.geometry;me.boundingSphere===null&&me.computeBoundingSphere(),_sphere$3.copy(me.boundingSphere).applyMatrix4(K.matrixWorld)}return this.intersectsSphere(_sphere$3)}intersectsSprite(K){return _sphere$3.center.set(0,0,0),_sphere$3.radius=.7071067811865476,_sphere$3.applyMatrix4(K.matrixWorld),this.intersectsSphere(_sphere$3)}intersectsSphere(K){const me=this.planes,ge=K.center,xe=-K.radius;for(let ye=0;ye<6;ye++)if(me[ye].distanceToPoint(ge)<xe)return!1;return!0}intersectsBox(K){const me=this.planes;for(let ge=0;ge<6;ge++){const xe=me[ge];if(_vector$6.x=xe.normal.x>0?K.max.x:K.min.x,_vector$6.y=xe.normal.y>0?K.max.y:K.min.y,_vector$6.z=xe.normal.z>0?K.max.z:K.min.z,xe.distanceToPoint(_vector$6)<0)return!1}return!0}containsPoint(K){const me=this.planes;for(let ge=0;ge<6;ge++)if(me[ge].distanceToPoint(K)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function ascIdSort(fe,K){return fe-K}function sortOpaque(fe,K){return fe.z-K.z}function sortTransparent(fe,K){return K.z-fe.z}class MultiDrawRenderList{constructor(){this.index=0,this.pool=[],this.list=[]}push(K,me,ge,xe){const ye=this.pool,ve=this.list;this.index>=ye.length&&ye.push({start:-1,count:-1,z:-1,index:-1});const _e=ye[this.index];ve.push(_e),this.index++,_e.start=K,_e.count=me,_e.z=ge,_e.index=xe}reset(){this.list.length=0,this.index=0}}const _matrix$1=new Matrix4,_whiteColor=new Color$1(1,1,1),_frustum=new Frustum,_box$1$1=new Box3,_sphere$2=new Sphere,_vector$5=new Vector3,_forward=new Vector3,_temp=new Vector3,_renderList=new MultiDrawRenderList,_mesh$2=new Mesh,_batchIntersects$1=[];function copyAttributeData(fe,K,me=0){const ge=K.itemSize;if(fe.isInterleavedBufferAttribute||fe.array.constructor!==K.array.constructor){const xe=fe.count;for(let ye=0;ye<xe;ye++)for(let ve=0;ve<ge;ve++)K.setComponent(ye+me,ve,fe.getComponent(ye,ve))}else K.array.set(fe.array,me*ge);K.needsUpdate=!0}function copyArrayContents(fe,K){if(fe.constructor!==K.constructor){const me=Math.min(fe.length,K.length);for(let ge=0;ge<me;ge++)K[ge]=fe[ge]}else{const me=Math.min(fe.length,K.length);K.set(new fe.constructor(fe.buffer,0,me))}}let BatchedMesh$1=class extends Mesh{constructor(K,me,ge=me*2,xe){super(new BufferGeometry,xe),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=K,this._maxVertexCount=me,this._maxIndexCount=ge,this._multiDrawCounts=new Int32Array(K),this._multiDrawStarts=new Int32Array(K),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let K=Math.sqrt(this._maxInstanceCount*4);K=Math.ceil(K/4)*4,K=Math.max(K,4);const me=new Float32Array(K*K*4),ge=new DataTexture(me,K,K,RGBAFormat,FloatType);this._matricesTexture=ge}_initIndirectTexture(){let K=Math.sqrt(this._maxInstanceCount);K=Math.ceil(K);const me=new Uint32Array(K*K),ge=new DataTexture(me,K,K,RedIntegerFormat,UnsignedIntType);this._indirectTexture=ge}_initColorsTexture(){let K=Math.sqrt(this._maxInstanceCount);K=Math.ceil(K);const me=new Float32Array(K*K*4).fill(1),ge=new DataTexture(me,K,K,RGBAFormat,FloatType);ge.colorSpace=ColorManagement.workingColorSpace,this._colorsTexture=ge}_initializeGeometry(K){const me=this.geometry,ge=this._maxVertexCount,xe=this._maxIndexCount;if(this._geometryInitialized===!1){for(const ye in K.attributes){const ve=K.getAttribute(ye),{array:_e,itemSize:Ee,normalized:be}=ve,Ae=new _e.constructor(ge*Ee),Se=new BufferAttribute(Ae,Ee,be);me.setAttribute(ye,Se)}if(K.getIndex()!==null){const ye=ge>65535?new Uint32Array(xe):new Uint16Array(xe);me.setIndex(new BufferAttribute(ye,1))}this._geometryInitialized=!0}}_validateGeometry(K){const me=this.geometry;if(!!K.getIndex()!=!!me.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const ge in me.attributes){if(!K.hasAttribute(ge))throw new Error(`THREE.BatchedMesh: Added geometry missing "${ge}". All geometries must have consistent attributes.`);const xe=K.getAttribute(ge),ye=me.getAttribute(ge);if(xe.itemSize!==ye.itemSize||xe.normalized!==ye.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(K){const me=this._instanceInfo;if(K<0||K>=me.length||me[K].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${K}. Instance is either out of range or has been deleted.`)}validateGeometryId(K){const me=this._geometryInfo;if(K<0||K>=me.length||me[K].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${K}. Geometry is either out of range or has been deleted.`)}setCustomSort(K){return this.customSort=K,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const K=this.boundingBox,me=this._instanceInfo;K.makeEmpty();for(let ge=0,xe=me.length;ge<xe;ge++){if(me[ge].active===!1)continue;const ye=me[ge].geometryIndex;this.getMatrixAt(ge,_matrix$1),this.getBoundingBoxAt(ye,_box$1$1).applyMatrix4(_matrix$1),K.union(_box$1$1)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere);const K=this.boundingSphere,me=this._instanceInfo;K.makeEmpty();for(let ge=0,xe=me.length;ge<xe;ge++){if(me[ge].active===!1)continue;const ye=me[ge].geometryIndex;this.getMatrixAt(ge,_matrix$1),this.getBoundingSphereAt(ye,_sphere$2).applyMatrix4(_matrix$1),K.union(_sphere$2)}}addInstance(K){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const ge={visible:!0,active:!0,geometryIndex:K};let xe=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(ascIdSort),xe=this._availableInstanceIds.shift(),this._instanceInfo[xe]=ge):(xe=this._instanceInfo.length,this._instanceInfo.push(ge));const ye=this._matricesTexture;_matrix$1.identity().toArray(ye.image.data,xe*16),ye.needsUpdate=!0;const ve=this._colorsTexture;return ve&&(_whiteColor.toArray(ve.image.data,xe*4),ve.needsUpdate=!0),this._visibilityChanged=!0,xe}addGeometry(K,me=-1,ge=-1){this._initializeGeometry(K),this._validateGeometry(K);const xe={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},ye=this._geometryInfo;xe.vertexStart=this._nextVertexStart,xe.reservedVertexCount=me===-1?K.getAttribute("position").count:me;const ve=K.getIndex();if(ve!==null&&(xe.indexStart=this._nextIndexStart,xe.reservedIndexCount=ge===-1?ve.count:ge),xe.indexStart!==-1&&xe.indexStart+xe.reservedIndexCount>this._maxIndexCount||xe.vertexStart+xe.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let Ee;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(ascIdSort),Ee=this._availableGeometryIds.shift(),ye[Ee]=xe):(Ee=this._geometryCount,this._geometryCount++,ye.push(xe)),this.setGeometryAt(Ee,K),this._nextIndexStart=xe.indexStart+xe.reservedIndexCount,this._nextVertexStart=xe.vertexStart+xe.reservedVertexCount,Ee}setGeometryAt(K,me){if(K>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(me);const ge=this.geometry,xe=ge.getIndex()!==null,ye=ge.getIndex(),ve=me.getIndex(),_e=this._geometryInfo[K];if(xe&&ve.count>_e.reservedIndexCount||me.attributes.position.count>_e.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const Ee=_e.vertexStart,be=_e.reservedVertexCount;_e.vertexCount=me.getAttribute("position").count;for(const Ae in ge.attributes){const Se=me.getAttribute(Ae),Ce=ge.getAttribute(Ae);copyAttributeData(Se,Ce,Ee);const Te=Se.itemSize;for(let Re=Se.count,De=be;Re<De;Re++){const Ie=Ee+Re;for(let Be=0;Be<Te;Be++)Ce.setComponent(Ie,Be,0)}Ce.needsUpdate=!0,Ce.addUpdateRange(Ee*Te,be*Te)}if(xe){const Ae=_e.indexStart,Se=_e.reservedIndexCount;_e.indexCount=me.getIndex().count;for(let Ce=0;Ce<ve.count;Ce++)ye.setX(Ae+Ce,Ee+ve.getX(Ce));for(let Ce=ve.count,Te=Se;Ce<Te;Ce++)ye.setX(Ae+Ce,Ee);ye.needsUpdate=!0,ye.addUpdateRange(Ae,_e.reservedIndexCount)}return _e.start=xe?_e.indexStart:_e.vertexStart,_e.count=xe?_e.indexCount:_e.vertexCount,_e.boundingBox=null,me.boundingBox!==null&&(_e.boundingBox=me.boundingBox.clone()),_e.boundingSphere=null,me.boundingSphere!==null&&(_e.boundingSphere=me.boundingSphere.clone()),this._visibilityChanged=!0,K}deleteGeometry(K){const me=this._geometryInfo;if(K>=me.length||me[K].active===!1)return this;const ge=this._instanceInfo;for(let xe=0,ye=ge.length;xe<ye;xe++)ge[xe].active&&ge[xe].geometryIndex===K&&this.deleteInstance(xe);return me[K].active=!1,this._availableGeometryIds.push(K),this._visibilityChanged=!0,this}deleteInstance(K){return this.validateInstanceId(K),this._instanceInfo[K].active=!1,this._availableInstanceIds.push(K),this._visibilityChanged=!0,this}optimize(){let K=0,me=0;const ge=this._geometryInfo,xe=ge.map((ve,_e)=>_e).sort((ve,_e)=>ge[ve].vertexStart-ge[_e].vertexStart),ye=this.geometry;for(let ve=0,_e=ge.length;ve<_e;ve++){const Ee=xe[ve],be=ge[Ee];if(be.active!==!1){if(ye.index!==null){if(be.indexStart!==me){const{indexStart:Ae,vertexStart:Se,reservedIndexCount:Ce}=be,Te=ye.index,Re=Te.array,De=K-Se;for(let Ie=Ae;Ie<Ae+Ce;Ie++)Re[Ie]=Re[Ie]+De;Te.array.copyWithin(me,Ae,Ae+Ce),Te.addUpdateRange(me,Ce),be.indexStart=me}me+=be.reservedIndexCount}if(be.vertexStart!==K){const{vertexStart:Ae,reservedVertexCount:Se}=be,Ce=ye.attributes;for(const Te in Ce){const Re=Ce[Te],{array:De,itemSize:Ie}=Re;De.copyWithin(K*Ie,Ae*Ie,(Ae+Se)*Ie),Re.addUpdateRange(K*Ie,Se*Ie)}be.vertexStart=K}K+=be.reservedVertexCount,be.start=ye.index?be.indexStart:be.vertexStart,this._nextIndexStart=ye.index?be.indexStart+be.reservedIndexCount:0,this._nextVertexStart=be.vertexStart+be.reservedVertexCount}}return this}getBoundingBoxAt(K,me){if(K>=this._geometryCount)return null;const ge=this.geometry,xe=this._geometryInfo[K];if(xe.boundingBox===null){const ye=new Box3,ve=ge.index,_e=ge.attributes.position;for(let Ee=xe.start,be=xe.start+xe.count;Ee<be;Ee++){let Ae=Ee;ve&&(Ae=ve.getX(Ae)),ye.expandByPoint(_vector$5.fromBufferAttribute(_e,Ae))}xe.boundingBox=ye}return me.copy(xe.boundingBox),me}getBoundingSphereAt(K,me){if(K>=this._geometryCount)return null;const ge=this.geometry,xe=this._geometryInfo[K];if(xe.boundingSphere===null){const ye=new Sphere;this.getBoundingBoxAt(K,_box$1$1),_box$1$1.getCenter(ye.center);const ve=ge.index,_e=ge.attributes.position;let Ee=0;for(let be=xe.start,Ae=xe.start+xe.count;be<Ae;be++){let Se=be;ve&&(Se=ve.getX(Se)),_vector$5.fromBufferAttribute(_e,Se),Ee=Math.max(Ee,ye.center.distanceToSquared(_vector$5))}ye.radius=Math.sqrt(Ee),xe.boundingSphere=ye}return me.copy(xe.boundingSphere),me}setMatrixAt(K,me){this.validateInstanceId(K);const ge=this._matricesTexture,xe=this._matricesTexture.image.data;return me.toArray(xe,K*16),ge.needsUpdate=!0,this}getMatrixAt(K,me){return this.validateInstanceId(K),me.fromArray(this._matricesTexture.image.data,K*16)}setColorAt(K,me){return this.validateInstanceId(K),this._colorsTexture===null&&this._initColorsTexture(),me.toArray(this._colorsTexture.image.data,K*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(K,me){return this.validateInstanceId(K),me.fromArray(this._colorsTexture.image.data,K*4)}setVisibleAt(K,me){return this.validateInstanceId(K),this._instanceInfo[K].visible===me?this:(this._instanceInfo[K].visible=me,this._visibilityChanged=!0,this)}getVisibleAt(K){return this.validateInstanceId(K),this._instanceInfo[K].visible}setGeometryIdAt(K,me){return this.validateInstanceId(K),this.validateGeometryId(me),this._instanceInfo[K].geometryIndex=me,this}getGeometryIdAt(K){return this.validateInstanceId(K),this._instanceInfo[K].geometryIndex}getGeometryRangeAt(K,me={}){this.validateGeometryId(K);const ge=this._geometryInfo[K];return me.vertexStart=ge.vertexStart,me.vertexCount=ge.vertexCount,me.reservedVertexCount=ge.reservedVertexCount,me.indexStart=ge.indexStart,me.indexCount=ge.indexCount,me.reservedIndexCount=ge.reservedIndexCount,me.start=ge.start,me.count=ge.count,me}setInstanceCount(K){const me=this._availableInstanceIds,ge=this._instanceInfo;for(me.sort(ascIdSort);me[me.length-1]===ge.length;)ge.pop(),me.pop();if(K<ge.length)throw new Error(`BatchedMesh: Instance ids outside the range ${K} are being used. Cannot shrink instance count.`);const xe=new Int32Array(K),ye=new Int32Array(K);copyArrayContents(this._multiDrawCounts,xe),copyArrayContents(this._multiDrawStarts,ye),this._multiDrawCounts=xe,this._multiDrawStarts=ye,this._maxInstanceCount=K;const ve=this._indirectTexture,_e=this._matricesTexture,Ee=this._colorsTexture;ve.dispose(),this._initIndirectTexture(),copyArrayContents(ve.image.data,this._indirectTexture.image.data),_e.dispose(),this._initMatricesTexture(),copyArrayContents(_e.image.data,this._matricesTexture.image.data),Ee&&(Ee.dispose(),this._initColorsTexture(),copyArrayContents(Ee.image.data,this._colorsTexture.image.data))}setGeometrySize(K,me){const ge=[...this._geometryInfo].filter(_e=>_e.active);if(Math.max(...ge.map(_e=>_e.vertexStart+_e.reservedVertexCount))>K)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${me}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...ge.map(Ee=>Ee.indexStart+Ee.reservedIndexCount))>me)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${me}. Cannot shrink further.`);const ye=this.geometry;ye.dispose(),this._maxVertexCount=K,this._maxIndexCount=me,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new BufferGeometry,this._initializeGeometry(ye));const ve=this.geometry;ye.index&&copyArrayContents(ye.index.array,ve.index.array);for(const _e in ye.attributes)copyArrayContents(ye.attributes[_e].array,ve.attributes[_e].array)}raycast(K,me){const ge=this._instanceInfo,xe=this._geometryInfo,ye=this.matrixWorld,ve=this.geometry;_mesh$2.material=this.material,_mesh$2.geometry.index=ve.index,_mesh$2.geometry.attributes=ve.attributes,_mesh$2.geometry.boundingBox===null&&(_mesh$2.geometry.boundingBox=new Box3),_mesh$2.geometry.boundingSphere===null&&(_mesh$2.geometry.boundingSphere=new Sphere);for(let _e=0,Ee=ge.length;_e<Ee;_e++){if(!ge[_e].visible||!ge[_e].active)continue;const be=ge[_e].geometryIndex,Ae=xe[be];_mesh$2.geometry.setDrawRange(Ae.start,Ae.count),this.getMatrixAt(_e,_mesh$2.matrixWorld).premultiply(ye),this.getBoundingBoxAt(be,_mesh$2.geometry.boundingBox),this.getBoundingSphereAt(be,_mesh$2.geometry.boundingSphere),_mesh$2.raycast(K,_batchIntersects$1);for(let Se=0,Ce=_batchIntersects$1.length;Se<Ce;Se++){const Te=_batchIntersects$1[Se];Te.object=this,Te.batchId=_e,me.push(Te)}_batchIntersects$1.length=0}_mesh$2.material=null,_mesh$2.geometry.index=null,_mesh$2.geometry.attributes={},_mesh$2.geometry.setDrawRange(0,1/0)}copy(K){return super.copy(K),this.geometry=K.geometry.clone(),this.perObjectFrustumCulled=K.perObjectFrustumCulled,this.sortObjects=K.sortObjects,this.boundingBox=K.boundingBox!==null?K.boundingBox.clone():null,this.boundingSphere=K.boundingSphere!==null?K.boundingSphere.clone():null,this._geometryInfo=K._geometryInfo.map(me=>({...me,boundingBox:me.boundingBox!==null?me.boundingBox.clone():null,boundingSphere:me.boundingSphere!==null?me.boundingSphere.clone():null})),this._instanceInfo=K._instanceInfo.map(me=>({...me})),this._maxInstanceCount=K._maxInstanceCount,this._maxVertexCount=K._maxVertexCount,this._maxIndexCount=K._maxIndexCount,this._geometryInitialized=K._geometryInitialized,this._geometryCount=K._geometryCount,this._multiDrawCounts=K._multiDrawCounts.slice(),this._multiDrawStarts=K._multiDrawStarts.slice(),this._matricesTexture=K._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=K._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(K,me,ge,xe,ye){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const ve=xe.getIndex(),_e=ve===null?1:ve.array.BYTES_PER_ELEMENT,Ee=this._instanceInfo,be=this._multiDrawStarts,Ae=this._multiDrawCounts,Se=this._geometryInfo,Ce=this.perObjectFrustumCulled,Te=this._indirectTexture,Re=Te.image.data;Ce&&(_matrix$1.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse).multiply(this.matrixWorld),_frustum.setFromProjectionMatrix(_matrix$1,K.coordinateSystem));let De=0;if(this.sortObjects){_matrix$1.copy(this.matrixWorld).invert(),_vector$5.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(_matrix$1),_forward.set(0,0,-1).transformDirection(ge.matrixWorld).transformDirection(_matrix$1);for(let Le=0,Oe=Ee.length;Le<Oe;Le++)if(Ee[Le].visible&&Ee[Le].active){const Fe=Ee[Le].geometryIndex;this.getMatrixAt(Le,_matrix$1),this.getBoundingSphereAt(Fe,_sphere$2).applyMatrix4(_matrix$1);let Ue=!1;if(Ce&&(Ue=!_frustum.intersectsSphere(_sphere$2)),!Ue){const Ne=Se[Fe],He=_temp.subVectors(_sphere$2.center,_vector$5).dot(_forward);_renderList.push(Ne.start,Ne.count,He,Le)}}const Ie=_renderList.list,Be=this.customSort;Be===null?Ie.sort(ye.transparent?sortTransparent:sortOpaque):Be.call(this,Ie,ge);for(let Le=0,Oe=Ie.length;Le<Oe;Le++){const Fe=Ie[Le];be[De]=Fe.start*_e,Ae[De]=Fe.count,Re[De]=Fe.index,De++}_renderList.reset()}else for(let Ie=0,Be=Ee.length;Ie<Be;Ie++)if(Ee[Ie].visible&&Ee[Ie].active){const Le=Ee[Ie].geometryIndex;let Oe=!1;if(Ce&&(this.getMatrixAt(Ie,_matrix$1),this.getBoundingSphereAt(Le,_sphere$2).applyMatrix4(_matrix$1),Oe=!_frustum.intersectsSphere(_sphere$2)),!Oe){const Fe=Se[Le];be[De]=Fe.start*_e,Ae[De]=Fe.count,Re[De]=Ie,De++}}Te.needsUpdate=!0,this._multiDrawCount=De,this._visibilityChanged=!1}onBeforeShadow(K,me,ge,xe,ye,ve){this.onBeforeRender(K,null,xe,ye,ve)}};class LineBasicMaterial extends Material{constructor(K){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color$1(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.color.copy(K.color),this.map=K.map,this.linewidth=K.linewidth,this.linecap=K.linecap,this.linejoin=K.linejoin,this.fog=K.fog,this}}const _vStart=new Vector3,_vEnd=new Vector3,_inverseMatrix$1=new Matrix4,_ray$1=new Ray,_sphere$1$1=new Sphere,_intersectPointOnRay=new Vector3,_intersectPointOnSegment=new Vector3;let Line$2=class extends Object3D{constructor(K=new BufferGeometry,me=new LineBasicMaterial){super(),this.isLine=!0,this.type="Line",this.geometry=K,this.material=me,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(K,me){return super.copy(K,me),this.material=Array.isArray(K.material)?K.material.slice():K.material,this.geometry=K.geometry,this}computeLineDistances(){const K=this.geometry;if(K.index===null){const me=K.attributes.position,ge=[0];for(let xe=1,ye=me.count;xe<ye;xe++)_vStart.fromBufferAttribute(me,xe-1),_vEnd.fromBufferAttribute(me,xe),ge[xe]=ge[xe-1],ge[xe]+=_vStart.distanceTo(_vEnd);K.setAttribute("lineDistance",new Float32BufferAttribute(ge,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(K,me){const ge=this.geometry,xe=this.matrixWorld,ye=K.params.Line.threshold,ve=ge.drawRange;if(ge.boundingSphere===null&&ge.computeBoundingSphere(),_sphere$1$1.copy(ge.boundingSphere),_sphere$1$1.applyMatrix4(xe),_sphere$1$1.radius+=ye,K.ray.intersectsSphere(_sphere$1$1)===!1)return;_inverseMatrix$1.copy(xe).invert(),_ray$1.copy(K.ray).applyMatrix4(_inverseMatrix$1);const _e=ye/((this.scale.x+this.scale.y+this.scale.z)/3),Ee=_e*_e,be=this.isLineSegments?2:1,Ae=ge.index,Ce=ge.attributes.position;if(Ae!==null){const Te=Math.max(0,ve.start),Re=Math.min(Ae.count,ve.start+ve.count);for(let De=Te,Ie=Re-1;De<Ie;De+=be){const Be=Ae.getX(De),Le=Ae.getX(De+1),Oe=checkIntersection$2(this,K,_ray$1,Ee,Be,Le,De);Oe&&me.push(Oe)}if(this.isLineLoop){const De=Ae.getX(Re-1),Ie=Ae.getX(Te),Be=checkIntersection$2(this,K,_ray$1,Ee,De,Ie,Re-1);Be&&me.push(Be)}}else{const Te=Math.max(0,ve.start),Re=Math.min(Ce.count,ve.start+ve.count);for(let De=Te,Ie=Re-1;De<Ie;De+=be){const Be=checkIntersection$2(this,K,_ray$1,Ee,De,De+1,De);Be&&me.push(Be)}if(this.isLineLoop){const De=checkIntersection$2(this,K,_ray$1,Ee,Re-1,Te,Re-1);De&&me.push(De)}}}updateMorphTargets(){const me=this.geometry.morphAttributes,ge=Object.keys(me);if(ge.length>0){const xe=me[ge[0]];if(xe!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ye=0,ve=xe.length;ye<ve;ye++){const _e=xe[ye].name||String(ye);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_e]=ye}}}}};function checkIntersection$2(fe,K,me,ge,xe,ye,ve){const _e=fe.geometry.attributes.position;if(_vStart.fromBufferAttribute(_e,xe),_vEnd.fromBufferAttribute(_e,ye),me.distanceSqToSegment(_vStart,_vEnd,_intersectPointOnRay,_intersectPointOnSegment)>ge)return;_intersectPointOnRay.applyMatrix4(fe.matrixWorld);const be=K.ray.origin.distanceTo(_intersectPointOnRay);if(!(be<K.near||be>K.far))return{distance:be,point:_intersectPointOnSegment.clone().applyMatrix4(fe.matrixWorld),index:ve,face:null,faceIndex:null,barycoord:null,object:fe}}const _start$1=new Vector3,_end$1=new Vector3;class LineSegments extends Line$2{constructor(K,me){super(K,me),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const K=this.geometry;if(K.index===null){const me=K.attributes.position,ge=[];for(let xe=0,ye=me.count;xe<ye;xe+=2)_start$1.fromBufferAttribute(me,xe),_end$1.fromBufferAttribute(me,xe+1),ge[xe]=xe===0?0:ge[xe-1],ge[xe+1]=ge[xe]+_start$1.distanceTo(_end$1);K.setAttribute("lineDistance",new Float32BufferAttribute(ge,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class LineLoop extends Line$2{constructor(K,me){super(K,me),this.isLineLoop=!0,this.type="LineLoop"}}class PointsMaterial extends Material{constructor(K){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Color$1(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.color.copy(K.color),this.map=K.map,this.alphaMap=K.alphaMap,this.size=K.size,this.sizeAttenuation=K.sizeAttenuation,this.fog=K.fog,this}}const _inverseMatrix=new Matrix4,_ray$4=new Ray,_sphere$7=new Sphere,_position$2=new Vector3;class Points extends Object3D{constructor(K=new BufferGeometry,me=new PointsMaterial){super(),this.isPoints=!0,this.type="Points",this.geometry=K,this.material=me,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(K,me){return super.copy(K,me),this.material=Array.isArray(K.material)?K.material.slice():K.material,this.geometry=K.geometry,this}raycast(K,me){const ge=this.geometry,xe=this.matrixWorld,ye=K.params.Points.threshold,ve=ge.drawRange;if(ge.boundingSphere===null&&ge.computeBoundingSphere(),_sphere$7.copy(ge.boundingSphere),_sphere$7.applyMatrix4(xe),_sphere$7.radius+=ye,K.ray.intersectsSphere(_sphere$7)===!1)return;_inverseMatrix.copy(xe).invert(),_ray$4.copy(K.ray).applyMatrix4(_inverseMatrix);const _e=ye/((this.scale.x+this.scale.y+this.scale.z)/3),Ee=_e*_e,be=ge.index,Se=ge.attributes.position;if(be!==null){const Ce=Math.max(0,ve.start),Te=Math.min(be.count,ve.start+ve.count);for(let Re=Ce,De=Te;Re<De;Re++){const Ie=be.getX(Re);_position$2.fromBufferAttribute(Se,Ie),testPoint(_position$2,Ie,Ee,xe,K,me,this)}}else{const Ce=Math.max(0,ve.start),Te=Math.min(Se.count,ve.start+ve.count);for(let Re=Ce,De=Te;Re<De;Re++)_position$2.fromBufferAttribute(Se,Re),testPoint(_position$2,Re,Ee,xe,K,me,this)}}updateMorphTargets(){const me=this.geometry.morphAttributes,ge=Object.keys(me);if(ge.length>0){const xe=me[ge[0]];if(xe!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let ye=0,ve=xe.length;ye<ve;ye++){const _e=xe[ye].name||String(ye);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_e]=ye}}}}}function testPoint(fe,K,me,ge,xe,ye,ve){const _e=_ray$4.distanceSqToPoint(fe);if(_e<me){const Ee=new Vector3;_ray$4.closestPointToPoint(fe,Ee),Ee.applyMatrix4(ge);const be=xe.ray.origin.distanceTo(Ee);if(be<xe.near||be>xe.far)return;ye.push({distance:be,distanceToRay:Math.sqrt(_e),point:Ee,index:K,face:null,faceIndex:null,barycoord:null,object:ve})}}class VideoTexture extends Texture{constructor(K,me,ge,xe,ye,ve,_e,Ee,be){super(K,me,ge,xe,ye,ve,_e,Ee,be),this.isVideoTexture=!0,this.minFilter=ve!==void 0?ve:LinearFilter,this.magFilter=ye!==void 0?ye:LinearFilter,this.generateMipmaps=!1;const Ae=this;function Se(){Ae.needsUpdate=!0,K.requestVideoFrameCallback(Se)}"requestVideoFrameCallback"in K&&K.requestVideoFrameCallback(Se)}clone(){return new this.constructor(this.image).copy(this)}update(){const K=this.image;"requestVideoFrameCallback"in K===!1&&K.readyState>=K.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class VideoFrameTexture extends VideoTexture{constructor(K,me,ge,xe,ye,ve,_e,Ee){super({},K,me,ge,xe,ye,ve,_e,Ee),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(K){this.image=K,this.needsUpdate=!0}}class FramebufferTexture extends Texture{constructor(K,me){super({width:K,height:me}),this.isFramebufferTexture=!0,this.magFilter=NearestFilter,this.minFilter=NearestFilter,this.generateMipmaps=!1,this.needsUpdate=!0}}class CompressedTexture extends Texture{constructor(K,me,ge,xe,ye,ve,_e,Ee,be,Ae,Se,Ce){super(null,ve,_e,Ee,be,Ae,xe,ye,Se,Ce),this.isCompressedTexture=!0,this.image={width:me,height:ge},this.mipmaps=K,this.flipY=!1,this.generateMipmaps=!1}}class CompressedArrayTexture extends CompressedTexture{constructor(K,me,ge,xe,ye,ve){super(K,me,ge,ye,ve),this.isCompressedArrayTexture=!0,this.image.depth=xe,this.wrapR=ClampToEdgeWrapping,this.layerUpdates=new Set}addLayerUpdate(K){this.layerUpdates.add(K)}clearLayerUpdates(){this.layerUpdates.clear()}}class CompressedCubeTexture extends CompressedTexture{constructor(K,me,ge){super(void 0,K[0].width,K[0].height,me,ge,CubeReflectionMapping),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=K}}class CanvasTexture extends Texture{constructor(K,me,ge,xe,ye,ve,_e,Ee,be){super(K,me,ge,xe,ye,ve,_e,Ee,be),this.isCanvasTexture=!0,this.needsUpdate=!0}}class DepthTexture extends Texture{constructor(K,me,ge,xe,ye,ve,_e,Ee,be,Ae=DepthFormat){if(Ae!==DepthFormat&&Ae!==DepthStencilFormat)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");ge===void 0&&Ae===DepthFormat&&(ge=UnsignedIntType),ge===void 0&&Ae===DepthStencilFormat&&(ge=UnsignedInt248Type),super(null,xe,ye,ve,_e,Ee,Ae,ge,be),this.isDepthTexture=!0,this.image={width:K,height:me},this.magFilter=_e!==void 0?_e:NearestFilter,this.minFilter=Ee!==void 0?Ee:NearestFilter,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(K){return super.copy(K),this.source=new Source(Object.assign({},K.image)),this.compareFunction=K.compareFunction,this}toJSON(K){const me=super.toJSON(K);return this.compareFunction!==null&&(me.compareFunction=this.compareFunction),me}}class Curve{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(K,me){const ge=this.getUtoTmapping(K);return this.getPoint(ge,me)}getPoints(K=5){const me=[];for(let ge=0;ge<=K;ge++)me.push(this.getPoint(ge/K));return me}getSpacedPoints(K=5){const me=[];for(let ge=0;ge<=K;ge++)me.push(this.getPointAt(ge/K));return me}getLength(){const K=this.getLengths();return K[K.length-1]}getLengths(K=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===K+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const me=[];let ge,xe=this.getPoint(0),ye=0;me.push(0);for(let ve=1;ve<=K;ve++)ge=this.getPoint(ve/K),ye+=ge.distanceTo(xe),me.push(ye),xe=ge;return this.cacheArcLengths=me,me}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(K,me=null){const ge=this.getLengths();let xe=0;const ye=ge.length;let ve;me?ve=me:ve=K*ge[ye-1];let _e=0,Ee=ye-1,be;for(;_e<=Ee;)if(xe=Math.floor(_e+(Ee-_e)/2),be=ge[xe]-ve,be<0)_e=xe+1;else if(be>0)Ee=xe-1;else{Ee=xe;break}if(xe=Ee,ge[xe]===ve)return xe/(ye-1);const Ae=ge[xe],Ce=ge[xe+1]-Ae,Te=(ve-Ae)/Ce;return(xe+Te)/(ye-1)}getTangent(K,me){let xe=K-1e-4,ye=K+1e-4;xe<0&&(xe=0),ye>1&&(ye=1);const ve=this.getPoint(xe),_e=this.getPoint(ye),Ee=me||(ve.isVector2?new Vector2:new Vector3);return Ee.copy(_e).sub(ve).normalize(),Ee}getTangentAt(K,me){const ge=this.getUtoTmapping(K);return this.getTangent(ge,me)}computeFrenetFrames(K,me=!1){const ge=new Vector3,xe=[],ye=[],ve=[],_e=new Vector3,Ee=new Matrix4;for(let Te=0;Te<=K;Te++){const Re=Te/K;xe[Te]=this.getTangentAt(Re,new Vector3)}ye[0]=new Vector3,ve[0]=new Vector3;let be=Number.MAX_VALUE;const Ae=Math.abs(xe[0].x),Se=Math.abs(xe[0].y),Ce=Math.abs(xe[0].z);Ae<=be&&(be=Ae,ge.set(1,0,0)),Se<=be&&(be=Se,ge.set(0,1,0)),Ce<=be&&ge.set(0,0,1),_e.crossVectors(xe[0],ge).normalize(),ye[0].crossVectors(xe[0],_e),ve[0].crossVectors(xe[0],ye[0]);for(let Te=1;Te<=K;Te++){if(ye[Te]=ye[Te-1].clone(),ve[Te]=ve[Te-1].clone(),_e.crossVectors(xe[Te-1],xe[Te]),_e.length()>Number.EPSILON){_e.normalize();const Re=Math.acos(clamp$1(xe[Te-1].dot(xe[Te]),-1,1));ye[Te].applyMatrix4(Ee.makeRotationAxis(_e,Re))}ve[Te].crossVectors(xe[Te],ye[Te])}if(me===!0){let Te=Math.acos(clamp$1(ye[0].dot(ye[K]),-1,1));Te/=K,xe[0].dot(_e.crossVectors(ye[0],ye[K]))>0&&(Te=-Te);for(let Re=1;Re<=K;Re++)ye[Re].applyMatrix4(Ee.makeRotationAxis(xe[Re],Te*Re)),ve[Re].crossVectors(xe[Re],ye[Re])}return{tangents:xe,normals:ye,binormals:ve}}clone(){return new this.constructor().copy(this)}copy(K){return this.arcLengthDivisions=K.arcLengthDivisions,this}toJSON(){const K={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return K.arcLengthDivisions=this.arcLengthDivisions,K.type=this.type,K}fromJSON(K){return this.arcLengthDivisions=K.arcLengthDivisions,this}}class EllipseCurve extends Curve{constructor(K=0,me=0,ge=1,xe=1,ye=0,ve=Math.PI*2,_e=!1,Ee=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=K,this.aY=me,this.xRadius=ge,this.yRadius=xe,this.aStartAngle=ye,this.aEndAngle=ve,this.aClockwise=_e,this.aRotation=Ee}getPoint(K,me=new Vector2){const ge=me,xe=Math.PI*2;let ye=this.aEndAngle-this.aStartAngle;const ve=Math.abs(ye)<Number.EPSILON;for(;ye<0;)ye+=xe;for(;ye>xe;)ye-=xe;ye<Number.EPSILON&&(ve?ye=0:ye=xe),this.aClockwise===!0&&!ve&&(ye===xe?ye=-xe:ye=ye-xe);const _e=this.aStartAngle+K*ye;let Ee=this.aX+this.xRadius*Math.cos(_e),be=this.aY+this.yRadius*Math.sin(_e);if(this.aRotation!==0){const Ae=Math.cos(this.aRotation),Se=Math.sin(this.aRotation),Ce=Ee-this.aX,Te=be-this.aY;Ee=Ce*Ae-Te*Se+this.aX,be=Ce*Se+Te*Ae+this.aY}return ge.set(Ee,be)}copy(K){return super.copy(K),this.aX=K.aX,this.aY=K.aY,this.xRadius=K.xRadius,this.yRadius=K.yRadius,this.aStartAngle=K.aStartAngle,this.aEndAngle=K.aEndAngle,this.aClockwise=K.aClockwise,this.aRotation=K.aRotation,this}toJSON(){const K=super.toJSON();return K.aX=this.aX,K.aY=this.aY,K.xRadius=this.xRadius,K.yRadius=this.yRadius,K.aStartAngle=this.aStartAngle,K.aEndAngle=this.aEndAngle,K.aClockwise=this.aClockwise,K.aRotation=this.aRotation,K}fromJSON(K){return super.fromJSON(K),this.aX=K.aX,this.aY=K.aY,this.xRadius=K.xRadius,this.yRadius=K.yRadius,this.aStartAngle=K.aStartAngle,this.aEndAngle=K.aEndAngle,this.aClockwise=K.aClockwise,this.aRotation=K.aRotation,this}}class ArcCurve extends EllipseCurve{constructor(K,me,ge,xe,ye,ve){super(K,me,ge,ge,xe,ye,ve),this.isArcCurve=!0,this.type="ArcCurve"}}function CubicPoly(){let fe=0,K=0,me=0,ge=0;function xe(ye,ve,_e,Ee){fe=ye,K=_e,me=-3*ye+3*ve-2*_e-Ee,ge=2*ye-2*ve+_e+Ee}return{initCatmullRom:function(ye,ve,_e,Ee,be){xe(ve,_e,be*(_e-ye),be*(Ee-ve))},initNonuniformCatmullRom:function(ye,ve,_e,Ee,be,Ae,Se){let Ce=(ve-ye)/be-(_e-ye)/(be+Ae)+(_e-ve)/Ae,Te=(_e-ve)/Ae-(Ee-ve)/(Ae+Se)+(Ee-_e)/Se;Ce*=Ae,Te*=Ae,xe(ve,_e,Ce,Te)},calc:function(ye){const ve=ye*ye,_e=ve*ye;return fe+K*ye+me*ve+ge*_e}}}const tmp=new Vector3,px=new CubicPoly,py=new CubicPoly,pz=new CubicPoly;class CatmullRomCurve3 extends Curve{constructor(K=[],me=!1,ge="centripetal",xe=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=K,this.closed=me,this.curveType=ge,this.tension=xe}getPoint(K,me=new Vector3){const ge=me,xe=this.points,ye=xe.length,ve=(ye-(this.closed?0:1))*K;let _e=Math.floor(ve),Ee=ve-_e;this.closed?_e+=_e>0?0:(Math.floor(Math.abs(_e)/ye)+1)*ye:Ee===0&&_e===ye-1&&(_e=ye-2,Ee=1);let be,Ae;this.closed||_e>0?be=xe[(_e-1)%ye]:(tmp.subVectors(xe[0],xe[1]).add(xe[0]),be=tmp);const Se=xe[_e%ye],Ce=xe[(_e+1)%ye];if(this.closed||_e+2<ye?Ae=xe[(_e+2)%ye]:(tmp.subVectors(xe[ye-1],xe[ye-2]).add(xe[ye-1]),Ae=tmp),this.curveType==="centripetal"||this.curveType==="chordal"){const Te=this.curveType==="chordal"?.5:.25;let Re=Math.pow(be.distanceToSquared(Se),Te),De=Math.pow(Se.distanceToSquared(Ce),Te),Ie=Math.pow(Ce.distanceToSquared(Ae),Te);De<1e-4&&(De=1),Re<1e-4&&(Re=De),Ie<1e-4&&(Ie=De),px.initNonuniformCatmullRom(be.x,Se.x,Ce.x,Ae.x,Re,De,Ie),py.initNonuniformCatmullRom(be.y,Se.y,Ce.y,Ae.y,Re,De,Ie),pz.initNonuniformCatmullRom(be.z,Se.z,Ce.z,Ae.z,Re,De,Ie)}else this.curveType==="catmullrom"&&(px.initCatmullRom(be.x,Se.x,Ce.x,Ae.x,this.tension),py.initCatmullRom(be.y,Se.y,Ce.y,Ae.y,this.tension),pz.initCatmullRom(be.z,Se.z,Ce.z,Ae.z,this.tension));return ge.set(px.calc(Ee),py.calc(Ee),pz.calc(Ee)),ge}copy(K){super.copy(K),this.points=[];for(let me=0,ge=K.points.length;me<ge;me++){const xe=K.points[me];this.points.push(xe.clone())}return this.closed=K.closed,this.curveType=K.curveType,this.tension=K.tension,this}toJSON(){const K=super.toJSON();K.points=[];for(let me=0,ge=this.points.length;me<ge;me++){const xe=this.points[me];K.points.push(xe.toArray())}return K.closed=this.closed,K.curveType=this.curveType,K.tension=this.tension,K}fromJSON(K){super.fromJSON(K),this.points=[];for(let me=0,ge=K.points.length;me<ge;me++){const xe=K.points[me];this.points.push(new Vector3().fromArray(xe))}return this.closed=K.closed,this.curveType=K.curveType,this.tension=K.tension,this}}function CatmullRom(fe,K,me,ge,xe){const ye=(ge-K)*.5,ve=(xe-me)*.5,_e=fe*fe,Ee=fe*_e;return(2*me-2*ge+ye+ve)*Ee+(-3*me+3*ge-2*ye-ve)*_e+ye*fe+me}function QuadraticBezierP0(fe,K){const me=1-fe;return me*me*K}function QuadraticBezierP1(fe,K){return 2*(1-fe)*fe*K}function QuadraticBezierP2(fe,K){return fe*fe*K}function QuadraticBezier(fe,K,me,ge){return QuadraticBezierP0(fe,K)+QuadraticBezierP1(fe,me)+QuadraticBezierP2(fe,ge)}function CubicBezierP0(fe,K){const me=1-fe;return me*me*me*K}function CubicBezierP1(fe,K){const me=1-fe;return 3*me*me*fe*K}function CubicBezierP2(fe,K){return 3*(1-fe)*fe*fe*K}function CubicBezierP3(fe,K){return fe*fe*fe*K}function CubicBezier(fe,K,me,ge,xe){return CubicBezierP0(fe,K)+CubicBezierP1(fe,me)+CubicBezierP2(fe,ge)+CubicBezierP3(fe,xe)}class CubicBezierCurve extends Curve{constructor(K=new Vector2,me=new Vector2,ge=new Vector2,xe=new Vector2){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=K,this.v1=me,this.v2=ge,this.v3=xe}getPoint(K,me=new Vector2){const ge=me,xe=this.v0,ye=this.v1,ve=this.v2,_e=this.v3;return ge.set(CubicBezier(K,xe.x,ye.x,ve.x,_e.x),CubicBezier(K,xe.y,ye.y,ve.y,_e.y)),ge}copy(K){return super.copy(K),this.v0.copy(K.v0),this.v1.copy(K.v1),this.v2.copy(K.v2),this.v3.copy(K.v3),this}toJSON(){const K=super.toJSON();return K.v0=this.v0.toArray(),K.v1=this.v1.toArray(),K.v2=this.v2.toArray(),K.v3=this.v3.toArray(),K}fromJSON(K){return super.fromJSON(K),this.v0.fromArray(K.v0),this.v1.fromArray(K.v1),this.v2.fromArray(K.v2),this.v3.fromArray(K.v3),this}}class CubicBezierCurve3 extends Curve{constructor(K=new Vector3,me=new Vector3,ge=new Vector3,xe=new Vector3){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=K,this.v1=me,this.v2=ge,this.v3=xe}getPoint(K,me=new Vector3){const ge=me,xe=this.v0,ye=this.v1,ve=this.v2,_e=this.v3;return ge.set(CubicBezier(K,xe.x,ye.x,ve.x,_e.x),CubicBezier(K,xe.y,ye.y,ve.y,_e.y),CubicBezier(K,xe.z,ye.z,ve.z,_e.z)),ge}copy(K){return super.copy(K),this.v0.copy(K.v0),this.v1.copy(K.v1),this.v2.copy(K.v2),this.v3.copy(K.v3),this}toJSON(){const K=super.toJSON();return K.v0=this.v0.toArray(),K.v1=this.v1.toArray(),K.v2=this.v2.toArray(),K.v3=this.v3.toArray(),K}fromJSON(K){return super.fromJSON(K),this.v0.fromArray(K.v0),this.v1.fromArray(K.v1),this.v2.fromArray(K.v2),this.v3.fromArray(K.v3),this}}class LineCurve extends Curve{constructor(K=new Vector2,me=new Vector2){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=K,this.v2=me}getPoint(K,me=new Vector2){const ge=me;return K===1?ge.copy(this.v2):(ge.copy(this.v2).sub(this.v1),ge.multiplyScalar(K).add(this.v1)),ge}getPointAt(K,me){return this.getPoint(K,me)}getTangent(K,me=new Vector2){return me.subVectors(this.v2,this.v1).normalize()}getTangentAt(K,me){return this.getTangent(K,me)}copy(K){return super.copy(K),this.v1.copy(K.v1),this.v2.copy(K.v2),this}toJSON(){const K=super.toJSON();return K.v1=this.v1.toArray(),K.v2=this.v2.toArray(),K}fromJSON(K){return super.fromJSON(K),this.v1.fromArray(K.v1),this.v2.fromArray(K.v2),this}}class LineCurve3 extends Curve{constructor(K=new Vector3,me=new Vector3){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=K,this.v2=me}getPoint(K,me=new Vector3){const ge=me;return K===1?ge.copy(this.v2):(ge.copy(this.v2).sub(this.v1),ge.multiplyScalar(K).add(this.v1)),ge}getPointAt(K,me){return this.getPoint(K,me)}getTangent(K,me=new Vector3){return me.subVectors(this.v2,this.v1).normalize()}getTangentAt(K,me){return this.getTangent(K,me)}copy(K){return super.copy(K),this.v1.copy(K.v1),this.v2.copy(K.v2),this}toJSON(){const K=super.toJSON();return K.v1=this.v1.toArray(),K.v2=this.v2.toArray(),K}fromJSON(K){return super.fromJSON(K),this.v1.fromArray(K.v1),this.v2.fromArray(K.v2),this}}class QuadraticBezierCurve extends Curve{constructor(K=new Vector2,me=new Vector2,ge=new Vector2){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=K,this.v1=me,this.v2=ge}getPoint(K,me=new Vector2){const ge=me,xe=this.v0,ye=this.v1,ve=this.v2;return ge.set(QuadraticBezier(K,xe.x,ye.x,ve.x),QuadraticBezier(K,xe.y,ye.y,ve.y)),ge}copy(K){return super.copy(K),this.v0.copy(K.v0),this.v1.copy(K.v1),this.v2.copy(K.v2),this}toJSON(){const K=super.toJSON();return K.v0=this.v0.toArray(),K.v1=this.v1.toArray(),K.v2=this.v2.toArray(),K}fromJSON(K){return super.fromJSON(K),this.v0.fromArray(K.v0),this.v1.fromArray(K.v1),this.v2.fromArray(K.v2),this}}class QuadraticBezierCurve3 extends Curve{constructor(K=new Vector3,me=new Vector3,ge=new Vector3){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=K,this.v1=me,this.v2=ge}getPoint(K,me=new Vector3){const ge=me,xe=this.v0,ye=this.v1,ve=this.v2;return ge.set(QuadraticBezier(K,xe.x,ye.x,ve.x),QuadraticBezier(K,xe.y,ye.y,ve.y),QuadraticBezier(K,xe.z,ye.z,ve.z)),ge}copy(K){return super.copy(K),this.v0.copy(K.v0),this.v1.copy(K.v1),this.v2.copy(K.v2),this}toJSON(){const K=super.toJSON();return K.v0=this.v0.toArray(),K.v1=this.v1.toArray(),K.v2=this.v2.toArray(),K}fromJSON(K){return super.fromJSON(K),this.v0.fromArray(K.v0),this.v1.fromArray(K.v1),this.v2.fromArray(K.v2),this}}class SplineCurve extends Curve{constructor(K=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=K}getPoint(K,me=new Vector2){const ge=me,xe=this.points,ye=(xe.length-1)*K,ve=Math.floor(ye),_e=ye-ve,Ee=xe[ve===0?ve:ve-1],be=xe[ve],Ae=xe[ve>xe.length-2?xe.length-1:ve+1],Se=xe[ve>xe.length-3?xe.length-1:ve+2];return ge.set(CatmullRom(_e,Ee.x,be.x,Ae.x,Se.x),CatmullRom(_e,Ee.y,be.y,Ae.y,Se.y)),ge}copy(K){super.copy(K),this.points=[];for(let me=0,ge=K.points.length;me<ge;me++){const xe=K.points[me];this.points.push(xe.clone())}return this}toJSON(){const K=super.toJSON();K.points=[];for(let me=0,ge=this.points.length;me<ge;me++){const xe=this.points[me];K.points.push(xe.toArray())}return K}fromJSON(K){super.fromJSON(K),this.points=[];for(let me=0,ge=K.points.length;me<ge;me++){const xe=K.points[me];this.points.push(new Vector2().fromArray(xe))}return this}}var Curves=Object.freeze({__proto__:null,ArcCurve,CatmullRomCurve3,CubicBezierCurve,CubicBezierCurve3,EllipseCurve,LineCurve,LineCurve3,QuadraticBezierCurve,QuadraticBezierCurve3,SplineCurve});class CurvePath extends Curve{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(K){this.curves.push(K)}closePath(){const K=this.curves[0].getPoint(0),me=this.curves[this.curves.length-1].getPoint(1);if(!K.equals(me)){const ge=K.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Curves[ge](me,K))}return this}getPoint(K,me){const ge=K*this.getLength(),xe=this.getCurveLengths();let ye=0;for(;ye<xe.length;){if(xe[ye]>=ge){const ve=xe[ye]-ge,_e=this.curves[ye],Ee=_e.getLength(),be=Ee===0?0:1-ve/Ee;return _e.getPointAt(be,me)}ye++}return null}getLength(){const K=this.getCurveLengths();return K[K.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const K=[];let me=0;for(let ge=0,xe=this.curves.length;ge<xe;ge++)me+=this.curves[ge].getLength(),K.push(me);return this.cacheLengths=K,K}getSpacedPoints(K=40){const me=[];for(let ge=0;ge<=K;ge++)me.push(this.getPoint(ge/K));return this.autoClose&&me.push(me[0]),me}getPoints(K=12){const me=[];let ge;for(let xe=0,ye=this.curves;xe<ye.length;xe++){const ve=ye[xe],_e=ve.isEllipseCurve?K*2:ve.isLineCurve||ve.isLineCurve3?1:ve.isSplineCurve?K*ve.points.length:K,Ee=ve.getPoints(_e);for(let be=0;be<Ee.length;be++){const Ae=Ee[be];ge&&ge.equals(Ae)||(me.push(Ae),ge=Ae)}}return this.autoClose&&me.length>1&&!me[me.length-1].equals(me[0])&&me.push(me[0]),me}copy(K){super.copy(K),this.curves=[];for(let me=0,ge=K.curves.length;me<ge;me++){const xe=K.curves[me];this.curves.push(xe.clone())}return this.autoClose=K.autoClose,this}toJSON(){const K=super.toJSON();K.autoClose=this.autoClose,K.curves=[];for(let me=0,ge=this.curves.length;me<ge;me++){const xe=this.curves[me];K.curves.push(xe.toJSON())}return K}fromJSON(K){super.fromJSON(K),this.autoClose=K.autoClose,this.curves=[];for(let me=0,ge=K.curves.length;me<ge;me++){const xe=K.curves[me];this.curves.push(new Curves[xe.type]().fromJSON(xe))}return this}}class Path extends CurvePath{constructor(K){super(),this.type="Path",this.currentPoint=new Vector2,K&&this.setFromPoints(K)}setFromPoints(K){this.moveTo(K[0].x,K[0].y);for(let me=1,ge=K.length;me<ge;me++)this.lineTo(K[me].x,K[me].y);return this}moveTo(K,me){return this.currentPoint.set(K,me),this}lineTo(K,me){const ge=new LineCurve(this.currentPoint.clone(),new Vector2(K,me));return this.curves.push(ge),this.currentPoint.set(K,me),this}quadraticCurveTo(K,me,ge,xe){const ye=new QuadraticBezierCurve(this.currentPoint.clone(),new Vector2(K,me),new Vector2(ge,xe));return this.curves.push(ye),this.currentPoint.set(ge,xe),this}bezierCurveTo(K,me,ge,xe,ye,ve){const _e=new CubicBezierCurve(this.currentPoint.clone(),new Vector2(K,me),new Vector2(ge,xe),new Vector2(ye,ve));return this.curves.push(_e),this.currentPoint.set(ye,ve),this}splineThru(K){const me=[this.currentPoint.clone()].concat(K),ge=new SplineCurve(me);return this.curves.push(ge),this.currentPoint.copy(K[K.length-1]),this}arc(K,me,ge,xe,ye,ve){const _e=this.currentPoint.x,Ee=this.currentPoint.y;return this.absarc(K+_e,me+Ee,ge,xe,ye,ve),this}absarc(K,me,ge,xe,ye,ve){return this.absellipse(K,me,ge,ge,xe,ye,ve),this}ellipse(K,me,ge,xe,ye,ve,_e,Ee){const be=this.currentPoint.x,Ae=this.currentPoint.y;return this.absellipse(K+be,me+Ae,ge,xe,ye,ve,_e,Ee),this}absellipse(K,me,ge,xe,ye,ve,_e,Ee){const be=new EllipseCurve(K,me,ge,xe,ye,ve,_e,Ee);if(this.curves.length>0){const Se=be.getPoint(0);Se.equals(this.currentPoint)||this.lineTo(Se.x,Se.y)}this.curves.push(be);const Ae=be.getPoint(1);return this.currentPoint.copy(Ae),this}copy(K){return super.copy(K),this.currentPoint.copy(K.currentPoint),this}toJSON(){const K=super.toJSON();return K.currentPoint=this.currentPoint.toArray(),K}fromJSON(K){return super.fromJSON(K),this.currentPoint.fromArray(K.currentPoint),this}}class LatheGeometry extends BufferGeometry{constructor(K=[new Vector2(0,-.5),new Vector2(.5,0),new Vector2(0,.5)],me=12,ge=0,xe=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:K,segments:me,phiStart:ge,phiLength:xe},me=Math.floor(me),xe=clamp$1(xe,0,Math.PI*2);const ye=[],ve=[],_e=[],Ee=[],be=[],Ae=1/me,Se=new Vector3,Ce=new Vector2,Te=new Vector3,Re=new Vector3,De=new Vector3;let Ie=0,Be=0;for(let Le=0;Le<=K.length-1;Le++)switch(Le){case 0:Ie=K[Le+1].x-K[Le].x,Be=K[Le+1].y-K[Le].y,Te.x=Be*1,Te.y=-Ie,Te.z=Be*0,De.copy(Te),Te.normalize(),Ee.push(Te.x,Te.y,Te.z);break;case K.length-1:Ee.push(De.x,De.y,De.z);break;default:Ie=K[Le+1].x-K[Le].x,Be=K[Le+1].y-K[Le].y,Te.x=Be*1,Te.y=-Ie,Te.z=Be*0,Re.copy(Te),Te.x+=De.x,Te.y+=De.y,Te.z+=De.z,Te.normalize(),Ee.push(Te.x,Te.y,Te.z),De.copy(Re)}for(let Le=0;Le<=me;Le++){const Oe=ge+Le*Ae*xe,Fe=Math.sin(Oe),Ue=Math.cos(Oe);for(let Ne=0;Ne<=K.length-1;Ne++){Se.x=K[Ne].x*Fe,Se.y=K[Ne].y,Se.z=K[Ne].x*Ue,ve.push(Se.x,Se.y,Se.z),Ce.x=Le/me,Ce.y=Ne/(K.length-1),_e.push(Ce.x,Ce.y);const He=Ee[3*Ne+0]*Fe,ze=Ee[3*Ne+1],je=Ee[3*Ne+0]*Ue;be.push(He,ze,je)}}for(let Le=0;Le<me;Le++)for(let Oe=0;Oe<K.length-1;Oe++){const Fe=Oe+Le*K.length,Ue=Fe,Ne=Fe+K.length,He=Fe+K.length+1,ze=Fe+1;ye.push(Ue,Ne,ze),ye.push(He,ze,Ne)}this.setIndex(ye),this.setAttribute("position",new Float32BufferAttribute(ve,3)),this.setAttribute("uv",new Float32BufferAttribute(_e,2)),this.setAttribute("normal",new Float32BufferAttribute(be,3))}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new LatheGeometry(K.points,K.segments,K.phiStart,K.phiLength)}}class CapsuleGeometry extends LatheGeometry{constructor(K=1,me=1,ge=4,xe=8){const ye=new Path;ye.absarc(0,-me/2,K,Math.PI*1.5,0),ye.absarc(0,me/2,K,0,Math.PI*.5),super(ye.getPoints(ge),xe),this.type="CapsuleGeometry",this.parameters={radius:K,length:me,capSegments:ge,radialSegments:xe}}static fromJSON(K){return new CapsuleGeometry(K.radius,K.length,K.capSegments,K.radialSegments)}}class CircleGeometry extends BufferGeometry{constructor(K=1,me=32,ge=0,xe=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:K,segments:me,thetaStart:ge,thetaLength:xe},me=Math.max(3,me);const ye=[],ve=[],_e=[],Ee=[],be=new Vector3,Ae=new Vector2;ve.push(0,0,0),_e.push(0,0,1),Ee.push(.5,.5);for(let Se=0,Ce=3;Se<=me;Se++,Ce+=3){const Te=ge+Se/me*xe;be.x=K*Math.cos(Te),be.y=K*Math.sin(Te),ve.push(be.x,be.y,be.z),_e.push(0,0,1),Ae.x=(ve[Ce]/K+1)/2,Ae.y=(ve[Ce+1]/K+1)/2,Ee.push(Ae.x,Ae.y)}for(let Se=1;Se<=me;Se++)ye.push(Se,Se+1,0);this.setIndex(ye),this.setAttribute("position",new Float32BufferAttribute(ve,3)),this.setAttribute("normal",new Float32BufferAttribute(_e,3)),this.setAttribute("uv",new Float32BufferAttribute(Ee,2))}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new CircleGeometry(K.radius,K.segments,K.thetaStart,K.thetaLength)}}class CylinderGeometry extends BufferGeometry{constructor(K=1,me=1,ge=1,xe=32,ye=1,ve=!1,_e=0,Ee=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:K,radiusBottom:me,height:ge,radialSegments:xe,heightSegments:ye,openEnded:ve,thetaStart:_e,thetaLength:Ee};const be=this;xe=Math.floor(xe),ye=Math.floor(ye);const Ae=[],Se=[],Ce=[],Te=[];let Re=0;const De=[],Ie=ge/2;let Be=0;Le(),ve===!1&&(K>0&&Oe(!0),me>0&&Oe(!1)),this.setIndex(Ae),this.setAttribute("position",new Float32BufferAttribute(Se,3)),this.setAttribute("normal",new Float32BufferAttribute(Ce,3)),this.setAttribute("uv",new Float32BufferAttribute(Te,2));function Le(){const Fe=new Vector3,Ue=new Vector3;let Ne=0;const He=(me-K)/ge;for(let ze=0;ze<=ye;ze++){const je=[],Ge=ze/ye,Xe=Ge*(me-K)+K;for(let qe=0;qe<=xe;qe++){const Qe=qe/xe,nt=Qe*Ee+_e,Nt=Math.sin(nt),Ye=Math.cos(nt);Ue.x=Xe*Nt,Ue.y=-Ge*ge+Ie,Ue.z=Xe*Ye,Se.push(Ue.x,Ue.y,Ue.z),Fe.set(Nt,He,Ye).normalize(),Ce.push(Fe.x,Fe.y,Fe.z),Te.push(Qe,1-Ge),je.push(Re++)}De.push(je)}for(let ze=0;ze<xe;ze++)for(let je=0;je<ye;je++){const Ge=De[je][ze],Xe=De[je+1][ze],qe=De[je+1][ze+1],Qe=De[je][ze+1];(K>0||je!==0)&&(Ae.push(Ge,Xe,Qe),Ne+=3),(me>0||je!==ye-1)&&(Ae.push(Xe,qe,Qe),Ne+=3)}be.addGroup(Be,Ne,0),Be+=Ne}function Oe(Fe){const Ue=Re,Ne=new Vector2,He=new Vector3;let ze=0;const je=Fe===!0?K:me,Ge=Fe===!0?1:-1;for(let qe=1;qe<=xe;qe++)Se.push(0,Ie*Ge,0),Ce.push(0,Ge,0),Te.push(.5,.5),Re++;const Xe=Re;for(let qe=0;qe<=xe;qe++){const nt=qe/xe*Ee+_e,Nt=Math.cos(nt),Ye=Math.sin(nt);He.x=je*Ye,He.y=Ie*Ge,He.z=je*Nt,Se.push(He.x,He.y,He.z),Ce.push(0,Ge,0),Ne.x=Nt*.5+.5,Ne.y=Ye*.5*Ge+.5,Te.push(Ne.x,Ne.y),Re++}for(let qe=0;qe<xe;qe++){const Qe=Ue+qe,nt=Xe+qe;Fe===!0?Ae.push(nt,nt+1,Qe):Ae.push(nt+1,nt,Qe),ze+=3}be.addGroup(Be,ze,Fe===!0?1:2),Be+=ze}}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new CylinderGeometry(K.radiusTop,K.radiusBottom,K.height,K.radialSegments,K.heightSegments,K.openEnded,K.thetaStart,K.thetaLength)}}class ConeGeometry extends CylinderGeometry{constructor(K=1,me=1,ge=32,xe=1,ye=!1,ve=0,_e=Math.PI*2){super(0,K,me,ge,xe,ye,ve,_e),this.type="ConeGeometry",this.parameters={radius:K,height:me,radialSegments:ge,heightSegments:xe,openEnded:ye,thetaStart:ve,thetaLength:_e}}static fromJSON(K){return new ConeGeometry(K.radius,K.height,K.radialSegments,K.heightSegments,K.openEnded,K.thetaStart,K.thetaLength)}}class PolyhedronGeometry extends BufferGeometry{constructor(K=[],me=[],ge=1,xe=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:K,indices:me,radius:ge,detail:xe};const ye=[],ve=[];_e(xe),be(ge),Ae(),this.setAttribute("position",new Float32BufferAttribute(ye,3)),this.setAttribute("normal",new Float32BufferAttribute(ye.slice(),3)),this.setAttribute("uv",new Float32BufferAttribute(ve,2)),xe===0?this.computeVertexNormals():this.normalizeNormals();function _e(Le){const Oe=new Vector3,Fe=new Vector3,Ue=new Vector3;for(let Ne=0;Ne<me.length;Ne+=3)Te(me[Ne+0],Oe),Te(me[Ne+1],Fe),Te(me[Ne+2],Ue),Ee(Oe,Fe,Ue,Le)}function Ee(Le,Oe,Fe,Ue){const Ne=Ue+1,He=[];for(let ze=0;ze<=Ne;ze++){He[ze]=[];const je=Le.clone().lerp(Fe,ze/Ne),Ge=Oe.clone().lerp(Fe,ze/Ne),Xe=Ne-ze;for(let qe=0;qe<=Xe;qe++)qe===0&&ze===Ne?He[ze][qe]=je:He[ze][qe]=je.clone().lerp(Ge,qe/Xe)}for(let ze=0;ze<Ne;ze++)for(let je=0;je<2*(Ne-ze)-1;je++){const Ge=Math.floor(je/2);je%2===0?(Ce(He[ze][Ge+1]),Ce(He[ze+1][Ge]),Ce(He[ze][Ge])):(Ce(He[ze][Ge+1]),Ce(He[ze+1][Ge+1]),Ce(He[ze+1][Ge]))}}function be(Le){const Oe=new Vector3;for(let Fe=0;Fe<ye.length;Fe+=3)Oe.x=ye[Fe+0],Oe.y=ye[Fe+1],Oe.z=ye[Fe+2],Oe.normalize().multiplyScalar(Le),ye[Fe+0]=Oe.x,ye[Fe+1]=Oe.y,ye[Fe+2]=Oe.z}function Ae(){const Le=new Vector3;for(let Oe=0;Oe<ye.length;Oe+=3){Le.x=ye[Oe+0],Le.y=ye[Oe+1],Le.z=ye[Oe+2];const Fe=Ie(Le)/2/Math.PI+.5,Ue=Be(Le)/Math.PI+.5;ve.push(Fe,1-Ue)}Re(),Se()}function Se(){for(let Le=0;Le<ve.length;Le+=6){const Oe=ve[Le+0],Fe=ve[Le+2],Ue=ve[Le+4],Ne=Math.max(Oe,Fe,Ue),He=Math.min(Oe,Fe,Ue);Ne>.9&&He<.1&&(Oe<.2&&(ve[Le+0]+=1),Fe<.2&&(ve[Le+2]+=1),Ue<.2&&(ve[Le+4]+=1))}}function Ce(Le){ye.push(Le.x,Le.y,Le.z)}function Te(Le,Oe){const Fe=Le*3;Oe.x=K[Fe+0],Oe.y=K[Fe+1],Oe.z=K[Fe+2]}function Re(){const Le=new Vector3,Oe=new Vector3,Fe=new Vector3,Ue=new Vector3,Ne=new Vector2,He=new Vector2,ze=new Vector2;for(let je=0,Ge=0;je<ye.length;je+=9,Ge+=6){Le.set(ye[je+0],ye[je+1],ye[je+2]),Oe.set(ye[je+3],ye[je+4],ye[je+5]),Fe.set(ye[je+6],ye[je+7],ye[je+8]),Ne.set(ve[Ge+0],ve[Ge+1]),He.set(ve[Ge+2],ve[Ge+3]),ze.set(ve[Ge+4],ve[Ge+5]),Ue.copy(Le).add(Oe).add(Fe).divideScalar(3);const Xe=Ie(Ue);De(Ne,Ge+0,Le,Xe),De(He,Ge+2,Oe,Xe),De(ze,Ge+4,Fe,Xe)}}function De(Le,Oe,Fe,Ue){Ue<0&&Le.x===1&&(ve[Oe]=Le.x-1),Fe.x===0&&Fe.z===0&&(ve[Oe]=Ue/2/Math.PI+.5)}function Ie(Le){return Math.atan2(Le.z,-Le.x)}function Be(Le){return Math.atan2(-Le.y,Math.sqrt(Le.x*Le.x+Le.z*Le.z))}}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new PolyhedronGeometry(K.vertices,K.indices,K.radius,K.details)}}class DodecahedronGeometry extends PolyhedronGeometry{constructor(K=1,me=0){const ge=(1+Math.sqrt(5))/2,xe=1/ge,ye=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-xe,-ge,0,-xe,ge,0,xe,-ge,0,xe,ge,-xe,-ge,0,-xe,ge,0,xe,-ge,0,xe,ge,0,-ge,0,-xe,ge,0,-xe,-ge,0,xe,ge,0,xe],ve=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(ye,ve,K,me),this.type="DodecahedronGeometry",this.parameters={radius:K,detail:me}}static fromJSON(K){return new DodecahedronGeometry(K.radius,K.detail)}}const _v0$3=new Vector3,_v1$1=new Vector3,_normal=new Vector3,_triangle=new Triangle;class EdgesGeometry extends BufferGeometry{constructor(K=null,me=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:K,thresholdAngle:me},K!==null){const xe=Math.pow(10,4),ye=Math.cos(DEG2RAD$1*me),ve=K.getIndex(),_e=K.getAttribute("position"),Ee=ve?ve.count:_e.count,be=[0,0,0],Ae=["a","b","c"],Se=new Array(3),Ce={},Te=[];for(let Re=0;Re<Ee;Re+=3){ve?(be[0]=ve.getX(Re),be[1]=ve.getX(Re+1),be[2]=ve.getX(Re+2)):(be[0]=Re,be[1]=Re+1,be[2]=Re+2);const{a:De,b:Ie,c:Be}=_triangle;if(De.fromBufferAttribute(_e,be[0]),Ie.fromBufferAttribute(_e,be[1]),Be.fromBufferAttribute(_e,be[2]),_triangle.getNormal(_normal),Se[0]=`${Math.round(De.x*xe)},${Math.round(De.y*xe)},${Math.round(De.z*xe)}`,Se[1]=`${Math.round(Ie.x*xe)},${Math.round(Ie.y*xe)},${Math.round(Ie.z*xe)}`,Se[2]=`${Math.round(Be.x*xe)},${Math.round(Be.y*xe)},${Math.round(Be.z*xe)}`,!(Se[0]===Se[1]||Se[1]===Se[2]||Se[2]===Se[0]))for(let Le=0;Le<3;Le++){const Oe=(Le+1)%3,Fe=Se[Le],Ue=Se[Oe],Ne=_triangle[Ae[Le]],He=_triangle[Ae[Oe]],ze=`${Fe}_${Ue}`,je=`${Ue}_${Fe}`;je in Ce&&Ce[je]?(_normal.dot(Ce[je].normal)<=ye&&(Te.push(Ne.x,Ne.y,Ne.z),Te.push(He.x,He.y,He.z)),Ce[je]=null):ze in Ce||(Ce[ze]={index0:be[Le],index1:be[Oe],normal:_normal.clone()})}}for(const Re in Ce)if(Ce[Re]){const{index0:De,index1:Ie}=Ce[Re];_v0$3.fromBufferAttribute(_e,De),_v1$1.fromBufferAttribute(_e,Ie),Te.push(_v0$3.x,_v0$3.y,_v0$3.z),Te.push(_v1$1.x,_v1$1.y,_v1$1.z)}this.setAttribute("position",new Float32BufferAttribute(Te,3))}}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}}class Shape extends Path{constructor(K){super(K),this.uuid=generateUUID(),this.type="Shape",this.holes=[]}getPointsHoles(K){const me=[];for(let ge=0,xe=this.holes.length;ge<xe;ge++)me[ge]=this.holes[ge].getPoints(K);return me}extractPoints(K){return{shape:this.getPoints(K),holes:this.getPointsHoles(K)}}copy(K){super.copy(K),this.holes=[];for(let me=0,ge=K.holes.length;me<ge;me++){const xe=K.holes[me];this.holes.push(xe.clone())}return this}toJSON(){const K=super.toJSON();K.uuid=this.uuid,K.holes=[];for(let me=0,ge=this.holes.length;me<ge;me++){const xe=this.holes[me];K.holes.push(xe.toJSON())}return K}fromJSON(K){super.fromJSON(K),this.uuid=K.uuid,this.holes=[];for(let me=0,ge=K.holes.length;me<ge;me++){const xe=K.holes[me];this.holes.push(new Path().fromJSON(xe))}return this}}class Earcut{static triangulate(K,me,ge=2){const xe=me&&me.length,ye=xe?me[0]*ge:K.length;let ve=linkedList(K,0,ye,ge,!0);const _e=[];if(!ve||ve.next===ve.prev)return _e;let Ee,be,Ae,Se,Ce,Te,Re;if(xe&&(ve=eliminateHoles(K,me,ve,ge)),K.length>80*ge){Ee=Ae=K[0],be=Se=K[1];for(let De=ge;De<ye;De+=ge)Ce=K[De],Te=K[De+1],Ce<Ee&&(Ee=Ce),Te<be&&(be=Te),Ce>Ae&&(Ae=Ce),Te>Se&&(Se=Te);Re=Math.max(Ae-Ee,Se-be),Re=Re!==0?32767/Re:0}return earcutLinked(ve,_e,ge,Ee,be,Re,0),_e}}function linkedList(fe,K,me,ge,xe){let ye,ve;if(xe===signedArea(fe,K,me,ge)>0)for(ye=K;ye<me;ye+=ge)ve=insertNode(ye,fe[ye],fe[ye+1],ve);else for(ye=me-ge;ye>=K;ye-=ge)ve=insertNode(ye,fe[ye],fe[ye+1],ve);return ve&&equals(ve,ve.next)&&(removeNode(ve),ve=ve.next),ve}function filterPoints(fe,K){if(!fe)return fe;K||(K=fe);let me=fe,ge;do if(ge=!1,!me.steiner&&(equals(me,me.next)||area(me.prev,me,me.next)===0)){if(removeNode(me),me=K=me.prev,me===me.next)break;ge=!0}else me=me.next;while(ge||me!==K);return K}function earcutLinked(fe,K,me,ge,xe,ye,ve){if(!fe)return;!ve&&ye&&indexCurve(fe,ge,xe,ye);let _e=fe,Ee,be;for(;fe.prev!==fe.next;){if(Ee=fe.prev,be=fe.next,ye?isEarHashed(fe,ge,xe,ye):isEar(fe)){K.push(Ee.i/me|0),K.push(fe.i/me|0),K.push(be.i/me|0),removeNode(fe),fe=be.next,_e=be.next;continue}if(fe=be,fe===_e){ve?ve===1?(fe=cureLocalIntersections(filterPoints(fe),K,me),earcutLinked(fe,K,me,ge,xe,ye,2)):ve===2&&splitEarcut(fe,K,me,ge,xe,ye):earcutLinked(filterPoints(fe),K,me,ge,xe,ye,1);break}}}function isEar(fe){const K=fe.prev,me=fe,ge=fe.next;if(area(K,me,ge)>=0)return!1;const xe=K.x,ye=me.x,ve=ge.x,_e=K.y,Ee=me.y,be=ge.y,Ae=xe<ye?xe<ve?xe:ve:ye<ve?ye:ve,Se=_e<Ee?_e<be?_e:be:Ee<be?Ee:be,Ce=xe>ye?xe>ve?xe:ve:ye>ve?ye:ve,Te=_e>Ee?_e>be?_e:be:Ee>be?Ee:be;let Re=ge.next;for(;Re!==K;){if(Re.x>=Ae&&Re.x<=Ce&&Re.y>=Se&&Re.y<=Te&&pointInTriangle(xe,_e,ye,Ee,ve,be,Re.x,Re.y)&&area(Re.prev,Re,Re.next)>=0)return!1;Re=Re.next}return!0}function isEarHashed(fe,K,me,ge){const xe=fe.prev,ye=fe,ve=fe.next;if(area(xe,ye,ve)>=0)return!1;const _e=xe.x,Ee=ye.x,be=ve.x,Ae=xe.y,Se=ye.y,Ce=ve.y,Te=_e<Ee?_e<be?_e:be:Ee<be?Ee:be,Re=Ae<Se?Ae<Ce?Ae:Ce:Se<Ce?Se:Ce,De=_e>Ee?_e>be?_e:be:Ee>be?Ee:be,Ie=Ae>Se?Ae>Ce?Ae:Ce:Se>Ce?Se:Ce,Be=zOrder(Te,Re,K,me,ge),Le=zOrder(De,Ie,K,me,ge);let Oe=fe.prevZ,Fe=fe.nextZ;for(;Oe&&Oe.z>=Be&&Fe&&Fe.z<=Le;){if(Oe.x>=Te&&Oe.x<=De&&Oe.y>=Re&&Oe.y<=Ie&&Oe!==xe&&Oe!==ve&&pointInTriangle(_e,Ae,Ee,Se,be,Ce,Oe.x,Oe.y)&&area(Oe.prev,Oe,Oe.next)>=0||(Oe=Oe.prevZ,Fe.x>=Te&&Fe.x<=De&&Fe.y>=Re&&Fe.y<=Ie&&Fe!==xe&&Fe!==ve&&pointInTriangle(_e,Ae,Ee,Se,be,Ce,Fe.x,Fe.y)&&area(Fe.prev,Fe,Fe.next)>=0))return!1;Fe=Fe.nextZ}for(;Oe&&Oe.z>=Be;){if(Oe.x>=Te&&Oe.x<=De&&Oe.y>=Re&&Oe.y<=Ie&&Oe!==xe&&Oe!==ve&&pointInTriangle(_e,Ae,Ee,Se,be,Ce,Oe.x,Oe.y)&&area(Oe.prev,Oe,Oe.next)>=0)return!1;Oe=Oe.prevZ}for(;Fe&&Fe.z<=Le;){if(Fe.x>=Te&&Fe.x<=De&&Fe.y>=Re&&Fe.y<=Ie&&Fe!==xe&&Fe!==ve&&pointInTriangle(_e,Ae,Ee,Se,be,Ce,Fe.x,Fe.y)&&area(Fe.prev,Fe,Fe.next)>=0)return!1;Fe=Fe.nextZ}return!0}function cureLocalIntersections(fe,K,me){let ge=fe;do{const xe=ge.prev,ye=ge.next.next;!equals(xe,ye)&&intersects(xe,ge,ge.next,ye)&&locallyInside(xe,ye)&&locallyInside(ye,xe)&&(K.push(xe.i/me|0),K.push(ge.i/me|0),K.push(ye.i/me|0),removeNode(ge),removeNode(ge.next),ge=fe=ye),ge=ge.next}while(ge!==fe);return filterPoints(ge)}function splitEarcut(fe,K,me,ge,xe,ye){let ve=fe;do{let _e=ve.next.next;for(;_e!==ve.prev;){if(ve.i!==_e.i&&isValidDiagonal(ve,_e)){let Ee=splitPolygon(ve,_e);ve=filterPoints(ve,ve.next),Ee=filterPoints(Ee,Ee.next),earcutLinked(ve,K,me,ge,xe,ye,0),earcutLinked(Ee,K,me,ge,xe,ye,0);return}_e=_e.next}ve=ve.next}while(ve!==fe)}function eliminateHoles(fe,K,me,ge){const xe=[];let ye,ve,_e,Ee,be;for(ye=0,ve=K.length;ye<ve;ye++)_e=K[ye]*ge,Ee=ye<ve-1?K[ye+1]*ge:fe.length,be=linkedList(fe,_e,Ee,ge,!1),be===be.next&&(be.steiner=!0),xe.push(getLeftmost(be));for(xe.sort(compareX),ye=0;ye<xe.length;ye++)me=eliminateHole(xe[ye],me);return me}function compareX(fe,K){return fe.x-K.x}function eliminateHole(fe,K){const me=findHoleBridge(fe,K);if(!me)return K;const ge=splitPolygon(me,fe);return filterPoints(ge,ge.next),filterPoints(me,me.next)}function findHoleBridge(fe,K){let me=K,ge=-1/0,xe;const ye=fe.x,ve=fe.y;do{if(ve<=me.y&&ve>=me.next.y&&me.next.y!==me.y){const Ce=me.x+(ve-me.y)*(me.next.x-me.x)/(me.next.y-me.y);if(Ce<=ye&&Ce>ge&&(ge=Ce,xe=me.x<me.next.x?me:me.next,Ce===ye))return xe}me=me.next}while(me!==K);if(!xe)return null;const _e=xe,Ee=xe.x,be=xe.y;let Ae=1/0,Se;me=xe;do ye>=me.x&&me.x>=Ee&&ye!==me.x&&pointInTriangle(ve<be?ye:ge,ve,Ee,be,ve<be?ge:ye,ve,me.x,me.y)&&(Se=Math.abs(ve-me.y)/(ye-me.x),locallyInside(me,fe)&&(Se<Ae||Se===Ae&&(me.x>xe.x||me.x===xe.x&&sectorContainsSector(xe,me)))&&(xe=me,Ae=Se)),me=me.next;while(me!==_e);return xe}function sectorContainsSector(fe,K){return area(fe.prev,fe,K.prev)<0&&area(K.next,fe,fe.next)<0}function indexCurve(fe,K,me,ge){let xe=fe;do xe.z===0&&(xe.z=zOrder(xe.x,xe.y,K,me,ge)),xe.prevZ=xe.prev,xe.nextZ=xe.next,xe=xe.next;while(xe!==fe);xe.prevZ.nextZ=null,xe.prevZ=null,sortLinked(xe)}function sortLinked(fe){let K,me,ge,xe,ye,ve,_e,Ee,be=1;do{for(me=fe,fe=null,ye=null,ve=0;me;){for(ve++,ge=me,_e=0,K=0;K<be&&(_e++,ge=ge.nextZ,!!ge);K++);for(Ee=be;_e>0||Ee>0&&ge;)_e!==0&&(Ee===0||!ge||me.z<=ge.z)?(xe=me,me=me.nextZ,_e--):(xe=ge,ge=ge.nextZ,Ee--),ye?ye.nextZ=xe:fe=xe,xe.prevZ=ye,ye=xe;me=ge}ye.nextZ=null,be*=2}while(ve>1);return fe}function zOrder(fe,K,me,ge,xe){return fe=(fe-me)*xe|0,K=(K-ge)*xe|0,fe=(fe|fe<<8)&16711935,fe=(fe|fe<<4)&252645135,fe=(fe|fe<<2)&858993459,fe=(fe|fe<<1)&1431655765,K=(K|K<<8)&16711935,K=(K|K<<4)&252645135,K=(K|K<<2)&858993459,K=(K|K<<1)&1431655765,fe|K<<1}function getLeftmost(fe){let K=fe,me=fe;do(K.x<me.x||K.x===me.x&&K.y<me.y)&&(me=K),K=K.next;while(K!==fe);return me}function pointInTriangle(fe,K,me,ge,xe,ye,ve,_e){return(xe-ve)*(K-_e)>=(fe-ve)*(ye-_e)&&(fe-ve)*(ge-_e)>=(me-ve)*(K-_e)&&(me-ve)*(ye-_e)>=(xe-ve)*(ge-_e)}function isValidDiagonal(fe,K){return fe.next.i!==K.i&&fe.prev.i!==K.i&&!intersectsPolygon(fe,K)&&(locallyInside(fe,K)&&locallyInside(K,fe)&&middleInside(fe,K)&&(area(fe.prev,fe,K.prev)||area(fe,K.prev,K))||equals(fe,K)&&area(fe.prev,fe,fe.next)>0&&area(K.prev,K,K.next)>0)}function area(fe,K,me){return(K.y-fe.y)*(me.x-K.x)-(K.x-fe.x)*(me.y-K.y)}function equals(fe,K){return fe.x===K.x&&fe.y===K.y}function intersects(fe,K,me,ge){const xe=sign(area(fe,K,me)),ye=sign(area(fe,K,ge)),ve=sign(area(me,ge,fe)),_e=sign(area(me,ge,K));return!!(xe!==ye&&ve!==_e||xe===0&&onSegment(fe,me,K)||ye===0&&onSegment(fe,ge,K)||ve===0&&onSegment(me,fe,ge)||_e===0&&onSegment(me,K,ge))}function onSegment(fe,K,me){return K.x<=Math.max(fe.x,me.x)&&K.x>=Math.min(fe.x,me.x)&&K.y<=Math.max(fe.y,me.y)&&K.y>=Math.min(fe.y,me.y)}function sign(fe){return fe>0?1:fe<0?-1:0}function intersectsPolygon(fe,K){let me=fe;do{if(me.i!==fe.i&&me.next.i!==fe.i&&me.i!==K.i&&me.next.i!==K.i&&intersects(me,me.next,fe,K))return!0;me=me.next}while(me!==fe);return!1}function locallyInside(fe,K){return area(fe.prev,fe,fe.next)<0?area(fe,K,fe.next)>=0&&area(fe,fe.prev,K)>=0:area(fe,K,fe.prev)<0||area(fe,fe.next,K)<0}function middleInside(fe,K){let me=fe,ge=!1;const xe=(fe.x+K.x)/2,ye=(fe.y+K.y)/2;do me.y>ye!=me.next.y>ye&&me.next.y!==me.y&&xe<(me.next.x-me.x)*(ye-me.y)/(me.next.y-me.y)+me.x&&(ge=!ge),me=me.next;while(me!==fe);return ge}function splitPolygon(fe,K){const me=new Node$1(fe.i,fe.x,fe.y),ge=new Node$1(K.i,K.x,K.y),xe=fe.next,ye=K.prev;return fe.next=K,K.prev=fe,me.next=xe,xe.prev=me,ge.next=me,me.prev=ge,ye.next=ge,ge.prev=ye,ge}function insertNode(fe,K,me,ge){const xe=new Node$1(fe,K,me);return ge?(xe.next=ge.next,xe.prev=ge,ge.next.prev=xe,ge.next=xe):(xe.prev=xe,xe.next=xe),xe}function removeNode(fe){fe.next.prev=fe.prev,fe.prev.next=fe.next,fe.prevZ&&(fe.prevZ.nextZ=fe.nextZ),fe.nextZ&&(fe.nextZ.prevZ=fe.prevZ)}function Node$1(fe,K,me){this.i=fe,this.x=K,this.y=me,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function signedArea(fe,K,me,ge){let xe=0;for(let ye=K,ve=me-ge;ye<me;ye+=ge)xe+=(fe[ve]-fe[ye])*(fe[ye+1]+fe[ve+1]),ve=ye;return xe}class ShapeUtils{static area(K){const me=K.length;let ge=0;for(let xe=me-1,ye=0;ye<me;xe=ye++)ge+=K[xe].x*K[ye].y-K[ye].x*K[xe].y;return ge*.5}static isClockWise(K){return ShapeUtils.area(K)<0}static triangulateShape(K,me){const ge=[],xe=[],ye=[];removeDupEndPts(K),addContour(ge,K);let ve=K.length;me.forEach(removeDupEndPts);for(let Ee=0;Ee<me.length;Ee++)xe.push(ve),ve+=me[Ee].length,addContour(ge,me[Ee]);const _e=Earcut.triangulate(ge,xe);for(let Ee=0;Ee<_e.length;Ee+=3)ye.push(_e.slice(Ee,Ee+3));return ye}}function removeDupEndPts(fe){const K=fe.length;K>2&&fe[K-1].equals(fe[0])&&fe.pop()}function addContour(fe,K){for(let me=0;me<K.length;me++)fe.push(K[me].x),fe.push(K[me].y)}class ExtrudeGeometry extends BufferGeometry{constructor(K=new Shape([new Vector2(.5,.5),new Vector2(-.5,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),me={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:K,options:me},K=Array.isArray(K)?K:[K];const ge=this,xe=[],ye=[];for(let _e=0,Ee=K.length;_e<Ee;_e++){const be=K[_e];ve(be)}this.setAttribute("position",new Float32BufferAttribute(xe,3)),this.setAttribute("uv",new Float32BufferAttribute(ye,2)),this.computeVertexNormals();function ve(_e){const Ee=[],be=me.curveSegments!==void 0?me.curveSegments:12,Ae=me.steps!==void 0?me.steps:1,Se=me.depth!==void 0?me.depth:1;let Ce=me.bevelEnabled!==void 0?me.bevelEnabled:!0,Te=me.bevelThickness!==void 0?me.bevelThickness:.2,Re=me.bevelSize!==void 0?me.bevelSize:Te-.1,De=me.bevelOffset!==void 0?me.bevelOffset:0,Ie=me.bevelSegments!==void 0?me.bevelSegments:3;const Be=me.extrudePath,Le=me.UVGenerator!==void 0?me.UVGenerator:WorldUVGenerator;let Oe,Fe=!1,Ue,Ne,He,ze;Be&&(Oe=Be.getSpacedPoints(Ae),Fe=!0,Ce=!1,Ue=Be.computeFrenetFrames(Ae,!1),Ne=new Vector3,He=new Vector3,ze=new Vector3),Ce||(Ie=0,Te=0,Re=0,De=0);const je=_e.extractPoints(be);let Ge=je.shape;const Xe=je.holes;if(!ShapeUtils.isClockWise(Ge)){Ge=Ge.reverse();for(let bn=0,Mn=Xe.length;bn<Mn;bn++){const zt=Xe[bn];ShapeUtils.isClockWise(zt)&&(Xe[bn]=zt.reverse())}}const Qe=ShapeUtils.triangulateShape(Ge,Xe),nt=Ge;for(let bn=0,Mn=Xe.length;bn<Mn;bn++){const zt=Xe[bn];Ge=Ge.concat(zt)}function Nt(bn,Mn,zt){return Mn||console.error("THREE.ExtrudeGeometry: vec does not exist"),bn.clone().addScaledVector(Mn,zt)}const Ye=Ge.length,at=Qe.length;function rt(bn,Mn,zt){let Dn,hn,mn;const dn=bn.x-Mn.x,Hn=bn.y-Mn.y,Bn=zt.x-bn.x,kt=zt.y-bn.y,Dt=dn*dn+Hn*Hn,ln=dn*kt-Hn*Bn;if(Math.abs(ln)>Number.EPSILON){const nn=Math.sqrt(Dt),gn=Math.sqrt(Bn*Bn+kt*kt),Xt=Mn.x-Hn/nn,on=Mn.y+dn/nn,Rt=zt.x-kt/gn,An=zt.y+Bn/gn,sr=((Rt-Xt)*kt-(An-on)*Bn)/(dn*kt-Hn*Bn);Dn=Xt+dn*sr-bn.x,hn=on+Hn*sr-bn.y;const zn=Dn*Dn+hn*hn;if(zn<=2)return new Vector2(Dn,hn);mn=Math.sqrt(zn/2)}else{let nn=!1;dn>Number.EPSILON?Bn>Number.EPSILON&&(nn=!0):dn<-Number.EPSILON?Bn<-Number.EPSILON&&(nn=!0):Math.sign(Hn)===Math.sign(kt)&&(nn=!0),nn?(Dn=-Hn,hn=dn,mn=Math.sqrt(Dt)):(Dn=dn,hn=Hn,mn=Math.sqrt(Dt/2))}return new Vector2(Dn/mn,hn/mn)}const Ft=[];for(let bn=0,Mn=nt.length,zt=Mn-1,Dn=bn+1;bn<Mn;bn++,zt++,Dn++)zt===Mn&&(zt=0),Dn===Mn&&(Dn=0),Ft[bn]=rt(nt[bn],nt[zt],nt[Dn]);const Je=[];let Wt,Kt=Ft.concat();for(let bn=0,Mn=Xe.length;bn<Mn;bn++){const zt=Xe[bn];Wt=[];for(let Dn=0,hn=zt.length,mn=hn-1,dn=Dn+1;Dn<hn;Dn++,mn++,dn++)mn===hn&&(mn=0),dn===hn&&(dn=0),Wt[Dn]=rt(zt[Dn],zt[mn],zt[dn]);Je.push(Wt),Kt=Kt.concat(Wt)}for(let bn=0;bn<Ie;bn++){const Mn=bn/Ie,zt=Te*Math.cos(Mn*Math.PI/2),Dn=Re*Math.sin(Mn*Math.PI/2)+De;for(let hn=0,mn=nt.length;hn<mn;hn++){const dn=Nt(nt[hn],Ft[hn],Dn);pn(dn.x,dn.y,-zt)}for(let hn=0,mn=Xe.length;hn<mn;hn++){const dn=Xe[hn];Wt=Je[hn];for(let Hn=0,Bn=dn.length;Hn<Bn;Hn++){const kt=Nt(dn[Hn],Wt[Hn],Dn);pn(kt.x,kt.y,-zt)}}}const Pt=Re+De;for(let bn=0;bn<Ye;bn++){const Mn=Ce?Nt(Ge[bn],Kt[bn],Pt):Ge[bn];Fe?(He.copy(Ue.normals[0]).multiplyScalar(Mn.x),Ne.copy(Ue.binormals[0]).multiplyScalar(Mn.y),ze.copy(Oe[0]).add(He).add(Ne),pn(ze.x,ze.y,ze.z)):pn(Mn.x,Mn.y,0)}for(let bn=1;bn<=Ae;bn++)for(let Mn=0;Mn<Ye;Mn++){const zt=Ce?Nt(Ge[Mn],Kt[Mn],Pt):Ge[Mn];Fe?(He.copy(Ue.normals[bn]).multiplyScalar(zt.x),Ne.copy(Ue.binormals[bn]).multiplyScalar(zt.y),ze.copy(Oe[bn]).add(He).add(Ne),pn(ze.x,ze.y,ze.z)):pn(zt.x,zt.y,Se/Ae*bn)}for(let bn=Ie-1;bn>=0;bn--){const Mn=bn/Ie,zt=Te*Math.cos(Mn*Math.PI/2),Dn=Re*Math.sin(Mn*Math.PI/2)+De;for(let hn=0,mn=nt.length;hn<mn;hn++){const dn=Nt(nt[hn],Ft[hn],Dn);pn(dn.x,dn.y,Se+zt)}for(let hn=0,mn=Xe.length;hn<mn;hn++){const dn=Xe[hn];Wt=Je[hn];for(let Hn=0,Bn=dn.length;Hn<Bn;Hn++){const kt=Nt(dn[Hn],Wt[Hn],Dn);Fe?pn(kt.x,kt.y+Oe[Ae-1].y,Oe[Ae-1].x+zt):pn(kt.x,kt.y,Se+zt)}}}Yt(),Gt();function Yt(){const bn=xe.length/3;if(Ce){let Mn=0,zt=Ye*Mn;for(let Dn=0;Dn<at;Dn++){const hn=Qe[Dn];En(hn[2]+zt,hn[1]+zt,hn[0]+zt)}Mn=Ae+Ie*2,zt=Ye*Mn;for(let Dn=0;Dn<at;Dn++){const hn=Qe[Dn];En(hn[0]+zt,hn[1]+zt,hn[2]+zt)}}else{for(let Mn=0;Mn<at;Mn++){const zt=Qe[Mn];En(zt[2],zt[1],zt[0])}for(let Mn=0;Mn<at;Mn++){const zt=Qe[Mn];En(zt[0]+Ye*Ae,zt[1]+Ye*Ae,zt[2]+Ye*Ae)}}ge.addGroup(bn,xe.length/3-bn,0)}function Gt(){const bn=xe.length/3;let Mn=0;an(nt,Mn),Mn+=nt.length;for(let zt=0,Dn=Xe.length;zt<Dn;zt++){const hn=Xe[zt];an(hn,Mn),Mn+=hn.length}ge.addGroup(bn,xe.length/3-bn,1)}function an(bn,Mn){let zt=bn.length;for(;--zt>=0;){const Dn=zt;let hn=zt-1;hn<0&&(hn=bn.length-1);for(let mn=0,dn=Ae+Ie*2;mn<dn;mn++){const Hn=Ye*mn,Bn=Ye*(mn+1),kt=Mn+Dn+Hn,Dt=Mn+hn+Hn,ln=Mn+hn+Bn,nn=Mn+Dn+Bn;$n(kt,Dt,ln,nn)}}}function pn(bn,Mn,zt){Ee.push(bn),Ee.push(Mn),Ee.push(zt)}function En(bn,Mn,zt){Un(bn),Un(Mn),Un(zt);const Dn=xe.length/3,hn=Le.generateTopUV(ge,xe,Dn-3,Dn-2,Dn-1);kn(hn[0]),kn(hn[1]),kn(hn[2])}function $n(bn,Mn,zt,Dn){Un(bn),Un(Mn),Un(Dn),Un(Mn),Un(zt),Un(Dn);const hn=xe.length/3,mn=Le.generateSideWallUV(ge,xe,hn-6,hn-3,hn-2,hn-1);kn(mn[0]),kn(mn[1]),kn(mn[3]),kn(mn[1]),kn(mn[2]),kn(mn[3])}function Un(bn){xe.push(Ee[bn*3+0]),xe.push(Ee[bn*3+1]),xe.push(Ee[bn*3+2])}function kn(bn){ye.push(bn.x),ye.push(bn.y)}}}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}toJSON(){const K=super.toJSON(),me=this.parameters.shapes,ge=this.parameters.options;return toJSON$1(me,ge,K)}static fromJSON(K,me){const ge=[];for(let ye=0,ve=K.shapes.length;ye<ve;ye++){const _e=me[K.shapes[ye]];ge.push(_e)}const xe=K.options.extrudePath;return xe!==void 0&&(K.options.extrudePath=new Curves[xe.type]().fromJSON(xe)),new ExtrudeGeometry(ge,K.options)}}const WorldUVGenerator={generateTopUV:function(fe,K,me,ge,xe){const ye=K[me*3],ve=K[me*3+1],_e=K[ge*3],Ee=K[ge*3+1],be=K[xe*3],Ae=K[xe*3+1];return[new Vector2(ye,ve),new Vector2(_e,Ee),new Vector2(be,Ae)]},generateSideWallUV:function(fe,K,me,ge,xe,ye){const ve=K[me*3],_e=K[me*3+1],Ee=K[me*3+2],be=K[ge*3],Ae=K[ge*3+1],Se=K[ge*3+2],Ce=K[xe*3],Te=K[xe*3+1],Re=K[xe*3+2],De=K[ye*3],Ie=K[ye*3+1],Be=K[ye*3+2];return Math.abs(_e-Ae)<Math.abs(ve-be)?[new Vector2(ve,1-Ee),new Vector2(be,1-Se),new Vector2(Ce,1-Re),new Vector2(De,1-Be)]:[new Vector2(_e,1-Ee),new Vector2(Ae,1-Se),new Vector2(Te,1-Re),new Vector2(Ie,1-Be)]}};function toJSON$1(fe,K,me){if(me.shapes=[],Array.isArray(fe))for(let ge=0,xe=fe.length;ge<xe;ge++){const ye=fe[ge];me.shapes.push(ye.uuid)}else me.shapes.push(fe.uuid);return me.options=Object.assign({},K),K.extrudePath!==void 0&&(me.options.extrudePath=K.extrudePath.toJSON()),me}class IcosahedronGeometry extends PolyhedronGeometry{constructor(K=1,me=0){const ge=(1+Math.sqrt(5))/2,xe=[-1,ge,0,1,ge,0,-1,-ge,0,1,-ge,0,0,-1,ge,0,1,ge,0,-1,-ge,0,1,-ge,ge,0,-1,ge,0,1,-ge,0,-1,-ge,0,1],ye=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(xe,ye,K,me),this.type="IcosahedronGeometry",this.parameters={radius:K,detail:me}}static fromJSON(K){return new IcosahedronGeometry(K.radius,K.detail)}}class OctahedronGeometry extends PolyhedronGeometry{constructor(K=1,me=0){const ge=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],xe=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(ge,xe,K,me),this.type="OctahedronGeometry",this.parameters={radius:K,detail:me}}static fromJSON(K){return new OctahedronGeometry(K.radius,K.detail)}}class PlaneGeometry extends BufferGeometry{constructor(K=1,me=1,ge=1,xe=1){super(),this.type="PlaneGeometry",this.parameters={width:K,height:me,widthSegments:ge,heightSegments:xe};const ye=K/2,ve=me/2,_e=Math.floor(ge),Ee=Math.floor(xe),be=_e+1,Ae=Ee+1,Se=K/_e,Ce=me/Ee,Te=[],Re=[],De=[],Ie=[];for(let Be=0;Be<Ae;Be++){const Le=Be*Ce-ve;for(let Oe=0;Oe<be;Oe++){const Fe=Oe*Se-ye;Re.push(Fe,-Le,0),De.push(0,0,1),Ie.push(Oe/_e),Ie.push(1-Be/Ee)}}for(let Be=0;Be<Ee;Be++)for(let Le=0;Le<_e;Le++){const Oe=Le+be*Be,Fe=Le+be*(Be+1),Ue=Le+1+be*(Be+1),Ne=Le+1+be*Be;Te.push(Oe,Fe,Ne),Te.push(Fe,Ue,Ne)}this.setIndex(Te),this.setAttribute("position",new Float32BufferAttribute(Re,3)),this.setAttribute("normal",new Float32BufferAttribute(De,3)),this.setAttribute("uv",new Float32BufferAttribute(Ie,2))}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new PlaneGeometry(K.width,K.height,K.widthSegments,K.heightSegments)}}class RingGeometry extends BufferGeometry{constructor(K=.5,me=1,ge=32,xe=1,ye=0,ve=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:K,outerRadius:me,thetaSegments:ge,phiSegments:xe,thetaStart:ye,thetaLength:ve},ge=Math.max(3,ge),xe=Math.max(1,xe);const _e=[],Ee=[],be=[],Ae=[];let Se=K;const Ce=(me-K)/xe,Te=new Vector3,Re=new Vector2;for(let De=0;De<=xe;De++){for(let Ie=0;Ie<=ge;Ie++){const Be=ye+Ie/ge*ve;Te.x=Se*Math.cos(Be),Te.y=Se*Math.sin(Be),Ee.push(Te.x,Te.y,Te.z),be.push(0,0,1),Re.x=(Te.x/me+1)/2,Re.y=(Te.y/me+1)/2,Ae.push(Re.x,Re.y)}Se+=Ce}for(let De=0;De<xe;De++){const Ie=De*(ge+1);for(let Be=0;Be<ge;Be++){const Le=Be+Ie,Oe=Le,Fe=Le+ge+1,Ue=Le+ge+2,Ne=Le+1;_e.push(Oe,Fe,Ne),_e.push(Fe,Ue,Ne)}}this.setIndex(_e),this.setAttribute("position",new Float32BufferAttribute(Ee,3)),this.setAttribute("normal",new Float32BufferAttribute(be,3)),this.setAttribute("uv",new Float32BufferAttribute(Ae,2))}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new RingGeometry(K.innerRadius,K.outerRadius,K.thetaSegments,K.phiSegments,K.thetaStart,K.thetaLength)}}class ShapeGeometry extends BufferGeometry{constructor(K=new Shape([new Vector2(0,.5),new Vector2(-.5,-.5),new Vector2(.5,-.5)]),me=12){super(),this.type="ShapeGeometry",this.parameters={shapes:K,curveSegments:me};const ge=[],xe=[],ye=[],ve=[];let _e=0,Ee=0;if(Array.isArray(K)===!1)be(K);else for(let Ae=0;Ae<K.length;Ae++)be(K[Ae]),this.addGroup(_e,Ee,Ae),_e+=Ee,Ee=0;this.setIndex(ge),this.setAttribute("position",new Float32BufferAttribute(xe,3)),this.setAttribute("normal",new Float32BufferAttribute(ye,3)),this.setAttribute("uv",new Float32BufferAttribute(ve,2));function be(Ae){const Se=xe.length/3,Ce=Ae.extractPoints(me);let Te=Ce.shape;const Re=Ce.holes;ShapeUtils.isClockWise(Te)===!1&&(Te=Te.reverse());for(let Ie=0,Be=Re.length;Ie<Be;Ie++){const Le=Re[Ie];ShapeUtils.isClockWise(Le)===!0&&(Re[Ie]=Le.reverse())}const De=ShapeUtils.triangulateShape(Te,Re);for(let Ie=0,Be=Re.length;Ie<Be;Ie++){const Le=Re[Ie];Te=Te.concat(Le)}for(let Ie=0,Be=Te.length;Ie<Be;Ie++){const Le=Te[Ie];xe.push(Le.x,Le.y,0),ye.push(0,0,1),ve.push(Le.x,Le.y)}for(let Ie=0,Be=De.length;Ie<Be;Ie++){const Le=De[Ie],Oe=Le[0]+Se,Fe=Le[1]+Se,Ue=Le[2]+Se;ge.push(Oe,Fe,Ue),Ee+=3}}}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}toJSON(){const K=super.toJSON(),me=this.parameters.shapes;return toJSON(me,K)}static fromJSON(K,me){const ge=[];for(let xe=0,ye=K.shapes.length;xe<ye;xe++){const ve=me[K.shapes[xe]];ge.push(ve)}return new ShapeGeometry(ge,K.curveSegments)}}function toJSON(fe,K){if(K.shapes=[],Array.isArray(fe))for(let me=0,ge=fe.length;me<ge;me++){const xe=fe[me];K.shapes.push(xe.uuid)}else K.shapes.push(fe.uuid);return K}class SphereGeometry extends BufferGeometry{constructor(K=1,me=32,ge=16,xe=0,ye=Math.PI*2,ve=0,_e=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:K,widthSegments:me,heightSegments:ge,phiStart:xe,phiLength:ye,thetaStart:ve,thetaLength:_e},me=Math.max(3,Math.floor(me)),ge=Math.max(2,Math.floor(ge));const Ee=Math.min(ve+_e,Math.PI);let be=0;const Ae=[],Se=new Vector3,Ce=new Vector3,Te=[],Re=[],De=[],Ie=[];for(let Be=0;Be<=ge;Be++){const Le=[],Oe=Be/ge;let Fe=0;Be===0&&ve===0?Fe=.5/me:Be===ge&&Ee===Math.PI&&(Fe=-.5/me);for(let Ue=0;Ue<=me;Ue++){const Ne=Ue/me;Se.x=-K*Math.cos(xe+Ne*ye)*Math.sin(ve+Oe*_e),Se.y=K*Math.cos(ve+Oe*_e),Se.z=K*Math.sin(xe+Ne*ye)*Math.sin(ve+Oe*_e),Re.push(Se.x,Se.y,Se.z),Ce.copy(Se).normalize(),De.push(Ce.x,Ce.y,Ce.z),Ie.push(Ne+Fe,1-Oe),Le.push(be++)}Ae.push(Le)}for(let Be=0;Be<ge;Be++)for(let Le=0;Le<me;Le++){const Oe=Ae[Be][Le+1],Fe=Ae[Be][Le],Ue=Ae[Be+1][Le],Ne=Ae[Be+1][Le+1];(Be!==0||ve>0)&&Te.push(Oe,Fe,Ne),(Be!==ge-1||Ee<Math.PI)&&Te.push(Fe,Ue,Ne)}this.setIndex(Te),this.setAttribute("position",new Float32BufferAttribute(Re,3)),this.setAttribute("normal",new Float32BufferAttribute(De,3)),this.setAttribute("uv",new Float32BufferAttribute(Ie,2))}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new SphereGeometry(K.radius,K.widthSegments,K.heightSegments,K.phiStart,K.phiLength,K.thetaStart,K.thetaLength)}}class TetrahedronGeometry extends PolyhedronGeometry{constructor(K=1,me=0){const ge=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],xe=[2,1,0,0,3,2,1,3,0,2,3,1];super(ge,xe,K,me),this.type="TetrahedronGeometry",this.parameters={radius:K,detail:me}}static fromJSON(K){return new TetrahedronGeometry(K.radius,K.detail)}}class TorusGeometry extends BufferGeometry{constructor(K=1,me=.4,ge=12,xe=48,ye=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:K,tube:me,radialSegments:ge,tubularSegments:xe,arc:ye},ge=Math.floor(ge),xe=Math.floor(xe);const ve=[],_e=[],Ee=[],be=[],Ae=new Vector3,Se=new Vector3,Ce=new Vector3;for(let Te=0;Te<=ge;Te++)for(let Re=0;Re<=xe;Re++){const De=Re/xe*ye,Ie=Te/ge*Math.PI*2;Se.x=(K+me*Math.cos(Ie))*Math.cos(De),Se.y=(K+me*Math.cos(Ie))*Math.sin(De),Se.z=me*Math.sin(Ie),_e.push(Se.x,Se.y,Se.z),Ae.x=K*Math.cos(De),Ae.y=K*Math.sin(De),Ce.subVectors(Se,Ae).normalize(),Ee.push(Ce.x,Ce.y,Ce.z),be.push(Re/xe),be.push(Te/ge)}for(let Te=1;Te<=ge;Te++)for(let Re=1;Re<=xe;Re++){const De=(xe+1)*Te+Re-1,Ie=(xe+1)*(Te-1)+Re-1,Be=(xe+1)*(Te-1)+Re,Le=(xe+1)*Te+Re;ve.push(De,Ie,Le),ve.push(Ie,Be,Le)}this.setIndex(ve),this.setAttribute("position",new Float32BufferAttribute(_e,3)),this.setAttribute("normal",new Float32BufferAttribute(Ee,3)),this.setAttribute("uv",new Float32BufferAttribute(be,2))}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new TorusGeometry(K.radius,K.tube,K.radialSegments,K.tubularSegments,K.arc)}}class TorusKnotGeometry extends BufferGeometry{constructor(K=1,me=.4,ge=64,xe=8,ye=2,ve=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:K,tube:me,tubularSegments:ge,radialSegments:xe,p:ye,q:ve},ge=Math.floor(ge),xe=Math.floor(xe);const _e=[],Ee=[],be=[],Ae=[],Se=new Vector3,Ce=new Vector3,Te=new Vector3,Re=new Vector3,De=new Vector3,Ie=new Vector3,Be=new Vector3;for(let Oe=0;Oe<=ge;++Oe){const Fe=Oe/ge*ye*Math.PI*2;Le(Fe,ye,ve,K,Te),Le(Fe+.01,ye,ve,K,Re),Ie.subVectors(Re,Te),Be.addVectors(Re,Te),De.crossVectors(Ie,Be),Be.crossVectors(De,Ie),De.normalize(),Be.normalize();for(let Ue=0;Ue<=xe;++Ue){const Ne=Ue/xe*Math.PI*2,He=-me*Math.cos(Ne),ze=me*Math.sin(Ne);Se.x=Te.x+(He*Be.x+ze*De.x),Se.y=Te.y+(He*Be.y+ze*De.y),Se.z=Te.z+(He*Be.z+ze*De.z),Ee.push(Se.x,Se.y,Se.z),Ce.subVectors(Se,Te).normalize(),be.push(Ce.x,Ce.y,Ce.z),Ae.push(Oe/ge),Ae.push(Ue/xe)}}for(let Oe=1;Oe<=ge;Oe++)for(let Fe=1;Fe<=xe;Fe++){const Ue=(xe+1)*(Oe-1)+(Fe-1),Ne=(xe+1)*Oe+(Fe-1),He=(xe+1)*Oe+Fe,ze=(xe+1)*(Oe-1)+Fe;_e.push(Ue,Ne,ze),_e.push(Ne,He,ze)}this.setIndex(_e),this.setAttribute("position",new Float32BufferAttribute(Ee,3)),this.setAttribute("normal",new Float32BufferAttribute(be,3)),this.setAttribute("uv",new Float32BufferAttribute(Ae,2));function Le(Oe,Fe,Ue,Ne,He){const ze=Math.cos(Oe),je=Math.sin(Oe),Ge=Ue/Fe*Oe,Xe=Math.cos(Ge);He.x=Ne*(2+Xe)*.5*ze,He.y=Ne*(2+Xe)*je*.5,He.z=Ne*Math.sin(Ge)*.5}}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}static fromJSON(K){return new TorusKnotGeometry(K.radius,K.tube,K.tubularSegments,K.radialSegments,K.p,K.q)}}class TubeGeometry extends BufferGeometry{constructor(K=new QuadraticBezierCurve3(new Vector3(-1,-1,0),new Vector3(-1,1,0),new Vector3(1,1,0)),me=64,ge=1,xe=8,ye=!1){super(),this.type="TubeGeometry",this.parameters={path:K,tubularSegments:me,radius:ge,radialSegments:xe,closed:ye};const ve=K.computeFrenetFrames(me,ye);this.tangents=ve.tangents,this.normals=ve.normals,this.binormals=ve.binormals;const _e=new Vector3,Ee=new Vector3,be=new Vector2;let Ae=new Vector3;const Se=[],Ce=[],Te=[],Re=[];De(),this.setIndex(Re),this.setAttribute("position",new Float32BufferAttribute(Se,3)),this.setAttribute("normal",new Float32BufferAttribute(Ce,3)),this.setAttribute("uv",new Float32BufferAttribute(Te,2));function De(){for(let Oe=0;Oe<me;Oe++)Ie(Oe);Ie(ye===!1?me:0),Le(),Be()}function Ie(Oe){Ae=K.getPointAt(Oe/me,Ae);const Fe=ve.normals[Oe],Ue=ve.binormals[Oe];for(let Ne=0;Ne<=xe;Ne++){const He=Ne/xe*Math.PI*2,ze=Math.sin(He),je=-Math.cos(He);Ee.x=je*Fe.x+ze*Ue.x,Ee.y=je*Fe.y+ze*Ue.y,Ee.z=je*Fe.z+ze*Ue.z,Ee.normalize(),Ce.push(Ee.x,Ee.y,Ee.z),_e.x=Ae.x+ge*Ee.x,_e.y=Ae.y+ge*Ee.y,_e.z=Ae.z+ge*Ee.z,Se.push(_e.x,_e.y,_e.z)}}function Be(){for(let Oe=1;Oe<=me;Oe++)for(let Fe=1;Fe<=xe;Fe++){const Ue=(xe+1)*(Oe-1)+(Fe-1),Ne=(xe+1)*Oe+(Fe-1),He=(xe+1)*Oe+Fe,ze=(xe+1)*(Oe-1)+Fe;Re.push(Ue,Ne,ze),Re.push(Ne,He,ze)}}function Le(){for(let Oe=0;Oe<=me;Oe++)for(let Fe=0;Fe<=xe;Fe++)be.x=Oe/me,be.y=Fe/xe,Te.push(be.x,be.y)}}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}toJSON(){const K=super.toJSON();return K.path=this.parameters.path.toJSON(),K}static fromJSON(K){return new TubeGeometry(new Curves[K.path.type]().fromJSON(K.path),K.tubularSegments,K.radius,K.radialSegments,K.closed)}}class WireframeGeometry extends BufferGeometry{constructor(K=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:K},K!==null){const me=[],ge=new Set,xe=new Vector3,ye=new Vector3;if(K.index!==null){const ve=K.attributes.position,_e=K.index;let Ee=K.groups;Ee.length===0&&(Ee=[{start:0,count:_e.count,materialIndex:0}]);for(let be=0,Ae=Ee.length;be<Ae;++be){const Se=Ee[be],Ce=Se.start,Te=Se.count;for(let Re=Ce,De=Ce+Te;Re<De;Re+=3)for(let Ie=0;Ie<3;Ie++){const Be=_e.getX(Re+Ie),Le=_e.getX(Re+(Ie+1)%3);xe.fromBufferAttribute(ve,Be),ye.fromBufferAttribute(ve,Le),isUniqueEdge(xe,ye,ge)===!0&&(me.push(xe.x,xe.y,xe.z),me.push(ye.x,ye.y,ye.z))}}}else{const ve=K.attributes.position;for(let _e=0,Ee=ve.count/3;_e<Ee;_e++)for(let be=0;be<3;be++){const Ae=3*_e+be,Se=3*_e+(be+1)%3;xe.fromBufferAttribute(ve,Ae),ye.fromBufferAttribute(ve,Se),isUniqueEdge(xe,ye,ge)===!0&&(me.push(xe.x,xe.y,xe.z),me.push(ye.x,ye.y,ye.z))}}this.setAttribute("position",new Float32BufferAttribute(me,3))}}copy(K){return super.copy(K),this.parameters=Object.assign({},K.parameters),this}}function isUniqueEdge(fe,K,me){const ge=`${fe.x},${fe.y},${fe.z}-${K.x},${K.y},${K.z}`,xe=`${K.x},${K.y},${K.z}-${fe.x},${fe.y},${fe.z}`;return me.has(ge)===!0||me.has(xe)===!0?!1:(me.add(ge),me.add(xe),!0)}var Geometries=Object.freeze({__proto__:null,BoxGeometry,CapsuleGeometry,CircleGeometry,ConeGeometry,CylinderGeometry,DodecahedronGeometry,EdgesGeometry,ExtrudeGeometry,IcosahedronGeometry,LatheGeometry,OctahedronGeometry,PlaneGeometry,PolyhedronGeometry,RingGeometry,ShapeGeometry,SphereGeometry,TetrahedronGeometry,TorusGeometry,TorusKnotGeometry,TubeGeometry,WireframeGeometry});class ShadowMaterial extends Material{constructor(K){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Color$1(0),this.transparent=!0,this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.color.copy(K.color),this.fog=K.fog,this}}class RawShaderMaterial extends ShaderMaterial{constructor(K){super(K),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class MeshStandardMaterial extends Material{constructor(K){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Color$1(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.defines={STANDARD:""},this.color.copy(K.color),this.roughness=K.roughness,this.metalness=K.metalness,this.map=K.map,this.lightMap=K.lightMap,this.lightMapIntensity=K.lightMapIntensity,this.aoMap=K.aoMap,this.aoMapIntensity=K.aoMapIntensity,this.emissive.copy(K.emissive),this.emissiveMap=K.emissiveMap,this.emissiveIntensity=K.emissiveIntensity,this.bumpMap=K.bumpMap,this.bumpScale=K.bumpScale,this.normalMap=K.normalMap,this.normalMapType=K.normalMapType,this.normalScale.copy(K.normalScale),this.displacementMap=K.displacementMap,this.displacementScale=K.displacementScale,this.displacementBias=K.displacementBias,this.roughnessMap=K.roughnessMap,this.metalnessMap=K.metalnessMap,this.alphaMap=K.alphaMap,this.envMap=K.envMap,this.envMapRotation.copy(K.envMapRotation),this.envMapIntensity=K.envMapIntensity,this.wireframe=K.wireframe,this.wireframeLinewidth=K.wireframeLinewidth,this.wireframeLinecap=K.wireframeLinecap,this.wireframeLinejoin=K.wireframeLinejoin,this.flatShading=K.flatShading,this.fog=K.fog,this}}class MeshPhysicalMaterial extends MeshStandardMaterial{constructor(K){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Vector2(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return clamp$1(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(me){this.ior=(1+.4*me)/(1-.4*me)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Color$1(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Color$1(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Color$1(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(K)}get anisotropy(){return this._anisotropy}set anisotropy(K){this._anisotropy>0!=K>0&&this.version++,this._anisotropy=K}get clearcoat(){return this._clearcoat}set clearcoat(K){this._clearcoat>0!=K>0&&this.version++,this._clearcoat=K}get iridescence(){return this._iridescence}set iridescence(K){this._iridescence>0!=K>0&&this.version++,this._iridescence=K}get dispersion(){return this._dispersion}set dispersion(K){this._dispersion>0!=K>0&&this.version++,this._dispersion=K}get sheen(){return this._sheen}set sheen(K){this._sheen>0!=K>0&&this.version++,this._sheen=K}get transmission(){return this._transmission}set transmission(K){this._transmission>0!=K>0&&this.version++,this._transmission=K}copy(K){return super.copy(K),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=K.anisotropy,this.anisotropyRotation=K.anisotropyRotation,this.anisotropyMap=K.anisotropyMap,this.clearcoat=K.clearcoat,this.clearcoatMap=K.clearcoatMap,this.clearcoatRoughness=K.clearcoatRoughness,this.clearcoatRoughnessMap=K.clearcoatRoughnessMap,this.clearcoatNormalMap=K.clearcoatNormalMap,this.clearcoatNormalScale.copy(K.clearcoatNormalScale),this.dispersion=K.dispersion,this.ior=K.ior,this.iridescence=K.iridescence,this.iridescenceMap=K.iridescenceMap,this.iridescenceIOR=K.iridescenceIOR,this.iridescenceThicknessRange=[...K.iridescenceThicknessRange],this.iridescenceThicknessMap=K.iridescenceThicknessMap,this.sheen=K.sheen,this.sheenColor.copy(K.sheenColor),this.sheenColorMap=K.sheenColorMap,this.sheenRoughness=K.sheenRoughness,this.sheenRoughnessMap=K.sheenRoughnessMap,this.transmission=K.transmission,this.transmissionMap=K.transmissionMap,this.thickness=K.thickness,this.thicknessMap=K.thicknessMap,this.attenuationDistance=K.attenuationDistance,this.attenuationColor.copy(K.attenuationColor),this.specularIntensity=K.specularIntensity,this.specularIntensityMap=K.specularIntensityMap,this.specularColor.copy(K.specularColor),this.specularColorMap=K.specularColorMap,this}}class MeshPhongMaterial extends Material{constructor(K){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Color$1(16777215),this.specular=new Color$1(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.color.copy(K.color),this.specular.copy(K.specular),this.shininess=K.shininess,this.map=K.map,this.lightMap=K.lightMap,this.lightMapIntensity=K.lightMapIntensity,this.aoMap=K.aoMap,this.aoMapIntensity=K.aoMapIntensity,this.emissive.copy(K.emissive),this.emissiveMap=K.emissiveMap,this.emissiveIntensity=K.emissiveIntensity,this.bumpMap=K.bumpMap,this.bumpScale=K.bumpScale,this.normalMap=K.normalMap,this.normalMapType=K.normalMapType,this.normalScale.copy(K.normalScale),this.displacementMap=K.displacementMap,this.displacementScale=K.displacementScale,this.displacementBias=K.displacementBias,this.specularMap=K.specularMap,this.alphaMap=K.alphaMap,this.envMap=K.envMap,this.envMapRotation.copy(K.envMapRotation),this.combine=K.combine,this.reflectivity=K.reflectivity,this.refractionRatio=K.refractionRatio,this.wireframe=K.wireframe,this.wireframeLinewidth=K.wireframeLinewidth,this.wireframeLinecap=K.wireframeLinecap,this.wireframeLinejoin=K.wireframeLinejoin,this.flatShading=K.flatShading,this.fog=K.fog,this}}class MeshToonMaterial extends Material{constructor(K){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Color$1(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.color.copy(K.color),this.map=K.map,this.gradientMap=K.gradientMap,this.lightMap=K.lightMap,this.lightMapIntensity=K.lightMapIntensity,this.aoMap=K.aoMap,this.aoMapIntensity=K.aoMapIntensity,this.emissive.copy(K.emissive),this.emissiveMap=K.emissiveMap,this.emissiveIntensity=K.emissiveIntensity,this.bumpMap=K.bumpMap,this.bumpScale=K.bumpScale,this.normalMap=K.normalMap,this.normalMapType=K.normalMapType,this.normalScale.copy(K.normalScale),this.displacementMap=K.displacementMap,this.displacementScale=K.displacementScale,this.displacementBias=K.displacementBias,this.alphaMap=K.alphaMap,this.wireframe=K.wireframe,this.wireframeLinewidth=K.wireframeLinewidth,this.wireframeLinecap=K.wireframeLinecap,this.wireframeLinejoin=K.wireframeLinejoin,this.fog=K.fog,this}}class MeshNormalMaterial extends Material{constructor(K){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(K)}copy(K){return super.copy(K),this.bumpMap=K.bumpMap,this.bumpScale=K.bumpScale,this.normalMap=K.normalMap,this.normalMapType=K.normalMapType,this.normalScale.copy(K.normalScale),this.displacementMap=K.displacementMap,this.displacementScale=K.displacementScale,this.displacementBias=K.displacementBias,this.wireframe=K.wireframe,this.wireframeLinewidth=K.wireframeLinewidth,this.flatShading=K.flatShading,this}}class MeshLambertMaterial extends Material{constructor(K){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Color$1(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Color$1(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=MultiplyOperation,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.color.copy(K.color),this.map=K.map,this.lightMap=K.lightMap,this.lightMapIntensity=K.lightMapIntensity,this.aoMap=K.aoMap,this.aoMapIntensity=K.aoMapIntensity,this.emissive.copy(K.emissive),this.emissiveMap=K.emissiveMap,this.emissiveIntensity=K.emissiveIntensity,this.bumpMap=K.bumpMap,this.bumpScale=K.bumpScale,this.normalMap=K.normalMap,this.normalMapType=K.normalMapType,this.normalScale.copy(K.normalScale),this.displacementMap=K.displacementMap,this.displacementScale=K.displacementScale,this.displacementBias=K.displacementBias,this.specularMap=K.specularMap,this.alphaMap=K.alphaMap,this.envMap=K.envMap,this.envMapRotation.copy(K.envMapRotation),this.combine=K.combine,this.reflectivity=K.reflectivity,this.refractionRatio=K.refractionRatio,this.wireframe=K.wireframe,this.wireframeLinewidth=K.wireframeLinewidth,this.wireframeLinecap=K.wireframeLinecap,this.wireframeLinejoin=K.wireframeLinejoin,this.flatShading=K.flatShading,this.fog=K.fog,this}}class MeshDepthMaterial extends Material{constructor(K){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=BasicDepthPacking,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(K)}copy(K){return super.copy(K),this.depthPacking=K.depthPacking,this.map=K.map,this.alphaMap=K.alphaMap,this.displacementMap=K.displacementMap,this.displacementScale=K.displacementScale,this.displacementBias=K.displacementBias,this.wireframe=K.wireframe,this.wireframeLinewidth=K.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(K){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(K)}copy(K){return super.copy(K),this.map=K.map,this.alphaMap=K.alphaMap,this.displacementMap=K.displacementMap,this.displacementScale=K.displacementScale,this.displacementBias=K.displacementBias,this}}class MeshMatcapMaterial extends Material{constructor(K){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Color$1(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TangentSpaceNormalMap,this.normalScale=new Vector2(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(K)}copy(K){return super.copy(K),this.defines={MATCAP:""},this.color.copy(K.color),this.matcap=K.matcap,this.map=K.map,this.bumpMap=K.bumpMap,this.bumpScale=K.bumpScale,this.normalMap=K.normalMap,this.normalMapType=K.normalMapType,this.normalScale.copy(K.normalScale),this.displacementMap=K.displacementMap,this.displacementScale=K.displacementScale,this.displacementBias=K.displacementBias,this.alphaMap=K.alphaMap,this.flatShading=K.flatShading,this.fog=K.fog,this}}class LineDashedMaterial extends LineBasicMaterial{constructor(K){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(K)}copy(K){return super.copy(K),this.scale=K.scale,this.dashSize=K.dashSize,this.gapSize=K.gapSize,this}}function convertArray(fe,K,me){return!fe||!me&&fe.constructor===K?fe:typeof K.BYTES_PER_ELEMENT=="number"?new K(fe):Array.prototype.slice.call(fe)}function isTypedArray(fe){return ArrayBuffer.isView(fe)&&!(fe instanceof DataView)}function getKeyframeOrder(fe){function K(xe,ye){return fe[xe]-fe[ye]}const me=fe.length,ge=new Array(me);for(let xe=0;xe!==me;++xe)ge[xe]=xe;return ge.sort(K),ge}function sortedArray(fe,K,me){const ge=fe.length,xe=new fe.constructor(ge);for(let ye=0,ve=0;ve!==ge;++ye){const _e=me[ye]*K;for(let Ee=0;Ee!==K;++Ee)xe[ve++]=fe[_e+Ee]}return xe}function flattenJSON(fe,K,me,ge){let xe=1,ye=fe[0];for(;ye!==void 0&&ye[ge]===void 0;)ye=fe[xe++];if(ye===void 0)return;let ve=ye[ge];if(ve!==void 0)if(Array.isArray(ve))do ve=ye[ge],ve!==void 0&&(K.push(ye.time),me.push(...ve)),ye=fe[xe++];while(ye!==void 0);else if(ve.toArray!==void 0)do ve=ye[ge],ve!==void 0&&(K.push(ye.time),ve.toArray(me,me.length)),ye=fe[xe++];while(ye!==void 0);else do ve=ye[ge],ve!==void 0&&(K.push(ye.time),me.push(ve)),ye=fe[xe++];while(ye!==void 0)}function subclip(fe,K,me,ge,xe=30){const ye=fe.clone();ye.name=K;const ve=[];for(let Ee=0;Ee<ye.tracks.length;++Ee){const be=ye.tracks[Ee],Ae=be.getValueSize(),Se=[],Ce=[];for(let Te=0;Te<be.times.length;++Te){const Re=be.times[Te]*xe;if(!(Re<me||Re>=ge)){Se.push(be.times[Te]);for(let De=0;De<Ae;++De)Ce.push(be.values[Te*Ae+De])}}Se.length!==0&&(be.times=convertArray(Se,be.times.constructor),be.values=convertArray(Ce,be.values.constructor),ve.push(be))}ye.tracks=ve;let _e=1/0;for(let Ee=0;Ee<ye.tracks.length;++Ee)_e>ye.tracks[Ee].times[0]&&(_e=ye.tracks[Ee].times[0]);for(let Ee=0;Ee<ye.tracks.length;++Ee)ye.tracks[Ee].shift(-1*_e);return ye.resetDuration(),ye}function makeClipAdditive(fe,K=0,me=fe,ge=30){ge<=0&&(ge=30);const xe=me.tracks.length,ye=K/ge;for(let ve=0;ve<xe;++ve){const _e=me.tracks[ve],Ee=_e.ValueTypeName;if(Ee==="bool"||Ee==="string")continue;const be=fe.tracks.find(function(Be){return Be.name===_e.name&&Be.ValueTypeName===Ee});if(be===void 0)continue;let Ae=0;const Se=_e.getValueSize();_e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Ae=Se/3);let Ce=0;const Te=be.getValueSize();be.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Ce=Te/3);const Re=_e.times.length-1;let De;if(ye<=_e.times[0]){const Be=Ae,Le=Se-Ae;De=_e.values.slice(Be,Le)}else if(ye>=_e.times[Re]){const Be=Re*Se+Ae,Le=Be+Se-Ae;De=_e.values.slice(Be,Le)}else{const Be=_e.createInterpolant(),Le=Ae,Oe=Se-Ae;Be.evaluate(ye),De=Be.resultBuffer.slice(Le,Oe)}Ee==="quaternion"&&new Quaternion().fromArray(De).normalize().conjugate().toArray(De);const Ie=be.times.length;for(let Be=0;Be<Ie;++Be){const Le=Be*Te+Ce;if(Ee==="quaternion")Quaternion.multiplyQuaternionsFlat(be.values,Le,De,0,be.values,Le);else{const Oe=Te-Ce*2;for(let Fe=0;Fe<Oe;++Fe)be.values[Le+Fe]-=De[Fe]}}}return fe.blendMode=AdditiveAnimationBlendMode,fe}const AnimationUtils={convertArray,isTypedArray,getKeyframeOrder,sortedArray,flattenJSON,subclip,makeClipAdditive};class Interpolant{constructor(K,me,ge,xe){this.parameterPositions=K,this._cachedIndex=0,this.resultBuffer=xe!==void 0?xe:new me.constructor(ge),this.sampleValues=me,this.valueSize=ge,this.settings=null,this.DefaultSettings_={}}evaluate(K){const me=this.parameterPositions;let ge=this._cachedIndex,xe=me[ge],ye=me[ge-1];e:{t:{let ve;n:{r:if(!(K<xe)){for(let _e=ge+2;;){if(xe===void 0){if(K<ye)break r;return ge=me.length,this._cachedIndex=ge,this.copySampleValue_(ge-1)}if(ge===_e)break;if(ye=xe,xe=me[++ge],K<xe)break t}ve=me.length;break n}if(!(K>=ye)){const _e=me[1];K<_e&&(ge=2,ye=_e);for(let Ee=ge-2;;){if(ye===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(ge===Ee)break;if(xe=ye,ye=me[--ge-1],K>=ye)break t}ve=ge,ge=0;break n}break e}for(;ge<ve;){const _e=ge+ve>>>1;K<me[_e]?ve=_e:ge=_e+1}if(xe=me[ge],ye=me[ge-1],ye===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(xe===void 0)return ge=me.length,this._cachedIndex=ge,this.copySampleValue_(ge-1)}this._cachedIndex=ge,this.intervalChanged_(ge,ye,xe)}return this.interpolate_(ge,ye,K,xe)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(K){const me=this.resultBuffer,ge=this.sampleValues,xe=this.valueSize,ye=K*xe;for(let ve=0;ve!==xe;++ve)me[ve]=ge[ye+ve];return me}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(K,me,ge,xe){super(K,me,ge,xe),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding}}intervalChanged_(K,me,ge){const xe=this.parameterPositions;let ye=K-2,ve=K+1,_e=xe[ye],Ee=xe[ve];if(_e===void 0)switch(this.getSettings_().endingStart){case ZeroSlopeEnding:ye=K,_e=2*me-ge;break;case WrapAroundEnding:ye=xe.length-2,_e=me+xe[ye]-xe[ye+1];break;default:ye=K,_e=ge}if(Ee===void 0)switch(this.getSettings_().endingEnd){case ZeroSlopeEnding:ve=K,Ee=2*ge-me;break;case WrapAroundEnding:ve=1,Ee=ge+xe[1]-xe[0];break;default:ve=K-1,Ee=me}const be=(ge-me)*.5,Ae=this.valueSize;this._weightPrev=be/(me-_e),this._weightNext=be/(Ee-ge),this._offsetPrev=ye*Ae,this._offsetNext=ve*Ae}interpolate_(K,me,ge,xe){const ye=this.resultBuffer,ve=this.sampleValues,_e=this.valueSize,Ee=K*_e,be=Ee-_e,Ae=this._offsetPrev,Se=this._offsetNext,Ce=this._weightPrev,Te=this._weightNext,Re=(ge-me)/(xe-me),De=Re*Re,Ie=De*Re,Be=-Ce*Ie+2*Ce*De-Ce*Re,Le=(1+Ce)*Ie+(-1.5-2*Ce)*De+(-.5+Ce)*Re+1,Oe=(-1-Te)*Ie+(1.5+Te)*De+.5*Re,Fe=Te*Ie-Te*De;for(let Ue=0;Ue!==_e;++Ue)ye[Ue]=Be*ve[Ae+Ue]+Le*ve[be+Ue]+Oe*ve[Ee+Ue]+Fe*ve[Se+Ue];return ye}}class LinearInterpolant extends Interpolant{constructor(K,me,ge,xe){super(K,me,ge,xe)}interpolate_(K,me,ge,xe){const ye=this.resultBuffer,ve=this.sampleValues,_e=this.valueSize,Ee=K*_e,be=Ee-_e,Ae=(ge-me)/(xe-me),Se=1-Ae;for(let Ce=0;Ce!==_e;++Ce)ye[Ce]=ve[be+Ce]*Se+ve[Ee+Ce]*Ae;return ye}}class DiscreteInterpolant extends Interpolant{constructor(K,me,ge,xe){super(K,me,ge,xe)}interpolate_(K){return this.copySampleValue_(K-1)}}class KeyframeTrack{constructor(K,me,ge,xe){if(K===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(me===void 0||me.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+K);this.name=K,this.times=convertArray(me,this.TimeBufferType),this.values=convertArray(ge,this.ValueBufferType),this.setInterpolation(xe||this.DefaultInterpolation)}static toJSON(K){const me=K.constructor;let ge;if(me.toJSON!==this.toJSON)ge=me.toJSON(K);else{ge={name:K.name,times:convertArray(K.times,Array),values:convertArray(K.values,Array)};const xe=K.getInterpolation();xe!==K.DefaultInterpolation&&(ge.interpolation=xe)}return ge.type=K.ValueTypeName,ge}InterpolantFactoryMethodDiscrete(K){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),K)}InterpolantFactoryMethodLinear(K){return new LinearInterpolant(this.times,this.values,this.getValueSize(),K)}InterpolantFactoryMethodSmooth(K){return new CubicInterpolant(this.times,this.values,this.getValueSize(),K)}setInterpolation(K){let me;switch(K){case InterpolateDiscrete:me=this.InterpolantFactoryMethodDiscrete;break;case InterpolateLinear:me=this.InterpolantFactoryMethodLinear;break;case InterpolateSmooth:me=this.InterpolantFactoryMethodSmooth;break}if(me===void 0){const ge="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(K!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(ge);return console.warn("THREE.KeyframeTrack:",ge),this}return this.createInterpolant=me,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return InterpolateDiscrete;case this.InterpolantFactoryMethodLinear:return InterpolateLinear;case this.InterpolantFactoryMethodSmooth:return InterpolateSmooth}}getValueSize(){return this.values.length/this.times.length}shift(K){if(K!==0){const me=this.times;for(let ge=0,xe=me.length;ge!==xe;++ge)me[ge]+=K}return this}scale(K){if(K!==1){const me=this.times;for(let ge=0,xe=me.length;ge!==xe;++ge)me[ge]*=K}return this}trim(K,me){const ge=this.times,xe=ge.length;let ye=0,ve=xe-1;for(;ye!==xe&&ge[ye]<K;)++ye;for(;ve!==-1&&ge[ve]>me;)--ve;if(++ve,ye!==0||ve!==xe){ye>=ve&&(ve=Math.max(ve,1),ye=ve-1);const _e=this.getValueSize();this.times=ge.slice(ye,ve),this.values=this.values.slice(ye*_e,ve*_e)}return this}validate(){let K=!0;const me=this.getValueSize();me-Math.floor(me)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),K=!1);const ge=this.times,xe=this.values,ye=ge.length;ye===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),K=!1);let ve=null;for(let _e=0;_e!==ye;_e++){const Ee=ge[_e];if(typeof Ee=="number"&&isNaN(Ee)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,_e,Ee),K=!1;break}if(ve!==null&&ve>Ee){console.error("THREE.KeyframeTrack: Out of order keys.",this,_e,Ee,ve),K=!1;break}ve=Ee}if(xe!==void 0&&isTypedArray(xe))for(let _e=0,Ee=xe.length;_e!==Ee;++_e){const be=xe[_e];if(isNaN(be)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,_e,be),K=!1;break}}return K}optimize(){const K=this.times.slice(),me=this.values.slice(),ge=this.getValueSize(),xe=this.getInterpolation()===InterpolateSmooth,ye=K.length-1;let ve=1;for(let _e=1;_e<ye;++_e){let Ee=!1;const be=K[_e],Ae=K[_e+1];if(be!==Ae&&(_e!==1||be!==K[0]))if(xe)Ee=!0;else{const Se=_e*ge,Ce=Se-ge,Te=Se+ge;for(let Re=0;Re!==ge;++Re){const De=me[Se+Re];if(De!==me[Ce+Re]||De!==me[Te+Re]){Ee=!0;break}}}if(Ee){if(_e!==ve){K[ve]=K[_e];const Se=_e*ge,Ce=ve*ge;for(let Te=0;Te!==ge;++Te)me[Ce+Te]=me[Se+Te]}++ve}}if(ye>0){K[ve]=K[ye];for(let _e=ye*ge,Ee=ve*ge,be=0;be!==ge;++be)me[Ee+be]=me[_e+be];++ve}return ve!==K.length?(this.times=K.slice(0,ve),this.values=me.slice(0,ve*ge)):(this.times=K,this.values=me),this}clone(){const K=this.times.slice(),me=this.values.slice(),ge=this.constructor,xe=new ge(this.name,K,me);return xe.createInterpolant=this.createInterpolant,xe}}KeyframeTrack.prototype.TimeBufferType=Float32Array;KeyframeTrack.prototype.ValueBufferType=Float32Array;KeyframeTrack.prototype.DefaultInterpolation=InterpolateLinear;class BooleanKeyframeTrack extends KeyframeTrack{constructor(K,me,ge){super(K,me,ge)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool";BooleanKeyframeTrack.prototype.ValueBufferType=Array;BooleanKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(K,me,ge,xe){super(K,me,ge,xe)}interpolate_(K,me,ge,xe){const ye=this.resultBuffer,ve=this.sampleValues,_e=this.valueSize,Ee=(ge-me)/(xe-me);let be=K*_e;for(let Ae=be+_e;be!==Ae;be+=4)Quaternion.slerpFlat(ye,0,ve,be-_e,ve,be,Ee);return ye}}class QuaternionKeyframeTrack extends KeyframeTrack{InterpolantFactoryMethodLinear(K){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),K)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion";QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(K,me,ge){super(K,me,ge)}}StringKeyframeTrack.prototype.ValueTypeName="string";StringKeyframeTrack.prototype.ValueBufferType=Array;StringKeyframeTrack.prototype.DefaultInterpolation=InterpolateDiscrete;StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0;StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{}VectorKeyframeTrack.prototype.ValueTypeName="vector";class AnimationClip{constructor(K="",me=-1,ge=[],xe=NormalAnimationBlendMode){this.name=K,this.tracks=ge,this.duration=me,this.blendMode=xe,this.uuid=generateUUID(),this.duration<0&&this.resetDuration()}static parse(K){const me=[],ge=K.tracks,xe=1/(K.fps||1);for(let ve=0,_e=ge.length;ve!==_e;++ve)me.push(parseKeyframeTrack(ge[ve]).scale(xe));const ye=new this(K.name,K.duration,me,K.blendMode);return ye.uuid=K.uuid,ye}static toJSON(K){const me=[],ge=K.tracks,xe={name:K.name,duration:K.duration,tracks:me,uuid:K.uuid,blendMode:K.blendMode};for(let ye=0,ve=ge.length;ye!==ve;++ye)me.push(KeyframeTrack.toJSON(ge[ye]));return xe}static CreateFromMorphTargetSequence(K,me,ge,xe){const ye=me.length,ve=[];for(let _e=0;_e<ye;_e++){let Ee=[],be=[];Ee.push((_e+ye-1)%ye,_e,(_e+1)%ye),be.push(0,1,0);const Ae=getKeyframeOrder(Ee);Ee=sortedArray(Ee,1,Ae),be=sortedArray(be,1,Ae),!xe&&Ee[0]===0&&(Ee.push(ye),be.push(be[0])),ve.push(new NumberKeyframeTrack(".morphTargetInfluences["+me[_e].name+"]",Ee,be).scale(1/ge))}return new this(K,-1,ve)}static findByName(K,me){let ge=K;if(!Array.isArray(K)){const xe=K;ge=xe.geometry&&xe.geometry.animations||xe.animations}for(let xe=0;xe<ge.length;xe++)if(ge[xe].name===me)return ge[xe];return null}static CreateClipsFromMorphTargetSequences(K,me,ge){const xe={},ye=/^([\w-]*?)([\d]+)$/;for(let _e=0,Ee=K.length;_e<Ee;_e++){const be=K[_e],Ae=be.name.match(ye);if(Ae&&Ae.length>1){const Se=Ae[1];let Ce=xe[Se];Ce||(xe[Se]=Ce=[]),Ce.push(be)}}const ve=[];for(const _e in xe)ve.push(this.CreateFromMorphTargetSequence(_e,xe[_e],me,ge));return ve}static parseAnimation(K,me){if(!K)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const ge=function(Se,Ce,Te,Re,De){if(Te.length!==0){const Ie=[],Be=[];flattenJSON(Te,Ie,Be,Re),Ie.length!==0&&De.push(new Se(Ce,Ie,Be))}},xe=[],ye=K.name||"default",ve=K.fps||30,_e=K.blendMode;let Ee=K.length||-1;const be=K.hierarchy||[];for(let Se=0;Se<be.length;Se++){const Ce=be[Se].keys;if(!(!Ce||Ce.length===0))if(Ce[0].morphTargets){const Te={};let Re;for(Re=0;Re<Ce.length;Re++)if(Ce[Re].morphTargets)for(let De=0;De<Ce[Re].morphTargets.length;De++)Te[Ce[Re].morphTargets[De]]=-1;for(const De in Te){const Ie=[],Be=[];for(let Le=0;Le!==Ce[Re].morphTargets.length;++Le){const Oe=Ce[Re];Ie.push(Oe.time),Be.push(Oe.morphTarget===De?1:0)}xe.push(new NumberKeyframeTrack(".morphTargetInfluence["+De+"]",Ie,Be))}Ee=Te.length*ve}else{const Te=".bones["+me[Se].name+"]";ge(VectorKeyframeTrack,Te+".position",Ce,"pos",xe),ge(QuaternionKeyframeTrack,Te+".quaternion",Ce,"rot",xe),ge(VectorKeyframeTrack,Te+".scale",Ce,"scl",xe)}}return xe.length===0?null:new this(ye,Ee,xe,_e)}resetDuration(){const K=this.tracks;let me=0;for(let ge=0,xe=K.length;ge!==xe;++ge){const ye=this.tracks[ge];me=Math.max(me,ye.times[ye.times.length-1])}return this.duration=me,this}trim(){for(let K=0;K<this.tracks.length;K++)this.tracks[K].trim(0,this.duration);return this}validate(){let K=!0;for(let me=0;me<this.tracks.length;me++)K=K&&this.tracks[me].validate();return K}optimize(){for(let K=0;K<this.tracks.length;K++)this.tracks[K].optimize();return this}clone(){const K=[];for(let me=0;me<this.tracks.length;me++)K.push(this.tracks[me].clone());return new this.constructor(this.name,this.duration,K,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function getTrackTypeForValueTypeName(fe){switch(fe.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return NumberKeyframeTrack;case"vector":case"vector2":case"vector3":case"vector4":return VectorKeyframeTrack;case"color":return ColorKeyframeTrack;case"quaternion":return QuaternionKeyframeTrack;case"bool":case"boolean":return BooleanKeyframeTrack;case"string":return StringKeyframeTrack}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+fe)}function parseKeyframeTrack(fe){if(fe.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const K=getTrackTypeForValueTypeName(fe.type);if(fe.times===void 0){const me=[],ge=[];flattenJSON(fe.keys,me,ge,"value"),fe.times=me,fe.values=ge}return K.parse!==void 0?K.parse(fe):new K(fe.name,fe.times,fe.values,fe.interpolation)}const Cache={enabled:!1,files:{},add:function(fe,K){this.enabled!==!1&&(this.files[fe]=K)},get:function(fe){if(this.enabled!==!1)return this.files[fe]},remove:function(fe){delete this.files[fe]},clear:function(){this.files={}}};class LoadingManager{constructor(K,me,ge){const xe=this;let ye=!1,ve=0,_e=0,Ee;const be=[];this.onStart=void 0,this.onLoad=K,this.onProgress=me,this.onError=ge,this.itemStart=function(Ae){_e++,ye===!1&&xe.onStart!==void 0&&xe.onStart(Ae,ve,_e),ye=!0},this.itemEnd=function(Ae){ve++,xe.onProgress!==void 0&&xe.onProgress(Ae,ve,_e),ve===_e&&(ye=!1,xe.onLoad!==void 0&&xe.onLoad())},this.itemError=function(Ae){xe.onError!==void 0&&xe.onError(Ae)},this.resolveURL=function(Ae){return Ee?Ee(Ae):Ae},this.setURLModifier=function(Ae){return Ee=Ae,this},this.addHandler=function(Ae,Se){return be.push(Ae,Se),this},this.removeHandler=function(Ae){const Se=be.indexOf(Ae);return Se!==-1&&be.splice(Se,2),this},this.getHandler=function(Ae){for(let Se=0,Ce=be.length;Se<Ce;Se+=2){const Te=be[Se],Re=be[Se+1];if(Te.global&&(Te.lastIndex=0),Te.test(Ae))return Re}return null}}}const DefaultLoadingManager=new LoadingManager;class Loader{constructor(K){this.manager=K!==void 0?K:DefaultLoadingManager,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(K,me){const ge=this;return new Promise(function(xe,ye){ge.load(K,xe,me,ye)})}parse(){}setCrossOrigin(K){return this.crossOrigin=K,this}setWithCredentials(K){return this.withCredentials=K,this}setPath(K){return this.path=K,this}setResourcePath(K){return this.resourcePath=K,this}setRequestHeader(K){return this.requestHeader=K,this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const loading={};class HttpError extends Error{constructor(K,me){super(K),this.response=me}}class FileLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){K===void 0&&(K=""),this.path!==void 0&&(K=this.path+K),K=this.manager.resolveURL(K);const ye=Cache.get(K);if(ye!==void 0)return this.manager.itemStart(K),setTimeout(()=>{me&&me(ye),this.manager.itemEnd(K)},0),ye;if(loading[K]!==void 0){loading[K].push({onLoad:me,onProgress:ge,onError:xe});return}loading[K]=[],loading[K].push({onLoad:me,onProgress:ge,onError:xe});const ve=new Request(K,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),_e=this.mimeType,Ee=this.responseType;fetch(ve).then(be=>{if(be.status===200||be.status===0){if(be.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||be.body===void 0||be.body.getReader===void 0)return be;const Ae=loading[K],Se=be.body.getReader(),Ce=be.headers.get("X-File-Size")||be.headers.get("Content-Length"),Te=Ce?parseInt(Ce):0,Re=Te!==0;let De=0;const Ie=new ReadableStream({start(Be){Le();function Le(){Se.read().then(({done:Oe,value:Fe})=>{if(Oe)Be.close();else{De+=Fe.byteLength;const Ue=new ProgressEvent("progress",{lengthComputable:Re,loaded:De,total:Te});for(let Ne=0,He=Ae.length;Ne<He;Ne++){const ze=Ae[Ne];ze.onProgress&&ze.onProgress(Ue)}Be.enqueue(Fe),Le()}},Oe=>{Be.error(Oe)})}}});return new Response(Ie)}else throw new HttpError(`fetch for "${be.url}" responded with ${be.status}: ${be.statusText}`,be)}).then(be=>{switch(Ee){case"arraybuffer":return be.arrayBuffer();case"blob":return be.blob();case"document":return be.text().then(Ae=>new DOMParser().parseFromString(Ae,_e));case"json":return be.json();default:if(_e===void 0)return be.text();{const Se=/charset="?([^;"\s]*)"?/i.exec(_e),Ce=Se&&Se[1]?Se[1].toLowerCase():void 0,Te=new TextDecoder(Ce);return be.arrayBuffer().then(Re=>Te.decode(Re))}}}).then(be=>{Cache.add(K,be);const Ae=loading[K];delete loading[K];for(let Se=0,Ce=Ae.length;Se<Ce;Se++){const Te=Ae[Se];Te.onLoad&&Te.onLoad(be)}}).catch(be=>{const Ae=loading[K];if(Ae===void 0)throw this.manager.itemError(K),be;delete loading[K];for(let Se=0,Ce=Ae.length;Se<Ce;Se++){const Te=Ae[Se];Te.onError&&Te.onError(be)}this.manager.itemError(K)}).finally(()=>{this.manager.itemEnd(K)}),this.manager.itemStart(K)}setResponseType(K){return this.responseType=K,this}setMimeType(K){return this.mimeType=K,this}}class AnimationLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){const ye=this,ve=new FileLoader(this.manager);ve.setPath(this.path),ve.setRequestHeader(this.requestHeader),ve.setWithCredentials(this.withCredentials),ve.load(K,function(_e){try{me(ye.parse(JSON.parse(_e)))}catch(Ee){xe?xe(Ee):console.error(Ee),ye.manager.itemError(K)}},ge,xe)}parse(K){const me=[];for(let ge=0;ge<K.length;ge++){const xe=AnimationClip.parse(K[ge]);me.push(xe)}return me}}class CompressedTextureLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){const ye=this,ve=[],_e=new CompressedTexture,Ee=new FileLoader(this.manager);Ee.setPath(this.path),Ee.setResponseType("arraybuffer"),Ee.setRequestHeader(this.requestHeader),Ee.setWithCredentials(ye.withCredentials);let be=0;function Ae(Se){Ee.load(K[Se],function(Ce){const Te=ye.parse(Ce,!0);ve[Se]={width:Te.width,height:Te.height,format:Te.format,mipmaps:Te.mipmaps},be+=1,be===6&&(Te.mipmapCount===1&&(_e.minFilter=LinearFilter),_e.image=ve,_e.format=Te.format,_e.needsUpdate=!0,me&&me(_e))},ge,xe)}if(Array.isArray(K))for(let Se=0,Ce=K.length;Se<Ce;++Se)Ae(Se);else Ee.load(K,function(Se){const Ce=ye.parse(Se,!0);if(Ce.isCubemap){const Te=Ce.mipmaps.length/Ce.mipmapCount;for(let Re=0;Re<Te;Re++){ve[Re]={mipmaps:[]};for(let De=0;De<Ce.mipmapCount;De++)ve[Re].mipmaps.push(Ce.mipmaps[Re*Ce.mipmapCount+De]),ve[Re].format=Ce.format,ve[Re].width=Ce.width,ve[Re].height=Ce.height}_e.image=ve}else _e.image.width=Ce.width,_e.image.height=Ce.height,_e.mipmaps=Ce.mipmaps;Ce.mipmapCount===1&&(_e.minFilter=LinearFilter),_e.format=Ce.format,_e.needsUpdate=!0,me&&me(_e)},ge,xe);return _e}}class ImageLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){this.path!==void 0&&(K=this.path+K),K=this.manager.resolveURL(K);const ye=this,ve=Cache.get(K);if(ve!==void 0)return ye.manager.itemStart(K),setTimeout(function(){me&&me(ve),ye.manager.itemEnd(K)},0),ve;const _e=createElementNS("img");function Ee(){Ae(),Cache.add(K,this),me&&me(this),ye.manager.itemEnd(K)}function be(Se){Ae(),xe&&xe(Se),ye.manager.itemError(K),ye.manager.itemEnd(K)}function Ae(){_e.removeEventListener("load",Ee,!1),_e.removeEventListener("error",be,!1)}return _e.addEventListener("load",Ee,!1),_e.addEventListener("error",be,!1),K.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(_e.crossOrigin=this.crossOrigin),ye.manager.itemStart(K),_e.src=K,_e}}class CubeTextureLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){const ye=new CubeTexture;ye.colorSpace=SRGBColorSpace;const ve=new ImageLoader(this.manager);ve.setCrossOrigin(this.crossOrigin),ve.setPath(this.path);let _e=0;function Ee(be){ve.load(K[be],function(Ae){ye.images[be]=Ae,_e++,_e===6&&(ye.needsUpdate=!0,me&&me(ye))},void 0,xe)}for(let be=0;be<K.length;++be)Ee(be);return ye}}class DataTextureLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){const ye=this,ve=new DataTexture,_e=new FileLoader(this.manager);return _e.setResponseType("arraybuffer"),_e.setRequestHeader(this.requestHeader),_e.setPath(this.path),_e.setWithCredentials(ye.withCredentials),_e.load(K,function(Ee){let be;try{be=ye.parse(Ee)}catch(Ae){if(xe!==void 0)xe(Ae);else{console.error(Ae);return}}be.image!==void 0?ve.image=be.image:be.data!==void 0&&(ve.image.width=be.width,ve.image.height=be.height,ve.image.data=be.data),ve.wrapS=be.wrapS!==void 0?be.wrapS:ClampToEdgeWrapping,ve.wrapT=be.wrapT!==void 0?be.wrapT:ClampToEdgeWrapping,ve.magFilter=be.magFilter!==void 0?be.magFilter:LinearFilter,ve.minFilter=be.minFilter!==void 0?be.minFilter:LinearFilter,ve.anisotropy=be.anisotropy!==void 0?be.anisotropy:1,be.colorSpace!==void 0&&(ve.colorSpace=be.colorSpace),be.flipY!==void 0&&(ve.flipY=be.flipY),be.format!==void 0&&(ve.format=be.format),be.type!==void 0&&(ve.type=be.type),be.mipmaps!==void 0&&(ve.mipmaps=be.mipmaps,ve.minFilter=LinearMipmapLinearFilter),be.mipmapCount===1&&(ve.minFilter=LinearFilter),be.generateMipmaps!==void 0&&(ve.generateMipmaps=be.generateMipmaps),ve.needsUpdate=!0,me&&me(ve,be)},ge,xe),ve}}class TextureLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){const ye=new Texture,ve=new ImageLoader(this.manager);return ve.setCrossOrigin(this.crossOrigin),ve.setPath(this.path),ve.load(K,function(_e){ye.image=_e,ye.needsUpdate=!0,me!==void 0&&me(ye)},ge,xe),ye}}class Light extends Object3D{constructor(K,me=1){super(),this.isLight=!0,this.type="Light",this.color=new Color$1(K),this.intensity=me}dispose(){}copy(K,me){return super.copy(K,me),this.color.copy(K.color),this.intensity=K.intensity,this}toJSON(K){const me=super.toJSON(K);return me.object.color=this.color.getHex(),me.object.intensity=this.intensity,this.groundColor!==void 0&&(me.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(me.object.distance=this.distance),this.angle!==void 0&&(me.object.angle=this.angle),this.decay!==void 0&&(me.object.decay=this.decay),this.penumbra!==void 0&&(me.object.penumbra=this.penumbra),this.shadow!==void 0&&(me.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(me.object.target=this.target.uuid),me}}class HemisphereLight extends Light{constructor(K,me,ge){super(K,ge),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Color$1(me)}copy(K,me){return super.copy(K,me),this.groundColor.copy(K.groundColor),this}}const _projScreenMatrix$1=new Matrix4,_lightPositionWorld$1=new Vector3,_lookTarget$1=new Vector3;class LightShadow{constructor(K){this.camera=K,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Vector2(512,512),this.map=null,this.mapPass=null,this.matrix=new Matrix4,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Frustum,this._frameExtents=new Vector2(1,1),this._viewportCount=1,this._viewports=[new Vector4(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(K){const me=this.camera,ge=this.matrix;_lightPositionWorld$1.setFromMatrixPosition(K.matrixWorld),me.position.copy(_lightPositionWorld$1),_lookTarget$1.setFromMatrixPosition(K.target.matrixWorld),me.lookAt(_lookTarget$1),me.updateMatrixWorld(),_projScreenMatrix$1.multiplyMatrices(me.projectionMatrix,me.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix$1),ge.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ge.multiply(_projScreenMatrix$1)}getViewport(K){return this._viewports[K]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(K){return this.camera=K.camera.clone(),this.intensity=K.intensity,this.bias=K.bias,this.radius=K.radius,this.mapSize.copy(K.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const K={};return this.intensity!==1&&(K.intensity=this.intensity),this.bias!==0&&(K.bias=this.bias),this.normalBias!==0&&(K.normalBias=this.normalBias),this.radius!==1&&(K.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(K.mapSize=this.mapSize.toArray()),K.camera=this.camera.toJSON(!1).object,delete K.camera.matrix,K}}class SpotLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(K){const me=this.camera,ge=RAD2DEG*2*K.angle*this.focus,xe=this.mapSize.width/this.mapSize.height,ye=K.distance||me.far;(ge!==me.fov||xe!==me.aspect||ye!==me.far)&&(me.fov=ge,me.aspect=xe,me.far=ye,me.updateProjectionMatrix()),super.updateMatrices(K)}copy(K){return super.copy(K),this.focus=K.focus,this}}class SpotLight extends Light{constructor(K,me,ge=0,xe=Math.PI/3,ye=0,ve=2){super(K,me),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.distance=ge,this.angle=xe,this.penumbra=ye,this.decay=ve,this.map=null,this.shadow=new SpotLightShadow}get power(){return this.intensity*Math.PI}set power(K){this.intensity=K/Math.PI}dispose(){this.shadow.dispose()}copy(K,me){return super.copy(K,me),this.distance=K.distance,this.angle=K.angle,this.penumbra=K.penumbra,this.decay=K.decay,this.target=K.target.clone(),this.shadow=K.shadow.clone(),this}}const _projScreenMatrix=new Matrix4,_lightPositionWorld=new Vector3,_lookTarget=new Vector3;class PointLightShadow extends LightShadow{constructor(){super(new PerspectiveCamera(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Vector2(4,2),this._viewportCount=6,this._viewports=[new Vector4(2,1,1,1),new Vector4(0,1,1,1),new Vector4(3,1,1,1),new Vector4(1,1,1,1),new Vector4(3,0,1,1),new Vector4(1,0,1,1)],this._cubeDirections=[new Vector3(1,0,0),new Vector3(-1,0,0),new Vector3(0,0,1),new Vector3(0,0,-1),new Vector3(0,1,0),new Vector3(0,-1,0)],this._cubeUps=[new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,1,0),new Vector3(0,0,1),new Vector3(0,0,-1)]}updateMatrices(K,me=0){const ge=this.camera,xe=this.matrix,ye=K.distance||ge.far;ye!==ge.far&&(ge.far=ye,ge.updateProjectionMatrix()),_lightPositionWorld.setFromMatrixPosition(K.matrixWorld),ge.position.copy(_lightPositionWorld),_lookTarget.copy(ge.position),_lookTarget.add(this._cubeDirections[me]),ge.up.copy(this._cubeUps[me]),ge.lookAt(_lookTarget),ge.updateMatrixWorld(),xe.makeTranslation(-_lightPositionWorld.x,-_lightPositionWorld.y,-_lightPositionWorld.z),_projScreenMatrix.multiplyMatrices(ge.projectionMatrix,ge.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_projScreenMatrix)}}class PointLight extends Light{constructor(K,me,ge=0,xe=2){super(K,me),this.isPointLight=!0,this.type="PointLight",this.distance=ge,this.decay=xe,this.shadow=new PointLightShadow}get power(){return this.intensity*4*Math.PI}set power(K){this.intensity=K/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(K,me){return super.copy(K,me),this.distance=K.distance,this.decay=K.decay,this.shadow=K.shadow.clone(),this}}class OrthographicCamera extends Camera{constructor(K=-1,me=1,ge=1,xe=-1,ye=.1,ve=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=K,this.right=me,this.top=ge,this.bottom=xe,this.near=ye,this.far=ve,this.updateProjectionMatrix()}copy(K,me){return super.copy(K,me),this.left=K.left,this.right=K.right,this.top=K.top,this.bottom=K.bottom,this.near=K.near,this.far=K.far,this.zoom=K.zoom,this.view=K.view===null?null:Object.assign({},K.view),this}setViewOffset(K,me,ge,xe,ye,ve){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=K,this.view.fullHeight=me,this.view.offsetX=ge,this.view.offsetY=xe,this.view.width=ye,this.view.height=ve,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const K=(this.right-this.left)/(2*this.zoom),me=(this.top-this.bottom)/(2*this.zoom),ge=(this.right+this.left)/2,xe=(this.top+this.bottom)/2;let ye=ge-K,ve=ge+K,_e=xe+me,Ee=xe-me;if(this.view!==null&&this.view.enabled){const be=(this.right-this.left)/this.view.fullWidth/this.zoom,Ae=(this.top-this.bottom)/this.view.fullHeight/this.zoom;ye+=be*this.view.offsetX,ve=ye+be*this.view.width,_e-=Ae*this.view.offsetY,Ee=_e-Ae*this.view.height}this.projectionMatrix.makeOrthographic(ye,ve,_e,Ee,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(K){const me=super.toJSON(K);return me.object.zoom=this.zoom,me.object.left=this.left,me.object.right=this.right,me.object.top=this.top,me.object.bottom=this.bottom,me.object.near=this.near,me.object.far=this.far,this.view!==null&&(me.object.view=Object.assign({},this.view)),me}}class DirectionalLightShadow extends LightShadow{constructor(){super(new OrthographicCamera(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class DirectionalLight extends Light{constructor(K,me){super(K,me),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Object3D.DEFAULT_UP),this.updateMatrix(),this.target=new Object3D,this.shadow=new DirectionalLightShadow}dispose(){this.shadow.dispose()}copy(K){return super.copy(K),this.target=K.target.clone(),this.shadow=K.shadow.clone(),this}}class AmbientLight extends Light{constructor(K,me){super(K,me),this.isAmbientLight=!0,this.type="AmbientLight"}}class RectAreaLight extends Light{constructor(K,me,ge=10,xe=10){super(K,me),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=ge,this.height=xe}get power(){return this.intensity*this.width*this.height*Math.PI}set power(K){this.intensity=K/(this.width*this.height*Math.PI)}copy(K){return super.copy(K),this.width=K.width,this.height=K.height,this}toJSON(K){const me=super.toJSON(K);return me.object.width=this.width,me.object.height=this.height,me}}class SphericalHarmonics3{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let K=0;K<9;K++)this.coefficients.push(new Vector3)}set(K){for(let me=0;me<9;me++)this.coefficients[me].copy(K[me]);return this}zero(){for(let K=0;K<9;K++)this.coefficients[K].set(0,0,0);return this}getAt(K,me){const ge=K.x,xe=K.y,ye=K.z,ve=this.coefficients;return me.copy(ve[0]).multiplyScalar(.282095),me.addScaledVector(ve[1],.488603*xe),me.addScaledVector(ve[2],.488603*ye),me.addScaledVector(ve[3],.488603*ge),me.addScaledVector(ve[4],1.092548*(ge*xe)),me.addScaledVector(ve[5],1.092548*(xe*ye)),me.addScaledVector(ve[6],.315392*(3*ye*ye-1)),me.addScaledVector(ve[7],1.092548*(ge*ye)),me.addScaledVector(ve[8],.546274*(ge*ge-xe*xe)),me}getIrradianceAt(K,me){const ge=K.x,xe=K.y,ye=K.z,ve=this.coefficients;return me.copy(ve[0]).multiplyScalar(.886227),me.addScaledVector(ve[1],2*.511664*xe),me.addScaledVector(ve[2],2*.511664*ye),me.addScaledVector(ve[3],2*.511664*ge),me.addScaledVector(ve[4],2*.429043*ge*xe),me.addScaledVector(ve[5],2*.429043*xe*ye),me.addScaledVector(ve[6],.743125*ye*ye-.247708),me.addScaledVector(ve[7],2*.429043*ge*ye),me.addScaledVector(ve[8],.429043*(ge*ge-xe*xe)),me}add(K){for(let me=0;me<9;me++)this.coefficients[me].add(K.coefficients[me]);return this}addScaledSH(K,me){for(let ge=0;ge<9;ge++)this.coefficients[ge].addScaledVector(K.coefficients[ge],me);return this}scale(K){for(let me=0;me<9;me++)this.coefficients[me].multiplyScalar(K);return this}lerp(K,me){for(let ge=0;ge<9;ge++)this.coefficients[ge].lerp(K.coefficients[ge],me);return this}equals(K){for(let me=0;me<9;me++)if(!this.coefficients[me].equals(K.coefficients[me]))return!1;return!0}copy(K){return this.set(K.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(K,me=0){const ge=this.coefficients;for(let xe=0;xe<9;xe++)ge[xe].fromArray(K,me+xe*3);return this}toArray(K=[],me=0){const ge=this.coefficients;for(let xe=0;xe<9;xe++)ge[xe].toArray(K,me+xe*3);return K}static getBasisAt(K,me){const ge=K.x,xe=K.y,ye=K.z;me[0]=.282095,me[1]=.488603*xe,me[2]=.488603*ye,me[3]=.488603*ge,me[4]=1.092548*ge*xe,me[5]=1.092548*xe*ye,me[6]=.315392*(3*ye*ye-1),me[7]=1.092548*ge*ye,me[8]=.546274*(ge*ge-xe*xe)}}class LightProbe extends Light{constructor(K=new SphericalHarmonics3,me=1){super(void 0,me),this.isLightProbe=!0,this.sh=K}copy(K){return super.copy(K),this.sh.copy(K.sh),this}fromJSON(K){return this.intensity=K.intensity,this.sh.fromArray(K.sh),this}toJSON(K){const me=super.toJSON(K);return me.object.sh=this.sh.toArray(),me}}class MaterialLoader extends Loader{constructor(K){super(K),this.textures={}}load(K,me,ge,xe){const ye=this,ve=new FileLoader(ye.manager);ve.setPath(ye.path),ve.setRequestHeader(ye.requestHeader),ve.setWithCredentials(ye.withCredentials),ve.load(K,function(_e){try{me(ye.parse(JSON.parse(_e)))}catch(Ee){xe?xe(Ee):console.error(Ee),ye.manager.itemError(K)}},ge,xe)}parse(K){const me=this.textures;function ge(ye){return me[ye]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",ye),me[ye]}const xe=this.createMaterialFromType(K.type);if(K.uuid!==void 0&&(xe.uuid=K.uuid),K.name!==void 0&&(xe.name=K.name),K.color!==void 0&&xe.color!==void 0&&xe.color.setHex(K.color),K.roughness!==void 0&&(xe.roughness=K.roughness),K.metalness!==void 0&&(xe.metalness=K.metalness),K.sheen!==void 0&&(xe.sheen=K.sheen),K.sheenColor!==void 0&&(xe.sheenColor=new Color$1().setHex(K.sheenColor)),K.sheenRoughness!==void 0&&(xe.sheenRoughness=K.sheenRoughness),K.emissive!==void 0&&xe.emissive!==void 0&&xe.emissive.setHex(K.emissive),K.specular!==void 0&&xe.specular!==void 0&&xe.specular.setHex(K.specular),K.specularIntensity!==void 0&&(xe.specularIntensity=K.specularIntensity),K.specularColor!==void 0&&xe.specularColor!==void 0&&xe.specularColor.setHex(K.specularColor),K.shininess!==void 0&&(xe.shininess=K.shininess),K.clearcoat!==void 0&&(xe.clearcoat=K.clearcoat),K.clearcoatRoughness!==void 0&&(xe.clearcoatRoughness=K.clearcoatRoughness),K.dispersion!==void 0&&(xe.dispersion=K.dispersion),K.iridescence!==void 0&&(xe.iridescence=K.iridescence),K.iridescenceIOR!==void 0&&(xe.iridescenceIOR=K.iridescenceIOR),K.iridescenceThicknessRange!==void 0&&(xe.iridescenceThicknessRange=K.iridescenceThicknessRange),K.transmission!==void 0&&(xe.transmission=K.transmission),K.thickness!==void 0&&(xe.thickness=K.thickness),K.attenuationDistance!==void 0&&(xe.attenuationDistance=K.attenuationDistance),K.attenuationColor!==void 0&&xe.attenuationColor!==void 0&&xe.attenuationColor.setHex(K.attenuationColor),K.anisotropy!==void 0&&(xe.anisotropy=K.anisotropy),K.anisotropyRotation!==void 0&&(xe.anisotropyRotation=K.anisotropyRotation),K.fog!==void 0&&(xe.fog=K.fog),K.flatShading!==void 0&&(xe.flatShading=K.flatShading),K.blending!==void 0&&(xe.blending=K.blending),K.combine!==void 0&&(xe.combine=K.combine),K.side!==void 0&&(xe.side=K.side),K.shadowSide!==void 0&&(xe.shadowSide=K.shadowSide),K.opacity!==void 0&&(xe.opacity=K.opacity),K.transparent!==void 0&&(xe.transparent=K.transparent),K.alphaTest!==void 0&&(xe.alphaTest=K.alphaTest),K.alphaHash!==void 0&&(xe.alphaHash=K.alphaHash),K.depthFunc!==void 0&&(xe.depthFunc=K.depthFunc),K.depthTest!==void 0&&(xe.depthTest=K.depthTest),K.depthWrite!==void 0&&(xe.depthWrite=K.depthWrite),K.colorWrite!==void 0&&(xe.colorWrite=K.colorWrite),K.blendSrc!==void 0&&(xe.blendSrc=K.blendSrc),K.blendDst!==void 0&&(xe.blendDst=K.blendDst),K.blendEquation!==void 0&&(xe.blendEquation=K.blendEquation),K.blendSrcAlpha!==void 0&&(xe.blendSrcAlpha=K.blendSrcAlpha),K.blendDstAlpha!==void 0&&(xe.blendDstAlpha=K.blendDstAlpha),K.blendEquationAlpha!==void 0&&(xe.blendEquationAlpha=K.blendEquationAlpha),K.blendColor!==void 0&&xe.blendColor!==void 0&&xe.blendColor.setHex(K.blendColor),K.blendAlpha!==void 0&&(xe.blendAlpha=K.blendAlpha),K.stencilWriteMask!==void 0&&(xe.stencilWriteMask=K.stencilWriteMask),K.stencilFunc!==void 0&&(xe.stencilFunc=K.stencilFunc),K.stencilRef!==void 0&&(xe.stencilRef=K.stencilRef),K.stencilFuncMask!==void 0&&(xe.stencilFuncMask=K.stencilFuncMask),K.stencilFail!==void 0&&(xe.stencilFail=K.stencilFail),K.stencilZFail!==void 0&&(xe.stencilZFail=K.stencilZFail),K.stencilZPass!==void 0&&(xe.stencilZPass=K.stencilZPass),K.stencilWrite!==void 0&&(xe.stencilWrite=K.stencilWrite),K.wireframe!==void 0&&(xe.wireframe=K.wireframe),K.wireframeLinewidth!==void 0&&(xe.wireframeLinewidth=K.wireframeLinewidth),K.wireframeLinecap!==void 0&&(xe.wireframeLinecap=K.wireframeLinecap),K.wireframeLinejoin!==void 0&&(xe.wireframeLinejoin=K.wireframeLinejoin),K.rotation!==void 0&&(xe.rotation=K.rotation),K.linewidth!==void 0&&(xe.linewidth=K.linewidth),K.dashSize!==void 0&&(xe.dashSize=K.dashSize),K.gapSize!==void 0&&(xe.gapSize=K.gapSize),K.scale!==void 0&&(xe.scale=K.scale),K.polygonOffset!==void 0&&(xe.polygonOffset=K.polygonOffset),K.polygonOffsetFactor!==void 0&&(xe.polygonOffsetFactor=K.polygonOffsetFactor),K.polygonOffsetUnits!==void 0&&(xe.polygonOffsetUnits=K.polygonOffsetUnits),K.dithering!==void 0&&(xe.dithering=K.dithering),K.alphaToCoverage!==void 0&&(xe.alphaToCoverage=K.alphaToCoverage),K.premultipliedAlpha!==void 0&&(xe.premultipliedAlpha=K.premultipliedAlpha),K.forceSinglePass!==void 0&&(xe.forceSinglePass=K.forceSinglePass),K.visible!==void 0&&(xe.visible=K.visible),K.toneMapped!==void 0&&(xe.toneMapped=K.toneMapped),K.userData!==void 0&&(xe.userData=K.userData),K.vertexColors!==void 0&&(typeof K.vertexColors=="number"?xe.vertexColors=K.vertexColors>0:xe.vertexColors=K.vertexColors),K.uniforms!==void 0)for(const ye in K.uniforms){const ve=K.uniforms[ye];switch(xe.uniforms[ye]={},ve.type){case"t":xe.uniforms[ye].value=ge(ve.value);break;case"c":xe.uniforms[ye].value=new Color$1().setHex(ve.value);break;case"v2":xe.uniforms[ye].value=new Vector2().fromArray(ve.value);break;case"v3":xe.uniforms[ye].value=new Vector3().fromArray(ve.value);break;case"v4":xe.uniforms[ye].value=new Vector4().fromArray(ve.value);break;case"m3":xe.uniforms[ye].value=new Matrix3().fromArray(ve.value);break;case"m4":xe.uniforms[ye].value=new Matrix4().fromArray(ve.value);break;default:xe.uniforms[ye].value=ve.value}}if(K.defines!==void 0&&(xe.defines=K.defines),K.vertexShader!==void 0&&(xe.vertexShader=K.vertexShader),K.fragmentShader!==void 0&&(xe.fragmentShader=K.fragmentShader),K.glslVersion!==void 0&&(xe.glslVersion=K.glslVersion),K.extensions!==void 0)for(const ye in K.extensions)xe.extensions[ye]=K.extensions[ye];if(K.lights!==void 0&&(xe.lights=K.lights),K.clipping!==void 0&&(xe.clipping=K.clipping),K.size!==void 0&&(xe.size=K.size),K.sizeAttenuation!==void 0&&(xe.sizeAttenuation=K.sizeAttenuation),K.map!==void 0&&(xe.map=ge(K.map)),K.matcap!==void 0&&(xe.matcap=ge(K.matcap)),K.alphaMap!==void 0&&(xe.alphaMap=ge(K.alphaMap)),K.bumpMap!==void 0&&(xe.bumpMap=ge(K.bumpMap)),K.bumpScale!==void 0&&(xe.bumpScale=K.bumpScale),K.normalMap!==void 0&&(xe.normalMap=ge(K.normalMap)),K.normalMapType!==void 0&&(xe.normalMapType=K.normalMapType),K.normalScale!==void 0){let ye=K.normalScale;Array.isArray(ye)===!1&&(ye=[ye,ye]),xe.normalScale=new Vector2().fromArray(ye)}return K.displacementMap!==void 0&&(xe.displacementMap=ge(K.displacementMap)),K.displacementScale!==void 0&&(xe.displacementScale=K.displacementScale),K.displacementBias!==void 0&&(xe.displacementBias=K.displacementBias),K.roughnessMap!==void 0&&(xe.roughnessMap=ge(K.roughnessMap)),K.metalnessMap!==void 0&&(xe.metalnessMap=ge(K.metalnessMap)),K.emissiveMap!==void 0&&(xe.emissiveMap=ge(K.emissiveMap)),K.emissiveIntensity!==void 0&&(xe.emissiveIntensity=K.emissiveIntensity),K.specularMap!==void 0&&(xe.specularMap=ge(K.specularMap)),K.specularIntensityMap!==void 0&&(xe.specularIntensityMap=ge(K.specularIntensityMap)),K.specularColorMap!==void 0&&(xe.specularColorMap=ge(K.specularColorMap)),K.envMap!==void 0&&(xe.envMap=ge(K.envMap)),K.envMapRotation!==void 0&&xe.envMapRotation.fromArray(K.envMapRotation),K.envMapIntensity!==void 0&&(xe.envMapIntensity=K.envMapIntensity),K.reflectivity!==void 0&&(xe.reflectivity=K.reflectivity),K.refractionRatio!==void 0&&(xe.refractionRatio=K.refractionRatio),K.lightMap!==void 0&&(xe.lightMap=ge(K.lightMap)),K.lightMapIntensity!==void 0&&(xe.lightMapIntensity=K.lightMapIntensity),K.aoMap!==void 0&&(xe.aoMap=ge(K.aoMap)),K.aoMapIntensity!==void 0&&(xe.aoMapIntensity=K.aoMapIntensity),K.gradientMap!==void 0&&(xe.gradientMap=ge(K.gradientMap)),K.clearcoatMap!==void 0&&(xe.clearcoatMap=ge(K.clearcoatMap)),K.clearcoatRoughnessMap!==void 0&&(xe.clearcoatRoughnessMap=ge(K.clearcoatRoughnessMap)),K.clearcoatNormalMap!==void 0&&(xe.clearcoatNormalMap=ge(K.clearcoatNormalMap)),K.clearcoatNormalScale!==void 0&&(xe.clearcoatNormalScale=new Vector2().fromArray(K.clearcoatNormalScale)),K.iridescenceMap!==void 0&&(xe.iridescenceMap=ge(K.iridescenceMap)),K.iridescenceThicknessMap!==void 0&&(xe.iridescenceThicknessMap=ge(K.iridescenceThicknessMap)),K.transmissionMap!==void 0&&(xe.transmissionMap=ge(K.transmissionMap)),K.thicknessMap!==void 0&&(xe.thicknessMap=ge(K.thicknessMap)),K.anisotropyMap!==void 0&&(xe.anisotropyMap=ge(K.anisotropyMap)),K.sheenColorMap!==void 0&&(xe.sheenColorMap=ge(K.sheenColorMap)),K.sheenRoughnessMap!==void 0&&(xe.sheenRoughnessMap=ge(K.sheenRoughnessMap)),xe}setTextures(K){return this.textures=K,this}createMaterialFromType(K){return MaterialLoader.createMaterialFromType(K)}static createMaterialFromType(K){const me={ShadowMaterial,SpriteMaterial,RawShaderMaterial,ShaderMaterial,PointsMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshPhongMaterial,MeshToonMaterial,MeshNormalMaterial,MeshLambertMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshBasicMaterial,MeshMatcapMaterial,LineDashedMaterial,LineBasicMaterial,Material};return new me[K]}}class LoaderUtils{static decodeText(K){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(K);let me="";for(let ge=0,xe=K.length;ge<xe;ge++)me+=String.fromCharCode(K[ge]);try{return decodeURIComponent(escape(me))}catch{return me}}static extractUrlBase(K){const me=K.lastIndexOf("/");return me===-1?"./":K.slice(0,me+1)}static resolveURL(K,me){return typeof K!="string"||K===""?"":(/^https?:\/\//i.test(me)&&/^\//.test(K)&&(me=me.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(K)||/^data:.*,.*$/i.test(K)||/^blob:.*$/i.test(K)?K:me+K)}}class InstancedBufferGeometry extends BufferGeometry{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(K){return super.copy(K),this.instanceCount=K.instanceCount,this}toJSON(){const K=super.toJSON();return K.instanceCount=this.instanceCount,K.isInstancedBufferGeometry=!0,K}}class BufferGeometryLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){const ye=this,ve=new FileLoader(ye.manager);ve.setPath(ye.path),ve.setRequestHeader(ye.requestHeader),ve.setWithCredentials(ye.withCredentials),ve.load(K,function(_e){try{me(ye.parse(JSON.parse(_e)))}catch(Ee){xe?xe(Ee):console.error(Ee),ye.manager.itemError(K)}},ge,xe)}parse(K){const me={},ge={};function xe(Te,Re){if(me[Re]!==void 0)return me[Re];const Ie=Te.interleavedBuffers[Re],Be=ye(Te,Ie.buffer),Le=getTypedArray(Ie.type,Be),Oe=new InterleavedBuffer(Le,Ie.stride);return Oe.uuid=Ie.uuid,me[Re]=Oe,Oe}function ye(Te,Re){if(ge[Re]!==void 0)return ge[Re];const Ie=Te.arrayBuffers[Re],Be=new Uint32Array(Ie).buffer;return ge[Re]=Be,Be}const ve=K.isInstancedBufferGeometry?new InstancedBufferGeometry:new BufferGeometry,_e=K.data.index;if(_e!==void 0){const Te=getTypedArray(_e.type,_e.array);ve.setIndex(new BufferAttribute(Te,1))}const Ee=K.data.attributes;for(const Te in Ee){const Re=Ee[Te];let De;if(Re.isInterleavedBufferAttribute){const Ie=xe(K.data,Re.data);De=new InterleavedBufferAttribute(Ie,Re.itemSize,Re.offset,Re.normalized)}else{const Ie=getTypedArray(Re.type,Re.array),Be=Re.isInstancedBufferAttribute?InstancedBufferAttribute:BufferAttribute;De=new Be(Ie,Re.itemSize,Re.normalized)}Re.name!==void 0&&(De.name=Re.name),Re.usage!==void 0&&De.setUsage(Re.usage),ve.setAttribute(Te,De)}const be=K.data.morphAttributes;if(be)for(const Te in be){const Re=be[Te],De=[];for(let Ie=0,Be=Re.length;Ie<Be;Ie++){const Le=Re[Ie];let Oe;if(Le.isInterleavedBufferAttribute){const Fe=xe(K.data,Le.data);Oe=new InterleavedBufferAttribute(Fe,Le.itemSize,Le.offset,Le.normalized)}else{const Fe=getTypedArray(Le.type,Le.array);Oe=new BufferAttribute(Fe,Le.itemSize,Le.normalized)}Le.name!==void 0&&(Oe.name=Le.name),De.push(Oe)}ve.morphAttributes[Te]=De}K.data.morphTargetsRelative&&(ve.morphTargetsRelative=!0);const Se=K.data.groups||K.data.drawcalls||K.data.offsets;if(Se!==void 0)for(let Te=0,Re=Se.length;Te!==Re;++Te){const De=Se[Te];ve.addGroup(De.start,De.count,De.materialIndex)}const Ce=K.data.boundingSphere;if(Ce!==void 0){const Te=new Vector3;Ce.center!==void 0&&Te.fromArray(Ce.center),ve.boundingSphere=new Sphere(Te,Ce.radius)}return K.name&&(ve.name=K.name),K.userData&&(ve.userData=K.userData),ve}}class ObjectLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){const ye=this,ve=this.path===""?LoaderUtils.extractUrlBase(K):this.path;this.resourcePath=this.resourcePath||ve;const _e=new FileLoader(this.manager);_e.setPath(this.path),_e.setRequestHeader(this.requestHeader),_e.setWithCredentials(this.withCredentials),_e.load(K,function(Ee){let be=null;try{be=JSON.parse(Ee)}catch(Se){xe!==void 0&&xe(Se),console.error("THREE:ObjectLoader: Can't parse "+K+".",Se.message);return}const Ae=be.metadata;if(Ae===void 0||Ae.type===void 0||Ae.type.toLowerCase()==="geometry"){xe!==void 0&&xe(new Error("THREE.ObjectLoader: Can't load "+K)),console.error("THREE.ObjectLoader: Can't load "+K);return}ye.parse(be,me)},ge,xe)}async loadAsync(K,me){const ge=this,xe=this.path===""?LoaderUtils.extractUrlBase(K):this.path;this.resourcePath=this.resourcePath||xe;const ye=new FileLoader(this.manager);ye.setPath(this.path),ye.setRequestHeader(this.requestHeader),ye.setWithCredentials(this.withCredentials);const ve=await ye.loadAsync(K,me),_e=JSON.parse(ve),Ee=_e.metadata;if(Ee===void 0||Ee.type===void 0||Ee.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+K);return await ge.parseAsync(_e)}parse(K,me){const ge=this.parseAnimations(K.animations),xe=this.parseShapes(K.shapes),ye=this.parseGeometries(K.geometries,xe),ve=this.parseImages(K.images,function(){me!==void 0&&me(be)}),_e=this.parseTextures(K.textures,ve),Ee=this.parseMaterials(K.materials,_e),be=this.parseObject(K.object,ye,Ee,_e,ge),Ae=this.parseSkeletons(K.skeletons,be);if(this.bindSkeletons(be,Ae),this.bindLightTargets(be),me!==void 0){let Se=!1;for(const Ce in ve)if(ve[Ce].data instanceof HTMLImageElement){Se=!0;break}Se===!1&&me(be)}return be}async parseAsync(K){const me=this.parseAnimations(K.animations),ge=this.parseShapes(K.shapes),xe=this.parseGeometries(K.geometries,ge),ye=await this.parseImagesAsync(K.images),ve=this.parseTextures(K.textures,ye),_e=this.parseMaterials(K.materials,ve),Ee=this.parseObject(K.object,xe,_e,ve,me),be=this.parseSkeletons(K.skeletons,Ee);return this.bindSkeletons(Ee,be),this.bindLightTargets(Ee),Ee}parseShapes(K){const me={};if(K!==void 0)for(let ge=0,xe=K.length;ge<xe;ge++){const ye=new Shape().fromJSON(K[ge]);me[ye.uuid]=ye}return me}parseSkeletons(K,me){const ge={},xe={};if(me.traverse(function(ye){ye.isBone&&(xe[ye.uuid]=ye)}),K!==void 0)for(let ye=0,ve=K.length;ye<ve;ye++){const _e=new Skeleton().fromJSON(K[ye],xe);ge[_e.uuid]=_e}return ge}parseGeometries(K,me){const ge={};if(K!==void 0){const xe=new BufferGeometryLoader;for(let ye=0,ve=K.length;ye<ve;ye++){let _e;const Ee=K[ye];switch(Ee.type){case"BufferGeometry":case"InstancedBufferGeometry":_e=xe.parse(Ee);break;default:Ee.type in Geometries?_e=Geometries[Ee.type].fromJSON(Ee,me):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${Ee.type}"`)}_e.uuid=Ee.uuid,Ee.name!==void 0&&(_e.name=Ee.name),Ee.userData!==void 0&&(_e.userData=Ee.userData),ge[Ee.uuid]=_e}}return ge}parseMaterials(K,me){const ge={},xe={};if(K!==void 0){const ye=new MaterialLoader;ye.setTextures(me);for(let ve=0,_e=K.length;ve<_e;ve++){const Ee=K[ve];ge[Ee.uuid]===void 0&&(ge[Ee.uuid]=ye.parse(Ee)),xe[Ee.uuid]=ge[Ee.uuid]}}return xe}parseAnimations(K){const me={};if(K!==void 0)for(let ge=0;ge<K.length;ge++){const xe=K[ge],ye=AnimationClip.parse(xe);me[ye.uuid]=ye}return me}parseImages(K,me){const ge=this,xe={};let ye;function ve(Ee){return ge.manager.itemStart(Ee),ye.load(Ee,function(){ge.manager.itemEnd(Ee)},void 0,function(){ge.manager.itemError(Ee),ge.manager.itemEnd(Ee)})}function _e(Ee){if(typeof Ee=="string"){const be=Ee,Ae=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(be)?be:ge.resourcePath+be;return ve(Ae)}else return Ee.data?{data:getTypedArray(Ee.type,Ee.data),width:Ee.width,height:Ee.height}:null}if(K!==void 0&&K.length>0){const Ee=new LoadingManager(me);ye=new ImageLoader(Ee),ye.setCrossOrigin(this.crossOrigin);for(let be=0,Ae=K.length;be<Ae;be++){const Se=K[be],Ce=Se.url;if(Array.isArray(Ce)){const Te=[];for(let Re=0,De=Ce.length;Re<De;Re++){const Ie=Ce[Re],Be=_e(Ie);Be!==null&&(Be instanceof HTMLImageElement?Te.push(Be):Te.push(new DataTexture(Be.data,Be.width,Be.height)))}xe[Se.uuid]=new Source(Te)}else{const Te=_e(Se.url);xe[Se.uuid]=new Source(Te)}}}return xe}async parseImagesAsync(K){const me=this,ge={};let xe;async function ye(ve){if(typeof ve=="string"){const _e=ve,Ee=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(_e)?_e:me.resourcePath+_e;return await xe.loadAsync(Ee)}else return ve.data?{data:getTypedArray(ve.type,ve.data),width:ve.width,height:ve.height}:null}if(K!==void 0&&K.length>0){xe=new ImageLoader(this.manager),xe.setCrossOrigin(this.crossOrigin);for(let ve=0,_e=K.length;ve<_e;ve++){const Ee=K[ve],be=Ee.url;if(Array.isArray(be)){const Ae=[];for(let Se=0,Ce=be.length;Se<Ce;Se++){const Te=be[Se],Re=await ye(Te);Re!==null&&(Re instanceof HTMLImageElement?Ae.push(Re):Ae.push(new DataTexture(Re.data,Re.width,Re.height)))}ge[Ee.uuid]=new Source(Ae)}else{const Ae=await ye(Ee.url);ge[Ee.uuid]=new Source(Ae)}}}return ge}parseTextures(K,me){function ge(ye,ve){return typeof ye=="number"?ye:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",ye),ve[ye])}const xe={};if(K!==void 0)for(let ye=0,ve=K.length;ye<ve;ye++){const _e=K[ye];_e.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',_e.uuid),me[_e.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",_e.image);const Ee=me[_e.image],be=Ee.data;let Ae;Array.isArray(be)?(Ae=new CubeTexture,be.length===6&&(Ae.needsUpdate=!0)):(be&&be.data?Ae=new DataTexture:Ae=new Texture,be&&(Ae.needsUpdate=!0)),Ae.source=Ee,Ae.uuid=_e.uuid,_e.name!==void 0&&(Ae.name=_e.name),_e.mapping!==void 0&&(Ae.mapping=ge(_e.mapping,TEXTURE_MAPPING)),_e.channel!==void 0&&(Ae.channel=_e.channel),_e.offset!==void 0&&Ae.offset.fromArray(_e.offset),_e.repeat!==void 0&&Ae.repeat.fromArray(_e.repeat),_e.center!==void 0&&Ae.center.fromArray(_e.center),_e.rotation!==void 0&&(Ae.rotation=_e.rotation),_e.wrap!==void 0&&(Ae.wrapS=ge(_e.wrap[0],TEXTURE_WRAPPING),Ae.wrapT=ge(_e.wrap[1],TEXTURE_WRAPPING)),_e.format!==void 0&&(Ae.format=_e.format),_e.internalFormat!==void 0&&(Ae.internalFormat=_e.internalFormat),_e.type!==void 0&&(Ae.type=_e.type),_e.colorSpace!==void 0&&(Ae.colorSpace=_e.colorSpace),_e.minFilter!==void 0&&(Ae.minFilter=ge(_e.minFilter,TEXTURE_FILTER)),_e.magFilter!==void 0&&(Ae.magFilter=ge(_e.magFilter,TEXTURE_FILTER)),_e.anisotropy!==void 0&&(Ae.anisotropy=_e.anisotropy),_e.flipY!==void 0&&(Ae.flipY=_e.flipY),_e.generateMipmaps!==void 0&&(Ae.generateMipmaps=_e.generateMipmaps),_e.premultiplyAlpha!==void 0&&(Ae.premultiplyAlpha=_e.premultiplyAlpha),_e.unpackAlignment!==void 0&&(Ae.unpackAlignment=_e.unpackAlignment),_e.compareFunction!==void 0&&(Ae.compareFunction=_e.compareFunction),_e.userData!==void 0&&(Ae.userData=_e.userData),xe[_e.uuid]=Ae}return xe}parseObject(K,me,ge,xe,ye){let ve;function _e(Ce){return me[Ce]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",Ce),me[Ce]}function Ee(Ce){if(Ce!==void 0){if(Array.isArray(Ce)){const Te=[];for(let Re=0,De=Ce.length;Re<De;Re++){const Ie=Ce[Re];ge[Ie]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ie),Te.push(ge[Ie])}return Te}return ge[Ce]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",Ce),ge[Ce]}}function be(Ce){return xe[Ce]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",Ce),xe[Ce]}let Ae,Se;switch(K.type){case"Scene":ve=new Scene,K.background!==void 0&&(Number.isInteger(K.background)?ve.background=new Color$1(K.background):ve.background=be(K.background)),K.environment!==void 0&&(ve.environment=be(K.environment)),K.fog!==void 0&&(K.fog.type==="Fog"?ve.fog=new Fog(K.fog.color,K.fog.near,K.fog.far):K.fog.type==="FogExp2"&&(ve.fog=new FogExp2(K.fog.color,K.fog.density)),K.fog.name!==""&&(ve.fog.name=K.fog.name)),K.backgroundBlurriness!==void 0&&(ve.backgroundBlurriness=K.backgroundBlurriness),K.backgroundIntensity!==void 0&&(ve.backgroundIntensity=K.backgroundIntensity),K.backgroundRotation!==void 0&&ve.backgroundRotation.fromArray(K.backgroundRotation),K.environmentIntensity!==void 0&&(ve.environmentIntensity=K.environmentIntensity),K.environmentRotation!==void 0&&ve.environmentRotation.fromArray(K.environmentRotation);break;case"PerspectiveCamera":ve=new PerspectiveCamera(K.fov,K.aspect,K.near,K.far),K.focus!==void 0&&(ve.focus=K.focus),K.zoom!==void 0&&(ve.zoom=K.zoom),K.filmGauge!==void 0&&(ve.filmGauge=K.filmGauge),K.filmOffset!==void 0&&(ve.filmOffset=K.filmOffset),K.view!==void 0&&(ve.view=Object.assign({},K.view));break;case"OrthographicCamera":ve=new OrthographicCamera(K.left,K.right,K.top,K.bottom,K.near,K.far),K.zoom!==void 0&&(ve.zoom=K.zoom),K.view!==void 0&&(ve.view=Object.assign({},K.view));break;case"AmbientLight":ve=new AmbientLight(K.color,K.intensity);break;case"DirectionalLight":ve=new DirectionalLight(K.color,K.intensity),ve.target=K.target||"";break;case"PointLight":ve=new PointLight(K.color,K.intensity,K.distance,K.decay);break;case"RectAreaLight":ve=new RectAreaLight(K.color,K.intensity,K.width,K.height);break;case"SpotLight":ve=new SpotLight(K.color,K.intensity,K.distance,K.angle,K.penumbra,K.decay),ve.target=K.target||"";break;case"HemisphereLight":ve=new HemisphereLight(K.color,K.groundColor,K.intensity);break;case"LightProbe":ve=new LightProbe().fromJSON(K);break;case"SkinnedMesh":Ae=_e(K.geometry),Se=Ee(K.material),ve=new SkinnedMesh$1(Ae,Se),K.bindMode!==void 0&&(ve.bindMode=K.bindMode),K.bindMatrix!==void 0&&ve.bindMatrix.fromArray(K.bindMatrix),K.skeleton!==void 0&&(ve.skeleton=K.skeleton);break;case"Mesh":Ae=_e(K.geometry),Se=Ee(K.material),ve=new Mesh(Ae,Se);break;case"InstancedMesh":Ae=_e(K.geometry),Se=Ee(K.material);const Ce=K.count,Te=K.instanceMatrix,Re=K.instanceColor;ve=new InstancedMesh(Ae,Se,Ce),ve.instanceMatrix=new InstancedBufferAttribute(new Float32Array(Te.array),16),Re!==void 0&&(ve.instanceColor=new InstancedBufferAttribute(new Float32Array(Re.array),Re.itemSize));break;case"BatchedMesh":Ae=_e(K.geometry),Se=Ee(K.material),ve=new BatchedMesh$1(K.maxInstanceCount,K.maxVertexCount,K.maxIndexCount,Se),ve.geometry=Ae,ve.perObjectFrustumCulled=K.perObjectFrustumCulled,ve.sortObjects=K.sortObjects,ve._drawRanges=K.drawRanges,ve._reservedRanges=K.reservedRanges,ve._visibility=K.visibility,ve._active=K.active,ve._bounds=K.bounds.map(De=>{const Ie=new Box3;Ie.min.fromArray(De.boxMin),Ie.max.fromArray(De.boxMax);const Be=new Sphere;return Be.radius=De.sphereRadius,Be.center.fromArray(De.sphereCenter),{boxInitialized:De.boxInitialized,box:Ie,sphereInitialized:De.sphereInitialized,sphere:Be}}),ve._maxInstanceCount=K.maxInstanceCount,ve._maxVertexCount=K.maxVertexCount,ve._maxIndexCount=K.maxIndexCount,ve._geometryInitialized=K.geometryInitialized,ve._geometryCount=K.geometryCount,ve._matricesTexture=be(K.matricesTexture.uuid),K.colorsTexture!==void 0&&(ve._colorsTexture=be(K.colorsTexture.uuid));break;case"LOD":ve=new LOD;break;case"Line":ve=new Line$2(_e(K.geometry),Ee(K.material));break;case"LineLoop":ve=new LineLoop(_e(K.geometry),Ee(K.material));break;case"LineSegments":ve=new LineSegments(_e(K.geometry),Ee(K.material));break;case"PointCloud":case"Points":ve=new Points(_e(K.geometry),Ee(K.material));break;case"Sprite":ve=new Sprite(Ee(K.material));break;case"Group":ve=new Group;break;case"Bone":ve=new Bone;break;default:ve=new Object3D}if(ve.uuid=K.uuid,K.name!==void 0&&(ve.name=K.name),K.matrix!==void 0?(ve.matrix.fromArray(K.matrix),K.matrixAutoUpdate!==void 0&&(ve.matrixAutoUpdate=K.matrixAutoUpdate),ve.matrixAutoUpdate&&ve.matrix.decompose(ve.position,ve.quaternion,ve.scale)):(K.position!==void 0&&ve.position.fromArray(K.position),K.rotation!==void 0&&ve.rotation.fromArray(K.rotation),K.quaternion!==void 0&&ve.quaternion.fromArray(K.quaternion),K.scale!==void 0&&ve.scale.fromArray(K.scale)),K.up!==void 0&&ve.up.fromArray(K.up),K.castShadow!==void 0&&(ve.castShadow=K.castShadow),K.receiveShadow!==void 0&&(ve.receiveShadow=K.receiveShadow),K.shadow&&(K.shadow.intensity!==void 0&&(ve.shadow.intensity=K.shadow.intensity),K.shadow.bias!==void 0&&(ve.shadow.bias=K.shadow.bias),K.shadow.normalBias!==void 0&&(ve.shadow.normalBias=K.shadow.normalBias),K.shadow.radius!==void 0&&(ve.shadow.radius=K.shadow.radius),K.shadow.mapSize!==void 0&&ve.shadow.mapSize.fromArray(K.shadow.mapSize),K.shadow.camera!==void 0&&(ve.shadow.camera=this.parseObject(K.shadow.camera))),K.visible!==void 0&&(ve.visible=K.visible),K.frustumCulled!==void 0&&(ve.frustumCulled=K.frustumCulled),K.renderOrder!==void 0&&(ve.renderOrder=K.renderOrder),K.userData!==void 0&&(ve.userData=K.userData),K.layers!==void 0&&(ve.layers.mask=K.layers),K.children!==void 0){const Ce=K.children;for(let Te=0;Te<Ce.length;Te++)ve.add(this.parseObject(Ce[Te],me,ge,xe,ye))}if(K.animations!==void 0){const Ce=K.animations;for(let Te=0;Te<Ce.length;Te++){const Re=Ce[Te];ve.animations.push(ye[Re])}}if(K.type==="LOD"){K.autoUpdate!==void 0&&(ve.autoUpdate=K.autoUpdate);const Ce=K.levels;for(let Te=0;Te<Ce.length;Te++){const Re=Ce[Te],De=ve.getObjectByProperty("uuid",Re.object);De!==void 0&&ve.addLevel(De,Re.distance,Re.hysteresis)}}return ve}bindSkeletons(K,me){Object.keys(me).length!==0&&K.traverse(function(ge){if(ge.isSkinnedMesh===!0&&ge.skeleton!==void 0){const xe=me[ge.skeleton];xe===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",ge.skeleton):ge.bind(xe,ge.bindMatrix)}})}bindLightTargets(K){K.traverse(function(me){if(me.isDirectionalLight||me.isSpotLight){const ge=me.target,xe=K.getObjectByProperty("uuid",ge);xe!==void 0?me.target=xe:me.target=new Object3D}})}}const TEXTURE_MAPPING={UVMapping,CubeReflectionMapping,CubeRefractionMapping,EquirectangularReflectionMapping,EquirectangularRefractionMapping,CubeUVReflectionMapping},TEXTURE_WRAPPING={RepeatWrapping,ClampToEdgeWrapping,MirroredRepeatWrapping},TEXTURE_FILTER={NearestFilter,NearestMipmapNearestFilter,NearestMipmapLinearFilter,LinearFilter,LinearMipmapNearestFilter,LinearMipmapLinearFilter};class ImageBitmapLoader extends Loader{constructor(K){super(K),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(K){return this.options=K,this}load(K,me,ge,xe){K===void 0&&(K=""),this.path!==void 0&&(K=this.path+K),K=this.manager.resolveURL(K);const ye=this,ve=Cache.get(K);if(ve!==void 0){if(ye.manager.itemStart(K),ve.then){ve.then(be=>{me&&me(be),ye.manager.itemEnd(K)}).catch(be=>{xe&&xe(be)});return}return setTimeout(function(){me&&me(ve),ye.manager.itemEnd(K)},0),ve}const _e={};_e.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",_e.headers=this.requestHeader;const Ee=fetch(K,_e).then(function(be){return be.blob()}).then(function(be){return createImageBitmap(be,Object.assign(ye.options,{colorSpaceConversion:"none"}))}).then(function(be){return Cache.add(K,be),me&&me(be),ye.manager.itemEnd(K),be}).catch(function(be){xe&&xe(be),Cache.remove(K),ye.manager.itemError(K),ye.manager.itemEnd(K)});Cache.add(K,Ee),ye.manager.itemStart(K)}}let _context;class AudioContext{static getContext(){return _context===void 0&&(_context=new(window.AudioContext||window.webkitAudioContext)),_context}static setContext(K){_context=K}}class AudioLoader extends Loader{constructor(K){super(K)}load(K,me,ge,xe){const ye=this,ve=new FileLoader(this.manager);ve.setResponseType("arraybuffer"),ve.setPath(this.path),ve.setRequestHeader(this.requestHeader),ve.setWithCredentials(this.withCredentials),ve.load(K,function(Ee){try{const be=Ee.slice(0);AudioContext.getContext().decodeAudioData(be,function(Se){me(Se)}).catch(_e)}catch(be){_e(be)}},ge,xe);function _e(Ee){xe?xe(Ee):console.error(Ee),ye.manager.itemError(K)}}}const _eyeRight=new Matrix4,_eyeLeft=new Matrix4,_projectionMatrix=new Matrix4;class StereoCamera{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new PerspectiveCamera,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new PerspectiveCamera,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(K){const me=this._cache;if(me.focus!==K.focus||me.fov!==K.fov||me.aspect!==K.aspect*this.aspect||me.near!==K.near||me.far!==K.far||me.zoom!==K.zoom||me.eyeSep!==this.eyeSep){me.focus=K.focus,me.fov=K.fov,me.aspect=K.aspect*this.aspect,me.near=K.near,me.far=K.far,me.zoom=K.zoom,me.eyeSep=this.eyeSep,_projectionMatrix.copy(K.projectionMatrix);const xe=me.eyeSep/2,ye=xe*me.near/me.focus,ve=me.near*Math.tan(DEG2RAD$1*me.fov*.5)/me.zoom;let _e,Ee;_eyeLeft.elements[12]=-xe,_eyeRight.elements[12]=xe,_e=-ve*me.aspect+ye,Ee=ve*me.aspect+ye,_projectionMatrix.elements[0]=2*me.near/(Ee-_e),_projectionMatrix.elements[8]=(Ee+_e)/(Ee-_e),this.cameraL.projectionMatrix.copy(_projectionMatrix),_e=-ve*me.aspect-ye,Ee=ve*me.aspect-ye,_projectionMatrix.elements[0]=2*me.near/(Ee-_e),_projectionMatrix.elements[8]=(Ee+_e)/(Ee-_e),this.cameraR.projectionMatrix.copy(_projectionMatrix)}this.cameraL.matrixWorld.copy(K.matrixWorld).multiply(_eyeLeft),this.cameraR.matrixWorld.copy(K.matrixWorld).multiply(_eyeRight)}}class ArrayCamera extends PerspectiveCamera{constructor(K=[]){super(),this.isArrayCamera=!0,this.cameras=K,this.index=0}}class Clock{constructor(K=!0){this.autoStart=K,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let K=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const me=now();K=(me-this.oldTime)/1e3,this.oldTime=me,this.elapsedTime+=K}return K}}function now(){return performance.now()}const _position$1=new Vector3,_quaternion$1=new Quaternion,_scale$1=new Vector3,_orientation$1=new Vector3;class AudioListener extends Object3D{constructor(){super(),this.type="AudioListener",this.context=AudioContext.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Clock}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(K){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=K,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(K){return this.gain.gain.setTargetAtTime(K,this.context.currentTime,.01),this}updateMatrixWorld(K){super.updateMatrixWorld(K);const me=this.context.listener,ge=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(_position$1,_quaternion$1,_scale$1),_orientation$1.set(0,0,-1).applyQuaternion(_quaternion$1),me.positionX){const xe=this.context.currentTime+this.timeDelta;me.positionX.linearRampToValueAtTime(_position$1.x,xe),me.positionY.linearRampToValueAtTime(_position$1.y,xe),me.positionZ.linearRampToValueAtTime(_position$1.z,xe),me.forwardX.linearRampToValueAtTime(_orientation$1.x,xe),me.forwardY.linearRampToValueAtTime(_orientation$1.y,xe),me.forwardZ.linearRampToValueAtTime(_orientation$1.z,xe),me.upX.linearRampToValueAtTime(ge.x,xe),me.upY.linearRampToValueAtTime(ge.y,xe),me.upZ.linearRampToValueAtTime(ge.z,xe)}else me.setPosition(_position$1.x,_position$1.y,_position$1.z),me.setOrientation(_orientation$1.x,_orientation$1.y,_orientation$1.z,ge.x,ge.y,ge.z)}}class Audio extends Object3D{constructor(K){super(),this.type="Audio",this.listener=K,this.context=K.context,this.gain=this.context.createGain(),this.gain.connect(K.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(K){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=K,this.connect(),this}setMediaElementSource(K){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(K),this.connect(),this}setMediaStreamSource(K){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(K),this.connect(),this}setBuffer(K){return this.buffer=K,this.sourceType="buffer",this.autoplay&&this.play(),this}play(K=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+K;const me=this.context.createBufferSource();return me.buffer=this.buffer,me.loop=this.loop,me.loopStart=this.loopStart,me.loopEnd=this.loopEnd,me.onended=this.onEnded.bind(this),me.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=me,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(K=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+K),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let K=1,me=this.filters.length;K<me;K++)this.filters[K-1].connect(this.filters[K]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let K=1,me=this.filters.length;K<me;K++)this.filters[K-1].disconnect(this.filters[K]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(K){return K||(K=[]),this._connected===!0?(this.disconnect(),this.filters=K.slice(),this.connect()):this.filters=K.slice(),this}setDetune(K){return this.detune=K,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(K){return this.setFilters(K?[K]:[])}setPlaybackRate(K){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=K,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(K){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=K,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(K){return this.loopStart=K,this}setLoopEnd(K){return this.loopEnd=K,this}getVolume(){return this.gain.gain.value}setVolume(K){return this.gain.gain.setTargetAtTime(K,this.context.currentTime,.01),this}copy(K,me){return super.copy(K,me),K.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=K.autoplay,this.buffer=K.buffer,this.detune=K.detune,this.loop=K.loop,this.loopStart=K.loopStart,this.loopEnd=K.loopEnd,this.offset=K.offset,this.duration=K.duration,this.playbackRate=K.playbackRate,this.hasPlaybackControl=K.hasPlaybackControl,this.sourceType=K.sourceType,this.filters=K.filters.slice(),this)}clone(K){return new this.constructor(this.listener).copy(this,K)}}const _position=new Vector3,_quaternion=new Quaternion,_scale=new Vector3,_orientation=new Vector3;class PositionalAudio extends Audio{constructor(K){super(K),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(K){return this.panner.refDistance=K,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(K){return this.panner.rolloffFactor=K,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(K){return this.panner.distanceModel=K,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(K){return this.panner.maxDistance=K,this}setDirectionalCone(K,me,ge){return this.panner.coneInnerAngle=K,this.panner.coneOuterAngle=me,this.panner.coneOuterGain=ge,this}updateMatrixWorld(K){if(super.updateMatrixWorld(K),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(_position,_quaternion,_scale),_orientation.set(0,0,1).applyQuaternion(_quaternion);const me=this.panner;if(me.positionX){const ge=this.context.currentTime+this.listener.timeDelta;me.positionX.linearRampToValueAtTime(_position.x,ge),me.positionY.linearRampToValueAtTime(_position.y,ge),me.positionZ.linearRampToValueAtTime(_position.z,ge),me.orientationX.linearRampToValueAtTime(_orientation.x,ge),me.orientationY.linearRampToValueAtTime(_orientation.y,ge),me.orientationZ.linearRampToValueAtTime(_orientation.z,ge)}else me.setPosition(_position.x,_position.y,_position.z),me.setOrientation(_orientation.x,_orientation.y,_orientation.z)}}class AudioAnalyser{constructor(K,me=2048){this.analyser=K.context.createAnalyser(),this.analyser.fftSize=me,this.data=new Uint8Array(this.analyser.frequencyBinCount),K.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let K=0;const me=this.getFrequencyData();for(let ge=0;ge<me.length;ge++)K+=me[ge];return K/me.length}}class PropertyMixer{constructor(K,me,ge){this.binding=K,this.valueSize=ge;let xe,ye,ve;switch(me){case"quaternion":xe=this._slerp,ye=this._slerpAdditive,ve=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(ge*6),this._workIndex=5;break;case"string":case"bool":xe=this._select,ye=this._select,ve=this._setAdditiveIdentityOther,this.buffer=new Array(ge*5);break;default:xe=this._lerp,ye=this._lerpAdditive,ve=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(ge*5)}this._mixBufferRegion=xe,this._mixBufferRegionAdditive=ye,this._setIdentity=ve,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(K,me){const ge=this.buffer,xe=this.valueSize,ye=K*xe+xe;let ve=this.cumulativeWeight;if(ve===0){for(let _e=0;_e!==xe;++_e)ge[ye+_e]=ge[_e];ve=me}else{ve+=me;const _e=me/ve;this._mixBufferRegion(ge,ye,0,_e,xe)}this.cumulativeWeight=ve}accumulateAdditive(K){const me=this.buffer,ge=this.valueSize,xe=ge*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(me,xe,0,K,ge),this.cumulativeWeightAdditive+=K}apply(K){const me=this.valueSize,ge=this.buffer,xe=K*me+me,ye=this.cumulativeWeight,ve=this.cumulativeWeightAdditive,_e=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,ye<1){const Ee=me*this._origIndex;this._mixBufferRegion(ge,xe,Ee,1-ye,me)}ve>0&&this._mixBufferRegionAdditive(ge,xe,this._addIndex*me,1,me);for(let Ee=me,be=me+me;Ee!==be;++Ee)if(ge[Ee]!==ge[Ee+me]){_e.setValue(ge,xe);break}}saveOriginalState(){const K=this.binding,me=this.buffer,ge=this.valueSize,xe=ge*this._origIndex;K.getValue(me,xe);for(let ye=ge,ve=xe;ye!==ve;++ye)me[ye]=me[xe+ye%ge];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const K=this.valueSize*3;this.binding.setValue(this.buffer,K)}_setAdditiveIdentityNumeric(){const K=this._addIndex*this.valueSize,me=K+this.valueSize;for(let ge=K;ge<me;ge++)this.buffer[ge]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const K=this._origIndex*this.valueSize,me=this._addIndex*this.valueSize;for(let ge=0;ge<this.valueSize;ge++)this.buffer[me+ge]=this.buffer[K+ge]}_select(K,me,ge,xe,ye){if(xe>=.5)for(let ve=0;ve!==ye;++ve)K[me+ve]=K[ge+ve]}_slerp(K,me,ge,xe){Quaternion.slerpFlat(K,me,K,me,K,ge,xe)}_slerpAdditive(K,me,ge,xe,ye){const ve=this._workIndex*ye;Quaternion.multiplyQuaternionsFlat(K,ve,K,me,K,ge),Quaternion.slerpFlat(K,me,K,me,K,ve,xe)}_lerp(K,me,ge,xe,ye){const ve=1-xe;for(let _e=0;_e!==ye;++_e){const Ee=me+_e;K[Ee]=K[Ee]*ve+K[ge+_e]*xe}}_lerpAdditive(K,me,ge,xe,ye){for(let ve=0;ve!==ye;++ve){const _e=me+ve;K[_e]=K[_e]+K[ge+ve]*xe}}}const _RESERVED_CHARS_RE="\\[\\]\\.:\\/",_reservedRe=new RegExp("["+_RESERVED_CHARS_RE+"]","g"),_wordChar="[^"+_RESERVED_CHARS_RE+"]",_wordCharOrDot="[^"+_RESERVED_CHARS_RE.replace("\\.","")+"]",_directoryRe=/((?:WC+[\/:])*)/.source.replace("WC",_wordChar),_nodeRe=/(WCOD+)?/.source.replace("WCOD",_wordCharOrDot),_objectRe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",_wordChar),_propertyRe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",_wordChar),_trackRe=new RegExp("^"+_directoryRe+_nodeRe+_objectRe+_propertyRe+"$"),_supportedObjectNames=["material","materials","bones","map"];class Composite{constructor(K,me,ge){const xe=ge||PropertyBinding.parseTrackName(me);this._targetGroup=K,this._bindings=K.subscribe_(me,xe)}getValue(K,me){this.bind();const ge=this._targetGroup.nCachedObjects_,xe=this._bindings[ge];xe!==void 0&&xe.getValue(K,me)}setValue(K,me){const ge=this._bindings;for(let xe=this._targetGroup.nCachedObjects_,ye=ge.length;xe!==ye;++xe)ge[xe].setValue(K,me)}bind(){const K=this._bindings;for(let me=this._targetGroup.nCachedObjects_,ge=K.length;me!==ge;++me)K[me].bind()}unbind(){const K=this._bindings;for(let me=this._targetGroup.nCachedObjects_,ge=K.length;me!==ge;++me)K[me].unbind()}}class PropertyBinding{constructor(K,me,ge){this.path=me,this.parsedPath=ge||PropertyBinding.parseTrackName(me),this.node=PropertyBinding.findNode(K,this.parsedPath.nodeName),this.rootNode=K,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(K,me,ge){return K&&K.isAnimationObjectGroup?new PropertyBinding.Composite(K,me,ge):new PropertyBinding(K,me,ge)}static sanitizeNodeName(K){return K.replace(/\s/g,"_").replace(_reservedRe,"")}static parseTrackName(K){const me=_trackRe.exec(K);if(me===null)throw new Error("PropertyBinding: Cannot parse trackName: "+K);const ge={nodeName:me[2],objectName:me[3],objectIndex:me[4],propertyName:me[5],propertyIndex:me[6]},xe=ge.nodeName&&ge.nodeName.lastIndexOf(".");if(xe!==void 0&&xe!==-1){const ye=ge.nodeName.substring(xe+1);_supportedObjectNames.indexOf(ye)!==-1&&(ge.nodeName=ge.nodeName.substring(0,xe),ge.objectName=ye)}if(ge.propertyName===null||ge.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+K);return ge}static findNode(K,me){if(me===void 0||me===""||me==="."||me===-1||me===K.name||me===K.uuid)return K;if(K.skeleton){const ge=K.skeleton.getBoneByName(me);if(ge!==void 0)return ge}if(K.children){const ge=function(ye){for(let ve=0;ve<ye.length;ve++){const _e=ye[ve];if(_e.name===me||_e.uuid===me)return _e;const Ee=ge(_e.children);if(Ee)return Ee}return null},xe=ge(K.children);if(xe)return xe}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(K,me){K[me]=this.targetObject[this.propertyName]}_getValue_array(K,me){const ge=this.resolvedProperty;for(let xe=0,ye=ge.length;xe!==ye;++xe)K[me++]=ge[xe]}_getValue_arrayElement(K,me){K[me]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(K,me){this.resolvedProperty.toArray(K,me)}_setValue_direct(K,me){this.targetObject[this.propertyName]=K[me]}_setValue_direct_setNeedsUpdate(K,me){this.targetObject[this.propertyName]=K[me],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(K,me){this.targetObject[this.propertyName]=K[me],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(K,me){const ge=this.resolvedProperty;for(let xe=0,ye=ge.length;xe!==ye;++xe)ge[xe]=K[me++]}_setValue_array_setNeedsUpdate(K,me){const ge=this.resolvedProperty;for(let xe=0,ye=ge.length;xe!==ye;++xe)ge[xe]=K[me++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(K,me){const ge=this.resolvedProperty;for(let xe=0,ye=ge.length;xe!==ye;++xe)ge[xe]=K[me++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(K,me){this.resolvedProperty[this.propertyIndex]=K[me]}_setValue_arrayElement_setNeedsUpdate(K,me){this.resolvedProperty[this.propertyIndex]=K[me],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(K,me){this.resolvedProperty[this.propertyIndex]=K[me],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(K,me){this.resolvedProperty.fromArray(K,me)}_setValue_fromArray_setNeedsUpdate(K,me){this.resolvedProperty.fromArray(K,me),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(K,me){this.resolvedProperty.fromArray(K,me),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(K,me){this.bind(),this.getValue(K,me)}_setValue_unbound(K,me){this.bind(),this.setValue(K,me)}bind(){let K=this.node;const me=this.parsedPath,ge=me.objectName,xe=me.propertyName;let ye=me.propertyIndex;if(K||(K=PropertyBinding.findNode(this.rootNode,me.nodeName),this.node=K),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!K){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(ge){let be=me.objectIndex;switch(ge){case"materials":if(!K.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!K.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}K=K.material.materials;break;case"bones":if(!K.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}K=K.skeleton.bones;for(let Ae=0;Ae<K.length;Ae++)if(K[Ae].name===be){be=Ae;break}break;case"map":if("map"in K){K=K.map;break}if(!K.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!K.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}K=K.material.map;break;default:if(K[ge]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}K=K[ge]}if(be!==void 0){if(K[be]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,K);return}K=K[be]}}const ve=K[xe];if(ve===void 0){const be=me.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+be+"."+xe+" but it wasn't found.",K);return}let _e=this.Versioning.None;this.targetObject=K,K.isMaterial===!0?_e=this.Versioning.NeedsUpdate:K.isObject3D===!0&&(_e=this.Versioning.MatrixWorldNeedsUpdate);let Ee=this.BindingType.Direct;if(ye!==void 0){if(xe==="morphTargetInfluences"){if(!K.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!K.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}K.morphTargetDictionary[ye]!==void 0&&(ye=K.morphTargetDictionary[ye])}Ee=this.BindingType.ArrayElement,this.resolvedProperty=ve,this.propertyIndex=ye}else ve.fromArray!==void 0&&ve.toArray!==void 0?(Ee=this.BindingType.HasFromToArray,this.resolvedProperty=ve):Array.isArray(ve)?(Ee=this.BindingType.EntireArray,this.resolvedProperty=ve):this.propertyName=xe;this.getValue=this.GetterByBindingType[Ee],this.setValue=this.SetterByBindingTypeAndVersioning[Ee][_e]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=Composite;PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray];PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class AnimationObjectGroup{constructor(){this.isAnimationObjectGroup=!0,this.uuid=generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const K={};this._indicesByUUID=K;for(let ge=0,xe=arguments.length;ge!==xe;++ge)K[arguments[ge].uuid]=ge;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const me=this;this.stats={objects:{get total(){return me._objects.length},get inUse(){return this.total-me.nCachedObjects_}},get bindingsPerObject(){return me._bindings.length}}}add(){const K=this._objects,me=this._indicesByUUID,ge=this._paths,xe=this._parsedPaths,ye=this._bindings,ve=ye.length;let _e,Ee=K.length,be=this.nCachedObjects_;for(let Ae=0,Se=arguments.length;Ae!==Se;++Ae){const Ce=arguments[Ae],Te=Ce.uuid;let Re=me[Te];if(Re===void 0){Re=Ee++,me[Te]=Re,K.push(Ce);for(let De=0,Ie=ve;De!==Ie;++De)ye[De].push(new PropertyBinding(Ce,ge[De],xe[De]))}else if(Re<be){_e=K[Re];const De=--be,Ie=K[De];me[Ie.uuid]=Re,K[Re]=Ie,me[Te]=De,K[De]=Ce;for(let Be=0,Le=ve;Be!==Le;++Be){const Oe=ye[Be],Fe=Oe[De];let Ue=Oe[Re];Oe[Re]=Fe,Ue===void 0&&(Ue=new PropertyBinding(Ce,ge[Be],xe[Be])),Oe[De]=Ue}}else K[Re]!==_e&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=be}remove(){const K=this._objects,me=this._indicesByUUID,ge=this._bindings,xe=ge.length;let ye=this.nCachedObjects_;for(let ve=0,_e=arguments.length;ve!==_e;++ve){const Ee=arguments[ve],be=Ee.uuid,Ae=me[be];if(Ae!==void 0&&Ae>=ye){const Se=ye++,Ce=K[Se];me[Ce.uuid]=Ae,K[Ae]=Ce,me[be]=Se,K[Se]=Ee;for(let Te=0,Re=xe;Te!==Re;++Te){const De=ge[Te],Ie=De[Se],Be=De[Ae];De[Ae]=Ie,De[Se]=Be}}}this.nCachedObjects_=ye}uncache(){const K=this._objects,me=this._indicesByUUID,ge=this._bindings,xe=ge.length;let ye=this.nCachedObjects_,ve=K.length;for(let _e=0,Ee=arguments.length;_e!==Ee;++_e){const be=arguments[_e],Ae=be.uuid,Se=me[Ae];if(Se!==void 0)if(delete me[Ae],Se<ye){const Ce=--ye,Te=K[Ce],Re=--ve,De=K[Re];me[Te.uuid]=Se,K[Se]=Te,me[De.uuid]=Ce,K[Ce]=De,K.pop();for(let Ie=0,Be=xe;Ie!==Be;++Ie){const Le=ge[Ie],Oe=Le[Ce],Fe=Le[Re];Le[Se]=Oe,Le[Ce]=Fe,Le.pop()}}else{const Ce=--ve,Te=K[Ce];Ce>0&&(me[Te.uuid]=Se),K[Se]=Te,K.pop();for(let Re=0,De=xe;Re!==De;++Re){const Ie=ge[Re];Ie[Se]=Ie[Ce],Ie.pop()}}}this.nCachedObjects_=ye}subscribe_(K,me){const ge=this._bindingsIndicesByPath;let xe=ge[K];const ye=this._bindings;if(xe!==void 0)return ye[xe];const ve=this._paths,_e=this._parsedPaths,Ee=this._objects,be=Ee.length,Ae=this.nCachedObjects_,Se=new Array(be);xe=ye.length,ge[K]=xe,ve.push(K),_e.push(me),ye.push(Se);for(let Ce=Ae,Te=Ee.length;Ce!==Te;++Ce){const Re=Ee[Ce];Se[Ce]=new PropertyBinding(Re,K,me)}return Se}unsubscribe_(K){const me=this._bindingsIndicesByPath,ge=me[K];if(ge!==void 0){const xe=this._paths,ye=this._parsedPaths,ve=this._bindings,_e=ve.length-1,Ee=ve[_e],be=K[_e];me[be]=ge,ve[ge]=Ee,ve.pop(),ye[ge]=ye[_e],ye.pop(),xe[ge]=xe[_e],xe.pop()}}}class AnimationAction{constructor(K,me,ge=null,xe=me.blendMode){this._mixer=K,this._clip=me,this._localRoot=ge,this.blendMode=xe;const ye=me.tracks,ve=ye.length,_e=new Array(ve),Ee={endingStart:ZeroCurvatureEnding,endingEnd:ZeroCurvatureEnding};for(let be=0;be!==ve;++be){const Ae=ye[be].createInterpolant(null);_e[be]=Ae,Ae.settings=Ee}this._interpolantSettings=Ee,this._interpolants=_e,this._propertyBindings=new Array(ve),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=LoopRepeat,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(K){return this._startTime=K,this}setLoop(K,me){return this.loop=K,this.repetitions=me,this}setEffectiveWeight(K){return this.weight=K,this._effectiveWeight=this.enabled?K:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(K){return this._scheduleFading(K,0,1)}fadeOut(K){return this._scheduleFading(K,1,0)}crossFadeFrom(K,me,ge){if(K.fadeOut(me),this.fadeIn(me),ge){const xe=this._clip.duration,ye=K._clip.duration,ve=ye/xe,_e=xe/ye;K.warp(1,ve,me),this.warp(_e,1,me)}return this}crossFadeTo(K,me,ge){return K.crossFadeFrom(this,me,ge)}stopFading(){const K=this._weightInterpolant;return K!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(K)),this}setEffectiveTimeScale(K){return this.timeScale=K,this._effectiveTimeScale=this.paused?0:K,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(K){return this.timeScale=this._clip.duration/K,this.stopWarping()}syncWith(K){return this.time=K.time,this.timeScale=K.timeScale,this.stopWarping()}halt(K){return this.warp(this._effectiveTimeScale,0,K)}warp(K,me,ge){const xe=this._mixer,ye=xe.time,ve=this.timeScale;let _e=this._timeScaleInterpolant;_e===null&&(_e=xe._lendControlInterpolant(),this._timeScaleInterpolant=_e);const Ee=_e.parameterPositions,be=_e.sampleValues;return Ee[0]=ye,Ee[1]=ye+ge,be[0]=K/ve,be[1]=me/ve,this}stopWarping(){const K=this._timeScaleInterpolant;return K!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(K)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(K,me,ge,xe){if(!this.enabled){this._updateWeight(K);return}const ye=this._startTime;if(ye!==null){const Ee=(K-ye)*ge;Ee<0||ge===0?me=0:(this._startTime=null,me=ge*Ee)}me*=this._updateTimeScale(K);const ve=this._updateTime(me),_e=this._updateWeight(K);if(_e>0){const Ee=this._interpolants,be=this._propertyBindings;switch(this.blendMode){case AdditiveAnimationBlendMode:for(let Ae=0,Se=Ee.length;Ae!==Se;++Ae)Ee[Ae].evaluate(ve),be[Ae].accumulateAdditive(_e);break;case NormalAnimationBlendMode:default:for(let Ae=0,Se=Ee.length;Ae!==Se;++Ae)Ee[Ae].evaluate(ve),be[Ae].accumulate(xe,_e)}}}_updateWeight(K){let me=0;if(this.enabled){me=this.weight;const ge=this._weightInterpolant;if(ge!==null){const xe=ge.evaluate(K)[0];me*=xe,K>ge.parameterPositions[1]&&(this.stopFading(),xe===0&&(this.enabled=!1))}}return this._effectiveWeight=me,me}_updateTimeScale(K){let me=0;if(!this.paused){me=this.timeScale;const ge=this._timeScaleInterpolant;if(ge!==null){const xe=ge.evaluate(K)[0];me*=xe,K>ge.parameterPositions[1]&&(this.stopWarping(),me===0?this.paused=!0:this.timeScale=me)}}return this._effectiveTimeScale=me,me}_updateTime(K){const me=this._clip.duration,ge=this.loop;let xe=this.time+K,ye=this._loopCount;const ve=ge===LoopPingPong;if(K===0)return ye===-1?xe:ve&&(ye&1)===1?me-xe:xe;if(ge===LoopOnce){ye===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(xe>=me)xe=me;else if(xe<0)xe=0;else{this.time=xe;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=xe,this._mixer.dispatchEvent({type:"finished",action:this,direction:K<0?-1:1})}}else{if(ye===-1&&(K>=0?(ye=0,this._setEndings(!0,this.repetitions===0,ve)):this._setEndings(this.repetitions===0,!0,ve)),xe>=me||xe<0){const _e=Math.floor(xe/me);xe-=me*_e,ye+=Math.abs(_e);const Ee=this.repetitions-ye;if(Ee<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,xe=K>0?me:0,this.time=xe,this._mixer.dispatchEvent({type:"finished",action:this,direction:K>0?1:-1});else{if(Ee===1){const be=K<0;this._setEndings(be,!be,ve)}else this._setEndings(!1,!1,ve);this._loopCount=ye,this.time=xe,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:_e})}}else this.time=xe;if(ve&&(ye&1)===1)return me-xe}return xe}_setEndings(K,me,ge){const xe=this._interpolantSettings;ge?(xe.endingStart=ZeroSlopeEnding,xe.endingEnd=ZeroSlopeEnding):(K?xe.endingStart=this.zeroSlopeAtStart?ZeroSlopeEnding:ZeroCurvatureEnding:xe.endingStart=WrapAroundEnding,me?xe.endingEnd=this.zeroSlopeAtEnd?ZeroSlopeEnding:ZeroCurvatureEnding:xe.endingEnd=WrapAroundEnding)}_scheduleFading(K,me,ge){const xe=this._mixer,ye=xe.time;let ve=this._weightInterpolant;ve===null&&(ve=xe._lendControlInterpolant(),this._weightInterpolant=ve);const _e=ve.parameterPositions,Ee=ve.sampleValues;return _e[0]=ye,Ee[0]=me,_e[1]=ye+K,Ee[1]=ge,this}}const _controlInterpolantsResultBuffer=new Float32Array(1);class AnimationMixer extends EventDispatcher$2{constructor(K){super(),this._root=K,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(K,me){const ge=K._localRoot||this._root,xe=K._clip.tracks,ye=xe.length,ve=K._propertyBindings,_e=K._interpolants,Ee=ge.uuid,be=this._bindingsByRootAndName;let Ae=be[Ee];Ae===void 0&&(Ae={},be[Ee]=Ae);for(let Se=0;Se!==ye;++Se){const Ce=xe[Se],Te=Ce.name;let Re=Ae[Te];if(Re!==void 0)++Re.referenceCount,ve[Se]=Re;else{if(Re=ve[Se],Re!==void 0){Re._cacheIndex===null&&(++Re.referenceCount,this._addInactiveBinding(Re,Ee,Te));continue}const De=me&&me._propertyBindings[Se].binding.parsedPath;Re=new PropertyMixer(PropertyBinding.create(ge,Te,De),Ce.ValueTypeName,Ce.getValueSize()),++Re.referenceCount,this._addInactiveBinding(Re,Ee,Te),ve[Se]=Re}_e[Se].resultBuffer=Re.buffer}}_activateAction(K){if(!this._isActiveAction(K)){if(K._cacheIndex===null){const ge=(K._localRoot||this._root).uuid,xe=K._clip.uuid,ye=this._actionsByClip[xe];this._bindAction(K,ye&&ye.knownActions[0]),this._addInactiveAction(K,xe,ge)}const me=K._propertyBindings;for(let ge=0,xe=me.length;ge!==xe;++ge){const ye=me[ge];ye.useCount++===0&&(this._lendBinding(ye),ye.saveOriginalState())}this._lendAction(K)}}_deactivateAction(K){if(this._isActiveAction(K)){const me=K._propertyBindings;for(let ge=0,xe=me.length;ge!==xe;++ge){const ye=me[ge];--ye.useCount===0&&(ye.restoreOriginalState(),this._takeBackBinding(ye))}this._takeBackAction(K)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const K=this;this.stats={actions:{get total(){return K._actions.length},get inUse(){return K._nActiveActions}},bindings:{get total(){return K._bindings.length},get inUse(){return K._nActiveBindings}},controlInterpolants:{get total(){return K._controlInterpolants.length},get inUse(){return K._nActiveControlInterpolants}}}}_isActiveAction(K){const me=K._cacheIndex;return me!==null&&me<this._nActiveActions}_addInactiveAction(K,me,ge){const xe=this._actions,ye=this._actionsByClip;let ve=ye[me];if(ve===void 0)ve={knownActions:[K],actionByRoot:{}},K._byClipCacheIndex=0,ye[me]=ve;else{const _e=ve.knownActions;K._byClipCacheIndex=_e.length,_e.push(K)}K._cacheIndex=xe.length,xe.push(K),ve.actionByRoot[ge]=K}_removeInactiveAction(K){const me=this._actions,ge=me[me.length-1],xe=K._cacheIndex;ge._cacheIndex=xe,me[xe]=ge,me.pop(),K._cacheIndex=null;const ye=K._clip.uuid,ve=this._actionsByClip,_e=ve[ye],Ee=_e.knownActions,be=Ee[Ee.length-1],Ae=K._byClipCacheIndex;be._byClipCacheIndex=Ae,Ee[Ae]=be,Ee.pop(),K._byClipCacheIndex=null;const Se=_e.actionByRoot,Ce=(K._localRoot||this._root).uuid;delete Se[Ce],Ee.length===0&&delete ve[ye],this._removeInactiveBindingsForAction(K)}_removeInactiveBindingsForAction(K){const me=K._propertyBindings;for(let ge=0,xe=me.length;ge!==xe;++ge){const ye=me[ge];--ye.referenceCount===0&&this._removeInactiveBinding(ye)}}_lendAction(K){const me=this._actions,ge=K._cacheIndex,xe=this._nActiveActions++,ye=me[xe];K._cacheIndex=xe,me[xe]=K,ye._cacheIndex=ge,me[ge]=ye}_takeBackAction(K){const me=this._actions,ge=K._cacheIndex,xe=--this._nActiveActions,ye=me[xe];K._cacheIndex=xe,me[xe]=K,ye._cacheIndex=ge,me[ge]=ye}_addInactiveBinding(K,me,ge){const xe=this._bindingsByRootAndName,ye=this._bindings;let ve=xe[me];ve===void 0&&(ve={},xe[me]=ve),ve[ge]=K,K._cacheIndex=ye.length,ye.push(K)}_removeInactiveBinding(K){const me=this._bindings,ge=K.binding,xe=ge.rootNode.uuid,ye=ge.path,ve=this._bindingsByRootAndName,_e=ve[xe],Ee=me[me.length-1],be=K._cacheIndex;Ee._cacheIndex=be,me[be]=Ee,me.pop(),delete _e[ye],Object.keys(_e).length===0&&delete ve[xe]}_lendBinding(K){const me=this._bindings,ge=K._cacheIndex,xe=this._nActiveBindings++,ye=me[xe];K._cacheIndex=xe,me[xe]=K,ye._cacheIndex=ge,me[ge]=ye}_takeBackBinding(K){const me=this._bindings,ge=K._cacheIndex,xe=--this._nActiveBindings,ye=me[xe];K._cacheIndex=xe,me[xe]=K,ye._cacheIndex=ge,me[ge]=ye}_lendControlInterpolant(){const K=this._controlInterpolants,me=this._nActiveControlInterpolants++;let ge=K[me];return ge===void 0&&(ge=new LinearInterpolant(new Float32Array(2),new Float32Array(2),1,_controlInterpolantsResultBuffer),ge.__cacheIndex=me,K[me]=ge),ge}_takeBackControlInterpolant(K){const me=this._controlInterpolants,ge=K.__cacheIndex,xe=--this._nActiveControlInterpolants,ye=me[xe];K.__cacheIndex=xe,me[xe]=K,ye.__cacheIndex=ge,me[ge]=ye}clipAction(K,me,ge){const xe=me||this._root,ye=xe.uuid;let ve=typeof K=="string"?AnimationClip.findByName(xe,K):K;const _e=ve!==null?ve.uuid:K,Ee=this._actionsByClip[_e];let be=null;if(ge===void 0&&(ve!==null?ge=ve.blendMode:ge=NormalAnimationBlendMode),Ee!==void 0){const Se=Ee.actionByRoot[ye];if(Se!==void 0&&Se.blendMode===ge)return Se;be=Ee.knownActions[0],ve===null&&(ve=be._clip)}if(ve===null)return null;const Ae=new AnimationAction(this,ve,me,ge);return this._bindAction(Ae,be),this._addInactiveAction(Ae,_e,ye),Ae}existingAction(K,me){const ge=me||this._root,xe=ge.uuid,ye=typeof K=="string"?AnimationClip.findByName(ge,K):K,ve=ye?ye.uuid:K,_e=this._actionsByClip[ve];return _e!==void 0&&_e.actionByRoot[xe]||null}stopAllAction(){const K=this._actions,me=this._nActiveActions;for(let ge=me-1;ge>=0;--ge)K[ge].stop();return this}update(K){K*=this.timeScale;const me=this._actions,ge=this._nActiveActions,xe=this.time+=K,ye=Math.sign(K),ve=this._accuIndex^=1;for(let be=0;be!==ge;++be)me[be]._update(xe,K,ye,ve);const _e=this._bindings,Ee=this._nActiveBindings;for(let be=0;be!==Ee;++be)_e[be].apply(ve);return this}setTime(K){this.time=0;for(let me=0;me<this._actions.length;me++)this._actions[me].time=0;return this.update(K)}getRoot(){return this._root}uncacheClip(K){const me=this._actions,ge=K.uuid,xe=this._actionsByClip,ye=xe[ge];if(ye!==void 0){const ve=ye.knownActions;for(let _e=0,Ee=ve.length;_e!==Ee;++_e){const be=ve[_e];this._deactivateAction(be);const Ae=be._cacheIndex,Se=me[me.length-1];be._cacheIndex=null,be._byClipCacheIndex=null,Se._cacheIndex=Ae,me[Ae]=Se,me.pop(),this._removeInactiveBindingsForAction(be)}delete xe[ge]}}uncacheRoot(K){const me=K.uuid,ge=this._actionsByClip;for(const ve in ge){const _e=ge[ve].actionByRoot,Ee=_e[me];Ee!==void 0&&(this._deactivateAction(Ee),this._removeInactiveAction(Ee))}const xe=this._bindingsByRootAndName,ye=xe[me];if(ye!==void 0)for(const ve in ye){const _e=ye[ve];_e.restoreOriginalState(),this._removeInactiveBinding(_e)}}uncacheAction(K,me){const ge=this.existingAction(K,me);ge!==null&&(this._deactivateAction(ge),this._removeInactiveAction(ge))}}class RenderTarget3D extends RenderTarget{constructor(K=1,me=1,ge=1,xe={}){super(K,me,xe),this.isRenderTarget3D=!0,this.depth=ge,this.texture=new Data3DTexture(null,K,me,ge),this.texture.isRenderTargetTexture=!0}}class RenderTargetArray extends RenderTarget{constructor(K=1,me=1,ge=1,xe={}){super(K,me,xe),this.isRenderTargetArray=!0,this.depth=ge,this.texture=new DataArrayTexture(null,K,me,ge),this.texture.isRenderTargetTexture=!0}}class Uniform{constructor(K){this.value=K}clone(){return new Uniform(this.value.clone===void 0?this.value:this.value.clone())}}let _id$3=0;class UniformsGroup extends EventDispatcher$2{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:_id$3++}),this.name="",this.usage=StaticDrawUsage,this.uniforms=[]}add(K){return this.uniforms.push(K),this}remove(K){const me=this.uniforms.indexOf(K);return me!==-1&&this.uniforms.splice(me,1),this}setName(K){return this.name=K,this}setUsage(K){return this.usage=K,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(K){this.name=K.name,this.usage=K.usage;const me=K.uniforms;this.uniforms.length=0;for(let ge=0,xe=me.length;ge<xe;ge++){const ye=Array.isArray(me[ge])?me[ge]:[me[ge]];for(let ve=0;ve<ye.length;ve++)this.uniforms.push(ye[ve].clone())}return this}clone(){return new this.constructor().copy(this)}}class InstancedInterleavedBuffer extends InterleavedBuffer{constructor(K,me,ge=1){super(K,me),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=ge}copy(K){return super.copy(K),this.meshPerAttribute=K.meshPerAttribute,this}clone(K){const me=super.clone(K);return me.meshPerAttribute=this.meshPerAttribute,me}toJSON(K){const me=super.toJSON(K);return me.isInstancedInterleavedBuffer=!0,me.meshPerAttribute=this.meshPerAttribute,me}}class GLBufferAttribute{constructor(K,me,ge,xe,ye){this.isGLBufferAttribute=!0,this.name="",this.buffer=K,this.type=me,this.itemSize=ge,this.elementSize=xe,this.count=ye,this.version=0}set needsUpdate(K){K===!0&&this.version++}setBuffer(K){return this.buffer=K,this}setType(K,me){return this.type=K,this.elementSize=me,this}setItemSize(K){return this.itemSize=K,this}setCount(K){return this.count=K,this}}const _matrix=new Matrix4;class Raycaster{constructor(K,me,ge=0,xe=1/0){this.ray=new Ray(K,me),this.near=ge,this.far=xe,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(K,me){this.ray.set(K,me)}setFromCamera(K,me){me.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(me.matrixWorld),this.ray.direction.set(K.x,K.y,.5).unproject(me).sub(this.ray.origin).normalize(),this.camera=me):me.isOrthographicCamera?(this.ray.origin.set(K.x,K.y,(me.near+me.far)/(me.near-me.far)).unproject(me),this.ray.direction.set(0,0,-1).transformDirection(me.matrixWorld),this.camera=me):console.error("THREE.Raycaster: Unsupported camera type: "+me.type)}setFromXRController(K){return _matrix.identity().extractRotation(K.matrixWorld),this.ray.origin.setFromMatrixPosition(K.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(_matrix),this}intersectObject(K,me=!0,ge=[]){return intersect(K,this,ge,me),ge.sort(ascSort),ge}intersectObjects(K,me=!0,ge=[]){for(let xe=0,ye=K.length;xe<ye;xe++)intersect(K[xe],this,ge,me);return ge.sort(ascSort),ge}}function ascSort(fe,K){return fe.distance-K.distance}function intersect(fe,K,me,ge){let xe=!0;if(fe.layers.test(K.layers)&&fe.raycast(K,me)===!1&&(xe=!1),xe===!0&&ge===!0){const ye=fe.children;for(let ve=0,_e=ye.length;ve<_e;ve++)intersect(ye[ve],K,me,!0)}}class Spherical{constructor(K=1,me=0,ge=0){this.radius=K,this.phi=me,this.theta=ge}set(K,me,ge){return this.radius=K,this.phi=me,this.theta=ge,this}copy(K){return this.radius=K.radius,this.phi=K.phi,this.theta=K.theta,this}makeSafe(){return this.phi=clamp$1(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(K){return this.setFromCartesianCoords(K.x,K.y,K.z)}setFromCartesianCoords(K,me,ge){return this.radius=Math.sqrt(K*K+me*me+ge*ge),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(K,ge),this.phi=Math.acos(clamp$1(me/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Cylindrical{constructor(K=1,me=0,ge=0){this.radius=K,this.theta=me,this.y=ge}set(K,me,ge){return this.radius=K,this.theta=me,this.y=ge,this}copy(K){return this.radius=K.radius,this.theta=K.theta,this.y=K.y,this}setFromVector3(K){return this.setFromCartesianCoords(K.x,K.y,K.z)}setFromCartesianCoords(K,me,ge){return this.radius=Math.sqrt(K*K+ge*ge),this.theta=Math.atan2(K,ge),this.y=me,this}clone(){return new this.constructor().copy(this)}}class Matrix2{constructor(K,me,ge,xe){Matrix2.prototype.isMatrix2=!0,this.elements=[1,0,0,1],K!==void 0&&this.set(K,me,ge,xe)}identity(){return this.set(1,0,0,1),this}fromArray(K,me=0){for(let ge=0;ge<4;ge++)this.elements[ge]=K[ge+me];return this}set(K,me,ge,xe){const ye=this.elements;return ye[0]=K,ye[2]=me,ye[1]=ge,ye[3]=xe,this}}const _vector$4=new Vector2;class Box2{constructor(K=new Vector2(1/0,1/0),me=new Vector2(-1/0,-1/0)){this.isBox2=!0,this.min=K,this.max=me}set(K,me){return this.min.copy(K),this.max.copy(me),this}setFromPoints(K){this.makeEmpty();for(let me=0,ge=K.length;me<ge;me++)this.expandByPoint(K[me]);return this}setFromCenterAndSize(K,me){const ge=_vector$4.copy(me).multiplyScalar(.5);return this.min.copy(K).sub(ge),this.max.copy(K).add(ge),this}clone(){return new this.constructor().copy(this)}copy(K){return this.min.copy(K.min),this.max.copy(K.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(K){return this.isEmpty()?K.set(0,0):K.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(K){return this.isEmpty()?K.set(0,0):K.subVectors(this.max,this.min)}expandByPoint(K){return this.min.min(K),this.max.max(K),this}expandByVector(K){return this.min.sub(K),this.max.add(K),this}expandByScalar(K){return this.min.addScalar(-K),this.max.addScalar(K),this}containsPoint(K){return K.x>=this.min.x&&K.x<=this.max.x&&K.y>=this.min.y&&K.y<=this.max.y}containsBox(K){return this.min.x<=K.min.x&&K.max.x<=this.max.x&&this.min.y<=K.min.y&&K.max.y<=this.max.y}getParameter(K,me){return me.set((K.x-this.min.x)/(this.max.x-this.min.x),(K.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(K){return K.max.x>=this.min.x&&K.min.x<=this.max.x&&K.max.y>=this.min.y&&K.min.y<=this.max.y}clampPoint(K,me){return me.copy(K).clamp(this.min,this.max)}distanceToPoint(K){return this.clampPoint(K,_vector$4).distanceTo(K)}intersect(K){return this.min.max(K.min),this.max.min(K.max),this.isEmpty()&&this.makeEmpty(),this}union(K){return this.min.min(K.min),this.max.max(K.max),this}translate(K){return this.min.add(K),this.max.add(K),this}equals(K){return K.min.equals(this.min)&&K.max.equals(this.max)}}const _startP=new Vector3,_startEnd=new Vector3;class Line3{constructor(K=new Vector3,me=new Vector3){this.start=K,this.end=me}set(K,me){return this.start.copy(K),this.end.copy(me),this}copy(K){return this.start.copy(K.start),this.end.copy(K.end),this}getCenter(K){return K.addVectors(this.start,this.end).multiplyScalar(.5)}delta(K){return K.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(K,me){return this.delta(me).multiplyScalar(K).add(this.start)}closestPointToPointParameter(K,me){_startP.subVectors(K,this.start),_startEnd.subVectors(this.end,this.start);const ge=_startEnd.dot(_startEnd);let ye=_startEnd.dot(_startP)/ge;return me&&(ye=clamp$1(ye,0,1)),ye}closestPointToPoint(K,me,ge){const xe=this.closestPointToPointParameter(K,me);return this.delta(ge).multiplyScalar(xe).add(this.start)}applyMatrix4(K){return this.start.applyMatrix4(K),this.end.applyMatrix4(K),this}equals(K){return K.start.equals(this.start)&&K.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _vector$3=new Vector3;class SpotLightHelper extends Object3D{constructor(K,me){super(),this.light=K,this.matrixAutoUpdate=!1,this.color=me,this.type="SpotLightHelper";const ge=new BufferGeometry,xe=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let ve=0,_e=1,Ee=32;ve<Ee;ve++,_e++){const be=ve/Ee*Math.PI*2,Ae=_e/Ee*Math.PI*2;xe.push(Math.cos(be),Math.sin(be),1,Math.cos(Ae),Math.sin(Ae),1)}ge.setAttribute("position",new Float32BufferAttribute(xe,3));const ye=new LineBasicMaterial({fog:!1,toneMapped:!1});this.cone=new LineSegments(ge,ye),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const K=this.light.distance?this.light.distance:1e3,me=K*Math.tan(this.light.angle);this.cone.scale.set(me,me,K),_vector$3.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_vector$3),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const _vector$2=new Vector3,_boneMatrix=new Matrix4,_matrixWorldInv=new Matrix4;class SkeletonHelper extends LineSegments{constructor(K){const me=getBoneList(K),ge=new BufferGeometry,xe=[],ye=[],ve=new Color$1(0,0,1),_e=new Color$1(0,1,0);for(let be=0;be<me.length;be++){const Ae=me[be];Ae.parent&&Ae.parent.isBone&&(xe.push(0,0,0),xe.push(0,0,0),ye.push(ve.r,ve.g,ve.b),ye.push(_e.r,_e.g,_e.b))}ge.setAttribute("position",new Float32BufferAttribute(xe,3)),ge.setAttribute("color",new Float32BufferAttribute(ye,3));const Ee=new LineBasicMaterial({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(ge,Ee),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=K,this.bones=me,this.matrix=K.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(K){const me=this.bones,ge=this.geometry,xe=ge.getAttribute("position");_matrixWorldInv.copy(this.root.matrixWorld).invert();for(let ye=0,ve=0;ye<me.length;ye++){const _e=me[ye];_e.parent&&_e.parent.isBone&&(_boneMatrix.multiplyMatrices(_matrixWorldInv,_e.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),xe.setXYZ(ve,_vector$2.x,_vector$2.y,_vector$2.z),_boneMatrix.multiplyMatrices(_matrixWorldInv,_e.parent.matrixWorld),_vector$2.setFromMatrixPosition(_boneMatrix),xe.setXYZ(ve+1,_vector$2.x,_vector$2.y,_vector$2.z),ve+=2)}ge.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(K)}dispose(){this.geometry.dispose(),this.material.dispose()}}function getBoneList(fe){const K=[];fe.isBone===!0&&K.push(fe);for(let me=0;me<fe.children.length;me++)K.push(...getBoneList(fe.children[me]));return K}class PointLightHelper extends Mesh{constructor(K,me,ge){const xe=new SphereGeometry(me,4,2),ye=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1});super(xe,ye),this.light=K,this.color=ge,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const _vector$1=new Vector3,_color1=new Color$1,_color2=new Color$1;class HemisphereLightHelper extends Object3D{constructor(K,me,ge){super(),this.light=K,this.matrix=K.matrixWorld,this.matrixAutoUpdate=!1,this.color=ge,this.type="HemisphereLightHelper";const xe=new OctahedronGeometry(me);xe.rotateY(Math.PI*.5),this.material=new MeshBasicMaterial({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const ye=xe.getAttribute("position"),ve=new Float32Array(ye.count*3);xe.setAttribute("color",new BufferAttribute(ve,3)),this.add(new Mesh(xe,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const K=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const me=K.geometry.getAttribute("color");_color1.copy(this.light.color),_color2.copy(this.light.groundColor);for(let ge=0,xe=me.count;ge<xe;ge++){const ye=ge<xe/2?_color1:_color2;me.setXYZ(ge,ye.r,ye.g,ye.b)}me.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),K.lookAt(_vector$1.setFromMatrixPosition(this.light.matrixWorld).negate())}}class GridHelper extends LineSegments{constructor(K=10,me=10,ge=4473924,xe=8947848){ge=new Color$1(ge),xe=new Color$1(xe);const ye=me/2,ve=K/me,_e=K/2,Ee=[],be=[];for(let Ce=0,Te=0,Re=-_e;Ce<=me;Ce++,Re+=ve){Ee.push(-_e,0,Re,_e,0,Re),Ee.push(Re,0,-_e,Re,0,_e);const De=Ce===ye?ge:xe;De.toArray(be,Te),Te+=3,De.toArray(be,Te),Te+=3,De.toArray(be,Te),Te+=3,De.toArray(be,Te),Te+=3}const Ae=new BufferGeometry;Ae.setAttribute("position",new Float32BufferAttribute(Ee,3)),Ae.setAttribute("color",new Float32BufferAttribute(be,3));const Se=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(Ae,Se),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class PolarGridHelper extends LineSegments{constructor(K=10,me=16,ge=8,xe=64,ye=4473924,ve=8947848){ye=new Color$1(ye),ve=new Color$1(ve);const _e=[],Ee=[];if(me>1)for(let Se=0;Se<me;Se++){const Ce=Se/me*(Math.PI*2),Te=Math.sin(Ce)*K,Re=Math.cos(Ce)*K;_e.push(0,0,0),_e.push(Te,0,Re);const De=Se&1?ye:ve;Ee.push(De.r,De.g,De.b),Ee.push(De.r,De.g,De.b)}for(let Se=0;Se<ge;Se++){const Ce=Se&1?ye:ve,Te=K-K/ge*Se;for(let Re=0;Re<xe;Re++){let De=Re/xe*(Math.PI*2),Ie=Math.sin(De)*Te,Be=Math.cos(De)*Te;_e.push(Ie,0,Be),Ee.push(Ce.r,Ce.g,Ce.b),De=(Re+1)/xe*(Math.PI*2),Ie=Math.sin(De)*Te,Be=Math.cos(De)*Te,_e.push(Ie,0,Be),Ee.push(Ce.r,Ce.g,Ce.b)}}const be=new BufferGeometry;be.setAttribute("position",new Float32BufferAttribute(_e,3)),be.setAttribute("color",new Float32BufferAttribute(Ee,3));const Ae=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(be,Ae),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const _v1=new Vector3,_v2$5=new Vector3,_v3=new Vector3;class DirectionalLightHelper extends Object3D{constructor(K,me,ge){super(),this.light=K,this.matrix=K.matrixWorld,this.matrixAutoUpdate=!1,this.color=ge,this.type="DirectionalLightHelper",me===void 0&&(me=1);let xe=new BufferGeometry;xe.setAttribute("position",new Float32BufferAttribute([-me,me,0,me,me,0,me,-me,0,-me,-me,0,-me,me,0],3));const ye=new LineBasicMaterial({fog:!1,toneMapped:!1});this.lightPlane=new Line$2(xe,ye),this.add(this.lightPlane),xe=new BufferGeometry,xe.setAttribute("position",new Float32BufferAttribute([0,0,0,0,0,1],3)),this.targetLine=new Line$2(xe,ye),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),_v1.setFromMatrixPosition(this.light.matrixWorld),_v2$5.setFromMatrixPosition(this.light.target.matrixWorld),_v3.subVectors(_v2$5,_v1),this.lightPlane.lookAt(_v2$5),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(_v2$5),this.targetLine.scale.z=_v3.length()}}const _vector$d=new Vector3,_camera=new Camera;class CameraHelper extends LineSegments{constructor(K){const me=new BufferGeometry,ge=new LineBasicMaterial({color:16777215,vertexColors:!0,toneMapped:!1}),xe=[],ye=[],ve={};_e("n1","n2"),_e("n2","n4"),_e("n4","n3"),_e("n3","n1"),_e("f1","f2"),_e("f2","f4"),_e("f4","f3"),_e("f3","f1"),_e("n1","f1"),_e("n2","f2"),_e("n3","f3"),_e("n4","f4"),_e("p","n1"),_e("p","n2"),_e("p","n3"),_e("p","n4"),_e("u1","u2"),_e("u2","u3"),_e("u3","u1"),_e("c","t"),_e("p","c"),_e("cn1","cn2"),_e("cn3","cn4"),_e("cf1","cf2"),_e("cf3","cf4");function _e(Re,De){Ee(Re),Ee(De)}function Ee(Re){xe.push(0,0,0),ye.push(0,0,0),ve[Re]===void 0&&(ve[Re]=[]),ve[Re].push(xe.length/3-1)}me.setAttribute("position",new Float32BufferAttribute(xe,3)),me.setAttribute("color",new Float32BufferAttribute(ye,3)),super(me,ge),this.type="CameraHelper",this.camera=K,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=K.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=ve,this.update();const be=new Color$1(16755200),Ae=new Color$1(16711680),Se=new Color$1(43775),Ce=new Color$1(16777215),Te=new Color$1(3355443);this.setColors(be,Ae,Se,Ce,Te)}setColors(K,me,ge,xe,ye){const _e=this.geometry.getAttribute("color");_e.setXYZ(0,K.r,K.g,K.b),_e.setXYZ(1,K.r,K.g,K.b),_e.setXYZ(2,K.r,K.g,K.b),_e.setXYZ(3,K.r,K.g,K.b),_e.setXYZ(4,K.r,K.g,K.b),_e.setXYZ(5,K.r,K.g,K.b),_e.setXYZ(6,K.r,K.g,K.b),_e.setXYZ(7,K.r,K.g,K.b),_e.setXYZ(8,K.r,K.g,K.b),_e.setXYZ(9,K.r,K.g,K.b),_e.setXYZ(10,K.r,K.g,K.b),_e.setXYZ(11,K.r,K.g,K.b),_e.setXYZ(12,K.r,K.g,K.b),_e.setXYZ(13,K.r,K.g,K.b),_e.setXYZ(14,K.r,K.g,K.b),_e.setXYZ(15,K.r,K.g,K.b),_e.setXYZ(16,K.r,K.g,K.b),_e.setXYZ(17,K.r,K.g,K.b),_e.setXYZ(18,K.r,K.g,K.b),_e.setXYZ(19,K.r,K.g,K.b),_e.setXYZ(20,K.r,K.g,K.b),_e.setXYZ(21,K.r,K.g,K.b),_e.setXYZ(22,K.r,K.g,K.b),_e.setXYZ(23,K.r,K.g,K.b),_e.setXYZ(24,me.r,me.g,me.b),_e.setXYZ(25,me.r,me.g,me.b),_e.setXYZ(26,me.r,me.g,me.b),_e.setXYZ(27,me.r,me.g,me.b),_e.setXYZ(28,me.r,me.g,me.b),_e.setXYZ(29,me.r,me.g,me.b),_e.setXYZ(30,me.r,me.g,me.b),_e.setXYZ(31,me.r,me.g,me.b),_e.setXYZ(32,ge.r,ge.g,ge.b),_e.setXYZ(33,ge.r,ge.g,ge.b),_e.setXYZ(34,ge.r,ge.g,ge.b),_e.setXYZ(35,ge.r,ge.g,ge.b),_e.setXYZ(36,ge.r,ge.g,ge.b),_e.setXYZ(37,ge.r,ge.g,ge.b),_e.setXYZ(38,xe.r,xe.g,xe.b),_e.setXYZ(39,xe.r,xe.g,xe.b),_e.setXYZ(40,ye.r,ye.g,ye.b),_e.setXYZ(41,ye.r,ye.g,ye.b),_e.setXYZ(42,ye.r,ye.g,ye.b),_e.setXYZ(43,ye.r,ye.g,ye.b),_e.setXYZ(44,ye.r,ye.g,ye.b),_e.setXYZ(45,ye.r,ye.g,ye.b),_e.setXYZ(46,ye.r,ye.g,ye.b),_e.setXYZ(47,ye.r,ye.g,ye.b),_e.setXYZ(48,ye.r,ye.g,ye.b),_e.setXYZ(49,ye.r,ye.g,ye.b),_e.needsUpdate=!0}update(){const K=this.geometry,me=this.pointMap,ge=1,xe=1;_camera.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const ye=this.camera.coordinateSystem===WebGLCoordinateSystem?-1:0;setPoint("c",me,K,_camera,0,0,ye),setPoint("t",me,K,_camera,0,0,1),setPoint("n1",me,K,_camera,-1,-1,ye),setPoint("n2",me,K,_camera,ge,-1,ye),setPoint("n3",me,K,_camera,-1,xe,ye),setPoint("n4",me,K,_camera,ge,xe,ye),setPoint("f1",me,K,_camera,-1,-1,1),setPoint("f2",me,K,_camera,ge,-1,1),setPoint("f3",me,K,_camera,-1,xe,1),setPoint("f4",me,K,_camera,ge,xe,1),setPoint("u1",me,K,_camera,ge*.7,xe*1.1,ye),setPoint("u2",me,K,_camera,-1*.7,xe*1.1,ye),setPoint("u3",me,K,_camera,0,xe*2,ye),setPoint("cf1",me,K,_camera,-1,0,1),setPoint("cf2",me,K,_camera,ge,0,1),setPoint("cf3",me,K,_camera,0,-1,1),setPoint("cf4",me,K,_camera,0,xe,1),setPoint("cn1",me,K,_camera,-1,0,ye),setPoint("cn2",me,K,_camera,ge,0,ye),setPoint("cn3",me,K,_camera,0,-1,ye),setPoint("cn4",me,K,_camera,0,xe,ye),K.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function setPoint(fe,K,me,ge,xe,ye,ve){_vector$d.set(xe,ye,ve).unproject(ge);const _e=K[fe];if(_e!==void 0){const Ee=me.getAttribute("position");for(let be=0,Ae=_e.length;be<Ae;be++)Ee.setXYZ(_e[be],_vector$d.x,_vector$d.y,_vector$d.z)}}const _box$5=new Box3;class BoxHelper extends LineSegments{constructor(K,me=16776960){const ge=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),xe=new Float32Array(8*3),ye=new BufferGeometry;ye.setIndex(new BufferAttribute(ge,1)),ye.setAttribute("position",new BufferAttribute(xe,3)),super(ye,new LineBasicMaterial({color:me,toneMapped:!1})),this.object=K,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&_box$5.setFromObject(this.object),_box$5.isEmpty())return;const K=_box$5.min,me=_box$5.max,ge=this.geometry.attributes.position,xe=ge.array;xe[0]=me.x,xe[1]=me.y,xe[2]=me.z,xe[3]=K.x,xe[4]=me.y,xe[5]=me.z,xe[6]=K.x,xe[7]=K.y,xe[8]=me.z,xe[9]=me.x,xe[10]=K.y,xe[11]=me.z,xe[12]=me.x,xe[13]=me.y,xe[14]=K.z,xe[15]=K.x,xe[16]=me.y,xe[17]=K.z,xe[18]=K.x,xe[19]=K.y,xe[20]=K.z,xe[21]=me.x,xe[22]=K.y,xe[23]=K.z,ge.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(K){return this.object=K,this.update(),this}copy(K,me){return super.copy(K,me),this.object=K.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Box3Helper extends LineSegments{constructor(K,me=16776960){const ge=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),xe=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],ye=new BufferGeometry;ye.setIndex(new BufferAttribute(ge,1)),ye.setAttribute("position",new Float32BufferAttribute(xe,3)),super(ye,new LineBasicMaterial({color:me,toneMapped:!1})),this.box=K,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(K){const me=this.box;me.isEmpty()||(me.getCenter(this.position),me.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(K))}dispose(){this.geometry.dispose(),this.material.dispose()}}class PlaneHelper extends Line$2{constructor(K,me=1,ge=16776960){const xe=ge,ye=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],ve=new BufferGeometry;ve.setAttribute("position",new Float32BufferAttribute(ye,3)),ve.computeBoundingSphere(),super(ve,new LineBasicMaterial({color:xe,toneMapped:!1})),this.type="PlaneHelper",this.plane=K,this.size=me;const _e=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],Ee=new BufferGeometry;Ee.setAttribute("position",new Float32BufferAttribute(_e,3)),Ee.computeBoundingSphere(),this.add(new Mesh(Ee,new MeshBasicMaterial({color:xe,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(K){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(K)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const _axis=new Vector3;let _lineGeometry,_coneGeometry;class ArrowHelper extends Object3D{constructor(K=new Vector3(0,0,1),me=new Vector3(0,0,0),ge=1,xe=16776960,ye=ge*.2,ve=ye*.2){super(),this.type="ArrowHelper",_lineGeometry===void 0&&(_lineGeometry=new BufferGeometry,_lineGeometry.setAttribute("position",new Float32BufferAttribute([0,0,0,0,1,0],3)),_coneGeometry=new CylinderGeometry(0,.5,1,5,1),_coneGeometry.translate(0,-.5,0)),this.position.copy(me),this.line=new Line$2(_lineGeometry,new LineBasicMaterial({color:xe,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Mesh(_coneGeometry,new MeshBasicMaterial({color:xe,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(K),this.setLength(ge,ye,ve)}setDirection(K){if(K.y>.99999)this.quaternion.set(0,0,0,1);else if(K.y<-.99999)this.quaternion.set(1,0,0,0);else{_axis.set(K.z,0,-K.x).normalize();const me=Math.acos(K.y);this.quaternion.setFromAxisAngle(_axis,me)}}setLength(K,me=K*.2,ge=me*.2){this.line.scale.set(1,Math.max(1e-4,K-me),1),this.line.updateMatrix(),this.cone.scale.set(ge,me,ge),this.cone.position.y=K,this.cone.updateMatrix()}setColor(K){this.line.material.color.set(K),this.cone.material.color.set(K)}copy(K){return super.copy(K,!1),this.line.copy(K.line),this.cone.copy(K.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class AxesHelper extends LineSegments{constructor(K=1){const me=[0,0,0,K,0,0,0,0,0,0,K,0,0,0,0,0,0,K],ge=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],xe=new BufferGeometry;xe.setAttribute("position",new Float32BufferAttribute(me,3)),xe.setAttribute("color",new Float32BufferAttribute(ge,3));const ye=new LineBasicMaterial({vertexColors:!0,toneMapped:!1});super(xe,ye),this.type="AxesHelper"}setColors(K,me,ge){const xe=new Color$1,ye=this.geometry.attributes.color.array;return xe.set(K),xe.toArray(ye,0),xe.toArray(ye,3),xe.set(me),xe.toArray(ye,6),xe.toArray(ye,9),xe.set(ge),xe.toArray(ye,12),xe.toArray(ye,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class ShapePath{constructor(){this.type="ShapePath",this.color=new Color$1,this.subPaths=[],this.currentPath=null}moveTo(K,me){return this.currentPath=new Path,this.subPaths.push(this.currentPath),this.currentPath.moveTo(K,me),this}lineTo(K,me){return this.currentPath.lineTo(K,me),this}quadraticCurveTo(K,me,ge,xe){return this.currentPath.quadraticCurveTo(K,me,ge,xe),this}bezierCurveTo(K,me,ge,xe,ye,ve){return this.currentPath.bezierCurveTo(K,me,ge,xe,ye,ve),this}splineThru(K){return this.currentPath.splineThru(K),this}toShapes(K){function me(Be){const Le=[];for(let Oe=0,Fe=Be.length;Oe<Fe;Oe++){const Ue=Be[Oe],Ne=new Shape;Ne.curves=Ue.curves,Le.push(Ne)}return Le}function ge(Be,Le){const Oe=Le.length;let Fe=!1;for(let Ue=Oe-1,Ne=0;Ne<Oe;Ue=Ne++){let He=Le[Ue],ze=Le[Ne],je=ze.x-He.x,Ge=ze.y-He.y;if(Math.abs(Ge)>Number.EPSILON){if(Ge<0&&(He=Le[Ne],je=-je,ze=Le[Ue],Ge=-Ge),Be.y<He.y||Be.y>ze.y)continue;if(Be.y===He.y){if(Be.x===He.x)return!0}else{const Xe=Ge*(Be.x-He.x)-je*(Be.y-He.y);if(Xe===0)return!0;if(Xe<0)continue;Fe=!Fe}}else{if(Be.y!==He.y)continue;if(ze.x<=Be.x&&Be.x<=He.x||He.x<=Be.x&&Be.x<=ze.x)return!0}}return Fe}const xe=ShapeUtils.isClockWise,ye=this.subPaths;if(ye.length===0)return[];let ve,_e,Ee;const be=[];if(ye.length===1)return _e=ye[0],Ee=new Shape,Ee.curves=_e.curves,be.push(Ee),be;let Ae=!xe(ye[0].getPoints());Ae=K?!Ae:Ae;const Se=[],Ce=[];let Te=[],Re=0,De;Ce[Re]=void 0,Te[Re]=[];for(let Be=0,Le=ye.length;Be<Le;Be++)_e=ye[Be],De=_e.getPoints(),ve=xe(De),ve=K?!ve:ve,ve?(!Ae&&Ce[Re]&&Re++,Ce[Re]={s:new Shape,p:De},Ce[Re].s.curves=_e.curves,Ae&&Re++,Te[Re]=[]):Te[Re].push({h:_e,p:De[0]});if(!Ce[0])return me(ye);if(Ce.length>1){let Be=!1,Le=0;for(let Oe=0,Fe=Ce.length;Oe<Fe;Oe++)Se[Oe]=[];for(let Oe=0,Fe=Ce.length;Oe<Fe;Oe++){const Ue=Te[Oe];for(let Ne=0;Ne<Ue.length;Ne++){const He=Ue[Ne];let ze=!0;for(let je=0;je<Ce.length;je++)ge(He.p,Ce[je].p)&&(Oe!==je&&Le++,ze?(ze=!1,Se[je].push(He)):Be=!0);ze&&Se[Oe].push(He)}}Le>0&&Be===!1&&(Te=Se)}let Ie;for(let Be=0,Le=Ce.length;Be<Le;Be++){Ee=Ce[Be].s,be.push(Ee),Ie=Te[Be];for(let Oe=0,Fe=Ie.length;Oe<Fe;Oe++)Ee.holes.push(Ie[Oe].h)}return be}}class Controls extends EventDispatcher$2{constructor(K,me=null){super(),this.object=K,this.domElement=me,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function contain(fe,K){const me=fe.image&&fe.image.width?fe.image.width/fe.image.height:1;return me>K?(fe.repeat.x=1,fe.repeat.y=me/K,fe.offset.x=0,fe.offset.y=(1-fe.repeat.y)/2):(fe.repeat.x=K/me,fe.repeat.y=1,fe.offset.x=(1-fe.repeat.x)/2,fe.offset.y=0),fe}function cover(fe,K){const me=fe.image&&fe.image.width?fe.image.width/fe.image.height:1;return me>K?(fe.repeat.x=K/me,fe.repeat.y=1,fe.offset.x=(1-fe.repeat.x)/2,fe.offset.y=0):(fe.repeat.x=1,fe.repeat.y=me/K,fe.offset.x=0,fe.offset.y=(1-fe.repeat.y)/2),fe}function fill(fe){return fe.repeat.x=1,fe.repeat.y=1,fe.offset.x=0,fe.offset.y=0,fe}function getByteLength(fe,K,me,ge){const xe=getTextureTypeByteLength(ge);switch(me){case AlphaFormat:return fe*K;case LuminanceFormat:return fe*K;case LuminanceAlphaFormat:return fe*K*2;case RedFormat:return fe*K/xe.components*xe.byteLength;case RedIntegerFormat:return fe*K/xe.components*xe.byteLength;case RGFormat:return fe*K*2/xe.components*xe.byteLength;case RGIntegerFormat:return fe*K*2/xe.components*xe.byteLength;case RGBFormat:return fe*K*3/xe.components*xe.byteLength;case RGBAFormat:return fe*K*4/xe.components*xe.byteLength;case RGBAIntegerFormat:return fe*K*4/xe.components*xe.byteLength;case RGB_S3TC_DXT1_Format:case RGBA_S3TC_DXT1_Format:return Math.floor((fe+3)/4)*Math.floor((K+3)/4)*8;case RGBA_S3TC_DXT3_Format:case RGBA_S3TC_DXT5_Format:return Math.floor((fe+3)/4)*Math.floor((K+3)/4)*16;case RGB_PVRTC_2BPPV1_Format:case RGBA_PVRTC_2BPPV1_Format:return Math.max(fe,16)*Math.max(K,8)/4;case RGB_PVRTC_4BPPV1_Format:case RGBA_PVRTC_4BPPV1_Format:return Math.max(fe,8)*Math.max(K,8)/2;case RGB_ETC1_Format:case RGB_ETC2_Format:return Math.floor((fe+3)/4)*Math.floor((K+3)/4)*8;case RGBA_ETC2_EAC_Format:return Math.floor((fe+3)/4)*Math.floor((K+3)/4)*16;case RGBA_ASTC_4x4_Format:return Math.floor((fe+3)/4)*Math.floor((K+3)/4)*16;case RGBA_ASTC_5x4_Format:return Math.floor((fe+4)/5)*Math.floor((K+3)/4)*16;case RGBA_ASTC_5x5_Format:return Math.floor((fe+4)/5)*Math.floor((K+4)/5)*16;case RGBA_ASTC_6x5_Format:return Math.floor((fe+5)/6)*Math.floor((K+4)/5)*16;case RGBA_ASTC_6x6_Format:return Math.floor((fe+5)/6)*Math.floor((K+5)/6)*16;case RGBA_ASTC_8x5_Format:return Math.floor((fe+7)/8)*Math.floor((K+4)/5)*16;case RGBA_ASTC_8x6_Format:return Math.floor((fe+7)/8)*Math.floor((K+5)/6)*16;case RGBA_ASTC_8x8_Format:return Math.floor((fe+7)/8)*Math.floor((K+7)/8)*16;case RGBA_ASTC_10x5_Format:return Math.floor((fe+9)/10)*Math.floor((K+4)/5)*16;case RGBA_ASTC_10x6_Format:return Math.floor((fe+9)/10)*Math.floor((K+5)/6)*16;case RGBA_ASTC_10x8_Format:return Math.floor((fe+9)/10)*Math.floor((K+7)/8)*16;case RGBA_ASTC_10x10_Format:return Math.floor((fe+9)/10)*Math.floor((K+9)/10)*16;case RGBA_ASTC_12x10_Format:return Math.floor((fe+11)/12)*Math.floor((K+9)/10)*16;case RGBA_ASTC_12x12_Format:return Math.floor((fe+11)/12)*Math.floor((K+11)/12)*16;case RGBA_BPTC_Format:case RGB_BPTC_SIGNED_Format:case RGB_BPTC_UNSIGNED_Format:return Math.ceil(fe/4)*Math.ceil(K/4)*16;case RED_RGTC1_Format:case SIGNED_RED_RGTC1_Format:return Math.ceil(fe/4)*Math.ceil(K/4)*8;case RED_GREEN_RGTC2_Format:case SIGNED_RED_GREEN_RGTC2_Format:return Math.ceil(fe/4)*Math.ceil(K/4)*16}throw new Error(`Unable to determine texture byte length for ${me} format.`)}function getTextureTypeByteLength(fe){switch(fe){case UnsignedByteType:case ByteType:return{byteLength:1,components:1};case UnsignedShortType:case ShortType:case HalfFloatType:return{byteLength:2,components:1};case UnsignedShort4444Type:case UnsignedShort5551Type:return{byteLength:2,components:4};case UnsignedIntType:case IntType:case FloatType:return{byteLength:4,components:1};case UnsignedInt5999Type:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${fe}.`)}class TextureUtils{static contain(K,me){return contain(K,me)}static cover(K,me){return cover(K,me)}static fill(K){return fill(K)}static getByteLength(K,me,ge,xe){return getByteLength(K,me,ge,xe)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:REVISION}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=REVISION);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WebGLAnimation(){let fe=null,K=!1,me=null,ge=null;function xe(ye,ve){me(ye,ve),ge=fe.requestAnimationFrame(xe)}return{start:function(){K!==!0&&me!==null&&(ge=fe.requestAnimationFrame(xe),K=!0)},stop:function(){fe.cancelAnimationFrame(ge),K=!1},setAnimationLoop:function(ye){me=ye},setContext:function(ye){fe=ye}}}function WebGLAttributes(fe){const K=new WeakMap;function me(_e,Ee){const be=_e.array,Ae=_e.usage,Se=be.byteLength,Ce=fe.createBuffer();fe.bindBuffer(Ee,Ce),fe.bufferData(Ee,be,Ae),_e.onUploadCallback();let Te;if(be instanceof Float32Array)Te=fe.FLOAT;else if(be instanceof Uint16Array)_e.isFloat16BufferAttribute?Te=fe.HALF_FLOAT:Te=fe.UNSIGNED_SHORT;else if(be instanceof Int16Array)Te=fe.SHORT;else if(be instanceof Uint32Array)Te=fe.UNSIGNED_INT;else if(be instanceof Int32Array)Te=fe.INT;else if(be instanceof Int8Array)Te=fe.BYTE;else if(be instanceof Uint8Array)Te=fe.UNSIGNED_BYTE;else if(be instanceof Uint8ClampedArray)Te=fe.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+be);return{buffer:Ce,type:Te,bytesPerElement:be.BYTES_PER_ELEMENT,version:_e.version,size:Se}}function ge(_e,Ee,be){const Ae=Ee.array,Se=Ee.updateRanges;if(fe.bindBuffer(be,_e),Se.length===0)fe.bufferSubData(be,0,Ae);else{Se.sort((Te,Re)=>Te.start-Re.start);let Ce=0;for(let Te=1;Te<Se.length;Te++){const Re=Se[Ce],De=Se[Te];De.start<=Re.start+Re.count+1?Re.count=Math.max(Re.count,De.start+De.count-Re.start):(++Ce,Se[Ce]=De)}Se.length=Ce+1;for(let Te=0,Re=Se.length;Te<Re;Te++){const De=Se[Te];fe.bufferSubData(be,De.start*Ae.BYTES_PER_ELEMENT,Ae,De.start,De.count)}Ee.clearUpdateRanges()}Ee.onUploadCallback()}function xe(_e){return _e.isInterleavedBufferAttribute&&(_e=_e.data),K.get(_e)}function ye(_e){_e.isInterleavedBufferAttribute&&(_e=_e.data);const Ee=K.get(_e);Ee&&(fe.deleteBuffer(Ee.buffer),K.delete(_e))}function ve(_e,Ee){if(_e.isInterleavedBufferAttribute&&(_e=_e.data),_e.isGLBufferAttribute){const Ae=K.get(_e);(!Ae||Ae.version<_e.version)&&K.set(_e,{buffer:_e.buffer,type:_e.type,bytesPerElement:_e.elementSize,version:_e.version});return}const be=K.get(_e);if(be===void 0)K.set(_e,me(_e,Ee));else if(be.version<_e.version){if(be.size!==_e.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");ge(be.buffer,_e,Ee),be.version=_e.version}}return{get:xe,remove:ye,update:ve}}var alphahash_fragment=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,alphahash_pars_fragment=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,alphamap_fragment=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,alphamap_pars_fragment=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,alphatest_fragment=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,alphatest_pars_fragment=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,aomap_fragment=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,aomap_pars_fragment=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,batching_pars_vertex=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,batching_vertex=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,begin_vertex=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,beginnormal_vertex=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,bsdfs=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iridescence_fragment=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,bumpmap_pars_fragment=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,clipping_planes_fragment=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,clipping_planes_pars_fragment=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,clipping_planes_pars_vertex=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,clipping_planes_vertex=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,color_fragment=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,color_pars_fragment=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,color_pars_vertex=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,color_vertex=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,common=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,cube_uv_reflection_fragment=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,defaultnormal_vertex=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,displacementmap_pars_vertex=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,displacementmap_vertex=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,emissivemap_fragment=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,emissivemap_pars_fragment=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,colorspace_fragment="gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,envmap_fragment=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,envmap_common_pars_fragment=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,envmap_pars_fragment=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,envmap_pars_vertex=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,envmap_vertex=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,fog_vertex=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,fog_pars_vertex=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,fog_fragment=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fog_pars_fragment=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gradientmap_pars_fragment=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,lightmap_pars_fragment=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,lights_lambert_fragment=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,lights_lambert_pars_fragment=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,lights_pars_begin=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,envmap_physical_pars_fragment=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,lights_toon_fragment=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,lights_toon_pars_fragment=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,lights_phong_fragment=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,lights_phong_pars_fragment=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,lights_physical_fragment=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,lights_physical_pars_fragment=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,lights_fragment_begin=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,lights_fragment_maps=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,lights_fragment_end=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,logdepthbuf_fragment=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,logdepthbuf_pars_fragment=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_pars_vertex=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,logdepthbuf_vertex=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,map_fragment=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,map_pars_fragment=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,map_particle_fragment=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,map_particle_pars_fragment=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,metalnessmap_fragment=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,metalnessmap_pars_fragment=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,morphinstance_vertex=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,morphcolor_vertex=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,morphnormal_vertex=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,morphtarget_pars_vertex=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,morphtarget_vertex=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,normal_fragment_begin=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,normal_fragment_maps=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,normal_pars_fragment=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_pars_vertex=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,normal_vertex=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,normalmap_pars_fragment=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,clearcoat_normal_fragment_begin=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,clearcoat_normal_fragment_maps=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,clearcoat_pars_fragment=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,iridescence_pars_fragment=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,opaque_fragment=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,packing=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,premultiplied_alpha_fragment=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,project_vertex=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,dithering_fragment=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,dithering_pars_fragment=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,roughnessmap_fragment=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,roughnessmap_pars_fragment=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,shadowmap_pars_fragment=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,shadowmap_pars_vertex=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,shadowmap_vertex=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,shadowmask_pars_fragment=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,skinbase_vertex=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,skinning_pars_vertex=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,skinning_vertex=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,skinnormal_vertex=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,specularmap_fragment=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,specularmap_pars_fragment=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,tonemapping_fragment=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,tonemapping_pars_fragment=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,transmission_fragment=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,transmission_pars_fragment=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,uv_pars_fragment=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_pars_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,uv_vertex=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,worldpos_vertex=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const vertex$h=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,fragment$h=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$g=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$g=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$f=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,fragment$f=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$e=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,fragment$e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,vertex$d=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fragment$d=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,vertex$c=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,fragment$c=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,vertex$b=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$b=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$a=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,fragment$a=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$9=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$9=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$8=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,fragment$8=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$7=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,fragment$7=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vertex$6=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$6=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$5=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,fragment$5=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$4=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$4=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vertex$3=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,fragment$3=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vertex$2=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fragment$2=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,vertex$1=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,fragment$1=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,ShaderChunk={alphahash_fragment,alphahash_pars_fragment,alphamap_fragment,alphamap_pars_fragment,alphatest_fragment,alphatest_pars_fragment,aomap_fragment,aomap_pars_fragment,batching_pars_vertex,batching_vertex,begin_vertex,beginnormal_vertex,bsdfs,iridescence_fragment,bumpmap_pars_fragment,clipping_planes_fragment,clipping_planes_pars_fragment,clipping_planes_pars_vertex,clipping_planes_vertex,color_fragment,color_pars_fragment,color_pars_vertex,color_vertex,common,cube_uv_reflection_fragment,defaultnormal_vertex,displacementmap_pars_vertex,displacementmap_vertex,emissivemap_fragment,emissivemap_pars_fragment,colorspace_fragment,colorspace_pars_fragment,envmap_fragment,envmap_common_pars_fragment,envmap_pars_fragment,envmap_pars_vertex,envmap_physical_pars_fragment,envmap_vertex,fog_vertex,fog_pars_vertex,fog_fragment,fog_pars_fragment,gradientmap_pars_fragment,lightmap_pars_fragment,lights_lambert_fragment,lights_lambert_pars_fragment,lights_pars_begin,lights_toon_fragment,lights_toon_pars_fragment,lights_phong_fragment,lights_phong_pars_fragment,lights_physical_fragment,lights_physical_pars_fragment,lights_fragment_begin,lights_fragment_maps,lights_fragment_end,logdepthbuf_fragment,logdepthbuf_pars_fragment,logdepthbuf_pars_vertex,logdepthbuf_vertex,map_fragment,map_pars_fragment,map_particle_fragment,map_particle_pars_fragment,metalnessmap_fragment,metalnessmap_pars_fragment,morphinstance_vertex,morphcolor_vertex,morphnormal_vertex,morphtarget_pars_vertex,morphtarget_vertex,normal_fragment_begin,normal_fragment_maps,normal_pars_fragment,normal_pars_vertex,normal_vertex,normalmap_pars_fragment,clearcoat_normal_fragment_begin,clearcoat_normal_fragment_maps,clearcoat_pars_fragment,iridescence_pars_fragment,opaque_fragment,packing,premultiplied_alpha_fragment,project_vertex,dithering_fragment,dithering_pars_fragment,roughnessmap_fragment,roughnessmap_pars_fragment,shadowmap_pars_fragment,shadowmap_pars_vertex,shadowmap_vertex,shadowmask_pars_fragment,skinbase_vertex,skinning_pars_vertex,skinning_vertex,skinnormal_vertex,specularmap_fragment,specularmap_pars_fragment,tonemapping_fragment,tonemapping_pars_fragment,transmission_fragment,transmission_pars_fragment,uv_pars_fragment,uv_pars_vertex,uv_vertex,worldpos_vertex,background_vert:vertex$h,background_frag:fragment$h,backgroundCube_vert:vertex$g,backgroundCube_frag:fragment$g,cube_vert:vertex$f,cube_frag:fragment$f,depth_vert:vertex$e,depth_frag:fragment$e,distanceRGBA_vert:vertex$d,distanceRGBA_frag:fragment$d,equirect_vert:vertex$c,equirect_frag:fragment$c,linedashed_vert:vertex$b,linedashed_frag:fragment$b,meshbasic_vert:vertex$a,meshbasic_frag:fragment$a,meshlambert_vert:vertex$9,meshlambert_frag:fragment$9,meshmatcap_vert:vertex$8,meshmatcap_frag:fragment$8,meshnormal_vert:vertex$7,meshnormal_frag:fragment$7,meshphong_vert:vertex$6,meshphong_frag:fragment$6,meshphysical_vert:vertex$5,meshphysical_frag:fragment$5,meshtoon_vert:vertex$4,meshtoon_frag:fragment$4,points_vert:vertex$3,points_frag:fragment$3,shadow_vert:vertex$2,shadow_frag:fragment$2,sprite_vert:vertex$1,sprite_frag:fragment$1},UniformsLib={common:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Matrix3}},envmap:{envMap:{value:null},envMapRotation:{value:new Matrix3},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Matrix3}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Matrix3}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Matrix3},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Matrix3},normalScale:{value:new Vector2(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Matrix3},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Matrix3}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Matrix3}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Matrix3}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Color$1(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0},uvTransform:{value:new Matrix3}},sprite:{diffuse:{value:new Color$1(16777215)},opacity:{value:1},center:{value:new Vector2(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Matrix3},alphaMap:{value:null},alphaMapTransform:{value:new Matrix3},alphaTest:{value:0}}},ShaderLib={basic:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.fog]),vertexShader:ShaderChunk.meshbasic_vert,fragmentShader:ShaderChunk.meshbasic_frag},lambert:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshlambert_vert,fragmentShader:ShaderChunk.meshlambert_frag},phong:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.specularmap,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},specular:{value:new Color$1(1118481)},shininess:{value:30}}]),vertexShader:ShaderChunk.meshphong_vert,fragmentShader:ShaderChunk.meshphong_frag},standard:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.envmap,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.roughnessmap,UniformsLib.metalnessmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag},toon:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.aomap,UniformsLib.lightmap,UniformsLib.emissivemap,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.gradientmap,UniformsLib.fog,UniformsLib.lights,{emissive:{value:new Color$1(0)}}]),vertexShader:ShaderChunk.meshtoon_vert,fragmentShader:ShaderChunk.meshtoon_frag},matcap:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,UniformsLib.fog,{matcap:{value:null}}]),vertexShader:ShaderChunk.meshmatcap_vert,fragmentShader:ShaderChunk.meshmatcap_frag},points:{uniforms:mergeUniforms([UniformsLib.points,UniformsLib.fog]),vertexShader:ShaderChunk.points_vert,fragmentShader:ShaderChunk.points_frag},dashed:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ShaderChunk.linedashed_vert,fragmentShader:ShaderChunk.linedashed_frag},depth:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap]),vertexShader:ShaderChunk.depth_vert,fragmentShader:ShaderChunk.depth_frag},normal:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.bumpmap,UniformsLib.normalmap,UniformsLib.displacementmap,{opacity:{value:1}}]),vertexShader:ShaderChunk.meshnormal_vert,fragmentShader:ShaderChunk.meshnormal_frag},sprite:{uniforms:mergeUniforms([UniformsLib.sprite,UniformsLib.fog]),vertexShader:ShaderChunk.sprite_vert,fragmentShader:ShaderChunk.sprite_frag},background:{uniforms:{uvTransform:{value:new Matrix3},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ShaderChunk.background_vert,fragmentShader:ShaderChunk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Matrix3}},vertexShader:ShaderChunk.backgroundCube_vert,fragmentShader:ShaderChunk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ShaderChunk.cube_vert,fragmentShader:ShaderChunk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ShaderChunk.equirect_vert,fragmentShader:ShaderChunk.equirect_frag},distanceRGBA:{uniforms:mergeUniforms([UniformsLib.common,UniformsLib.displacementmap,{referencePosition:{value:new Vector3},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ShaderChunk.distanceRGBA_vert,fragmentShader:ShaderChunk.distanceRGBA_frag},shadow:{uniforms:mergeUniforms([UniformsLib.lights,UniformsLib.fog,{color:{value:new Color$1(0)},opacity:{value:1}}]),vertexShader:ShaderChunk.shadow_vert,fragmentShader:ShaderChunk.shadow_frag}};ShaderLib.physical={uniforms:mergeUniforms([ShaderLib.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Matrix3},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Matrix3},clearcoatNormalScale:{value:new Vector2(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Matrix3},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Matrix3},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Matrix3},sheen:{value:0},sheenColor:{value:new Color$1(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Matrix3},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Matrix3},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Matrix3},transmissionSamplerSize:{value:new Vector2},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Matrix3},attenuationDistance:{value:0},attenuationColor:{value:new Color$1(0)},specularColor:{value:new Color$1(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Matrix3},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Matrix3},anisotropyVector:{value:new Vector2},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Matrix3}}]),vertexShader:ShaderChunk.meshphysical_vert,fragmentShader:ShaderChunk.meshphysical_frag};const _rgb={r:0,b:0,g:0},_e1$1=new Euler,_m1$1=new Matrix4;function WebGLBackground(fe,K,me,ge,xe,ye,ve){const _e=new Color$1(0);let Ee=ye===!0?0:1,be,Ae,Se=null,Ce=0,Te=null;function Re(Oe){let Fe=Oe.isScene===!0?Oe.background:null;return Fe&&Fe.isTexture&&(Fe=(Oe.backgroundBlurriness>0?me:K).get(Fe)),Fe}function De(Oe){let Fe=!1;const Ue=Re(Oe);Ue===null?Be(_e,Ee):Ue&&Ue.isColor&&(Be(Ue,1),Fe=!0);const Ne=fe.xr.getEnvironmentBlendMode();Ne==="additive"?ge.buffers.color.setClear(0,0,0,1,ve):Ne==="alpha-blend"&&ge.buffers.color.setClear(0,0,0,0,ve),(fe.autoClear||Fe)&&(ge.buffers.depth.setTest(!0),ge.buffers.depth.setMask(!0),ge.buffers.color.setMask(!0),fe.clear(fe.autoClearColor,fe.autoClearDepth,fe.autoClearStencil))}function Ie(Oe,Fe){const Ue=Re(Fe);Ue&&(Ue.isCubeTexture||Ue.mapping===CubeUVReflectionMapping)?(Ae===void 0&&(Ae=new Mesh(new BoxGeometry(1,1,1),new ShaderMaterial({name:"BackgroundCubeMaterial",uniforms:cloneUniforms(ShaderLib.backgroundCube.uniforms),vertexShader:ShaderLib.backgroundCube.vertexShader,fragmentShader:ShaderLib.backgroundCube.fragmentShader,side:BackSide,depthTest:!1,depthWrite:!1,fog:!1})),Ae.geometry.deleteAttribute("normal"),Ae.geometry.deleteAttribute("uv"),Ae.onBeforeRender=function(Ne,He,ze){this.matrixWorld.copyPosition(ze.matrixWorld)},Object.defineProperty(Ae.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),xe.update(Ae)),_e1$1.copy(Fe.backgroundRotation),_e1$1.x*=-1,_e1$1.y*=-1,_e1$1.z*=-1,Ue.isCubeTexture&&Ue.isRenderTargetTexture===!1&&(_e1$1.y*=-1,_e1$1.z*=-1),Ae.material.uniforms.envMap.value=Ue,Ae.material.uniforms.flipEnvMap.value=Ue.isCubeTexture&&Ue.isRenderTargetTexture===!1?-1:1,Ae.material.uniforms.backgroundBlurriness.value=Fe.backgroundBlurriness,Ae.material.uniforms.backgroundIntensity.value=Fe.backgroundIntensity,Ae.material.uniforms.backgroundRotation.value.setFromMatrix4(_m1$1.makeRotationFromEuler(_e1$1)),Ae.material.toneMapped=ColorManagement.getTransfer(Ue.colorSpace)!==SRGBTransfer,(Se!==Ue||Ce!==Ue.version||Te!==fe.toneMapping)&&(Ae.material.needsUpdate=!0,Se=Ue,Ce=Ue.version,Te=fe.toneMapping),Ae.layers.enableAll(),Oe.unshift(Ae,Ae.geometry,Ae.material,0,0,null)):Ue&&Ue.isTexture&&(be===void 0&&(be=new Mesh(new PlaneGeometry(2,2),new ShaderMaterial({name:"BackgroundMaterial",uniforms:cloneUniforms(ShaderLib.background.uniforms),vertexShader:ShaderLib.background.vertexShader,fragmentShader:ShaderLib.background.fragmentShader,side:FrontSide,depthTest:!1,depthWrite:!1,fog:!1})),be.geometry.deleteAttribute("normal"),Object.defineProperty(be.material,"map",{get:function(){return this.uniforms.t2D.value}}),xe.update(be)),be.material.uniforms.t2D.value=Ue,be.material.uniforms.backgroundIntensity.value=Fe.backgroundIntensity,be.material.toneMapped=ColorManagement.getTransfer(Ue.colorSpace)!==SRGBTransfer,Ue.matrixAutoUpdate===!0&&Ue.updateMatrix(),be.material.uniforms.uvTransform.value.copy(Ue.matrix),(Se!==Ue||Ce!==Ue.version||Te!==fe.toneMapping)&&(be.material.needsUpdate=!0,Se=Ue,Ce=Ue.version,Te=fe.toneMapping),be.layers.enableAll(),Oe.unshift(be,be.geometry,be.material,0,0,null))}function Be(Oe,Fe){Oe.getRGB(_rgb,getUnlitUniformColorSpace(fe)),ge.buffers.color.setClear(_rgb.r,_rgb.g,_rgb.b,Fe,ve)}function Le(){Ae!==void 0&&(Ae.geometry.dispose(),Ae.material.dispose(),Ae=void 0),be!==void 0&&(be.geometry.dispose(),be.material.dispose(),be=void 0)}return{getClearColor:function(){return _e},setClearColor:function(Oe,Fe=1){_e.set(Oe),Ee=Fe,Be(_e,Ee)},getClearAlpha:function(){return Ee},setClearAlpha:function(Oe){Ee=Oe,Be(_e,Ee)},render:De,addToRenderList:Ie,dispose:Le}}function WebGLBindingStates(fe,K){const me=fe.getParameter(fe.MAX_VERTEX_ATTRIBS),ge={},xe=Ce(null);let ye=xe,ve=!1;function _e(Ge,Xe,qe,Qe,nt){let Nt=!1;const Ye=Se(Qe,qe,Xe);ye!==Ye&&(ye=Ye,be(ye.object)),Nt=Te(Ge,Qe,qe,nt),Nt&&Re(Ge,Qe,qe,nt),nt!==null&&K.update(nt,fe.ELEMENT_ARRAY_BUFFER),(Nt||ve)&&(ve=!1,Fe(Ge,Xe,qe,Qe),nt!==null&&fe.bindBuffer(fe.ELEMENT_ARRAY_BUFFER,K.get(nt).buffer))}function Ee(){return fe.createVertexArray()}function be(Ge){return fe.bindVertexArray(Ge)}function Ae(Ge){return fe.deleteVertexArray(Ge)}function Se(Ge,Xe,qe){const Qe=qe.wireframe===!0;let nt=ge[Ge.id];nt===void 0&&(nt={},ge[Ge.id]=nt);let Nt=nt[Xe.id];Nt===void 0&&(Nt={},nt[Xe.id]=Nt);let Ye=Nt[Qe];return Ye===void 0&&(Ye=Ce(Ee()),Nt[Qe]=Ye),Ye}function Ce(Ge){const Xe=[],qe=[],Qe=[];for(let nt=0;nt<me;nt++)Xe[nt]=0,qe[nt]=0,Qe[nt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Xe,enabledAttributes:qe,attributeDivisors:Qe,object:Ge,attributes:{},index:null}}function Te(Ge,Xe,qe,Qe){const nt=ye.attributes,Nt=Xe.attributes;let Ye=0;const at=qe.getAttributes();for(const rt in at)if(at[rt].location>=0){const Je=nt[rt];let Wt=Nt[rt];if(Wt===void 0&&(rt==="instanceMatrix"&&Ge.instanceMatrix&&(Wt=Ge.instanceMatrix),rt==="instanceColor"&&Ge.instanceColor&&(Wt=Ge.instanceColor)),Je===void 0||Je.attribute!==Wt||Wt&&Je.data!==Wt.data)return!0;Ye++}return ye.attributesNum!==Ye||ye.index!==Qe}function Re(Ge,Xe,qe,Qe){const nt={},Nt=Xe.attributes;let Ye=0;const at=qe.getAttributes();for(const rt in at)if(at[rt].location>=0){let Je=Nt[rt];Je===void 0&&(rt==="instanceMatrix"&&Ge.instanceMatrix&&(Je=Ge.instanceMatrix),rt==="instanceColor"&&Ge.instanceColor&&(Je=Ge.instanceColor));const Wt={};Wt.attribute=Je,Je&&Je.data&&(Wt.data=Je.data),nt[rt]=Wt,Ye++}ye.attributes=nt,ye.attributesNum=Ye,ye.index=Qe}function De(){const Ge=ye.newAttributes;for(let Xe=0,qe=Ge.length;Xe<qe;Xe++)Ge[Xe]=0}function Ie(Ge){Be(Ge,0)}function Be(Ge,Xe){const qe=ye.newAttributes,Qe=ye.enabledAttributes,nt=ye.attributeDivisors;qe[Ge]=1,Qe[Ge]===0&&(fe.enableVertexAttribArray(Ge),Qe[Ge]=1),nt[Ge]!==Xe&&(fe.vertexAttribDivisor(Ge,Xe),nt[Ge]=Xe)}function Le(){const Ge=ye.newAttributes,Xe=ye.enabledAttributes;for(let qe=0,Qe=Xe.length;qe<Qe;qe++)Xe[qe]!==Ge[qe]&&(fe.disableVertexAttribArray(qe),Xe[qe]=0)}function Oe(Ge,Xe,qe,Qe,nt,Nt,Ye){Ye===!0?fe.vertexAttribIPointer(Ge,Xe,qe,nt,Nt):fe.vertexAttribPointer(Ge,Xe,qe,Qe,nt,Nt)}function Fe(Ge,Xe,qe,Qe){De();const nt=Qe.attributes,Nt=qe.getAttributes(),Ye=Xe.defaultAttributeValues;for(const at in Nt){const rt=Nt[at];if(rt.location>=0){let Ft=nt[at];if(Ft===void 0&&(at==="instanceMatrix"&&Ge.instanceMatrix&&(Ft=Ge.instanceMatrix),at==="instanceColor"&&Ge.instanceColor&&(Ft=Ge.instanceColor)),Ft!==void 0){const Je=Ft.normalized,Wt=Ft.itemSize,Kt=K.get(Ft);if(Kt===void 0)continue;const Pt=Kt.buffer,Yt=Kt.type,Gt=Kt.bytesPerElement,an=Yt===fe.INT||Yt===fe.UNSIGNED_INT||Ft.gpuType===IntType;if(Ft.isInterleavedBufferAttribute){const pn=Ft.data,En=pn.stride,$n=Ft.offset;if(pn.isInstancedInterleavedBuffer){for(let Un=0;Un<rt.locationSize;Un++)Be(rt.location+Un,pn.meshPerAttribute);Ge.isInstancedMesh!==!0&&Qe._maxInstanceCount===void 0&&(Qe._maxInstanceCount=pn.meshPerAttribute*pn.count)}else for(let Un=0;Un<rt.locationSize;Un++)Ie(rt.location+Un);fe.bindBuffer(fe.ARRAY_BUFFER,Pt);for(let Un=0;Un<rt.locationSize;Un++)Oe(rt.location+Un,Wt/rt.locationSize,Yt,Je,En*Gt,($n+Wt/rt.locationSize*Un)*Gt,an)}else{if(Ft.isInstancedBufferAttribute){for(let pn=0;pn<rt.locationSize;pn++)Be(rt.location+pn,Ft.meshPerAttribute);Ge.isInstancedMesh!==!0&&Qe._maxInstanceCount===void 0&&(Qe._maxInstanceCount=Ft.meshPerAttribute*Ft.count)}else for(let pn=0;pn<rt.locationSize;pn++)Ie(rt.location+pn);fe.bindBuffer(fe.ARRAY_BUFFER,Pt);for(let pn=0;pn<rt.locationSize;pn++)Oe(rt.location+pn,Wt/rt.locationSize,Yt,Je,Wt*Gt,Wt/rt.locationSize*pn*Gt,an)}}else if(Ye!==void 0){const Je=Ye[at];if(Je!==void 0)switch(Je.length){case 2:fe.vertexAttrib2fv(rt.location,Je);break;case 3:fe.vertexAttrib3fv(rt.location,Je);break;case 4:fe.vertexAttrib4fv(rt.location,Je);break;default:fe.vertexAttrib1fv(rt.location,Je)}}}}Le()}function Ue(){ze();for(const Ge in ge){const Xe=ge[Ge];for(const qe in Xe){const Qe=Xe[qe];for(const nt in Qe)Ae(Qe[nt].object),delete Qe[nt];delete Xe[qe]}delete ge[Ge]}}function Ne(Ge){if(ge[Ge.id]===void 0)return;const Xe=ge[Ge.id];for(const qe in Xe){const Qe=Xe[qe];for(const nt in Qe)Ae(Qe[nt].object),delete Qe[nt];delete Xe[qe]}delete ge[Ge.id]}function He(Ge){for(const Xe in ge){const qe=ge[Xe];if(qe[Ge.id]===void 0)continue;const Qe=qe[Ge.id];for(const nt in Qe)Ae(Qe[nt].object),delete Qe[nt];delete qe[Ge.id]}}function ze(){je(),ve=!0,ye!==xe&&(ye=xe,be(ye.object))}function je(){xe.geometry=null,xe.program=null,xe.wireframe=!1}return{setup:_e,reset:ze,resetDefaultState:je,dispose:Ue,releaseStatesOfGeometry:Ne,releaseStatesOfProgram:He,initAttributes:De,enableAttribute:Ie,disableUnusedAttributes:Le}}function WebGLBufferRenderer(fe,K,me){let ge;function xe(be){ge=be}function ye(be,Ae){fe.drawArrays(ge,be,Ae),me.update(Ae,ge,1)}function ve(be,Ae,Se){Se!==0&&(fe.drawArraysInstanced(ge,be,Ae,Se),me.update(Ae,ge,Se))}function _e(be,Ae,Se){if(Se===0)return;K.get("WEBGL_multi_draw").multiDrawArraysWEBGL(ge,be,0,Ae,0,Se);let Te=0;for(let Re=0;Re<Se;Re++)Te+=Ae[Re];me.update(Te,ge,1)}function Ee(be,Ae,Se,Ce){if(Se===0)return;const Te=K.get("WEBGL_multi_draw");if(Te===null)for(let Re=0;Re<be.length;Re++)ve(be[Re],Ae[Re],Ce[Re]);else{Te.multiDrawArraysInstancedWEBGL(ge,be,0,Ae,0,Ce,0,Se);let Re=0;for(let De=0;De<Se;De++)Re+=Ae[De]*Ce[De];me.update(Re,ge,1)}}this.setMode=xe,this.render=ye,this.renderInstances=ve,this.renderMultiDraw=_e,this.renderMultiDrawInstances=Ee}function WebGLCapabilities(fe,K,me,ge){let xe;function ye(){if(xe!==void 0)return xe;if(K.has("EXT_texture_filter_anisotropic")===!0){const He=K.get("EXT_texture_filter_anisotropic");xe=fe.getParameter(He.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else xe=0;return xe}function ve(He){return!(He!==RGBAFormat&&ge.convert(He)!==fe.getParameter(fe.IMPLEMENTATION_COLOR_READ_FORMAT))}function _e(He){const ze=He===HalfFloatType&&(K.has("EXT_color_buffer_half_float")||K.has("EXT_color_buffer_float"));return!(He!==UnsignedByteType&&ge.convert(He)!==fe.getParameter(fe.IMPLEMENTATION_COLOR_READ_TYPE)&&He!==FloatType&&!ze)}function Ee(He){if(He==="highp"){if(fe.getShaderPrecisionFormat(fe.VERTEX_SHADER,fe.HIGH_FLOAT).precision>0&&fe.getShaderPrecisionFormat(fe.FRAGMENT_SHADER,fe.HIGH_FLOAT).precision>0)return"highp";He="mediump"}return He==="mediump"&&fe.getShaderPrecisionFormat(fe.VERTEX_SHADER,fe.MEDIUM_FLOAT).precision>0&&fe.getShaderPrecisionFormat(fe.FRAGMENT_SHADER,fe.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let be=me.precision!==void 0?me.precision:"highp";const Ae=Ee(be);Ae!==be&&(console.warn("THREE.WebGLRenderer:",be,"not supported, using",Ae,"instead."),be=Ae);const Se=me.logarithmicDepthBuffer===!0,Ce=me.reverseDepthBuffer===!0&&K.has("EXT_clip_control"),Te=fe.getParameter(fe.MAX_TEXTURE_IMAGE_UNITS),Re=fe.getParameter(fe.MAX_VERTEX_TEXTURE_IMAGE_UNITS),De=fe.getParameter(fe.MAX_TEXTURE_SIZE),Ie=fe.getParameter(fe.MAX_CUBE_MAP_TEXTURE_SIZE),Be=fe.getParameter(fe.MAX_VERTEX_ATTRIBS),Le=fe.getParameter(fe.MAX_VERTEX_UNIFORM_VECTORS),Oe=fe.getParameter(fe.MAX_VARYING_VECTORS),Fe=fe.getParameter(fe.MAX_FRAGMENT_UNIFORM_VECTORS),Ue=Re>0,Ne=fe.getParameter(fe.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:ye,getMaxPrecision:Ee,textureFormatReadable:ve,textureTypeReadable:_e,precision:be,logarithmicDepthBuffer:Se,reverseDepthBuffer:Ce,maxTextures:Te,maxVertexTextures:Re,maxTextureSize:De,maxCubemapSize:Ie,maxAttributes:Be,maxVertexUniforms:Le,maxVaryings:Oe,maxFragmentUniforms:Fe,vertexTextures:Ue,maxSamples:Ne}}function WebGLClipping(fe){const K=this;let me=null,ge=0,xe=!1,ye=!1;const ve=new Plane,_e=new Matrix3,Ee={value:null,needsUpdate:!1};this.uniform=Ee,this.numPlanes=0,this.numIntersection=0,this.init=function(Se,Ce){const Te=Se.length!==0||Ce||ge!==0||xe;return xe=Ce,ge=Se.length,Te},this.beginShadows=function(){ye=!0,Ae(null)},this.endShadows=function(){ye=!1},this.setGlobalState=function(Se,Ce){me=Ae(Se,Ce,0)},this.setState=function(Se,Ce,Te){const Re=Se.clippingPlanes,De=Se.clipIntersection,Ie=Se.clipShadows,Be=fe.get(Se);if(!xe||Re===null||Re.length===0||ye&&!Ie)ye?Ae(null):be();else{const Le=ye?0:ge,Oe=Le*4;let Fe=Be.clippingState||null;Ee.value=Fe,Fe=Ae(Re,Ce,Oe,Te);for(let Ue=0;Ue!==Oe;++Ue)Fe[Ue]=me[Ue];Be.clippingState=Fe,this.numIntersection=De?this.numPlanes:0,this.numPlanes+=Le}};function be(){Ee.value!==me&&(Ee.value=me,Ee.needsUpdate=ge>0),K.numPlanes=ge,K.numIntersection=0}function Ae(Se,Ce,Te,Re){const De=Se!==null?Se.length:0;let Ie=null;if(De!==0){if(Ie=Ee.value,Re!==!0||Ie===null){const Be=Te+De*4,Le=Ce.matrixWorldInverse;_e.getNormalMatrix(Le),(Ie===null||Ie.length<Be)&&(Ie=new Float32Array(Be));for(let Oe=0,Fe=Te;Oe!==De;++Oe,Fe+=4)ve.copy(Se[Oe]).applyMatrix4(Le,_e),ve.normal.toArray(Ie,Fe),Ie[Fe+3]=ve.constant}Ee.value=Ie,Ee.needsUpdate=!0}return K.numPlanes=De,K.numIntersection=0,Ie}}function WebGLCubeMaps(fe){let K=new WeakMap;function me(ve,_e){return _e===EquirectangularReflectionMapping?ve.mapping=CubeReflectionMapping:_e===EquirectangularRefractionMapping&&(ve.mapping=CubeRefractionMapping),ve}function ge(ve){if(ve&&ve.isTexture){const _e=ve.mapping;if(_e===EquirectangularReflectionMapping||_e===EquirectangularRefractionMapping)if(K.has(ve)){const Ee=K.get(ve).texture;return me(Ee,ve.mapping)}else{const Ee=ve.image;if(Ee&&Ee.height>0){const be=new WebGLCubeRenderTarget(Ee.height);return be.fromEquirectangularTexture(fe,ve),K.set(ve,be),ve.addEventListener("dispose",xe),me(be.texture,ve.mapping)}else return null}}return ve}function xe(ve){const _e=ve.target;_e.removeEventListener("dispose",xe);const Ee=K.get(_e);Ee!==void 0&&(K.delete(_e),Ee.dispose())}function ye(){K=new WeakMap}return{get:ge,dispose:ye}}const LOD_MIN=4,EXTRA_LOD_SIGMA=[.125,.215,.35,.446,.526,.582],MAX_SAMPLES=20,_flatCamera=new OrthographicCamera,_clearColor=new Color$1;let _oldTarget=null,_oldActiveCubeFace=0,_oldActiveMipmapLevel=0,_oldXrEnabled=!1;const PHI=(1+Math.sqrt(5))/2,INV_PHI=1/PHI,_axisDirections=[new Vector3(-PHI,INV_PHI,0),new Vector3(PHI,INV_PHI,0),new Vector3(-INV_PHI,0,PHI),new Vector3(INV_PHI,0,PHI),new Vector3(0,PHI,-INV_PHI),new Vector3(0,PHI,INV_PHI),new Vector3(-1,1,-1),new Vector3(1,1,-1),new Vector3(-1,1,1),new Vector3(1,1,1)],_origin=new Vector3;class PMREMGenerator{constructor(K){this._renderer=K,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(K,me=0,ge=.1,xe=100,ye={}){const{size:ve=256,position:_e=_origin}=ye;_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(ve);const Ee=this._allocateTargets();return Ee.depthBuffer=!0,this._sceneToCubeUV(K,ge,xe,Ee,_e),me>0&&this._blur(Ee,0,0,me),this._applyPMREM(Ee),this._cleanup(Ee),Ee}fromEquirectangular(K,me=null){return this._fromTexture(K,me)}fromCubemap(K,me=null){return this._fromTexture(K,me)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(K){this._lodMax=Math.floor(Math.log2(K)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let K=0;K<this._lodPlanes.length;K++)this._lodPlanes[K].dispose()}_cleanup(K){this._renderer.setRenderTarget(_oldTarget,_oldActiveCubeFace,_oldActiveMipmapLevel),this._renderer.xr.enabled=_oldXrEnabled,K.scissorTest=!1,_setViewport(K,0,0,K.width,K.height)}_fromTexture(K,me){K.mapping===CubeReflectionMapping||K.mapping===CubeRefractionMapping?this._setSize(K.image.length===0?16:K.image[0].width||K.image[0].image.width):this._setSize(K.image.width/4),_oldTarget=this._renderer.getRenderTarget(),_oldActiveCubeFace=this._renderer.getActiveCubeFace(),_oldActiveMipmapLevel=this._renderer.getActiveMipmapLevel(),_oldXrEnabled=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const ge=me||this._allocateTargets();return this._textureToCubeUV(K,ge),this._applyPMREM(ge),this._cleanup(ge),ge}_allocateTargets(){const K=3*Math.max(this._cubeSize,112),me=4*this._cubeSize,ge={magFilter:LinearFilter,minFilter:LinearFilter,generateMipmaps:!1,type:HalfFloatType,format:RGBAFormat,colorSpace:LinearSRGBColorSpace,depthBuffer:!1},xe=_createRenderTarget(K,me,ge);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==K||this._pingPongRenderTarget.height!==me){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(K,me,ge);const{_lodMax:ye}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=_createPlanes(ye)),this._blurMaterial=_getBlurShader(ye,K,me)}return xe}_compileMaterial(K){const me=new Mesh(this._lodPlanes[0],K);this._renderer.compile(me,_flatCamera)}_sceneToCubeUV(K,me,ge,xe,ye){const Ee=new PerspectiveCamera(90,1,me,ge),be=[1,-1,1,1,1,1],Ae=[1,1,1,-1,-1,-1],Se=this._renderer,Ce=Se.autoClear,Te=Se.toneMapping;Se.getClearColor(_clearColor),Se.toneMapping=NoToneMapping,Se.autoClear=!1;const Re=new MeshBasicMaterial({name:"PMREM.Background",side:BackSide,depthWrite:!1,depthTest:!1}),De=new Mesh(new BoxGeometry,Re);let Ie=!1;const Be=K.background;Be?Be.isColor&&(Re.color.copy(Be),K.background=null,Ie=!0):(Re.color.copy(_clearColor),Ie=!0);for(let Le=0;Le<6;Le++){const Oe=Le%3;Oe===0?(Ee.up.set(0,be[Le],0),Ee.position.set(ye.x,ye.y,ye.z),Ee.lookAt(ye.x+Ae[Le],ye.y,ye.z)):Oe===1?(Ee.up.set(0,0,be[Le]),Ee.position.set(ye.x,ye.y,ye.z),Ee.lookAt(ye.x,ye.y+Ae[Le],ye.z)):(Ee.up.set(0,be[Le],0),Ee.position.set(ye.x,ye.y,ye.z),Ee.lookAt(ye.x,ye.y,ye.z+Ae[Le]));const Fe=this._cubeSize;_setViewport(xe,Oe*Fe,Le>2?Fe:0,Fe,Fe),Se.setRenderTarget(xe),Ie&&Se.render(De,Ee),Se.render(K,Ee)}De.geometry.dispose(),De.material.dispose(),Se.toneMapping=Te,Se.autoClear=Ce,K.background=Be}_textureToCubeUV(K,me){const ge=this._renderer,xe=K.mapping===CubeReflectionMapping||K.mapping===CubeRefractionMapping;xe?(this._cubemapMaterial===null&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=K.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=_getEquirectMaterial());const ye=xe?this._cubemapMaterial:this._equirectMaterial,ve=new Mesh(this._lodPlanes[0],ye),_e=ye.uniforms;_e.envMap.value=K;const Ee=this._cubeSize;_setViewport(me,0,0,3*Ee,2*Ee),ge.setRenderTarget(me),ge.render(ve,_flatCamera)}_applyPMREM(K){const me=this._renderer,ge=me.autoClear;me.autoClear=!1;const xe=this._lodPlanes.length;for(let ye=1;ye<xe;ye++){const ve=Math.sqrt(this._sigmas[ye]*this._sigmas[ye]-this._sigmas[ye-1]*this._sigmas[ye-1]),_e=_axisDirections[(xe-ye-1)%_axisDirections.length];this._blur(K,ye-1,ye,ve,_e)}me.autoClear=ge}_blur(K,me,ge,xe,ye){const ve=this._pingPongRenderTarget;this._halfBlur(K,ve,me,ge,xe,"latitudinal",ye),this._halfBlur(ve,K,ge,ge,xe,"longitudinal",ye)}_halfBlur(K,me,ge,xe,ye,ve,_e){const Ee=this._renderer,be=this._blurMaterial;ve!=="latitudinal"&&ve!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const Ae=3,Se=new Mesh(this._lodPlanes[xe],be),Ce=be.uniforms,Te=this._sizeLods[ge]-1,Re=isFinite(ye)?Math.PI/(2*Te):2*Math.PI/(2*MAX_SAMPLES-1),De=ye/Re,Ie=isFinite(ye)?1+Math.floor(Ae*De):MAX_SAMPLES;Ie>MAX_SAMPLES&&console.warn(`sigmaRadians, ${ye}, is too large and will clip, as it requested ${Ie} samples when the maximum is set to ${MAX_SAMPLES}`);const Be=[];let Le=0;for(let He=0;He<MAX_SAMPLES;++He){const ze=He/De,je=Math.exp(-ze*ze/2);Be.push(je),He===0?Le+=je:He<Ie&&(Le+=2*je)}for(let He=0;He<Be.length;He++)Be[He]=Be[He]/Le;Ce.envMap.value=K.texture,Ce.samples.value=Ie,Ce.weights.value=Be,Ce.latitudinal.value=ve==="latitudinal",_e&&(Ce.poleAxis.value=_e);const{_lodMax:Oe}=this;Ce.dTheta.value=Re,Ce.mipInt.value=Oe-ge;const Fe=this._sizeLods[xe],Ue=3*Fe*(xe>Oe-LOD_MIN?xe-Oe+LOD_MIN:0),Ne=4*(this._cubeSize-Fe);_setViewport(me,Ue,Ne,3*Fe,2*Fe),Ee.setRenderTarget(me),Ee.render(Se,_flatCamera)}}function _createPlanes(fe){const K=[],me=[],ge=[];let xe=fe;const ye=fe-LOD_MIN+1+EXTRA_LOD_SIGMA.length;for(let ve=0;ve<ye;ve++){const _e=Math.pow(2,xe);me.push(_e);let Ee=1/_e;ve>fe-LOD_MIN?Ee=EXTRA_LOD_SIGMA[ve-fe+LOD_MIN-1]:ve===0&&(Ee=0),ge.push(Ee);const be=1/(_e-2),Ae=-be,Se=1+be,Ce=[Ae,Ae,Se,Ae,Se,Se,Ae,Ae,Se,Se,Ae,Se],Te=6,Re=6,De=3,Ie=2,Be=1,Le=new Float32Array(De*Re*Te),Oe=new Float32Array(Ie*Re*Te),Fe=new Float32Array(Be*Re*Te);for(let Ne=0;Ne<Te;Ne++){const He=Ne%3*2/3-1,ze=Ne>2?0:-1,je=[He,ze,0,He+2/3,ze,0,He+2/3,ze+1,0,He,ze,0,He+2/3,ze+1,0,He,ze+1,0];Le.set(je,De*Re*Ne),Oe.set(Ce,Ie*Re*Ne);const Ge=[Ne,Ne,Ne,Ne,Ne,Ne];Fe.set(Ge,Be*Re*Ne)}const Ue=new BufferGeometry;Ue.setAttribute("position",new BufferAttribute(Le,De)),Ue.setAttribute("uv",new BufferAttribute(Oe,Ie)),Ue.setAttribute("faceIndex",new BufferAttribute(Fe,Be)),K.push(Ue),xe>LOD_MIN&&xe--}return{lodPlanes:K,sizeLods:me,sigmas:ge}}function _createRenderTarget(fe,K,me){const ge=new WebGLRenderTarget(fe,K,me);return ge.texture.mapping=CubeUVReflectionMapping,ge.texture.name="PMREM.cubeUv",ge.scissorTest=!0,ge}function _setViewport(fe,K,me,ge,xe){fe.viewport.set(K,me,ge,xe),fe.scissor.set(K,me,ge,xe)}function _getBlurShader(fe,K,me){const ge=new Float32Array(MAX_SAMPLES),xe=new Vector3(0,1,0);return new ShaderMaterial({name:"SphericalGaussianBlur",defines:{n:MAX_SAMPLES,CUBEUV_TEXEL_WIDTH:1/K,CUBEUV_TEXEL_HEIGHT:1/me,CUBEUV_MAX_MIP:`${fe}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ge},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:xe}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getEquirectMaterial(){return new ShaderMaterial({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ShaderMaterial({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:NoBlending,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function WebGLCubeUVMaps(fe){let K=new WeakMap,me=null;function ge(_e){if(_e&&_e.isTexture){const Ee=_e.mapping,be=Ee===EquirectangularReflectionMapping||Ee===EquirectangularRefractionMapping,Ae=Ee===CubeReflectionMapping||Ee===CubeRefractionMapping;if(be||Ae){let Se=K.get(_e);const Ce=Se!==void 0?Se.texture.pmremVersion:0;if(_e.isRenderTargetTexture&&_e.pmremVersion!==Ce)return me===null&&(me=new PMREMGenerator(fe)),Se=be?me.fromEquirectangular(_e,Se):me.fromCubemap(_e,Se),Se.texture.pmremVersion=_e.pmremVersion,K.set(_e,Se),Se.texture;if(Se!==void 0)return Se.texture;{const Te=_e.image;return be&&Te&&Te.height>0||Ae&&Te&&xe(Te)?(me===null&&(me=new PMREMGenerator(fe)),Se=be?me.fromEquirectangular(_e):me.fromCubemap(_e),Se.texture.pmremVersion=_e.pmremVersion,K.set(_e,Se),_e.addEventListener("dispose",ye),Se.texture):null}}}return _e}function xe(_e){let Ee=0;const be=6;for(let Ae=0;Ae<be;Ae++)_e[Ae]!==void 0&&Ee++;return Ee===be}function ye(_e){const Ee=_e.target;Ee.removeEventListener("dispose",ye);const be=K.get(Ee);be!==void 0&&(K.delete(Ee),be.dispose())}function ve(){K=new WeakMap,me!==null&&(me.dispose(),me=null)}return{get:ge,dispose:ve}}function WebGLExtensions(fe){const K={};function me(ge){if(K[ge]!==void 0)return K[ge];let xe;switch(ge){case"WEBGL_depth_texture":xe=fe.getExtension("WEBGL_depth_texture")||fe.getExtension("MOZ_WEBGL_depth_texture")||fe.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":xe=fe.getExtension("EXT_texture_filter_anisotropic")||fe.getExtension("MOZ_EXT_texture_filter_anisotropic")||fe.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":xe=fe.getExtension("WEBGL_compressed_texture_s3tc")||fe.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||fe.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":xe=fe.getExtension("WEBGL_compressed_texture_pvrtc")||fe.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:xe=fe.getExtension(ge)}return K[ge]=xe,xe}return{has:function(ge){return me(ge)!==null},init:function(){me("EXT_color_buffer_float"),me("WEBGL_clip_cull_distance"),me("OES_texture_float_linear"),me("EXT_color_buffer_half_float"),me("WEBGL_multisampled_render_to_texture"),me("WEBGL_render_shared_exponent")},get:function(ge){const xe=me(ge);return xe===null&&warnOnce("THREE.WebGLRenderer: "+ge+" extension not supported."),xe}}}function WebGLGeometries(fe,K,me,ge){const xe={},ye=new WeakMap;function ve(Se){const Ce=Se.target;Ce.index!==null&&K.remove(Ce.index);for(const Re in Ce.attributes)K.remove(Ce.attributes[Re]);Ce.removeEventListener("dispose",ve),delete xe[Ce.id];const Te=ye.get(Ce);Te&&(K.remove(Te),ye.delete(Ce)),ge.releaseStatesOfGeometry(Ce),Ce.isInstancedBufferGeometry===!0&&delete Ce._maxInstanceCount,me.memory.geometries--}function _e(Se,Ce){return xe[Ce.id]===!0||(Ce.addEventListener("dispose",ve),xe[Ce.id]=!0,me.memory.geometries++),Ce}function Ee(Se){const Ce=Se.attributes;for(const Te in Ce)K.update(Ce[Te],fe.ARRAY_BUFFER)}function be(Se){const Ce=[],Te=Se.index,Re=Se.attributes.position;let De=0;if(Te!==null){const Le=Te.array;De=Te.version;for(let Oe=0,Fe=Le.length;Oe<Fe;Oe+=3){const Ue=Le[Oe+0],Ne=Le[Oe+1],He=Le[Oe+2];Ce.push(Ue,Ne,Ne,He,He,Ue)}}else if(Re!==void 0){const Le=Re.array;De=Re.version;for(let Oe=0,Fe=Le.length/3-1;Oe<Fe;Oe+=3){const Ue=Oe+0,Ne=Oe+1,He=Oe+2;Ce.push(Ue,Ne,Ne,He,He,Ue)}}else return;const Ie=new(arrayNeedsUint32(Ce)?Uint32BufferAttribute:Uint16BufferAttribute)(Ce,1);Ie.version=De;const Be=ye.get(Se);Be&&K.remove(Be),ye.set(Se,Ie)}function Ae(Se){const Ce=ye.get(Se);if(Ce){const Te=Se.index;Te!==null&&Ce.version<Te.version&&be(Se)}else be(Se);return ye.get(Se)}return{get:_e,update:Ee,getWireframeAttribute:Ae}}function WebGLIndexedBufferRenderer(fe,K,me){let ge;function xe(Ce){ge=Ce}let ye,ve;function _e(Ce){ye=Ce.type,ve=Ce.bytesPerElement}function Ee(Ce,Te){fe.drawElements(ge,Te,ye,Ce*ve),me.update(Te,ge,1)}function be(Ce,Te,Re){Re!==0&&(fe.drawElementsInstanced(ge,Te,ye,Ce*ve,Re),me.update(Te,ge,Re))}function Ae(Ce,Te,Re){if(Re===0)return;K.get("WEBGL_multi_draw").multiDrawElementsWEBGL(ge,Te,0,ye,Ce,0,Re);let Ie=0;for(let Be=0;Be<Re;Be++)Ie+=Te[Be];me.update(Ie,ge,1)}function Se(Ce,Te,Re,De){if(Re===0)return;const Ie=K.get("WEBGL_multi_draw");if(Ie===null)for(let Be=0;Be<Ce.length;Be++)be(Ce[Be]/ve,Te[Be],De[Be]);else{Ie.multiDrawElementsInstancedWEBGL(ge,Te,0,ye,Ce,0,De,0,Re);let Be=0;for(let Le=0;Le<Re;Le++)Be+=Te[Le]*De[Le];me.update(Be,ge,1)}}this.setMode=xe,this.setIndex=_e,this.render=Ee,this.renderInstances=be,this.renderMultiDraw=Ae,this.renderMultiDrawInstances=Se}function WebGLInfo(fe){const K={geometries:0,textures:0},me={frame:0,calls:0,triangles:0,points:0,lines:0};function ge(ye,ve,_e){switch(me.calls++,ve){case fe.TRIANGLES:me.triangles+=_e*(ye/3);break;case fe.LINES:me.lines+=_e*(ye/2);break;case fe.LINE_STRIP:me.lines+=_e*(ye-1);break;case fe.LINE_LOOP:me.lines+=_e*ye;break;case fe.POINTS:me.points+=_e*ye;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",ve);break}}function xe(){me.calls=0,me.triangles=0,me.points=0,me.lines=0}return{memory:K,render:me,programs:null,autoReset:!0,reset:xe,update:ge}}function WebGLMorphtargets(fe,K,me){const ge=new WeakMap,xe=new Vector4;function ye(ve,_e,Ee){const be=ve.morphTargetInfluences,Ae=_e.morphAttributes.position||_e.morphAttributes.normal||_e.morphAttributes.color,Se=Ae!==void 0?Ae.length:0;let Ce=ge.get(_e);if(Ce===void 0||Ce.count!==Se){let je=function(){He.dispose(),ge.delete(_e),_e.removeEventListener("dispose",je)};Ce!==void 0&&Ce.texture.dispose();const Te=_e.morphAttributes.position!==void 0,Re=_e.morphAttributes.normal!==void 0,De=_e.morphAttributes.color!==void 0,Ie=_e.morphAttributes.position||[],Be=_e.morphAttributes.normal||[],Le=_e.morphAttributes.color||[];let Oe=0;Te===!0&&(Oe=1),Re===!0&&(Oe=2),De===!0&&(Oe=3);let Fe=_e.attributes.position.count*Oe,Ue=1;Fe>K.maxTextureSize&&(Ue=Math.ceil(Fe/K.maxTextureSize),Fe=K.maxTextureSize);const Ne=new Float32Array(Fe*Ue*4*Se),He=new DataArrayTexture(Ne,Fe,Ue,Se);He.type=FloatType,He.needsUpdate=!0;const ze=Oe*4;for(let Ge=0;Ge<Se;Ge++){const Xe=Ie[Ge],qe=Be[Ge],Qe=Le[Ge],nt=Fe*Ue*4*Ge;for(let Nt=0;Nt<Xe.count;Nt++){const Ye=Nt*ze;Te===!0&&(xe.fromBufferAttribute(Xe,Nt),Ne[nt+Ye+0]=xe.x,Ne[nt+Ye+1]=xe.y,Ne[nt+Ye+2]=xe.z,Ne[nt+Ye+3]=0),Re===!0&&(xe.fromBufferAttribute(qe,Nt),Ne[nt+Ye+4]=xe.x,Ne[nt+Ye+5]=xe.y,Ne[nt+Ye+6]=xe.z,Ne[nt+Ye+7]=0),De===!0&&(xe.fromBufferAttribute(Qe,Nt),Ne[nt+Ye+8]=xe.x,Ne[nt+Ye+9]=xe.y,Ne[nt+Ye+10]=xe.z,Ne[nt+Ye+11]=Qe.itemSize===4?xe.w:1)}}Ce={count:Se,texture:He,size:new Vector2(Fe,Ue)},ge.set(_e,Ce),_e.addEventListener("dispose",je)}if(ve.isInstancedMesh===!0&&ve.morphTexture!==null)Ee.getUniforms().setValue(fe,"morphTexture",ve.morphTexture,me);else{let Te=0;for(let De=0;De<be.length;De++)Te+=be[De];const Re=_e.morphTargetsRelative?1:1-Te;Ee.getUniforms().setValue(fe,"morphTargetBaseInfluence",Re),Ee.getUniforms().setValue(fe,"morphTargetInfluences",be)}Ee.getUniforms().setValue(fe,"morphTargetsTexture",Ce.texture,me),Ee.getUniforms().setValue(fe,"morphTargetsTextureSize",Ce.size)}return{update:ye}}function WebGLObjects(fe,K,me,ge){let xe=new WeakMap;function ye(Ee){const be=ge.render.frame,Ae=Ee.geometry,Se=K.get(Ee,Ae);if(xe.get(Se)!==be&&(K.update(Se),xe.set(Se,be)),Ee.isInstancedMesh&&(Ee.hasEventListener("dispose",_e)===!1&&Ee.addEventListener("dispose",_e),xe.get(Ee)!==be&&(me.update(Ee.instanceMatrix,fe.ARRAY_BUFFER),Ee.instanceColor!==null&&me.update(Ee.instanceColor,fe.ARRAY_BUFFER),xe.set(Ee,be))),Ee.isSkinnedMesh){const Ce=Ee.skeleton;xe.get(Ce)!==be&&(Ce.update(),xe.set(Ce,be))}return Se}function ve(){xe=new WeakMap}function _e(Ee){const be=Ee.target;be.removeEventListener("dispose",_e),me.remove(be.instanceMatrix),be.instanceColor!==null&&me.remove(be.instanceColor)}return{update:ye,dispose:ve}}const emptyTexture=new Texture,emptyShadowTexture=new DepthTexture(1,1),emptyArrayTexture=new DataArrayTexture,empty3dTexture=new Data3DTexture,emptyCubeTexture=new CubeTexture,arrayCacheF32=[],arrayCacheI32=[],mat4array=new Float32Array(16),mat3array=new Float32Array(9),mat2array=new Float32Array(4);function flatten(fe,K,me){const ge=fe[0];if(ge<=0||ge>0)return fe;const xe=K*me;let ye=arrayCacheF32[xe];if(ye===void 0&&(ye=new Float32Array(xe),arrayCacheF32[xe]=ye),K!==0){ge.toArray(ye,0);for(let ve=1,_e=0;ve!==K;++ve)_e+=me,fe[ve].toArray(ye,_e)}return ye}function arraysEqual(fe,K){if(fe.length!==K.length)return!1;for(let me=0,ge=fe.length;me<ge;me++)if(fe[me]!==K[me])return!1;return!0}function copyArray(fe,K){for(let me=0,ge=K.length;me<ge;me++)fe[me]=K[me]}function allocTexUnits(fe,K){let me=arrayCacheI32[K];me===void 0&&(me=new Int32Array(K),arrayCacheI32[K]=me);for(let ge=0;ge!==K;++ge)me[ge]=fe.allocateTextureUnit();return me}function setValueV1f(fe,K){const me=this.cache;me[0]!==K&&(fe.uniform1f(this.addr,K),me[0]=K)}function setValueV2f(fe,K){const me=this.cache;if(K.x!==void 0)(me[0]!==K.x||me[1]!==K.y)&&(fe.uniform2f(this.addr,K.x,K.y),me[0]=K.x,me[1]=K.y);else{if(arraysEqual(me,K))return;fe.uniform2fv(this.addr,K),copyArray(me,K)}}function setValueV3f(fe,K){const me=this.cache;if(K.x!==void 0)(me[0]!==K.x||me[1]!==K.y||me[2]!==K.z)&&(fe.uniform3f(this.addr,K.x,K.y,K.z),me[0]=K.x,me[1]=K.y,me[2]=K.z);else if(K.r!==void 0)(me[0]!==K.r||me[1]!==K.g||me[2]!==K.b)&&(fe.uniform3f(this.addr,K.r,K.g,K.b),me[0]=K.r,me[1]=K.g,me[2]=K.b);else{if(arraysEqual(me,K))return;fe.uniform3fv(this.addr,K),copyArray(me,K)}}function setValueV4f(fe,K){const me=this.cache;if(K.x!==void 0)(me[0]!==K.x||me[1]!==K.y||me[2]!==K.z||me[3]!==K.w)&&(fe.uniform4f(this.addr,K.x,K.y,K.z,K.w),me[0]=K.x,me[1]=K.y,me[2]=K.z,me[3]=K.w);else{if(arraysEqual(me,K))return;fe.uniform4fv(this.addr,K),copyArray(me,K)}}function setValueM2(fe,K){const me=this.cache,ge=K.elements;if(ge===void 0){if(arraysEqual(me,K))return;fe.uniformMatrix2fv(this.addr,!1,K),copyArray(me,K)}else{if(arraysEqual(me,ge))return;mat2array.set(ge),fe.uniformMatrix2fv(this.addr,!1,mat2array),copyArray(me,ge)}}function setValueM3(fe,K){const me=this.cache,ge=K.elements;if(ge===void 0){if(arraysEqual(me,K))return;fe.uniformMatrix3fv(this.addr,!1,K),copyArray(me,K)}else{if(arraysEqual(me,ge))return;mat3array.set(ge),fe.uniformMatrix3fv(this.addr,!1,mat3array),copyArray(me,ge)}}function setValueM4(fe,K){const me=this.cache,ge=K.elements;if(ge===void 0){if(arraysEqual(me,K))return;fe.uniformMatrix4fv(this.addr,!1,K),copyArray(me,K)}else{if(arraysEqual(me,ge))return;mat4array.set(ge),fe.uniformMatrix4fv(this.addr,!1,mat4array),copyArray(me,ge)}}function setValueV1i(fe,K){const me=this.cache;me[0]!==K&&(fe.uniform1i(this.addr,K),me[0]=K)}function setValueV2i(fe,K){const me=this.cache;if(K.x!==void 0)(me[0]!==K.x||me[1]!==K.y)&&(fe.uniform2i(this.addr,K.x,K.y),me[0]=K.x,me[1]=K.y);else{if(arraysEqual(me,K))return;fe.uniform2iv(this.addr,K),copyArray(me,K)}}function setValueV3i(fe,K){const me=this.cache;if(K.x!==void 0)(me[0]!==K.x||me[1]!==K.y||me[2]!==K.z)&&(fe.uniform3i(this.addr,K.x,K.y,K.z),me[0]=K.x,me[1]=K.y,me[2]=K.z);else{if(arraysEqual(me,K))return;fe.uniform3iv(this.addr,K),copyArray(me,K)}}function setValueV4i(fe,K){const me=this.cache;if(K.x!==void 0)(me[0]!==K.x||me[1]!==K.y||me[2]!==K.z||me[3]!==K.w)&&(fe.uniform4i(this.addr,K.x,K.y,K.z,K.w),me[0]=K.x,me[1]=K.y,me[2]=K.z,me[3]=K.w);else{if(arraysEqual(me,K))return;fe.uniform4iv(this.addr,K),copyArray(me,K)}}function setValueV1ui(fe,K){const me=this.cache;me[0]!==K&&(fe.uniform1ui(this.addr,K),me[0]=K)}function setValueV2ui(fe,K){const me=this.cache;if(K.x!==void 0)(me[0]!==K.x||me[1]!==K.y)&&(fe.uniform2ui(this.addr,K.x,K.y),me[0]=K.x,me[1]=K.y);else{if(arraysEqual(me,K))return;fe.uniform2uiv(this.addr,K),copyArray(me,K)}}function setValueV3ui(fe,K){const me=this.cache;if(K.x!==void 0)(me[0]!==K.x||me[1]!==K.y||me[2]!==K.z)&&(fe.uniform3ui(this.addr,K.x,K.y,K.z),me[0]=K.x,me[1]=K.y,me[2]=K.z);else{if(arraysEqual(me,K))return;fe.uniform3uiv(this.addr,K),copyArray(me,K)}}function setValueV4ui(fe,K){const me=this.cache;if(K.x!==void 0)(me[0]!==K.x||me[1]!==K.y||me[2]!==K.z||me[3]!==K.w)&&(fe.uniform4ui(this.addr,K.x,K.y,K.z,K.w),me[0]=K.x,me[1]=K.y,me[2]=K.z,me[3]=K.w);else{if(arraysEqual(me,K))return;fe.uniform4uiv(this.addr,K),copyArray(me,K)}}function setValueT1(fe,K,me){const ge=this.cache,xe=me.allocateTextureUnit();ge[0]!==xe&&(fe.uniform1i(this.addr,xe),ge[0]=xe);let ye;this.type===fe.SAMPLER_2D_SHADOW?(emptyShadowTexture.compareFunction=LessEqualCompare,ye=emptyShadowTexture):ye=emptyTexture,me.setTexture2D(K||ye,xe)}function setValueT3D1(fe,K,me){const ge=this.cache,xe=me.allocateTextureUnit();ge[0]!==xe&&(fe.uniform1i(this.addr,xe),ge[0]=xe),me.setTexture3D(K||empty3dTexture,xe)}function setValueT6(fe,K,me){const ge=this.cache,xe=me.allocateTextureUnit();ge[0]!==xe&&(fe.uniform1i(this.addr,xe),ge[0]=xe),me.setTextureCube(K||emptyCubeTexture,xe)}function setValueT2DArray1(fe,K,me){const ge=this.cache,xe=me.allocateTextureUnit();ge[0]!==xe&&(fe.uniform1i(this.addr,xe),ge[0]=xe),me.setTexture2DArray(K||emptyArrayTexture,xe)}function getSingularSetter(fe){switch(fe){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}function setValueV1fArray(fe,K){fe.uniform1fv(this.addr,K)}function setValueV2fArray(fe,K){const me=flatten(K,this.size,2);fe.uniform2fv(this.addr,me)}function setValueV3fArray(fe,K){const me=flatten(K,this.size,3);fe.uniform3fv(this.addr,me)}function setValueV4fArray(fe,K){const me=flatten(K,this.size,4);fe.uniform4fv(this.addr,me)}function setValueM2Array(fe,K){const me=flatten(K,this.size,4);fe.uniformMatrix2fv(this.addr,!1,me)}function setValueM3Array(fe,K){const me=flatten(K,this.size,9);fe.uniformMatrix3fv(this.addr,!1,me)}function setValueM4Array(fe,K){const me=flatten(K,this.size,16);fe.uniformMatrix4fv(this.addr,!1,me)}function setValueV1iArray(fe,K){fe.uniform1iv(this.addr,K)}function setValueV2iArray(fe,K){fe.uniform2iv(this.addr,K)}function setValueV3iArray(fe,K){fe.uniform3iv(this.addr,K)}function setValueV4iArray(fe,K){fe.uniform4iv(this.addr,K)}function setValueV1uiArray(fe,K){fe.uniform1uiv(this.addr,K)}function setValueV2uiArray(fe,K){fe.uniform2uiv(this.addr,K)}function setValueV3uiArray(fe,K){fe.uniform3uiv(this.addr,K)}function setValueV4uiArray(fe,K){fe.uniform4uiv(this.addr,K)}function setValueT1Array(fe,K,me){const ge=this.cache,xe=K.length,ye=allocTexUnits(me,xe);arraysEqual(ge,ye)||(fe.uniform1iv(this.addr,ye),copyArray(ge,ye));for(let ve=0;ve!==xe;++ve)me.setTexture2D(K[ve]||emptyTexture,ye[ve])}function setValueT3DArray(fe,K,me){const ge=this.cache,xe=K.length,ye=allocTexUnits(me,xe);arraysEqual(ge,ye)||(fe.uniform1iv(this.addr,ye),copyArray(ge,ye));for(let ve=0;ve!==xe;++ve)me.setTexture3D(K[ve]||empty3dTexture,ye[ve])}function setValueT6Array(fe,K,me){const ge=this.cache,xe=K.length,ye=allocTexUnits(me,xe);arraysEqual(ge,ye)||(fe.uniform1iv(this.addr,ye),copyArray(ge,ye));for(let ve=0;ve!==xe;++ve)me.setTextureCube(K[ve]||emptyCubeTexture,ye[ve])}function setValueT2DArrayArray(fe,K,me){const ge=this.cache,xe=K.length,ye=allocTexUnits(me,xe);arraysEqual(ge,ye)||(fe.uniform1iv(this.addr,ye),copyArray(ge,ye));for(let ve=0;ve!==xe;++ve)me.setTexture2DArray(K[ve]||emptyArrayTexture,ye[ve])}function getPureArraySetter(fe){switch(fe){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}class SingleUniform{constructor(K,me,ge){this.id=K,this.addr=ge,this.cache=[],this.type=me.type,this.setValue=getSingularSetter(me.type)}}class PureArrayUniform{constructor(K,me,ge){this.id=K,this.addr=ge,this.cache=[],this.type=me.type,this.size=me.size,this.setValue=getPureArraySetter(me.type)}}class StructuredUniform{constructor(K){this.id=K,this.seq=[],this.map={}}setValue(K,me,ge){const xe=this.seq;for(let ye=0,ve=xe.length;ye!==ve;++ye){const _e=xe[ye];_e.setValue(K,me[_e.id],ge)}}}const RePathPart=/(\w+)(\])?(\[|\.)?/g;function addUniform(fe,K){fe.seq.push(K),fe.map[K.id]=K}function parseUniform(fe,K,me){const ge=fe.name,xe=ge.length;for(RePathPart.lastIndex=0;;){const ye=RePathPart.exec(ge),ve=RePathPart.lastIndex;let _e=ye[1];const Ee=ye[2]==="]",be=ye[3];if(Ee&&(_e=_e|0),be===void 0||be==="["&&ve+2===xe){addUniform(me,be===void 0?new SingleUniform(_e,fe,K):new PureArrayUniform(_e,fe,K));break}else{let Se=me.map[_e];Se===void 0&&(Se=new StructuredUniform(_e),addUniform(me,Se)),me=Se}}}class WebGLUniforms{constructor(K,me){this.seq=[],this.map={};const ge=K.getProgramParameter(me,K.ACTIVE_UNIFORMS);for(let xe=0;xe<ge;++xe){const ye=K.getActiveUniform(me,xe),ve=K.getUniformLocation(me,ye.name);parseUniform(ye,ve,this)}}setValue(K,me,ge,xe){const ye=this.map[me];ye!==void 0&&ye.setValue(K,ge,xe)}setOptional(K,me,ge){const xe=me[ge];xe!==void 0&&this.setValue(K,ge,xe)}static upload(K,me,ge,xe){for(let ye=0,ve=me.length;ye!==ve;++ye){const _e=me[ye],Ee=ge[_e.id];Ee.needsUpdate!==!1&&_e.setValue(K,Ee.value,xe)}}static seqWithValue(K,me){const ge=[];for(let xe=0,ye=K.length;xe!==ye;++xe){const ve=K[xe];ve.id in me&&ge.push(ve)}return ge}}function WebGLShader(fe,K,me){const ge=fe.createShader(K);return fe.shaderSource(ge,me),fe.compileShader(ge),ge}const COMPLETION_STATUS_KHR=37297;let programIdCount=0;function handleSource(fe,K){const me=fe.split(`
`),ge=[],xe=Math.max(K-6,0),ye=Math.min(K+6,me.length);for(let ve=xe;ve<ye;ve++){const _e=ve+1;ge.push(`${_e===K?">":" "} ${_e}: ${me[ve]}`)}return ge.join(`
`)}const _m0=new Matrix3;function getEncodingComponents(fe){ColorManagement._getMatrix(_m0,ColorManagement.workingColorSpace,fe);const K=`mat3( ${_m0.elements.map(me=>me.toFixed(4))} )`;switch(ColorManagement.getTransfer(fe)){case LinearTransfer:return[K,"LinearTransferOETF"];case SRGBTransfer:return[K,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",fe),[K,"LinearTransferOETF"]}}function getShaderErrors(fe,K,me){const ge=fe.getShaderParameter(K,fe.COMPILE_STATUS),xe=fe.getShaderInfoLog(K).trim();if(ge&&xe==="")return"";const ye=/ERROR: 0:(\d+)/.exec(xe);if(ye){const ve=parseInt(ye[1]);return me.toUpperCase()+`

`+xe+`

`+handleSource(fe.getShaderSource(K),ve)}else return xe}function getTexelEncodingFunction(fe,K){const me=getEncodingComponents(K);return[`vec4 ${fe}( vec4 value ) {`,`	return ${me[1]}( vec4( value.rgb * ${me[0]}, value.a ) );`,"}"].join(`
`)}function getToneMappingFunction(fe,K){let me;switch(K){case LinearToneMapping:me="Linear";break;case ReinhardToneMapping:me="Reinhard";break;case CineonToneMapping:me="Cineon";break;case ACESFilmicToneMapping:me="ACESFilmic";break;case AgXToneMapping:me="AgX";break;case NeutralToneMapping:me="Neutral";break;case CustomToneMapping:me="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",K),me="Linear"}return"vec3 "+fe+"( vec3 color ) { return "+me+"ToneMapping( color ); }"}const _v0=new Vector3;function getLuminanceFunction(){ColorManagement.getLuminanceCoefficients(_v0);const fe=_v0.x.toFixed(4),K=_v0.y.toFixed(4),me=_v0.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${fe}, ${K}, ${me} );`,"	return dot( weights, rgb );","}"].join(`
`)}function generateVertexExtensions(fe){return[fe.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",fe.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join(`
`)}function generateDefines(fe){const K=[];for(const me in fe){const ge=fe[me];ge!==!1&&K.push("#define "+me+" "+ge)}return K.join(`
`)}function fetchAttributeLocations(fe,K){const me={},ge=fe.getProgramParameter(K,fe.ACTIVE_ATTRIBUTES);for(let xe=0;xe<ge;xe++){const ye=fe.getActiveAttrib(K,xe),ve=ye.name;let _e=1;ye.type===fe.FLOAT_MAT2&&(_e=2),ye.type===fe.FLOAT_MAT3&&(_e=3),ye.type===fe.FLOAT_MAT4&&(_e=4),me[ve]={type:ye.type,location:fe.getAttribLocation(K,ve),locationSize:_e}}return me}function filterEmptyLine(fe){return fe!==""}function replaceLightNums(fe,K){const me=K.numSpotLightShadows+K.numSpotLightMaps-K.numSpotLightShadowsWithMaps;return fe.replace(/NUM_DIR_LIGHTS/g,K.numDirLights).replace(/NUM_SPOT_LIGHTS/g,K.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,K.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,me).replace(/NUM_RECT_AREA_LIGHTS/g,K.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,K.numPointLights).replace(/NUM_HEMI_LIGHTS/g,K.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,K.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,K.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,K.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,K.numPointLightShadows)}function replaceClippingPlaneNums(fe,K){return fe.replace(/NUM_CLIPPING_PLANES/g,K.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,K.numClippingPlanes-K.numClipIntersection)}const includePattern=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(fe){return fe.replace(includePattern,includeReplacer)}const shaderChunkMap=new Map;function includeReplacer(fe,K){let me=ShaderChunk[K];if(me===void 0){const ge=shaderChunkMap.get(K);if(ge!==void 0)me=ShaderChunk[ge],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',K,ge);else throw new Error("Can not resolve #include <"+K+">")}return resolveIncludes(me)}const unrollLoopPattern=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(fe){return fe.replace(unrollLoopPattern,loopReplacer)}function loopReplacer(fe,K,me,ge){let xe="";for(let ye=parseInt(K);ye<parseInt(me);ye++)xe+=ge.replace(/\[\s*i\s*\]/g,"[ "+ye+" ]").replace(/UNROLLED_LOOP_INDEX/g,ye);return xe}function generatePrecision(fe){let K=`precision ${fe.precision} float;
	precision ${fe.precision} int;
	precision ${fe.precision} sampler2D;
	precision ${fe.precision} samplerCube;
	precision ${fe.precision} sampler3D;
	precision ${fe.precision} sampler2DArray;
	precision ${fe.precision} sampler2DShadow;
	precision ${fe.precision} samplerCubeShadow;
	precision ${fe.precision} sampler2DArrayShadow;
	precision ${fe.precision} isampler2D;
	precision ${fe.precision} isampler3D;
	precision ${fe.precision} isamplerCube;
	precision ${fe.precision} isampler2DArray;
	precision ${fe.precision} usampler2D;
	precision ${fe.precision} usampler3D;
	precision ${fe.precision} usamplerCube;
	precision ${fe.precision} usampler2DArray;
	`;return fe.precision==="highp"?K+=`
#define HIGH_PRECISION`:fe.precision==="mediump"?K+=`
#define MEDIUM_PRECISION`:fe.precision==="lowp"&&(K+=`
#define LOW_PRECISION`),K}function generateShadowMapTypeDefine(fe){let K="SHADOWMAP_TYPE_BASIC";return fe.shadowMapType===PCFShadowMap?K="SHADOWMAP_TYPE_PCF":fe.shadowMapType===PCFSoftShadowMap?K="SHADOWMAP_TYPE_PCF_SOFT":fe.shadowMapType===VSMShadowMap&&(K="SHADOWMAP_TYPE_VSM"),K}function generateEnvMapTypeDefine(fe){let K="ENVMAP_TYPE_CUBE";if(fe.envMap)switch(fe.envMapMode){case CubeReflectionMapping:case CubeRefractionMapping:K="ENVMAP_TYPE_CUBE";break;case CubeUVReflectionMapping:K="ENVMAP_TYPE_CUBE_UV";break}return K}function generateEnvMapModeDefine(fe){let K="ENVMAP_MODE_REFLECTION";if(fe.envMap)switch(fe.envMapMode){case CubeRefractionMapping:K="ENVMAP_MODE_REFRACTION";break}return K}function generateEnvMapBlendingDefine(fe){let K="ENVMAP_BLENDING_NONE";if(fe.envMap)switch(fe.combine){case MultiplyOperation:K="ENVMAP_BLENDING_MULTIPLY";break;case MixOperation:K="ENVMAP_BLENDING_MIX";break;case AddOperation:K="ENVMAP_BLENDING_ADD";break}return K}function generateCubeUVSize(fe){const K=fe.envMapCubeUVHeight;if(K===null)return null;const me=Math.log2(K)-2,ge=1/K;return{texelWidth:1/(3*Math.max(Math.pow(2,me),7*16)),texelHeight:ge,maxMip:me}}function WebGLProgram(fe,K,me,ge){const xe=fe.getContext(),ye=me.defines;let ve=me.vertexShader,_e=me.fragmentShader;const Ee=generateShadowMapTypeDefine(me),be=generateEnvMapTypeDefine(me),Ae=generateEnvMapModeDefine(me),Se=generateEnvMapBlendingDefine(me),Ce=generateCubeUVSize(me),Te=generateVertexExtensions(me),Re=generateDefines(ye),De=xe.createProgram();let Ie,Be,Le=me.glslVersion?"#version "+me.glslVersion+`
`:"";me.isRawShaderMaterial?(Ie=["#define SHADER_TYPE "+me.shaderType,"#define SHADER_NAME "+me.shaderName,Re].filter(filterEmptyLine).join(`
`),Ie.length>0&&(Ie+=`
`),Be=["#define SHADER_TYPE "+me.shaderType,"#define SHADER_NAME "+me.shaderName,Re].filter(filterEmptyLine).join(`
`),Be.length>0&&(Be+=`
`)):(Ie=[generatePrecision(me),"#define SHADER_TYPE "+me.shaderType,"#define SHADER_NAME "+me.shaderName,Re,me.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",me.batching?"#define USE_BATCHING":"",me.batchingColor?"#define USE_BATCHING_COLOR":"",me.instancing?"#define USE_INSTANCING":"",me.instancingColor?"#define USE_INSTANCING_COLOR":"",me.instancingMorph?"#define USE_INSTANCING_MORPH":"",me.useFog&&me.fog?"#define USE_FOG":"",me.useFog&&me.fogExp2?"#define FOG_EXP2":"",me.map?"#define USE_MAP":"",me.envMap?"#define USE_ENVMAP":"",me.envMap?"#define "+Ae:"",me.lightMap?"#define USE_LIGHTMAP":"",me.aoMap?"#define USE_AOMAP":"",me.bumpMap?"#define USE_BUMPMAP":"",me.normalMap?"#define USE_NORMALMAP":"",me.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",me.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",me.displacementMap?"#define USE_DISPLACEMENTMAP":"",me.emissiveMap?"#define USE_EMISSIVEMAP":"",me.anisotropy?"#define USE_ANISOTROPY":"",me.anisotropyMap?"#define USE_ANISOTROPYMAP":"",me.clearcoatMap?"#define USE_CLEARCOATMAP":"",me.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",me.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",me.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",me.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",me.specularMap?"#define USE_SPECULARMAP":"",me.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",me.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",me.roughnessMap?"#define USE_ROUGHNESSMAP":"",me.metalnessMap?"#define USE_METALNESSMAP":"",me.alphaMap?"#define USE_ALPHAMAP":"",me.alphaHash?"#define USE_ALPHAHASH":"",me.transmission?"#define USE_TRANSMISSION":"",me.transmissionMap?"#define USE_TRANSMISSIONMAP":"",me.thicknessMap?"#define USE_THICKNESSMAP":"",me.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",me.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",me.mapUv?"#define MAP_UV "+me.mapUv:"",me.alphaMapUv?"#define ALPHAMAP_UV "+me.alphaMapUv:"",me.lightMapUv?"#define LIGHTMAP_UV "+me.lightMapUv:"",me.aoMapUv?"#define AOMAP_UV "+me.aoMapUv:"",me.emissiveMapUv?"#define EMISSIVEMAP_UV "+me.emissiveMapUv:"",me.bumpMapUv?"#define BUMPMAP_UV "+me.bumpMapUv:"",me.normalMapUv?"#define NORMALMAP_UV "+me.normalMapUv:"",me.displacementMapUv?"#define DISPLACEMENTMAP_UV "+me.displacementMapUv:"",me.metalnessMapUv?"#define METALNESSMAP_UV "+me.metalnessMapUv:"",me.roughnessMapUv?"#define ROUGHNESSMAP_UV "+me.roughnessMapUv:"",me.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+me.anisotropyMapUv:"",me.clearcoatMapUv?"#define CLEARCOATMAP_UV "+me.clearcoatMapUv:"",me.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+me.clearcoatNormalMapUv:"",me.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+me.clearcoatRoughnessMapUv:"",me.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+me.iridescenceMapUv:"",me.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+me.iridescenceThicknessMapUv:"",me.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+me.sheenColorMapUv:"",me.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+me.sheenRoughnessMapUv:"",me.specularMapUv?"#define SPECULARMAP_UV "+me.specularMapUv:"",me.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+me.specularColorMapUv:"",me.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+me.specularIntensityMapUv:"",me.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+me.transmissionMapUv:"",me.thicknessMapUv?"#define THICKNESSMAP_UV "+me.thicknessMapUv:"",me.vertexTangents&&me.flatShading===!1?"#define USE_TANGENT":"",me.vertexColors?"#define USE_COLOR":"",me.vertexAlphas?"#define USE_COLOR_ALPHA":"",me.vertexUv1s?"#define USE_UV1":"",me.vertexUv2s?"#define USE_UV2":"",me.vertexUv3s?"#define USE_UV3":"",me.pointsUvs?"#define USE_POINTS_UV":"",me.flatShading?"#define FLAT_SHADED":"",me.skinning?"#define USE_SKINNING":"",me.morphTargets?"#define USE_MORPHTARGETS":"",me.morphNormals&&me.flatShading===!1?"#define USE_MORPHNORMALS":"",me.morphColors?"#define USE_MORPHCOLORS":"",me.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+me.morphTextureStride:"",me.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+me.morphTargetsCount:"",me.doubleSided?"#define DOUBLE_SIDED":"",me.flipSided?"#define FLIP_SIDED":"",me.shadowMapEnabled?"#define USE_SHADOWMAP":"",me.shadowMapEnabled?"#define "+Ee:"",me.sizeAttenuation?"#define USE_SIZEATTENUATION":"",me.numLightProbes>0?"#define USE_LIGHT_PROBES":"",me.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",me.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(filterEmptyLine).join(`
`),Be=[generatePrecision(me),"#define SHADER_TYPE "+me.shaderType,"#define SHADER_NAME "+me.shaderName,Re,me.useFog&&me.fog?"#define USE_FOG":"",me.useFog&&me.fogExp2?"#define FOG_EXP2":"",me.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",me.map?"#define USE_MAP":"",me.matcap?"#define USE_MATCAP":"",me.envMap?"#define USE_ENVMAP":"",me.envMap?"#define "+be:"",me.envMap?"#define "+Ae:"",me.envMap?"#define "+Se:"",Ce?"#define CUBEUV_TEXEL_WIDTH "+Ce.texelWidth:"",Ce?"#define CUBEUV_TEXEL_HEIGHT "+Ce.texelHeight:"",Ce?"#define CUBEUV_MAX_MIP "+Ce.maxMip+".0":"",me.lightMap?"#define USE_LIGHTMAP":"",me.aoMap?"#define USE_AOMAP":"",me.bumpMap?"#define USE_BUMPMAP":"",me.normalMap?"#define USE_NORMALMAP":"",me.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",me.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",me.emissiveMap?"#define USE_EMISSIVEMAP":"",me.anisotropy?"#define USE_ANISOTROPY":"",me.anisotropyMap?"#define USE_ANISOTROPYMAP":"",me.clearcoat?"#define USE_CLEARCOAT":"",me.clearcoatMap?"#define USE_CLEARCOATMAP":"",me.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",me.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",me.dispersion?"#define USE_DISPERSION":"",me.iridescence?"#define USE_IRIDESCENCE":"",me.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",me.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",me.specularMap?"#define USE_SPECULARMAP":"",me.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",me.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",me.roughnessMap?"#define USE_ROUGHNESSMAP":"",me.metalnessMap?"#define USE_METALNESSMAP":"",me.alphaMap?"#define USE_ALPHAMAP":"",me.alphaTest?"#define USE_ALPHATEST":"",me.alphaHash?"#define USE_ALPHAHASH":"",me.sheen?"#define USE_SHEEN":"",me.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",me.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",me.transmission?"#define USE_TRANSMISSION":"",me.transmissionMap?"#define USE_TRANSMISSIONMAP":"",me.thicknessMap?"#define USE_THICKNESSMAP":"",me.vertexTangents&&me.flatShading===!1?"#define USE_TANGENT":"",me.vertexColors||me.instancingColor||me.batchingColor?"#define USE_COLOR":"",me.vertexAlphas?"#define USE_COLOR_ALPHA":"",me.vertexUv1s?"#define USE_UV1":"",me.vertexUv2s?"#define USE_UV2":"",me.vertexUv3s?"#define USE_UV3":"",me.pointsUvs?"#define USE_POINTS_UV":"",me.gradientMap?"#define USE_GRADIENTMAP":"",me.flatShading?"#define FLAT_SHADED":"",me.doubleSided?"#define DOUBLE_SIDED":"",me.flipSided?"#define FLIP_SIDED":"",me.shadowMapEnabled?"#define USE_SHADOWMAP":"",me.shadowMapEnabled?"#define "+Ee:"",me.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",me.numLightProbes>0?"#define USE_LIGHT_PROBES":"",me.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",me.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",me.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",me.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",me.toneMapping!==NoToneMapping?"#define TONE_MAPPING":"",me.toneMapping!==NoToneMapping?ShaderChunk.tonemapping_pars_fragment:"",me.toneMapping!==NoToneMapping?getToneMappingFunction("toneMapping",me.toneMapping):"",me.dithering?"#define DITHERING":"",me.opaque?"#define OPAQUE":"",ShaderChunk.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",me.outputColorSpace),getLuminanceFunction(),me.useDepthPacking?"#define DEPTH_PACKING "+me.depthPacking:"",`
`].filter(filterEmptyLine).join(`
`)),ve=resolveIncludes(ve),ve=replaceLightNums(ve,me),ve=replaceClippingPlaneNums(ve,me),_e=resolveIncludes(_e),_e=replaceLightNums(_e,me),_e=replaceClippingPlaneNums(_e,me),ve=unrollLoops(ve),_e=unrollLoops(_e),me.isRawShaderMaterial!==!0&&(Le=`#version 300 es
`,Ie=[Te,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+Ie,Be=["#define varying in",me.glslVersion===GLSL3?"":"layout(location = 0) out highp vec4 pc_fragColor;",me.glslVersion===GLSL3?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+Be);const Oe=Le+Ie+ve,Fe=Le+Be+_e,Ue=WebGLShader(xe,xe.VERTEX_SHADER,Oe),Ne=WebGLShader(xe,xe.FRAGMENT_SHADER,Fe);xe.attachShader(De,Ue),xe.attachShader(De,Ne),me.index0AttributeName!==void 0?xe.bindAttribLocation(De,0,me.index0AttributeName):me.morphTargets===!0&&xe.bindAttribLocation(De,0,"position"),xe.linkProgram(De);function He(Xe){if(fe.debug.checkShaderErrors){const qe=xe.getProgramInfoLog(De).trim(),Qe=xe.getShaderInfoLog(Ue).trim(),nt=xe.getShaderInfoLog(Ne).trim();let Nt=!0,Ye=!0;if(xe.getProgramParameter(De,xe.LINK_STATUS)===!1)if(Nt=!1,typeof fe.debug.onShaderError=="function")fe.debug.onShaderError(xe,De,Ue,Ne);else{const at=getShaderErrors(xe,Ue,"vertex"),rt=getShaderErrors(xe,Ne,"fragment");console.error("THREE.WebGLProgram: Shader Error "+xe.getError()+" - VALIDATE_STATUS "+xe.getProgramParameter(De,xe.VALIDATE_STATUS)+`

Material Name: `+Xe.name+`
Material Type: `+Xe.type+`

Program Info Log: `+qe+`
`+at+`
`+rt)}else qe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",qe):(Qe===""||nt==="")&&(Ye=!1);Ye&&(Xe.diagnostics={runnable:Nt,programLog:qe,vertexShader:{log:Qe,prefix:Ie},fragmentShader:{log:nt,prefix:Be}})}xe.deleteShader(Ue),xe.deleteShader(Ne),ze=new WebGLUniforms(xe,De),je=fetchAttributeLocations(xe,De)}let ze;this.getUniforms=function(){return ze===void 0&&He(this),ze};let je;this.getAttributes=function(){return je===void 0&&He(this),je};let Ge=me.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return Ge===!1&&(Ge=xe.getProgramParameter(De,COMPLETION_STATUS_KHR)),Ge},this.destroy=function(){ge.releaseStatesOfProgram(this),xe.deleteProgram(De),this.program=void 0},this.type=me.shaderType,this.name=me.shaderName,this.id=programIdCount++,this.cacheKey=K,this.usedTimes=1,this.program=De,this.vertexShader=Ue,this.fragmentShader=Ne,this}let _id=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(K){const me=K.vertexShader,ge=K.fragmentShader,xe=this._getShaderStage(me),ye=this._getShaderStage(ge),ve=this._getShaderCacheForMaterial(K);return ve.has(xe)===!1&&(ve.add(xe),xe.usedTimes++),ve.has(ye)===!1&&(ve.add(ye),ye.usedTimes++),this}remove(K){const me=this.materialCache.get(K);for(const ge of me)ge.usedTimes--,ge.usedTimes===0&&this.shaderCache.delete(ge.code);return this.materialCache.delete(K),this}getVertexShaderID(K){return this._getShaderStage(K.vertexShader).id}getFragmentShaderID(K){return this._getShaderStage(K.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(K){const me=this.materialCache;let ge=me.get(K);return ge===void 0&&(ge=new Set,me.set(K,ge)),ge}_getShaderStage(K){const me=this.shaderCache;let ge=me.get(K);return ge===void 0&&(ge=new WebGLShaderStage(K),me.set(K,ge)),ge}}class WebGLShaderStage{constructor(K){this.id=_id++,this.code=K,this.usedTimes=0}}function WebGLPrograms(fe,K,me,ge,xe,ye,ve){const _e=new Layers,Ee=new WebGLShaderCache,be=new Set,Ae=[],Se=xe.logarithmicDepthBuffer,Ce=xe.vertexTextures;let Te=xe.precision;const Re={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function De(je){return be.add(je),je===0?"uv":`uv${je}`}function Ie(je,Ge,Xe,qe,Qe){const nt=qe.fog,Nt=Qe.geometry,Ye=je.isMeshStandardMaterial?qe.environment:null,at=(je.isMeshStandardMaterial?me:K).get(je.envMap||Ye),rt=at&&at.mapping===CubeUVReflectionMapping?at.image.height:null,Ft=Re[je.type];je.precision!==null&&(Te=xe.getMaxPrecision(je.precision),Te!==je.precision&&console.warn("THREE.WebGLProgram.getParameters:",je.precision,"not supported, using",Te,"instead."));const Je=Nt.morphAttributes.position||Nt.morphAttributes.normal||Nt.morphAttributes.color,Wt=Je!==void 0?Je.length:0;let Kt=0;Nt.morphAttributes.position!==void 0&&(Kt=1),Nt.morphAttributes.normal!==void 0&&(Kt=2),Nt.morphAttributes.color!==void 0&&(Kt=3);let Pt,Yt,Gt,an;if(Ft){const kr=ShaderLib[Ft];Pt=kr.vertexShader,Yt=kr.fragmentShader}else Pt=je.vertexShader,Yt=je.fragmentShader,Ee.update(je),Gt=Ee.getVertexShaderID(je),an=Ee.getFragmentShaderID(je);const pn=fe.getRenderTarget(),En=fe.state.buffers.depth.getReversed(),$n=Qe.isInstancedMesh===!0,Un=Qe.isBatchedMesh===!0,kn=!!je.map,bn=!!je.matcap,Mn=!!at,zt=!!je.aoMap,Dn=!!je.lightMap,hn=!!je.bumpMap,mn=!!je.normalMap,dn=!!je.displacementMap,Hn=!!je.emissiveMap,Bn=!!je.metalnessMap,kt=!!je.roughnessMap,Dt=je.anisotropy>0,ln=je.clearcoat>0,nn=je.dispersion>0,gn=je.iridescence>0,Xt=je.sheen>0,on=je.transmission>0,Rt=Dt&&!!je.anisotropyMap,An=ln&&!!je.clearcoatMap,sr=ln&&!!je.clearcoatNormalMap,zn=ln&&!!je.clearcoatRoughnessMap,In=gn&&!!je.iridescenceMap,er=gn&&!!je.iridescenceThicknessMap,Kn=Xt&&!!je.sheenColorMap,lr=Xt&&!!je.sheenRoughnessMap,gr=!!je.specularMap,hr=!!je.specularColorMap,Er=!!je.specularIntensityMap,un=on&&!!je.transmissionMap,Sn=on&&!!je.thicknessMap,wn=!!je.gradientMap,Gn=!!je.alphaMap,Yn=je.alphaTest>0,cr=!!je.alphaHash,tr=!!je.extensions;let Wr=NoToneMapping;je.toneMapped&&(pn===null||pn.isXRRenderTarget===!0)&&(Wr=fe.toneMapping);const Qr={shaderID:Ft,shaderType:je.type,shaderName:je.name,vertexShader:Pt,fragmentShader:Yt,defines:je.defines,customVertexShaderID:Gt,customFragmentShaderID:an,isRawShaderMaterial:je.isRawShaderMaterial===!0,glslVersion:je.glslVersion,precision:Te,batching:Un,batchingColor:Un&&Qe._colorsTexture!==null,instancing:$n,instancingColor:$n&&Qe.instanceColor!==null,instancingMorph:$n&&Qe.morphTexture!==null,supportsVertexTextures:Ce,outputColorSpace:pn===null?fe.outputColorSpace:pn.isXRRenderTarget===!0?pn.texture.colorSpace:LinearSRGBColorSpace,alphaToCoverage:!!je.alphaToCoverage,map:kn,matcap:bn,envMap:Mn,envMapMode:Mn&&at.mapping,envMapCubeUVHeight:rt,aoMap:zt,lightMap:Dn,bumpMap:hn,normalMap:mn,displacementMap:Ce&&dn,emissiveMap:Hn,normalMapObjectSpace:mn&&je.normalMapType===ObjectSpaceNormalMap,normalMapTangentSpace:mn&&je.normalMapType===TangentSpaceNormalMap,metalnessMap:Bn,roughnessMap:kt,anisotropy:Dt,anisotropyMap:Rt,clearcoat:ln,clearcoatMap:An,clearcoatNormalMap:sr,clearcoatRoughnessMap:zn,dispersion:nn,iridescence:gn,iridescenceMap:In,iridescenceThicknessMap:er,sheen:Xt,sheenColorMap:Kn,sheenRoughnessMap:lr,specularMap:gr,specularColorMap:hr,specularIntensityMap:Er,transmission:on,transmissionMap:un,thicknessMap:Sn,gradientMap:wn,opaque:je.transparent===!1&&je.blending===NormalBlending&&je.alphaToCoverage===!1,alphaMap:Gn,alphaTest:Yn,alphaHash:cr,combine:je.combine,mapUv:kn&&De(je.map.channel),aoMapUv:zt&&De(je.aoMap.channel),lightMapUv:Dn&&De(je.lightMap.channel),bumpMapUv:hn&&De(je.bumpMap.channel),normalMapUv:mn&&De(je.normalMap.channel),displacementMapUv:dn&&De(je.displacementMap.channel),emissiveMapUv:Hn&&De(je.emissiveMap.channel),metalnessMapUv:Bn&&De(je.metalnessMap.channel),roughnessMapUv:kt&&De(je.roughnessMap.channel),anisotropyMapUv:Rt&&De(je.anisotropyMap.channel),clearcoatMapUv:An&&De(je.clearcoatMap.channel),clearcoatNormalMapUv:sr&&De(je.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:zn&&De(je.clearcoatRoughnessMap.channel),iridescenceMapUv:In&&De(je.iridescenceMap.channel),iridescenceThicknessMapUv:er&&De(je.iridescenceThicknessMap.channel),sheenColorMapUv:Kn&&De(je.sheenColorMap.channel),sheenRoughnessMapUv:lr&&De(je.sheenRoughnessMap.channel),specularMapUv:gr&&De(je.specularMap.channel),specularColorMapUv:hr&&De(je.specularColorMap.channel),specularIntensityMapUv:Er&&De(je.specularIntensityMap.channel),transmissionMapUv:un&&De(je.transmissionMap.channel),thicknessMapUv:Sn&&De(je.thicknessMap.channel),alphaMapUv:Gn&&De(je.alphaMap.channel),vertexTangents:!!Nt.attributes.tangent&&(mn||Dt),vertexColors:je.vertexColors,vertexAlphas:je.vertexColors===!0&&!!Nt.attributes.color&&Nt.attributes.color.itemSize===4,pointsUvs:Qe.isPoints===!0&&!!Nt.attributes.uv&&(kn||Gn),fog:!!nt,useFog:je.fog===!0,fogExp2:!!nt&&nt.isFogExp2,flatShading:je.flatShading===!0,sizeAttenuation:je.sizeAttenuation===!0,logarithmicDepthBuffer:Se,reverseDepthBuffer:En,skinning:Qe.isSkinnedMesh===!0,morphTargets:Nt.morphAttributes.position!==void 0,morphNormals:Nt.morphAttributes.normal!==void 0,morphColors:Nt.morphAttributes.color!==void 0,morphTargetsCount:Wt,morphTextureStride:Kt,numDirLights:Ge.directional.length,numPointLights:Ge.point.length,numSpotLights:Ge.spot.length,numSpotLightMaps:Ge.spotLightMap.length,numRectAreaLights:Ge.rectArea.length,numHemiLights:Ge.hemi.length,numDirLightShadows:Ge.directionalShadowMap.length,numPointLightShadows:Ge.pointShadowMap.length,numSpotLightShadows:Ge.spotShadowMap.length,numSpotLightShadowsWithMaps:Ge.numSpotLightShadowsWithMaps,numLightProbes:Ge.numLightProbes,numClippingPlanes:ve.numPlanes,numClipIntersection:ve.numIntersection,dithering:je.dithering,shadowMapEnabled:fe.shadowMap.enabled&&Xe.length>0,shadowMapType:fe.shadowMap.type,toneMapping:Wr,decodeVideoTexture:kn&&je.map.isVideoTexture===!0&&ColorManagement.getTransfer(je.map.colorSpace)===SRGBTransfer,decodeVideoTextureEmissive:Hn&&je.emissiveMap.isVideoTexture===!0&&ColorManagement.getTransfer(je.emissiveMap.colorSpace)===SRGBTransfer,premultipliedAlpha:je.premultipliedAlpha,doubleSided:je.side===DoubleSide,flipSided:je.side===BackSide,useDepthPacking:je.depthPacking>=0,depthPacking:je.depthPacking||0,index0AttributeName:je.index0AttributeName,extensionClipCullDistance:tr&&je.extensions.clipCullDistance===!0&&ge.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(tr&&je.extensions.multiDraw===!0||Un)&&ge.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:ge.has("KHR_parallel_shader_compile"),customProgramCacheKey:je.customProgramCacheKey()};return Qr.vertexUv1s=be.has(1),Qr.vertexUv2s=be.has(2),Qr.vertexUv3s=be.has(3),be.clear(),Qr}function Be(je){const Ge=[];if(je.shaderID?Ge.push(je.shaderID):(Ge.push(je.customVertexShaderID),Ge.push(je.customFragmentShaderID)),je.defines!==void 0)for(const Xe in je.defines)Ge.push(Xe),Ge.push(je.defines[Xe]);return je.isRawShaderMaterial===!1&&(Le(Ge,je),Oe(Ge,je),Ge.push(fe.outputColorSpace)),Ge.push(je.customProgramCacheKey),Ge.join()}function Le(je,Ge){je.push(Ge.precision),je.push(Ge.outputColorSpace),je.push(Ge.envMapMode),je.push(Ge.envMapCubeUVHeight),je.push(Ge.mapUv),je.push(Ge.alphaMapUv),je.push(Ge.lightMapUv),je.push(Ge.aoMapUv),je.push(Ge.bumpMapUv),je.push(Ge.normalMapUv),je.push(Ge.displacementMapUv),je.push(Ge.emissiveMapUv),je.push(Ge.metalnessMapUv),je.push(Ge.roughnessMapUv),je.push(Ge.anisotropyMapUv),je.push(Ge.clearcoatMapUv),je.push(Ge.clearcoatNormalMapUv),je.push(Ge.clearcoatRoughnessMapUv),je.push(Ge.iridescenceMapUv),je.push(Ge.iridescenceThicknessMapUv),je.push(Ge.sheenColorMapUv),je.push(Ge.sheenRoughnessMapUv),je.push(Ge.specularMapUv),je.push(Ge.specularColorMapUv),je.push(Ge.specularIntensityMapUv),je.push(Ge.transmissionMapUv),je.push(Ge.thicknessMapUv),je.push(Ge.combine),je.push(Ge.fogExp2),je.push(Ge.sizeAttenuation),je.push(Ge.morphTargetsCount),je.push(Ge.morphAttributeCount),je.push(Ge.numDirLights),je.push(Ge.numPointLights),je.push(Ge.numSpotLights),je.push(Ge.numSpotLightMaps),je.push(Ge.numHemiLights),je.push(Ge.numRectAreaLights),je.push(Ge.numDirLightShadows),je.push(Ge.numPointLightShadows),je.push(Ge.numSpotLightShadows),je.push(Ge.numSpotLightShadowsWithMaps),je.push(Ge.numLightProbes),je.push(Ge.shadowMapType),je.push(Ge.toneMapping),je.push(Ge.numClippingPlanes),je.push(Ge.numClipIntersection),je.push(Ge.depthPacking)}function Oe(je,Ge){_e.disableAll(),Ge.supportsVertexTextures&&_e.enable(0),Ge.instancing&&_e.enable(1),Ge.instancingColor&&_e.enable(2),Ge.instancingMorph&&_e.enable(3),Ge.matcap&&_e.enable(4),Ge.envMap&&_e.enable(5),Ge.normalMapObjectSpace&&_e.enable(6),Ge.normalMapTangentSpace&&_e.enable(7),Ge.clearcoat&&_e.enable(8),Ge.iridescence&&_e.enable(9),Ge.alphaTest&&_e.enable(10),Ge.vertexColors&&_e.enable(11),Ge.vertexAlphas&&_e.enable(12),Ge.vertexUv1s&&_e.enable(13),Ge.vertexUv2s&&_e.enable(14),Ge.vertexUv3s&&_e.enable(15),Ge.vertexTangents&&_e.enable(16),Ge.anisotropy&&_e.enable(17),Ge.alphaHash&&_e.enable(18),Ge.batching&&_e.enable(19),Ge.dispersion&&_e.enable(20),Ge.batchingColor&&_e.enable(21),je.push(_e.mask),_e.disableAll(),Ge.fog&&_e.enable(0),Ge.useFog&&_e.enable(1),Ge.flatShading&&_e.enable(2),Ge.logarithmicDepthBuffer&&_e.enable(3),Ge.reverseDepthBuffer&&_e.enable(4),Ge.skinning&&_e.enable(5),Ge.morphTargets&&_e.enable(6),Ge.morphNormals&&_e.enable(7),Ge.morphColors&&_e.enable(8),Ge.premultipliedAlpha&&_e.enable(9),Ge.shadowMapEnabled&&_e.enable(10),Ge.doubleSided&&_e.enable(11),Ge.flipSided&&_e.enable(12),Ge.useDepthPacking&&_e.enable(13),Ge.dithering&&_e.enable(14),Ge.transmission&&_e.enable(15),Ge.sheen&&_e.enable(16),Ge.opaque&&_e.enable(17),Ge.pointsUvs&&_e.enable(18),Ge.decodeVideoTexture&&_e.enable(19),Ge.decodeVideoTextureEmissive&&_e.enable(20),Ge.alphaToCoverage&&_e.enable(21),je.push(_e.mask)}function Fe(je){const Ge=Re[je.type];let Xe;if(Ge){const qe=ShaderLib[Ge];Xe=UniformsUtils.clone(qe.uniforms)}else Xe=je.uniforms;return Xe}function Ue(je,Ge){let Xe;for(let qe=0,Qe=Ae.length;qe<Qe;qe++){const nt=Ae[qe];if(nt.cacheKey===Ge){Xe=nt,++Xe.usedTimes;break}}return Xe===void 0&&(Xe=new WebGLProgram(fe,Ge,je,ye),Ae.push(Xe)),Xe}function Ne(je){if(--je.usedTimes===0){const Ge=Ae.indexOf(je);Ae[Ge]=Ae[Ae.length-1],Ae.pop(),je.destroy()}}function He(je){Ee.remove(je)}function ze(){Ee.dispose()}return{getParameters:Ie,getProgramCacheKey:Be,getUniforms:Fe,acquireProgram:Ue,releaseProgram:Ne,releaseShaderCache:He,programs:Ae,dispose:ze}}function WebGLProperties(){let fe=new WeakMap;function K(ve){return fe.has(ve)}function me(ve){let _e=fe.get(ve);return _e===void 0&&(_e={},fe.set(ve,_e)),_e}function ge(ve){fe.delete(ve)}function xe(ve,_e,Ee){fe.get(ve)[_e]=Ee}function ye(){fe=new WeakMap}return{has:K,get:me,remove:ge,update:xe,dispose:ye}}function painterSortStable(fe,K){return fe.groupOrder!==K.groupOrder?fe.groupOrder-K.groupOrder:fe.renderOrder!==K.renderOrder?fe.renderOrder-K.renderOrder:fe.material.id!==K.material.id?fe.material.id-K.material.id:fe.z!==K.z?fe.z-K.z:fe.id-K.id}function reversePainterSortStable(fe,K){return fe.groupOrder!==K.groupOrder?fe.groupOrder-K.groupOrder:fe.renderOrder!==K.renderOrder?fe.renderOrder-K.renderOrder:fe.z!==K.z?K.z-fe.z:fe.id-K.id}function WebGLRenderList(){const fe=[];let K=0;const me=[],ge=[],xe=[];function ye(){K=0,me.length=0,ge.length=0,xe.length=0}function ve(Se,Ce,Te,Re,De,Ie){let Be=fe[K];return Be===void 0?(Be={id:Se.id,object:Se,geometry:Ce,material:Te,groupOrder:Re,renderOrder:Se.renderOrder,z:De,group:Ie},fe[K]=Be):(Be.id=Se.id,Be.object=Se,Be.geometry=Ce,Be.material=Te,Be.groupOrder=Re,Be.renderOrder=Se.renderOrder,Be.z=De,Be.group=Ie),K++,Be}function _e(Se,Ce,Te,Re,De,Ie){const Be=ve(Se,Ce,Te,Re,De,Ie);Te.transmission>0?ge.push(Be):Te.transparent===!0?xe.push(Be):me.push(Be)}function Ee(Se,Ce,Te,Re,De,Ie){const Be=ve(Se,Ce,Te,Re,De,Ie);Te.transmission>0?ge.unshift(Be):Te.transparent===!0?xe.unshift(Be):me.unshift(Be)}function be(Se,Ce){me.length>1&&me.sort(Se||painterSortStable),ge.length>1&&ge.sort(Ce||reversePainterSortStable),xe.length>1&&xe.sort(Ce||reversePainterSortStable)}function Ae(){for(let Se=K,Ce=fe.length;Se<Ce;Se++){const Te=fe[Se];if(Te.id===null)break;Te.id=null,Te.object=null,Te.geometry=null,Te.material=null,Te.group=null}}return{opaque:me,transmissive:ge,transparent:xe,init:ye,push:_e,unshift:Ee,finish:Ae,sort:be}}function WebGLRenderLists(){let fe=new WeakMap;function K(ge,xe){const ye=fe.get(ge);let ve;return ye===void 0?(ve=new WebGLRenderList,fe.set(ge,[ve])):xe>=ye.length?(ve=new WebGLRenderList,ye.push(ve)):ve=ye[xe],ve}function me(){fe=new WeakMap}return{get:K,dispose:me}}function UniformsCache(){const fe={};return{get:function(K){if(fe[K.id]!==void 0)return fe[K.id];let me;switch(K.type){case"DirectionalLight":me={direction:new Vector3,color:new Color$1};break;case"SpotLight":me={position:new Vector3,direction:new Vector3,color:new Color$1,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":me={position:new Vector3,color:new Color$1,distance:0,decay:0};break;case"HemisphereLight":me={direction:new Vector3,skyColor:new Color$1,groundColor:new Color$1};break;case"RectAreaLight":me={color:new Color$1,position:new Vector3,halfWidth:new Vector3,halfHeight:new Vector3};break}return fe[K.id]=me,me}}}function ShadowUniformsCache(){const fe={};return{get:function(K){if(fe[K.id]!==void 0)return fe[K.id];let me;switch(K.type){case"DirectionalLight":me={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"SpotLight":me={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2};break;case"PointLight":me={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vector2,shadowCameraNear:1,shadowCameraFar:1e3};break}return fe[K.id]=me,me}}}let nextVersion=0;function shadowCastingAndTexturingLightsFirst(fe,K){return(K.castShadow?2:0)-(fe.castShadow?2:0)+(K.map?1:0)-(fe.map?1:0)}function WebGLLights(fe){const K=new UniformsCache,me=ShadowUniformsCache(),ge={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let be=0;be<9;be++)ge.probe.push(new Vector3);const xe=new Vector3,ye=new Matrix4,ve=new Matrix4;function _e(be){let Ae=0,Se=0,Ce=0;for(let je=0;je<9;je++)ge.probe[je].set(0,0,0);let Te=0,Re=0,De=0,Ie=0,Be=0,Le=0,Oe=0,Fe=0,Ue=0,Ne=0,He=0;be.sort(shadowCastingAndTexturingLightsFirst);for(let je=0,Ge=be.length;je<Ge;je++){const Xe=be[je],qe=Xe.color,Qe=Xe.intensity,nt=Xe.distance,Nt=Xe.shadow&&Xe.shadow.map?Xe.shadow.map.texture:null;if(Xe.isAmbientLight)Ae+=qe.r*Qe,Se+=qe.g*Qe,Ce+=qe.b*Qe;else if(Xe.isLightProbe){for(let Ye=0;Ye<9;Ye++)ge.probe[Ye].addScaledVector(Xe.sh.coefficients[Ye],Qe);He++}else if(Xe.isDirectionalLight){const Ye=K.get(Xe);if(Ye.color.copy(Xe.color).multiplyScalar(Xe.intensity),Xe.castShadow){const at=Xe.shadow,rt=me.get(Xe);rt.shadowIntensity=at.intensity,rt.shadowBias=at.bias,rt.shadowNormalBias=at.normalBias,rt.shadowRadius=at.radius,rt.shadowMapSize=at.mapSize,ge.directionalShadow[Te]=rt,ge.directionalShadowMap[Te]=Nt,ge.directionalShadowMatrix[Te]=Xe.shadow.matrix,Le++}ge.directional[Te]=Ye,Te++}else if(Xe.isSpotLight){const Ye=K.get(Xe);Ye.position.setFromMatrixPosition(Xe.matrixWorld),Ye.color.copy(qe).multiplyScalar(Qe),Ye.distance=nt,Ye.coneCos=Math.cos(Xe.angle),Ye.penumbraCos=Math.cos(Xe.angle*(1-Xe.penumbra)),Ye.decay=Xe.decay,ge.spot[De]=Ye;const at=Xe.shadow;if(Xe.map&&(ge.spotLightMap[Ue]=Xe.map,Ue++,at.updateMatrices(Xe),Xe.castShadow&&Ne++),ge.spotLightMatrix[De]=at.matrix,Xe.castShadow){const rt=me.get(Xe);rt.shadowIntensity=at.intensity,rt.shadowBias=at.bias,rt.shadowNormalBias=at.normalBias,rt.shadowRadius=at.radius,rt.shadowMapSize=at.mapSize,ge.spotShadow[De]=rt,ge.spotShadowMap[De]=Nt,Fe++}De++}else if(Xe.isRectAreaLight){const Ye=K.get(Xe);Ye.color.copy(qe).multiplyScalar(Qe),Ye.halfWidth.set(Xe.width*.5,0,0),Ye.halfHeight.set(0,Xe.height*.5,0),ge.rectArea[Ie]=Ye,Ie++}else if(Xe.isPointLight){const Ye=K.get(Xe);if(Ye.color.copy(Xe.color).multiplyScalar(Xe.intensity),Ye.distance=Xe.distance,Ye.decay=Xe.decay,Xe.castShadow){const at=Xe.shadow,rt=me.get(Xe);rt.shadowIntensity=at.intensity,rt.shadowBias=at.bias,rt.shadowNormalBias=at.normalBias,rt.shadowRadius=at.radius,rt.shadowMapSize=at.mapSize,rt.shadowCameraNear=at.camera.near,rt.shadowCameraFar=at.camera.far,ge.pointShadow[Re]=rt,ge.pointShadowMap[Re]=Nt,ge.pointShadowMatrix[Re]=Xe.shadow.matrix,Oe++}ge.point[Re]=Ye,Re++}else if(Xe.isHemisphereLight){const Ye=K.get(Xe);Ye.skyColor.copy(Xe.color).multiplyScalar(Qe),Ye.groundColor.copy(Xe.groundColor).multiplyScalar(Qe),ge.hemi[Be]=Ye,Be++}}Ie>0&&(fe.has("OES_texture_float_linear")===!0?(ge.rectAreaLTC1=UniformsLib.LTC_FLOAT_1,ge.rectAreaLTC2=UniformsLib.LTC_FLOAT_2):(ge.rectAreaLTC1=UniformsLib.LTC_HALF_1,ge.rectAreaLTC2=UniformsLib.LTC_HALF_2)),ge.ambient[0]=Ae,ge.ambient[1]=Se,ge.ambient[2]=Ce;const ze=ge.hash;(ze.directionalLength!==Te||ze.pointLength!==Re||ze.spotLength!==De||ze.rectAreaLength!==Ie||ze.hemiLength!==Be||ze.numDirectionalShadows!==Le||ze.numPointShadows!==Oe||ze.numSpotShadows!==Fe||ze.numSpotMaps!==Ue||ze.numLightProbes!==He)&&(ge.directional.length=Te,ge.spot.length=De,ge.rectArea.length=Ie,ge.point.length=Re,ge.hemi.length=Be,ge.directionalShadow.length=Le,ge.directionalShadowMap.length=Le,ge.pointShadow.length=Oe,ge.pointShadowMap.length=Oe,ge.spotShadow.length=Fe,ge.spotShadowMap.length=Fe,ge.directionalShadowMatrix.length=Le,ge.pointShadowMatrix.length=Oe,ge.spotLightMatrix.length=Fe+Ue-Ne,ge.spotLightMap.length=Ue,ge.numSpotLightShadowsWithMaps=Ne,ge.numLightProbes=He,ze.directionalLength=Te,ze.pointLength=Re,ze.spotLength=De,ze.rectAreaLength=Ie,ze.hemiLength=Be,ze.numDirectionalShadows=Le,ze.numPointShadows=Oe,ze.numSpotShadows=Fe,ze.numSpotMaps=Ue,ze.numLightProbes=He,ge.version=nextVersion++)}function Ee(be,Ae){let Se=0,Ce=0,Te=0,Re=0,De=0;const Ie=Ae.matrixWorldInverse;for(let Be=0,Le=be.length;Be<Le;Be++){const Oe=be[Be];if(Oe.isDirectionalLight){const Fe=ge.directional[Se];Fe.direction.setFromMatrixPosition(Oe.matrixWorld),xe.setFromMatrixPosition(Oe.target.matrixWorld),Fe.direction.sub(xe),Fe.direction.transformDirection(Ie),Se++}else if(Oe.isSpotLight){const Fe=ge.spot[Te];Fe.position.setFromMatrixPosition(Oe.matrixWorld),Fe.position.applyMatrix4(Ie),Fe.direction.setFromMatrixPosition(Oe.matrixWorld),xe.setFromMatrixPosition(Oe.target.matrixWorld),Fe.direction.sub(xe),Fe.direction.transformDirection(Ie),Te++}else if(Oe.isRectAreaLight){const Fe=ge.rectArea[Re];Fe.position.setFromMatrixPosition(Oe.matrixWorld),Fe.position.applyMatrix4(Ie),ve.identity(),ye.copy(Oe.matrixWorld),ye.premultiply(Ie),ve.extractRotation(ye),Fe.halfWidth.set(Oe.width*.5,0,0),Fe.halfHeight.set(0,Oe.height*.5,0),Fe.halfWidth.applyMatrix4(ve),Fe.halfHeight.applyMatrix4(ve),Re++}else if(Oe.isPointLight){const Fe=ge.point[Ce];Fe.position.setFromMatrixPosition(Oe.matrixWorld),Fe.position.applyMatrix4(Ie),Ce++}else if(Oe.isHemisphereLight){const Fe=ge.hemi[De];Fe.direction.setFromMatrixPosition(Oe.matrixWorld),Fe.direction.transformDirection(Ie),De++}}}return{setup:_e,setupView:Ee,state:ge}}function WebGLRenderState(fe){const K=new WebGLLights(fe),me=[],ge=[];function xe(Ae){be.camera=Ae,me.length=0,ge.length=0}function ye(Ae){me.push(Ae)}function ve(Ae){ge.push(Ae)}function _e(){K.setup(me)}function Ee(Ae){K.setupView(me,Ae)}const be={lightsArray:me,shadowsArray:ge,camera:null,lights:K,transmissionRenderTarget:{}};return{init:xe,state:be,setupLights:_e,setupLightsView:Ee,pushLight:ye,pushShadow:ve}}function WebGLRenderStates(fe){let K=new WeakMap;function me(xe,ye=0){const ve=K.get(xe);let _e;return ve===void 0?(_e=new WebGLRenderState(fe),K.set(xe,[_e])):ye>=ve.length?(_e=new WebGLRenderState(fe),ve.push(_e)):_e=ve[ye],_e}function ge(){K=new WeakMap}return{get:me,dispose:ge}}const vertex=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,fragment=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function WebGLShadowMap(fe,K,me){let ge=new Frustum;const xe=new Vector2,ye=new Vector2,ve=new Vector4,_e=new MeshDepthMaterial({depthPacking:RGBADepthPacking}),Ee=new MeshDistanceMaterial,be={},Ae=me.maxTextureSize,Se={[FrontSide]:BackSide,[BackSide]:FrontSide,[DoubleSide]:DoubleSide},Ce=new ShaderMaterial({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vector2},radius:{value:4}},vertexShader:vertex,fragmentShader:fragment}),Te=Ce.clone();Te.defines.HORIZONTAL_PASS=1;const Re=new BufferGeometry;Re.setAttribute("position",new BufferAttribute(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const De=new Mesh(Re,Ce),Ie=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=PCFShadowMap;let Be=this.type;this.render=function(Ne,He,ze){if(Ie.enabled===!1||Ie.autoUpdate===!1&&Ie.needsUpdate===!1||Ne.length===0)return;const je=fe.getRenderTarget(),Ge=fe.getActiveCubeFace(),Xe=fe.getActiveMipmapLevel(),qe=fe.state;qe.setBlending(NoBlending),qe.buffers.color.setClear(1,1,1,1),qe.buffers.depth.setTest(!0),qe.setScissorTest(!1);const Qe=Be!==VSMShadowMap&&this.type===VSMShadowMap,nt=Be===VSMShadowMap&&this.type!==VSMShadowMap;for(let Nt=0,Ye=Ne.length;Nt<Ye;Nt++){const at=Ne[Nt],rt=at.shadow;if(rt===void 0){console.warn("THREE.WebGLShadowMap:",at,"has no shadow.");continue}if(rt.autoUpdate===!1&&rt.needsUpdate===!1)continue;xe.copy(rt.mapSize);const Ft=rt.getFrameExtents();if(xe.multiply(Ft),ye.copy(rt.mapSize),(xe.x>Ae||xe.y>Ae)&&(xe.x>Ae&&(ye.x=Math.floor(Ae/Ft.x),xe.x=ye.x*Ft.x,rt.mapSize.x=ye.x),xe.y>Ae&&(ye.y=Math.floor(Ae/Ft.y),xe.y=ye.y*Ft.y,rt.mapSize.y=ye.y)),rt.map===null||Qe===!0||nt===!0){const Wt=this.type!==VSMShadowMap?{minFilter:NearestFilter,magFilter:NearestFilter}:{};rt.map!==null&&rt.map.dispose(),rt.map=new WebGLRenderTarget(xe.x,xe.y,Wt),rt.map.texture.name=at.name+".shadowMap",rt.camera.updateProjectionMatrix()}fe.setRenderTarget(rt.map),fe.clear();const Je=rt.getViewportCount();for(let Wt=0;Wt<Je;Wt++){const Kt=rt.getViewport(Wt);ve.set(ye.x*Kt.x,ye.y*Kt.y,ye.x*Kt.z,ye.y*Kt.w),qe.viewport(ve),rt.updateMatrices(at,Wt),ge=rt.getFrustum(),Fe(He,ze,rt.camera,at,this.type)}rt.isPointLightShadow!==!0&&this.type===VSMShadowMap&&Le(rt,ze),rt.needsUpdate=!1}Be=this.type,Ie.needsUpdate=!1,fe.setRenderTarget(je,Ge,Xe)};function Le(Ne,He){const ze=K.update(De);Ce.defines.VSM_SAMPLES!==Ne.blurSamples&&(Ce.defines.VSM_SAMPLES=Ne.blurSamples,Te.defines.VSM_SAMPLES=Ne.blurSamples,Ce.needsUpdate=!0,Te.needsUpdate=!0),Ne.mapPass===null&&(Ne.mapPass=new WebGLRenderTarget(xe.x,xe.y)),Ce.uniforms.shadow_pass.value=Ne.map.texture,Ce.uniforms.resolution.value=Ne.mapSize,Ce.uniforms.radius.value=Ne.radius,fe.setRenderTarget(Ne.mapPass),fe.clear(),fe.renderBufferDirect(He,null,ze,Ce,De,null),Te.uniforms.shadow_pass.value=Ne.mapPass.texture,Te.uniforms.resolution.value=Ne.mapSize,Te.uniforms.radius.value=Ne.radius,fe.setRenderTarget(Ne.map),fe.clear(),fe.renderBufferDirect(He,null,ze,Te,De,null)}function Oe(Ne,He,ze,je){let Ge=null;const Xe=ze.isPointLight===!0?Ne.customDistanceMaterial:Ne.customDepthMaterial;if(Xe!==void 0)Ge=Xe;else if(Ge=ze.isPointLight===!0?Ee:_e,fe.localClippingEnabled&&He.clipShadows===!0&&Array.isArray(He.clippingPlanes)&&He.clippingPlanes.length!==0||He.displacementMap&&He.displacementScale!==0||He.alphaMap&&He.alphaTest>0||He.map&&He.alphaTest>0){const qe=Ge.uuid,Qe=He.uuid;let nt=be[qe];nt===void 0&&(nt={},be[qe]=nt);let Nt=nt[Qe];Nt===void 0&&(Nt=Ge.clone(),nt[Qe]=Nt,He.addEventListener("dispose",Ue)),Ge=Nt}if(Ge.visible=He.visible,Ge.wireframe=He.wireframe,je===VSMShadowMap?Ge.side=He.shadowSide!==null?He.shadowSide:He.side:Ge.side=He.shadowSide!==null?He.shadowSide:Se[He.side],Ge.alphaMap=He.alphaMap,Ge.alphaTest=He.alphaTest,Ge.map=He.map,Ge.clipShadows=He.clipShadows,Ge.clippingPlanes=He.clippingPlanes,Ge.clipIntersection=He.clipIntersection,Ge.displacementMap=He.displacementMap,Ge.displacementScale=He.displacementScale,Ge.displacementBias=He.displacementBias,Ge.wireframeLinewidth=He.wireframeLinewidth,Ge.linewidth=He.linewidth,ze.isPointLight===!0&&Ge.isMeshDistanceMaterial===!0){const qe=fe.properties.get(Ge);qe.light=ze}return Ge}function Fe(Ne,He,ze,je,Ge){if(Ne.visible===!1)return;if(Ne.layers.test(He.layers)&&(Ne.isMesh||Ne.isLine||Ne.isPoints)&&(Ne.castShadow||Ne.receiveShadow&&Ge===VSMShadowMap)&&(!Ne.frustumCulled||ge.intersectsObject(Ne))){Ne.modelViewMatrix.multiplyMatrices(ze.matrixWorldInverse,Ne.matrixWorld);const Qe=K.update(Ne),nt=Ne.material;if(Array.isArray(nt)){const Nt=Qe.groups;for(let Ye=0,at=Nt.length;Ye<at;Ye++){const rt=Nt[Ye],Ft=nt[rt.materialIndex];if(Ft&&Ft.visible){const Je=Oe(Ne,Ft,je,Ge);Ne.onBeforeShadow(fe,Ne,He,ze,Qe,Je,rt),fe.renderBufferDirect(ze,null,Qe,Je,Ne,rt),Ne.onAfterShadow(fe,Ne,He,ze,Qe,Je,rt)}}}else if(nt.visible){const Nt=Oe(Ne,nt,je,Ge);Ne.onBeforeShadow(fe,Ne,He,ze,Qe,Nt,null),fe.renderBufferDirect(ze,null,Qe,Nt,Ne,null),Ne.onAfterShadow(fe,Ne,He,ze,Qe,Nt,null)}}const qe=Ne.children;for(let Qe=0,nt=qe.length;Qe<nt;Qe++)Fe(qe[Qe],He,ze,je,Ge)}function Ue(Ne){Ne.target.removeEventListener("dispose",Ue);for(const ze in be){const je=be[ze],Ge=Ne.target.uuid;Ge in je&&(je[Ge].dispose(),delete je[Ge])}}}const reversedFuncs={[NeverDepth]:AlwaysDepth,[LessDepth]:GreaterDepth,[EqualDepth]:NotEqualDepth,[LessEqualDepth]:GreaterEqualDepth,[AlwaysDepth]:NeverDepth,[GreaterDepth]:LessDepth,[NotEqualDepth]:EqualDepth,[GreaterEqualDepth]:LessEqualDepth};function WebGLState(fe,K){function me(){let un=!1;const Sn=new Vector4;let wn=null;const Gn=new Vector4(0,0,0,0);return{setMask:function(Yn){wn!==Yn&&!un&&(fe.colorMask(Yn,Yn,Yn,Yn),wn=Yn)},setLocked:function(Yn){un=Yn},setClear:function(Yn,cr,tr,Wr,Qr){Qr===!0&&(Yn*=Wr,cr*=Wr,tr*=Wr),Sn.set(Yn,cr,tr,Wr),Gn.equals(Sn)===!1&&(fe.clearColor(Yn,cr,tr,Wr),Gn.copy(Sn))},reset:function(){un=!1,wn=null,Gn.set(-1,0,0,0)}}}function ge(){let un=!1,Sn=!1,wn=null,Gn=null,Yn=null;return{setReversed:function(cr){if(Sn!==cr){const tr=K.get("EXT_clip_control");Sn?tr.clipControlEXT(tr.LOWER_LEFT_EXT,tr.ZERO_TO_ONE_EXT):tr.clipControlEXT(tr.LOWER_LEFT_EXT,tr.NEGATIVE_ONE_TO_ONE_EXT);const Wr=Yn;Yn=null,this.setClear(Wr)}Sn=cr},getReversed:function(){return Sn},setTest:function(cr){cr?pn(fe.DEPTH_TEST):En(fe.DEPTH_TEST)},setMask:function(cr){wn!==cr&&!un&&(fe.depthMask(cr),wn=cr)},setFunc:function(cr){if(Sn&&(cr=reversedFuncs[cr]),Gn!==cr){switch(cr){case NeverDepth:fe.depthFunc(fe.NEVER);break;case AlwaysDepth:fe.depthFunc(fe.ALWAYS);break;case LessDepth:fe.depthFunc(fe.LESS);break;case LessEqualDepth:fe.depthFunc(fe.LEQUAL);break;case EqualDepth:fe.depthFunc(fe.EQUAL);break;case GreaterEqualDepth:fe.depthFunc(fe.GEQUAL);break;case GreaterDepth:fe.depthFunc(fe.GREATER);break;case NotEqualDepth:fe.depthFunc(fe.NOTEQUAL);break;default:fe.depthFunc(fe.LEQUAL)}Gn=cr}},setLocked:function(cr){un=cr},setClear:function(cr){Yn!==cr&&(Sn&&(cr=1-cr),fe.clearDepth(cr),Yn=cr)},reset:function(){un=!1,wn=null,Gn=null,Yn=null,Sn=!1}}}function xe(){let un=!1,Sn=null,wn=null,Gn=null,Yn=null,cr=null,tr=null,Wr=null,Qr=null;return{setTest:function(kr){un||(kr?pn(fe.STENCIL_TEST):En(fe.STENCIL_TEST))},setMask:function(kr){Sn!==kr&&!un&&(fe.stencilMask(kr),Sn=kr)},setFunc:function(kr,di,ci){(wn!==kr||Gn!==di||Yn!==ci)&&(fe.stencilFunc(kr,di,ci),wn=kr,Gn=di,Yn=ci)},setOp:function(kr,di,ci){(cr!==kr||tr!==di||Wr!==ci)&&(fe.stencilOp(kr,di,ci),cr=kr,tr=di,Wr=ci)},setLocked:function(kr){un=kr},setClear:function(kr){Qr!==kr&&(fe.clearStencil(kr),Qr=kr)},reset:function(){un=!1,Sn=null,wn=null,Gn=null,Yn=null,cr=null,tr=null,Wr=null,Qr=null}}}const ye=new me,ve=new ge,_e=new xe,Ee=new WeakMap,be=new WeakMap;let Ae={},Se={},Ce=new WeakMap,Te=[],Re=null,De=!1,Ie=null,Be=null,Le=null,Oe=null,Fe=null,Ue=null,Ne=null,He=new Color$1(0,0,0),ze=0,je=!1,Ge=null,Xe=null,qe=null,Qe=null,nt=null;const Nt=fe.getParameter(fe.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Ye=!1,at=0;const rt=fe.getParameter(fe.VERSION);rt.indexOf("WebGL")!==-1?(at=parseFloat(/^WebGL (\d)/.exec(rt)[1]),Ye=at>=1):rt.indexOf("OpenGL ES")!==-1&&(at=parseFloat(/^OpenGL ES (\d)/.exec(rt)[1]),Ye=at>=2);let Ft=null,Je={};const Wt=fe.getParameter(fe.SCISSOR_BOX),Kt=fe.getParameter(fe.VIEWPORT),Pt=new Vector4().fromArray(Wt),Yt=new Vector4().fromArray(Kt);function Gt(un,Sn,wn,Gn){const Yn=new Uint8Array(4),cr=fe.createTexture();fe.bindTexture(un,cr),fe.texParameteri(un,fe.TEXTURE_MIN_FILTER,fe.NEAREST),fe.texParameteri(un,fe.TEXTURE_MAG_FILTER,fe.NEAREST);for(let tr=0;tr<wn;tr++)un===fe.TEXTURE_3D||un===fe.TEXTURE_2D_ARRAY?fe.texImage3D(Sn,0,fe.RGBA,1,1,Gn,0,fe.RGBA,fe.UNSIGNED_BYTE,Yn):fe.texImage2D(Sn+tr,0,fe.RGBA,1,1,0,fe.RGBA,fe.UNSIGNED_BYTE,Yn);return cr}const an={};an[fe.TEXTURE_2D]=Gt(fe.TEXTURE_2D,fe.TEXTURE_2D,1),an[fe.TEXTURE_CUBE_MAP]=Gt(fe.TEXTURE_CUBE_MAP,fe.TEXTURE_CUBE_MAP_POSITIVE_X,6),an[fe.TEXTURE_2D_ARRAY]=Gt(fe.TEXTURE_2D_ARRAY,fe.TEXTURE_2D_ARRAY,1,1),an[fe.TEXTURE_3D]=Gt(fe.TEXTURE_3D,fe.TEXTURE_3D,1,1),ye.setClear(0,0,0,1),ve.setClear(1),_e.setClear(0),pn(fe.DEPTH_TEST),ve.setFunc(LessEqualDepth),hn(!1),mn(CullFaceBack),pn(fe.CULL_FACE),zt(NoBlending);function pn(un){Ae[un]!==!0&&(fe.enable(un),Ae[un]=!0)}function En(un){Ae[un]!==!1&&(fe.disable(un),Ae[un]=!1)}function $n(un,Sn){return Se[un]!==Sn?(fe.bindFramebuffer(un,Sn),Se[un]=Sn,un===fe.DRAW_FRAMEBUFFER&&(Se[fe.FRAMEBUFFER]=Sn),un===fe.FRAMEBUFFER&&(Se[fe.DRAW_FRAMEBUFFER]=Sn),!0):!1}function Un(un,Sn){let wn=Te,Gn=!1;if(un){wn=Ce.get(Sn),wn===void 0&&(wn=[],Ce.set(Sn,wn));const Yn=un.textures;if(wn.length!==Yn.length||wn[0]!==fe.COLOR_ATTACHMENT0){for(let cr=0,tr=Yn.length;cr<tr;cr++)wn[cr]=fe.COLOR_ATTACHMENT0+cr;wn.length=Yn.length,Gn=!0}}else wn[0]!==fe.BACK&&(wn[0]=fe.BACK,Gn=!0);Gn&&fe.drawBuffers(wn)}function kn(un){return Re!==un?(fe.useProgram(un),Re=un,!0):!1}const bn={[AddEquation]:fe.FUNC_ADD,[SubtractEquation]:fe.FUNC_SUBTRACT,[ReverseSubtractEquation]:fe.FUNC_REVERSE_SUBTRACT};bn[MinEquation]=fe.MIN,bn[MaxEquation]=fe.MAX;const Mn={[ZeroFactor]:fe.ZERO,[OneFactor]:fe.ONE,[SrcColorFactor]:fe.SRC_COLOR,[SrcAlphaFactor]:fe.SRC_ALPHA,[SrcAlphaSaturateFactor]:fe.SRC_ALPHA_SATURATE,[DstColorFactor]:fe.DST_COLOR,[DstAlphaFactor]:fe.DST_ALPHA,[OneMinusSrcColorFactor]:fe.ONE_MINUS_SRC_COLOR,[OneMinusSrcAlphaFactor]:fe.ONE_MINUS_SRC_ALPHA,[OneMinusDstColorFactor]:fe.ONE_MINUS_DST_COLOR,[OneMinusDstAlphaFactor]:fe.ONE_MINUS_DST_ALPHA,[ConstantColorFactor]:fe.CONSTANT_COLOR,[OneMinusConstantColorFactor]:fe.ONE_MINUS_CONSTANT_COLOR,[ConstantAlphaFactor]:fe.CONSTANT_ALPHA,[OneMinusConstantAlphaFactor]:fe.ONE_MINUS_CONSTANT_ALPHA};function zt(un,Sn,wn,Gn,Yn,cr,tr,Wr,Qr,kr){if(un===NoBlending){De===!0&&(En(fe.BLEND),De=!1);return}if(De===!1&&(pn(fe.BLEND),De=!0),un!==CustomBlending){if(un!==Ie||kr!==je){if((Be!==AddEquation||Fe!==AddEquation)&&(fe.blendEquation(fe.FUNC_ADD),Be=AddEquation,Fe=AddEquation),kr)switch(un){case NormalBlending:fe.blendFuncSeparate(fe.ONE,fe.ONE_MINUS_SRC_ALPHA,fe.ONE,fe.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:fe.blendFunc(fe.ONE,fe.ONE);break;case SubtractiveBlending:fe.blendFuncSeparate(fe.ZERO,fe.ONE_MINUS_SRC_COLOR,fe.ZERO,fe.ONE);break;case MultiplyBlending:fe.blendFuncSeparate(fe.ZERO,fe.SRC_COLOR,fe.ZERO,fe.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",un);break}else switch(un){case NormalBlending:fe.blendFuncSeparate(fe.SRC_ALPHA,fe.ONE_MINUS_SRC_ALPHA,fe.ONE,fe.ONE_MINUS_SRC_ALPHA);break;case AdditiveBlending:fe.blendFunc(fe.SRC_ALPHA,fe.ONE);break;case SubtractiveBlending:fe.blendFuncSeparate(fe.ZERO,fe.ONE_MINUS_SRC_COLOR,fe.ZERO,fe.ONE);break;case MultiplyBlending:fe.blendFunc(fe.ZERO,fe.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",un);break}Le=null,Oe=null,Ue=null,Ne=null,He.set(0,0,0),ze=0,Ie=un,je=kr}return}Yn=Yn||Sn,cr=cr||wn,tr=tr||Gn,(Sn!==Be||Yn!==Fe)&&(fe.blendEquationSeparate(bn[Sn],bn[Yn]),Be=Sn,Fe=Yn),(wn!==Le||Gn!==Oe||cr!==Ue||tr!==Ne)&&(fe.blendFuncSeparate(Mn[wn],Mn[Gn],Mn[cr],Mn[tr]),Le=wn,Oe=Gn,Ue=cr,Ne=tr),(Wr.equals(He)===!1||Qr!==ze)&&(fe.blendColor(Wr.r,Wr.g,Wr.b,Qr),He.copy(Wr),ze=Qr),Ie=un,je=!1}function Dn(un,Sn){un.side===DoubleSide?En(fe.CULL_FACE):pn(fe.CULL_FACE);let wn=un.side===BackSide;Sn&&(wn=!wn),hn(wn),un.blending===NormalBlending&&un.transparent===!1?zt(NoBlending):zt(un.blending,un.blendEquation,un.blendSrc,un.blendDst,un.blendEquationAlpha,un.blendSrcAlpha,un.blendDstAlpha,un.blendColor,un.blendAlpha,un.premultipliedAlpha),ve.setFunc(un.depthFunc),ve.setTest(un.depthTest),ve.setMask(un.depthWrite),ye.setMask(un.colorWrite);const Gn=un.stencilWrite;_e.setTest(Gn),Gn&&(_e.setMask(un.stencilWriteMask),_e.setFunc(un.stencilFunc,un.stencilRef,un.stencilFuncMask),_e.setOp(un.stencilFail,un.stencilZFail,un.stencilZPass)),Hn(un.polygonOffset,un.polygonOffsetFactor,un.polygonOffsetUnits),un.alphaToCoverage===!0?pn(fe.SAMPLE_ALPHA_TO_COVERAGE):En(fe.SAMPLE_ALPHA_TO_COVERAGE)}function hn(un){Ge!==un&&(un?fe.frontFace(fe.CW):fe.frontFace(fe.CCW),Ge=un)}function mn(un){un!==CullFaceNone?(pn(fe.CULL_FACE),un!==Xe&&(un===CullFaceBack?fe.cullFace(fe.BACK):un===CullFaceFront?fe.cullFace(fe.FRONT):fe.cullFace(fe.FRONT_AND_BACK))):En(fe.CULL_FACE),Xe=un}function dn(un){un!==qe&&(Ye&&fe.lineWidth(un),qe=un)}function Hn(un,Sn,wn){un?(pn(fe.POLYGON_OFFSET_FILL),(Qe!==Sn||nt!==wn)&&(fe.polygonOffset(Sn,wn),Qe=Sn,nt=wn)):En(fe.POLYGON_OFFSET_FILL)}function Bn(un){un?pn(fe.SCISSOR_TEST):En(fe.SCISSOR_TEST)}function kt(un){un===void 0&&(un=fe.TEXTURE0+Nt-1),Ft!==un&&(fe.activeTexture(un),Ft=un)}function Dt(un,Sn,wn){wn===void 0&&(Ft===null?wn=fe.TEXTURE0+Nt-1:wn=Ft);let Gn=Je[wn];Gn===void 0&&(Gn={type:void 0,texture:void 0},Je[wn]=Gn),(Gn.type!==un||Gn.texture!==Sn)&&(Ft!==wn&&(fe.activeTexture(wn),Ft=wn),fe.bindTexture(un,Sn||an[un]),Gn.type=un,Gn.texture=Sn)}function ln(){const un=Je[Ft];un!==void 0&&un.type!==void 0&&(fe.bindTexture(un.type,null),un.type=void 0,un.texture=void 0)}function nn(){try{fe.compressedTexImage2D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function gn(){try{fe.compressedTexImage3D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function Xt(){try{fe.texSubImage2D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function on(){try{fe.texSubImage3D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function Rt(){try{fe.compressedTexSubImage2D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function An(){try{fe.compressedTexSubImage3D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function sr(){try{fe.texStorage2D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function zn(){try{fe.texStorage3D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function In(){try{fe.texImage2D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function er(){try{fe.texImage3D(...arguments)}catch(un){console.error("THREE.WebGLState:",un)}}function Kn(un){Pt.equals(un)===!1&&(fe.scissor(un.x,un.y,un.z,un.w),Pt.copy(un))}function lr(un){Yt.equals(un)===!1&&(fe.viewport(un.x,un.y,un.z,un.w),Yt.copy(un))}function gr(un,Sn){let wn=be.get(Sn);wn===void 0&&(wn=new WeakMap,be.set(Sn,wn));let Gn=wn.get(un);Gn===void 0&&(Gn=fe.getUniformBlockIndex(Sn,un.name),wn.set(un,Gn))}function hr(un,Sn){const Gn=be.get(Sn).get(un);Ee.get(Sn)!==Gn&&(fe.uniformBlockBinding(Sn,Gn,un.__bindingPointIndex),Ee.set(Sn,Gn))}function Er(){fe.disable(fe.BLEND),fe.disable(fe.CULL_FACE),fe.disable(fe.DEPTH_TEST),fe.disable(fe.POLYGON_OFFSET_FILL),fe.disable(fe.SCISSOR_TEST),fe.disable(fe.STENCIL_TEST),fe.disable(fe.SAMPLE_ALPHA_TO_COVERAGE),fe.blendEquation(fe.FUNC_ADD),fe.blendFunc(fe.ONE,fe.ZERO),fe.blendFuncSeparate(fe.ONE,fe.ZERO,fe.ONE,fe.ZERO),fe.blendColor(0,0,0,0),fe.colorMask(!0,!0,!0,!0),fe.clearColor(0,0,0,0),fe.depthMask(!0),fe.depthFunc(fe.LESS),ve.setReversed(!1),fe.clearDepth(1),fe.stencilMask(4294967295),fe.stencilFunc(fe.ALWAYS,0,4294967295),fe.stencilOp(fe.KEEP,fe.KEEP,fe.KEEP),fe.clearStencil(0),fe.cullFace(fe.BACK),fe.frontFace(fe.CCW),fe.polygonOffset(0,0),fe.activeTexture(fe.TEXTURE0),fe.bindFramebuffer(fe.FRAMEBUFFER,null),fe.bindFramebuffer(fe.DRAW_FRAMEBUFFER,null),fe.bindFramebuffer(fe.READ_FRAMEBUFFER,null),fe.useProgram(null),fe.lineWidth(1),fe.scissor(0,0,fe.canvas.width,fe.canvas.height),fe.viewport(0,0,fe.canvas.width,fe.canvas.height),Ae={},Ft=null,Je={},Se={},Ce=new WeakMap,Te=[],Re=null,De=!1,Ie=null,Be=null,Le=null,Oe=null,Fe=null,Ue=null,Ne=null,He=new Color$1(0,0,0),ze=0,je=!1,Ge=null,Xe=null,qe=null,Qe=null,nt=null,Pt.set(0,0,fe.canvas.width,fe.canvas.height),Yt.set(0,0,fe.canvas.width,fe.canvas.height),ye.reset(),ve.reset(),_e.reset()}return{buffers:{color:ye,depth:ve,stencil:_e},enable:pn,disable:En,bindFramebuffer:$n,drawBuffers:Un,useProgram:kn,setBlending:zt,setMaterial:Dn,setFlipSided:hn,setCullFace:mn,setLineWidth:dn,setPolygonOffset:Hn,setScissorTest:Bn,activeTexture:kt,bindTexture:Dt,unbindTexture:ln,compressedTexImage2D:nn,compressedTexImage3D:gn,texImage2D:In,texImage3D:er,updateUBOMapping:gr,uniformBlockBinding:hr,texStorage2D:sr,texStorage3D:zn,texSubImage2D:Xt,texSubImage3D:on,compressedTexSubImage2D:Rt,compressedTexSubImage3D:An,scissor:Kn,viewport:lr,reset:Er}}function WebGLTextures(fe,K,me,ge,xe,ye,ve){const _e=K.has("WEBGL_multisampled_render_to_texture")?K.get("WEBGL_multisampled_render_to_texture"):null,Ee=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),be=new Vector2,Ae=new WeakMap;let Se;const Ce=new WeakMap;let Te=!1;try{Te=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function Re(kt,Dt){return Te?new OffscreenCanvas(kt,Dt):createElementNS("canvas")}function De(kt,Dt,ln){let nn=1;const gn=Bn(kt);if((gn.width>ln||gn.height>ln)&&(nn=ln/Math.max(gn.width,gn.height)),nn<1)if(typeof HTMLImageElement<"u"&&kt instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&kt instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&kt instanceof ImageBitmap||typeof VideoFrame<"u"&&kt instanceof VideoFrame){const Xt=Math.floor(nn*gn.width),on=Math.floor(nn*gn.height);Se===void 0&&(Se=Re(Xt,on));const Rt=Dt?Re(Xt,on):Se;return Rt.width=Xt,Rt.height=on,Rt.getContext("2d").drawImage(kt,0,0,Xt,on),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+gn.width+"x"+gn.height+") to ("+Xt+"x"+on+")."),Rt}else return"data"in kt&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+gn.width+"x"+gn.height+")."),kt;return kt}function Ie(kt){return kt.generateMipmaps}function Be(kt){fe.generateMipmap(kt)}function Le(kt){return kt.isWebGLCubeRenderTarget?fe.TEXTURE_CUBE_MAP:kt.isWebGL3DRenderTarget?fe.TEXTURE_3D:kt.isWebGLArrayRenderTarget||kt.isCompressedArrayTexture?fe.TEXTURE_2D_ARRAY:fe.TEXTURE_2D}function Oe(kt,Dt,ln,nn,gn=!1){if(kt!==null){if(fe[kt]!==void 0)return fe[kt];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+kt+"'")}let Xt=Dt;if(Dt===fe.RED&&(ln===fe.FLOAT&&(Xt=fe.R32F),ln===fe.HALF_FLOAT&&(Xt=fe.R16F),ln===fe.UNSIGNED_BYTE&&(Xt=fe.R8)),Dt===fe.RED_INTEGER&&(ln===fe.UNSIGNED_BYTE&&(Xt=fe.R8UI),ln===fe.UNSIGNED_SHORT&&(Xt=fe.R16UI),ln===fe.UNSIGNED_INT&&(Xt=fe.R32UI),ln===fe.BYTE&&(Xt=fe.R8I),ln===fe.SHORT&&(Xt=fe.R16I),ln===fe.INT&&(Xt=fe.R32I)),Dt===fe.RG&&(ln===fe.FLOAT&&(Xt=fe.RG32F),ln===fe.HALF_FLOAT&&(Xt=fe.RG16F),ln===fe.UNSIGNED_BYTE&&(Xt=fe.RG8)),Dt===fe.RG_INTEGER&&(ln===fe.UNSIGNED_BYTE&&(Xt=fe.RG8UI),ln===fe.UNSIGNED_SHORT&&(Xt=fe.RG16UI),ln===fe.UNSIGNED_INT&&(Xt=fe.RG32UI),ln===fe.BYTE&&(Xt=fe.RG8I),ln===fe.SHORT&&(Xt=fe.RG16I),ln===fe.INT&&(Xt=fe.RG32I)),Dt===fe.RGB_INTEGER&&(ln===fe.UNSIGNED_BYTE&&(Xt=fe.RGB8UI),ln===fe.UNSIGNED_SHORT&&(Xt=fe.RGB16UI),ln===fe.UNSIGNED_INT&&(Xt=fe.RGB32UI),ln===fe.BYTE&&(Xt=fe.RGB8I),ln===fe.SHORT&&(Xt=fe.RGB16I),ln===fe.INT&&(Xt=fe.RGB32I)),Dt===fe.RGBA_INTEGER&&(ln===fe.UNSIGNED_BYTE&&(Xt=fe.RGBA8UI),ln===fe.UNSIGNED_SHORT&&(Xt=fe.RGBA16UI),ln===fe.UNSIGNED_INT&&(Xt=fe.RGBA32UI),ln===fe.BYTE&&(Xt=fe.RGBA8I),ln===fe.SHORT&&(Xt=fe.RGBA16I),ln===fe.INT&&(Xt=fe.RGBA32I)),Dt===fe.RGB&&ln===fe.UNSIGNED_INT_5_9_9_9_REV&&(Xt=fe.RGB9_E5),Dt===fe.RGBA){const on=gn?LinearTransfer:ColorManagement.getTransfer(nn);ln===fe.FLOAT&&(Xt=fe.RGBA32F),ln===fe.HALF_FLOAT&&(Xt=fe.RGBA16F),ln===fe.UNSIGNED_BYTE&&(Xt=on===SRGBTransfer?fe.SRGB8_ALPHA8:fe.RGBA8),ln===fe.UNSIGNED_SHORT_4_4_4_4&&(Xt=fe.RGBA4),ln===fe.UNSIGNED_SHORT_5_5_5_1&&(Xt=fe.RGB5_A1)}return(Xt===fe.R16F||Xt===fe.R32F||Xt===fe.RG16F||Xt===fe.RG32F||Xt===fe.RGBA16F||Xt===fe.RGBA32F)&&K.get("EXT_color_buffer_float"),Xt}function Fe(kt,Dt){let ln;return kt?Dt===null||Dt===UnsignedIntType||Dt===UnsignedInt248Type?ln=fe.DEPTH24_STENCIL8:Dt===FloatType?ln=fe.DEPTH32F_STENCIL8:Dt===UnsignedShortType&&(ln=fe.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Dt===null||Dt===UnsignedIntType||Dt===UnsignedInt248Type?ln=fe.DEPTH_COMPONENT24:Dt===FloatType?ln=fe.DEPTH_COMPONENT32F:Dt===UnsignedShortType&&(ln=fe.DEPTH_COMPONENT16),ln}function Ue(kt,Dt){return Ie(kt)===!0||kt.isFramebufferTexture&&kt.minFilter!==NearestFilter&&kt.minFilter!==LinearFilter?Math.log2(Math.max(Dt.width,Dt.height))+1:kt.mipmaps!==void 0&&kt.mipmaps.length>0?kt.mipmaps.length:kt.isCompressedTexture&&Array.isArray(kt.image)?Dt.mipmaps.length:1}function Ne(kt){const Dt=kt.target;Dt.removeEventListener("dispose",Ne),ze(Dt),Dt.isVideoTexture&&Ae.delete(Dt)}function He(kt){const Dt=kt.target;Dt.removeEventListener("dispose",He),Ge(Dt)}function ze(kt){const Dt=ge.get(kt);if(Dt.__webglInit===void 0)return;const ln=kt.source,nn=Ce.get(ln);if(nn){const gn=nn[Dt.__cacheKey];gn.usedTimes--,gn.usedTimes===0&&je(kt),Object.keys(nn).length===0&&Ce.delete(ln)}ge.remove(kt)}function je(kt){const Dt=ge.get(kt);fe.deleteTexture(Dt.__webglTexture);const ln=kt.source,nn=Ce.get(ln);delete nn[Dt.__cacheKey],ve.memory.textures--}function Ge(kt){const Dt=ge.get(kt);if(kt.depthTexture&&(kt.depthTexture.dispose(),ge.remove(kt.depthTexture)),kt.isWebGLCubeRenderTarget)for(let nn=0;nn<6;nn++){if(Array.isArray(Dt.__webglFramebuffer[nn]))for(let gn=0;gn<Dt.__webglFramebuffer[nn].length;gn++)fe.deleteFramebuffer(Dt.__webglFramebuffer[nn][gn]);else fe.deleteFramebuffer(Dt.__webglFramebuffer[nn]);Dt.__webglDepthbuffer&&fe.deleteRenderbuffer(Dt.__webglDepthbuffer[nn])}else{if(Array.isArray(Dt.__webglFramebuffer))for(let nn=0;nn<Dt.__webglFramebuffer.length;nn++)fe.deleteFramebuffer(Dt.__webglFramebuffer[nn]);else fe.deleteFramebuffer(Dt.__webglFramebuffer);if(Dt.__webglDepthbuffer&&fe.deleteRenderbuffer(Dt.__webglDepthbuffer),Dt.__webglMultisampledFramebuffer&&fe.deleteFramebuffer(Dt.__webglMultisampledFramebuffer),Dt.__webglColorRenderbuffer)for(let nn=0;nn<Dt.__webglColorRenderbuffer.length;nn++)Dt.__webglColorRenderbuffer[nn]&&fe.deleteRenderbuffer(Dt.__webglColorRenderbuffer[nn]);Dt.__webglDepthRenderbuffer&&fe.deleteRenderbuffer(Dt.__webglDepthRenderbuffer)}const ln=kt.textures;for(let nn=0,gn=ln.length;nn<gn;nn++){const Xt=ge.get(ln[nn]);Xt.__webglTexture&&(fe.deleteTexture(Xt.__webglTexture),ve.memory.textures--),ge.remove(ln[nn])}ge.remove(kt)}let Xe=0;function qe(){Xe=0}function Qe(){const kt=Xe;return kt>=xe.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+kt+" texture units while this GPU supports only "+xe.maxTextures),Xe+=1,kt}function nt(kt){const Dt=[];return Dt.push(kt.wrapS),Dt.push(kt.wrapT),Dt.push(kt.wrapR||0),Dt.push(kt.magFilter),Dt.push(kt.minFilter),Dt.push(kt.anisotropy),Dt.push(kt.internalFormat),Dt.push(kt.format),Dt.push(kt.type),Dt.push(kt.generateMipmaps),Dt.push(kt.premultiplyAlpha),Dt.push(kt.flipY),Dt.push(kt.unpackAlignment),Dt.push(kt.colorSpace),Dt.join()}function Nt(kt,Dt){const ln=ge.get(kt);if(kt.isVideoTexture&&dn(kt),kt.isRenderTargetTexture===!1&&kt.version>0&&ln.__version!==kt.version){const nn=kt.image;if(nn===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(nn.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Yt(ln,kt,Dt);return}}me.bindTexture(fe.TEXTURE_2D,ln.__webglTexture,fe.TEXTURE0+Dt)}function Ye(kt,Dt){const ln=ge.get(kt);if(kt.version>0&&ln.__version!==kt.version){Yt(ln,kt,Dt);return}me.bindTexture(fe.TEXTURE_2D_ARRAY,ln.__webglTexture,fe.TEXTURE0+Dt)}function at(kt,Dt){const ln=ge.get(kt);if(kt.version>0&&ln.__version!==kt.version){Yt(ln,kt,Dt);return}me.bindTexture(fe.TEXTURE_3D,ln.__webglTexture,fe.TEXTURE0+Dt)}function rt(kt,Dt){const ln=ge.get(kt);if(kt.version>0&&ln.__version!==kt.version){Gt(ln,kt,Dt);return}me.bindTexture(fe.TEXTURE_CUBE_MAP,ln.__webglTexture,fe.TEXTURE0+Dt)}const Ft={[RepeatWrapping]:fe.REPEAT,[ClampToEdgeWrapping]:fe.CLAMP_TO_EDGE,[MirroredRepeatWrapping]:fe.MIRRORED_REPEAT},Je={[NearestFilter]:fe.NEAREST,[NearestMipmapNearestFilter]:fe.NEAREST_MIPMAP_NEAREST,[NearestMipmapLinearFilter]:fe.NEAREST_MIPMAP_LINEAR,[LinearFilter]:fe.LINEAR,[LinearMipmapNearestFilter]:fe.LINEAR_MIPMAP_NEAREST,[LinearMipmapLinearFilter]:fe.LINEAR_MIPMAP_LINEAR},Wt={[NeverCompare]:fe.NEVER,[AlwaysCompare]:fe.ALWAYS,[LessCompare]:fe.LESS,[LessEqualCompare]:fe.LEQUAL,[EqualCompare]:fe.EQUAL,[GreaterEqualCompare]:fe.GEQUAL,[GreaterCompare]:fe.GREATER,[NotEqualCompare]:fe.NOTEQUAL};function Kt(kt,Dt){if(Dt.type===FloatType&&K.has("OES_texture_float_linear")===!1&&(Dt.magFilter===LinearFilter||Dt.magFilter===LinearMipmapNearestFilter||Dt.magFilter===NearestMipmapLinearFilter||Dt.magFilter===LinearMipmapLinearFilter||Dt.minFilter===LinearFilter||Dt.minFilter===LinearMipmapNearestFilter||Dt.minFilter===NearestMipmapLinearFilter||Dt.minFilter===LinearMipmapLinearFilter)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),fe.texParameteri(kt,fe.TEXTURE_WRAP_S,Ft[Dt.wrapS]),fe.texParameteri(kt,fe.TEXTURE_WRAP_T,Ft[Dt.wrapT]),(kt===fe.TEXTURE_3D||kt===fe.TEXTURE_2D_ARRAY)&&fe.texParameteri(kt,fe.TEXTURE_WRAP_R,Ft[Dt.wrapR]),fe.texParameteri(kt,fe.TEXTURE_MAG_FILTER,Je[Dt.magFilter]),fe.texParameteri(kt,fe.TEXTURE_MIN_FILTER,Je[Dt.minFilter]),Dt.compareFunction&&(fe.texParameteri(kt,fe.TEXTURE_COMPARE_MODE,fe.COMPARE_REF_TO_TEXTURE),fe.texParameteri(kt,fe.TEXTURE_COMPARE_FUNC,Wt[Dt.compareFunction])),K.has("EXT_texture_filter_anisotropic")===!0){if(Dt.magFilter===NearestFilter||Dt.minFilter!==NearestMipmapLinearFilter&&Dt.minFilter!==LinearMipmapLinearFilter||Dt.type===FloatType&&K.has("OES_texture_float_linear")===!1)return;if(Dt.anisotropy>1||ge.get(Dt).__currentAnisotropy){const ln=K.get("EXT_texture_filter_anisotropic");fe.texParameterf(kt,ln.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Dt.anisotropy,xe.getMaxAnisotropy())),ge.get(Dt).__currentAnisotropy=Dt.anisotropy}}}function Pt(kt,Dt){let ln=!1;kt.__webglInit===void 0&&(kt.__webglInit=!0,Dt.addEventListener("dispose",Ne));const nn=Dt.source;let gn=Ce.get(nn);gn===void 0&&(gn={},Ce.set(nn,gn));const Xt=nt(Dt);if(Xt!==kt.__cacheKey){gn[Xt]===void 0&&(gn[Xt]={texture:fe.createTexture(),usedTimes:0},ve.memory.textures++,ln=!0),gn[Xt].usedTimes++;const on=gn[kt.__cacheKey];on!==void 0&&(gn[kt.__cacheKey].usedTimes--,on.usedTimes===0&&je(Dt)),kt.__cacheKey=Xt,kt.__webglTexture=gn[Xt].texture}return ln}function Yt(kt,Dt,ln){let nn=fe.TEXTURE_2D;(Dt.isDataArrayTexture||Dt.isCompressedArrayTexture)&&(nn=fe.TEXTURE_2D_ARRAY),Dt.isData3DTexture&&(nn=fe.TEXTURE_3D);const gn=Pt(kt,Dt),Xt=Dt.source;me.bindTexture(nn,kt.__webglTexture,fe.TEXTURE0+ln);const on=ge.get(Xt);if(Xt.version!==on.__version||gn===!0){me.activeTexture(fe.TEXTURE0+ln);const Rt=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),An=Dt.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Dt.colorSpace),sr=Dt.colorSpace===NoColorSpace||Rt===An?fe.NONE:fe.BROWSER_DEFAULT_WEBGL;fe.pixelStorei(fe.UNPACK_FLIP_Y_WEBGL,Dt.flipY),fe.pixelStorei(fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Dt.premultiplyAlpha),fe.pixelStorei(fe.UNPACK_ALIGNMENT,Dt.unpackAlignment),fe.pixelStorei(fe.UNPACK_COLORSPACE_CONVERSION_WEBGL,sr);let zn=De(Dt.image,!1,xe.maxTextureSize);zn=Hn(Dt,zn);const In=ye.convert(Dt.format,Dt.colorSpace),er=ye.convert(Dt.type);let Kn=Oe(Dt.internalFormat,In,er,Dt.colorSpace,Dt.isVideoTexture);Kt(nn,Dt);let lr;const gr=Dt.mipmaps,hr=Dt.isVideoTexture!==!0,Er=on.__version===void 0||gn===!0,un=Xt.dataReady,Sn=Ue(Dt,zn);if(Dt.isDepthTexture)Kn=Fe(Dt.format===DepthStencilFormat,Dt.type),Er&&(hr?me.texStorage2D(fe.TEXTURE_2D,1,Kn,zn.width,zn.height):me.texImage2D(fe.TEXTURE_2D,0,Kn,zn.width,zn.height,0,In,er,null));else if(Dt.isDataTexture)if(gr.length>0){hr&&Er&&me.texStorage2D(fe.TEXTURE_2D,Sn,Kn,gr[0].width,gr[0].height);for(let wn=0,Gn=gr.length;wn<Gn;wn++)lr=gr[wn],hr?un&&me.texSubImage2D(fe.TEXTURE_2D,wn,0,0,lr.width,lr.height,In,er,lr.data):me.texImage2D(fe.TEXTURE_2D,wn,Kn,lr.width,lr.height,0,In,er,lr.data);Dt.generateMipmaps=!1}else hr?(Er&&me.texStorage2D(fe.TEXTURE_2D,Sn,Kn,zn.width,zn.height),un&&me.texSubImage2D(fe.TEXTURE_2D,0,0,0,zn.width,zn.height,In,er,zn.data)):me.texImage2D(fe.TEXTURE_2D,0,Kn,zn.width,zn.height,0,In,er,zn.data);else if(Dt.isCompressedTexture)if(Dt.isCompressedArrayTexture){hr&&Er&&me.texStorage3D(fe.TEXTURE_2D_ARRAY,Sn,Kn,gr[0].width,gr[0].height,zn.depth);for(let wn=0,Gn=gr.length;wn<Gn;wn++)if(lr=gr[wn],Dt.format!==RGBAFormat)if(In!==null)if(hr){if(un)if(Dt.layerUpdates.size>0){const Yn=getByteLength(lr.width,lr.height,Dt.format,Dt.type);for(const cr of Dt.layerUpdates){const tr=lr.data.subarray(cr*Yn/lr.data.BYTES_PER_ELEMENT,(cr+1)*Yn/lr.data.BYTES_PER_ELEMENT);me.compressedTexSubImage3D(fe.TEXTURE_2D_ARRAY,wn,0,0,cr,lr.width,lr.height,1,In,tr)}Dt.clearLayerUpdates()}else me.compressedTexSubImage3D(fe.TEXTURE_2D_ARRAY,wn,0,0,0,lr.width,lr.height,zn.depth,In,lr.data)}else me.compressedTexImage3D(fe.TEXTURE_2D_ARRAY,wn,Kn,lr.width,lr.height,zn.depth,0,lr.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else hr?un&&me.texSubImage3D(fe.TEXTURE_2D_ARRAY,wn,0,0,0,lr.width,lr.height,zn.depth,In,er,lr.data):me.texImage3D(fe.TEXTURE_2D_ARRAY,wn,Kn,lr.width,lr.height,zn.depth,0,In,er,lr.data)}else{hr&&Er&&me.texStorage2D(fe.TEXTURE_2D,Sn,Kn,gr[0].width,gr[0].height);for(let wn=0,Gn=gr.length;wn<Gn;wn++)lr=gr[wn],Dt.format!==RGBAFormat?In!==null?hr?un&&me.compressedTexSubImage2D(fe.TEXTURE_2D,wn,0,0,lr.width,lr.height,In,lr.data):me.compressedTexImage2D(fe.TEXTURE_2D,wn,Kn,lr.width,lr.height,0,lr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):hr?un&&me.texSubImage2D(fe.TEXTURE_2D,wn,0,0,lr.width,lr.height,In,er,lr.data):me.texImage2D(fe.TEXTURE_2D,wn,Kn,lr.width,lr.height,0,In,er,lr.data)}else if(Dt.isDataArrayTexture)if(hr){if(Er&&me.texStorage3D(fe.TEXTURE_2D_ARRAY,Sn,Kn,zn.width,zn.height,zn.depth),un)if(Dt.layerUpdates.size>0){const wn=getByteLength(zn.width,zn.height,Dt.format,Dt.type);for(const Gn of Dt.layerUpdates){const Yn=zn.data.subarray(Gn*wn/zn.data.BYTES_PER_ELEMENT,(Gn+1)*wn/zn.data.BYTES_PER_ELEMENT);me.texSubImage3D(fe.TEXTURE_2D_ARRAY,0,0,0,Gn,zn.width,zn.height,1,In,er,Yn)}Dt.clearLayerUpdates()}else me.texSubImage3D(fe.TEXTURE_2D_ARRAY,0,0,0,0,zn.width,zn.height,zn.depth,In,er,zn.data)}else me.texImage3D(fe.TEXTURE_2D_ARRAY,0,Kn,zn.width,zn.height,zn.depth,0,In,er,zn.data);else if(Dt.isData3DTexture)hr?(Er&&me.texStorage3D(fe.TEXTURE_3D,Sn,Kn,zn.width,zn.height,zn.depth),un&&me.texSubImage3D(fe.TEXTURE_3D,0,0,0,0,zn.width,zn.height,zn.depth,In,er,zn.data)):me.texImage3D(fe.TEXTURE_3D,0,Kn,zn.width,zn.height,zn.depth,0,In,er,zn.data);else if(Dt.isFramebufferTexture){if(Er)if(hr)me.texStorage2D(fe.TEXTURE_2D,Sn,Kn,zn.width,zn.height);else{let wn=zn.width,Gn=zn.height;for(let Yn=0;Yn<Sn;Yn++)me.texImage2D(fe.TEXTURE_2D,Yn,Kn,wn,Gn,0,In,er,null),wn>>=1,Gn>>=1}}else if(gr.length>0){if(hr&&Er){const wn=Bn(gr[0]);me.texStorage2D(fe.TEXTURE_2D,Sn,Kn,wn.width,wn.height)}for(let wn=0,Gn=gr.length;wn<Gn;wn++)lr=gr[wn],hr?un&&me.texSubImage2D(fe.TEXTURE_2D,wn,0,0,In,er,lr):me.texImage2D(fe.TEXTURE_2D,wn,Kn,In,er,lr);Dt.generateMipmaps=!1}else if(hr){if(Er){const wn=Bn(zn);me.texStorage2D(fe.TEXTURE_2D,Sn,Kn,wn.width,wn.height)}un&&me.texSubImage2D(fe.TEXTURE_2D,0,0,0,In,er,zn)}else me.texImage2D(fe.TEXTURE_2D,0,Kn,In,er,zn);Ie(Dt)&&Be(nn),on.__version=Xt.version,Dt.onUpdate&&Dt.onUpdate(Dt)}kt.__version=Dt.version}function Gt(kt,Dt,ln){if(Dt.image.length!==6)return;const nn=Pt(kt,Dt),gn=Dt.source;me.bindTexture(fe.TEXTURE_CUBE_MAP,kt.__webglTexture,fe.TEXTURE0+ln);const Xt=ge.get(gn);if(gn.version!==Xt.__version||nn===!0){me.activeTexture(fe.TEXTURE0+ln);const on=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Rt=Dt.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(Dt.colorSpace),An=Dt.colorSpace===NoColorSpace||on===Rt?fe.NONE:fe.BROWSER_DEFAULT_WEBGL;fe.pixelStorei(fe.UNPACK_FLIP_Y_WEBGL,Dt.flipY),fe.pixelStorei(fe.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Dt.premultiplyAlpha),fe.pixelStorei(fe.UNPACK_ALIGNMENT,Dt.unpackAlignment),fe.pixelStorei(fe.UNPACK_COLORSPACE_CONVERSION_WEBGL,An);const sr=Dt.isCompressedTexture||Dt.image[0].isCompressedTexture,zn=Dt.image[0]&&Dt.image[0].isDataTexture,In=[];for(let Gn=0;Gn<6;Gn++)!sr&&!zn?In[Gn]=De(Dt.image[Gn],!0,xe.maxCubemapSize):In[Gn]=zn?Dt.image[Gn].image:Dt.image[Gn],In[Gn]=Hn(Dt,In[Gn]);const er=In[0],Kn=ye.convert(Dt.format,Dt.colorSpace),lr=ye.convert(Dt.type),gr=Oe(Dt.internalFormat,Kn,lr,Dt.colorSpace),hr=Dt.isVideoTexture!==!0,Er=Xt.__version===void 0||nn===!0,un=gn.dataReady;let Sn=Ue(Dt,er);Kt(fe.TEXTURE_CUBE_MAP,Dt);let wn;if(sr){hr&&Er&&me.texStorage2D(fe.TEXTURE_CUBE_MAP,Sn,gr,er.width,er.height);for(let Gn=0;Gn<6;Gn++){wn=In[Gn].mipmaps;for(let Yn=0;Yn<wn.length;Yn++){const cr=wn[Yn];Dt.format!==RGBAFormat?Kn!==null?hr?un&&me.compressedTexSubImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,Yn,0,0,cr.width,cr.height,Kn,cr.data):me.compressedTexImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,Yn,gr,cr.width,cr.height,0,cr.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):hr?un&&me.texSubImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,Yn,0,0,cr.width,cr.height,Kn,lr,cr.data):me.texImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,Yn,gr,cr.width,cr.height,0,Kn,lr,cr.data)}}}else{if(wn=Dt.mipmaps,hr&&Er){wn.length>0&&Sn++;const Gn=Bn(In[0]);me.texStorage2D(fe.TEXTURE_CUBE_MAP,Sn,gr,Gn.width,Gn.height)}for(let Gn=0;Gn<6;Gn++)if(zn){hr?un&&me.texSubImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,0,0,0,In[Gn].width,In[Gn].height,Kn,lr,In[Gn].data):me.texImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,0,gr,In[Gn].width,In[Gn].height,0,Kn,lr,In[Gn].data);for(let Yn=0;Yn<wn.length;Yn++){const tr=wn[Yn].image[Gn].image;hr?un&&me.texSubImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,Yn+1,0,0,tr.width,tr.height,Kn,lr,tr.data):me.texImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,Yn+1,gr,tr.width,tr.height,0,Kn,lr,tr.data)}}else{hr?un&&me.texSubImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,0,0,0,Kn,lr,In[Gn]):me.texImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,0,gr,Kn,lr,In[Gn]);for(let Yn=0;Yn<wn.length;Yn++){const cr=wn[Yn];hr?un&&me.texSubImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,Yn+1,0,0,Kn,lr,cr.image[Gn]):me.texImage2D(fe.TEXTURE_CUBE_MAP_POSITIVE_X+Gn,Yn+1,gr,Kn,lr,cr.image[Gn])}}}Ie(Dt)&&Be(fe.TEXTURE_CUBE_MAP),Xt.__version=gn.version,Dt.onUpdate&&Dt.onUpdate(Dt)}kt.__version=Dt.version}function an(kt,Dt,ln,nn,gn,Xt){const on=ye.convert(ln.format,ln.colorSpace),Rt=ye.convert(ln.type),An=Oe(ln.internalFormat,on,Rt,ln.colorSpace),sr=ge.get(Dt),zn=ge.get(ln);if(zn.__renderTarget=Dt,!sr.__hasExternalTextures){const In=Math.max(1,Dt.width>>Xt),er=Math.max(1,Dt.height>>Xt);gn===fe.TEXTURE_3D||gn===fe.TEXTURE_2D_ARRAY?me.texImage3D(gn,Xt,An,In,er,Dt.depth,0,on,Rt,null):me.texImage2D(gn,Xt,An,In,er,0,on,Rt,null)}me.bindFramebuffer(fe.FRAMEBUFFER,kt),mn(Dt)?_e.framebufferTexture2DMultisampleEXT(fe.FRAMEBUFFER,nn,gn,zn.__webglTexture,0,hn(Dt)):(gn===fe.TEXTURE_2D||gn>=fe.TEXTURE_CUBE_MAP_POSITIVE_X&&gn<=fe.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&fe.framebufferTexture2D(fe.FRAMEBUFFER,nn,gn,zn.__webglTexture,Xt),me.bindFramebuffer(fe.FRAMEBUFFER,null)}function pn(kt,Dt,ln){if(fe.bindRenderbuffer(fe.RENDERBUFFER,kt),Dt.depthBuffer){const nn=Dt.depthTexture,gn=nn&&nn.isDepthTexture?nn.type:null,Xt=Fe(Dt.stencilBuffer,gn),on=Dt.stencilBuffer?fe.DEPTH_STENCIL_ATTACHMENT:fe.DEPTH_ATTACHMENT,Rt=hn(Dt);mn(Dt)?_e.renderbufferStorageMultisampleEXT(fe.RENDERBUFFER,Rt,Xt,Dt.width,Dt.height):ln?fe.renderbufferStorageMultisample(fe.RENDERBUFFER,Rt,Xt,Dt.width,Dt.height):fe.renderbufferStorage(fe.RENDERBUFFER,Xt,Dt.width,Dt.height),fe.framebufferRenderbuffer(fe.FRAMEBUFFER,on,fe.RENDERBUFFER,kt)}else{const nn=Dt.textures;for(let gn=0;gn<nn.length;gn++){const Xt=nn[gn],on=ye.convert(Xt.format,Xt.colorSpace),Rt=ye.convert(Xt.type),An=Oe(Xt.internalFormat,on,Rt,Xt.colorSpace),sr=hn(Dt);ln&&mn(Dt)===!1?fe.renderbufferStorageMultisample(fe.RENDERBUFFER,sr,An,Dt.width,Dt.height):mn(Dt)?_e.renderbufferStorageMultisampleEXT(fe.RENDERBUFFER,sr,An,Dt.width,Dt.height):fe.renderbufferStorage(fe.RENDERBUFFER,An,Dt.width,Dt.height)}}fe.bindRenderbuffer(fe.RENDERBUFFER,null)}function En(kt,Dt){if(Dt&&Dt.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(me.bindFramebuffer(fe.FRAMEBUFFER,kt),!(Dt.depthTexture&&Dt.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const nn=ge.get(Dt.depthTexture);nn.__renderTarget=Dt,(!nn.__webglTexture||Dt.depthTexture.image.width!==Dt.width||Dt.depthTexture.image.height!==Dt.height)&&(Dt.depthTexture.image.width=Dt.width,Dt.depthTexture.image.height=Dt.height,Dt.depthTexture.needsUpdate=!0),Nt(Dt.depthTexture,0);const gn=nn.__webglTexture,Xt=hn(Dt);if(Dt.depthTexture.format===DepthFormat)mn(Dt)?_e.framebufferTexture2DMultisampleEXT(fe.FRAMEBUFFER,fe.DEPTH_ATTACHMENT,fe.TEXTURE_2D,gn,0,Xt):fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.DEPTH_ATTACHMENT,fe.TEXTURE_2D,gn,0);else if(Dt.depthTexture.format===DepthStencilFormat)mn(Dt)?_e.framebufferTexture2DMultisampleEXT(fe.FRAMEBUFFER,fe.DEPTH_STENCIL_ATTACHMENT,fe.TEXTURE_2D,gn,0,Xt):fe.framebufferTexture2D(fe.FRAMEBUFFER,fe.DEPTH_STENCIL_ATTACHMENT,fe.TEXTURE_2D,gn,0);else throw new Error("Unknown depthTexture format")}function $n(kt){const Dt=ge.get(kt),ln=kt.isWebGLCubeRenderTarget===!0;if(Dt.__boundDepthTexture!==kt.depthTexture){const nn=kt.depthTexture;if(Dt.__depthDisposeCallback&&Dt.__depthDisposeCallback(),nn){const gn=()=>{delete Dt.__boundDepthTexture,delete Dt.__depthDisposeCallback,nn.removeEventListener("dispose",gn)};nn.addEventListener("dispose",gn),Dt.__depthDisposeCallback=gn}Dt.__boundDepthTexture=nn}if(kt.depthTexture&&!Dt.__autoAllocateDepthBuffer){if(ln)throw new Error("target.depthTexture not supported in Cube render targets");En(Dt.__webglFramebuffer,kt)}else if(ln){Dt.__webglDepthbuffer=[];for(let nn=0;nn<6;nn++)if(me.bindFramebuffer(fe.FRAMEBUFFER,Dt.__webglFramebuffer[nn]),Dt.__webglDepthbuffer[nn]===void 0)Dt.__webglDepthbuffer[nn]=fe.createRenderbuffer(),pn(Dt.__webglDepthbuffer[nn],kt,!1);else{const gn=kt.stencilBuffer?fe.DEPTH_STENCIL_ATTACHMENT:fe.DEPTH_ATTACHMENT,Xt=Dt.__webglDepthbuffer[nn];fe.bindRenderbuffer(fe.RENDERBUFFER,Xt),fe.framebufferRenderbuffer(fe.FRAMEBUFFER,gn,fe.RENDERBUFFER,Xt)}}else if(me.bindFramebuffer(fe.FRAMEBUFFER,Dt.__webglFramebuffer),Dt.__webglDepthbuffer===void 0)Dt.__webglDepthbuffer=fe.createRenderbuffer(),pn(Dt.__webglDepthbuffer,kt,!1);else{const nn=kt.stencilBuffer?fe.DEPTH_STENCIL_ATTACHMENT:fe.DEPTH_ATTACHMENT,gn=Dt.__webglDepthbuffer;fe.bindRenderbuffer(fe.RENDERBUFFER,gn),fe.framebufferRenderbuffer(fe.FRAMEBUFFER,nn,fe.RENDERBUFFER,gn)}me.bindFramebuffer(fe.FRAMEBUFFER,null)}function Un(kt,Dt,ln){const nn=ge.get(kt);Dt!==void 0&&an(nn.__webglFramebuffer,kt,kt.texture,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,0),ln!==void 0&&$n(kt)}function kn(kt){const Dt=kt.texture,ln=ge.get(kt),nn=ge.get(Dt);kt.addEventListener("dispose",He);const gn=kt.textures,Xt=kt.isWebGLCubeRenderTarget===!0,on=gn.length>1;if(on||(nn.__webglTexture===void 0&&(nn.__webglTexture=fe.createTexture()),nn.__version=Dt.version,ve.memory.textures++),Xt){ln.__webglFramebuffer=[];for(let Rt=0;Rt<6;Rt++)if(Dt.mipmaps&&Dt.mipmaps.length>0){ln.__webglFramebuffer[Rt]=[];for(let An=0;An<Dt.mipmaps.length;An++)ln.__webglFramebuffer[Rt][An]=fe.createFramebuffer()}else ln.__webglFramebuffer[Rt]=fe.createFramebuffer()}else{if(Dt.mipmaps&&Dt.mipmaps.length>0){ln.__webglFramebuffer=[];for(let Rt=0;Rt<Dt.mipmaps.length;Rt++)ln.__webglFramebuffer[Rt]=fe.createFramebuffer()}else ln.__webglFramebuffer=fe.createFramebuffer();if(on)for(let Rt=0,An=gn.length;Rt<An;Rt++){const sr=ge.get(gn[Rt]);sr.__webglTexture===void 0&&(sr.__webglTexture=fe.createTexture(),ve.memory.textures++)}if(kt.samples>0&&mn(kt)===!1){ln.__webglMultisampledFramebuffer=fe.createFramebuffer(),ln.__webglColorRenderbuffer=[],me.bindFramebuffer(fe.FRAMEBUFFER,ln.__webglMultisampledFramebuffer);for(let Rt=0;Rt<gn.length;Rt++){const An=gn[Rt];ln.__webglColorRenderbuffer[Rt]=fe.createRenderbuffer(),fe.bindRenderbuffer(fe.RENDERBUFFER,ln.__webglColorRenderbuffer[Rt]);const sr=ye.convert(An.format,An.colorSpace),zn=ye.convert(An.type),In=Oe(An.internalFormat,sr,zn,An.colorSpace,kt.isXRRenderTarget===!0),er=hn(kt);fe.renderbufferStorageMultisample(fe.RENDERBUFFER,er,In,kt.width,kt.height),fe.framebufferRenderbuffer(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0+Rt,fe.RENDERBUFFER,ln.__webglColorRenderbuffer[Rt])}fe.bindRenderbuffer(fe.RENDERBUFFER,null),kt.depthBuffer&&(ln.__webglDepthRenderbuffer=fe.createRenderbuffer(),pn(ln.__webglDepthRenderbuffer,kt,!0)),me.bindFramebuffer(fe.FRAMEBUFFER,null)}}if(Xt){me.bindTexture(fe.TEXTURE_CUBE_MAP,nn.__webglTexture),Kt(fe.TEXTURE_CUBE_MAP,Dt);for(let Rt=0;Rt<6;Rt++)if(Dt.mipmaps&&Dt.mipmaps.length>0)for(let An=0;An<Dt.mipmaps.length;An++)an(ln.__webglFramebuffer[Rt][An],kt,Dt,fe.COLOR_ATTACHMENT0,fe.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,An);else an(ln.__webglFramebuffer[Rt],kt,Dt,fe.COLOR_ATTACHMENT0,fe.TEXTURE_CUBE_MAP_POSITIVE_X+Rt,0);Ie(Dt)&&Be(fe.TEXTURE_CUBE_MAP),me.unbindTexture()}else if(on){for(let Rt=0,An=gn.length;Rt<An;Rt++){const sr=gn[Rt],zn=ge.get(sr);me.bindTexture(fe.TEXTURE_2D,zn.__webglTexture),Kt(fe.TEXTURE_2D,sr),an(ln.__webglFramebuffer,kt,sr,fe.COLOR_ATTACHMENT0+Rt,fe.TEXTURE_2D,0),Ie(sr)&&Be(fe.TEXTURE_2D)}me.unbindTexture()}else{let Rt=fe.TEXTURE_2D;if((kt.isWebGL3DRenderTarget||kt.isWebGLArrayRenderTarget)&&(Rt=kt.isWebGL3DRenderTarget?fe.TEXTURE_3D:fe.TEXTURE_2D_ARRAY),me.bindTexture(Rt,nn.__webglTexture),Kt(Rt,Dt),Dt.mipmaps&&Dt.mipmaps.length>0)for(let An=0;An<Dt.mipmaps.length;An++)an(ln.__webglFramebuffer[An],kt,Dt,fe.COLOR_ATTACHMENT0,Rt,An);else an(ln.__webglFramebuffer,kt,Dt,fe.COLOR_ATTACHMENT0,Rt,0);Ie(Dt)&&Be(Rt),me.unbindTexture()}kt.depthBuffer&&$n(kt)}function bn(kt){const Dt=kt.textures;for(let ln=0,nn=Dt.length;ln<nn;ln++){const gn=Dt[ln];if(Ie(gn)){const Xt=Le(kt),on=ge.get(gn).__webglTexture;me.bindTexture(Xt,on),Be(Xt),me.unbindTexture()}}}const Mn=[],zt=[];function Dn(kt){if(kt.samples>0){if(mn(kt)===!1){const Dt=kt.textures,ln=kt.width,nn=kt.height;let gn=fe.COLOR_BUFFER_BIT;const Xt=kt.stencilBuffer?fe.DEPTH_STENCIL_ATTACHMENT:fe.DEPTH_ATTACHMENT,on=ge.get(kt),Rt=Dt.length>1;if(Rt)for(let An=0;An<Dt.length;An++)me.bindFramebuffer(fe.FRAMEBUFFER,on.__webglMultisampledFramebuffer),fe.framebufferRenderbuffer(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0+An,fe.RENDERBUFFER,null),me.bindFramebuffer(fe.FRAMEBUFFER,on.__webglFramebuffer),fe.framebufferTexture2D(fe.DRAW_FRAMEBUFFER,fe.COLOR_ATTACHMENT0+An,fe.TEXTURE_2D,null,0);me.bindFramebuffer(fe.READ_FRAMEBUFFER,on.__webglMultisampledFramebuffer),me.bindFramebuffer(fe.DRAW_FRAMEBUFFER,on.__webglFramebuffer);for(let An=0;An<Dt.length;An++){if(kt.resolveDepthBuffer&&(kt.depthBuffer&&(gn|=fe.DEPTH_BUFFER_BIT),kt.stencilBuffer&&kt.resolveStencilBuffer&&(gn|=fe.STENCIL_BUFFER_BIT)),Rt){fe.framebufferRenderbuffer(fe.READ_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.RENDERBUFFER,on.__webglColorRenderbuffer[An]);const sr=ge.get(Dt[An]).__webglTexture;fe.framebufferTexture2D(fe.DRAW_FRAMEBUFFER,fe.COLOR_ATTACHMENT0,fe.TEXTURE_2D,sr,0)}fe.blitFramebuffer(0,0,ln,nn,0,0,ln,nn,gn,fe.NEAREST),Ee===!0&&(Mn.length=0,zt.length=0,Mn.push(fe.COLOR_ATTACHMENT0+An),kt.depthBuffer&&kt.resolveDepthBuffer===!1&&(Mn.push(Xt),zt.push(Xt),fe.invalidateFramebuffer(fe.DRAW_FRAMEBUFFER,zt)),fe.invalidateFramebuffer(fe.READ_FRAMEBUFFER,Mn))}if(me.bindFramebuffer(fe.READ_FRAMEBUFFER,null),me.bindFramebuffer(fe.DRAW_FRAMEBUFFER,null),Rt)for(let An=0;An<Dt.length;An++){me.bindFramebuffer(fe.FRAMEBUFFER,on.__webglMultisampledFramebuffer),fe.framebufferRenderbuffer(fe.FRAMEBUFFER,fe.COLOR_ATTACHMENT0+An,fe.RENDERBUFFER,on.__webglColorRenderbuffer[An]);const sr=ge.get(Dt[An]).__webglTexture;me.bindFramebuffer(fe.FRAMEBUFFER,on.__webglFramebuffer),fe.framebufferTexture2D(fe.DRAW_FRAMEBUFFER,fe.COLOR_ATTACHMENT0+An,fe.TEXTURE_2D,sr,0)}me.bindFramebuffer(fe.DRAW_FRAMEBUFFER,on.__webglMultisampledFramebuffer)}else if(kt.depthBuffer&&kt.resolveDepthBuffer===!1&&Ee){const Dt=kt.stencilBuffer?fe.DEPTH_STENCIL_ATTACHMENT:fe.DEPTH_ATTACHMENT;fe.invalidateFramebuffer(fe.DRAW_FRAMEBUFFER,[Dt])}}}function hn(kt){return Math.min(xe.maxSamples,kt.samples)}function mn(kt){const Dt=ge.get(kt);return kt.samples>0&&K.has("WEBGL_multisampled_render_to_texture")===!0&&Dt.__useRenderToTexture!==!1}function dn(kt){const Dt=ve.render.frame;Ae.get(kt)!==Dt&&(Ae.set(kt,Dt),kt.update())}function Hn(kt,Dt){const ln=kt.colorSpace,nn=kt.format,gn=kt.type;return kt.isCompressedTexture===!0||kt.isVideoTexture===!0||ln!==LinearSRGBColorSpace&&ln!==NoColorSpace&&(ColorManagement.getTransfer(ln)===SRGBTransfer?(nn!==RGBAFormat||gn!==UnsignedByteType)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ln)),Dt}function Bn(kt){return typeof HTMLImageElement<"u"&&kt instanceof HTMLImageElement?(be.width=kt.naturalWidth||kt.width,be.height=kt.naturalHeight||kt.height):typeof VideoFrame<"u"&&kt instanceof VideoFrame?(be.width=kt.displayWidth,be.height=kt.displayHeight):(be.width=kt.width,be.height=kt.height),be}this.allocateTextureUnit=Qe,this.resetTextureUnits=qe,this.setTexture2D=Nt,this.setTexture2DArray=Ye,this.setTexture3D=at,this.setTextureCube=rt,this.rebindTextures=Un,this.setupRenderTarget=kn,this.updateRenderTargetMipmap=bn,this.updateMultisampleRenderTarget=Dn,this.setupDepthRenderbuffer=$n,this.setupFrameBufferTexture=an,this.useMultisampledRTT=mn}function WebGLUtils(fe,K){function me(ge,xe=NoColorSpace){let ye;const ve=ColorManagement.getTransfer(xe);if(ge===UnsignedByteType)return fe.UNSIGNED_BYTE;if(ge===UnsignedShort4444Type)return fe.UNSIGNED_SHORT_4_4_4_4;if(ge===UnsignedShort5551Type)return fe.UNSIGNED_SHORT_5_5_5_1;if(ge===UnsignedInt5999Type)return fe.UNSIGNED_INT_5_9_9_9_REV;if(ge===ByteType)return fe.BYTE;if(ge===ShortType)return fe.SHORT;if(ge===UnsignedShortType)return fe.UNSIGNED_SHORT;if(ge===IntType)return fe.INT;if(ge===UnsignedIntType)return fe.UNSIGNED_INT;if(ge===FloatType)return fe.FLOAT;if(ge===HalfFloatType)return fe.HALF_FLOAT;if(ge===AlphaFormat)return fe.ALPHA;if(ge===RGBFormat)return fe.RGB;if(ge===RGBAFormat)return fe.RGBA;if(ge===LuminanceFormat)return fe.LUMINANCE;if(ge===LuminanceAlphaFormat)return fe.LUMINANCE_ALPHA;if(ge===DepthFormat)return fe.DEPTH_COMPONENT;if(ge===DepthStencilFormat)return fe.DEPTH_STENCIL;if(ge===RedFormat)return fe.RED;if(ge===RedIntegerFormat)return fe.RED_INTEGER;if(ge===RGFormat)return fe.RG;if(ge===RGIntegerFormat)return fe.RG_INTEGER;if(ge===RGBAIntegerFormat)return fe.RGBA_INTEGER;if(ge===RGB_S3TC_DXT1_Format||ge===RGBA_S3TC_DXT1_Format||ge===RGBA_S3TC_DXT3_Format||ge===RGBA_S3TC_DXT5_Format)if(ve===SRGBTransfer)if(ye=K.get("WEBGL_compressed_texture_s3tc_srgb"),ye!==null){if(ge===RGB_S3TC_DXT1_Format)return ye.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(ge===RGBA_S3TC_DXT1_Format)return ye.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(ge===RGBA_S3TC_DXT3_Format)return ye.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(ge===RGBA_S3TC_DXT5_Format)return ye.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(ye=K.get("WEBGL_compressed_texture_s3tc"),ye!==null){if(ge===RGB_S3TC_DXT1_Format)return ye.COMPRESSED_RGB_S3TC_DXT1_EXT;if(ge===RGBA_S3TC_DXT1_Format)return ye.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(ge===RGBA_S3TC_DXT3_Format)return ye.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(ge===RGBA_S3TC_DXT5_Format)return ye.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(ge===RGB_PVRTC_4BPPV1_Format||ge===RGB_PVRTC_2BPPV1_Format||ge===RGBA_PVRTC_4BPPV1_Format||ge===RGBA_PVRTC_2BPPV1_Format)if(ye=K.get("WEBGL_compressed_texture_pvrtc"),ye!==null){if(ge===RGB_PVRTC_4BPPV1_Format)return ye.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(ge===RGB_PVRTC_2BPPV1_Format)return ye.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(ge===RGBA_PVRTC_4BPPV1_Format)return ye.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(ge===RGBA_PVRTC_2BPPV1_Format)return ye.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(ge===RGB_ETC1_Format||ge===RGB_ETC2_Format||ge===RGBA_ETC2_EAC_Format)if(ye=K.get("WEBGL_compressed_texture_etc"),ye!==null){if(ge===RGB_ETC1_Format||ge===RGB_ETC2_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ETC2:ye.COMPRESSED_RGB8_ETC2;if(ge===RGBA_ETC2_EAC_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:ye.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(ge===RGBA_ASTC_4x4_Format||ge===RGBA_ASTC_5x4_Format||ge===RGBA_ASTC_5x5_Format||ge===RGBA_ASTC_6x5_Format||ge===RGBA_ASTC_6x6_Format||ge===RGBA_ASTC_8x5_Format||ge===RGBA_ASTC_8x6_Format||ge===RGBA_ASTC_8x8_Format||ge===RGBA_ASTC_10x5_Format||ge===RGBA_ASTC_10x6_Format||ge===RGBA_ASTC_10x8_Format||ge===RGBA_ASTC_10x10_Format||ge===RGBA_ASTC_12x10_Format||ge===RGBA_ASTC_12x12_Format)if(ye=K.get("WEBGL_compressed_texture_astc"),ye!==null){if(ge===RGBA_ASTC_4x4_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:ye.COMPRESSED_RGBA_ASTC_4x4_KHR;if(ge===RGBA_ASTC_5x4_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:ye.COMPRESSED_RGBA_ASTC_5x4_KHR;if(ge===RGBA_ASTC_5x5_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:ye.COMPRESSED_RGBA_ASTC_5x5_KHR;if(ge===RGBA_ASTC_6x5_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:ye.COMPRESSED_RGBA_ASTC_6x5_KHR;if(ge===RGBA_ASTC_6x6_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:ye.COMPRESSED_RGBA_ASTC_6x6_KHR;if(ge===RGBA_ASTC_8x5_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:ye.COMPRESSED_RGBA_ASTC_8x5_KHR;if(ge===RGBA_ASTC_8x6_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:ye.COMPRESSED_RGBA_ASTC_8x6_KHR;if(ge===RGBA_ASTC_8x8_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:ye.COMPRESSED_RGBA_ASTC_8x8_KHR;if(ge===RGBA_ASTC_10x5_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:ye.COMPRESSED_RGBA_ASTC_10x5_KHR;if(ge===RGBA_ASTC_10x6_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:ye.COMPRESSED_RGBA_ASTC_10x6_KHR;if(ge===RGBA_ASTC_10x8_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:ye.COMPRESSED_RGBA_ASTC_10x8_KHR;if(ge===RGBA_ASTC_10x10_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:ye.COMPRESSED_RGBA_ASTC_10x10_KHR;if(ge===RGBA_ASTC_12x10_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:ye.COMPRESSED_RGBA_ASTC_12x10_KHR;if(ge===RGBA_ASTC_12x12_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:ye.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(ge===RGBA_BPTC_Format||ge===RGB_BPTC_SIGNED_Format||ge===RGB_BPTC_UNSIGNED_Format)if(ye=K.get("EXT_texture_compression_bptc"),ye!==null){if(ge===RGBA_BPTC_Format)return ve===SRGBTransfer?ye.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:ye.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(ge===RGB_BPTC_SIGNED_Format)return ye.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(ge===RGB_BPTC_UNSIGNED_Format)return ye.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(ge===RED_RGTC1_Format||ge===SIGNED_RED_RGTC1_Format||ge===RED_GREEN_RGTC2_Format||ge===SIGNED_RED_GREEN_RGTC2_Format)if(ye=K.get("EXT_texture_compression_rgtc"),ye!==null){if(ge===RGBA_BPTC_Format)return ye.COMPRESSED_RED_RGTC1_EXT;if(ge===SIGNED_RED_RGTC1_Format)return ye.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(ge===RED_GREEN_RGTC2_Format)return ye.COMPRESSED_RED_GREEN_RGTC2_EXT;if(ge===SIGNED_RED_GREEN_RGTC2_Format)return ye.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return ge===UnsignedInt248Type?fe.UNSIGNED_INT_24_8:fe[ge]!==void 0?fe[ge]:null}return{convert:me}}const _occlusion_vertex=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,_occlusion_fragment=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(K,me,ge){if(this.texture===null){const xe=new Texture,ye=K.properties.get(xe);ye.__webglTexture=me.texture,(me.depthNear!==ge.depthNear||me.depthFar!==ge.depthFar)&&(this.depthNear=me.depthNear,this.depthFar=me.depthFar),this.texture=xe}}getMesh(K){if(this.texture!==null&&this.mesh===null){const me=K.cameras[0].viewport,ge=new ShaderMaterial({vertexShader:_occlusion_vertex,fragmentShader:_occlusion_fragment,uniforms:{depthColor:{value:this.texture},depthWidth:{value:me.z},depthHeight:{value:me.w}}});this.mesh=new Mesh(new PlaneGeometry(20,20),ge)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends EventDispatcher$2{constructor(K,me){super();const ge=this;let xe=null,ye=1,ve=null,_e="local-floor",Ee=1,be=null,Ae=null,Se=null,Ce=null,Te=null,Re=null;const De=new WebXRDepthSensing,Ie=me.getContextAttributes();let Be=null,Le=null;const Oe=[],Fe=[],Ue=new Vector2;let Ne=null;const He=new PerspectiveCamera;He.viewport=new Vector4;const ze=new PerspectiveCamera;ze.viewport=new Vector4;const je=[He,ze],Ge=new ArrayCamera;let Xe=null,qe=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Yt){let Gt=Oe[Yt];return Gt===void 0&&(Gt=new WebXRController,Oe[Yt]=Gt),Gt.getTargetRaySpace()},this.getControllerGrip=function(Yt){let Gt=Oe[Yt];return Gt===void 0&&(Gt=new WebXRController,Oe[Yt]=Gt),Gt.getGripSpace()},this.getHand=function(Yt){let Gt=Oe[Yt];return Gt===void 0&&(Gt=new WebXRController,Oe[Yt]=Gt),Gt.getHandSpace()};function Qe(Yt){const Gt=Fe.indexOf(Yt.inputSource);if(Gt===-1)return;const an=Oe[Gt];an!==void 0&&(an.update(Yt.inputSource,Yt.frame,be||ve),an.dispatchEvent({type:Yt.type,data:Yt.inputSource}))}function nt(){xe.removeEventListener("select",Qe),xe.removeEventListener("selectstart",Qe),xe.removeEventListener("selectend",Qe),xe.removeEventListener("squeeze",Qe),xe.removeEventListener("squeezestart",Qe),xe.removeEventListener("squeezeend",Qe),xe.removeEventListener("end",nt),xe.removeEventListener("inputsourceschange",Nt);for(let Yt=0;Yt<Oe.length;Yt++){const Gt=Fe[Yt];Gt!==null&&(Fe[Yt]=null,Oe[Yt].disconnect(Gt))}Xe=null,qe=null,De.reset(),K.setRenderTarget(Be),Te=null,Ce=null,Se=null,xe=null,Le=null,Pt.stop(),ge.isPresenting=!1,K.setPixelRatio(Ne),K.setSize(Ue.width,Ue.height,!1),ge.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Yt){ye=Yt,ge.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Yt){_e=Yt,ge.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return be||ve},this.setReferenceSpace=function(Yt){be=Yt},this.getBaseLayer=function(){return Ce!==null?Ce:Te},this.getBinding=function(){return Se},this.getFrame=function(){return Re},this.getSession=function(){return xe},this.setSession=async function(Yt){if(xe=Yt,xe!==null){if(Be=K.getRenderTarget(),xe.addEventListener("select",Qe),xe.addEventListener("selectstart",Qe),xe.addEventListener("selectend",Qe),xe.addEventListener("squeeze",Qe),xe.addEventListener("squeezestart",Qe),xe.addEventListener("squeezeend",Qe),xe.addEventListener("end",nt),xe.addEventListener("inputsourceschange",Nt),Ie.xrCompatible!==!0&&await me.makeXRCompatible(),Ne=K.getPixelRatio(),K.getSize(Ue),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let an=null,pn=null,En=null;Ie.depth&&(En=Ie.stencil?me.DEPTH24_STENCIL8:me.DEPTH_COMPONENT24,an=Ie.stencil?DepthStencilFormat:DepthFormat,pn=Ie.stencil?UnsignedInt248Type:UnsignedIntType);const $n={colorFormat:me.RGBA8,depthFormat:En,scaleFactor:ye};Se=new XRWebGLBinding(xe,me),Ce=Se.createProjectionLayer($n),xe.updateRenderState({layers:[Ce]}),K.setPixelRatio(1),K.setSize(Ce.textureWidth,Ce.textureHeight,!1),Le=new WebGLRenderTarget(Ce.textureWidth,Ce.textureHeight,{format:RGBAFormat,type:UnsignedByteType,depthTexture:new DepthTexture(Ce.textureWidth,Ce.textureHeight,pn,void 0,void 0,void 0,void 0,void 0,void 0,an),stencilBuffer:Ie.stencil,colorSpace:K.outputColorSpace,samples:Ie.antialias?4:0,resolveDepthBuffer:Ce.ignoreDepthValues===!1,resolveStencilBuffer:Ce.ignoreDepthValues===!1})}else{const an={antialias:Ie.antialias,alpha:!0,depth:Ie.depth,stencil:Ie.stencil,framebufferScaleFactor:ye};Te=new XRWebGLLayer(xe,me,an),xe.updateRenderState({baseLayer:Te}),K.setPixelRatio(1),K.setSize(Te.framebufferWidth,Te.framebufferHeight,!1),Le=new WebGLRenderTarget(Te.framebufferWidth,Te.framebufferHeight,{format:RGBAFormat,type:UnsignedByteType,colorSpace:K.outputColorSpace,stencilBuffer:Ie.stencil,resolveDepthBuffer:Te.ignoreDepthValues===!1,resolveStencilBuffer:Te.ignoreDepthValues===!1})}Le.isXRRenderTarget=!0,this.setFoveation(Ee),be=null,ve=await xe.requestReferenceSpace(_e),Pt.setContext(xe),Pt.start(),ge.isPresenting=!0,ge.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(xe!==null)return xe.environmentBlendMode},this.getDepthTexture=function(){return De.getDepthTexture()};function Nt(Yt){for(let Gt=0;Gt<Yt.removed.length;Gt++){const an=Yt.removed[Gt],pn=Fe.indexOf(an);pn>=0&&(Fe[pn]=null,Oe[pn].disconnect(an))}for(let Gt=0;Gt<Yt.added.length;Gt++){const an=Yt.added[Gt];let pn=Fe.indexOf(an);if(pn===-1){for(let $n=0;$n<Oe.length;$n++)if($n>=Fe.length){Fe.push(an),pn=$n;break}else if(Fe[$n]===null){Fe[$n]=an,pn=$n;break}if(pn===-1)break}const En=Oe[pn];En&&En.connect(an)}}const Ye=new Vector3,at=new Vector3;function rt(Yt,Gt,an){Ye.setFromMatrixPosition(Gt.matrixWorld),at.setFromMatrixPosition(an.matrixWorld);const pn=Ye.distanceTo(at),En=Gt.projectionMatrix.elements,$n=an.projectionMatrix.elements,Un=En[14]/(En[10]-1),kn=En[14]/(En[10]+1),bn=(En[9]+1)/En[5],Mn=(En[9]-1)/En[5],zt=(En[8]-1)/En[0],Dn=($n[8]+1)/$n[0],hn=Un*zt,mn=Un*Dn,dn=pn/(-zt+Dn),Hn=dn*-zt;if(Gt.matrixWorld.decompose(Yt.position,Yt.quaternion,Yt.scale),Yt.translateX(Hn),Yt.translateZ(dn),Yt.matrixWorld.compose(Yt.position,Yt.quaternion,Yt.scale),Yt.matrixWorldInverse.copy(Yt.matrixWorld).invert(),En[10]===-1)Yt.projectionMatrix.copy(Gt.projectionMatrix),Yt.projectionMatrixInverse.copy(Gt.projectionMatrixInverse);else{const Bn=Un+dn,kt=kn+dn,Dt=hn-Hn,ln=mn+(pn-Hn),nn=bn*kn/kt*Bn,gn=Mn*kn/kt*Bn;Yt.projectionMatrix.makePerspective(Dt,ln,nn,gn,Bn,kt),Yt.projectionMatrixInverse.copy(Yt.projectionMatrix).invert()}}function Ft(Yt,Gt){Gt===null?Yt.matrixWorld.copy(Yt.matrix):Yt.matrixWorld.multiplyMatrices(Gt.matrixWorld,Yt.matrix),Yt.matrixWorldInverse.copy(Yt.matrixWorld).invert()}this.updateCamera=function(Yt){if(xe===null)return;let Gt=Yt.near,an=Yt.far;De.texture!==null&&(De.depthNear>0&&(Gt=De.depthNear),De.depthFar>0&&(an=De.depthFar)),Ge.near=ze.near=He.near=Gt,Ge.far=ze.far=He.far=an,(Xe!==Ge.near||qe!==Ge.far)&&(xe.updateRenderState({depthNear:Ge.near,depthFar:Ge.far}),Xe=Ge.near,qe=Ge.far),He.layers.mask=Yt.layers.mask|2,ze.layers.mask=Yt.layers.mask|4,Ge.layers.mask=He.layers.mask|ze.layers.mask;const pn=Yt.parent,En=Ge.cameras;Ft(Ge,pn);for(let $n=0;$n<En.length;$n++)Ft(En[$n],pn);En.length===2?rt(Ge,He,ze):Ge.projectionMatrix.copy(He.projectionMatrix),Je(Yt,Ge,pn)};function Je(Yt,Gt,an){an===null?Yt.matrix.copy(Gt.matrixWorld):(Yt.matrix.copy(an.matrixWorld),Yt.matrix.invert(),Yt.matrix.multiply(Gt.matrixWorld)),Yt.matrix.decompose(Yt.position,Yt.quaternion,Yt.scale),Yt.updateMatrixWorld(!0),Yt.projectionMatrix.copy(Gt.projectionMatrix),Yt.projectionMatrixInverse.copy(Gt.projectionMatrixInverse),Yt.isPerspectiveCamera&&(Yt.fov=RAD2DEG*2*Math.atan(1/Yt.projectionMatrix.elements[5]),Yt.zoom=1)}this.getCamera=function(){return Ge},this.getFoveation=function(){if(!(Ce===null&&Te===null))return Ee},this.setFoveation=function(Yt){Ee=Yt,Ce!==null&&(Ce.fixedFoveation=Yt),Te!==null&&Te.fixedFoveation!==void 0&&(Te.fixedFoveation=Yt)},this.hasDepthSensing=function(){return De.texture!==null},this.getDepthSensingMesh=function(){return De.getMesh(Ge)};let Wt=null;function Kt(Yt,Gt){if(Ae=Gt.getViewerPose(be||ve),Re=Gt,Ae!==null){const an=Ae.views;Te!==null&&(K.setRenderTargetFramebuffer(Le,Te.framebuffer),K.setRenderTarget(Le));let pn=!1;an.length!==Ge.cameras.length&&(Ge.cameras.length=0,pn=!0);for(let Un=0;Un<an.length;Un++){const kn=an[Un];let bn=null;if(Te!==null)bn=Te.getViewport(kn);else{const zt=Se.getViewSubImage(Ce,kn);bn=zt.viewport,Un===0&&(K.setRenderTargetTextures(Le,zt.colorTexture,Ce.ignoreDepthValues?void 0:zt.depthStencilTexture),K.setRenderTarget(Le))}let Mn=je[Un];Mn===void 0&&(Mn=new PerspectiveCamera,Mn.layers.enable(Un),Mn.viewport=new Vector4,je[Un]=Mn),Mn.matrix.fromArray(kn.transform.matrix),Mn.matrix.decompose(Mn.position,Mn.quaternion,Mn.scale),Mn.projectionMatrix.fromArray(kn.projectionMatrix),Mn.projectionMatrixInverse.copy(Mn.projectionMatrix).invert(),Mn.viewport.set(bn.x,bn.y,bn.width,bn.height),Un===0&&(Ge.matrix.copy(Mn.matrix),Ge.matrix.decompose(Ge.position,Ge.quaternion,Ge.scale)),pn===!0&&Ge.cameras.push(Mn)}const En=xe.enabledFeatures;if(En&&En.includes("depth-sensing")&&xe.depthUsage=="gpu-optimized"&&Se){const Un=Se.getDepthInformation(an[0]);Un&&Un.isValid&&Un.texture&&De.init(K,Un,xe.renderState)}}for(let an=0;an<Oe.length;an++){const pn=Fe[an],En=Oe[an];pn!==null&&En!==void 0&&En.update(pn,Gt,be||ve)}Wt&&Wt(Yt,Gt),Gt.detectedPlanes&&ge.dispatchEvent({type:"planesdetected",data:Gt}),Re=null}const Pt=new WebGLAnimation;Pt.setAnimationLoop(Kt),this.setAnimationLoop=function(Yt){Wt=Yt},this.dispose=function(){}}}const _e1=new Euler,_m1=new Matrix4;function WebGLMaterials(fe,K){function me(Ie,Be){Ie.matrixAutoUpdate===!0&&Ie.updateMatrix(),Be.value.copy(Ie.matrix)}function ge(Ie,Be){Be.color.getRGB(Ie.fogColor.value,getUnlitUniformColorSpace(fe)),Be.isFog?(Ie.fogNear.value=Be.near,Ie.fogFar.value=Be.far):Be.isFogExp2&&(Ie.fogDensity.value=Be.density)}function xe(Ie,Be,Le,Oe,Fe){Be.isMeshBasicMaterial||Be.isMeshLambertMaterial?ye(Ie,Be):Be.isMeshToonMaterial?(ye(Ie,Be),Se(Ie,Be)):Be.isMeshPhongMaterial?(ye(Ie,Be),Ae(Ie,Be)):Be.isMeshStandardMaterial?(ye(Ie,Be),Ce(Ie,Be),Be.isMeshPhysicalMaterial&&Te(Ie,Be,Fe)):Be.isMeshMatcapMaterial?(ye(Ie,Be),Re(Ie,Be)):Be.isMeshDepthMaterial?ye(Ie,Be):Be.isMeshDistanceMaterial?(ye(Ie,Be),De(Ie,Be)):Be.isMeshNormalMaterial?ye(Ie,Be):Be.isLineBasicMaterial?(ve(Ie,Be),Be.isLineDashedMaterial&&_e(Ie,Be)):Be.isPointsMaterial?Ee(Ie,Be,Le,Oe):Be.isSpriteMaterial?be(Ie,Be):Be.isShadowMaterial?(Ie.color.value.copy(Be.color),Ie.opacity.value=Be.opacity):Be.isShaderMaterial&&(Be.uniformsNeedUpdate=!1)}function ye(Ie,Be){Ie.opacity.value=Be.opacity,Be.color&&Ie.diffuse.value.copy(Be.color),Be.emissive&&Ie.emissive.value.copy(Be.emissive).multiplyScalar(Be.emissiveIntensity),Be.map&&(Ie.map.value=Be.map,me(Be.map,Ie.mapTransform)),Be.alphaMap&&(Ie.alphaMap.value=Be.alphaMap,me(Be.alphaMap,Ie.alphaMapTransform)),Be.bumpMap&&(Ie.bumpMap.value=Be.bumpMap,me(Be.bumpMap,Ie.bumpMapTransform),Ie.bumpScale.value=Be.bumpScale,Be.side===BackSide&&(Ie.bumpScale.value*=-1)),Be.normalMap&&(Ie.normalMap.value=Be.normalMap,me(Be.normalMap,Ie.normalMapTransform),Ie.normalScale.value.copy(Be.normalScale),Be.side===BackSide&&Ie.normalScale.value.negate()),Be.displacementMap&&(Ie.displacementMap.value=Be.displacementMap,me(Be.displacementMap,Ie.displacementMapTransform),Ie.displacementScale.value=Be.displacementScale,Ie.displacementBias.value=Be.displacementBias),Be.emissiveMap&&(Ie.emissiveMap.value=Be.emissiveMap,me(Be.emissiveMap,Ie.emissiveMapTransform)),Be.specularMap&&(Ie.specularMap.value=Be.specularMap,me(Be.specularMap,Ie.specularMapTransform)),Be.alphaTest>0&&(Ie.alphaTest.value=Be.alphaTest);const Le=K.get(Be),Oe=Le.envMap,Fe=Le.envMapRotation;Oe&&(Ie.envMap.value=Oe,_e1.copy(Fe),_e1.x*=-1,_e1.y*=-1,_e1.z*=-1,Oe.isCubeTexture&&Oe.isRenderTargetTexture===!1&&(_e1.y*=-1,_e1.z*=-1),Ie.envMapRotation.value.setFromMatrix4(_m1.makeRotationFromEuler(_e1)),Ie.flipEnvMap.value=Oe.isCubeTexture&&Oe.isRenderTargetTexture===!1?-1:1,Ie.reflectivity.value=Be.reflectivity,Ie.ior.value=Be.ior,Ie.refractionRatio.value=Be.refractionRatio),Be.lightMap&&(Ie.lightMap.value=Be.lightMap,Ie.lightMapIntensity.value=Be.lightMapIntensity,me(Be.lightMap,Ie.lightMapTransform)),Be.aoMap&&(Ie.aoMap.value=Be.aoMap,Ie.aoMapIntensity.value=Be.aoMapIntensity,me(Be.aoMap,Ie.aoMapTransform))}function ve(Ie,Be){Ie.diffuse.value.copy(Be.color),Ie.opacity.value=Be.opacity,Be.map&&(Ie.map.value=Be.map,me(Be.map,Ie.mapTransform))}function _e(Ie,Be){Ie.dashSize.value=Be.dashSize,Ie.totalSize.value=Be.dashSize+Be.gapSize,Ie.scale.value=Be.scale}function Ee(Ie,Be,Le,Oe){Ie.diffuse.value.copy(Be.color),Ie.opacity.value=Be.opacity,Ie.size.value=Be.size*Le,Ie.scale.value=Oe*.5,Be.map&&(Ie.map.value=Be.map,me(Be.map,Ie.uvTransform)),Be.alphaMap&&(Ie.alphaMap.value=Be.alphaMap,me(Be.alphaMap,Ie.alphaMapTransform)),Be.alphaTest>0&&(Ie.alphaTest.value=Be.alphaTest)}function be(Ie,Be){Ie.diffuse.value.copy(Be.color),Ie.opacity.value=Be.opacity,Ie.rotation.value=Be.rotation,Be.map&&(Ie.map.value=Be.map,me(Be.map,Ie.mapTransform)),Be.alphaMap&&(Ie.alphaMap.value=Be.alphaMap,me(Be.alphaMap,Ie.alphaMapTransform)),Be.alphaTest>0&&(Ie.alphaTest.value=Be.alphaTest)}function Ae(Ie,Be){Ie.specular.value.copy(Be.specular),Ie.shininess.value=Math.max(Be.shininess,1e-4)}function Se(Ie,Be){Be.gradientMap&&(Ie.gradientMap.value=Be.gradientMap)}function Ce(Ie,Be){Ie.metalness.value=Be.metalness,Be.metalnessMap&&(Ie.metalnessMap.value=Be.metalnessMap,me(Be.metalnessMap,Ie.metalnessMapTransform)),Ie.roughness.value=Be.roughness,Be.roughnessMap&&(Ie.roughnessMap.value=Be.roughnessMap,me(Be.roughnessMap,Ie.roughnessMapTransform)),Be.envMap&&(Ie.envMapIntensity.value=Be.envMapIntensity)}function Te(Ie,Be,Le){Ie.ior.value=Be.ior,Be.sheen>0&&(Ie.sheenColor.value.copy(Be.sheenColor).multiplyScalar(Be.sheen),Ie.sheenRoughness.value=Be.sheenRoughness,Be.sheenColorMap&&(Ie.sheenColorMap.value=Be.sheenColorMap,me(Be.sheenColorMap,Ie.sheenColorMapTransform)),Be.sheenRoughnessMap&&(Ie.sheenRoughnessMap.value=Be.sheenRoughnessMap,me(Be.sheenRoughnessMap,Ie.sheenRoughnessMapTransform))),Be.clearcoat>0&&(Ie.clearcoat.value=Be.clearcoat,Ie.clearcoatRoughness.value=Be.clearcoatRoughness,Be.clearcoatMap&&(Ie.clearcoatMap.value=Be.clearcoatMap,me(Be.clearcoatMap,Ie.clearcoatMapTransform)),Be.clearcoatRoughnessMap&&(Ie.clearcoatRoughnessMap.value=Be.clearcoatRoughnessMap,me(Be.clearcoatRoughnessMap,Ie.clearcoatRoughnessMapTransform)),Be.clearcoatNormalMap&&(Ie.clearcoatNormalMap.value=Be.clearcoatNormalMap,me(Be.clearcoatNormalMap,Ie.clearcoatNormalMapTransform),Ie.clearcoatNormalScale.value.copy(Be.clearcoatNormalScale),Be.side===BackSide&&Ie.clearcoatNormalScale.value.negate())),Be.dispersion>0&&(Ie.dispersion.value=Be.dispersion),Be.iridescence>0&&(Ie.iridescence.value=Be.iridescence,Ie.iridescenceIOR.value=Be.iridescenceIOR,Ie.iridescenceThicknessMinimum.value=Be.iridescenceThicknessRange[0],Ie.iridescenceThicknessMaximum.value=Be.iridescenceThicknessRange[1],Be.iridescenceMap&&(Ie.iridescenceMap.value=Be.iridescenceMap,me(Be.iridescenceMap,Ie.iridescenceMapTransform)),Be.iridescenceThicknessMap&&(Ie.iridescenceThicknessMap.value=Be.iridescenceThicknessMap,me(Be.iridescenceThicknessMap,Ie.iridescenceThicknessMapTransform))),Be.transmission>0&&(Ie.transmission.value=Be.transmission,Ie.transmissionSamplerMap.value=Le.texture,Ie.transmissionSamplerSize.value.set(Le.width,Le.height),Be.transmissionMap&&(Ie.transmissionMap.value=Be.transmissionMap,me(Be.transmissionMap,Ie.transmissionMapTransform)),Ie.thickness.value=Be.thickness,Be.thicknessMap&&(Ie.thicknessMap.value=Be.thicknessMap,me(Be.thicknessMap,Ie.thicknessMapTransform)),Ie.attenuationDistance.value=Be.attenuationDistance,Ie.attenuationColor.value.copy(Be.attenuationColor)),Be.anisotropy>0&&(Ie.anisotropyVector.value.set(Be.anisotropy*Math.cos(Be.anisotropyRotation),Be.anisotropy*Math.sin(Be.anisotropyRotation)),Be.anisotropyMap&&(Ie.anisotropyMap.value=Be.anisotropyMap,me(Be.anisotropyMap,Ie.anisotropyMapTransform))),Ie.specularIntensity.value=Be.specularIntensity,Ie.specularColor.value.copy(Be.specularColor),Be.specularColorMap&&(Ie.specularColorMap.value=Be.specularColorMap,me(Be.specularColorMap,Ie.specularColorMapTransform)),Be.specularIntensityMap&&(Ie.specularIntensityMap.value=Be.specularIntensityMap,me(Be.specularIntensityMap,Ie.specularIntensityMapTransform))}function Re(Ie,Be){Be.matcap&&(Ie.matcap.value=Be.matcap)}function De(Ie,Be){const Le=K.get(Be).light;Ie.referencePosition.value.setFromMatrixPosition(Le.matrixWorld),Ie.nearDistance.value=Le.shadow.camera.near,Ie.farDistance.value=Le.shadow.camera.far}return{refreshFogUniforms:ge,refreshMaterialUniforms:xe}}function WebGLUniformsGroups(fe,K,me,ge){let xe={},ye={},ve=[];const _e=fe.getParameter(fe.MAX_UNIFORM_BUFFER_BINDINGS);function Ee(Le,Oe){const Fe=Oe.program;ge.uniformBlockBinding(Le,Fe)}function be(Le,Oe){let Fe=xe[Le.id];Fe===void 0&&(Re(Le),Fe=Ae(Le),xe[Le.id]=Fe,Le.addEventListener("dispose",Ie));const Ue=Oe.program;ge.updateUBOMapping(Le,Ue);const Ne=K.render.frame;ye[Le.id]!==Ne&&(Ce(Le),ye[Le.id]=Ne)}function Ae(Le){const Oe=Se();Le.__bindingPointIndex=Oe;const Fe=fe.createBuffer(),Ue=Le.__size,Ne=Le.usage;return fe.bindBuffer(fe.UNIFORM_BUFFER,Fe),fe.bufferData(fe.UNIFORM_BUFFER,Ue,Ne),fe.bindBuffer(fe.UNIFORM_BUFFER,null),fe.bindBufferBase(fe.UNIFORM_BUFFER,Oe,Fe),Fe}function Se(){for(let Le=0;Le<_e;Le++)if(ve.indexOf(Le)===-1)return ve.push(Le),Le;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function Ce(Le){const Oe=xe[Le.id],Fe=Le.uniforms,Ue=Le.__cache;fe.bindBuffer(fe.UNIFORM_BUFFER,Oe);for(let Ne=0,He=Fe.length;Ne<He;Ne++){const ze=Array.isArray(Fe[Ne])?Fe[Ne]:[Fe[Ne]];for(let je=0,Ge=ze.length;je<Ge;je++){const Xe=ze[je];if(Te(Xe,Ne,je,Ue)===!0){const qe=Xe.__offset,Qe=Array.isArray(Xe.value)?Xe.value:[Xe.value];let nt=0;for(let Nt=0;Nt<Qe.length;Nt++){const Ye=Qe[Nt],at=De(Ye);typeof Ye=="number"||typeof Ye=="boolean"?(Xe.__data[0]=Ye,fe.bufferSubData(fe.UNIFORM_BUFFER,qe+nt,Xe.__data)):Ye.isMatrix3?(Xe.__data[0]=Ye.elements[0],Xe.__data[1]=Ye.elements[1],Xe.__data[2]=Ye.elements[2],Xe.__data[3]=0,Xe.__data[4]=Ye.elements[3],Xe.__data[5]=Ye.elements[4],Xe.__data[6]=Ye.elements[5],Xe.__data[7]=0,Xe.__data[8]=Ye.elements[6],Xe.__data[9]=Ye.elements[7],Xe.__data[10]=Ye.elements[8],Xe.__data[11]=0):(Ye.toArray(Xe.__data,nt),nt+=at.storage/Float32Array.BYTES_PER_ELEMENT)}fe.bufferSubData(fe.UNIFORM_BUFFER,qe,Xe.__data)}}}fe.bindBuffer(fe.UNIFORM_BUFFER,null)}function Te(Le,Oe,Fe,Ue){const Ne=Le.value,He=Oe+"_"+Fe;if(Ue[He]===void 0)return typeof Ne=="number"||typeof Ne=="boolean"?Ue[He]=Ne:Ue[He]=Ne.clone(),!0;{const ze=Ue[He];if(typeof Ne=="number"||typeof Ne=="boolean"){if(ze!==Ne)return Ue[He]=Ne,!0}else if(ze.equals(Ne)===!1)return ze.copy(Ne),!0}return!1}function Re(Le){const Oe=Le.uniforms;let Fe=0;const Ue=16;for(let He=0,ze=Oe.length;He<ze;He++){const je=Array.isArray(Oe[He])?Oe[He]:[Oe[He]];for(let Ge=0,Xe=je.length;Ge<Xe;Ge++){const qe=je[Ge],Qe=Array.isArray(qe.value)?qe.value:[qe.value];for(let nt=0,Nt=Qe.length;nt<Nt;nt++){const Ye=Qe[nt],at=De(Ye),rt=Fe%Ue,Ft=rt%at.boundary,Je=rt+Ft;Fe+=Ft,Je!==0&&Ue-Je<at.storage&&(Fe+=Ue-Je),qe.__data=new Float32Array(at.storage/Float32Array.BYTES_PER_ELEMENT),qe.__offset=Fe,Fe+=at.storage}}}const Ne=Fe%Ue;return Ne>0&&(Fe+=Ue-Ne),Le.__size=Fe,Le.__cache={},this}function De(Le){const Oe={boundary:0,storage:0};return typeof Le=="number"||typeof Le=="boolean"?(Oe.boundary=4,Oe.storage=4):Le.isVector2?(Oe.boundary=8,Oe.storage=8):Le.isVector3||Le.isColor?(Oe.boundary=16,Oe.storage=12):Le.isVector4?(Oe.boundary=16,Oe.storage=16):Le.isMatrix3?(Oe.boundary=48,Oe.storage=48):Le.isMatrix4?(Oe.boundary=64,Oe.storage=64):Le.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",Le),Oe}function Ie(Le){const Oe=Le.target;Oe.removeEventListener("dispose",Ie);const Fe=ve.indexOf(Oe.__bindingPointIndex);ve.splice(Fe,1),fe.deleteBuffer(xe[Oe.id]),delete xe[Oe.id],delete ye[Oe.id]}function Be(){for(const Le in xe)fe.deleteBuffer(xe[Le]);ve=[],xe={},ye={}}return{bind:Ee,update:be,dispose:Be}}class WebGLRenderer{constructor(K={}){const{canvas:me=createCanvasElement(),context:ge=null,depth:xe=!0,stencil:ye=!1,alpha:ve=!1,antialias:_e=!1,premultipliedAlpha:Ee=!0,preserveDrawingBuffer:be=!1,powerPreference:Ae="default",failIfMajorPerformanceCaveat:Se=!1,reverseDepthBuffer:Ce=!1}=K;this.isWebGLRenderer=!0;let Te;if(ge!==null){if(typeof WebGLRenderingContext<"u"&&ge instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");Te=ge.getContextAttributes().alpha}else Te=ve;const Re=new Uint32Array(4),De=new Int32Array(4);let Ie=null,Be=null;const Le=[],Oe=[];this.domElement=me,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=SRGBColorSpace,this.toneMapping=NoToneMapping,this.toneMappingExposure=1;const Fe=this;let Ue=!1,Ne=0,He=0,ze=null,je=-1,Ge=null;const Xe=new Vector4,qe=new Vector4;let Qe=null;const nt=new Color$1(0);let Nt=0,Ye=me.width,at=me.height,rt=1,Ft=null,Je=null;const Wt=new Vector4(0,0,Ye,at),Kt=new Vector4(0,0,Ye,at);let Pt=!1;const Yt=new Frustum;let Gt=!1,an=!1;this.transmissionResolutionScale=1;const pn=new Matrix4,En=new Matrix4,$n=new Vector3,Un=new Vector4,kn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let bn=!1;function Mn(){return ze===null?rt:1}let zt=ge;function Dn(pt,$t){return me.getContext(pt,$t)}try{const pt={alpha:!0,depth:xe,stencil:ye,antialias:_e,premultipliedAlpha:Ee,preserveDrawingBuffer:be,powerPreference:Ae,failIfMajorPerformanceCaveat:Se};if("setAttribute"in me&&me.setAttribute("data-engine",`three.js r${REVISION}`),me.addEventListener("webglcontextlost",Gn,!1),me.addEventListener("webglcontextrestored",Yn,!1),me.addEventListener("webglcontextcreationerror",cr,!1),zt===null){const $t="webgl2";if(zt=Dn($t,pt),zt===null)throw Dn($t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(pt){throw console.error("THREE.WebGLRenderer: "+pt.message),pt}let hn,mn,dn,Hn,Bn,kt,Dt,ln,nn,gn,Xt,on,Rt,An,sr,zn,In,er,Kn,lr,gr,hr,Er,un;function Sn(){hn=new WebGLExtensions(zt),hn.init(),hr=new WebGLUtils(zt,hn),mn=new WebGLCapabilities(zt,hn,K,hr),dn=new WebGLState(zt,hn),mn.reverseDepthBuffer&&Ce&&dn.buffers.depth.setReversed(!0),Hn=new WebGLInfo(zt),Bn=new WebGLProperties,kt=new WebGLTextures(zt,hn,dn,Bn,mn,hr,Hn),Dt=new WebGLCubeMaps(Fe),ln=new WebGLCubeUVMaps(Fe),nn=new WebGLAttributes(zt),Er=new WebGLBindingStates(zt,nn),gn=new WebGLGeometries(zt,nn,Hn,Er),Xt=new WebGLObjects(zt,gn,nn,Hn),Kn=new WebGLMorphtargets(zt,mn,kt),zn=new WebGLClipping(Bn),on=new WebGLPrograms(Fe,Dt,ln,hn,mn,Er,zn),Rt=new WebGLMaterials(Fe,Bn),An=new WebGLRenderLists,sr=new WebGLRenderStates(hn),er=new WebGLBackground(Fe,Dt,ln,dn,Xt,Te,Ee),In=new WebGLShadowMap(Fe,Xt,mn),un=new WebGLUniformsGroups(zt,Hn,mn,dn),lr=new WebGLBufferRenderer(zt,hn,Hn),gr=new WebGLIndexedBufferRenderer(zt,hn,Hn),Hn.programs=on.programs,Fe.capabilities=mn,Fe.extensions=hn,Fe.properties=Bn,Fe.renderLists=An,Fe.shadowMap=In,Fe.state=dn,Fe.info=Hn}Sn();const wn=new WebXRManager(Fe,zt);this.xr=wn,this.getContext=function(){return zt},this.getContextAttributes=function(){return zt.getContextAttributes()},this.forceContextLoss=function(){const pt=hn.get("WEBGL_lose_context");pt&&pt.loseContext()},this.forceContextRestore=function(){const pt=hn.get("WEBGL_lose_context");pt&&pt.restoreContext()},this.getPixelRatio=function(){return rt},this.setPixelRatio=function(pt){pt!==void 0&&(rt=pt,this.setSize(Ye,at,!1))},this.getSize=function(pt){return pt.set(Ye,at)},this.setSize=function(pt,$t,en=!0){if(wn.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Ye=pt,at=$t,me.width=Math.floor(pt*rt),me.height=Math.floor($t*rt),en===!0&&(me.style.width=pt+"px",me.style.height=$t+"px"),this.setViewport(0,0,pt,$t)},this.getDrawingBufferSize=function(pt){return pt.set(Ye*rt,at*rt).floor()},this.setDrawingBufferSize=function(pt,$t,en){Ye=pt,at=$t,rt=en,me.width=Math.floor(pt*en),me.height=Math.floor($t*en),this.setViewport(0,0,pt,$t)},this.getCurrentViewport=function(pt){return pt.copy(Xe)},this.getViewport=function(pt){return pt.copy(Wt)},this.setViewport=function(pt,$t,en,tn){pt.isVector4?Wt.set(pt.x,pt.y,pt.z,pt.w):Wt.set(pt,$t,en,tn),dn.viewport(Xe.copy(Wt).multiplyScalar(rt).round())},this.getScissor=function(pt){return pt.copy(Kt)},this.setScissor=function(pt,$t,en,tn){pt.isVector4?Kt.set(pt.x,pt.y,pt.z,pt.w):Kt.set(pt,$t,en,tn),dn.scissor(qe.copy(Kt).multiplyScalar(rt).round())},this.getScissorTest=function(){return Pt},this.setScissorTest=function(pt){dn.setScissorTest(Pt=pt)},this.setOpaqueSort=function(pt){Ft=pt},this.setTransparentSort=function(pt){Je=pt},this.getClearColor=function(pt){return pt.copy(er.getClearColor())},this.setClearColor=function(){er.setClearColor(...arguments)},this.getClearAlpha=function(){return er.getClearAlpha()},this.setClearAlpha=function(){er.setClearAlpha(...arguments)},this.clear=function(pt=!0,$t=!0,en=!0){let tn=0;if(pt){let cn=!1;if(ze!==null){const _n=ze.texture.format;cn=_n===RGBAIntegerFormat||_n===RGIntegerFormat||_n===RedIntegerFormat}if(cn){const _n=ze.texture.type,Fn=_n===UnsignedByteType||_n===UnsignedIntType||_n===UnsignedShortType||_n===UnsignedInt248Type||_n===UnsignedShort4444Type||_n===UnsignedShort5551Type,Wn=er.getClearColor(),qn=er.getClearAlpha(),dr=Wn.r,Ln=Wn.g,fr=Wn.b;Fn?(Re[0]=dr,Re[1]=Ln,Re[2]=fr,Re[3]=qn,zt.clearBufferuiv(zt.COLOR,0,Re)):(De[0]=dr,De[1]=Ln,De[2]=fr,De[3]=qn,zt.clearBufferiv(zt.COLOR,0,De))}else tn|=zt.COLOR_BUFFER_BIT}$t&&(tn|=zt.DEPTH_BUFFER_BIT),en&&(tn|=zt.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),zt.clear(tn)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){me.removeEventListener("webglcontextlost",Gn,!1),me.removeEventListener("webglcontextrestored",Yn,!1),me.removeEventListener("webglcontextcreationerror",cr,!1),er.dispose(),An.dispose(),sr.dispose(),Bn.dispose(),Dt.dispose(),ln.dispose(),Xt.dispose(),Er.dispose(),un.dispose(),on.dispose(),wn.dispose(),wn.removeEventListener("sessionstart",hs),wn.removeEventListener("sessionend",Ei),ai.stop()};function Gn(pt){pt.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Ue=!0}function Yn(){console.log("THREE.WebGLRenderer: Context Restored."),Ue=!1;const pt=Hn.autoReset,$t=In.enabled,en=In.autoUpdate,tn=In.needsUpdate,cn=In.type;Sn(),Hn.autoReset=pt,In.enabled=$t,In.autoUpdate=en,In.needsUpdate=tn,In.type=cn}function cr(pt){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",pt.statusMessage)}function tr(pt){const $t=pt.target;$t.removeEventListener("dispose",tr),Wr($t)}function Wr(pt){Qr(pt),Bn.remove(pt)}function Qr(pt){const $t=Bn.get(pt).programs;$t!==void 0&&($t.forEach(function(en){on.releaseProgram(en)}),pt.isShaderMaterial&&on.releaseShaderCache(pt))}this.renderBufferDirect=function(pt,$t,en,tn,cn,_n){$t===null&&($t=kn);const Fn=cn.isMesh&&cn.matrixWorld.determinant()<0,Wn=sn(pt,$t,en,tn,cn);dn.setMaterial(tn,Fn);let qn=en.index,dr=1;if(tn.wireframe===!0){if(qn=gn.getWireframeAttribute(en),qn===void 0)return;dr=2}const Ln=en.drawRange,fr=en.attributes.position;let _r=Ln.start*dr,yr=(Ln.start+Ln.count)*dr;_n!==null&&(_r=Math.max(_r,_n.start*dr),yr=Math.min(yr,(_n.start+_n.count)*dr)),qn!==null?(_r=Math.max(_r,0),yr=Math.min(yr,qn.count)):fr!=null&&(_r=Math.max(_r,0),yr=Math.min(yr,fr.count));const Hr=yr-_r;if(Hr<0||Hr===1/0)return;Er.setup(cn,tn,Wn,en,qn);let Sr,Cr=lr;if(qn!==null&&(Sr=nn.get(qn),Cr=gr,Cr.setIndex(Sr)),cn.isMesh)tn.wireframe===!0?(dn.setLineWidth(tn.wireframeLinewidth*Mn()),Cr.setMode(zt.LINES)):Cr.setMode(zt.TRIANGLES);else if(cn.isLine){let vr=tn.linewidth;vr===void 0&&(vr=1),dn.setLineWidth(vr*Mn()),cn.isLineSegments?Cr.setMode(zt.LINES):cn.isLineLoop?Cr.setMode(zt.LINE_LOOP):Cr.setMode(zt.LINE_STRIP)}else cn.isPoints?Cr.setMode(zt.POINTS):cn.isSprite&&Cr.setMode(zt.TRIANGLES);if(cn.isBatchedMesh)if(cn._multiDrawInstances!==null)warnOnce("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Cr.renderMultiDrawInstances(cn._multiDrawStarts,cn._multiDrawCounts,cn._multiDrawCount,cn._multiDrawInstances);else if(hn.get("WEBGL_multi_draw"))Cr.renderMultiDraw(cn._multiDrawStarts,cn._multiDrawCounts,cn._multiDrawCount);else{const vr=cn._multiDrawStarts,jr=cn._multiDrawCounts,Rr=cn._multiDrawCount,Dr=qn?nn.get(qn).bytesPerElement:1,Ur=Bn.get(tn).currentProgram.getUniforms();for(let Tr=0;Tr<Rr;Tr++)Ur.setValue(zt,"_gl_DrawID",Tr),Cr.render(vr[Tr]/Dr,jr[Tr])}else if(cn.isInstancedMesh)Cr.renderInstances(_r,Hr,cn.count);else if(en.isInstancedBufferGeometry){const vr=en._maxInstanceCount!==void 0?en._maxInstanceCount:1/0,jr=Math.min(en.instanceCount,vr);Cr.renderInstances(_r,Hr,jr)}else Cr.render(_r,Hr)};function kr(pt,$t,en){pt.transparent===!0&&pt.side===DoubleSide&&pt.forceSinglePass===!1?(pt.side=BackSide,pt.needsUpdate=!0,qr(pt,$t,en),pt.side=FrontSide,pt.needsUpdate=!0,qr(pt,$t,en),pt.side=DoubleSide):qr(pt,$t,en)}this.compile=function(pt,$t,en=null){en===null&&(en=pt),Be=sr.get(en),Be.init($t),Oe.push(Be),en.traverseVisible(function(cn){cn.isLight&&cn.layers.test($t.layers)&&(Be.pushLight(cn),cn.castShadow&&Be.pushShadow(cn))}),pt!==en&&pt.traverseVisible(function(cn){cn.isLight&&cn.layers.test($t.layers)&&(Be.pushLight(cn),cn.castShadow&&Be.pushShadow(cn))}),Be.setupLights();const tn=new Set;return pt.traverse(function(cn){if(!(cn.isMesh||cn.isPoints||cn.isLine||cn.isSprite))return;const _n=cn.material;if(_n)if(Array.isArray(_n))for(let Fn=0;Fn<_n.length;Fn++){const Wn=_n[Fn];kr(Wn,en,cn),tn.add(Wn)}else kr(_n,en,cn),tn.add(_n)}),Be=Oe.pop(),tn},this.compileAsync=function(pt,$t,en=null){const tn=this.compile(pt,$t,en);return new Promise(cn=>{function _n(){if(tn.forEach(function(Fn){Bn.get(Fn).currentProgram.isReady()&&tn.delete(Fn)}),tn.size===0){cn(pt);return}setTimeout(_n,10)}hn.get("KHR_parallel_shader_compile")!==null?_n():setTimeout(_n,10)})};let di=null;function ci(pt){di&&di(pt)}function hs(){ai.stop()}function Ei(){ai.start()}const ai=new WebGLAnimation;ai.setAnimationLoop(ci),typeof self<"u"&&ai.setContext(self),this.setAnimationLoop=function(pt){di=pt,wn.setAnimationLoop(pt),pt===null?ai.stop():ai.start()},wn.addEventListener("sessionstart",hs),wn.addEventListener("sessionend",Ei),this.render=function(pt,$t){if($t!==void 0&&$t.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(Ue===!0)return;if(pt.matrixWorldAutoUpdate===!0&&pt.updateMatrixWorld(),$t.parent===null&&$t.matrixWorldAutoUpdate===!0&&$t.updateMatrixWorld(),wn.enabled===!0&&wn.isPresenting===!0&&(wn.cameraAutoUpdate===!0&&wn.updateCamera($t),$t=wn.getCamera()),pt.isScene===!0&&pt.onBeforeRender(Fe,pt,$t,ze),Be=sr.get(pt,Oe.length),Be.init($t),Oe.push(Be),En.multiplyMatrices($t.projectionMatrix,$t.matrixWorldInverse),Yt.setFromProjectionMatrix(En),an=this.localClippingEnabled,Gt=zn.init(this.clippingPlanes,an),Ie=An.get(pt,Le.length),Ie.init(),Le.push(Ie),wn.enabled===!0&&wn.isPresenting===!0){const _n=Fe.xr.getDepthSensingMesh();_n!==null&&hi(_n,$t,-1/0,Fe.sortObjects)}hi(pt,$t,0,Fe.sortObjects),Ie.finish(),Fe.sortObjects===!0&&Ie.sort(Ft,Je),bn=wn.enabled===!1||wn.isPresenting===!1||wn.hasDepthSensing()===!1,bn&&er.addToRenderList(Ie,pt),this.info.render.frame++,Gt===!0&&zn.beginShadows();const en=Be.state.shadowsArray;In.render(en,pt,$t),Gt===!0&&zn.endShadows(),this.info.autoReset===!0&&this.info.reset();const tn=Ie.opaque,cn=Ie.transmissive;if(Be.setupLights(),$t.isArrayCamera){const _n=$t.cameras;if(cn.length>0)for(let Fn=0,Wn=_n.length;Fn<Wn;Fn++){const qn=_n[Fn];mi(tn,cn,pt,qn)}bn&&er.render(pt);for(let Fn=0,Wn=_n.length;Fn<Wn;Fn++){const qn=_n[Fn];Fi(Ie,pt,qn,qn.viewport)}}else cn.length>0&&mi(tn,cn,pt,$t),bn&&er.render(pt),Fi(Ie,pt,$t);ze!==null&&He===0&&(kt.updateMultisampleRenderTarget(ze),kt.updateRenderTargetMipmap(ze)),pt.isScene===!0&&pt.onAfterRender(Fe,pt,$t),Er.resetDefaultState(),je=-1,Ge=null,Oe.pop(),Oe.length>0?(Be=Oe[Oe.length-1],Gt===!0&&zn.setGlobalState(Fe.clippingPlanes,Be.state.camera)):Be=null,Le.pop(),Le.length>0?Ie=Le[Le.length-1]:Ie=null};function hi(pt,$t,en,tn){if(pt.visible===!1)return;if(pt.layers.test($t.layers)){if(pt.isGroup)en=pt.renderOrder;else if(pt.isLOD)pt.autoUpdate===!0&&pt.update($t);else if(pt.isLight)Be.pushLight(pt),pt.castShadow&&Be.pushShadow(pt);else if(pt.isSprite){if(!pt.frustumCulled||Yt.intersectsSprite(pt)){tn&&Un.setFromMatrixPosition(pt.matrixWorld).applyMatrix4(En);const Fn=Xt.update(pt),Wn=pt.material;Wn.visible&&Ie.push(pt,Fn,Wn,en,Un.z,null)}}else if((pt.isMesh||pt.isLine||pt.isPoints)&&(!pt.frustumCulled||Yt.intersectsObject(pt))){const Fn=Xt.update(pt),Wn=pt.material;if(tn&&(pt.boundingSphere!==void 0?(pt.boundingSphere===null&&pt.computeBoundingSphere(),Un.copy(pt.boundingSphere.center)):(Fn.boundingSphere===null&&Fn.computeBoundingSphere(),Un.copy(Fn.boundingSphere.center)),Un.applyMatrix4(pt.matrixWorld).applyMatrix4(En)),Array.isArray(Wn)){const qn=Fn.groups;for(let dr=0,Ln=qn.length;dr<Ln;dr++){const fr=qn[dr],_r=Wn[fr.materialIndex];_r&&_r.visible&&Ie.push(pt,Fn,_r,en,Un.z,fr)}}else Wn.visible&&Ie.push(pt,Fn,Wn,en,Un.z,null)}}const _n=pt.children;for(let Fn=0,Wn=_n.length;Fn<Wn;Fn++)hi(_n[Fn],$t,en,tn)}function Fi(pt,$t,en,tn){const cn=pt.opaque,_n=pt.transmissive,Fn=pt.transparent;Be.setupLightsView(en),Gt===!0&&zn.setGlobalState(Fe.clippingPlanes,en),tn&&dn.viewport(Xe.copy(tn)),cn.length>0&&Ar(cn,$t,en),_n.length>0&&Ar(_n,$t,en),Fn.length>0&&Ar(Fn,$t,en),dn.buffers.depth.setTest(!0),dn.buffers.depth.setMask(!0),dn.buffers.color.setMask(!0),dn.setPolygonOffset(!1)}function mi(pt,$t,en,tn){if((en.isScene===!0?en.overrideMaterial:null)!==null)return;Be.state.transmissionRenderTarget[tn.id]===void 0&&(Be.state.transmissionRenderTarget[tn.id]=new WebGLRenderTarget(1,1,{generateMipmaps:!0,type:hn.has("EXT_color_buffer_half_float")||hn.has("EXT_color_buffer_float")?HalfFloatType:UnsignedByteType,minFilter:LinearMipmapLinearFilter,samples:4,stencilBuffer:ye,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ColorManagement.workingColorSpace}));const _n=Be.state.transmissionRenderTarget[tn.id],Fn=tn.viewport||Xe;_n.setSize(Fn.z*Fe.transmissionResolutionScale,Fn.w*Fe.transmissionResolutionScale);const Wn=Fe.getRenderTarget();Fe.setRenderTarget(_n),Fe.getClearColor(nt),Nt=Fe.getClearAlpha(),Nt<1&&Fe.setClearColor(16777215,.5),Fe.clear(),bn&&er.render(en);const qn=Fe.toneMapping;Fe.toneMapping=NoToneMapping;const dr=tn.viewport;if(tn.viewport!==void 0&&(tn.viewport=void 0),Be.setupLightsView(tn),Gt===!0&&zn.setGlobalState(Fe.clippingPlanes,tn),Ar(pt,en,tn),kt.updateMultisampleRenderTarget(_n),kt.updateRenderTargetMipmap(_n),hn.has("WEBGL_multisampled_render_to_texture")===!1){let Ln=!1;for(let fr=0,_r=$t.length;fr<_r;fr++){const yr=$t[fr],Hr=yr.object,Sr=yr.geometry,Cr=yr.material,vr=yr.group;if(Cr.side===DoubleSide&&Hr.layers.test(tn.layers)){const jr=Cr.side;Cr.side=BackSide,Cr.needsUpdate=!0,ki(Hr,en,tn,Sr,Cr,vr),Cr.side=jr,Cr.needsUpdate=!0,Ln=!0}}Ln===!0&&(kt.updateMultisampleRenderTarget(_n),kt.updateRenderTargetMipmap(_n))}Fe.setRenderTarget(Wn),Fe.setClearColor(nt,Nt),dr!==void 0&&(tn.viewport=dr),Fe.toneMapping=qn}function Ar(pt,$t,en){const tn=$t.isScene===!0?$t.overrideMaterial:null;for(let cn=0,_n=pt.length;cn<_n;cn++){const Fn=pt[cn],Wn=Fn.object,qn=Fn.geometry,dr=tn===null?Fn.material:tn,Ln=Fn.group;Wn.layers.test(en.layers)&&ki(Wn,$t,en,qn,dr,Ln)}}function ki(pt,$t,en,tn,cn,_n){pt.onBeforeRender(Fe,$t,en,tn,cn,_n),pt.modelViewMatrix.multiplyMatrices(en.matrixWorldInverse,pt.matrixWorld),pt.normalMatrix.getNormalMatrix(pt.modelViewMatrix),cn.onBeforeRender(Fe,$t,en,tn,pt,_n),cn.transparent===!0&&cn.side===DoubleSide&&cn.forceSinglePass===!1?(cn.side=BackSide,cn.needsUpdate=!0,Fe.renderBufferDirect(en,$t,tn,cn,pt,_n),cn.side=FrontSide,cn.needsUpdate=!0,Fe.renderBufferDirect(en,$t,tn,cn,pt,_n),cn.side=DoubleSide):Fe.renderBufferDirect(en,$t,tn,cn,pt,_n),pt.onAfterRender(Fe,$t,en,tn,cn,_n)}function qr(pt,$t,en){$t.isScene!==!0&&($t=kn);const tn=Bn.get(pt),cn=Be.state.lights,_n=Be.state.shadowsArray,Fn=cn.state.version,Wn=on.getParameters(pt,cn.state,_n,$t,en),qn=on.getProgramCacheKey(Wn);let dr=tn.programs;tn.environment=pt.isMeshStandardMaterial?$t.environment:null,tn.fog=$t.fog,tn.envMap=(pt.isMeshStandardMaterial?ln:Dt).get(pt.envMap||tn.environment),tn.envMapRotation=tn.environment!==null&&pt.envMap===null?$t.environmentRotation:pt.envMapRotation,dr===void 0&&(pt.addEventListener("dispose",tr),dr=new Map,tn.programs=dr);let Ln=dr.get(qn);if(Ln!==void 0){if(tn.currentProgram===Ln&&tn.lightsStateVersion===Fn)return Vt(pt,Wn),Ln}else Wn.uniforms=on.getUniforms(pt),pt.onBeforeCompile(Wn,Fe),Ln=on.acquireProgram(Wn,qn),dr.set(qn,Ln),tn.uniforms=Wn.uniforms;const fr=tn.uniforms;return(!pt.isShaderMaterial&&!pt.isRawShaderMaterial||pt.clipping===!0)&&(fr.clippingPlanes=zn.uniform),Vt(pt,Wn),tn.needsLights=Nn(pt),tn.lightsStateVersion=Fn,tn.needsLights&&(fr.ambientLightColor.value=cn.state.ambient,fr.lightProbe.value=cn.state.probe,fr.directionalLights.value=cn.state.directional,fr.directionalLightShadows.value=cn.state.directionalShadow,fr.spotLights.value=cn.state.spot,fr.spotLightShadows.value=cn.state.spotShadow,fr.rectAreaLights.value=cn.state.rectArea,fr.ltc_1.value=cn.state.rectAreaLTC1,fr.ltc_2.value=cn.state.rectAreaLTC2,fr.pointLights.value=cn.state.point,fr.pointLightShadows.value=cn.state.pointShadow,fr.hemisphereLights.value=cn.state.hemi,fr.directionalShadowMap.value=cn.state.directionalShadowMap,fr.directionalShadowMatrix.value=cn.state.directionalShadowMatrix,fr.spotShadowMap.value=cn.state.spotShadowMap,fr.spotLightMatrix.value=cn.state.spotLightMatrix,fr.spotLightMap.value=cn.state.spotLightMap,fr.pointShadowMap.value=cn.state.pointShadowMap,fr.pointShadowMatrix.value=cn.state.pointShadowMatrix),tn.currentProgram=Ln,tn.uniformsList=null,Ln}function Et(pt){if(pt.uniformsList===null){const $t=pt.currentProgram.getUniforms();pt.uniformsList=WebGLUniforms.seqWithValue($t.seq,pt.uniforms)}return pt.uniformsList}function Vt(pt,$t){const en=Bn.get(pt);en.outputColorSpace=$t.outputColorSpace,en.batching=$t.batching,en.batchingColor=$t.batchingColor,en.instancing=$t.instancing,en.instancingColor=$t.instancingColor,en.instancingMorph=$t.instancingMorph,en.skinning=$t.skinning,en.morphTargets=$t.morphTargets,en.morphNormals=$t.morphNormals,en.morphColors=$t.morphColors,en.morphTargetsCount=$t.morphTargetsCount,en.numClippingPlanes=$t.numClippingPlanes,en.numIntersection=$t.numClipIntersection,en.vertexAlphas=$t.vertexAlphas,en.vertexTangents=$t.vertexTangents,en.toneMapping=$t.toneMapping}function sn(pt,$t,en,tn,cn){$t.isScene!==!0&&($t=kn),kt.resetTextureUnits();const _n=$t.fog,Fn=tn.isMeshStandardMaterial?$t.environment:null,Wn=ze===null?Fe.outputColorSpace:ze.isXRRenderTarget===!0?ze.texture.colorSpace:LinearSRGBColorSpace,qn=(tn.isMeshStandardMaterial?ln:Dt).get(tn.envMap||Fn),dr=tn.vertexColors===!0&&!!en.attributes.color&&en.attributes.color.itemSize===4,Ln=!!en.attributes.tangent&&(!!tn.normalMap||tn.anisotropy>0),fr=!!en.morphAttributes.position,_r=!!en.morphAttributes.normal,yr=!!en.morphAttributes.color;let Hr=NoToneMapping;tn.toneMapped&&(ze===null||ze.isXRRenderTarget===!0)&&(Hr=Fe.toneMapping);const Sr=en.morphAttributes.position||en.morphAttributes.normal||en.morphAttributes.color,Cr=Sr!==void 0?Sr.length:0,vr=Bn.get(tn),jr=Be.state.lights;if(Gt===!0&&(an===!0||pt!==Ge)){const ei=pt===Ge&&tn.id===je;zn.setState(tn,pt,ei)}let Rr=!1;tn.version===vr.__version?(vr.needsLights&&vr.lightsStateVersion!==jr.state.version||vr.outputColorSpace!==Wn||cn.isBatchedMesh&&vr.batching===!1||!cn.isBatchedMesh&&vr.batching===!0||cn.isBatchedMesh&&vr.batchingColor===!0&&cn.colorTexture===null||cn.isBatchedMesh&&vr.batchingColor===!1&&cn.colorTexture!==null||cn.isInstancedMesh&&vr.instancing===!1||!cn.isInstancedMesh&&vr.instancing===!0||cn.isSkinnedMesh&&vr.skinning===!1||!cn.isSkinnedMesh&&vr.skinning===!0||cn.isInstancedMesh&&vr.instancingColor===!0&&cn.instanceColor===null||cn.isInstancedMesh&&vr.instancingColor===!1&&cn.instanceColor!==null||cn.isInstancedMesh&&vr.instancingMorph===!0&&cn.morphTexture===null||cn.isInstancedMesh&&vr.instancingMorph===!1&&cn.morphTexture!==null||vr.envMap!==qn||tn.fog===!0&&vr.fog!==_n||vr.numClippingPlanes!==void 0&&(vr.numClippingPlanes!==zn.numPlanes||vr.numIntersection!==zn.numIntersection)||vr.vertexAlphas!==dr||vr.vertexTangents!==Ln||vr.morphTargets!==fr||vr.morphNormals!==_r||vr.morphColors!==yr||vr.toneMapping!==Hr||vr.morphTargetsCount!==Cr)&&(Rr=!0):(Rr=!0,vr.__version=tn.version);let Dr=vr.currentProgram;Rr===!0&&(Dr=qr(tn,$t,cn));let Ur=!1,Tr=!1,Nr=!1;const Lr=Dr.getUniforms(),ri=vr.uniforms;if(dn.useProgram(Dr.program)&&(Ur=!0,Tr=!0,Nr=!0),tn.id!==je&&(je=tn.id,Tr=!0),Ur||Ge!==pt){dn.buffers.depth.getReversed()?(pn.copy(pt.projectionMatrix),toNormalizedProjectionMatrix(pn),toReversedProjectionMatrix(pn),Lr.setValue(zt,"projectionMatrix",pn)):Lr.setValue(zt,"projectionMatrix",pt.projectionMatrix),Lr.setValue(zt,"viewMatrix",pt.matrixWorldInverse);const vi=Lr.map.cameraPosition;vi!==void 0&&vi.setValue(zt,$n.setFromMatrixPosition(pt.matrixWorld)),mn.logarithmicDepthBuffer&&Lr.setValue(zt,"logDepthBufFC",2/(Math.log(pt.far+1)/Math.LN2)),(tn.isMeshPhongMaterial||tn.isMeshToonMaterial||tn.isMeshLambertMaterial||tn.isMeshBasicMaterial||tn.isMeshStandardMaterial||tn.isShaderMaterial)&&Lr.setValue(zt,"isOrthographic",pt.isOrthographicCamera===!0),Ge!==pt&&(Ge=pt,Tr=!0,Nr=!0)}if(cn.isSkinnedMesh){Lr.setOptional(zt,cn,"bindMatrix"),Lr.setOptional(zt,cn,"bindMatrixInverse");const ei=cn.skeleton;ei&&(ei.boneTexture===null&&ei.computeBoneTexture(),Lr.setValue(zt,"boneTexture",ei.boneTexture,kt))}cn.isBatchedMesh&&(Lr.setOptional(zt,cn,"batchingTexture"),Lr.setValue(zt,"batchingTexture",cn._matricesTexture,kt),Lr.setOptional(zt,cn,"batchingIdTexture"),Lr.setValue(zt,"batchingIdTexture",cn._indirectTexture,kt),Lr.setOptional(zt,cn,"batchingColorTexture"),cn._colorsTexture!==null&&Lr.setValue(zt,"batchingColorTexture",cn._colorsTexture,kt));const Xr=en.morphAttributes;if((Xr.position!==void 0||Xr.normal!==void 0||Xr.color!==void 0)&&Kn.update(cn,en,Dr),(Tr||vr.receiveShadow!==cn.receiveShadow)&&(vr.receiveShadow=cn.receiveShadow,Lr.setValue(zt,"receiveShadow",cn.receiveShadow)),tn.isMeshGouraudMaterial&&tn.envMap!==null&&(ri.envMap.value=qn,ri.flipEnvMap.value=qn.isCubeTexture&&qn.isRenderTargetTexture===!1?-1:1),tn.isMeshStandardMaterial&&tn.envMap===null&&$t.environment!==null&&(ri.envMapIntensity.value=$t.environmentIntensity),Tr&&(Lr.setValue(zt,"toneMappingExposure",Fe.toneMappingExposure),vr.needsLights&&Cn(ri,Nr),_n&&tn.fog===!0&&Rt.refreshFogUniforms(ri,_n),Rt.refreshMaterialUniforms(ri,tn,rt,at,Be.state.transmissionRenderTarget[pt.id]),WebGLUniforms.upload(zt,Et(vr),ri,kt)),tn.isShaderMaterial&&tn.uniformsNeedUpdate===!0&&(WebGLUniforms.upload(zt,Et(vr),ri,kt),tn.uniformsNeedUpdate=!1),tn.isSpriteMaterial&&Lr.setValue(zt,"center",cn.center),Lr.setValue(zt,"modelViewMatrix",cn.modelViewMatrix),Lr.setValue(zt,"normalMatrix",cn.normalMatrix),Lr.setValue(zt,"modelMatrix",cn.matrixWorld),tn.isShaderMaterial||tn.isRawShaderMaterial){const ei=tn.uniformsGroups;for(let vi=0,wi=ei.length;vi<wi;vi++){const Ui=ei[vi];un.update(Ui,Dr),un.bind(Ui,Dr)}}return Dr}function Cn(pt,$t){pt.ambientLightColor.needsUpdate=$t,pt.lightProbe.needsUpdate=$t,pt.directionalLights.needsUpdate=$t,pt.directionalLightShadows.needsUpdate=$t,pt.pointLights.needsUpdate=$t,pt.pointLightShadows.needsUpdate=$t,pt.spotLights.needsUpdate=$t,pt.spotLightShadows.needsUpdate=$t,pt.rectAreaLights.needsUpdate=$t,pt.hemisphereLights.needsUpdate=$t}function Nn(pt){return pt.isMeshLambertMaterial||pt.isMeshToonMaterial||pt.isMeshPhongMaterial||pt.isMeshStandardMaterial||pt.isShadowMaterial||pt.isShaderMaterial&&pt.lights===!0}this.getActiveCubeFace=function(){return Ne},this.getActiveMipmapLevel=function(){return He},this.getRenderTarget=function(){return ze},this.setRenderTargetTextures=function(pt,$t,en){Bn.get(pt.texture).__webglTexture=$t,Bn.get(pt.depthTexture).__webglTexture=en;const tn=Bn.get(pt);tn.__hasExternalTextures=!0,tn.__autoAllocateDepthBuffer=en===void 0,tn.__autoAllocateDepthBuffer||hn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),tn.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(pt,$t){const en=Bn.get(pt);en.__webglFramebuffer=$t,en.__useDefaultFramebuffer=$t===void 0};const Pn=zt.createFramebuffer();this.setRenderTarget=function(pt,$t=0,en=0){ze=pt,Ne=$t,He=en;let tn=!0,cn=null,_n=!1,Fn=!1;if(pt){const qn=Bn.get(pt);if(qn.__useDefaultFramebuffer!==void 0)dn.bindFramebuffer(zt.FRAMEBUFFER,null),tn=!1;else if(qn.__webglFramebuffer===void 0)kt.setupRenderTarget(pt);else if(qn.__hasExternalTextures)kt.rebindTextures(pt,Bn.get(pt.texture).__webglTexture,Bn.get(pt.depthTexture).__webglTexture);else if(pt.depthBuffer){const fr=pt.depthTexture;if(qn.__boundDepthTexture!==fr){if(fr!==null&&Bn.has(fr)&&(pt.width!==fr.image.width||pt.height!==fr.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");kt.setupDepthRenderbuffer(pt)}}const dr=pt.texture;(dr.isData3DTexture||dr.isDataArrayTexture||dr.isCompressedArrayTexture)&&(Fn=!0);const Ln=Bn.get(pt).__webglFramebuffer;pt.isWebGLCubeRenderTarget?(Array.isArray(Ln[$t])?cn=Ln[$t][en]:cn=Ln[$t],_n=!0):pt.samples>0&&kt.useMultisampledRTT(pt)===!1?cn=Bn.get(pt).__webglMultisampledFramebuffer:Array.isArray(Ln)?cn=Ln[en]:cn=Ln,Xe.copy(pt.viewport),qe.copy(pt.scissor),Qe=pt.scissorTest}else Xe.copy(Wt).multiplyScalar(rt).floor(),qe.copy(Kt).multiplyScalar(rt).floor(),Qe=Pt;if(en!==0&&(cn=Pn),dn.bindFramebuffer(zt.FRAMEBUFFER,cn)&&tn&&dn.drawBuffers(pt,cn),dn.viewport(Xe),dn.scissor(qe),dn.setScissorTest(Qe),_n){const qn=Bn.get(pt.texture);zt.framebufferTexture2D(zt.FRAMEBUFFER,zt.COLOR_ATTACHMENT0,zt.TEXTURE_CUBE_MAP_POSITIVE_X+$t,qn.__webglTexture,en)}else if(Fn){const qn=Bn.get(pt.texture),dr=$t;zt.framebufferTextureLayer(zt.FRAMEBUFFER,zt.COLOR_ATTACHMENT0,qn.__webglTexture,en,dr)}else if(pt!==null&&en!==0){const qn=Bn.get(pt.texture);zt.framebufferTexture2D(zt.FRAMEBUFFER,zt.COLOR_ATTACHMENT0,zt.TEXTURE_2D,qn.__webglTexture,en)}je=-1},this.readRenderTargetPixels=function(pt,$t,en,tn,cn,_n,Fn){if(!(pt&&pt.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Wn=Bn.get(pt).__webglFramebuffer;if(pt.isWebGLCubeRenderTarget&&Fn!==void 0&&(Wn=Wn[Fn]),Wn){dn.bindFramebuffer(zt.FRAMEBUFFER,Wn);try{const qn=pt.texture,dr=qn.format,Ln=qn.type;if(!mn.textureFormatReadable(dr)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!mn.textureTypeReadable(Ln)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}$t>=0&&$t<=pt.width-tn&&en>=0&&en<=pt.height-cn&&zt.readPixels($t,en,tn,cn,hr.convert(dr),hr.convert(Ln),_n)}finally{const qn=ze!==null?Bn.get(ze).__webglFramebuffer:null;dn.bindFramebuffer(zt.FRAMEBUFFER,qn)}}},this.readRenderTargetPixelsAsync=async function(pt,$t,en,tn,cn,_n,Fn){if(!(pt&&pt.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Wn=Bn.get(pt).__webglFramebuffer;if(pt.isWebGLCubeRenderTarget&&Fn!==void 0&&(Wn=Wn[Fn]),Wn){const qn=pt.texture,dr=qn.format,Ln=qn.type;if(!mn.textureFormatReadable(dr))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!mn.textureTypeReadable(Ln))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if($t>=0&&$t<=pt.width-tn&&en>=0&&en<=pt.height-cn){dn.bindFramebuffer(zt.FRAMEBUFFER,Wn);const fr=zt.createBuffer();zt.bindBuffer(zt.PIXEL_PACK_BUFFER,fr),zt.bufferData(zt.PIXEL_PACK_BUFFER,_n.byteLength,zt.STREAM_READ),zt.readPixels($t,en,tn,cn,hr.convert(dr),hr.convert(Ln),0);const _r=ze!==null?Bn.get(ze).__webglFramebuffer:null;dn.bindFramebuffer(zt.FRAMEBUFFER,_r);const yr=zt.fenceSync(zt.SYNC_GPU_COMMANDS_COMPLETE,0);return zt.flush(),await probeAsync(zt,yr,4),zt.bindBuffer(zt.PIXEL_PACK_BUFFER,fr),zt.getBufferSubData(zt.PIXEL_PACK_BUFFER,0,_n),zt.deleteBuffer(fr),zt.deleteSync(yr),_n}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(pt,$t=null,en=0){pt.isTexture!==!0&&(warnOnce("WebGLRenderer: copyFramebufferToTexture function signature has changed."),$t=arguments[0]||null,pt=arguments[1]);const tn=Math.pow(2,-en),cn=Math.floor(pt.image.width*tn),_n=Math.floor(pt.image.height*tn),Fn=$t!==null?$t.x:0,Wn=$t!==null?$t.y:0;kt.setTexture2D(pt,0),zt.copyTexSubImage2D(zt.TEXTURE_2D,en,0,0,Fn,Wn,cn,_n),dn.unbindTexture()};const Qn=zt.createFramebuffer(),Jn=zt.createFramebuffer();this.copyTextureToTexture=function(pt,$t,en=null,tn=null,cn=0,_n=null){pt.isTexture!==!0&&(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed."),tn=arguments[0]||null,pt=arguments[1],$t=arguments[2],_n=arguments[3]||0,en=null),_n===null&&(cn!==0?(warnOnce("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),_n=cn,cn=0):_n=0);let Fn,Wn,qn,dr,Ln,fr,_r,yr,Hr;const Sr=pt.isCompressedTexture?pt.mipmaps[_n]:pt.image;if(en!==null)Fn=en.max.x-en.min.x,Wn=en.max.y-en.min.y,qn=en.isBox3?en.max.z-en.min.z:1,dr=en.min.x,Ln=en.min.y,fr=en.isBox3?en.min.z:0;else{const Xr=Math.pow(2,-cn);Fn=Math.floor(Sr.width*Xr),Wn=Math.floor(Sr.height*Xr),pt.isDataArrayTexture?qn=Sr.depth:pt.isData3DTexture?qn=Math.floor(Sr.depth*Xr):qn=1,dr=0,Ln=0,fr=0}tn!==null?(_r=tn.x,yr=tn.y,Hr=tn.z):(_r=0,yr=0,Hr=0);const Cr=hr.convert($t.format),vr=hr.convert($t.type);let jr;$t.isData3DTexture?(kt.setTexture3D($t,0),jr=zt.TEXTURE_3D):$t.isDataArrayTexture||$t.isCompressedArrayTexture?(kt.setTexture2DArray($t,0),jr=zt.TEXTURE_2D_ARRAY):(kt.setTexture2D($t,0),jr=zt.TEXTURE_2D),zt.pixelStorei(zt.UNPACK_FLIP_Y_WEBGL,$t.flipY),zt.pixelStorei(zt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,$t.premultiplyAlpha),zt.pixelStorei(zt.UNPACK_ALIGNMENT,$t.unpackAlignment);const Rr=zt.getParameter(zt.UNPACK_ROW_LENGTH),Dr=zt.getParameter(zt.UNPACK_IMAGE_HEIGHT),Ur=zt.getParameter(zt.UNPACK_SKIP_PIXELS),Tr=zt.getParameter(zt.UNPACK_SKIP_ROWS),Nr=zt.getParameter(zt.UNPACK_SKIP_IMAGES);zt.pixelStorei(zt.UNPACK_ROW_LENGTH,Sr.width),zt.pixelStorei(zt.UNPACK_IMAGE_HEIGHT,Sr.height),zt.pixelStorei(zt.UNPACK_SKIP_PIXELS,dr),zt.pixelStorei(zt.UNPACK_SKIP_ROWS,Ln),zt.pixelStorei(zt.UNPACK_SKIP_IMAGES,fr);const Lr=pt.isDataArrayTexture||pt.isData3DTexture,ri=$t.isDataArrayTexture||$t.isData3DTexture;if(pt.isDepthTexture){const Xr=Bn.get(pt),ei=Bn.get($t),vi=Bn.get(Xr.__renderTarget),wi=Bn.get(ei.__renderTarget);dn.bindFramebuffer(zt.READ_FRAMEBUFFER,vi.__webglFramebuffer),dn.bindFramebuffer(zt.DRAW_FRAMEBUFFER,wi.__webglFramebuffer);for(let Ui=0;Ui<qn;Ui++)Lr&&(zt.framebufferTextureLayer(zt.READ_FRAMEBUFFER,zt.COLOR_ATTACHMENT0,Bn.get(pt).__webglTexture,cn,fr+Ui),zt.framebufferTextureLayer(zt.DRAW_FRAMEBUFFER,zt.COLOR_ATTACHMENT0,Bn.get($t).__webglTexture,_n,Hr+Ui)),zt.blitFramebuffer(dr,Ln,Fn,Wn,_r,yr,Fn,Wn,zt.DEPTH_BUFFER_BIT,zt.NEAREST);dn.bindFramebuffer(zt.READ_FRAMEBUFFER,null),dn.bindFramebuffer(zt.DRAW_FRAMEBUFFER,null)}else if(cn!==0||pt.isRenderTargetTexture||Bn.has(pt)){const Xr=Bn.get(pt),ei=Bn.get($t);dn.bindFramebuffer(zt.READ_FRAMEBUFFER,Qn),dn.bindFramebuffer(zt.DRAW_FRAMEBUFFER,Jn);for(let vi=0;vi<qn;vi++)Lr?zt.framebufferTextureLayer(zt.READ_FRAMEBUFFER,zt.COLOR_ATTACHMENT0,Xr.__webglTexture,cn,fr+vi):zt.framebufferTexture2D(zt.READ_FRAMEBUFFER,zt.COLOR_ATTACHMENT0,zt.TEXTURE_2D,Xr.__webglTexture,cn),ri?zt.framebufferTextureLayer(zt.DRAW_FRAMEBUFFER,zt.COLOR_ATTACHMENT0,ei.__webglTexture,_n,Hr+vi):zt.framebufferTexture2D(zt.DRAW_FRAMEBUFFER,zt.COLOR_ATTACHMENT0,zt.TEXTURE_2D,ei.__webglTexture,_n),cn!==0?zt.blitFramebuffer(dr,Ln,Fn,Wn,_r,yr,Fn,Wn,zt.COLOR_BUFFER_BIT,zt.NEAREST):ri?zt.copyTexSubImage3D(jr,_n,_r,yr,Hr+vi,dr,Ln,Fn,Wn):zt.copyTexSubImage2D(jr,_n,_r,yr,dr,Ln,Fn,Wn);dn.bindFramebuffer(zt.READ_FRAMEBUFFER,null),dn.bindFramebuffer(zt.DRAW_FRAMEBUFFER,null)}else ri?pt.isDataTexture||pt.isData3DTexture?zt.texSubImage3D(jr,_n,_r,yr,Hr,Fn,Wn,qn,Cr,vr,Sr.data):$t.isCompressedArrayTexture?zt.compressedTexSubImage3D(jr,_n,_r,yr,Hr,Fn,Wn,qn,Cr,Sr.data):zt.texSubImage3D(jr,_n,_r,yr,Hr,Fn,Wn,qn,Cr,vr,Sr):pt.isDataTexture?zt.texSubImage2D(zt.TEXTURE_2D,_n,_r,yr,Fn,Wn,Cr,vr,Sr.data):pt.isCompressedTexture?zt.compressedTexSubImage2D(zt.TEXTURE_2D,_n,_r,yr,Sr.width,Sr.height,Cr,Sr.data):zt.texSubImage2D(zt.TEXTURE_2D,_n,_r,yr,Fn,Wn,Cr,vr,Sr);zt.pixelStorei(zt.UNPACK_ROW_LENGTH,Rr),zt.pixelStorei(zt.UNPACK_IMAGE_HEIGHT,Dr),zt.pixelStorei(zt.UNPACK_SKIP_PIXELS,Ur),zt.pixelStorei(zt.UNPACK_SKIP_ROWS,Tr),zt.pixelStorei(zt.UNPACK_SKIP_IMAGES,Nr),_n===0&&$t.generateMipmaps&&zt.generateMipmap(jr),dn.unbindTexture()},this.copyTextureToTexture3D=function(pt,$t,en=null,tn=null,cn=0){return pt.isTexture!==!0&&(warnOnce("WebGLRenderer: copyTextureToTexture3D function signature has changed."),en=arguments[0]||null,tn=arguments[1]||null,pt=arguments[2],$t=arguments[3],cn=arguments[4]||0),warnOnce('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(pt,$t,en,tn,cn)},this.initRenderTarget=function(pt){Bn.get(pt).__webglFramebuffer===void 0&&kt.setupRenderTarget(pt)},this.initTexture=function(pt){pt.isCubeTexture?kt.setTextureCube(pt,0):pt.isData3DTexture?kt.setTexture3D(pt,0):pt.isDataArrayTexture||pt.isCompressedArrayTexture?kt.setTexture2DArray(pt,0):kt.setTexture2D(pt,0),dn.unbindTexture()},this.resetState=function(){Ne=0,He=0,ze=null,dn.reset(),Er.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return WebGLCoordinateSystem}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(K){this._outputColorSpace=K;const me=this.getContext();me.drawingBufferColorspace=ColorManagement._getDrawingBufferColorSpace(K),me.unpackColorSpace=ColorManagement._getUnpackColorSpace()}}const THREE$1=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping,AddEquation,AddOperation,AdditiveAnimationBlendMode,AdditiveBlending,AgXToneMapping,AlphaFormat,AlwaysCompare,AlwaysDepth,AlwaysStencilFunc,AmbientLight,AnimationAction,AnimationClip,AnimationLoader,AnimationMixer,AnimationObjectGroup,AnimationUtils,ArcCurve,ArrayCamera,ArrowHelper,AttachedBindMode,Audio,AudioAnalyser,AudioContext,AudioListener,AudioLoader,AxesHelper,BackSide,BasicDepthPacking,BasicShadowMap,BatchedMesh:BatchedMesh$1,Bone,BooleanKeyframeTrack,Box2,Box3,Box3Helper,BoxGeometry,BoxHelper,BufferAttribute,BufferGeometry,BufferGeometryLoader,ByteType,Cache,Camera,CameraHelper,CanvasTexture,CapsuleGeometry,CatmullRomCurve3,CineonToneMapping,CircleGeometry,ClampToEdgeWrapping,Clock,Color:Color$1,ColorKeyframeTrack,ColorManagement,CompressedArrayTexture,CompressedCubeTexture,CompressedTexture,CompressedTextureLoader,ConeGeometry,ConstantAlphaFactor,ConstantColorFactor,Controls,CubeCamera,CubeReflectionMapping,CubeRefractionMapping,CubeTexture,CubeTextureLoader,CubeUVReflectionMapping,CubicBezierCurve,CubicBezierCurve3,CubicInterpolant,CullFaceBack,CullFaceFront,CullFaceFrontBack,CullFaceNone,Curve,CurvePath,CustomBlending,CustomToneMapping,CylinderGeometry,Cylindrical,Data3DTexture,DataArrayTexture,DataTexture,DataTextureLoader,DataUtils,DecrementStencilOp,DecrementWrapStencilOp,DefaultLoadingManager,DepthFormat,DepthStencilFormat,DepthTexture,DetachedBindMode,DirectionalLight,DirectionalLightHelper,DiscreteInterpolant,DodecahedronGeometry,DoubleSide,DstAlphaFactor,DstColorFactor,DynamicCopyUsage,DynamicDrawUsage,DynamicReadUsage,EdgesGeometry,EllipseCurve,EqualCompare,EqualDepth,EqualStencilFunc,EquirectangularReflectionMapping,EquirectangularRefractionMapping,Euler,EventDispatcher:EventDispatcher$2,ExtrudeGeometry,FileLoader,Float16BufferAttribute,Float32BufferAttribute,FloatType,Fog,FogExp2,FramebufferTexture,FrontSide,Frustum,GLBufferAttribute,GLSL1,GLSL3,GreaterCompare,GreaterDepth,GreaterEqualCompare,GreaterEqualDepth,GreaterEqualStencilFunc,GreaterStencilFunc,GridHelper,Group,HalfFloatType,HemisphereLight,HemisphereLightHelper,IcosahedronGeometry,ImageBitmapLoader,ImageLoader,ImageUtils,IncrementStencilOp,IncrementWrapStencilOp,InstancedBufferAttribute,InstancedBufferGeometry,InstancedInterleavedBuffer,InstancedMesh,Int16BufferAttribute,Int32BufferAttribute,Int8BufferAttribute,IntType,InterleavedBuffer,InterleavedBufferAttribute,Interpolant,InterpolateDiscrete,InterpolateLinear,InterpolateSmooth,InvertStencilOp,KeepStencilOp,KeyframeTrack,LOD,LatheGeometry,Layers,LessCompare,LessDepth,LessEqualCompare,LessEqualDepth,LessEqualStencilFunc,LessStencilFunc,Light,LightProbe,Line:Line$2,Line3,LineBasicMaterial,LineCurve,LineCurve3,LineDashedMaterial,LineLoop,LineSegments,LinearFilter,LinearInterpolant,LinearMipMapLinearFilter,LinearMipMapNearestFilter,LinearMipmapLinearFilter,LinearMipmapNearestFilter,LinearSRGBColorSpace,LinearToneMapping,LinearTransfer,Loader,LoaderUtils,LoadingManager,LoopOnce,LoopPingPong,LoopRepeat,LuminanceAlphaFormat,LuminanceFormat,MOUSE,Material,MaterialLoader,MathUtils,Matrix2,Matrix3,Matrix4,MaxEquation,Mesh,MeshBasicMaterial,MeshDepthMaterial,MeshDistanceMaterial,MeshLambertMaterial,MeshMatcapMaterial,MeshNormalMaterial,MeshPhongMaterial,MeshPhysicalMaterial,MeshStandardMaterial,MeshToonMaterial,MinEquation,MirroredRepeatWrapping,MixOperation,MultiplyBlending,MultiplyOperation,NearestFilter,NearestMipMapLinearFilter,NearestMipMapNearestFilter,NearestMipmapLinearFilter,NearestMipmapNearestFilter,NeutralToneMapping,NeverCompare,NeverDepth,NeverStencilFunc,NoBlending,NoColorSpace,NoToneMapping,NormalAnimationBlendMode,NormalBlending,NotEqualCompare,NotEqualDepth,NotEqualStencilFunc,NumberKeyframeTrack,Object3D,ObjectLoader,ObjectSpaceNormalMap,OctahedronGeometry,OneFactor,OneMinusConstantAlphaFactor,OneMinusConstantColorFactor,OneMinusDstAlphaFactor,OneMinusDstColorFactor,OneMinusSrcAlphaFactor,OneMinusSrcColorFactor,OrthographicCamera,PCFShadowMap,PCFSoftShadowMap,PMREMGenerator,Path,PerspectiveCamera,Plane,PlaneGeometry,PlaneHelper,PointLight,PointLightHelper,Points,PointsMaterial,PolarGridHelper,PolyhedronGeometry,PositionalAudio,PropertyBinding,PropertyMixer,QuadraticBezierCurve,QuadraticBezierCurve3,Quaternion,QuaternionKeyframeTrack,QuaternionLinearInterpolant,RED_GREEN_RGTC2_Format,RED_RGTC1_Format,REVISION,RGBADepthPacking,RGBAFormat,RGBAIntegerFormat,RGBA_ASTC_10x10_Format,RGBA_ASTC_10x5_Format,RGBA_ASTC_10x6_Format,RGBA_ASTC_10x8_Format,RGBA_ASTC_12x10_Format,RGBA_ASTC_12x12_Format,RGBA_ASTC_4x4_Format,RGBA_ASTC_5x4_Format,RGBA_ASTC_5x5_Format,RGBA_ASTC_6x5_Format,RGBA_ASTC_6x6_Format,RGBA_ASTC_8x5_Format,RGBA_ASTC_8x6_Format,RGBA_ASTC_8x8_Format,RGBA_BPTC_Format,RGBA_ETC2_EAC_Format,RGBA_PVRTC_2BPPV1_Format,RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format,RGBA_S3TC_DXT3_Format,RGBA_S3TC_DXT5_Format,RGBDepthPacking,RGBFormat,RGBIntegerFormat,RGB_BPTC_SIGNED_Format,RGB_BPTC_UNSIGNED_Format,RGB_ETC1_Format,RGB_ETC2_Format,RGB_PVRTC_2BPPV1_Format,RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format,RGDepthPacking,RGFormat,RGIntegerFormat,RawShaderMaterial,Ray,Raycaster,RectAreaLight,RedFormat,RedIntegerFormat,ReinhardToneMapping,RenderTarget,RenderTarget3D,RenderTargetArray,RepeatWrapping,ReplaceStencilOp,ReverseSubtractEquation,RingGeometry,SIGNED_RED_GREEN_RGTC2_Format,SIGNED_RED_RGTC1_Format,SRGBColorSpace,SRGBTransfer,Scene,ShaderChunk,ShaderLib,ShaderMaterial,ShadowMaterial,Shape,ShapeGeometry,ShapePath,ShapeUtils,ShortType,Skeleton,SkeletonHelper,SkinnedMesh:SkinnedMesh$1,Source,Sphere,SphereGeometry,Spherical,SphericalHarmonics3,SplineCurve,SpotLight,SpotLightHelper,Sprite,SpriteMaterial,SrcAlphaFactor,SrcAlphaSaturateFactor,SrcColorFactor,StaticCopyUsage,StaticDrawUsage,StaticReadUsage,StereoCamera,StreamCopyUsage,StreamDrawUsage,StreamReadUsage,StringKeyframeTrack,SubtractEquation,SubtractiveBlending,TOUCH,TangentSpaceNormalMap,TetrahedronGeometry,Texture,TextureLoader,TextureUtils,TimestampQuery,TorusGeometry,TorusKnotGeometry,Triangle,TriangleFanDrawMode,TriangleStripDrawMode,TrianglesDrawMode,TubeGeometry,UVMapping,Uint16BufferAttribute,Uint32BufferAttribute,Uint8BufferAttribute,Uint8ClampedBufferAttribute,Uniform,UniformsGroup,UniformsLib,UniformsUtils,UnsignedByteType,UnsignedInt248Type,UnsignedInt5999Type,UnsignedIntType,UnsignedShort4444Type,UnsignedShort5551Type,UnsignedShortType,VSMShadowMap,Vector2,Vector3,Vector4,VectorKeyframeTrack,VideoFrameTexture,VideoTexture,WebGL3DRenderTarget,WebGLArrayRenderTarget,WebGLCoordinateSystem,WebGLCubeRenderTarget,WebGLRenderTarget,WebGLRenderer,WebGLUtils,WebGPUCoordinateSystem,WebXRController,WireframeGeometry,WrapAroundEnding,ZeroCurvatureEnding,ZeroFactor,ZeroSlopeEnding,ZeroStencilOp,createCanvasElement},Symbol.toStringTag,{value:"Module"}));var constants={exports:{}},reactReconcilerConstants_production={};/**
 * @license React
 * react-reconciler-constants.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */reactReconcilerConstants_production.ConcurrentRoot=1;reactReconcilerConstants_production.ContinuousEventPriority=8;reactReconcilerConstants_production.DefaultEventPriority=32;reactReconcilerConstants_production.DiscreteEventPriority=2;reactReconcilerConstants_production.IdleEventPriority=268435456;reactReconcilerConstants_production.LegacyRoot=0;reactReconcilerConstants_production.NoEventPriority=0;constants.exports=reactReconcilerConstants_production;var constantsExports=constants.exports,withSelector={exports:{}},withSelector_production={},shim$2={exports:{}},useSyncExternalStoreShim_production={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React$1=reactExports;function is$3(fe,K){return fe===K&&(fe!==0||1/fe===1/K)||fe!==fe&&K!==K}var objectIs$1=typeof Object.is=="function"?Object.is:is$3,useState=React$1.useState,useEffect$1=React$1.useEffect,useLayoutEffect=React$1.useLayoutEffect,useDebugValue$2=React$1.useDebugValue;function useSyncExternalStore$2(fe,K){var me=K(),ge=useState({inst:{value:me,getSnapshot:K}}),xe=ge[0].inst,ye=ge[1];return useLayoutEffect(function(){xe.value=me,xe.getSnapshot=K,checkIfSnapshotChanged(xe)&&ye({inst:xe})},[fe,me,K]),useEffect$1(function(){return checkIfSnapshotChanged(xe)&&ye({inst:xe}),fe(function(){checkIfSnapshotChanged(xe)&&ye({inst:xe})})},[fe]),useDebugValue$2(me),me}function checkIfSnapshotChanged(fe){var K=fe.getSnapshot;fe=fe.value;try{var me=K();return!objectIs$1(fe,me)}catch{return!0}}function useSyncExternalStore$1(fe,K){return K()}var shim$1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?useSyncExternalStore$1:useSyncExternalStore$2;useSyncExternalStoreShim_production.useSyncExternalStore=React$1.useSyncExternalStore!==void 0?React$1.useSyncExternalStore:shim$1;shim$2.exports=useSyncExternalStoreShim_production;var shimExports=shim$2.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var React=reactExports,shim=shimExports;function is$2(fe,K){return fe===K&&(fe!==0||1/fe===1/K)||fe!==fe&&K!==K}var objectIs=typeof Object.is=="function"?Object.is:is$2,useSyncExternalStore=shim.useSyncExternalStore,useRef=React.useRef,useEffect=React.useEffect,useMemo=React.useMemo,useDebugValue$1=React.useDebugValue;withSelector_production.useSyncExternalStoreWithSelector=function(fe,K,me,ge,xe){var ye=useRef(null);if(ye.current===null){var ve={hasValue:!1,value:null};ye.current=ve}else ve=ye.current;ye=useMemo(function(){function Ee(Te){if(!be){if(be=!0,Ae=Te,Te=ge(Te),xe!==void 0&&ve.hasValue){var Re=ve.value;if(xe(Re,Te))return Se=Re}return Se=Te}if(Re=Se,objectIs(Ae,Te))return Re;var De=ge(Te);return xe!==void 0&&xe(Re,De)?(Ae=Te,Re):(Ae=Te,Se=De)}var be=!1,Ae,Se,Ce=me===void 0?null:me;return[function(){return Ee(K())},Ce===null?void 0:function(){return Ee(Ce())}]},[K,me,ge,xe]);var _e=useSyncExternalStore(fe,ye[0],ye[1]);return useEffect(function(){ve.hasValue=!0,ve.value=_e},[_e]),useDebugValue$1(_e),_e};withSelector.exports=withSelector_production;var withSelectorExports=withSelector.exports;const useSyncExternalStoreExports=getDefaultExportFromCjs(withSelectorExports),createStoreImpl$1=fe=>{let K;const me=new Set,ge=(be,Ae)=>{const Se=typeof be=="function"?be(K):be;if(!Object.is(Se,K)){const Ce=K;K=Ae??(typeof Se!="object"||Se===null)?Se:Object.assign({},K,Se),me.forEach(Te=>Te(K,Ce))}},xe=()=>K,_e={setState:ge,getState:xe,getInitialState:()=>Ee,subscribe:be=>(me.add(be),()=>me.delete(be))},Ee=K=fe(ge,xe,_e);return _e},createStore$2=fe=>fe?createStoreImpl$1(fe):createStoreImpl$1,{useSyncExternalStoreWithSelector:useSyncExternalStoreWithSelector$1}=useSyncExternalStoreExports,identity$1=fe=>fe;function useStoreWithEqualityFn(fe,K=identity$1,me){const ge=useSyncExternalStoreWithSelector$1(fe.subscribe,fe.getState,fe.getInitialState,K,me);return React$4.useDebugValue(ge),ge}const createWithEqualityFnImpl=(fe,K)=>{const me=createStore$2(fe),ge=(xe,ye=K)=>useStoreWithEqualityFn(me,xe,ye);return Object.assign(ge,me),ge},createWithEqualityFn=(fe,K)=>fe?createWithEqualityFnImpl(fe,K):createWithEqualityFnImpl;var reactReconciler={exports:{}},reactReconciler_production={exports:{}};/**
 * @license React
 * react-reconciler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(fe){fe.exports=function(K){function me(Me,we,ke,Ve){return new af(Me,we,ke,Ve)}function ge(){}function xe(Me){var we="https://react.dev/errors/"+Me;if(1<arguments.length){we+="?args[]="+encodeURIComponent(arguments[1]);for(var ke=2;ke<arguments.length;ke++)we+="&args[]="+encodeURIComponent(arguments[ke])}return"Minified React error #"+Me+"; visit "+we+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ye(Me){return Me===null||typeof Me!="object"?null:(Me=fu&&Me[fu]||Me["@@iterator"],typeof Me=="function"?Me:null)}function ve(Me){if(Me==null)return null;if(typeof Me=="function")return Me.$$typeof===df?null:Me.displayName||Me.name||null;if(typeof Me=="string")return Me;switch(Me){case za:return"Fragment";case Va:return"Portal";case Vl:return"Profiler";case lu:return"StrictMode";case Gl:return"Suspense";case $l:return"SuspenseList"}if(typeof Me=="object")switch(Me.$$typeof){case qs:return(Me.displayName||"Context")+".Provider";case cu:return(Me._context.displayName||"Context")+".Consumer";case zl:var we=Me.render;return Me=Me.displayName,Me||(Me=we.displayName||we.name||"",Me=Me!==""?"ForwardRef("+Me+")":"ForwardRef"),Me;case jl:return we=Me.displayName||null,we!==null?we:ve(Me.type)||"Memo";case Ys:we=Me._payload,Me=Me._init;try{return ve(Me(we))}catch{}}return null}function _e(Me){if(Wl===void 0)try{throw Error()}catch(ke){var we=ke.stack.trim().match(/\n( *(at )?)/);Wl=we&&we[1]||"",du=-1<ke.stack.indexOf(`
    at`)?" (<anonymous>)":-1<ke.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Wl+Me+du}function Ee(Me,we){if(!Me||Xl)return"";Xl=!0;var ke=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var Ve={DetermineComponentFrameRoot:function(){try{if(we){var pr=function(){throw Error()};if(Object.defineProperty(pr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(pr,[])}catch(Fr){var xr=Fr}Reflect.construct(Me,[],pr)}else{try{pr.call()}catch(Fr){xr=Fr}Me.call(pr.prototype)}}else{try{throw Error()}catch(Fr){xr=Fr}(pr=Me())&&typeof pr.catch=="function"&&pr.catch(function(){})}}catch(Fr){if(Fr&&xr&&typeof Fr.stack=="string")return[Fr.stack,xr.stack]}return[null,null]}};Ve.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var We=Object.getOwnPropertyDescriptor(Ve.DetermineComponentFrameRoot,"name");We&&We.configurable&&Object.defineProperty(Ve.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var Ke=Ve.DetermineComponentFrameRoot(),Ht=Ke[0],rn=Ke[1];if(Ht&&rn){var vn=Ht.split(`
`),jn=rn.split(`
`);for(We=Ve=0;Ve<vn.length&&!vn[Ve].includes("DetermineComponentFrameRoot");)Ve++;for(;We<jn.length&&!jn[We].includes("DetermineComponentFrameRoot");)We++;if(Ve===vn.length||We===jn.length)for(Ve=vn.length-1,We=jn.length-1;1<=Ve&&0<=We&&vn[Ve]!==jn[We];)We--;for(;1<=Ve&&0<=We;Ve--,We--)if(vn[Ve]!==jn[We]){if(Ve!==1||We!==1)do if(Ve--,We--,0>We||vn[Ve]!==jn[We]){var or=`
`+vn[Ve].replace(" at new "," at ");return Me.displayName&&or.includes("<anonymous>")&&(or=or.replace("<anonymous>",Me.displayName)),or}while(1<=Ve&&0<=We);break}}}finally{Xl=!1,Error.prepareStackTrace=ke}return(ke=Me?Me.displayName||Me.name:"")?_e(ke):""}function be(Me){switch(Me.tag){case 26:case 27:case 5:return _e(Me.type);case 16:return _e("Lazy");case 13:return _e("Suspense");case 19:return _e("SuspenseList");case 0:case 15:return Me=Ee(Me.type,!1),Me;case 11:return Me=Ee(Me.type.render,!1),Me;case 1:return Me=Ee(Me.type,!0),Me;default:return""}}function Ae(Me){try{var we="";do we+=be(Me),Me=Me.return;while(Me);return we}catch(ke){return`
Error generating stack: `+ke.message+`
`+ke.stack}}function Se(Me){var we=Me,ke=Me;if(Me.alternate)for(;we.return;)we=we.return;else{Me=we;do we=Me,we.flags&4098&&(ke=we.return),Me=we.return;while(Me)}return we.tag===3?ke:null}function Ce(Me){if(Se(Me)!==Me)throw Error(xe(188))}function Te(Me){var we=Me.alternate;if(!we){if(we=Se(Me),we===null)throw Error(xe(188));return we!==Me?null:Me}for(var ke=Me,Ve=we;;){var We=ke.return;if(We===null)break;var Ke=We.alternate;if(Ke===null){if(Ve=We.return,Ve!==null){ke=Ve;continue}break}if(We.child===Ke.child){for(Ke=We.child;Ke;){if(Ke===ke)return Ce(We),Me;if(Ke===Ve)return Ce(We),we;Ke=Ke.sibling}throw Error(xe(188))}if(ke.return!==Ve.return)ke=We,Ve=Ke;else{for(var Ht=!1,rn=We.child;rn;){if(rn===ke){Ht=!0,ke=We,Ve=Ke;break}if(rn===Ve){Ht=!0,Ve=We,ke=Ke;break}rn=rn.sibling}if(!Ht){for(rn=Ke.child;rn;){if(rn===ke){Ht=!0,ke=Ke,Ve=We;break}if(rn===Ve){Ht=!0,Ve=Ke,ke=We;break}rn=rn.sibling}if(!Ht)throw Error(xe(189))}}if(ke.alternate!==Ve)throw Error(xe(190))}if(ke.tag!==3)throw Error(xe(188));return ke.stateNode.current===ke?Me:we}function Re(Me){var we=Me.tag;if(we===5||we===26||we===27||we===6)return Me;for(Me=Me.child;Me!==null;){if(we=Re(Me),we!==null)return we;Me=Me.sibling}return null}function De(Me){var we=Me.tag;if(we===5||we===26||we===27||we===6)return Me;for(Me=Me.child;Me!==null;){if(Me.tag!==4&&(we=De(Me),we!==null))return we;Me=Me.sibling}return null}function Ie(Me){return{current:Me}}function Be(Me){0>$a||(Me.current=Ql[$a],Ql[$a]=null,$a--)}function Le(Me,we){$a++,Ql[$a]=Me.current,Me.current=we}function Oe(Me){return Me>>>=0,Me===0?32:31-(Bd(Me)/Dd|0)|0}function Fe(Me){var we=Me&42;if(we!==0)return we;switch(Me&-Me){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return Me&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return Me&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return Me}}function Ue(Me,we){var ke=Me.pendingLanes;if(ke===0)return 0;var Ve=0,We=Me.suspendedLanes,Ke=Me.pingedLanes,Ht=Me.warmLanes;Me=Me.finishedLanes!==0;var rn=ke&134217727;return rn!==0?(ke=rn&~We,ke!==0?Ve=Fe(ke):(Ke&=rn,Ke!==0?Ve=Fe(Ke):Me||(Ht=rn&~Ht,Ht!==0&&(Ve=Fe(Ht))))):(rn=ke&~We,rn!==0?Ve=Fe(rn):Ke!==0?Ve=Fe(Ke):Me||(Ht=ke&~Ht,Ht!==0&&(Ve=Fe(Ht)))),Ve===0?0:we!==0&&we!==Ve&&!(we&We)&&(We=Ve&-Ve,Ht=we&-we,We>=Ht||We===32&&(Ht&4194176)!==0)?we:Ve}function Ne(Me,we){return(Me.pendingLanes&~(Me.suspendedLanes&~Me.pingedLanes)&we)===0}function He(Me,we){switch(Me){case 1:case 2:case 4:case 8:return we+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return we+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ze(){var Me=Qo;return Qo<<=1,!(Qo&4194176)&&(Qo=128),Me}function je(){var Me=el;return el<<=1,!(el&62914560)&&(el=4194304),Me}function Ge(Me){for(var we=[],ke=0;31>ke;ke++)we.push(Me);return we}function Xe(Me,we){Me.pendingLanes|=we,we!==268435456&&(Me.suspendedLanes=0,Me.pingedLanes=0,Me.warmLanes=0)}function qe(Me,we,ke,Ve,We,Ke){var Ht=Me.pendingLanes;Me.pendingLanes=ke,Me.suspendedLanes=0,Me.pingedLanes=0,Me.warmLanes=0,Me.expiredLanes&=ke,Me.entangledLanes&=ke,Me.errorRecoveryDisabledLanes&=ke,Me.shellSuspendCounter=0;var rn=Me.entanglements,vn=Me.expirationTimes,jn=Me.hiddenUpdates;for(ke=Ht&~ke;0<ke;){var or=31-Ji(ke),pr=1<<or;rn[or]=0,vn[or]=-1;var xr=jn[or];if(xr!==null)for(jn[or]=null,or=0;or<xr.length;or++){var Fr=xr[or];Fr!==null&&(Fr.lane&=-536870913)}ke&=~pr}Ve!==0&&Qe(Me,Ve,0),Ke!==0&&We===0&&Me.tag!==0&&(Me.suspendedLanes|=Ke&~(Ht&~we))}function Qe(Me,we,ke){Me.pendingLanes|=we,Me.suspendedLanes&=~we;var Ve=31-Ji(we);Me.entangledLanes|=we,Me.entanglements[Ve]=Me.entanglements[Ve]|1073741824|ke&4194218}function nt(Me,we){var ke=Me.entangledLanes|=we;for(Me=Me.entanglements;ke;){var Ve=31-Ji(ke),We=1<<Ve;We&we|Me[Ve]&we&&(Me[Ve]|=we),ke&=~We}}function Nt(Me){return Me&=-Me,2<Me?8<Me?Me&134217727?32:268435456:8:2}function Ye(Me){if(Zi&&typeof Zi.onCommitFiberRoot=="function")try{Zi.onCommitFiberRoot(So,Me,void 0,(Me.current.flags&128)===128)}catch{}}function at(Me){if(typeof Nd=="function"&&Fd(Me),Zi&&typeof Zi.setStrictMode=="function")try{Zi.setStrictMode(So,Me)}catch{}}function rt(Me,we){return Me===we&&(Me!==0||1/Me===1/we)||Me!==Me&&we!==we}function Ft(Me,we){if(typeof Me=="object"&&Me!==null){var ke=ku.get(Me);return ke!==void 0?ke:(we={value:Me,source:we,stack:Ae(we)},ku.set(Me,we),we)}return{value:Me,source:we,stack:Ae(we)}}function Je(Me,we){Wa[Xa++]=rl,Wa[Xa++]=nl,nl=Me,rl=we}function Wt(Me,we,ke){os[ls++]=Ls,os[ls++]=Os,os[ls++]=va,va=Me;var Ve=Ls;Me=Os;var We=32-Ji(Ve)-1;Ve&=~(1<<We),ke+=1;var Ke=32-Ji(we)+We;if(30<Ke){var Ht=We-We%5;Ke=(Ve&(1<<Ht)-1).toString(32),Ve>>=Ht,We-=Ht,Ls=1<<32-Ji(we)+We|ke<<We|Ve,Os=Ke+Me}else Ls=1<<Ke|ke<<We|Ve,Os=Me}function Kt(Me){Me.return!==null&&(Je(Me,1),Wt(Me,1,0))}function Pt(Me){for(;Me===nl;)nl=Wa[--Xa],Wa[Xa]=null,rl=Wa[--Xa],Wa[Xa]=null;for(;Me===va;)va=os[--ls],os[ls]=null,Os=os[--ls],os[ls]=null,Ls=os[--ls],os[ls]=null}function Yt(Me,we){Le(Zs,we),Le(Co,Me),Le(Pi,null),Me=mf(we),Be(Pi),Le(Pi,Me)}function Gt(){Be(Pi),Be(Co),Be(Zs)}function an(Me){Me.memoizedState!==null&&Le(il,Me);var we=Pi.current,ke=gf(we,Me.type);we!==ke&&(Le(Co,Me),Le(Pi,ke))}function pn(Me){Co.current===Me&&(Be(Pi),Be(Co)),il.current===Me&&(Be(il),Ps?ya._currentValue=Ga:ya._currentValue2=Ga)}function En(Me){var we=Error(xe(418,""));throw Mn(Ft(we,Me)),rc}function $n(Me,we){if(!ss)throw Error(xe(175));ud(Me.stateNode,Me.type,Me.memoizedProps,we,Me)||En(Me)}function Un(Me){for(zi=Me.return;zi;)switch(zi.tag){case 3:case 27:Ss=!0;return;case 5:case 13:Ss=!1;return;default:zi=zi.return}}function kn(Me){if(!ss||Me!==zi)return!1;if(!Yr)return Un(Me),Yr=!0,!1;var we=!1;if(Oi?Me.tag!==3&&Me.tag!==27&&(Me.tag!==5||Mu(Me.type)&&!Zo(Me.type,Me.memoizedProps))&&(we=!0):Me.tag!==3&&(Me.tag!==5||Mu(Me.type)&&!Zo(Me.type,Me.memoizedProps))&&(we=!0),we&&Ni&&En(Me),Un(Me),Me.tag===13){if(!ss)throw Error(xe(316));if(Me=Me.memoizedState,Me=Me!==null?Me.dehydrated:null,!Me)throw Error(xe(317));Ni=pd(Me)}else Ni=zi?Cu(Me.stateNode):null;return!0}function bn(){ss&&(Ni=zi=null,Yr=!1)}function Mn(Me){_s===null?_s=[Me]:_s.push(Me)}function zt(){for(var Me=Ka,we=ic=Ka=0;we<Me;){var ke=cs[we];cs[we++]=null;var Ve=cs[we];cs[we++]=null;var We=cs[we];cs[we++]=null;var Ke=cs[we];if(cs[we++]=null,Ve!==null&&We!==null){var Ht=Ve.pending;Ht===null?We.next=We:(We.next=Ht.next,Ht.next=We),Ve.pending=We}Ke!==0&&dn(ke,We,Ke)}}function Dn(Me,we,ke,Ve){cs[Ka++]=Me,cs[Ka++]=we,cs[Ka++]=ke,cs[Ka++]=Ve,ic|=Ve,Me.lanes|=Ve,Me=Me.alternate,Me!==null&&(Me.lanes|=Ve)}function hn(Me,we,ke,Ve){return Dn(Me,we,ke,Ve),Hn(Me)}function mn(Me,we){return Dn(Me,null,null,we),Hn(Me)}function dn(Me,we,ke){Me.lanes|=ke;var Ve=Me.alternate;Ve!==null&&(Ve.lanes|=ke);for(var We=!1,Ke=Me.return;Ke!==null;)Ke.childLanes|=ke,Ve=Ke.alternate,Ve!==null&&(Ve.childLanes|=ke),Ke.tag===22&&(Me=Ke.stateNode,Me===null||Me._visibility&1||(We=!0)),Me=Ke,Ke=Ke.return;We&&we!==null&&Me.tag===3&&(Ke=Me.stateNode,We=31-Ji(ke),Ke=Ke.hiddenUpdates,Me=Ke[We],Me===null?Ke[We]=[we]:Me.push(we),we.lane=ke|536870912)}function Hn(Me){if(50<Lo)throw Lo=0,_c=null,Error(xe(185));for(var we=Me.return;we!==null;)Me=we,we=Me.return;return Me.tag===3?Me.stateNode:null}function Bn(Me){Me!==qa&&Me.next===null&&(qa===null?sl=qa=Me:qa=qa.next=Me),al=!0,sc||(sc=!0,Xt(Dt))}function kt(Me,we){if(!ac&&al){ac=!0;do for(var ke=!1,Ve=sl;Ve!==null;){if(Me!==0){var We=Ve.pendingLanes;if(We===0)var Ke=0;else{var Ht=Ve.suspendedLanes,rn=Ve.pingedLanes;Ke=(1<<31-Ji(42|Me)+1)-1,Ke&=We&~(Ht&~rn),Ke=Ke&201326677?Ke&201326677|1:Ke?Ke|2:0}Ke!==0&&(ke=!0,gn(Ve,Ke))}else Ke=Kr,Ke=Ue(Ve,Ve===oi?Ke:0),!(Ke&3)||Ne(Ve,Ke)||(ke=!0,gn(Ve,Ke));Ve=Ve.next}while(ke);ac=!1}}function Dt(){al=sc=!1;var Me=0;Ya!==0&&(Sf()&&(Me=Ya),Ya=0);for(var we=vs(),ke=null,Ve=sl;Ve!==null;){var We=Ve.next,Ke=ln(Ve,we);Ke===0?(Ve.next=null,ke===null?sl=We:ke.next=We,We===null&&(qa=ke)):(ke=Ve,(Me!==0||Ke&3)&&(al=!0)),Ve=We}kt(Me)}function ln(Me,we){for(var ke=Me.suspendedLanes,Ve=Me.pingedLanes,We=Me.expirationTimes,Ke=Me.pendingLanes&-62914561;0<Ke;){var Ht=31-Ji(Ke),rn=1<<Ht,vn=We[Ht];vn===-1?(!(rn&ke)||rn&Ve)&&(We[Ht]=He(rn,we)):vn<=we&&(Me.expiredLanes|=rn),Ke&=~rn}if(we=oi,ke=Kr,ke=Ue(Me,Me===we?ke:0),Ve=Me.callbackNode,ke===0||Me===we&&li===2||Me.cancelPendingCommit!==null)return Ve!==null&&Ve!==null&&tc(Ve),Me.callbackNode=null,Me.callbackPriority=0;if(!(ke&3)||Ne(Me,ke)){if(we=ke&-ke,we===Me.callbackPriority)return we;switch(Ve!==null&&tc(Ve),Nt(ke)){case 2:case 8:ke=Ld;break;case 32:ke=nc;break;case 268435456:ke=Od;break;default:ke=nc}return Ve=nn.bind(null,Me),ke=tl(ke,Ve),Me.callbackPriority=we,Me.callbackNode=ke,we}return Ve!==null&&Ve!==null&&tc(Ve),Me.callbackPriority=2,Me.callbackNode=null,2}function nn(Me,we){var ke=Me.callbackNode;if(ma()&&Me.callbackNode!==ke)return null;var Ve=Kr;return Ve=Ue(Me,Me===oi?Ve:0),Ve===0?null:(Vc(Me,Ve,we),ln(Me,vs()),Me.callbackNode!=null&&Me.callbackNode===ke?nn.bind(null,Me):null)}function gn(Me,we){if(ma())return null;Vc(Me,we,!0)}function Xt(Me){Bf?Df(function(){si&6?tl(Fu,Me):Me()}):tl(Fu,Me)}function on(){return Ya===0&&(Ya=ze()),Ya}function Rt(Me,we){if(To===null){var ke=To=[];oc=0,Ja=on(),Za={status:"pending",value:void 0,then:function(Ve){ke.push(Ve)}}}return oc++,we.then(An,An),we}function An(){if(--oc===0&&To!==null){Za!==null&&(Za.status="fulfilled");var Me=To;To=null,Ja=0,Za=null;for(var we=0;we<Me.length;we++)(0,Me[we])()}}function sr(Me,we){var ke=[],Ve={status:"pending",value:null,reason:null,then:function(We){ke.push(We)}};return Me.then(function(){Ve.status="fulfilled",Ve.value=we;for(var We=0;We<ke.length;We++)(0,ke[We])(we)},function(We){for(Ve.status="rejected",Ve.reason=We,We=0;We<ke.length;We++)(0,ke[We])(void 0)}),Ve}function zn(Me){Me.updateQueue={baseState:Me.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function In(Me,we){Me=Me.updateQueue,we.updateQueue===Me&&(we.updateQueue={baseState:Me.baseState,firstBaseUpdate:Me.firstBaseUpdate,lastBaseUpdate:Me.lastBaseUpdate,shared:Me.shared,callbacks:null})}function er(Me){return{lane:Me,tag:0,payload:null,callback:null,next:null}}function Kn(Me,we,ke){var Ve=Me.updateQueue;if(Ve===null)return null;if(Ve=Ve.shared,si&2){var We=Ve.pending;return We===null?we.next=we:(we.next=We.next,We.next=we),Ve.pending=we,we=Hn(Me),dn(Me,null,ke),we}return Dn(Me,Ve,we,ke),Hn(Me)}function lr(Me,we,ke){if(we=we.updateQueue,we!==null&&(we=we.shared,(ke&4194176)!==0)){var Ve=we.lanes;Ve&=Me.pendingLanes,ke|=Ve,we.lanes=ke,nt(Me,ke)}}function gr(Me,we){var ke=Me.updateQueue,Ve=Me.alternate;if(Ve!==null&&(Ve=Ve.updateQueue,ke===Ve)){var We=null,Ke=null;if(ke=ke.firstBaseUpdate,ke!==null){do{var Ht={lane:ke.lane,tag:ke.tag,payload:ke.payload,callback:null,next:null};Ke===null?We=Ke=Ht:Ke=Ke.next=Ht,ke=ke.next}while(ke!==null);Ke===null?We=Ke=we:Ke=Ke.next=we}else We=Ke=we;ke={baseState:Ve.baseState,firstBaseUpdate:We,lastBaseUpdate:Ke,shared:Ve.shared,callbacks:Ve.callbacks},Me.updateQueue=ke;return}Me=ke.lastBaseUpdate,Me===null?ke.firstBaseUpdate=we:Me.next=we,ke.lastBaseUpdate=we}function hr(){if(lc){var Me=Za;if(Me!==null)throw Me}}function Er(Me,we,ke,Ve){lc=!1;var We=Me.updateQueue;Qs=!1;var Ke=We.firstBaseUpdate,Ht=We.lastBaseUpdate,rn=We.shared.pending;if(rn!==null){We.shared.pending=null;var vn=rn,jn=vn.next;vn.next=null,Ht===null?Ke=jn:Ht.next=jn,Ht=vn;var or=Me.alternate;or!==null&&(or=or.updateQueue,rn=or.lastBaseUpdate,rn!==Ht&&(rn===null?or.firstBaseUpdate=jn:rn.next=jn,or.lastBaseUpdate=vn))}if(Ke!==null){var pr=We.baseState;Ht=0,or=jn=vn=null,rn=Ke;do{var xr=rn.lane&-536870913,Fr=xr!==rn.lane;if(Fr?(Kr&xr)===xr:(Ve&xr)===xr){xr!==0&&xr===Ja&&(lc=!0),or!==null&&(or=or.next={lane:0,tag:rn.tag,payload:rn.payload,callback:null,next:null});e:{var ds=Me,Oo=rn;xr=we;var Ra=ke;switch(Oo.tag){case 1:if(ds=Oo.payload,typeof ds=="function"){pr=ds.call(Ra,pr,xr);break e}pr=ds;break e;case 3:ds.flags=ds.flags&-65537|128;case 0:if(ds=Oo.payload,xr=typeof ds=="function"?ds.call(Ra,pr,xr):ds,xr==null)break e;pr=Hl({},pr,xr);break e;case 2:Qs=!0}}xr=rn.callback,xr!==null&&(Me.flags|=64,Fr&&(Me.flags|=8192),Fr=We.callbacks,Fr===null?We.callbacks=[xr]:Fr.push(xr))}else Fr={lane:xr,tag:rn.tag,payload:rn.payload,callback:rn.callback,next:null},or===null?(jn=or=Fr,vn=pr):or=or.next=Fr,Ht|=xr;if(rn=rn.next,rn===null){if(rn=We.shared.pending,rn===null)break;Fr=rn,rn=Fr.next,Fr.next=null,We.lastBaseUpdate=Fr,We.shared.pending=null}}while(!0);or===null&&(vn=pr),We.baseState=vn,We.firstBaseUpdate=jn,We.lastBaseUpdate=or,Ke===null&&(We.shared.lanes=0),na|=Ht,Me.lanes=Ht,Me.memoizedState=pr}}function un(Me,we){if(typeof Me!="function")throw Error(xe(191,Me));Me.call(we)}function Sn(Me,we){var ke=Me.callbacks;if(ke!==null)for(Me.callbacks=null,Me=0;Me<ke.length;Me++)un(ke[Me],we)}function wn(Me,we){if(Qi(Me,we))return!0;if(typeof Me!="object"||Me===null||typeof we!="object"||we===null)return!1;var ke=Object.keys(Me),Ve=Object.keys(we);if(ke.length!==Ve.length)return!1;for(Ve=0;Ve<ke.length;Ve++){var We=ke[Ve];if(!kd.call(we,We)||!Qi(Me[We],we[We]))return!1}return!0}function Gn(Me){return Me=Me.status,Me==="fulfilled"||Me==="rejected"}function Yn(){}function cr(Me,we,ke){switch(ke=Me[ke],ke===void 0?Me.push(we):ke!==we&&(we.then(Yn,Yn),we=ke),we.status){case"fulfilled":return we.value;case"rejected":throw Me=we.reason,Me===Mo?Error(xe(483)):Me;default:if(typeof we.status=="string")we.then(Yn,Yn);else{if(Me=oi,Me!==null&&100<Me.shellSuspendCounter)throw Error(xe(482));Me=we,Me.status="pending",Me.then(function(Ve){if(we.status==="pending"){var We=we;We.status="fulfilled",We.value=Ve}},function(Ve){if(we.status==="pending"){var We=we;We.status="rejected",We.reason=Ve}})}switch(we.status){case"fulfilled":return we.value;case"rejected":throw Me=we.reason,Me===Mo?Error(xe(483)):Me}throw Qa=we,Mo}}function tr(){if(Qa===null)throw Error(xe(459));var Me=Qa;return Qa=null,Me}function Wr(Me){var we=wo;return wo+=1,eo===null&&(eo=[]),cr(eo,Me,we)}function Qr(Me,we){we=we.props.ref,Me.ref=we!==void 0?we:null}function kr(Me,we){throw we.$$typeof===cf?Error(xe(525)):(Me=Object.prototype.toString.call(we),Error(xe(31,Me==="[object Object]"?"object with keys {"+Object.keys(we).join(", ")+"}":Me)))}function di(Me){var we=Me._init;return we(Me._payload)}function ci(Me){function we(Rn,xn){if(Me){var On=Rn.deletions;On===null?(Rn.deletions=[xn],Rn.flags|=16):On.push(xn)}}function ke(Rn,xn){if(!Me)return null;for(;xn!==null;)we(Rn,xn),xn=xn.sibling;return null}function Ve(Rn){for(var xn=new Map;Rn!==null;)Rn.key!==null?xn.set(Rn.key,Rn):xn.set(Rn.index,Rn),Rn=Rn.sibling;return xn}function We(Rn,xn){return Rn=Ks(Rn,xn),Rn.index=0,Rn.sibling=null,Rn}function Ke(Rn,xn,On){return Rn.index=On,Me?(On=Rn.alternate,On!==null?(On=On.index,On<xn?(Rn.flags|=33554434,xn):On):(Rn.flags|=33554434,xn)):(Rn.flags|=1048576,xn)}function Ht(Rn){return Me&&Rn.alternate===null&&(Rn.flags|=33554434),Rn}function rn(Rn,xn,On,ir){return xn===null||xn.tag!==6?(xn=Fl(On,Rn.mode,ir),xn.return=Rn,xn):(xn=We(xn,On),xn.return=Rn,xn)}function vn(Rn,xn,On,ir){var Mr=On.type;return Mr===za?or(Rn,xn,On.props.children,ir,On.key):xn!==null&&(xn.elementType===Mr||typeof Mr=="object"&&Mr!==null&&Mr.$$typeof===Ys&&di(Mr)===xn.type)?(xn=We(xn,On.props),Qr(xn,On),xn.return=Rn,xn):(xn=qo(On.type,On.key,On.props,null,Rn.mode,ir),Qr(xn,On),xn.return=Rn,xn)}function jn(Rn,xn,On,ir){return xn===null||xn.tag!==4||xn.stateNode.containerInfo!==On.containerInfo||xn.stateNode.implementation!==On.implementation?(xn=kl(On,Rn.mode,ir),xn.return=Rn,xn):(xn=We(xn,On.children||[]),xn.return=Rn,xn)}function or(Rn,xn,On,ir,Mr){return xn===null||xn.tag!==7?(xn=ga(On,Rn.mode,ir,Mr),xn.return=Rn,xn):(xn=We(xn,On),xn.return=Rn,xn)}function pr(Rn,xn,On){if(typeof xn=="string"&&xn!==""||typeof xn=="number"||typeof xn=="bigint")return xn=Fl(""+xn,Rn.mode,On),xn.return=Rn,xn;if(typeof xn=="object"&&xn!==null){switch(xn.$$typeof){case Yo:return On=qo(xn.type,xn.key,xn.props,null,Rn.mode,On),Qr(On,xn),On.return=Rn,On;case Va:return xn=kl(xn,Rn.mode,On),xn.return=Rn,xn;case Ys:var ir=xn._init;return xn=ir(xn._payload),pr(Rn,xn,On)}if(Jo(xn)||ye(xn))return xn=ga(xn,Rn.mode,On,null),xn.return=Rn,xn;if(typeof xn.then=="function")return pr(Rn,Wr(xn),On);if(xn.$$typeof===qs)return pr(Rn,mr(Rn,xn),On);kr(Rn,xn)}return null}function xr(Rn,xn,On,ir){var Mr=xn!==null?xn.key:null;if(typeof On=="string"&&On!==""||typeof On=="number"||typeof On=="bigint")return Mr!==null?null:rn(Rn,xn,""+On,ir);if(typeof On=="object"&&On!==null){switch(On.$$typeof){case Yo:return On.key===Mr?vn(Rn,xn,On,ir):null;case Va:return On.key===Mr?jn(Rn,xn,On,ir):null;case Ys:return Mr=On._init,On=Mr(On._payload),xr(Rn,xn,On,ir)}if(Jo(On)||ye(On))return Mr!==null?null:or(Rn,xn,On,ir,null);if(typeof On.then=="function")return xr(Rn,xn,Wr(On),ir);if(On.$$typeof===qs)return xr(Rn,xn,mr(Rn,On),ir);kr(Rn,On)}return null}function Fr(Rn,xn,On,ir,Mr){if(typeof ir=="string"&&ir!==""||typeof ir=="number"||typeof ir=="bigint")return Rn=Rn.get(On)||null,rn(xn,Rn,""+ir,Mr);if(typeof ir=="object"&&ir!==null){switch(ir.$$typeof){case Yo:return Rn=Rn.get(ir.key===null?On:ir.key)||null,vn(xn,Rn,ir,Mr);case Va:return Rn=Rn.get(ir.key===null?On:ir.key)||null,jn(xn,Rn,ir,Mr);case Ys:var fi=ir._init;return ir=fi(ir._payload),Fr(Rn,xn,On,ir,Mr)}if(Jo(ir)||ye(ir))return Rn=Rn.get(On)||null,or(xn,Rn,ir,Mr,null);if(typeof ir.then=="function")return Fr(Rn,xn,On,Wr(ir),Mr);if(ir.$$typeof===qs)return Fr(Rn,xn,On,mr(xn,ir),Mr);kr(xn,ir)}return null}function ds(Rn,xn,On,ir){for(var Mr=null,fi=null,Pr=xn,Jr=xn=0,Ii=null;Pr!==null&&Jr<On.length;Jr++){Pr.index>Jr?(Ii=Pr,Pr=null):Ii=Pr.sibling;var Zr=xr(Rn,Pr,On[Jr],ir);if(Zr===null){Pr===null&&(Pr=Ii);break}Me&&Pr&&Zr.alternate===null&&we(Rn,Pr),xn=Ke(Zr,xn,Jr),fi===null?Mr=Zr:fi.sibling=Zr,fi=Zr,Pr=Ii}if(Jr===On.length)return ke(Rn,Pr),Yr&&Je(Rn,Jr),Mr;if(Pr===null){for(;Jr<On.length;Jr++)Pr=pr(Rn,On[Jr],ir),Pr!==null&&(xn=Ke(Pr,xn,Jr),fi===null?Mr=Pr:fi.sibling=Pr,fi=Pr);return Yr&&Je(Rn,Jr),Mr}for(Pr=Ve(Pr);Jr<On.length;Jr++)Ii=Fr(Pr,Rn,Jr,On[Jr],ir),Ii!==null&&(Me&&Ii.alternate!==null&&Pr.delete(Ii.key===null?Jr:Ii.key),xn=Ke(Ii,xn,Jr),fi===null?Mr=Ii:fi.sibling=Ii,fi=Ii);return Me&&Pr.forEach(function(ia){return we(Rn,ia)}),Yr&&Je(Rn,Jr),Mr}function Oo(Rn,xn,On,ir){if(On==null)throw Error(xe(151));for(var Mr=null,fi=null,Pr=xn,Jr=xn=0,Ii=null,Zr=On.next();Pr!==null&&!Zr.done;Jr++,Zr=On.next()){Pr.index>Jr?(Ii=Pr,Pr=null):Ii=Pr.sibling;var ia=xr(Rn,Pr,Zr.value,ir);if(ia===null){Pr===null&&(Pr=Ii);break}Me&&Pr&&ia.alternate===null&&we(Rn,Pr),xn=Ke(ia,xn,Jr),fi===null?Mr=ia:fi.sibling=ia,fi=ia,Pr=Ii}if(Zr.done)return ke(Rn,Pr),Yr&&Je(Rn,Jr),Mr;if(Pr===null){for(;!Zr.done;Jr++,Zr=On.next())Zr=pr(Rn,Zr.value,ir),Zr!==null&&(xn=Ke(Zr,xn,Jr),fi===null?Mr=Zr:fi.sibling=Zr,fi=Zr);return Yr&&Je(Rn,Jr),Mr}for(Pr=Ve(Pr);!Zr.done;Jr++,Zr=On.next())Zr=Fr(Pr,Rn,Jr,Zr.value,ir),Zr!==null&&(Me&&Zr.alternate!==null&&Pr.delete(Zr.key===null?Jr:Zr.key),xn=Ke(Zr,xn,Jr),fi===null?Mr=Zr:fi.sibling=Zr,fi=Zr);return Me&&Pr.forEach(function(jd){return we(Rn,jd)}),Yr&&Je(Rn,Jr),Mr}function Ra(Rn,xn,On,ir){if(typeof On=="object"&&On!==null&&On.type===za&&On.key===null&&(On=On.props.children),typeof On=="object"&&On!==null){switch(On.$$typeof){case Yo:e:{for(var Mr=On.key;xn!==null;){if(xn.key===Mr){if(Mr=On.type,Mr===za){if(xn.tag===7){ke(Rn,xn.sibling),ir=We(xn,On.props.children),ir.return=Rn,Rn=ir;break e}}else if(xn.elementType===Mr||typeof Mr=="object"&&Mr!==null&&Mr.$$typeof===Ys&&di(Mr)===xn.type){ke(Rn,xn.sibling),ir=We(xn,On.props),Qr(ir,On),ir.return=Rn,Rn=ir;break e}ke(Rn,xn);break}else we(Rn,xn);xn=xn.sibling}On.type===za?(ir=ga(On.props.children,Rn.mode,ir,On.key),ir.return=Rn,Rn=ir):(ir=qo(On.type,On.key,On.props,null,Rn.mode,ir),Qr(ir,On),ir.return=Rn,Rn=ir)}return Ht(Rn);case Va:e:{for(Mr=On.key;xn!==null;){if(xn.key===Mr)if(xn.tag===4&&xn.stateNode.containerInfo===On.containerInfo&&xn.stateNode.implementation===On.implementation){ke(Rn,xn.sibling),ir=We(xn,On.children||[]),ir.return=Rn,Rn=ir;break e}else{ke(Rn,xn);break}else we(Rn,xn);xn=xn.sibling}ir=kl(On,Rn.mode,ir),ir.return=Rn,Rn=ir}return Ht(Rn);case Ys:return Mr=On._init,On=Mr(On._payload),Ra(Rn,xn,On,ir)}if(Jo(On))return ds(Rn,xn,On,ir);if(ye(On)){if(Mr=ye(On),typeof Mr!="function")throw Error(xe(150));return On=Mr.call(On),Oo(Rn,xn,On,ir)}if(typeof On.then=="function")return Ra(Rn,xn,Wr(On),ir);if(On.$$typeof===qs)return Ra(Rn,xn,mr(Rn,On),ir);kr(Rn,On)}return typeof On=="string"&&On!==""||typeof On=="number"||typeof On=="bigint"?(On=""+On,xn!==null&&xn.tag===6?(ke(Rn,xn.sibling),ir=We(xn,On),ir.return=Rn,Rn=ir):(ke(Rn,xn),ir=Fl(On,Rn.mode,ir),ir.return=Rn,Rn=ir),Ht(Rn)):ke(Rn,xn)}return function(Rn,xn,On,ir){try{wo=0;var Mr=Ra(Rn,xn,On,ir);return eo=null,Mr}catch(Pr){if(Pr===Mo)throw Pr;var fi=me(29,Pr,null,Rn.mode);return fi.lanes=ir,fi.return=Rn,fi}finally{}}}function hs(Me,we){Me=Us,Le(ll,Me),Le(to,we),Us=Me|we.baseLanes}function Ei(){Le(ll,Us),Le(to,to.current)}function ai(){Us=ll.current,Be(to),Be(ll)}function hi(Me){var we=Me.alternate;Le(Mi,Mi.current&1),Le(us,Me),Cs===null&&(we===null||to.current!==null||we.memoizedState!==null)&&(Cs=Me)}function Fi(Me){if(Me.tag===22){if(Le(Mi,Mi.current),Le(us,Me),Cs===null){var we=Me.alternate;we!==null&&we.memoizedState!==null&&(Cs=Me)}}else mi()}function mi(){Le(Mi,Mi.current),Le(us,us.current)}function Ar(Me){Be(us),Cs===Me&&(Cs=null),Be(Mi)}function ki(Me){for(var we=Me;we!==null;){if(we.tag===13){var ke=we.memoizedState;if(ke!==null&&(ke=ke.dehydrated,ke===null||Yl(ke)||Jl(ke)))return we}else if(we.tag===19&&we.memoizedProps.revealOrder!==void 0){if(we.flags&128)return we}else if(we.child!==null){we.child.return=we,we=we.child;continue}if(we===Me)break;for(;we.sibling===null;){if(we.return===null||we.return===Me)return null;we=we.return}we.sibling.return=we.return,we=we.sibling}return null}function qr(){throw Error(xe(321))}function Et(Me,we){if(we===null)return!1;for(var ke=0;ke<we.length&&ke<Me.length;ke++)if(!Qi(Me[ke],we[ke]))return!1;return!0}function Vt(Me,we,ke,Ve,We,Ke){return ea=Ke,zr=we,we.memoizedState=null,we.updateQueue=null,we.lanes=0,Or.H=Me===null||Me.memoizedState===null?Aa:ta,ba=!1,Ke=ke(Ve,We),ba=!1,no&&(Ke=Cn(we,ke,Ve,We)),sn(Me),Ke}function sn(Me){Or.H=Ts;var we=ii!==null&&ii.next!==null;if(ea=0,Si=ii=zr=null,cl=!1,Ro=0,ro=null,we)throw Error(xe(300));Me===null||Bi||(Me=Me.dependencies,Me!==null&&ar(Me)&&(Bi=!0))}function Cn(Me,we,ke,Ve){zr=Me;var We=0;do{if(no&&(ro=null),Ro=0,no=!1,25<=We)throw Error(xe(301));if(We+=1,Si=ii=null,Me.updateQueue!=null){var Ke=Me.updateQueue;Ke.lastEffect=null,Ke.events=null,Ke.stores=null,Ke.memoCache!=null&&(Ke.memoCache.index=0)}Or.H=Sa,Ke=we(ke,Ve)}while(no);return Ke}function Nn(){var Me=Or.H,we=Me.useState()[0];return we=typeof we.then=="function"?en(we):we,Me=Me.useState()[0],(ii!==null?ii.memoizedState:null)!==Me&&(zr.flags|=1024),we}function Pn(){var Me=ul!==0;return ul=0,Me}function Qn(Me,we,ke){we.updateQueue=Me.updateQueue,we.flags&=-2053,Me.lanes&=~ke}function Jn(Me){if(cl){for(Me=Me.memoizedState;Me!==null;){var we=Me.queue;we!==null&&(we.pending=null),Me=Me.next}cl=!1}ea=0,Si=ii=zr=null,no=!1,Ro=ul=0,ro=null}function pt(){var Me={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Si===null?zr.memoizedState=Si=Me:Si=Si.next=Me,Si}function $t(){if(ii===null){var Me=zr.alternate;Me=Me!==null?Me.memoizedState:null}else Me=ii.next;var we=Si===null?zr.memoizedState:Si.next;if(we!==null)Si=we,ii=Me;else{if(Me===null)throw zr.alternate===null?Error(xe(467)):Error(xe(310));ii=Me,Me={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},Si===null?zr.memoizedState=Si=Me:Si=Si.next=Me}return Si}function en(Me){var we=Ro;return Ro+=1,ro===null&&(ro=[]),Me=cr(ro,Me,we),we=zr,(Si===null?we.memoizedState:Si.next)===null&&(we=we.alternate,Or.H=we===null||we.memoizedState===null?Aa:ta),Me}function tn(Me){if(Me!==null&&typeof Me=="object"){if(typeof Me.then=="function")return en(Me);if(Me.$$typeof===qs)return nr(Me)}throw Error(xe(438,String(Me)))}function cn(Me){var we=null,ke=zr.updateQueue;if(ke!==null&&(we=ke.memoCache),we==null){var Ve=zr.alternate;Ve!==null&&(Ve=Ve.updateQueue,Ve!==null&&(Ve=Ve.memoCache,Ve!=null&&(we={data:Ve.data.map(function(We){return We.slice()}),index:0})))}if(we==null&&(we={data:[],index:0}),ke===null&&(ke=uc(),zr.updateQueue=ke),ke.memoCache=we,ke=we.data[we.index],ke===void 0)for(ke=we.data[we.index]=Array(Me),Ve=0;Ve<Me;Ve++)ke[Ve]=ff;return we.index++,ke}function _n(Me,we){return typeof we=="function"?we(Me):we}function Fn(Me){var we=$t();return Wn(we,ii,Me)}function Wn(Me,we,ke){var Ve=Me.queue;if(Ve===null)throw Error(xe(311));Ve.lastRenderedReducer=ke;var We=Me.baseQueue,Ke=Ve.pending;if(Ke!==null){if(We!==null){var Ht=We.next;We.next=Ke.next,Ke.next=Ht}we.baseQueue=We=Ke,Ve.pending=null}if(Ke=Me.baseState,We===null)Me.memoizedState=Ke;else{we=We.next;var rn=Ht=null,vn=null,jn=we,or=!1;do{var pr=jn.lane&-536870913;if(pr!==jn.lane?(Kr&pr)===pr:(ea&pr)===pr){var xr=jn.revertLane;if(xr===0)vn!==null&&(vn=vn.next={lane:0,revertLane:0,action:jn.action,hasEagerState:jn.hasEagerState,eagerState:jn.eagerState,next:null}),pr===Ja&&(or=!0);else if((ea&xr)===xr){jn=jn.next,xr===Ja&&(or=!0);continue}else pr={lane:0,revertLane:jn.revertLane,action:jn.action,hasEagerState:jn.hasEagerState,eagerState:jn.eagerState,next:null},vn===null?(rn=vn=pr,Ht=Ke):vn=vn.next=pr,zr.lanes|=xr,na|=xr;pr=jn.action,ba&&ke(Ke,pr),Ke=jn.hasEagerState?jn.eagerState:ke(Ke,pr)}else xr={lane:pr,revertLane:jn.revertLane,action:jn.action,hasEagerState:jn.hasEagerState,eagerState:jn.eagerState,next:null},vn===null?(rn=vn=xr,Ht=Ke):vn=vn.next=xr,zr.lanes|=pr,na|=pr;jn=jn.next}while(jn!==null&&jn!==we);if(vn===null?Ht=Ke:vn.next=rn,!Qi(Ke,Me.memoizedState)&&(Bi=!0,or&&(ke=Za,ke!==null)))throw ke;Me.memoizedState=Ke,Me.baseState=Ht,Me.baseQueue=vn,Ve.lastRenderedState=Ke}return We===null&&(Ve.lanes=0),[Me.memoizedState,Ve.dispatch]}function qn(Me){var we=$t(),ke=we.queue;if(ke===null)throw Error(xe(311));ke.lastRenderedReducer=Me;var Ve=ke.dispatch,We=ke.pending,Ke=we.memoizedState;if(We!==null){ke.pending=null;var Ht=We=We.next;do Ke=Me(Ke,Ht.action),Ht=Ht.next;while(Ht!==We);Qi(Ke,we.memoizedState)||(Bi=!0),we.memoizedState=Ke,we.baseQueue===null&&(we.baseState=Ke),ke.lastRenderedState=Ke}return[Ke,Ve]}function dr(Me,we,ke){var Ve=zr,We=$t(),Ke=Yr;if(Ke){if(ke===void 0)throw Error(xe(407));ke=ke()}else ke=we();var Ht=!Qi((ii||We).memoizedState,ke);if(Ht&&(We.memoizedState=ke,Bi=!0),We=We.queue,Br(_r.bind(null,Ve,We,Me),[Me]),We.getSnapshot!==we||Ht||Si!==null&&Si.memoizedState.tag&1){if(Ve.flags|=2048,wi(9,fr.bind(null,Ve,We,ke,we),{destroy:void 0},null),oi===null)throw Error(xe(349));Ke||ea&60||Ln(Ve,we,ke)}return ke}function Ln(Me,we,ke){Me.flags|=16384,Me={getSnapshot:we,value:ke},we=zr.updateQueue,we===null?(we=uc(),zr.updateQueue=we,we.stores=[Me]):(ke=we.stores,ke===null?we.stores=[Me]:ke.push(Me))}function fr(Me,we,ke,Ve){we.value=ke,we.getSnapshot=Ve,yr(we)&&Hr(Me)}function _r(Me,we,ke){return ke(function(){yr(we)&&Hr(Me)})}function yr(Me){var we=Me.getSnapshot;Me=Me.value;try{var ke=we();return!Qi(Me,ke)}catch{return!0}}function Hr(Me){var we=mn(Me,2);we!==null&&Vi(we,Me,2)}function Sr(Me){var we=pt();if(typeof Me=="function"){var ke=Me;if(Me=ke(),ba){at(!0);try{ke()}finally{at(!1)}}}return we.memoizedState=we.baseState=Me,we.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:Me},we}function Cr(Me,we,ke,Ve){return Me.baseState=ke,Wn(Me,ii,typeof Ve=="function"?Ve:_n)}function vr(Me,we,ke,Ve,We){if(Hi(Me))throw Error(xe(485));if(Me=we.action,Me!==null){var Ke={payload:We,action:Me,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Ht){Ke.listeners.push(Ht)}};Or.T!==null?ke(!0):Ke.isTransition=!1,Ve(Ke),ke=we.pending,ke===null?(Ke.next=we.pending=Ke,jr(we,Ke)):(Ke.next=ke.next,we.pending=ke.next=Ke)}}function jr(Me,we){var ke=we.action,Ve=we.payload,We=Me.state;if(we.isTransition){var Ke=Or.T,Ht={};Or.T=Ht;try{var rn=ke(We,Ve),vn=Or.S;vn!==null&&vn(Ht,rn),Rr(Me,we,rn)}catch(jn){Ur(Me,we,jn)}finally{Or.T=Ke}}else try{Ke=ke(We,Ve),Rr(Me,we,Ke)}catch(jn){Ur(Me,we,jn)}}function Rr(Me,we,ke){ke!==null&&typeof ke=="object"&&typeof ke.then=="function"?ke.then(function(Ve){Dr(Me,we,Ve)},function(Ve){return Ur(Me,we,Ve)}):Dr(Me,we,ke)}function Dr(Me,we,ke){we.status="fulfilled",we.value=ke,Tr(we),Me.state=ke,we=Me.pending,we!==null&&(ke=we.next,ke===we?Me.pending=null:(ke=ke.next,we.next=ke,jr(Me,ke)))}function Ur(Me,we,ke){var Ve=Me.pending;if(Me.pending=null,Ve!==null){Ve=Ve.next;do we.status="rejected",we.reason=ke,Tr(we),we=we.next;while(we!==Ve)}Me.action=null}function Tr(Me){Me=Me.listeners;for(var we=0;we<Me.length;we++)(0,Me[we])()}function Nr(Me,we){return we}function Lr(Me,we){if(Yr){var ke=oi.formState;if(ke!==null){e:{var Ve=zr;if(Yr){if(Ni){var We=rd(Ni,Ss);if(We){Ni=Cu(We),Ve=id(We);break e}}En(Ve)}Ve=!1}Ve&&(we=ke[0])}}ke=pt(),ke.memoizedState=ke.baseState=we,Ve={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Nr,lastRenderedState:we},ke.queue=Ve,ke=Ir.bind(null,zr,Ve),Ve.dispatch=ke,Ve=Sr(!1);var Ke=ui.bind(null,zr,!1,Ve.queue);return Ve=pt(),We={state:we,dispatch:null,action:Me,pending:null},Ve.queue=We,ke=vr.bind(null,zr,We,Ke,ke),We.dispatch=ke,Ve.memoizedState=Me,[we,ke,!1]}function ri(Me){var we=$t();return Xr(we,ii,Me)}function Xr(Me,we,ke){we=Wn(Me,we,Nr)[0],Me=Fn(_n)[0],we=typeof we=="object"&&we!==null&&typeof we.then=="function"?en(we):we;var Ve=$t(),We=Ve.queue,Ke=We.dispatch;return ke!==Ve.memoizedState&&(zr.flags|=2048,wi(9,ei.bind(null,We,ke),{destroy:void 0},null)),[we,Ke,Me]}function ei(Me,we){Me.action=we}function vi(Me){var we=$t(),ke=ii;if(ke!==null)return Xr(we,ke,Me);$t(),we=we.memoizedState,ke=$t();var Ve=ke.queue.dispatch;return ke.memoizedState=Me,[we,Ve,!1]}function wi(Me,we,ke,Ve){return Me={tag:Me,create:we,inst:ke,deps:Ve,next:null},we=zr.updateQueue,we===null&&(we=uc(),zr.updateQueue=we),ke=we.lastEffect,ke===null?we.lastEffect=Me.next=Me:(Ve=ke.next,ke.next=Me,Me.next=Ve,we.lastEffect=Me),Me}function Ui(){return $t().memoizedState}function ws(Me,we,ke,Ve){var We=pt();zr.flags|=Me,We.memoizedState=wi(1|we,ke,{destroy:void 0},Ve===void 0?null:Ve)}function Rs(Me,we,ke,Ve){var We=$t();Ve=Ve===void 0?null:Ve;var Ke=We.memoizedState.inst;ii!==null&&Ve!==null&&Et(Ve,ii.memoizedState.deps)?We.memoizedState=wi(we,ke,Ke,Ve):(zr.flags|=Me,We.memoizedState=wi(1|we,ke,Ke,Ve))}function ps(Me,we){ws(8390656,8,Me,we)}function Br(Me,we){Rs(2048,8,Me,we)}function Hs(Me,we){return Rs(4,2,Me,we)}function sa(Me,we){return Rs(4,4,Me,we)}function aa(Me,we){if(typeof we=="function"){Me=Me();var ke=we(Me);return function(){typeof ke=="function"?ke():we(null)}}if(we!=null)return Me=Me(),we.current=Me,function(){we.current=null}}function Ri(Me,we,ke){ke=ke!=null?ke.concat([Me]):null,Rs(4,4,aa.bind(null,we,Me),ke)}function oa(){}function Ba(Me,we){var ke=$t();we=we===void 0?null:we;var Ve=ke.memoizedState;return we!==null&&Et(we,Ve[1])?Ve[0]:(ke.memoizedState=[Me,we],Me)}function Vs(Me,we){var ke=$t();we=we===void 0?null:we;var Ve=ke.memoizedState;if(we!==null&&Et(we,Ve[1]))return Ve[0];if(Ve=Me(),ba){at(!0);try{Me()}finally{at(!1)}}return ke.memoizedState=[Ve,we],Ve}function Pe(Me,we,ke){return ke===void 0||ea&1073741824?Me.memoizedState=we:(Me.memoizedState=ke,Me=Hc(),zr.lanes|=Me,na|=Me,ke)}function $e(Me,we,ke,Ve){return Qi(ke,we)?ke:to.current!==null?(Me=Pe(Me,ke,Ve),Qi(Me,we)||(Bi=!0),Me):ea&42?(Me=Hc(),zr.lanes|=Me,na|=Me,we):(Bi=!0,Me.memoizedState=ke)}function Ze(Me,we,ke,Ve,We){var Ke=xa();$i(Ke!==0&&8>Ke?Ke:8);var Ht=Or.T,rn={};Or.T=rn,ui(Me,!1,we,ke);try{var vn=We(),jn=Or.S;if(jn!==null&&jn(rn,vn),vn!==null&&typeof vn=="object"&&typeof vn.then=="function"){var or=sr(vn,Ve);wr(Me,we,or,qi(Me))}else wr(Me,we,Ve,qi(Me))}catch(pr){wr(Me,we,{then:function(){},status:"rejected",reason:pr},qi())}finally{$i(Ke),Or.T=Ht}}function wt(Me){var we=Me.memoizedState;if(we!==null)return we;we={memoizedState:Ga,baseState:Ga,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:Ga},next:null};var ke={};return we.next={memoizedState:ke,baseState:ke,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:_n,lastRenderedState:ke},next:null},Me.memoizedState=we,Me=Me.alternate,Me!==null&&(Me.memoizedState=we),we}function jt(){return nr(ya)}function yn(){return $t().memoizedState}function Tn(){return $t().memoizedState}function rr(Me){for(var we=Me.return;we!==null;){switch(we.tag){case 24:case 3:var ke=qi();Me=er(ke);var Ve=Kn(we,Me,ke);Ve!==null&&(Vi(Ve,we,ke),lr(Ve,we,ke)),we={cache:Vr()},Me.payload=we;return}we=we.return}}function ur(Me,we,ke){var Ve=qi();ke={lane:Ve,revertLane:0,action:ke,hasEagerState:!1,eagerState:null,next:null},Hi(Me)?bs(we,ke):(ke=hn(Me,we,ke,Ve),ke!==null&&(Vi(ke,Me,Ve),ms(ke,we,Ve)))}function Ir(Me,we,ke){var Ve=qi();wr(Me,we,ke,Ve)}function wr(Me,we,ke,Ve){var We={lane:Ve,revertLane:0,action:ke,hasEagerState:!1,eagerState:null,next:null};if(Hi(Me))bs(we,We);else{var Ke=Me.alternate;if(Me.lanes===0&&(Ke===null||Ke.lanes===0)&&(Ke=we.lastRenderedReducer,Ke!==null))try{var Ht=we.lastRenderedState,rn=Ke(Ht,ke);if(We.hasEagerState=!0,We.eagerState=rn,Qi(rn,Ht))return Dn(Me,we,We,0),oi===null&&zt(),!1}catch{}finally{}if(ke=hn(Me,we,We,Ve),ke!==null)return Vi(ke,Me,Ve),ms(ke,we,Ve),!0}return!1}function ui(Me,we,ke,Ve){if(Ve={lane:2,revertLane:on(),action:Ve,hasEagerState:!1,eagerState:null,next:null},Hi(Me)){if(we)throw Error(xe(479))}else we=hn(Me,ke,Ve,2),we!==null&&Vi(we,Me,2)}function Hi(Me){var we=Me.alternate;return Me===zr||we!==null&&we===zr}function bs(Me,we){no=cl=!0;var ke=Me.pending;ke===null?we.next=we:(we.next=ke.next,ke.next=we),Me.pending=we}function ms(Me,we,ke){if(ke&4194176){var Ve=we.lanes;Ve&=Me.pendingLanes,ke|=Ve,we.lanes=ke,nt(Me,ke)}}function As(Me,we,ke,Ve){we=Me.memoizedState,ke=ke(Ve,we),ke=ke==null?we:Hl({},we,ke),Me.memoizedState=ke,Me.lanes===0&&(Me.updateQueue.baseState=ke)}function gs(Me,we,ke,Ve,We,Ke,Ht){return Me=Me.stateNode,typeof Me.shouldComponentUpdate=="function"?Me.shouldComponentUpdate(Ve,Ke,Ht):we.prototype&&we.prototype.isPureReactComponent?!wn(ke,Ve)||!wn(We,Ke):!0}function xs(Me,we,ke,Ve){Me=we.state,typeof we.componentWillReceiveProps=="function"&&we.componentWillReceiveProps(ke,Ve),typeof we.UNSAFE_componentWillReceiveProps=="function"&&we.UNSAFE_componentWillReceiveProps(ke,Ve),we.state!==Me&&fc.enqueueReplaceState(we,we.state,null)}function Bs(Me,we){var ke=we;if("ref"in we){ke={};for(var Ve in we)Ve!=="ref"&&(ke[Ve]=we[Ve])}if(Me=Me.defaultProps){ke===we&&(ke=Hl({},ke));for(var We in Me)ke[We]===void 0&&(ke[We]=Me[We])}return ke}function Da(Me,we){try{var ke=Me.onUncaughtError;ke(we.value,{componentStack:we.stack})}catch(Ve){setTimeout(function(){throw Ve})}}function No(Me,we,ke){try{var Ve=Me.onCaughtError;Ve(ke.value,{componentStack:ke.stack,errorBoundary:we.tag===1?we.stateNode:null})}catch(We){setTimeout(function(){throw We})}}function oo(Me,we,ke){return ke=er(ke),ke.tag=3,ke.payload={element:null},ke.callback=function(){Da(Me,we)},ke}function Ia(Me){return Me=er(Me),Me.tag=3,Me}function lo(Me,we,ke,Ve){var We=ke.type.getDerivedStateFromError;if(typeof We=="function"){var Ke=Ve.value;Me.payload=function(){return We(Ke)},Me.callback=function(){No(we,ke,Ve)}}var Ht=ke.stateNode;Ht!==null&&typeof Ht.componentDidCatch=="function"&&(Me.callback=function(){No(we,ke,Ve),typeof We!="function"&&(ra===null?ra=new Set([this]):ra.add(this));var rn=Ve.stack;this.componentDidCatch(Ve.value,{componentStack:rn!==null?rn:""})})}function _l(Me,we,ke,Ve,We){if(ke.flags|=32768,Ve!==null&&typeof Ve=="object"&&typeof Ve.then=="function"){if(we=ke.alternate,we!==null&&Zn(we,ke,We,!0),ke=us.current,ke!==null){switch(ke.tag){case 13:return Cs===null?Pl():ke.alternate===null&&yi===0&&(yi=3),ke.flags&=-257,ke.flags|=65536,ke.lanes=We,Ve===ol?ke.flags|=16384:(we=ke.updateQueue,we===null?ke.updateQueue=new Set([Ve]):we.add(Ve),Ol(Me,Ve,We)),!1;case 22:return ke.flags|=65536,Ve===ol?ke.flags|=16384:(we=ke.updateQueue,we===null?(we={transitions:null,markerInstances:null,retryQueue:new Set([Ve])},ke.updateQueue=we):(ke=we.retryQueue,ke===null?we.retryQueue=new Set([Ve]):ke.add(Ve)),Ol(Me,Ve,We)),!1}throw Error(xe(435,ke.tag))}return Ol(Me,Ve,We),Pl(),!1}if(Yr)return we=us.current,we!==null?(!(we.flags&65536)&&(we.flags|=256),we.flags|=65536,we.lanes=We,Ve!==rc&&(Me=Error(xe(422),{cause:Ve}),Mn(Ft(Me,ke)))):(Ve!==rc&&(we=Error(xe(423),{cause:Ve}),Mn(Ft(we,ke))),Me=Me.current.alternate,Me.flags|=65536,We&=-We,Me.lanes|=We,Ve=Ft(Ve,ke),We=oo(Me.stateNode,Ve,We),gr(Me,We),yi!==4&&(yi=2)),!1;var Ke=Error(xe(520),{cause:Ve});if(Ke=Ft(Ke,ke),Do===null?Do=[Ke]:Do.push(Ke),yi!==4&&(yi=2),we===null)return!0;Ve=Ft(Ve,ke),ke=we;do{switch(ke.tag){case 3:return ke.flags|=65536,Me=We&-We,ke.lanes|=Me,Me=oo(ke.stateNode,Ve,Me),gr(ke,Me),!1;case 1:if(we=ke.type,Ke=ke.stateNode,(ke.flags&128)===0&&(typeof we.getDerivedStateFromError=="function"||Ke!==null&&typeof Ke.componentDidCatch=="function"&&(ra===null||!ra.has(Ke))))return ke.flags|=65536,We&=-We,ke.lanes|=We,We=Ia(We),lo(We,Me,ke,Ve),gr(ke,We),!1}ke=ke.return}while(ke!==null);return!1}function Ti(Me,we,ke,Ve){we.child=Me===null?Uu(we,null,ke,Ve):Ea(we,Me.child,ke,Ve)}function co(Me,we,ke,Ve,We){ke=ke.render;var Ke=we.ref;if("ref"in Ve){var Ht={};for(var rn in Ve)rn!=="ref"&&(Ht[rn]=Ve[rn])}else Ht=Ve;return Xn(we),Ve=Vt(Me,we,ke,Ht,Ke,We),rn=Pn(),Me!==null&&!Bi?(Qn(Me,we,We),rs(Me,we,We)):(Yr&&rn&&Kt(we),we.flags|=1,Ti(Me,we,Ve,We),we.child)}function Pa(Me,we,ke,Ve,We){if(Me===null){var Ke=ke.type;return typeof Ke=="function"&&!Nl(Ke)&&Ke.defaultProps===void 0&&ke.compare===null?(we.tag=15,we.type=Ke,Fo(Me,we,Ke,Ve,We)):(Me=qo(ke.type,null,Ve,we,we.mode,We),Me.ref=we.ref,Me.return=we,we.child=Me)}if(Ke=Me.child,!zs(Me,We)){var Ht=Ke.memoizedProps;if(ke=ke.compare,ke=ke!==null?ke:wn,ke(Ht,Ve)&&Me.ref===we.ref)return rs(Me,we,We)}return we.flags|=1,Me=Ks(Ke,Ve),Me.ref=we.ref,Me.return=we,we.child=Me}function Fo(Me,we,ke,Ve,We){if(Me!==null){var Ke=Me.memoizedProps;if(wn(Ke,Ve)&&Me.ref===we.ref)if(Bi=!1,we.pendingProps=Ve=Ke,zs(Me,We))Me.flags&131072&&(Bi=!0);else return we.lanes=Me.lanes,rs(Me,we,We)}return uo(Me,we,ke,Ve,We)}function ko(Me,we,ke){var Ve=we.pendingProps,We=Ve.children,Ke=(we.stateNode._pendingVisibility&2)!==0,Ht=Me!==null?Me.memoizedState:null;if(la(Me,we),Ve.mode==="hidden"||Ke){if(we.flags&128){if(Ve=Ht!==null?Ht.baseLanes|ke:ke,Me!==null){for(We=we.child=Me.child,Ke=0;We!==null;)Ke=Ke|We.lanes|We.childLanes,We=We.sibling;we.childLanes=Ke&~Ve}else we.childLanes=0,we.child=null;return Uo(Me,we,Ve,ke)}if(ke&536870912)we.memoizedState={baseLanes:0,cachePool:null},Me!==null&&Ai(we,Ht!==null?Ht.cachePool:null),Ht!==null?hs(we,Ht):Ei(),Fi(we);else return we.lanes=we.childLanes=536870912,Uo(Me,we,Ht!==null?Ht.baseLanes|ke:ke,ke)}else Ht!==null?(Ai(we,Ht.cachePool),hs(we,Ht),mi(),we.memoizedState=null):(Me!==null&&Ai(we,null),Ei(),mi());return Ti(Me,we,We,ke),we.child}function Uo(Me,we,ke,Ve){var We=bi();return We=We===null?null:{parent:Ps?gi._currentValue:gi._currentValue2,pool:We},we.memoizedState={baseLanes:ke,cachePool:We},Me!==null&&Ai(we,null),Ei(),Fi(we),Me!==null&&Zn(Me,we,Ve,!0),null}function la(Me,we){var ke=we.ref;if(ke===null)Me!==null&&Me.ref!==null&&(we.flags|=2097664);else{if(typeof ke!="function"&&typeof ke!="object")throw Error(xe(284));(Me===null||Me.ref!==ke)&&(we.flags|=2097664)}}function uo(Me,we,ke,Ve,We){return Xn(we),ke=Vt(Me,we,ke,Ve,void 0,We),Ve=Pn(),Me!==null&&!Bi?(Qn(Me,we,We),rs(Me,we,We)):(Yr&&Ve&&Kt(we),we.flags|=1,Ti(Me,we,ke,We),we.child)}function Ho(Me,we,ke,Ve,We,Ke){return Xn(we),we.updateQueue=null,ke=Cn(we,Ve,ke,We),sn(Me),Ve=Pn(),Me!==null&&!Bi?(Qn(Me,we,Ke),rs(Me,we,Ke)):(Yr&&Ve&&Kt(we),we.flags|=1,Ti(Me,we,ke,Ke),we.child)}function Vo(Me,we,ke,Ve,We){if(Xn(we),we.stateNode===null){var Ke=ja,Ht=ke.contextType;typeof Ht=="object"&&Ht!==null&&(Ke=nr(Ht)),Ke=new ke(Ve,Ke),we.memoizedState=Ke.state!==null&&Ke.state!==void 0?Ke.state:null,Ke.updater=fc,we.stateNode=Ke,Ke._reactInternals=we,Ke=we.stateNode,Ke.props=Ve,Ke.state=we.memoizedState,Ke.refs={},zn(we),Ht=ke.contextType,Ke.context=typeof Ht=="object"&&Ht!==null?nr(Ht):ja,Ke.state=we.memoizedState,Ht=ke.getDerivedStateFromProps,typeof Ht=="function"&&(As(we,ke,Ht,Ve),Ke.state=we.memoizedState),typeof ke.getDerivedStateFromProps=="function"||typeof Ke.getSnapshotBeforeUpdate=="function"||typeof Ke.UNSAFE_componentWillMount!="function"&&typeof Ke.componentWillMount!="function"||(Ht=Ke.state,typeof Ke.componentWillMount=="function"&&Ke.componentWillMount(),typeof Ke.UNSAFE_componentWillMount=="function"&&Ke.UNSAFE_componentWillMount(),Ht!==Ke.state&&fc.enqueueReplaceState(Ke,Ke.state,null),Er(we,Ve,Ke,We),hr(),Ke.state=we.memoizedState),typeof Ke.componentDidMount=="function"&&(we.flags|=4194308),Ve=!0}else if(Me===null){Ke=we.stateNode;var rn=we.memoizedProps,vn=Bs(ke,rn);Ke.props=vn;var jn=Ke.context,or=ke.contextType;Ht=ja,typeof or=="object"&&or!==null&&(Ht=nr(or));var pr=ke.getDerivedStateFromProps;or=typeof pr=="function"||typeof Ke.getSnapshotBeforeUpdate=="function",rn=we.pendingProps!==rn,or||typeof Ke.UNSAFE_componentWillReceiveProps!="function"&&typeof Ke.componentWillReceiveProps!="function"||(rn||jn!==Ht)&&xs(we,Ke,Ve,Ht),Qs=!1;var xr=we.memoizedState;Ke.state=xr,Er(we,Ve,Ke,We),hr(),jn=we.memoizedState,rn||xr!==jn||Qs?(typeof pr=="function"&&(As(we,ke,pr,Ve),jn=we.memoizedState),(vn=Qs||gs(we,ke,vn,Ve,xr,jn,Ht))?(or||typeof Ke.UNSAFE_componentWillMount!="function"&&typeof Ke.componentWillMount!="function"||(typeof Ke.componentWillMount=="function"&&Ke.componentWillMount(),typeof Ke.UNSAFE_componentWillMount=="function"&&Ke.UNSAFE_componentWillMount()),typeof Ke.componentDidMount=="function"&&(we.flags|=4194308)):(typeof Ke.componentDidMount=="function"&&(we.flags|=4194308),we.memoizedProps=Ve,we.memoizedState=jn),Ke.props=Ve,Ke.state=jn,Ke.context=Ht,Ve=vn):(typeof Ke.componentDidMount=="function"&&(we.flags|=4194308),Ve=!1)}else{Ke=we.stateNode,In(Me,we),Ht=we.memoizedProps,or=Bs(ke,Ht),Ke.props=or,pr=we.pendingProps,xr=Ke.context,jn=ke.contextType,vn=ja,typeof jn=="object"&&jn!==null&&(vn=nr(jn)),rn=ke.getDerivedStateFromProps,(jn=typeof rn=="function"||typeof Ke.getSnapshotBeforeUpdate=="function")||typeof Ke.UNSAFE_componentWillReceiveProps!="function"&&typeof Ke.componentWillReceiveProps!="function"||(Ht!==pr||xr!==vn)&&xs(we,Ke,Ve,vn),Qs=!1,xr=we.memoizedState,Ke.state=xr,Er(we,Ve,Ke,We),hr();var Fr=we.memoizedState;Ht!==pr||xr!==Fr||Qs||Me!==null&&Me.dependencies!==null&&ar(Me.dependencies)?(typeof rn=="function"&&(As(we,ke,rn,Ve),Fr=we.memoizedState),(or=Qs||gs(we,ke,or,Ve,xr,Fr,vn)||Me!==null&&Me.dependencies!==null&&ar(Me.dependencies))?(jn||typeof Ke.UNSAFE_componentWillUpdate!="function"&&typeof Ke.componentWillUpdate!="function"||(typeof Ke.componentWillUpdate=="function"&&Ke.componentWillUpdate(Ve,Fr,vn),typeof Ke.UNSAFE_componentWillUpdate=="function"&&Ke.UNSAFE_componentWillUpdate(Ve,Fr,vn)),typeof Ke.componentDidUpdate=="function"&&(we.flags|=4),typeof Ke.getSnapshotBeforeUpdate=="function"&&(we.flags|=1024)):(typeof Ke.componentDidUpdate!="function"||Ht===Me.memoizedProps&&xr===Me.memoizedState||(we.flags|=4),typeof Ke.getSnapshotBeforeUpdate!="function"||Ht===Me.memoizedProps&&xr===Me.memoizedState||(we.flags|=1024),we.memoizedProps=Ve,we.memoizedState=Fr),Ke.props=Ve,Ke.state=Fr,Ke.context=vn,Ve=or):(typeof Ke.componentDidUpdate!="function"||Ht===Me.memoizedProps&&xr===Me.memoizedState||(we.flags|=4),typeof Ke.getSnapshotBeforeUpdate!="function"||Ht===Me.memoizedProps&&xr===Me.memoizedState||(we.flags|=1024),Ve=!1)}return Ke=Ve,la(Me,we),Ve=(we.flags&128)!==0,Ke||Ve?(Ke=we.stateNode,ke=Ve&&typeof ke.getDerivedStateFromError!="function"?null:Ke.render(),we.flags|=1,Me!==null&&Ve?(we.child=Ea(we,Me.child,null,We),we.child=Ea(we,null,ke,We)):Ti(Me,we,ke,We),we.memoizedState=Ke.state,Me=we.child):Me=rs(Me,we,We),Me}function zo(Me,we,ke,Ve){return bn(),we.flags|=256,Ti(Me,we,ke,Ve),we.child}function fo(Me){return{baseLanes:Me,cachePool:Gs()}}function ho(Me,we,ke){return Me=Me!==null?Me.childLanes&~ke:0,we&&(Me|=fs),Me}function Go(Me,we,ke){var Ve=we.pendingProps,We=!1,Ke=(we.flags&128)!==0,Ht;if((Ht=Ke)||(Ht=Me!==null&&Me.memoizedState===null?!1:(Mi.current&2)!==0),Ht&&(We=!0,we.flags&=-129),Ht=(we.flags&32)!==0,we.flags&=-33,Me===null){if(Yr){if(We?hi(we):mi(),Yr){var rn=Ni,vn;(vn=rn)&&(rn=cd(rn,Ss),rn!==null?(we.memoizedState={dehydrated:rn,treeContext:va!==null?{id:Ls,overflow:Os}:null,retryLane:536870912},vn=me(18,null,null,0),vn.stateNode=rn,vn.return=we,we.child=vn,zi=we,Ni=null,vn=!0):vn=!1),vn||En(we)}if(rn=we.memoizedState,rn!==null&&(rn=rn.dehydrated,rn!==null))return Jl(rn)?we.lanes=16:we.lanes=536870912,null;Ar(we)}return rn=Ve.children,Ve=Ve.fallback,We?(mi(),We=we.mode,rn=mo({mode:"hidden",children:rn},We),Ve=ga(Ve,We,ke,null),rn.return=we,Ve.return=we,rn.sibling=Ve,we.child=rn,We=we.child,We.memoizedState=fo(ke),We.childLanes=ho(Me,Ht,ke),we.memoizedState=dc,Ve):(hi(we),po(we,rn))}if(vn=Me.memoizedState,vn!==null&&(rn=vn.dehydrated,rn!==null)){if(Ke)we.flags&256?(hi(we),we.flags&=-257,we=ji(Me,we,ke)):we.memoizedState!==null?(mi(),we.child=Me.child,we.flags|=128,we=null):(mi(),We=Ve.fallback,rn=we.mode,Ve=mo({mode:"visible",children:Ve.children},rn),We=ga(We,rn,ke,null),We.flags|=2,Ve.return=we,We.return=we,Ve.sibling=We,we.child=Ve,Ea(we,Me.child,null,ke),Ve=we.child,Ve.memoizedState=fo(ke),Ve.childLanes=ho(Me,Ht,ke),we.memoizedState=dc,we=We);else if(hi(we),Jl(rn))Ht=ed(rn).digest,Ve=Error(xe(419)),Ve.stack="",Ve.digest=Ht,Mn({value:Ve,source:null,stack:null}),we=ji(Me,we,ke);else if(Bi||Zn(Me,we,ke,!1),Ht=(ke&Me.childLanes)!==0,Bi||Ht){if(Ht=oi,Ht!==null){if(Ve=ke&-ke,Ve&42)Ve=1;else switch(Ve){case 2:Ve=1;break;case 8:Ve=4;break;case 32:Ve=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:Ve=64;break;case 268435456:Ve=134217728;break;default:Ve=0}if(Ve=Ve&(Ht.suspendedLanes|ke)?0:Ve,Ve!==0&&Ve!==vn.retryLane)throw vn.retryLane=Ve,mn(Me,Ve),Vi(Ht,Me,Ve),Vu}Yl(rn)||Pl(),we=ji(Me,we,ke)}else Yl(rn)?(we.flags|=128,we.child=Me.child,we=nf.bind(null,Me),nd(rn,we),we=null):(Me=vn.treeContext,ss&&(Ni=ad(rn),zi=we,Yr=!0,_s=null,Ss=!1,Me!==null&&(os[ls++]=Ls,os[ls++]=Os,os[ls++]=va,Ls=Me.id,Os=Me.overflow,va=we)),we=po(we,Ve.children),we.flags|=4096);return we}return We?(mi(),We=Ve.fallback,rn=we.mode,vn=Me.child,Ke=vn.sibling,Ve=Ks(vn,{mode:"hidden",children:Ve.children}),Ve.subtreeFlags=vn.subtreeFlags&31457280,Ke!==null?We=Ks(Ke,We):(We=ga(We,rn,ke,null),We.flags|=2),We.return=we,Ve.return=we,Ve.sibling=We,we.child=Ve,Ve=We,We=we.child,rn=Me.child.memoizedState,rn===null?rn=fo(ke):(vn=rn.cachePool,vn!==null?(Ke=Ps?gi._currentValue:gi._currentValue2,vn=vn.parent!==Ke?{parent:Ke,pool:Ke}:vn):vn=Gs(),rn={baseLanes:rn.baseLanes|ke,cachePool:vn}),We.memoizedState=rn,We.childLanes=ho(Me,Ht,ke),we.memoizedState=dc,Ve):(hi(we),ke=Me.child,Me=ke.sibling,ke=Ks(ke,{mode:"visible",children:Ve.children}),ke.return=we,ke.sibling=null,Me!==null&&(Ht=we.deletions,Ht===null?(we.deletions=[Me],we.flags|=16):Ht.push(Me)),we.child=ke,we.memoizedState=null,ke)}function po(Me,we){return we=mo({mode:"visible",children:we},Me.mode),we.return=Me,Me.child=we}function mo(Me,we){return nu(Me,we,0,null)}function ji(Me,we,ke){return Ea(we,Me.child,null,ke),Me=po(we,we.pendingProps.children),Me.flags|=2,we.memoizedState=null,Me}function go(Me,we,ke){Me.lanes|=we;var Ve=Me.alternate;Ve!==null&&(Ve.lanes|=we),fn(Me.return,we,ke)}function ca(Me,we,ke,Ve,We){var Ke=Me.memoizedState;Ke===null?Me.memoizedState={isBackwards:we,rendering:null,renderingStartTime:0,last:Ve,tail:ke,tailMode:We}:(Ke.isBackwards=we,Ke.rendering=null,Ke.renderingStartTime=0,Ke.last=Ve,Ke.tail=ke,Ke.tailMode=We)}function ns(Me,we,ke){var Ve=we.pendingProps,We=Ve.revealOrder,Ke=Ve.tail;if(Ti(Me,we,Ve.children,ke),Ve=Mi.current,Ve&2)Ve=Ve&1|2,we.flags|=128;else{if(Me!==null&&Me.flags&128)e:for(Me=we.child;Me!==null;){if(Me.tag===13)Me.memoizedState!==null&&go(Me,ke,we);else if(Me.tag===19)go(Me,ke,we);else if(Me.child!==null){Me.child.return=Me,Me=Me.child;continue}if(Me===we)break e;for(;Me.sibling===null;){if(Me.return===null||Me.return===we)break e;Me=Me.return}Me.sibling.return=Me.return,Me=Me.sibling}Ve&=1}switch(Le(Mi,Ve),We){case"forwards":for(ke=we.child,We=null;ke!==null;)Me=ke.alternate,Me!==null&&ki(Me)===null&&(We=ke),ke=ke.sibling;ke=We,ke===null?(We=we.child,we.child=null):(We=ke.sibling,ke.sibling=null),ca(we,!1,We,ke,Ke);break;case"backwards":for(ke=null,We=we.child,we.child=null;We!==null;){if(Me=We.alternate,Me!==null&&ki(Me)===null){we.child=We;break}Me=We.sibling,We.sibling=ke,ke=We,We=Me}ca(we,!0,ke,null,Ke);break;case"together":ca(we,!1,null,null,void 0);break;default:we.memoizedState=null}return we.child}function rs(Me,we,ke){if(Me!==null&&(we.dependencies=Me.dependencies),na|=we.lanes,!(ke&we.childLanes))if(Me!==null){if(Zn(Me,we,ke,!1),(ke&we.childLanes)===0)return null}else return null;if(Me!==null&&we.child!==Me.child)throw Error(xe(153));if(we.child!==null){for(Me=we.child,ke=Ks(Me,Me.pendingProps),we.child=ke,ke.return=we;Me.sibling!==null;)Me=Me.sibling,ke=ke.sibling=Ks(Me,Me.pendingProps),ke.return=we;ke.sibling=null}return we.child}function zs(Me,we){return Me.lanes&we?!0:(Me=Me.dependencies,!!(Me!==null&&ar(Me)))}function $o(Me,we,ke){switch(we.tag){case 3:Yt(we,we.stateNode.containerInfo),ot(we,gi,Me.memoizedState.cache),bn();break;case 27:case 5:an(we);break;case 4:Yt(we,we.stateNode.containerInfo);break;case 10:ot(we,we.type,we.memoizedProps.value);break;case 13:var Ve=we.memoizedState;if(Ve!==null)return Ve.dehydrated!==null?(hi(we),we.flags|=128,null):ke&we.child.childLanes?Go(Me,we,ke):(hi(we),Me=rs(Me,we,ke),Me!==null?Me.sibling:null);hi(we);break;case 19:var We=(Me.flags&128)!==0;if(Ve=(ke&we.childLanes)!==0,Ve||(Zn(Me,we,ke,!1),Ve=(ke&we.childLanes)!==0),We){if(Ve)return ns(Me,we,ke);we.flags|=128}if(We=we.memoizedState,We!==null&&(We.rendering=null,We.tail=null,We.lastEffect=null),Le(Mi,Mi.current),Ve)break;return null;case 22:case 23:return we.lanes=0,ko(Me,we,ke);case 24:ot(we,gi,Me.memoizedState.cache)}return rs(Me,we,ke)}function ct(Me,we,ke){if(Me!==null)if(Me.memoizedProps!==we.pendingProps)Bi=!0;else{if(!zs(Me,ke)&&!(we.flags&128))return Bi=!1,$o(Me,we,ke);Bi=!!(Me.flags&131072)}else Bi=!1,Yr&&we.flags&1048576&&Wt(we,rl,we.index);switch(we.lanes=0,we.tag){case 16:e:{Me=we.pendingProps;var Ve=we.elementType,We=Ve._init;if(Ve=We(Ve._payload),we.type=Ve,typeof Ve=="function")Nl(Ve)?(Me=Bs(Ve,Me),we.tag=1,we=Vo(null,we,Ve,Me,ke)):(we.tag=0,we=uo(null,we,Ve,Me,ke));else{if(Ve!=null){if(We=Ve.$$typeof,We===zl){we.tag=11,we=co(null,we,Ve,Me,ke);break e}else if(We===jl){we.tag=14,we=Pa(null,we,Ve,Me,ke);break e}}throw we=ve(Ve)||Ve,Error(xe(306,we,""))}}return we;case 0:return uo(Me,we,we.type,we.pendingProps,ke);case 1:return Ve=we.type,We=Bs(Ve,we.pendingProps),Vo(Me,we,Ve,We,ke);case 3:e:{if(Yt(we,we.stateNode.containerInfo),Me===null)throw Error(xe(387));var Ke=we.pendingProps;We=we.memoizedState,Ve=We.element,In(Me,we),Er(we,Ke,null,ke);var Ht=we.memoizedState;if(Ke=Ht.cache,ot(we,gi,Ke),Ke!==We.cache&&Vn(we,[gi],ke,!0),hr(),Ke=Ht.element,ss&&We.isDehydrated)if(We={element:Ke,isDehydrated:!1,cache:Ht.cache},we.updateQueue.baseState=We,we.memoizedState=We,we.flags&256){we=zo(Me,we,Ke,ke);break e}else if(Ke!==Ve){Ve=Ft(Error(xe(424)),we),Mn(Ve),we=zo(Me,we,Ke,ke);break e}else for(ss&&(Ni=sd(we.stateNode.containerInfo),zi=we,Yr=!0,_s=null,Ss=!0),ke=Uu(we,null,Ke,ke),we.child=ke;ke;)ke.flags=ke.flags&-3|4096,ke=ke.sibling;else{if(bn(),Ke===Ve){we=rs(Me,we,ke);break e}Ti(Me,we,Ke,ke)}we=we.child}return we;case 26:if(as)return la(Me,we),Me===null?(ke=Ru(we.type,null,we.pendingProps,null))?we.memoizedState=ke:Yr||(we.stateNode=Ad(we.type,we.pendingProps,Zs.current,we)):we.memoizedState=Ru(we.type,Me.memoizedProps,we.pendingProps,Me.memoizedState),null;case 27:if(Oi)return an(we),Me===null&&Oi&&Yr&&(Ve=we.stateNode=Ou(we.type,we.pendingProps,Zs.current,Pi.current,!1),zi=we,Ss=!0,Ni=Tu(Ve)),Ve=we.pendingProps.children,Me!==null||Yr?Ti(Me,we,Ve,ke):we.child=Ea(we,null,Ve,ke),la(Me,we),we.child;case 5:return Me===null&&Yr&&(_d(we.type,we.pendingProps,Pi.current),(We=Ve=Ni)&&(Ve=od(Ve,we.type,we.pendingProps,Ss),Ve!==null?(we.stateNode=Ve,zi=we,Ni=Tu(Ve),Ss=!1,We=!0):We=!1),We||En(we)),an(we),We=we.type,Ke=we.pendingProps,Ht=Me!==null?Me.memoizedProps:null,Ve=Ke.children,Zo(We,Ke)?Ve=null:Ht!==null&&Zo(We,Ht)&&(we.flags|=32),we.memoizedState!==null&&(We=Vt(Me,we,Nn,null,null,ke),Ps?ya._currentValue=We:ya._currentValue2=We),la(Me,we),Ti(Me,we,Ve,ke),we.child;case 6:return Me===null&&Yr&&(Ed(we.pendingProps,Pi.current),(Me=ke=Ni)&&(ke=ld(ke,we.pendingProps,Ss),ke!==null?(we.stateNode=ke,zi=we,Ni=null,Me=!0):Me=!1),Me||En(we)),null;case 13:return Go(Me,we,ke);case 4:return Yt(we,we.stateNode.containerInfo),Ve=we.pendingProps,Me===null?we.child=Ea(we,null,Ve,ke):Ti(Me,we,Ve,ke),we.child;case 11:return co(Me,we,we.type,we.pendingProps,ke);case 7:return Ti(Me,we,we.pendingProps,ke),we.child;case 8:return Ti(Me,we,we.pendingProps.children,ke),we.child;case 12:return Ti(Me,we,we.pendingProps.children,ke),we.child;case 10:return Ve=we.pendingProps,ot(we,we.type,Ve.value),Ti(Me,we,Ve.children,ke),we.child;case 9:return We=we.type._context,Ve=we.pendingProps.children,Xn(we),We=nr(We),Ve=Ve(We),we.flags|=1,Ti(Me,we,Ve,ke),we.child;case 14:return Pa(Me,we,we.type,we.pendingProps,ke);case 15:return Fo(Me,we,we.type,we.pendingProps,ke);case 19:return ns(Me,we,ke);case 22:return ko(Me,we,ke);case 24:return Xn(we),Ve=nr(gi),Me===null?(We=bi(),We===null&&(We=oi,Ke=Vr(),We.pooledCache=Ke,Ke.refCount++,Ke!==null&&(We.pooledCacheLanes|=ke),We=Ke),we.memoizedState={parent:Ve,cache:We},zn(we),ot(we,gi,We)):(Me.lanes&ke&&(In(Me,we),Er(we,null,null,ke),hr()),We=Me.memoizedState,Ke=we.memoizedState,We.parent!==Ve?(We={parent:Ve,cache:Ve},we.memoizedState=We,we.lanes===0&&(we.memoizedState=we.updateQueue.baseState=We),ot(we,gi,Ve)):(Ve=Ke.cache,ot(we,gi,Ve),Ve!==We.cache&&Vn(we,[gi],ke,!0))),Ti(Me,we,we.pendingProps.children,ke),we.child;case 29:throw we.pendingProps}throw Error(xe(156,we.tag))}function ot(Me,we,ke){Ps?(Le(dl,we._currentValue),we._currentValue=ke):(Le(dl,we._currentValue2),we._currentValue2=ke)}function qt(Me){var we=dl.current;Ps?Me._currentValue=we:Me._currentValue2=we,Be(dl)}function fn(Me,we,ke){for(;Me!==null;){var Ve=Me.alternate;if((Me.childLanes&we)!==we?(Me.childLanes|=we,Ve!==null&&(Ve.childLanes|=we)):Ve!==null&&(Ve.childLanes&we)!==we&&(Ve.childLanes|=we),Me===ke)break;Me=Me.return}}function Vn(Me,we,ke,Ve){var We=Me.child;for(We!==null&&(We.return=Me);We!==null;){var Ke=We.dependencies;if(Ke!==null){var Ht=We.child;Ke=Ke.firstContext;e:for(;Ke!==null;){var rn=Ke;Ke=We;for(var vn=0;vn<we.length;vn++)if(rn.context===we[vn]){Ke.lanes|=ke,rn=Ke.alternate,rn!==null&&(rn.lanes|=ke),fn(Ke.return,ke,Me),Ve||(Ht=null);break e}Ke=rn.next}}else if(We.tag===18){if(Ht=We.return,Ht===null)throw Error(xe(341));Ht.lanes|=ke,Ke=Ht.alternate,Ke!==null&&(Ke.lanes|=ke),fn(Ht,ke,Me),Ht=null}else Ht=We.child;if(Ht!==null)Ht.return=We;else for(Ht=We;Ht!==null;){if(Ht===Me){Ht=null;break}if(We=Ht.sibling,We!==null){We.return=Ht.return,Ht=We;break}Ht=Ht.return}We=Ht}}function Zn(Me,we,ke,Ve){Me=null;for(var We=we,Ke=!1;We!==null;){if(!Ke){if(We.flags&524288)Ke=!0;else if(We.flags&262144)break}if(We.tag===10){var Ht=We.alternate;if(Ht===null)throw Error(xe(387));if(Ht=Ht.memoizedProps,Ht!==null){var rn=We.type;Qi(We.pendingProps.value,Ht.value)||(Me!==null?Me.push(rn):Me=[rn])}}else if(We===il.current){if(Ht=We.alternate,Ht===null)throw Error(xe(387));Ht.memoizedState.memoizedState!==We.memoizedState.memoizedState&&(Me!==null?Me.push(ya):Me=[ya])}We=We.return}Me!==null&&Vn(we,Me,ke,Ve),we.flags|=262144}function ar(Me){for(Me=Me.firstContext;Me!==null;){var we=Me.context;if(!Qi(Ps?we._currentValue:we._currentValue2,Me.memoizedValue))return!0;Me=Me.next}return!1}function Xn(Me){Ca=Me,Ns=null,Me=Me.dependencies,Me!==null&&(Me.firstContext=null)}function nr(Me){return br(Ca,Me)}function mr(Me,we){return Ca===null&&Xn(Me),br(Me,we)}function br(Me,we){var ke=Ps?we._currentValue:we._currentValue2;if(we={context:we,memoizedValue:ke,next:null},Ns===null){if(Me===null)throw Error(xe(308));Ns=we,Me.dependencies={lanes:0,firstContext:we},Me.flags|=524288}else Ns=Ns.next=we;return ke}function Vr(){return{controller:new Hd,data:new Map,refCount:0}}function ti(Me){Me.refCount--,Me.refCount===0&&Vd(zd,function(){Me.controller.abort()})}function bi(){var Me=Ta.current;return Me!==null?Me:oi.pooledCache}function Ai(Me,we){we===null?Le(Ta,Ta.current):Le(Ta,we.pool)}function Gs(){var Me=bi();return Me===null?null:{parent:Ps?gi._currentValue:gi._currentValue2,pool:Me}}function _i(Me){Me.flags|=4}function ua(Me,we){if(Me!==null&&Me.child===we.child)return!1;if(we.flags&16)return!0;for(Me=we.child;Me!==null;){if(Me.flags&13878||Me.subtreeFlags&13878)return!0;Me=Me.sibling}return!1}function fa(Me,we,ke,Ve){if(Li)for(ke=we.child;ke!==null;){if(ke.tag===5||ke.tag===6)Kl(Me,ke.stateNode);else if(!(ke.tag===4||Oi&&ke.tag===27)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===we)break;for(;ke.sibling===null;){if(ke.return===null||ke.return===we)return;ke=ke.return}ke.sibling.return=ke.return,ke=ke.sibling}else if(Js)for(var We=we.child;We!==null;){if(We.tag===5){var Ke=We.stateNode;ke&&Ve&&(Ke=Au(Ke,We.type,We.memoizedProps)),Kl(Me,Ke)}else if(We.tag===6)Ke=We.stateNode,ke&&Ve&&(Ke=Su(Ke,We.memoizedProps)),Kl(Me,Ke);else if(We.tag!==4){if(We.tag===22&&We.memoizedState!==null)Ke=We.child,Ke!==null&&(Ke.return=We),fa(Me,We,!0,!0);else if(We.child!==null){We.child.return=We,We=We.child;continue}}if(We===we)break;for(;We.sibling===null;){if(We.return===null||We.return===we)return;We=We.return}We.sibling.return=We.return,We=We.sibling}}function Wi(Me,we,ke,Ve){if(Js)for(var We=we.child;We!==null;){if(We.tag===5){var Ke=We.stateNode;ke&&Ve&&(Ke=Au(Ke,We.type,We.memoizedProps)),Eu(Me,Ke)}else if(We.tag===6)Ke=We.stateNode,ke&&Ve&&(Ke=Su(Ke,We.memoizedProps)),Eu(Me,Ke);else if(We.tag!==4){if(We.tag===22&&We.memoizedState!==null)Ke=We.child,Ke!==null&&(Ke.return=We),Wi(Me,We,!(We.memoizedProps!==null&&We.memoizedProps.mode==="manual"),!0);else if(We.child!==null){We.child.return=We,We=We.child;continue}}if(We===we)break;for(;We.sibling===null;){if(We.return===null||We.return===we)return;We=We.return}We.sibling.return=We.return,We=We.sibling}}function jo(Me,we){if(Js&&ua(Me,we)){Me=we.stateNode;var ke=Me.containerInfo,Ve=_u();Wi(Ve,we,!1,!1),Me.pendingChildren=Ve,_i(we),Qf(ke,Ve)}}function La(Me,we,ke,Ve){if(Li)Me.memoizedProps!==Ve&&_i(we);else if(Js){var We=Me.stateNode,Ke=Me.memoizedProps;if((Me=ua(Me,we))||Ke!==Ve){var Ht=Pi.current;Ke=Zf(We,ke,Ke,Ve,!Me,null),Ke===We?we.stateNode=We:(pu(Ke,ke,Ve,Ht)&&_i(we),we.stateNode=Ke,Me?fa(Ke,we,!1,!1):_i(we))}else we.stateNode=We}}function Oa(Me,we,ke){if(Tf(we,ke)){if(Me.flags|=16777216,!xu(we,ke))if(jc())Me.flags|=8192;else throw Qa=ol,cc}else Me.flags&=-16777217}function Na(Me,we){if(Cd(we)){if(Me.flags|=16777216,!Lu(we))if(jc())Me.flags|=8192;else throw Qa=ol,cc}else Me.flags&=-16777217}function da(Me,we){we!==null&&(Me.flags|=4),Me.flags&16384&&(we=Me.tag!==22?je():536870912,Me.lanes|=we,ao|=we)}function xo(Me,we){if(!Yr)switch(Me.tailMode){case"hidden":we=Me.tail;for(var ke=null;we!==null;)we.alternate!==null&&(ke=we),we=we.sibling;ke===null?Me.tail=null:ke.sibling=null;break;case"collapsed":ke=Me.tail;for(var Ve=null;ke!==null;)ke.alternate!==null&&(Ve=ke),ke=ke.sibling;Ve===null?we||Me.tail===null?Me.tail=null:Me.tail.sibling=null:Ve.sibling=null}}function pi(Me){var we=Me.alternate!==null&&Me.alternate.child===Me.child,ke=0,Ve=0;if(we)for(var We=Me.child;We!==null;)ke|=We.lanes|We.childLanes,Ve|=We.subtreeFlags&31457280,Ve|=We.flags&31457280,We.return=Me,We=We.sibling;else for(We=Me.child;We!==null;)ke|=We.lanes|We.childLanes,Ve|=We.subtreeFlags,Ve|=We.flags,We.return=Me,We=We.sibling;return Me.subtreeFlags|=Ve,Me.childLanes=ke,we}function Wu(Me,we,ke){var Ve=we.pendingProps;switch(Pt(we),we.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pi(we),null;case 1:return pi(we),null;case 3:return ke=we.stateNode,Ve=null,Me!==null&&(Ve=Me.memoizedState.cache),we.memoizedState.cache!==Ve&&(we.flags|=2048),qt(gi),Gt(),ke.pendingContext&&(ke.context=ke.pendingContext,ke.pendingContext=null),(Me===null||Me.child===null)&&(kn(we)?_i(we):Me===null||Me.memoizedState.isDehydrated&&!(we.flags&256)||(we.flags|=1024,_s!==null&&(Dl(_s),_s=null))),jo(Me,we),pi(we),null;case 26:if(as){ke=we.type;var We=we.memoizedState;return Me===null?(_i(we),We!==null?(pi(we),Na(we,We)):(pi(we),Oa(we,ke,Ve))):We?We!==Me.memoizedState?(_i(we),pi(we),Na(we,We)):(pi(we),we.flags&=-16777217):(Li?Me.memoizedProps!==Ve&&_i(we):La(Me,we,ke,Ve),pi(we),Oa(we,ke,Ve)),null}case 27:if(Oi){if(pn(we),ke=Zs.current,We=we.type,Me!==null&&we.stateNode!=null)Li?Me.memoizedProps!==Ve&&_i(we):La(Me,we,We,Ve);else{if(!Ve){if(we.stateNode===null)throw Error(xe(166));return pi(we),null}Me=Pi.current,kn(we)?$n(we,Me):(Me=Ou(We,Ve,ke,Me,!0),we.stateNode=Me,_i(we))}return pi(we),null}case 5:if(pn(we),ke=we.type,Me!==null&&we.stateNode!=null)La(Me,we,ke,Ve);else{if(!Ve){if(we.stateNode===null)throw Error(xe(166));return pi(we),null}Me=Pi.current,kn(we)?$n(we,Me):(We=vf(ke,Ve,Zs.current,Me,we),fa(We,we,!1,!1),we.stateNode=We,pu(We,ke,Ve,Me)&&_i(we))}return pi(we),Oa(we,we.type,we.pendingProps),null;case 6:if(Me&&we.stateNode!=null)ke=Me.memoizedProps,Li?ke!==Ve&&_i(we):Js&&(ke!==Ve?(we.stateNode=mu(Ve,Zs.current,Pi.current,we),_i(we)):we.stateNode=Me.stateNode);else{if(typeof Ve!="string"&&we.stateNode===null)throw Error(xe(166));if(Me=Zs.current,ke=Pi.current,kn(we)){if(!ss)throw Error(xe(176));if(Me=we.stateNode,ke=we.memoizedProps,Ve=null,We=zi,We!==null)switch(We.tag){case 27:case 5:Ve=We.memoizedProps}dd(Me,ke,we,Ve)||En(we)}else we.stateNode=mu(Ve,Me,ke,we)}return pi(we),null;case 13:if(Ve=we.memoizedState,Me===null||Me.memoizedState!==null&&Me.memoizedState.dehydrated!==null){if(We=kn(we),Ve!==null&&Ve.dehydrated!==null){if(Me===null){if(!We)throw Error(xe(318));if(!ss)throw Error(xe(344));if(We=we.memoizedState,We=We!==null?We.dehydrated:null,!We)throw Error(xe(317));hd(We,we)}else bn(),!(we.flags&128)&&(we.memoizedState=null),we.flags|=4;pi(we),We=!1}else _s!==null&&(Dl(_s),_s=null),We=!0;if(!We)return we.flags&256?(Ar(we),we):(Ar(we),null)}if(Ar(we),we.flags&128)return we.lanes=ke,we;if(ke=Ve!==null,Me=Me!==null&&Me.memoizedState!==null,ke){Ve=we.child,We=null,Ve.alternate!==null&&Ve.alternate.memoizedState!==null&&Ve.alternate.memoizedState.cachePool!==null&&(We=Ve.alternate.memoizedState.cachePool.pool);var Ke=null;Ve.memoizedState!==null&&Ve.memoizedState.cachePool!==null&&(Ke=Ve.memoizedState.cachePool.pool),Ke!==We&&(Ve.flags|=2048)}return ke!==Me&&ke&&(we.child.flags|=8192),da(we,we.updateQueue),pi(we),null;case 4:return Gt(),jo(Me,we),Me===null&&bf(we.stateNode.containerInfo),pi(we),null;case 10:return qt(we.type),pi(we),null;case 19:if(Be(Mi),We=we.memoizedState,We===null)return pi(we),null;if(Ve=(we.flags&128)!==0,Ke=We.rendering,Ke===null)if(Ve)xo(We,!1);else{if(yi!==0||Me!==null&&Me.flags&128)for(Me=we.child;Me!==null;){if(Ke=ki(Me),Ke!==null){for(we.flags|=128,xo(We,!1),Me=Ke.updateQueue,we.updateQueue=Me,da(we,Me),we.subtreeFlags=0,Me=ke,ke=we.child;ke!==null;)tu(ke,Me),ke=ke.sibling;return Le(Mi,Mi.current&1|2),we.child}Me=Me.sibling}We.tail!==null&&vs()>Io&&(we.flags|=128,Ve=!0,xo(We,!1),we.lanes=4194304)}else{if(!Ve)if(Me=ki(Ke),Me!==null){if(we.flags|=128,Ve=!0,Me=Me.updateQueue,we.updateQueue=Me,da(we,Me),xo(We,!0),We.tail===null&&We.tailMode==="hidden"&&!Ke.alternate&&!Yr)return pi(we),null}else 2*vs()-We.renderingStartTime>Io&&ke!==536870912&&(we.flags|=128,Ve=!0,xo(We,!1),we.lanes=4194304);We.isBackwards?(Ke.sibling=we.child,we.child=Ke):(Me=We.last,Me!==null?Me.sibling=Ke:we.child=Ke,We.last=Ke)}return We.tail!==null?(we=We.tail,We.rendering=we,We.tail=we.sibling,We.renderingStartTime=vs(),we.sibling=null,Me=Mi.current,Le(Mi,Ve?Me&1|2:Me&1),we):(pi(we),null);case 22:case 23:return Ar(we),ai(),Ve=we.memoizedState!==null,Me!==null?Me.memoizedState!==null!==Ve&&(we.flags|=8192):Ve&&(we.flags|=8192),Ve?ke&536870912&&!(we.flags&128)&&(pi(we),we.subtreeFlags&6&&(we.flags|=8192)):pi(we),ke=we.updateQueue,ke!==null&&da(we,ke.retryQueue),ke=null,Me!==null&&Me.memoizedState!==null&&Me.memoizedState.cachePool!==null&&(ke=Me.memoizedState.cachePool.pool),Ve=null,we.memoizedState!==null&&we.memoizedState.cachePool!==null&&(Ve=we.memoizedState.cachePool.pool),Ve!==ke&&(we.flags|=2048),Me!==null&&Be(Ta),null;case 24:return ke=null,Me!==null&&(ke=Me.memoizedState.cache),we.memoizedState.cache!==ke&&(we.flags|=2048),qt(gi),pi(we),null;case 25:return null}throw Error(xe(156,we.tag))}function Xu(Me,we){switch(Pt(we),we.tag){case 1:return Me=we.flags,Me&65536?(we.flags=Me&-65537|128,we):null;case 3:return qt(gi),Gt(),Me=we.flags,Me&65536&&!(Me&128)?(we.flags=Me&-65537|128,we):null;case 26:case 27:case 5:return pn(we),null;case 13:if(Ar(we),Me=we.memoizedState,Me!==null&&Me.dehydrated!==null){if(we.alternate===null)throw Error(xe(340));bn()}return Me=we.flags,Me&65536?(we.flags=Me&-65537|128,we):null;case 19:return Be(Mi),null;case 4:return Gt(),null;case 10:return qt(we.type),null;case 22:case 23:return Ar(we),ai(),Me!==null&&Be(Ta),Me=we.flags,Me&65536?(we.flags=Me&-65537|128,we):null;case 24:return qt(gi),null;case 25:return null;default:return null}}function bc(Me,we){switch(Pt(we),we.tag){case 3:qt(gi),Gt();break;case 26:case 27:case 5:pn(we);break;case 4:Gt();break;case 13:Ar(we);break;case 19:Be(Mi);break;case 10:qt(we.type);break;case 22:case 23:Ar(we),ai(),Me!==null&&Be(Ta);break;case 24:qt(gi)}}function yo(Me,we){try{var ke=we.updateQueue,Ve=ke!==null?ke.lastEffect:null;if(Ve!==null){var We=Ve.next;ke=We;do{if((ke.tag&Me)===Me){Ve=void 0;var Ke=ke.create,Ht=ke.inst;Ve=Ke(),Ht.destroy=Ve}ke=ke.next}while(ke!==We)}}catch(rn){ni(we,we.return,rn)}}function $s(Me,we,ke){try{var Ve=we.updateQueue,We=Ve!==null?Ve.lastEffect:null;if(We!==null){var Ke=We.next;Ve=Ke;do{if((Ve.tag&Me)===Me){var Ht=Ve.inst,rn=Ht.destroy;if(rn!==void 0){Ht.destroy=void 0,We=we;var vn=ke;try{rn()}catch(jn){ni(We,vn,jn)}}}Ve=Ve.next}while(Ve!==Ke)}}catch(jn){ni(we,we.return,jn)}}function Ac(Me){var we=Me.updateQueue;if(we!==null){var ke=Me.stateNode;try{Sn(we,ke)}catch(Ve){ni(Me,Me.return,Ve)}}}function Sc(Me,we,ke){ke.props=Bs(Me.type,Me.memoizedProps),ke.state=Me.memoizedState;try{ke.componentWillUnmount()}catch(Ve){ni(Me,we,Ve)}}function ha(Me,we){try{var ke=Me.ref;if(ke!==null){var Ve=Me.stateNode;switch(Me.tag){case 26:case 27:case 5:var We=Eo(Ve);break;default:We=Ve}typeof ke=="function"?Me.refCleanup=ke(We):ke.current=We}}catch(Ke){ni(Me,we,Ke)}}function Xi(Me,we){var ke=Me.ref,Ve=Me.refCleanup;if(ke!==null)if(typeof Ve=="function")try{Ve()}catch(We){ni(Me,we,We)}finally{Me.refCleanup=null,Me=Me.alternate,Me!=null&&(Me.refCleanup=null)}else if(typeof ke=="function")try{ke(null)}catch(We){ni(Me,we,We)}else ke.current=null}function Cc(Me){var we=Me.type,ke=Me.memoizedProps,Ve=Me.stateNode;try{Vf(Ve,we,ke,Me)}catch(We){ni(Me,Me.return,We)}}function Tc(Me,we,ke){try{zf(Me.stateNode,Me.type,ke,we,Me)}catch(Ve){ni(Me,Me.return,Ve)}}function Mc(Me){return Me.tag===5||Me.tag===3||(as?Me.tag===26:!1)||(Oi?Me.tag===27:!1)||Me.tag===4}function El(Me){e:for(;;){for(;Me.sibling===null;){if(Me.return===null||Mc(Me.return))return null;Me=Me.return}for(Me.sibling.return=Me.return,Me=Me.sibling;Me.tag!==5&&Me.tag!==6&&(!Oi||Me.tag!==27)&&Me.tag!==18;){if(Me.flags&2||Me.child===null||Me.tag===4)continue e;Me.child.return=Me,Me=Me.child}if(!(Me.flags&2))return Me.stateNode}}function bl(Me,we,ke){var Ve=Me.tag;if(Ve===5||Ve===6)Me=Me.stateNode,we?$f(ke,Me,we):Uf(ke,Me);else if(!(Ve===4||Oi&&Ve===27)&&(Me=Me.child,Me!==null))for(bl(Me,we,ke),Me=Me.sibling;Me!==null;)bl(Me,we,ke),Me=Me.sibling}function Wo(Me,we,ke){var Ve=Me.tag;if(Ve===5||Ve===6)Me=Me.stateNode,we?Gf(ke,Me,we):kf(ke,Me);else if(!(Ve===4||Oi&&Ve===27)&&(Me=Me.child,Me!==null))for(Wo(Me,we,ke),Me=Me.sibling;Me!==null;)Wo(Me,we,ke),Me=Me.sibling}function wc(Me,we,ke){Me=Me.containerInfo;try{bu(Me,ke)}catch(Ve){ni(we,we.return,Ve)}}function Ku(Me,we){for(xf(Me.containerInfo),Di=we;Di!==null;)if(Me=Di,we=Me.child,(Me.subtreeFlags&1028)!==0&&we!==null)we.return=Me,Di=we;else for(;Di!==null;){Me=Di;var ke=Me.alternate;switch(we=Me.flags,Me.tag){case 0:break;case 11:case 15:break;case 1:if(we&1024&&ke!==null){we=void 0;var Ve=Me,We=ke.memoizedProps;ke=ke.memoizedState;var Ke=Ve.stateNode;try{var Ht=Bs(Ve.type,We,Ve.elementType===Ve.type);we=Ke.getSnapshotBeforeUpdate(Ht,ke),Ke.__reactInternalSnapshotBeforeUpdate=we}catch(rn){ni(Ve,Ve.return,rn)}}break;case 3:we&1024&&Li&&Jf(Me.stateNode.containerInfo);break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(we&1024)throw Error(xe(163))}if(we=Me.sibling,we!==null){we.return=Me.return,Di=we;break}Di=Me.return}return Ht=$u,$u=!1,Ht}function Rc(Me,we,ke){var Ve=ke.flags;switch(ke.tag){case 0:case 11:case 15:Ds(Me,ke),Ve&4&&yo(5,ke);break;case 1:if(Ds(Me,ke),Ve&4)if(Me=ke.stateNode,we===null)try{Me.componentDidMount()}catch(rn){ni(ke,ke.return,rn)}else{var We=Bs(ke.type,we.memoizedProps);we=we.memoizedState;try{Me.componentDidUpdate(We,we,Me.__reactInternalSnapshotBeforeUpdate)}catch(rn){ni(ke,ke.return,rn)}}Ve&64&&Ac(ke),Ve&512&&ha(ke,ke.return);break;case 3:if(Ds(Me,ke),Ve&64&&(Ve=ke.updateQueue,Ve!==null)){if(Me=null,ke.child!==null)switch(ke.child.tag){case 27:case 5:Me=Eo(ke.child.stateNode);break;case 1:Me=ke.child.stateNode}try{Sn(Ve,Me)}catch(rn){ni(ke,ke.return,rn)}}break;case 26:if(as){Ds(Me,ke),Ve&512&&ha(ke,ke.return);break}case 27:case 5:Ds(Me,ke),we===null&&Ve&4&&Cc(ke),Ve&512&&ha(ke,ke.return);break;case 12:Ds(Me,ke);break;case 13:Ds(Me,ke),Ve&4&&Dc(Me,ke);break;case 22:if(We=ke.memoizedState!==null||Fs,!We){we=we!==null&&we.memoizedState!==null||xi;var Ke=Fs,Ht=xi;Fs=We,(xi=we)&&!Ht?Ws(Me,ke,(ke.subtreeFlags&8772)!==0):Ds(Me,ke),Fs=Ke,xi=Ht}Ve&512&&(ke.memoizedProps.mode==="manual"?ha(ke,ke.return):Xi(ke,ke.return));break;default:Ds(Me,ke)}}function Bc(Me){var we=Me.alternate;we!==null&&(Me.alternate=null,Bc(we)),Me.child=null,Me.deletions=null,Me.sibling=null,Me.tag===5&&(we=Me.stateNode,we!==null&&Cf(we)),Me.stateNode=null,Me.return=null,Me.dependencies=null,Me.memoizedProps=null,Me.memoizedState=null,Me.pendingProps=null,Me.stateNode=null,Me.updateQueue=null}function ys(Me,we,ke){for(ke=ke.child;ke!==null;)Al(Me,we,ke),ke=ke.sibling}function Al(Me,we,ke){if(Zi&&typeof Zi.onCommitFiberUnmount=="function")try{Zi.onCommitFiberUnmount(So,ke)}catch{}switch(ke.tag){case 26:if(as){xi||Xi(ke,we),ys(Me,we,ke),ke.memoizedState?Du(ke.memoizedState):ke.stateNode&&Pu(ke.stateNode);break}case 27:if(Oi){xi||Xi(ke,we);var Ve=Ci,We=es;Ci=ke.stateNode,ys(Me,we,ke),Rd(ke.stateNode),Ci=Ve,es=We;break}case 5:xi||Xi(ke,we);case 6:if(Li){if(Ve=Ci,We=es,Ci=null,ys(Me,we,ke),Ci=Ve,es=We,Ci!==null)if(es)try{Wf(Ci,ke.stateNode)}catch(Ke){ni(ke,we,Ke)}else try{jf(Ci,ke.stateNode)}catch(Ke){ni(ke,we,Ke)}}else ys(Me,we,ke);break;case 18:Li&&Ci!==null&&(es?vd(Ci,ke.stateNode):yd(Ci,ke.stateNode));break;case 4:Li?(Ve=Ci,We=es,Ci=ke.stateNode.containerInfo,es=!0,ys(Me,we,ke),Ci=Ve,es=We):(Js&&wc(ke.stateNode,ke,_u()),ys(Me,we,ke));break;case 0:case 11:case 14:case 15:xi||$s(2,ke,we),xi||$s(4,ke,we),ys(Me,we,ke);break;case 1:xi||(Xi(ke,we),Ve=ke.stateNode,typeof Ve.componentWillUnmount=="function"&&Sc(ke,we,Ve)),ys(Me,we,ke);break;case 21:ys(Me,we,ke);break;case 22:xi||Xi(ke,we),xi=(Ve=xi)||ke.memoizedState!==null,ys(Me,we,ke),xi=Ve;break;default:ys(Me,we,ke)}}function Dc(Me,we){if(ss&&we.memoizedState===null&&(Me=we.alternate,Me!==null&&(Me=Me.memoizedState,Me!==null&&(Me=Me.dehydrated,Me!==null))))try{xd(Me)}catch(ke){ni(we,we.return,ke)}}function qu(Me){switch(Me.tag){case 13:case 19:var we=Me.stateNode;return we===null&&(we=Me.stateNode=new Gu),we;case 22:return Me=Me.stateNode,we=Me._retryCache,we===null&&(we=Me._retryCache=new Gu),we;default:throw Error(xe(435,Me.tag))}}function Sl(Me,we){var ke=qu(Me);we.forEach(function(Ve){var We=rf.bind(null,Me,Ve);ke.has(Ve)||(ke.add(Ve),Ve.then(We,We))})}function Gi(Me,we){var ke=we.deletions;if(ke!==null)for(var Ve=0;Ve<ke.length;Ve++){var We=ke[Ve],Ke=Me,Ht=we;if(Li){var rn=Ht;e:for(;rn!==null;){switch(rn.tag){case 27:case 5:Ci=rn.stateNode,es=!1;break e;case 3:Ci=rn.stateNode.containerInfo,es=!0;break e;case 4:Ci=rn.stateNode.containerInfo,es=!0;break e}rn=rn.return}if(Ci===null)throw Error(xe(160));Al(Ke,Ht,We),Ci=null,es=!1}else Al(Ke,Ht,We);Ke=We.alternate,Ke!==null&&(Ke.return=null),We.return=null}if(we.subtreeFlags&13878)for(we=we.child;we!==null;)Ic(we,Me),we=we.sibling}function Ic(Me,we){var ke=Me.alternate,Ve=Me.flags;switch(Me.tag){case 0:case 11:case 14:case 15:Gi(we,Me),Ki(Me),Ve&4&&($s(3,Me,Me.return),yo(3,Me),$s(5,Me,Me.return));break;case 1:Gi(we,Me),Ki(Me),Ve&512&&(xi||ke===null||Xi(ke,ke.return)),Ve&64&&Fs&&(Me=Me.updateQueue,Me!==null&&(Ve=Me.callbacks,Ve!==null&&(ke=Me.shared.hiddenCallbacks,Me.shared.hiddenCallbacks=ke===null?Ve:ke.concat(Ve))));break;case 26:if(as){var We=Es;Gi(we,Me),Ki(Me),Ve&512&&(xi||ke===null||Xi(ke,ke.return)),Ve&4&&(Ve=ke!==null?ke.memoizedState:null,we=Me.memoizedState,ke===null?we===null?Me.stateNode===null?Me.stateNode=bd(We,Me.type,Me.memoizedProps,Me):Iu(We,Me.type,Me.stateNode):Me.stateNode=Bu(We,we,Me.memoizedProps):Ve!==we?(Ve===null?ke.stateNode!==null&&Pu(ke.stateNode):Du(Ve),we===null?Iu(We,Me.type,Me.stateNode):Bu(We,we,Me.memoizedProps)):we===null&&Me.stateNode!==null&&Tc(Me,Me.memoizedProps,ke.memoizedProps));break}case 27:if(Oi&&Ve&4&&Me.alternate===null){We=Me.stateNode;var Ke=Me.memoizedProps;try{Md(We),wd(Me.type,Ke,We,Me)}catch(or){ni(Me,Me.return,or)}}case 5:if(Gi(we,Me),Ki(Me),Ve&512&&(xi||ke===null||Xi(ke,ke.return)),Li){if(Me.flags&32){we=Me.stateNode;try{vu(we)}catch(or){ni(Me,Me.return,or)}}Ve&4&&Me.stateNode!=null&&(we=Me.memoizedProps,Tc(Me,we,ke!==null?ke.memoizedProps:we)),Ve&1024&&(hc=!0)}break;case 6:if(Gi(we,Me),Ki(Me),Ve&4&&Li){if(Me.stateNode===null)throw Error(xe(162));Ve=Me.memoizedProps,ke=ke!==null?ke.memoizedProps:Ve,we=Me.stateNode;try{Hf(we,ke,Ve)}catch(or){ni(Me,Me.return,or)}}break;case 3:if(as?(Sd(),We=Es,Es=Zl(we.containerInfo),Gi(we,Me),Es=We):Gi(we,Me),Ki(Me),Ve&4){if(Li&&ss&&ke!==null&&ke.memoizedState.isDehydrated)try{gd(we.containerInfo)}catch(or){ni(Me,Me.return,or)}if(Js){Ve=we.containerInfo,ke=we.pendingChildren;try{bu(Ve,ke)}catch(or){ni(Me,Me.return,or)}}}hc&&(hc=!1,Pc(Me));break;case 4:as?(ke=Es,Es=Zl(Me.stateNode.containerInfo),Gi(we,Me),Ki(Me),Es=ke):(Gi(we,Me),Ki(Me)),Ve&4&&Js&&wc(Me.stateNode,Me,Me.stateNode.pendingChildren);break;case 12:Gi(we,Me),Ki(Me);break;case 13:Gi(we,Me),Ki(Me),Me.child.flags&8192&&Me.memoizedState!==null!=(ke!==null&&ke.memoizedState!==null)&&(xc=vs()),Ve&4&&(Ve=Me.updateQueue,Ve!==null&&(Me.updateQueue=null,Sl(Me,Ve)));break;case 22:Ve&512&&(xi||ke===null||Xi(ke,ke.return)),We=Me.memoizedState!==null;var Ht=ke!==null&&ke.memoizedState!==null,rn=Fs,vn=xi;if(Fs=rn||We,xi=vn||Ht,Gi(we,Me),xi=vn,Fs=rn,Ki(Me),we=Me.stateNode,we._current=Me,we._visibility&=-3,we._visibility|=we._pendingVisibility&2,Ve&8192&&(we._visibility=We?we._visibility&-2:we._visibility|1,We&&(we=Fs||xi,ke===null||Ht||we||Fa(Me)),Li&&(Me.memoizedProps===null||Me.memoizedProps.mode!=="manual"))){e:if(ke=null,Li)for(we=Me;;){if(we.tag===5||as&&we.tag===26||Oi&&we.tag===27){if(ke===null){Ht=ke=we;try{Ke=Ht.stateNode,We?Xf(Ke):qf(Ht.stateNode,Ht.memoizedProps)}catch(or){ni(Ht,Ht.return,or)}}}else if(we.tag===6){if(ke===null){Ht=we;try{var jn=Ht.stateNode;We?Kf(jn):Yf(jn,Ht.memoizedProps)}catch(or){ni(Ht,Ht.return,or)}}}else if((we.tag!==22&&we.tag!==23||we.memoizedState===null||we===Me)&&we.child!==null){we.child.return=we,we=we.child;continue}if(we===Me)break e;for(;we.sibling===null;){if(we.return===null||we.return===Me)break e;ke===we&&(ke=null),we=we.return}ke===we&&(ke=null),we.sibling.return=we.return,we=we.sibling}}Ve&4&&(Ve=Me.updateQueue,Ve!==null&&(ke=Ve.retryQueue,ke!==null&&(Ve.retryQueue=null,Sl(Me,ke))));break;case 19:Gi(we,Me),Ki(Me),Ve&4&&(Ve=Me.updateQueue,Ve!==null&&(Me.updateQueue=null,Sl(Me,Ve)));break;case 21:break;default:Gi(we,Me),Ki(Me)}}function Ki(Me){var we=Me.flags;if(we&2){try{if(Li&&(!Oi||Me.tag!==27)){e:{for(var ke=Me.return;ke!==null;){if(Mc(ke)){var Ve=ke;break e}ke=ke.return}throw Error(xe(160))}switch(Ve.tag){case 27:if(Oi){var We=Ve.stateNode,Ke=El(Me);Wo(Me,Ke,We);break}case 5:var Ht=Ve.stateNode;Ve.flags&32&&(vu(Ht),Ve.flags&=-33);var rn=El(Me);Wo(Me,rn,Ht);break;case 3:case 4:var vn=Ve.stateNode.containerInfo,jn=El(Me);bl(Me,jn,vn);break;default:throw Error(xe(161))}}}catch(or){ni(Me,Me.return,or)}Me.flags&=-3}we&4096&&(Me.flags&=-4097)}function Pc(Me){if(Me.subtreeFlags&1024)for(Me=Me.child;Me!==null;){var we=Me;Pc(we),we.tag===5&&we.flags&1024&&Rf(we.stateNode),Me=Me.sibling}}function Ds(Me,we){if(we.subtreeFlags&8772)for(we=we.child;we!==null;)Rc(Me,we.alternate,we),we=we.sibling}function Fa(Me){for(Me=Me.child;Me!==null;){var we=Me;switch(we.tag){case 0:case 11:case 14:case 15:$s(4,we,we.return),Fa(we);break;case 1:Xi(we,we.return);var ke=we.stateNode;typeof ke.componentWillUnmount=="function"&&Sc(we,we.return,ke),Fa(we);break;case 26:case 27:case 5:Xi(we,we.return),Fa(we);break;case 22:Xi(we,we.return),we.memoizedState===null&&Fa(we);break;default:Fa(we)}Me=Me.sibling}}function Ws(Me,we,ke){for(ke=ke&&(we.subtreeFlags&8772)!==0,we=we.child;we!==null;){var Ve=we.alternate,We=Me,Ke=we,Ht=Ke.flags;switch(Ke.tag){case 0:case 11:case 15:Ws(We,Ke,ke),yo(4,Ke);break;case 1:if(Ws(We,Ke,ke),Ve=Ke,We=Ve.stateNode,typeof We.componentDidMount=="function")try{We.componentDidMount()}catch(jn){ni(Ve,Ve.return,jn)}if(Ve=Ke,We=Ve.updateQueue,We!==null){var rn=Ve.stateNode;try{var vn=We.shared.hiddenCallbacks;if(vn!==null)for(We.shared.hiddenCallbacks=null,We=0;We<vn.length;We++)un(vn[We],rn)}catch(jn){ni(Ve,Ve.return,jn)}}ke&&Ht&64&&Ac(Ke),ha(Ke,Ke.return);break;case 26:case 27:case 5:Ws(We,Ke,ke),ke&&Ve===null&&Ht&4&&Cc(Ke),ha(Ke,Ke.return);break;case 12:Ws(We,Ke,ke);break;case 13:Ws(We,Ke,ke),ke&&Ht&4&&Dc(We,Ke);break;case 22:Ke.memoizedState===null&&Ws(We,Ke,ke),ha(Ke,Ke.return);break;default:Ws(We,Ke,ke)}we=we.sibling}}function Cl(Me,we){var ke=null;Me!==null&&Me.memoizedState!==null&&Me.memoizedState.cachePool!==null&&(ke=Me.memoizedState.cachePool.pool),Me=null,we.memoizedState!==null&&we.memoizedState.cachePool!==null&&(Me=we.memoizedState.cachePool.pool),Me!==ke&&(Me!=null&&Me.refCount++,ke!=null&&ti(ke))}function Tl(Me,we){Me=null,we.alternate!==null&&(Me=we.alternate.memoizedState.cache),we=we.memoizedState.cache,we!==Me&&(we.refCount++,Me!=null&&ti(Me))}function Xs(Me,we,ke,Ve){if(we.subtreeFlags&10256)for(we=we.child;we!==null;)Lc(Me,we,ke,Ve),we=we.sibling}function Lc(Me,we,ke,Ve){var We=we.flags;switch(we.tag){case 0:case 11:case 15:Xs(Me,we,ke,Ve),We&2048&&yo(9,we);break;case 3:Xs(Me,we,ke,Ve),We&2048&&(Me=null,we.alternate!==null&&(Me=we.alternate.memoizedState.cache),we=we.memoizedState.cache,we!==Me&&(we.refCount++,Me!=null&&ti(Me)));break;case 12:if(We&2048){Xs(Me,we,ke,Ve),Me=we.stateNode;try{var Ke=we.memoizedProps,Ht=Ke.id,rn=Ke.onPostCommit;typeof rn=="function"&&rn(Ht,we.alternate===null?"mount":"update",Me.passiveEffectDuration,-0)}catch(vn){ni(we,we.return,vn)}}else Xs(Me,we,ke,Ve);break;case 23:break;case 22:Ke=we.stateNode,we.memoizedState!==null?Ke._visibility&4?Xs(Me,we,ke,Ve):vo(Me,we):Ke._visibility&4?Xs(Me,we,ke,Ve):(Ke._visibility|=4,ka(Me,we,ke,Ve,(we.subtreeFlags&10256)!==0)),We&2048&&Cl(we.alternate,we);break;case 24:Xs(Me,we,ke,Ve),We&2048&&Tl(we.alternate,we);break;default:Xs(Me,we,ke,Ve)}}function ka(Me,we,ke,Ve,We){for(We=We&&(we.subtreeFlags&10256)!==0,we=we.child;we!==null;){var Ke=Me,Ht=we,rn=ke,vn=Ve,jn=Ht.flags;switch(Ht.tag){case 0:case 11:case 15:ka(Ke,Ht,rn,vn,We),yo(8,Ht);break;case 23:break;case 22:var or=Ht.stateNode;Ht.memoizedState!==null?or._visibility&4?ka(Ke,Ht,rn,vn,We):vo(Ke,Ht):(or._visibility|=4,ka(Ke,Ht,rn,vn,We)),We&&jn&2048&&Cl(Ht.alternate,Ht);break;case 24:ka(Ke,Ht,rn,vn,We),We&&jn&2048&&Tl(Ht.alternate,Ht);break;default:ka(Ke,Ht,rn,vn,We)}we=we.sibling}}function vo(Me,we){if(we.subtreeFlags&10256)for(we=we.child;we!==null;){var ke=Me,Ve=we,We=Ve.flags;switch(Ve.tag){case 22:vo(ke,Ve),We&2048&&Cl(Ve.alternate,Ve);break;case 24:vo(ke,Ve),We&2048&&Tl(Ve.alternate,Ve);break;default:vo(ke,Ve)}we=we.sibling}}function pa(Me){if(Me.subtreeFlags&io)for(Me=Me.child;Me!==null;)Oc(Me),Me=Me.sibling}function Oc(Me){switch(Me.tag){case 26:pa(Me),Me.flags&io&&(Me.memoizedState!==null?Td(Es,Me.memoizedState,Me.memoizedProps):yu(Me.type,Me.memoizedProps));break;case 5:pa(Me),Me.flags&io&&yu(Me.type,Me.memoizedProps);break;case 3:case 4:if(as){var we=Es;Es=Zl(Me.stateNode.containerInfo),pa(Me),Es=we}else pa(Me);break;case 22:Me.memoizedState===null&&(we=Me.alternate,we!==null&&we.memoizedState!==null?(we=io,io=16777216,pa(Me),io=we):pa(Me));break;default:pa(Me)}}function Nc(Me){var we=Me.alternate;if(we!==null&&(Me=we.child,Me!==null)){we.child=null;do we=Me.sibling,Me.sibling=null,Me=we;while(Me!==null)}}function _o(Me){var we=Me.deletions;if(Me.flags&16){if(we!==null)for(var ke=0;ke<we.length;ke++){var Ve=we[ke];Di=Ve,kc(Ve,Me)}Nc(Me)}if(Me.subtreeFlags&10256)for(Me=Me.child;Me!==null;)Fc(Me),Me=Me.sibling}function Fc(Me){switch(Me.tag){case 0:case 11:case 15:_o(Me),Me.flags&2048&&$s(9,Me,Me.return);break;case 3:_o(Me);break;case 12:_o(Me);break;case 22:var we=Me.stateNode;Me.memoizedState!==null&&we._visibility&4&&(Me.return===null||Me.return.tag!==13)?(we._visibility&=-5,Xo(Me)):_o(Me);break;default:_o(Me)}}function Xo(Me){var we=Me.deletions;if(Me.flags&16){if(we!==null)for(var ke=0;ke<we.length;ke++){var Ve=we[ke];Di=Ve,kc(Ve,Me)}Nc(Me)}for(Me=Me.child;Me!==null;){switch(we=Me,we.tag){case 0:case 11:case 15:$s(8,we,we.return),Xo(we);break;case 22:ke=we.stateNode,ke._visibility&4&&(ke._visibility&=-5,Xo(we));break;default:Xo(we)}Me=Me.sibling}}function kc(Me,we){for(;Di!==null;){var ke=Di;switch(ke.tag){case 0:case 11:case 15:$s(8,ke,we);break;case 23:case 22:if(ke.memoizedState!==null&&ke.memoizedState.cachePool!==null){var Ve=ke.memoizedState.cachePool.pool;Ve!=null&&Ve.refCount++}break;case 24:ti(ke.memoizedState.cache)}if(Ve=ke.child,Ve!==null)Ve.return=ke,Di=Ve;else e:for(ke=Me;Di!==null;){Ve=Di;var We=Ve.sibling,Ke=Ve.return;if(Bc(Ve),Ve===ke){Di=null;break e}if(We!==null){We.return=Ke,Di=We;break e}Di=Ke}}}function Ml(Me){var we=gu(Me);if(we!=null){if(typeof we.memoizedProps["data-testname"]!="string")throw Error(xe(364));return we}if(Me=If(Me),Me===null)throw Error(xe(362));return Me.stateNode.current}function wl(Me,we){var ke=Me.tag;switch(we.$$typeof){case hl:if(Me.type===we.value)return!0;break;case pl:e:{for(we=we.value,Me=[Me,0],ke=0;ke<Me.length;){var Ve=Me[ke++],We=Ve.tag,Ke=Me[ke++],Ht=we[Ke];if(We!==5&&We!==26&&We!==27||!Ao(Ve)){for(;Ht!=null&&wl(Ve,Ht);)Ke++,Ht=we[Ke];if(Ke===we.length){we=!0;break e}else for(Ve=Ve.child;Ve!==null;)Me.push(Ve,Ke),Ve=Ve.sibling}}we=!1}return we;case ml:if((ke===5||ke===26||ke===27)&&Of(Me.stateNode,we.value))return!0;break;case xl:if((ke===5||ke===6||ke===26||ke===27)&&(Me=Lf(Me),Me!==null&&0<=Me.indexOf(we.value)))return!0;break;case gl:if((ke===5||ke===26||ke===27)&&(Me=Me.memoizedProps["data-testname"],typeof Me=="string"&&Me.toLowerCase()===we.value.toLowerCase()))return!0;break;default:throw Error(xe(365))}return!1}function Rl(Me){switch(Me.$$typeof){case hl:return"<"+(ve(Me.value)||"Unknown")+">";case pl:return":has("+(Rl(Me)||"")+")";case ml:return'[role="'+Me.value+'"]';case xl:return'"'+Me.value+'"';case gl:return'[data-testname="'+Me.value+'"]';default:throw Error(xe(365))}}function Uc(Me,we){var ke=[];Me=[Me,0];for(var Ve=0;Ve<Me.length;){var We=Me[Ve++],Ke=We.tag,Ht=Me[Ve++],rn=we[Ht];if(Ke!==5&&Ke!==26&&Ke!==27||!Ao(We)){for(;rn!=null&&wl(We,rn);)Ht++,rn=we[Ht];if(Ht===we.length)ke.push(We);else for(We=We.child;We!==null;)Me.push(We,Ht),We=We.sibling}}return ke}function Bl(Me,we){if(!bo)throw Error(xe(363));Me=Ml(Me),Me=Uc(Me,we),we=[],Me=Array.from(Me);for(var ke=0;ke<Me.length;){var Ve=Me[ke++],We=Ve.tag;if(We===5||We===26||We===27)Ao(Ve)||we.push(Ve.stateNode);else for(Ve=Ve.child;Ve!==null;)Me.push(Ve),Ve=Ve.sibling}return we}function qi(){if(si&2&&Kr!==0)return Kr&-Kr;if(Or.T!==null){var Me=Ja;return Me!==0?Me:on()}return Af()}function Hc(){fs===0&&(fs=!(Kr&536870912)||Yr?ze():536870912);var Me=us.current;return Me!==null&&(Me.flags|=32),fs}function Vi(Me,we,ke){(Me===oi&&li===2||Me.cancelPendingCommit!==null)&&(Ua(Me,0),Is(Me,Kr,fs,!1)),Xe(Me,ke),(!(si&2)||Me!==oi)&&(Me===oi&&(!(si&2)&&(Ma|=ke),yi===4&&Is(Me,Kr,fs,!1)),Bn(Me))}function Vc(Me,we,ke){if(si&6)throw Error(xe(327));var Ve=!ke&&(we&60)===0&&(we&Me.expiredLanes)===0||Ne(Me,we),We=Ve?Zu(Me,we):Ll(Me,we,!0),Ke=Ve;do{if(We===0){so&&!Ve&&Is(Me,we,0,!1);break}else if(We===6)Is(Me,we,0,!ks);else{if(ke=Me.current.alternate,Ke&&!Yu(ke)){We=Ll(Me,we,!1),Ke=!1;continue}if(We===2){if(Ke=we,Me.errorRecoveryDisabledLanes&Ke)var Ht=0;else Ht=Me.pendingLanes&-536870913,Ht=Ht!==0?Ht:Ht&536870912?536870912:0;if(Ht!==0){we=Ht;e:{var rn=Me;We=Do;var vn=ss&&rn.current.memoizedState.isDehydrated;if(vn&&(Ua(rn,Ht).flags|=256),Ht=Ll(rn,Ht,!1),Ht!==2){if(pc&&!vn){rn.errorRecoveryDisabledLanes|=Ke,Ma|=Ke,We=4;break e}Ke=Ms,Ms=We,Ke!==null&&Dl(Ke)}We=Ht}if(Ke=!1,We!==2)continue}}if(We===1){Ua(Me,0),Is(Me,we,0,!0);break}e:{switch(Ve=Me,We){case 0:case 1:throw Error(xe(345));case 4:if((we&4194176)===we){Is(Ve,we,fs,!ks);break e}break;case 2:Ms=null;break;case 3:case 5:break;default:throw Error(xe(329))}if(Ve.finishedWork=ke,Ve.finishedLanes=we,(we&62914560)===we&&(Ke=xc+300-vs(),10<Ke)){if(Is(Ve,we,fs,!ks),Ue(Ve,0)!==0)break e;Ve.timeoutHandle=_f(zc.bind(null,Ve,ke,Ms,yl,gc,we,fs,Ma,ao,ks,2,-0,0),Ke);break e}zc(Ve,ke,Ms,yl,gc,we,fs,Ma,ao,ks,0,-0,0)}}break}while(!0);Bn(Me)}function Dl(Me){Ms===null?Ms=Me:Ms.push.apply(Ms,Me)}function zc(Me,we,ke,Ve,We,Ke,Ht,rn,vn,jn,or,pr,xr){var Fr=we.subtreeFlags;if((Fr&8192||(Fr&16785408)===16785408)&&(Mf(),Oc(we),we=wf(),we!==null)){Me.cancelPendingCommit=we(Jc.bind(null,Me,ke,Ve,We,Ht,rn,vn,1,pr,xr)),Is(Me,Ke,Ht,!jn);return}Jc(Me,ke,Ve,We,Ht,rn,vn,or,pr,xr)}function Yu(Me){for(var we=Me;;){var ke=we.tag;if((ke===0||ke===11||ke===15)&&we.flags&16384&&(ke=we.updateQueue,ke!==null&&(ke=ke.stores,ke!==null)))for(var Ve=0;Ve<ke.length;Ve++){var We=ke[Ve],Ke=We.getSnapshot;We=We.value;try{if(!Qi(Ke(),We))return!1}catch{return!1}}if(ke=we.child,we.subtreeFlags&16384&&ke!==null)ke.return=we,we=ke;else{if(we===Me)break;for(;we.sibling===null;){if(we.return===null||we.return===Me)return!0;we=we.return}we.sibling.return=we.return,we=we.sibling}}return!0}function Is(Me,we,ke,Ve){we&=~mc,we&=~Ma,Me.suspendedLanes|=we,Me.pingedLanes&=~we,Ve&&(Me.warmLanes|=we),Ve=Me.expirationTimes;for(var We=we;0<We;){var Ke=31-Ji(We),Ht=1<<Ke;Ve[Ke]=-1,We&=~Ht}ke!==0&&Qe(Me,ke,we)}function Gc(){return si&6?!0:(kt(0),!1)}function Il(){if($r!==null){if(li===0)var Me=$r.return;else Me=$r,Ns=Ca=null,Jn(Me),eo=null,wo=0,Me=$r;for(;Me!==null;)bc(Me.alternate,Me),Me=Me.return;$r=null}}function Ua(Me,we){Me.finishedWork=null,Me.finishedLanes=0;var ke=Me.timeoutHandle;ke!==ql&&(Me.timeoutHandle=ql,Ef(ke)),ke=Me.cancelPendingCommit,ke!==null&&(Me.cancelPendingCommit=null,ke()),Il(),oi=Me,$r=ke=Ks(Me.current,null),Kr=we,li=0,ts=null,ks=!1,so=Ne(Me,we),pc=!1,ao=fs=mc=Ma=na=yi=0,Ms=Do=null,gc=!1,we&8&&(we|=we&32);var Ve=Me.entangledLanes;if(Ve!==0)for(Me=Me.entanglements,Ve&=we;0<Ve;){var We=31-Ji(Ve),Ke=1<<We;we|=Me[We],Ve&=~Ke}return Us=we,zt(),ke}function $c(Me,we){zr=null,Or.H=Ts,we===Mo?(we=tr(),li=3):we===cc?(we=tr(),li=4):li=we===Vu?8:we!==null&&typeof we=="object"&&typeof we.then=="function"?6:1,ts=we,$r===null&&(yi=1,Da(Me,Ft(we,Me.current)))}function jc(){var Me=us.current;return Me===null?!0:(Kr&4194176)===Kr?Cs===null:(Kr&62914560)===Kr||Kr&536870912?Me===Cs:!1}function Wc(){var Me=Or.H;return Or.H=Ts,Me===null?Ts:Me}function Xc(){var Me=Or.A;return Or.A=Gd,Me}function Pl(){yi=4,ks||(Kr&4194176)!==Kr&&us.current!==null||(so=!0),!(na&134217727)&&!(Ma&134217727)||oi===null||Is(oi,Kr,fs,!1)}function Ll(Me,we,ke){var Ve=si;si|=2;var We=Wc(),Ke=Xc();(oi!==Me||Kr!==we)&&(yl=null,Ua(Me,we)),we=!1;var Ht=yi;e:do try{if(li!==0&&$r!==null){var rn=$r,vn=ts;switch(li){case 8:Il(),Ht=6;break e;case 3:case 2:case 6:us.current===null&&(we=!0);var jn=li;if(li=0,ts=null,Ha(Me,rn,vn,jn),ke&&so){Ht=0;break e}break;default:jn=li,li=0,ts=null,Ha(Me,rn,vn,jn)}}Ju(),Ht=yi;break}catch(or){$c(Me,or)}while(!0);return we&&Me.shellSuspendCounter++,Ns=Ca=null,si=Ve,Or.H=We,Or.A=Ke,$r===null&&(oi=null,Kr=0,zt()),Ht}function Ju(){for(;$r!==null;)Kc($r)}function Zu(Me,we){var ke=si;si|=2;var Ve=Wc(),We=Xc();oi!==Me||Kr!==we?(yl=null,Io=vs()+500,Ua(Me,we)):so=Ne(Me,we);e:do try{if(li!==0&&$r!==null){we=$r;var Ke=ts;t:switch(li){case 1:li=0,ts=null,Ha(Me,we,Ke,1);break;case 2:if(Gn(Ke)){li=0,ts=null,qc(we);break}we=function(){li===2&&oi===Me&&(li=7),Bn(Me)},Ke.then(we,we);break e;case 3:li=7;break e;case 4:li=5;break e;case 7:Gn(Ke)?(li=0,ts=null,qc(we)):(li=0,ts=null,Ha(Me,we,Ke,7));break;case 5:var Ht=null;switch($r.tag){case 26:Ht=$r.memoizedState;case 5:case 27:var rn=$r,vn=rn.type,jn=rn.pendingProps;if(Ht?Lu(Ht):xu(vn,jn)){li=0,ts=null;var or=rn.sibling;if(or!==null)$r=or;else{var pr=rn.return;pr!==null?($r=pr,Ko(pr)):$r=null}break t}}li=0,ts=null,Ha(Me,we,Ke,5);break;case 6:li=0,ts=null,Ha(Me,we,Ke,6);break;case 8:Il(),yi=6;break e;default:throw Error(xe(462))}}Qu();break}catch(xr){$c(Me,xr)}while(!0);return Ns=Ca=null,Or.H=Ve,Or.A=We,si=ke,$r!==null?0:(oi=null,Kr=0,zt(),yi)}function Qu(){for(;$r!==null&&!Id();)Kc($r)}function Kc(Me){var we=ct(Me.alternate,Me,Us);Me.memoizedProps=Me.pendingProps,we===null?Ko(Me):$r=we}function qc(Me){var we=Me,ke=we.alternate;switch(we.tag){case 15:case 0:we=Ho(ke,we,we.pendingProps,we.type,void 0,Kr);break;case 11:we=Ho(ke,we,we.pendingProps,we.type.render,we.ref,Kr);break;case 5:Jn(we);default:bc(ke,we),we=$r=tu(we,Us),we=ct(ke,we,Us)}Me.memoizedProps=Me.pendingProps,we===null?Ko(Me):$r=we}function Ha(Me,we,ke,Ve){Ns=Ca=null,Jn(we),eo=null,wo=0;var We=we.return;try{if(_l(Me,We,we,ke,Kr)){yi=1,Da(Me,Ft(ke,Me.current)),$r=null;return}}catch(Ke){if(We!==null)throw $r=We,Ke;yi=1,Da(Me,Ft(ke,Me.current)),$r=null;return}we.flags&32768?(Yr||Ve===1?Me=!0:so||Kr&536870912?Me=!1:(ks=Me=!0,(Ve===2||Ve===3||Ve===6)&&(Ve=us.current,Ve!==null&&Ve.tag===13&&(Ve.flags|=16384))),Yc(we,Me)):Ko(we)}function Ko(Me){var we=Me;do{if(we.flags&32768){Yc(we,ks);return}Me=we.return;var ke=Wu(we.alternate,we,Us);if(ke!==null){$r=ke;return}if(we=we.sibling,we!==null){$r=we;return}$r=we=Me}while(we!==null);yi===0&&(yi=5)}function Yc(Me,we){do{var ke=Xu(Me.alternate,Me);if(ke!==null){ke.flags&=32767,$r=ke;return}if(ke=Me.return,ke!==null&&(ke.flags|=32768,ke.subtreeFlags=0,ke.deletions=null),!we&&(Me=Me.sibling,Me!==null)){$r=Me;return}$r=Me=ke}while(Me!==null);yi=6,$r=null}function Jc(Me,we,ke,Ve,We,Ke,Ht,rn,vn,jn){var or=Or.T,pr=xa();try{$i(2),Or.T=null,ef(Me,we,ke,Ve,pr,We,Ke,Ht,rn,vn,jn)}finally{Or.T=or,$i(pr)}}function ef(Me,we,ke,Ve,We,Ke,Ht,rn){do ma();while(wa!==null);if(si&6)throw Error(xe(327));var vn=Me.finishedWork;if(Ve=Me.finishedLanes,vn===null)return null;if(Me.finishedWork=null,Me.finishedLanes=0,vn===Me.current)throw Error(xe(177));Me.callbackNode=null,Me.callbackPriority=0,Me.cancelPendingCommit=null;var jn=vn.lanes|vn.childLanes;if(jn|=ic,qe(Me,Ve,jn,Ke,Ht,rn),Me===oi&&($r=oi=null,Kr=0),!(vn.subtreeFlags&10256)&&!(vn.flags&10256)||vl||(vl=!0,yc=jn,vc=ke,sf(nc,function(){return ma(),null})),ke=(vn.flags&15990)!==0,vn.subtreeFlags&15990||ke?(ke=Or.T,Or.T=null,Ke=xa(),$i(2),Ht=si,si|=4,Ku(Me,vn),Ic(vn,Me),yf(Me.containerInfo),Me.current=vn,Rc(Me,vn.alternate,vn),Pd(),si=Ht,$i(Ke),Or.T=ke):Me.current=vn,vl?(vl=!1,wa=Me,Po=Ve):Zc(Me,jn),jn=Me.pendingLanes,jn===0&&(ra=null),Ye(vn.stateNode),Bn(Me),we!==null)for(We=Me.onRecoverableError,vn=0;vn<we.length;vn++)jn=we[vn],We(jn.value,{componentStack:jn.stack});return Po&3&&ma(),jn=Me.pendingLanes,Ve&4194218&&jn&42?Me===_c?Lo++:(Lo=0,_c=Me):Lo=0,kt(0),null}function Zc(Me,we){(Me.pooledCacheLanes&=we)===0&&(we=Me.pooledCache,we!=null&&(Me.pooledCache=null,ti(we)))}function ma(){if(wa!==null){var Me=wa,we=yc;yc=0;var ke=Nt(Po),Ve=32>ke?32:ke;ke=Or.T;var We=xa();try{if($i(Ve),Or.T=null,wa===null)var Ke=!1;else{Ve=vc,vc=null;var Ht=wa,rn=Po;if(wa=null,Po=0,si&6)throw Error(xe(331));var vn=si;if(si|=4,Fc(Ht.current),Lc(Ht,Ht.current,rn,Ve),si=vn,kt(0,!1),Zi&&typeof Zi.onPostCommitFiberRoot=="function")try{Zi.onPostCommitFiberRoot(So,Ht)}catch{}Ke=!0}return Ke}finally{$i(We),Or.T=ke,Zc(Me,we)}}return!1}function Qc(Me,we,ke){we=Ft(ke,we),we=oo(Me.stateNode,we,2),Me=Kn(Me,we,2),Me!==null&&(Xe(Me,2),Bn(Me))}function ni(Me,we,ke){if(Me.tag===3)Qc(Me,Me,ke);else for(;we!==null;){if(we.tag===3){Qc(we,Me,ke);break}else if(we.tag===1){var Ve=we.stateNode;if(typeof we.type.getDerivedStateFromError=="function"||typeof Ve.componentDidCatch=="function"&&(ra===null||!ra.has(Ve))){Me=Ft(ke,Me),ke=Ia(2),Ve=Kn(we,ke,2),Ve!==null&&(lo(ke,Ve,we,Me),Xe(Ve,2),Bn(Ve));break}}we=we.return}}function Ol(Me,we,ke){var Ve=Me.pingCache;if(Ve===null){Ve=Me.pingCache=new $d;var We=new Set;Ve.set(we,We)}else We=Ve.get(we),We===void 0&&(We=new Set,Ve.set(we,We));We.has(ke)||(pc=!0,We.add(ke),Me=tf.bind(null,Me,we,ke),we.then(Me,Me))}function tf(Me,we,ke){var Ve=Me.pingCache;Ve!==null&&Ve.delete(we),Me.pingedLanes|=Me.suspendedLanes&ke,Me.warmLanes&=~ke,oi===Me&&(Kr&ke)===ke&&(yi===4||yi===3&&(Kr&62914560)===Kr&&300>vs()-xc?!(si&2)&&Ua(Me,0):mc|=ke,ao===Kr&&(ao=0)),Bn(Me)}function eu(Me,we){we===0&&(we=je()),Me=mn(Me,we),Me!==null&&(Xe(Me,we),Bn(Me))}function nf(Me){var we=Me.memoizedState,ke=0;we!==null&&(ke=we.retryLane),eu(Me,ke)}function rf(Me,we){var ke=0;switch(Me.tag){case 13:var Ve=Me.stateNode,We=Me.memoizedState;We!==null&&(ke=We.retryLane);break;case 19:Ve=Me.stateNode;break;case 22:Ve=Me.stateNode._retryCache;break;default:throw Error(xe(314))}Ve!==null&&Ve.delete(we),eu(Me,ke)}function sf(Me,we){return tl(Me,we)}function af(Me,we,ke,Ve){this.tag=Me,this.key=ke,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=we,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=Ve,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nl(Me){return Me=Me.prototype,!(!Me||!Me.isReactComponent)}function Ks(Me,we){var ke=Me.alternate;return ke===null?(ke=me(Me.tag,we,Me.key,Me.mode),ke.elementType=Me.elementType,ke.type=Me.type,ke.stateNode=Me.stateNode,ke.alternate=Me,Me.alternate=ke):(ke.pendingProps=we,ke.type=Me.type,ke.flags=0,ke.subtreeFlags=0,ke.deletions=null),ke.flags=Me.flags&31457280,ke.childLanes=Me.childLanes,ke.lanes=Me.lanes,ke.child=Me.child,ke.memoizedProps=Me.memoizedProps,ke.memoizedState=Me.memoizedState,ke.updateQueue=Me.updateQueue,we=Me.dependencies,ke.dependencies=we===null?null:{lanes:we.lanes,firstContext:we.firstContext},ke.sibling=Me.sibling,ke.index=Me.index,ke.ref=Me.ref,ke.refCleanup=Me.refCleanup,ke}function tu(Me,we){Me.flags&=31457282;var ke=Me.alternate;return ke===null?(Me.childLanes=0,Me.lanes=we,Me.child=null,Me.subtreeFlags=0,Me.memoizedProps=null,Me.memoizedState=null,Me.updateQueue=null,Me.dependencies=null,Me.stateNode=null):(Me.childLanes=ke.childLanes,Me.lanes=ke.lanes,Me.child=ke.child,Me.subtreeFlags=0,Me.deletions=null,Me.memoizedProps=ke.memoizedProps,Me.memoizedState=ke.memoizedState,Me.updateQueue=ke.updateQueue,Me.type=ke.type,we=ke.dependencies,Me.dependencies=we===null?null:{lanes:we.lanes,firstContext:we.firstContext}),Me}function qo(Me,we,ke,Ve,We,Ke){var Ht=0;if(Ve=Me,typeof Me=="function")Nl(Me)&&(Ht=1);else if(typeof Me=="string")Ht=as&&Oi?wu(Me,ke,Pi.current)?26:Nu(Me)?27:5:as?wu(Me,ke,Pi.current)?26:5:Oi&&Nu(Me)?27:5;else e:switch(Me){case za:return ga(ke.children,We,Ke,we);case lu:Ht=8,We|=24;break;case Vl:return Me=me(12,ke,we,We|2),Me.elementType=Vl,Me.lanes=Ke,Me;case Gl:return Me=me(13,ke,we,We),Me.elementType=Gl,Me.lanes=Ke,Me;case $l:return Me=me(19,ke,we,We),Me.elementType=$l,Me.lanes=Ke,Me;case uu:return nu(ke,We,Ke,we);default:if(typeof Me=="object"&&Me!==null)switch(Me.$$typeof){case uf:case qs:Ht=10;break e;case cu:Ht=9;break e;case zl:Ht=11;break e;case jl:Ht=14;break e;case Ys:Ht=16,Ve=null;break e}Ht=29,ke=Error(xe(130,Me===null?"null":typeof Me,"")),Ve=null}return we=me(Ht,ke,we,We),we.elementType=Me,we.type=Ve,we.lanes=Ke,we}function ga(Me,we,ke,Ve){return Me=me(7,Me,Ve,we),Me.lanes=ke,Me}function nu(Me,we,ke,Ve){Me=me(22,Me,Ve,we),Me.elementType=uu,Me.lanes=ke;var We={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var Ke=We._current;if(Ke===null)throw Error(xe(456));if(!(We._pendingVisibility&2)){var Ht=mn(Ke,2);Ht!==null&&(We._pendingVisibility|=2,Vi(Ht,Ke,2))}},attach:function(){var Ke=We._current;if(Ke===null)throw Error(xe(456));if(We._pendingVisibility&2){var Ht=mn(Ke,2);Ht!==null&&(We._pendingVisibility&=-3,Vi(Ht,Ke,2))}}};return Me.stateNode=We,Me}function Fl(Me,we,ke){return Me=me(6,Me,null,we),Me.lanes=ke,Me}function kl(Me,we,ke){return we=me(4,Me.children!==null?Me.children:[],Me.key,we),we.lanes=ke,we.stateNode={containerInfo:Me.containerInfo,pendingChildren:null,implementation:Me.implementation},we}function of(Me,we,ke,Ve,We,Ke,Ht,rn){this.tag=1,this.containerInfo=Me,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ql,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ge(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ge(0),this.hiddenUpdates=Ge(null),this.identifierPrefix=Ve,this.onUncaughtError=We,this.onCaughtError=Ke,this.onRecoverableError=Ht,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=rn,this.incompleteTransitions=new Map}function ru(Me,we,ke,Ve,We,Ke,Ht,rn,vn,jn,or,pr){return Me=new of(Me,we,ke,Ht,rn,vn,jn,pr),we=1,Ke===!0&&(we|=24),Ke=me(3,null,null,we),Me.current=Ke,Ke.stateNode=Me,we=Vr(),we.refCount++,Me.pooledCache=we,we.refCount++,Ke.memoizedState={element:Ve,isDehydrated:ke,cache:we},zn(Ke),Me}function iu(Me){return Me?(Me=ja,Me):ja}function su(Me){var we=Me._reactInternals;if(we===void 0)throw typeof Me.render=="function"?Error(xe(188)):(Me=Object.keys(Me).join(","),Error(xe(268,Me)));return Me=Te(we),Me=Me!==null?Re(Me):null,Me===null?null:Eo(Me.stateNode)}function au(Me,we,ke,Ve,We,Ke){We=iu(We),Ve.context===null?Ve.context=We:Ve.pendingContext=We,Ve=er(we),Ve.payload={element:ke},Ke=Ke===void 0?null:Ke,Ke!==null&&(Ve.callback=Ke),ke=Kn(Me,Ve,we),ke!==null&&(Vi(ke,Me,we),lr(ke,Me,we))}function ou(Me,we){if(Me=Me.memoizedState,Me!==null&&Me.dehydrated!==null){var ke=Me.retryLane;Me.retryLane=ke!==0&&ke<we?ke:we}}function Ul(Me,we){ou(Me,we),(Me=Me.alternate)&&ou(Me,we)}var Gr={},lf=reactExports,Yi=schedulerExports,Hl=Object.assign,cf=Symbol.for("react.element"),Yo=Symbol.for("react.transitional.element"),Va=Symbol.for("react.portal"),za=Symbol.for("react.fragment"),lu=Symbol.for("react.strict_mode"),Vl=Symbol.for("react.profiler"),uf=Symbol.for("react.provider"),cu=Symbol.for("react.consumer"),qs=Symbol.for("react.context"),zl=Symbol.for("react.forward_ref"),Gl=Symbol.for("react.suspense"),$l=Symbol.for("react.suspense_list"),jl=Symbol.for("react.memo"),Ys=Symbol.for("react.lazy"),uu=Symbol.for("react.offscreen"),ff=Symbol.for("react.memo_cache_sentinel"),fu=Symbol.iterator,df=Symbol.for("react.client.reference"),Or=lf.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Wl,du,Xl=!1,Jo=Array.isArray,hf=K.rendererVersion,pf=K.rendererPackageName,hu=K.extraDevToolsConfig,Eo=K.getPublicInstance,mf=K.getRootHostContext,gf=K.getChildHostContext,xf=K.prepareForCommit,yf=K.resetAfterCommit,vf=K.createInstance,Kl=K.appendInitialChild,pu=K.finalizeInitialChildren,Zo=K.shouldSetTextContent,mu=K.createTextInstance,_f=K.scheduleTimeout,Ef=K.cancelTimeout,ql=K.noTimeout,Ps=K.isPrimaryRenderer;K.warnsIfNotActing;var Li=K.supportsMutation,Js=K.supportsPersistence,ss=K.supportsHydration,gu=K.getInstanceFromNode;K.beforeActiveInstanceBlur,K.afterActiveInstanceBlur;var bf=K.preparePortalMount;K.prepareScopeUpdate,K.getInstanceFromScope;var $i=K.setCurrentUpdatePriority,xa=K.getCurrentUpdatePriority,Af=K.resolveUpdatePriority;K.resolveEventType,K.resolveEventTimeStamp;var Sf=K.shouldAttemptEagerTransition,Cf=K.detachDeletedInstance;K.requestPostPaintCallback;var Tf=K.maySuspendCommit,xu=K.preloadInstance,Mf=K.startSuspendingCommit,yu=K.suspendInstance,wf=K.waitForCommitToBeReady,Ga=K.NotPendingTransition,ya=K.HostTransitionContext,Rf=K.resetFormInstance;K.bindToConsole;var Bf=K.supportsMicrotasks,Df=K.scheduleMicrotask,bo=K.supportsTestSelectors,If=K.findFiberRoot,Pf=K.getBoundingRect,Lf=K.getTextContent,Ao=K.isHiddenSubtree,Of=K.matchAccessibilityRole,Nf=K.setFocusIfFocusable,Ff=K.setupIntersectionObserver,kf=K.appendChild,Uf=K.appendChildToContainer,Hf=K.commitTextUpdate,Vf=K.commitMount,zf=K.commitUpdate,Gf=K.insertBefore,$f=K.insertInContainerBefore,jf=K.removeChild,Wf=K.removeChildFromContainer,vu=K.resetTextContent,Xf=K.hideInstance,Kf=K.hideTextInstance,qf=K.unhideInstance,Yf=K.unhideTextInstance,Jf=K.clearContainer,Zf=K.cloneInstance,_u=K.createContainerChildSet,Eu=K.appendChildToContainerChildSet,Qf=K.finalizeContainerChildren,bu=K.replaceContainerChildren,Au=K.cloneHiddenInstance,Su=K.cloneHiddenTextInstance,Yl=K.isSuspenseInstancePending,Jl=K.isSuspenseInstanceFallback,ed=K.getSuspenseInstanceFallbackErrorDetails,nd=K.registerSuspenseInstanceRetry,rd=K.canHydrateFormStateMarker,id=K.isFormStateMarkerMatching,Cu=K.getNextHydratableSibling,Tu=K.getFirstHydratableChild,sd=K.getFirstHydratableChildWithinContainer,ad=K.getFirstHydratableChildWithinSuspenseInstance,od=K.canHydrateInstance,ld=K.canHydrateTextInstance,cd=K.canHydrateSuspenseInstance,ud=K.hydrateInstance,dd=K.hydrateTextInstance,hd=K.hydrateSuspenseInstance,pd=K.getNextHydratableInstanceAfterSuspenseInstance,gd=K.commitHydratedContainer,xd=K.commitHydratedSuspenseInstance,yd=K.clearSuspenseBoundary,vd=K.clearSuspenseBoundaryFromContainer,Mu=K.shouldDeleteUnhydratedTailInstances;K.diffHydratedPropsForDevWarnings,K.diffHydratedTextForDevWarnings,K.describeHydratableInstanceForDevWarnings;var _d=K.validateHydratableInstance,Ed=K.validateHydratableTextInstance,as=K.supportsResources,wu=K.isHostHoistableType,Zl=K.getHoistableRoot,Ru=K.getResource,Bu=K.acquireResource,Du=K.releaseResource,bd=K.hydrateHoistable,Iu=K.mountHoistable,Pu=K.unmountHoistable,Ad=K.createHoistableInstance,Sd=K.prepareToCommitHoistables,Cd=K.mayResourceSuspendCommit,Lu=K.preloadResource,Td=K.suspendResource,Oi=K.supportsSingletons,Ou=K.resolveSingletonInstance,Md=K.clearSingleton,wd=K.acquireSingletonInstance,Rd=K.releaseSingletonInstance,Nu=K.isHostSingletonType,Ql=[],$a=-1,ja={},Ji=Math.clz32?Math.clz32:Oe,Bd=Math.log,Dd=Math.LN2,Qo=128,el=4194304,tl=Yi.unstable_scheduleCallback,tc=Yi.unstable_cancelCallback,Id=Yi.unstable_shouldYield,Pd=Yi.unstable_requestPaint,vs=Yi.unstable_now,Fu=Yi.unstable_ImmediatePriority,Ld=Yi.unstable_UserBlockingPriority,nc=Yi.unstable_NormalPriority,Od=Yi.unstable_IdlePriority,Nd=Yi.log,Fd=Yi.unstable_setDisableYieldValue,So=null,Zi=null,Qi=typeof Object.is=="function"?Object.is:rt,ku=new WeakMap,Wa=[],Xa=0,nl=null,rl=0,os=[],ls=0,va=null,Ls=1,Os="",Pi=Ie(null),Co=Ie(null),Zs=Ie(null),il=Ie(null),zi=null,Ni=null,Yr=!1,_s=null,Ss=!1,rc=Error(xe(519)),cs=[],Ka=0,ic=0,sl=null,qa=null,sc=!1,al=!1,ac=!1,Ya=0,To=null,oc=0,Ja=0,Za=null,Qs=!1,lc=!1,kd=Object.prototype.hasOwnProperty,Mo=Error(xe(460)),cc=Error(xe(474)),ol={then:function(){}},Qa=null,eo=null,wo=0,Ea=ci(!0),Uu=ci(!1),to=Ie(null),ll=Ie(0),us=Ie(null),Cs=null,Mi=Ie(0),ea=0,zr=null,ii=null,Si=null,cl=!1,no=!1,ba=!1,ul=0,Ro=0,ro=null,Ud=0,uc=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}},Ts={readContext:nr,use:tn,useCallback:qr,useContext:qr,useEffect:qr,useImperativeHandle:qr,useLayoutEffect:qr,useInsertionEffect:qr,useMemo:qr,useReducer:qr,useRef:qr,useState:qr,useDebugValue:qr,useDeferredValue:qr,useTransition:qr,useSyncExternalStore:qr,useId:qr};Ts.useCacheRefresh=qr,Ts.useMemoCache=qr,Ts.useHostTransitionStatus=qr,Ts.useFormState=qr,Ts.useActionState=qr,Ts.useOptimistic=qr;var Aa={readContext:nr,use:tn,useCallback:function(Me,we){return pt().memoizedState=[Me,we===void 0?null:we],Me},useContext:nr,useEffect:ps,useImperativeHandle:function(Me,we,ke){ke=ke!=null?ke.concat([Me]):null,ws(4194308,4,aa.bind(null,we,Me),ke)},useLayoutEffect:function(Me,we){return ws(4194308,4,Me,we)},useInsertionEffect:function(Me,we){ws(4,2,Me,we)},useMemo:function(Me,we){var ke=pt();we=we===void 0?null:we;var Ve=Me();if(ba){at(!0);try{Me()}finally{at(!1)}}return ke.memoizedState=[Ve,we],Ve},useReducer:function(Me,we,ke){var Ve=pt();if(ke!==void 0){var We=ke(we);if(ba){at(!0);try{ke(we)}finally{at(!1)}}}else We=we;return Ve.memoizedState=Ve.baseState=We,Me={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Me,lastRenderedState:We},Ve.queue=Me,Me=Me.dispatch=ur.bind(null,zr,Me),[Ve.memoizedState,Me]},useRef:function(Me){var we=pt();return Me={current:Me},we.memoizedState=Me},useState:function(Me){Me=Sr(Me);var we=Me.queue,ke=Ir.bind(null,zr,we);return we.dispatch=ke,[Me.memoizedState,ke]},useDebugValue:oa,useDeferredValue:function(Me,we){var ke=pt();return Pe(ke,Me,we)},useTransition:function(){var Me=Sr(!1);return Me=Ze.bind(null,zr,Me.queue,!0,!1),pt().memoizedState=Me,[!1,Me]},useSyncExternalStore:function(Me,we,ke){var Ve=zr,We=pt();if(Yr){if(ke===void 0)throw Error(xe(407));ke=ke()}else{if(ke=we(),oi===null)throw Error(xe(349));Kr&60||Ln(Ve,we,ke)}We.memoizedState=ke;var Ke={value:ke,getSnapshot:we};return We.queue=Ke,ps(_r.bind(null,Ve,Ke,Me),[Me]),Ve.flags|=2048,wi(9,fr.bind(null,Ve,Ke,ke,we),{destroy:void 0},null),ke},useId:function(){var Me=pt(),we=oi.identifierPrefix;if(Yr){var ke=Os,Ve=Ls;ke=(Ve&~(1<<32-Ji(Ve)-1)).toString(32)+ke,we=":"+we+"R"+ke,ke=ul++,0<ke&&(we+="H"+ke.toString(32)),we+=":"}else ke=Ud++,we=":"+we+"r"+ke.toString(32)+":";return Me.memoizedState=we},useCacheRefresh:function(){return pt().memoizedState=rr.bind(null,zr)}};Aa.useMemoCache=cn,Aa.useHostTransitionStatus=jt,Aa.useFormState=Lr,Aa.useActionState=Lr,Aa.useOptimistic=function(Me){var we=pt();we.memoizedState=we.baseState=Me;var ke={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return we.queue=ke,we=ui.bind(null,zr,!0,ke),ke.dispatch=we,[Me,we]};var ta={readContext:nr,use:tn,useCallback:Ba,useContext:nr,useEffect:Br,useImperativeHandle:Ri,useInsertionEffect:Hs,useLayoutEffect:sa,useMemo:Vs,useReducer:Fn,useRef:Ui,useState:function(){return Fn(_n)},useDebugValue:oa,useDeferredValue:function(Me,we){var ke=$t();return $e(ke,ii.memoizedState,Me,we)},useTransition:function(){var Me=Fn(_n)[0],we=$t().memoizedState;return[typeof Me=="boolean"?Me:en(Me),we]},useSyncExternalStore:dr,useId:yn};ta.useCacheRefresh=Tn,ta.useMemoCache=cn,ta.useHostTransitionStatus=jt,ta.useFormState=ri,ta.useActionState=ri,ta.useOptimistic=function(Me,we){var ke=$t();return Cr(ke,ii,Me,we)};var Sa={readContext:nr,use:tn,useCallback:Ba,useContext:nr,useEffect:Br,useImperativeHandle:Ri,useInsertionEffect:Hs,useLayoutEffect:sa,useMemo:Vs,useReducer:qn,useRef:Ui,useState:function(){return qn(_n)},useDebugValue:oa,useDeferredValue:function(Me,we){var ke=$t();return ii===null?Pe(ke,Me,we):$e(ke,ii.memoizedState,Me,we)},useTransition:function(){var Me=qn(_n)[0],we=$t().memoizedState;return[typeof Me=="boolean"?Me:en(Me),we]},useSyncExternalStore:dr,useId:yn};Sa.useCacheRefresh=Tn,Sa.useMemoCache=cn,Sa.useHostTransitionStatus=jt,Sa.useFormState=vi,Sa.useActionState=vi,Sa.useOptimistic=function(Me,we){var ke=$t();return ii!==null?Cr(ke,ii,Me,we):(ke.baseState=Me,[Me,ke.queue.dispatch])};var fc={isMounted:function(Me){return(Me=Me._reactInternals)?Se(Me)===Me:!1},enqueueSetState:function(Me,we,ke){Me=Me._reactInternals;var Ve=qi(),We=er(Ve);We.payload=we,ke!=null&&(We.callback=ke),we=Kn(Me,We,Ve),we!==null&&(Vi(we,Me,Ve),lr(we,Me,Ve))},enqueueReplaceState:function(Me,we,ke){Me=Me._reactInternals;var Ve=qi(),We=er(Ve);We.tag=1,We.payload=we,ke!=null&&(We.callback=ke),we=Kn(Me,We,Ve),we!==null&&(Vi(we,Me,Ve),lr(we,Me,Ve))},enqueueForceUpdate:function(Me,we){Me=Me._reactInternals;var ke=qi(),Ve=er(ke);Ve.tag=2,we!=null&&(Ve.callback=we),we=Kn(Me,Ve,ke),we!==null&&(Vi(we,Me,ke),lr(we,Me,ke))}},Hu=typeof reportError=="function"?reportError:function(Me){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var we=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Me=="object"&&Me!==null&&typeof Me.message=="string"?String(Me.message):String(Me),error:Me});if(!window.dispatchEvent(we))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Me);return}console.error(Me)},Vu=Error(xe(461)),Bi=!1,dc={dehydrated:null,treeContext:null,retryLane:0},dl=Ie(null),Ca=null,Ns=null,Hd=typeof AbortController<"u"?AbortController:function(){var Me=[],we=this.signal={aborted:!1,addEventListener:function(ke,Ve){Me.push(Ve)}};this.abort=function(){we.aborted=!0,Me.forEach(function(ke){return ke()})}},Vd=Yi.unstable_scheduleCallback,zd=Yi.unstable_NormalPriority,gi={$$typeof:qs,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0},zu=Or.S;Or.S=function(Me,we){typeof we=="object"&&we!==null&&typeof we.then=="function"&&Rt(Me,we),zu!==null&&zu(Me,we)};var Ta=Ie(null),Fs=!1,xi=!1,hc=!1,Gu=typeof WeakSet=="function"?WeakSet:Set,Di=null,$u=!1,Ci=null,es=!1,Es=null,io=8192,Gd={getCacheForType:function(Me){var we=nr(gi),ke=we.data.get(Me);return ke===void 0&&(ke=Me(),we.data.set(Me,ke)),ke}},hl=0,pl=1,ml=2,gl=3,xl=4;if(typeof Symbol=="function"&&Symbol.for){var Bo=Symbol.for;hl=Bo("selector.component"),pl=Bo("selector.has_pseudo_class"),ml=Bo("selector.role"),gl=Bo("selector.test_id"),xl=Bo("selector.text")}var $d=typeof WeakMap=="function"?WeakMap:Map,si=0,oi=null,$r=null,Kr=0,li=0,ts=null,ks=!1,so=!1,pc=!1,Us=0,yi=0,na=0,Ma=0,mc=0,fs=0,ao=0,Do=null,Ms=null,gc=!1,xc=0,Io=1/0,yl=null,ra=null,vl=!1,wa=null,Po=0,yc=0,vc=null,Lo=0,_c=null;return Gr.attemptContinuousHydration=function(Me){if(Me.tag===13){var we=mn(Me,67108864);we!==null&&Vi(we,Me,67108864),Ul(Me,67108864)}},Gr.attemptHydrationAtCurrentPriority=function(Me){if(Me.tag===13){var we=qi(),ke=mn(Me,we);ke!==null&&Vi(ke,Me,we),Ul(Me,we)}},Gr.attemptSynchronousHydration=function(Me){switch(Me.tag){case 3:if(Me=Me.stateNode,Me.current.memoizedState.isDehydrated){var we=Fe(Me.pendingLanes);if(we!==0){for(Me.pendingLanes|=2,Me.entangledLanes|=2;we;){var ke=1<<31-Ji(we);Me.entanglements[1]|=ke,we&=~ke}Bn(Me),!(si&6)&&(Io=vs()+500,kt(0))}}break;case 13:we=mn(Me,2),we!==null&&Vi(we,Me,2),Gc(),Ul(Me,2)}},Gr.batchedUpdates=function(Me,we){return Me(we)},Gr.createComponentSelector=function(Me){return{$$typeof:hl,value:Me}},Gr.createContainer=function(Me,we,ke,Ve,We,Ke,Ht,rn,vn,jn){return ru(Me,we,!1,null,ke,Ve,Ke,Ht,rn,vn,jn,null)},Gr.createHasPseudoClassSelector=function(Me){return{$$typeof:pl,value:Me}},Gr.createHydrationContainer=function(Me,we,ke,Ve,We,Ke,Ht,rn,vn,jn,or,pr,xr){return Me=ru(ke,Ve,!0,Me,We,Ke,rn,vn,jn,or,pr,xr),Me.context=iu(null),ke=Me.current,Ve=qi(),We=er(Ve),We.callback=we??null,Kn(ke,We,Ve),Me.current.lanes=Ve,Xe(Me,Ve),Bn(Me),Me},Gr.createPortal=function(Me,we,ke){var Ve=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Va,key:Ve==null?null:""+Ve,children:Me,containerInfo:we,implementation:ke}},Gr.createRoleSelector=function(Me){return{$$typeof:ml,value:Me}},Gr.createTestNameSelector=function(Me){return{$$typeof:gl,value:Me}},Gr.createTextSelector=function(Me){return{$$typeof:xl,value:Me}},Gr.defaultOnCaughtError=function(Me){console.error(Me)},Gr.defaultOnRecoverableError=function(Me){Hu(Me)},Gr.defaultOnUncaughtError=function(Me){Hu(Me)},Gr.deferredUpdates=function(Me){var we=Or.T,ke=xa();try{return $i(32),Or.T=null,Me()}finally{$i(ke),Or.T=we}},Gr.discreteUpdates=function(Me,we,ke,Ve,We){var Ke=Or.T,Ht=xa();try{return $i(2),Or.T=null,Me(we,ke,Ve,We)}finally{$i(Ht),Or.T=Ke,si===0&&(Io=vs()+500)}},Gr.findAllNodes=Bl,Gr.findBoundingRects=function(Me,we){if(!bo)throw Error(xe(363));we=Bl(Me,we),Me=[];for(var ke=0;ke<we.length;ke++)Me.push(Pf(we[ke]));for(we=Me.length-1;0<we;we--){ke=Me[we];for(var Ve=ke.x,We=Ve+ke.width,Ke=ke.y,Ht=Ke+ke.height,rn=we-1;0<=rn;rn--)if(we!==rn){var vn=Me[rn],jn=vn.x,or=jn+vn.width,pr=vn.y,xr=pr+vn.height;if(Ve>=jn&&Ke>=pr&&We<=or&&Ht<=xr){Me.splice(we,1);break}else if(Ve!==jn||ke.width!==vn.width||xr<Ke||pr>Ht){if(!(Ke!==pr||ke.height!==vn.height||or<Ve||jn>We)){jn>Ve&&(vn.width+=jn-Ve,vn.x=Ve),or<We&&(vn.width=We-jn),Me.splice(we,1);break}}else{pr>Ke&&(vn.height+=pr-Ke,vn.y=Ke),xr<Ht&&(vn.height=Ht-pr),Me.splice(we,1);break}}}return Me},Gr.findHostInstance=su,Gr.findHostInstanceWithNoPortals=function(Me){return Me=Te(Me),Me=Me!==null?De(Me):null,Me===null?null:Eo(Me.stateNode)},Gr.findHostInstanceWithWarning=function(Me){return su(Me)},Gr.flushPassiveEffects=ma,Gr.flushSyncFromReconciler=function(Me){var we=si;si|=1;var ke=Or.T,Ve=xa();try{if($i(2),Or.T=null,Me)return Me()}finally{$i(Ve),Or.T=ke,si=we,!(si&6)&&kt(0)}},Gr.flushSyncWork=Gc,Gr.focusWithin=function(Me,we){if(!bo)throw Error(xe(363));for(Me=Ml(Me),we=Uc(Me,we),we=Array.from(we),Me=0;Me<we.length;){var ke=we[Me++],Ve=ke.tag;if(!Ao(ke)){if((Ve===5||Ve===26||Ve===27)&&Nf(ke.stateNode))return!0;for(ke=ke.child;ke!==null;)we.push(ke),ke=ke.sibling}}return!1},Gr.getFindAllNodesFailureDescription=function(Me,we){if(!bo)throw Error(xe(363));var ke=0,Ve=[];Me=[Ml(Me),0];for(var We=0;We<Me.length;){var Ke=Me[We++],Ht=Ke.tag,rn=Me[We++],vn=we[rn];if((Ht!==5&&Ht!==26&&Ht!==27||!Ao(Ke))&&(wl(Ke,vn)&&(Ve.push(Rl(vn)),rn++,rn>ke&&(ke=rn)),rn<we.length))for(Ke=Ke.child;Ke!==null;)Me.push(Ke,rn),Ke=Ke.sibling}if(ke<we.length){for(Me=[];ke<we.length;ke++)Me.push(Rl(we[ke]));return`findAllNodes was able to match part of the selector:
  `+(Ve.join(" > ")+`

No matching component was found for:
  `)+Me.join(" > ")}return null},Gr.getPublicRootInstance=function(Me){if(Me=Me.current,!Me.child)return null;switch(Me.child.tag){case 27:case 5:return Eo(Me.child.stateNode);default:return Me.child.stateNode}},Gr.injectIntoDevTools=function(){var Me={bundleType:0,version:hf,rendererPackageName:pf,currentDispatcherRef:Or,findFiberByHostInstance:gu,reconcilerVersion:"19.0.0"};if(hu!==null&&(Me.rendererConfig=hu),typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")Me=!1;else{var we=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(we.isDisabled||!we.supportsFiber)Me=!0;else{try{So=we.inject(Me),Zi=we}catch{}Me=!!we.checkDCE}}return Me},Gr.isAlreadyRendering=function(){return!1},Gr.observeVisibleRects=function(Me,we,ke,Ve){if(!bo)throw Error(xe(363));Me=Bl(Me,we);var We=Ff(Me,ke,Ve).disconnect;return{disconnect:function(){We()}}},Gr.shouldError=function(){return null},Gr.shouldSuspend=function(){return!1},Gr.startHostTransition=function(Me,we,ke,Ve){if(Me.tag!==5)throw Error(xe(476));var We=wt(Me).queue;Ze(Me,We,we,Ga,ke===null?ge:function(){var Ke=wt(Me).next.queue;return wr(Me,Ke,{},qi()),ke(Ve)})},Gr.updateContainer=function(Me,we,ke,Ve){var We=we.current,Ke=qi();return au(We,Ke,Me,we,ke,Ve),Ke},Gr.updateContainerSync=function(Me,we,ke,Ve){return we.tag===0&&ma(),au(we.current,2,Me,we,ke,Ve),2},Gr},fe.exports.default=fe.exports,Object.defineProperty(fe.exports,"__esModule",{value:!0})})(reactReconciler_production);var reactReconciler_productionExports=reactReconciler_production.exports;reactReconciler.exports=reactReconciler_productionExports;var reactReconcilerExports=reactReconciler.exports;const Reconciler=getDefaultExportFromCjs(reactReconcilerExports),isPromise=fe=>typeof fe=="object"&&typeof fe.then=="function",globalCache=[];function shallowEqualArrays(fe,K,me=(ge,xe)=>ge===xe){if(fe===K)return!0;if(!fe||!K)return!1;const ge=fe.length;if(K.length!==ge)return!1;for(let xe=0;xe<ge;xe++)if(!me(fe[xe],K[xe]))return!1;return!0}function query(fe,K=null,me=!1,ge={}){K===null&&(K=[fe]);for(const ye of globalCache)if(shallowEqualArrays(K,ye.keys,ye.equal)){if(me)return;if(Object.prototype.hasOwnProperty.call(ye,"error"))throw ye.error;if(Object.prototype.hasOwnProperty.call(ye,"response"))return ge.lifespan&&ge.lifespan>0&&(ye.timeout&&clearTimeout(ye.timeout),ye.timeout=setTimeout(ye.remove,ge.lifespan)),ye.response;if(!me)throw ye.promise}const xe={keys:K,equal:ge.equal,remove:()=>{const ye=globalCache.indexOf(xe);ye!==-1&&globalCache.splice(ye,1)},promise:(isPromise(fe)?fe:fe(...K)).then(ye=>{xe.response=ye,ge.lifespan&&ge.lifespan>0&&(xe.timeout=setTimeout(xe.remove,ge.lifespan))}).catch(ye=>xe.error=ye)};if(globalCache.push(xe),!me)throw xe.promise}const suspend=(fe,K,me)=>query(fe,K,!1,me),preload=(fe,K,me)=>void query(fe,K,!0,me),clear=fe=>{if(fe===void 0||fe.length===0)globalCache.splice(0,globalCache.length);else{const K=globalCache.find(me=>shallowEqualArrays(fe,me.keys,me.equal));K&&K.remove()}};function i$5(fe,K,me){if(!fe)return;if(me(fe)===!0)return fe;let ge=K?fe.return:fe.child;for(;ge;){const xe=i$5(ge,K,me);if(xe)return xe;ge=K?null:ge.sibling}}function l(fe){try{return Object.defineProperties(fe,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return fe}}const a$1=l(reactExports.createContext(null));let m$2=class extends reactExports.Component{render(){return reactExports.createElement(a$1.Provider,{value:this._reactInternals},this.props.children)}};function c$1(){const fe=reactExports.useContext(a$1);if(fe===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const K=reactExports.useId();return reactExports.useMemo(()=>{for(const me of[fe,fe?.alternate]){if(!me)continue;const ge=i$5(me,!1,xe=>{let ye=xe.memoizedState;for(;ye;){if(ye.memoizedState===K)return!0;ye=ye.next}});if(ge)return ge}},[fe,K])}const p$1=Symbol.for("react.context"),b$1=fe=>fe!==null&&typeof fe=="object"&&"$$typeof"in fe&&fe.$$typeof===p$1;function h$1(){const fe=c$1(),[K]=reactExports.useState(()=>new Map);K.clear();let me=fe;for(;me;){const ge=me.type;b$1(ge)&&ge!==a$1&&!K.has(ge)&&K.set(ge,reactExports.use(l(ge))),me=me.return}return K}function x$3(){const fe=h$1();return reactExports.useMemo(()=>Array.from(fe.keys()).reduce((K,me)=>ge=>reactExports.createElement(K,null,reactExports.createElement(me.Provider,{...ge,value:fe.get(me)})),K=>reactExports.createElement(m$2,{...K})),[fe])}function findInitialRoot(fe){let K=fe.root;for(;K.getState().previousRoot;)K=K.getState().previousRoot;return K}const isOrthographicCamera$1=fe=>fe&&fe.isOrthographicCamera,isRef$1=fe=>fe&&fe.hasOwnProperty("current"),isColorRepresentation=fe=>fe!=null&&(typeof fe=="string"||typeof fe=="number"||fe.isColor),useIsomorphicLayoutEffect=((fe,K)=>typeof window<"u"&&(((fe=window.document)==null?void 0:fe.createElement)||((K=window.navigator)==null?void 0:K.product)==="ReactNative"))()?reactExports.useLayoutEffect:reactExports.useEffect;function useMutableCallback(fe){const K=reactExports.useRef(fe);return useIsomorphicLayoutEffect(()=>void(K.current=fe),[fe]),K}function useBridge(){const fe=c$1(),K=x$3();return reactExports.useMemo(()=>({children:me})=>{const xe=!!i$5(fe,!0,ye=>ye.type===reactExports.StrictMode)?reactExports.StrictMode:reactExports.Fragment;return jsxRuntimeExports.jsx(xe,{children:jsxRuntimeExports.jsx(K,{children:me})})},[fe,K])}function Block({set:fe}){return useIsomorphicLayoutEffect(()=>(fe(new Promise(()=>null)),()=>fe(!1)),[fe]),null}const ErrorBoundary$1=(fe=>(fe=class extends reactExports.Component{constructor(...me){super(...me),this.state={error:!1}}componentDidCatch(me){this.props.set(me)}render(){return this.state.error?null:this.props.children}},fe.getDerivedStateFromError=()=>({error:!0}),fe))();function calculateDpr(fe){var K;const me=typeof window<"u"?(K=window.devicePixelRatio)!=null?K:2:1;return Array.isArray(fe)?Math.min(Math.max(fe[0],me),fe[1]):fe}function getRootState(fe){var K;return(K=fe.__r3f)==null?void 0:K.root.getState()}const is$1={obj:fe=>fe===Object(fe)&&!is$1.arr(fe)&&typeof fe!="function",fun:fe=>typeof fe=="function",str:fe=>typeof fe=="string",num:fe=>typeof fe=="number",boo:fe=>typeof fe=="boolean",und:fe=>fe===void 0,nul:fe=>fe===null,arr:fe=>Array.isArray(fe),equ(fe,K,{arrays:me="shallow",objects:ge="reference",strict:xe=!0}={}){if(typeof fe!=typeof K||!!fe!=!!K)return!1;if(is$1.str(fe)||is$1.num(fe)||is$1.boo(fe))return fe===K;const ye=is$1.obj(fe);if(ye&&ge==="reference")return fe===K;const ve=is$1.arr(fe);if(ve&&me==="reference")return fe===K;if((ve||ye)&&fe===K)return!0;let _e;for(_e in fe)if(!(_e in K))return!1;if(ye&&me==="shallow"&&ge==="shallow"){for(_e in xe?K:fe)if(!is$1.equ(fe[_e],K[_e],{strict:xe,objects:"reference"}))return!1}else for(_e in xe?K:fe)if(fe[_e]!==K[_e])return!1;if(is$1.und(_e)){if(ve&&fe.length===0&&K.length===0||ye&&Object.keys(fe).length===0&&Object.keys(K).length===0)return!0;if(fe!==K)return!1}return!0}};function buildGraph(fe){const K={nodes:{},materials:{},meshes:{}};return fe&&fe.traverse(me=>{me.name&&(K.nodes[me.name]=me),me.material&&!K.materials[me.material.name]&&(K.materials[me.material.name]=me.material),me.isMesh&&!K.meshes[me.name]&&(K.meshes[me.name]=me)}),K}function dispose(fe){fe.type!=="Scene"&&(fe.dispose==null||fe.dispose());for(const K in fe){const me=fe[K];me?.type!=="Scene"&&(me==null||me.dispose==null||me.dispose())}}const REACT_INTERNAL_PROPS=["children","key","ref"];function getInstanceProps(fe){const K={};for(const me in fe)REACT_INTERNAL_PROPS.includes(me)||(K[me]=fe[me]);return K}function prepare(fe,K,me,ge){const xe=fe;let ye=xe?.__r3f;return ye||(ye={root:K,type:me,parent:null,children:[],props:getInstanceProps(ge),object:xe,eventCount:0,handlers:{},isHidden:!1},xe&&(xe.__r3f=ye)),ye}function resolve(fe,K){let me=fe[K];if(!K.includes("-"))return{root:fe,key:K,target:me};me=fe;for(const xe of K.split("-")){var ge;K=xe,fe=me,me=(ge=me)==null?void 0:ge[K]}return{root:fe,key:K,target:me}}const INDEX_REGEX=/-\d+$/;function attach(fe,K){if(is$1.str(K.props.attach)){if(INDEX_REGEX.test(K.props.attach)){const xe=K.props.attach.replace(INDEX_REGEX,""),{root:ye,key:ve}=resolve(fe.object,xe);Array.isArray(ye[ve])||(ye[ve]=[])}const{root:me,key:ge}=resolve(fe.object,K.props.attach);K.previousAttach=me[ge],me[ge]=K.object}else is$1.fun(K.props.attach)&&(K.previousAttach=K.props.attach(fe.object,K.object))}function detach(fe,K){if(is$1.str(K.props.attach)){const{root:me,key:ge}=resolve(fe.object,K.props.attach),xe=K.previousAttach;xe===void 0?delete me[ge]:me[ge]=xe}else K.previousAttach==null||K.previousAttach(fe.object,K.object);delete K.previousAttach}const RESERVED_PROPS=[...REACT_INTERNAL_PROPS,"args","dispose","attach","object","onUpdate","dispose"],MEMOIZED_PROTOTYPES=new Map;function getMemoizedPrototype(fe){let K=MEMOIZED_PROTOTYPES.get(fe.constructor);try{K||(K=new fe.constructor,MEMOIZED_PROTOTYPES.set(fe.constructor,K))}catch{}return K}function diffProps(fe,K){const me={};for(const ge in K)if(!RESERVED_PROPS.includes(ge)&&!is$1.equ(K[ge],fe.props[ge])){me[ge]=K[ge];for(const xe in K)xe.startsWith(`${ge}-`)&&(me[xe]=K[xe])}for(const ge in fe.props){if(RESERVED_PROPS.includes(ge)||K.hasOwnProperty(ge))continue;const{root:xe,key:ye}=resolve(fe.object,ge);if(xe.constructor&&xe.constructor.length===0){const ve=getMemoizedPrototype(xe);is$1.und(ve)||(me[ye]=ve[ye])}else me[ye]=0}return me}const colorMaps=["map","emissiveMap","sheenColorMap","specularColorMap","envMap"],EVENT_REGEX=/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/;function applyProps(fe,K){var me;const ge=fe.__r3f,xe=ge&&findInitialRoot(ge).getState(),ye=ge?.eventCount;for(const _e in K){let Ee=K[_e];if(RESERVED_PROPS.includes(_e))continue;if(ge&&EVENT_REGEX.test(_e)){typeof Ee=="function"?ge.handlers[_e]=Ee:delete ge.handlers[_e],ge.eventCount=Object.keys(ge.handlers).length;continue}if(Ee===void 0)continue;let{root:be,key:Ae,target:Se}=resolve(fe,_e);if(Se instanceof Layers&&Ee instanceof Layers)Se.mask=Ee.mask;else if(Se instanceof Color$1&&isColorRepresentation(Ee))Se.set(Ee);else if(Se!==null&&typeof Se=="object"&&typeof Se.set=="function"&&typeof Se.copy=="function"&&Ee!=null&&Ee.constructor&&Se.constructor===Ee.constructor)Se.copy(Ee);else if(Se!==null&&typeof Se=="object"&&typeof Se.set=="function"&&Array.isArray(Ee))typeof Se.fromArray=="function"?Se.fromArray(Ee):Se.set(...Ee);else if(Se!==null&&typeof Se=="object"&&typeof Se.set=="function"&&typeof Ee=="number")typeof Se.setScalar=="function"?Se.setScalar(Ee):Se.set(Ee);else{var ve;be[Ae]=Ee,xe&&!xe.linear&&colorMaps.includes(Ae)&&(ve=be[Ae])!=null&&ve.isTexture&&be[Ae].format===RGBAFormat&&be[Ae].type===UnsignedByteType&&(be[Ae].colorSpace=SRGBColorSpace)}}if(ge!=null&&ge.parent&&xe!=null&&xe.internal&&(me=ge.object)!=null&&me.isObject3D&&ye!==ge.eventCount){const _e=ge.object,Ee=xe.internal.interaction.indexOf(_e);Ee>-1&&xe.internal.interaction.splice(Ee,1),ge.eventCount&&_e.raycast!==null&&xe.internal.interaction.push(_e)}return ge&&ge.props.attach===void 0&&(ge.object.isBufferGeometry?ge.props.attach="geometry":ge.object.isMaterial&&(ge.props.attach="material")),ge&&invalidateInstance(ge),fe}function invalidateInstance(fe){var K;if(!fe.parent)return;fe.props.onUpdate==null||fe.props.onUpdate(fe.object);const me=(K=fe.root)==null||K.getState==null?void 0:K.getState();me&&me.internal.frames===0&&me.invalidate()}function updateCamera(fe,K){fe.manual||(isOrthographicCamera$1(fe)?(fe.left=K.width/-2,fe.right=K.width/2,fe.top=K.height/2,fe.bottom=K.height/-2):fe.aspect=K.width/K.height,fe.updateProjectionMatrix())}const isObject3D=fe=>fe?.isObject3D;function makeId(fe){return(fe.eventObject||fe.object).uuid+"/"+fe.index+fe.instanceId}function releaseInternalPointerCapture(fe,K,me,ge){const xe=me.get(K);xe&&(me.delete(K),me.size===0&&(fe.delete(ge),xe.target.releasePointerCapture(ge)))}function removeInteractivity(fe,K){const{internal:me}=fe.getState();me.interaction=me.interaction.filter(ge=>ge!==K),me.initialHits=me.initialHits.filter(ge=>ge!==K),me.hovered.forEach((ge,xe)=>{(ge.eventObject===K||ge.object===K)&&me.hovered.delete(xe)}),me.capturedMap.forEach((ge,xe)=>{releaseInternalPointerCapture(me.capturedMap,K,ge,xe)})}function createEvents(fe){function K(Ee){const{internal:be}=fe.getState(),Ae=Ee.offsetX-be.initialClick[0],Se=Ee.offsetY-be.initialClick[1];return Math.round(Math.sqrt(Ae*Ae+Se*Se))}function me(Ee){return Ee.filter(be=>["Move","Over","Enter","Out","Leave"].some(Ae=>{var Se;return(Se=be.__r3f)==null?void 0:Se.handlers["onPointer"+Ae]}))}function ge(Ee,be){const Ae=fe.getState(),Se=new Set,Ce=[],Te=be?be(Ae.internal.interaction):Ae.internal.interaction;for(let Be=0;Be<Te.length;Be++){const Le=getRootState(Te[Be]);Le&&(Le.raycaster.camera=void 0)}Ae.previousRoot||Ae.events.compute==null||Ae.events.compute(Ee,Ae);function Re(Be){const Le=getRootState(Be);if(!Le||!Le.events.enabled||Le.raycaster.camera===null)return[];if(Le.raycaster.camera===void 0){var Oe;Le.events.compute==null||Le.events.compute(Ee,Le,(Oe=Le.previousRoot)==null?void 0:Oe.getState()),Le.raycaster.camera===void 0&&(Le.raycaster.camera=null)}return Le.raycaster.camera?Le.raycaster.intersectObject(Be,!0):[]}let De=Te.flatMap(Re).sort((Be,Le)=>{const Oe=getRootState(Be.object),Fe=getRootState(Le.object);return!Oe||!Fe?Be.distance-Le.distance:Fe.events.priority-Oe.events.priority||Be.distance-Le.distance}).filter(Be=>{const Le=makeId(Be);return Se.has(Le)?!1:(Se.add(Le),!0)});Ae.events.filter&&(De=Ae.events.filter(De,Ae));for(const Be of De){let Le=Be.object;for(;Le;){var Ie;(Ie=Le.__r3f)!=null&&Ie.eventCount&&Ce.push({...Be,eventObject:Le}),Le=Le.parent}}if("pointerId"in Ee&&Ae.internal.capturedMap.has(Ee.pointerId))for(let Be of Ae.internal.capturedMap.get(Ee.pointerId).values())Se.has(makeId(Be.intersection))||Ce.push(Be.intersection);return Ce}function xe(Ee,be,Ae,Se){if(Ee.length){const Ce={stopped:!1};for(const Te of Ee){let Re=getRootState(Te.object);if(Re||Te.object.traverseAncestors(De=>{const Ie=getRootState(De);if(Ie)return Re=Ie,!1}),Re){const{raycaster:De,pointer:Ie,camera:Be,internal:Le}=Re,Oe=new Vector3(Ie.x,Ie.y,0).unproject(Be),Fe=je=>{var Ge,Xe;return(Ge=(Xe=Le.capturedMap.get(je))==null?void 0:Xe.has(Te.eventObject))!=null?Ge:!1},Ue=je=>{const Ge={intersection:Te,target:be.target};Le.capturedMap.has(je)?Le.capturedMap.get(je).set(Te.eventObject,Ge):Le.capturedMap.set(je,new Map([[Te.eventObject,Ge]])),be.target.setPointerCapture(je)},Ne=je=>{const Ge=Le.capturedMap.get(je);Ge&&releaseInternalPointerCapture(Le.capturedMap,Te.eventObject,Ge,je)};let He={};for(let je in be){let Ge=be[je];typeof Ge!="function"&&(He[je]=Ge)}let ze={...Te,...He,pointer:Ie,intersections:Ee,stopped:Ce.stopped,delta:Ae,unprojectedPoint:Oe,ray:De.ray,camera:Be,stopPropagation(){const je="pointerId"in be&&Le.capturedMap.get(be.pointerId);if((!je||je.has(Te.eventObject))&&(ze.stopped=Ce.stopped=!0,Le.hovered.size&&Array.from(Le.hovered.values()).find(Ge=>Ge.eventObject===Te.eventObject))){const Ge=Ee.slice(0,Ee.indexOf(Te));ye([...Ge,Te])}},target:{hasPointerCapture:Fe,setPointerCapture:Ue,releasePointerCapture:Ne},currentTarget:{hasPointerCapture:Fe,setPointerCapture:Ue,releasePointerCapture:Ne},nativeEvent:be};if(Se(ze),Ce.stopped===!0)break}}}return Ee}function ye(Ee){const{internal:be}=fe.getState();for(const Ae of be.hovered.values())if(!Ee.length||!Ee.find(Se=>Se.object===Ae.object&&Se.index===Ae.index&&Se.instanceId===Ae.instanceId)){const Ce=Ae.eventObject.__r3f;if(be.hovered.delete(makeId(Ae)),Ce!=null&&Ce.eventCount){const Te=Ce.handlers,Re={...Ae,intersections:Ee};Te.onPointerOut==null||Te.onPointerOut(Re),Te.onPointerLeave==null||Te.onPointerLeave(Re)}}}function ve(Ee,be){for(let Ae=0;Ae<be.length;Ae++){const Se=be[Ae].__r3f;Se==null||Se.handlers.onPointerMissed==null||Se.handlers.onPointerMissed(Ee)}}function _e(Ee){switch(Ee){case"onPointerLeave":case"onPointerCancel":return()=>ye([]);case"onLostPointerCapture":return be=>{const{internal:Ae}=fe.getState();"pointerId"in be&&Ae.capturedMap.has(be.pointerId)&&requestAnimationFrame(()=>{Ae.capturedMap.has(be.pointerId)&&(Ae.capturedMap.delete(be.pointerId),ye([]))})}}return function(Ae){const{onPointerMissed:Se,internal:Ce}=fe.getState();Ce.lastEvent.current=Ae;const Te=Ee==="onPointerMove",Re=Ee==="onClick"||Ee==="onContextMenu"||Ee==="onDoubleClick",Ie=ge(Ae,Te?me:void 0),Be=Re?K(Ae):0;Ee==="onPointerDown"&&(Ce.initialClick=[Ae.offsetX,Ae.offsetY],Ce.initialHits=Ie.map(Oe=>Oe.eventObject)),Re&&!Ie.length&&Be<=2&&(ve(Ae,Ce.interaction),Se&&Se(Ae)),Te&&ye(Ie);function Le(Oe){const Fe=Oe.eventObject,Ue=Fe.__r3f;if(!(Ue!=null&&Ue.eventCount))return;const Ne=Ue.handlers;if(Te){if(Ne.onPointerOver||Ne.onPointerEnter||Ne.onPointerOut||Ne.onPointerLeave){const He=makeId(Oe),ze=Ce.hovered.get(He);ze?ze.stopped&&Oe.stopPropagation():(Ce.hovered.set(He,Oe),Ne.onPointerOver==null||Ne.onPointerOver(Oe),Ne.onPointerEnter==null||Ne.onPointerEnter(Oe))}Ne.onPointerMove==null||Ne.onPointerMove(Oe)}else{const He=Ne[Ee];He?(!Re||Ce.initialHits.includes(Fe))&&(ve(Ae,Ce.interaction.filter(ze=>!Ce.initialHits.includes(ze))),He(Oe)):Re&&Ce.initialHits.includes(Fe)&&ve(Ae,Ce.interaction.filter(ze=>!Ce.initialHits.includes(ze)))}}xe(Ie,Ae,Be,Le)}}return{handlePointer:_e}}const isRenderer=fe=>!!(fe!=null&&fe.render),context$2=reactExports.createContext(null),createStore$1=(fe,K)=>{const me=createWithEqualityFn((_e,Ee)=>{const be=new Vector3,Ae=new Vector3,Se=new Vector3;function Ce(Be=Ee().camera,Le=Ae,Oe=Ee().size){const{width:Fe,height:Ue,top:Ne,left:He}=Oe,ze=Fe/Ue;Le.isVector3?Se.copy(Le):Se.set(...Le);const je=Be.getWorldPosition(be).distanceTo(Se);if(isOrthographicCamera$1(Be))return{width:Fe/Be.zoom,height:Ue/Be.zoom,top:Ne,left:He,factor:1,distance:je,aspect:ze};{const Ge=Be.fov*Math.PI/180,Xe=2*Math.tan(Ge/2)*je,qe=Xe*(Fe/Ue);return{width:qe,height:Xe,top:Ne,left:He,factor:Fe/qe,distance:je,aspect:ze}}}let Te;const Re=Be=>_e(Le=>({performance:{...Le.performance,current:Be}})),De=new Vector2;return{set:_e,get:Ee,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},scene:null,xr:null,invalidate:(Be=1)=>fe(Ee(),Be),advance:(Be,Le)=>K(Be,Le,Ee()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Clock,pointer:De,mouse:De,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const Be=Ee();Te&&clearTimeout(Te),Be.performance.current!==Be.performance.min&&Re(Be.performance.min),Te=setTimeout(()=>Re(Ee().performance.max),Be.performance.debounce)}},size:{width:0,height:0,top:0,left:0},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:Ce},setEvents:Be=>_e(Le=>({...Le,events:{...Le.events,...Be}})),setSize:(Be,Le,Oe=0,Fe=0)=>{const Ue=Ee().camera,Ne={width:Be,height:Le,top:Oe,left:Fe};_e(He=>({size:Ne,viewport:{...He.viewport,...Ce(Ue,Ae,Ne)}}))},setDpr:Be=>_e(Le=>{const Oe=calculateDpr(Be);return{viewport:{...Le.viewport,dpr:Oe,initialDpr:Le.viewport.initialDpr||Oe}}}),setFrameloop:(Be="always")=>{const Le=Ee().clock;Le.stop(),Le.elapsedTime=0,Be!=="never"&&(Le.start(),Le.elapsedTime=0),_e(()=>({frameloop:Be}))},previousRoot:void 0,internal:{interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,lastEvent:reactExports.createRef(),active:!1,frames:0,priority:0,subscribe:(Be,Le,Oe)=>{const Fe=Ee().internal;return Fe.priority=Fe.priority+(Le>0?1:0),Fe.subscribers.push({ref:Be,priority:Le,store:Oe}),Fe.subscribers=Fe.subscribers.sort((Ue,Ne)=>Ue.priority-Ne.priority),()=>{const Ue=Ee().internal;Ue!=null&&Ue.subscribers&&(Ue.priority=Ue.priority-(Le>0?1:0),Ue.subscribers=Ue.subscribers.filter(Ne=>Ne.ref!==Be))}}}}}),ge=me.getState();let xe=ge.size,ye=ge.viewport.dpr,ve=ge.camera;return me.subscribe(()=>{const{camera:_e,size:Ee,viewport:be,gl:Ae,set:Se}=me.getState();if(Ee.width!==xe.width||Ee.height!==xe.height||be.dpr!==ye){xe=Ee,ye=be.dpr,updateCamera(_e,Ee),be.dpr>0&&Ae.setPixelRatio(be.dpr);const Ce=typeof HTMLCanvasElement<"u"&&Ae.domElement instanceof HTMLCanvasElement;Ae.setSize(Ee.width,Ee.height,Ce)}_e!==ve&&(ve=_e,Se(Ce=>({viewport:{...Ce.viewport,...Ce.viewport.getCurrentViewport(_e)}})))}),me.subscribe(_e=>fe(_e)),me};function useStore$1(){const fe=reactExports.useContext(context$2);if(!fe)throw new Error("R3F: Hooks can only be used within the Canvas component!");return fe}function useThree(fe=me=>me,K){return useStore$1()(fe,K)}function useFrame(fe,K=0){const me=useStore$1(),ge=me.getState().internal.subscribe,xe=useMutableCallback(fe);return useIsomorphicLayoutEffect(()=>ge(xe,K,me),[K,ge,me]),null}const memoizedLoaders=new WeakMap,isConstructor$1=fe=>{var K;return typeof fe=="function"&&(fe==null||(K=fe.prototype)==null?void 0:K.constructor)===fe};function loadingFn(fe,K){return function(me,...ge){let xe;return isConstructor$1(me)?(xe=memoizedLoaders.get(me),xe||(xe=new me,memoizedLoaders.set(me,xe))):xe=me,fe&&fe(xe),Promise.all(ge.map(ye=>new Promise((ve,_e)=>xe.load(ye,Ee=>{isObject3D(Ee?.scene)&&Object.assign(Ee,buildGraph(Ee.scene)),ve(Ee)},K,Ee=>_e(new Error(`Could not load ${ye}: ${Ee?.message}`))))))}}function useLoader(fe,K,me,ge){const xe=Array.isArray(K)?K:[K],ye=suspend(loadingFn(me,ge),[fe,...xe],{equal:is$1.equ});return Array.isArray(K)?ye:ye[0]}useLoader.preload=function(fe,K,me){const ge=Array.isArray(K)?K:[K];return preload(loadingFn(me),[fe,...ge])};useLoader.clear=function(fe,K){const me=Array.isArray(K)?K:[K];return clear([fe,...me])};function createReconciler(fe){const K=Reconciler(fe);return K.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:reactExports.version}),K}const NoEventPriority=0,catalogue={},PREFIX_REGEX=/^three(?=[A-Z])/,toPascalCase=fe=>`${fe[0].toUpperCase()}${fe.slice(1)}`;let i$4=0;const isConstructor=fe=>typeof fe=="function";function extend$3(fe){if(isConstructor(fe)){const K=`${i$4++}`;return catalogue[K]=fe,K}else Object.assign(catalogue,fe)}function validateInstance(fe,K){const me=toPascalCase(fe),ge=catalogue[me];if(fe!=="primitive"&&!ge)throw new Error(`R3F: ${me} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(fe==="primitive"&&!K.object)throw new Error("R3F: Primitives without 'object' are invalid!");if(K.args!==void 0&&!Array.isArray(K.args))throw new Error("R3F: The args prop must be an array!")}function createInstance(fe,K,me){var ge;return fe=toPascalCase(fe)in catalogue?fe:fe.replace(PREFIX_REGEX,""),validateInstance(fe,K),fe==="primitive"&&(ge=K.object)!=null&&ge.__r3f&&delete K.object.__r3f,prepare(K.object,me,fe,K)}function hideInstance(fe){if(!fe.isHidden){var K;fe.props.attach&&(K=fe.parent)!=null&&K.object?detach(fe.parent,fe):isObject3D(fe.object)&&(fe.object.visible=!1),fe.isHidden=!0,invalidateInstance(fe)}}function unhideInstance(fe){if(fe.isHidden){var K;fe.props.attach&&(K=fe.parent)!=null&&K.object?attach(fe.parent,fe):isObject3D(fe.object)&&fe.props.visible!==!1&&(fe.object.visible=!0),fe.isHidden=!1,invalidateInstance(fe)}}function handleContainerEffects(fe,K,me){const ge=K.root.getState();if(!(!fe.parent&&fe.object!==ge.scene)){if(!K.object){var xe,ye;const ve=catalogue[toPascalCase(K.type)];K.object=(xe=K.props.object)!=null?xe:new ve(...(ye=K.props.args)!=null?ye:[]),K.object.__r3f=K}if(applyProps(K.object,K.props),K.props.attach)attach(fe,K);else if(isObject3D(K.object)&&isObject3D(fe.object)){const ve=fe.object.children.indexOf(me?.object);if(me&&ve!==-1){const _e=fe.object.children.indexOf(K.object);if(_e!==-1){fe.object.children.splice(_e,1);const Ee=_e<ve?ve-1:ve;fe.object.children.splice(Ee,0,K.object)}else K.object.parent=fe.object,fe.object.children.splice(ve,0,K.object),K.object.dispatchEvent({type:"added"}),fe.object.dispatchEvent({type:"childadded",child:K.object})}else fe.object.add(K.object)}for(const ve of K.children)handleContainerEffects(K,ve);invalidateInstance(K)}}function appendChild(fe,K){K&&(K.parent=fe,fe.children.push(K),handleContainerEffects(fe,K))}function insertBefore(fe,K,me){if(!K||!me)return;K.parent=fe;const ge=fe.children.indexOf(me);ge!==-1?fe.children.splice(ge,0,K):fe.children.push(K),handleContainerEffects(fe,K,me)}function disposeOnIdle(fe){if(typeof fe.dispose=="function"){const K=()=>{try{fe.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT<"u"?K():schedulerExports.unstable_scheduleCallback(schedulerExports.unstable_IdlePriority,K)}}function removeChild(fe,K,me){if(!K)return;K.parent=null;const ge=fe.children.indexOf(K);ge!==-1&&fe.children.splice(ge,1),K.props.attach?detach(fe,K):isObject3D(K.object)&&isObject3D(fe.object)&&(fe.object.remove(K.object),removeInteractivity(findInitialRoot(K),K.object));const xe=K.props.dispose!==null&&me!==!1;for(let ye=K.children.length-1;ye>=0;ye--){const ve=K.children[ye];removeChild(K,ve,xe)}K.children.length=0,delete K.object.__r3f,xe&&K.type!=="primitive"&&K.object.type!=="Scene"&&disposeOnIdle(K.object),me===void 0&&invalidateInstance(K)}function setFiberRef(fe,K){for(const me of[fe,fe.alternate])if(me!==null)if(typeof me.ref=="function"){me.refCleanup==null||me.refCleanup();const ge=me.ref(K);typeof ge=="function"&&(me.refCleanup=ge)}else me.ref&&(me.ref.current=K)}const reconstructed=[];function swapInstances(){for(const[me]of reconstructed){const ge=me.parent;if(ge){me.props.attach?detach(ge,me):isObject3D(me.object)&&isObject3D(ge.object)&&ge.object.remove(me.object);for(const xe of me.children)xe.props.attach?detach(me,xe):isObject3D(xe.object)&&isObject3D(me.object)&&me.object.remove(xe.object)}me.isHidden&&unhideInstance(me),me.object.__r3f&&delete me.object.__r3f,me.type!=="primitive"&&disposeOnIdle(me.object)}for(const[me,ge,xe]of reconstructed){me.props=ge;const ye=me.parent;if(ye){var fe,K;const ve=catalogue[toPascalCase(me.type)];me.object=(fe=me.props.object)!=null?fe:new ve(...(K=me.props.args)!=null?K:[]),me.object.__r3f=me,setFiberRef(xe,me.object),applyProps(me.object,me.props),me.props.attach?attach(ye,me):isObject3D(me.object)&&isObject3D(ye.object)&&ye.object.add(me.object);for(const _e of me.children)_e.props.attach?attach(me,_e):isObject3D(_e.object)&&isObject3D(me.object)&&me.object.add(_e.object);invalidateInstance(me)}}reconstructed.length=0}const handleTextInstance=()=>{},NO_CONTEXT={};let currentUpdatePriority=NoEventPriority;const NoFlags=0,Update=4,reconciler=createReconciler({isPrimaryRenderer:!1,warnsIfNotActing:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,createInstance,removeChild,appendChild,appendInitialChild:appendChild,insertBefore,appendChildToContainer(fe,K){const me=fe.getState().scene.__r3f;!K||!me||appendChild(me,K)},removeChildFromContainer(fe,K){const me=fe.getState().scene.__r3f;!K||!me||removeChild(me,K)},insertInContainerBefore(fe,K,me){const ge=fe.getState().scene.__r3f;!K||!me||!ge||insertBefore(ge,K,me)},getRootHostContext:()=>NO_CONTEXT,getChildHostContext:()=>NO_CONTEXT,commitUpdate(fe,K,me,ge,xe){var ye,ve,_e;validateInstance(K,ge);let Ee=!1;if((fe.type==="primitive"&&me.object!==ge.object||((ye=ge.args)==null?void 0:ye.length)!==((ve=me.args)==null?void 0:ve.length)||(_e=ge.args)!=null&&_e.some((Ae,Se)=>{var Ce;return Ae!==((Ce=me.args)==null?void 0:Ce[Se])}))&&(Ee=!0),Ee)reconstructed.push([fe,{...ge},xe]);else{const Ae=diffProps(fe,ge);Object.keys(Ae).length&&(Object.assign(fe.props,Ae),applyProps(fe.object,Ae))}(xe.sibling===null||(xe.flags&Update)===NoFlags)&&swapInstances()},finalizeInitialChildren:()=>!1,commitMount(){},getPublicInstance:fe=>fe?.object,prepareForCommit:()=>null,preparePortalMount:fe=>prepare(fe.getState().scene,fe,"",{}),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance,unhideInstance,createTextInstance:handleTextInstance,hideTextInstance:handleTextInstance,unhideTextInstance:handleTextInstance,scheduleTimeout:typeof setTimeout=="function"?setTimeout:void 0,cancelTimeout:typeof clearTimeout=="function"?clearTimeout:void 0,noTimeout:-1,getInstanceFromNode:()=>null,beforeActiveInstanceBlur(){},afterActiveInstanceBlur(){},detachDeletedInstance(){},prepareScopeUpdate(){},getInstanceFromScope:()=>null,shouldAttemptEagerTransition:()=>!1,trackSchedulerEvent:()=>{},resolveEventType:()=>null,resolveEventTimeStamp:()=>-1.1,requestPostPaintCallback(){},maySuspendCommit:()=>!1,preloadInstance:()=>!0,startSuspendingCommit(){},suspendInstance(){},waitForCommitToBeReady:()=>null,NotPendingTransition:null,HostTransitionContext:reactExports.createContext(null),setCurrentUpdatePriority(fe){currentUpdatePriority=fe},getCurrentUpdatePriority(){return currentUpdatePriority},resolveUpdatePriority(){var fe;if(currentUpdatePriority!==NoEventPriority)return currentUpdatePriority;switch(typeof window<"u"&&((fe=window.event)==null?void 0:fe.type)){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return constantsExports.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return constantsExports.ContinuousEventPriority;default:return constantsExports.DefaultEventPriority}},resetFormInstance(){}}),_roots=new Map,shallowLoose={objects:"shallow",strict:!1};function computeInitialSize(fe,K){if(!K&&typeof HTMLCanvasElement<"u"&&fe instanceof HTMLCanvasElement&&fe.parentElement){const{width:me,height:ge,top:xe,left:ye}=fe.parentElement.getBoundingClientRect();return{width:me,height:ge,top:xe,left:ye}}else if(!K&&typeof OffscreenCanvas<"u"&&fe instanceof OffscreenCanvas)return{width:fe.width,height:fe.height,top:0,left:0};return{width:0,height:0,top:0,left:0,...K}}function createRoot(fe){const K=_roots.get(fe),me=K?.fiber,ge=K?.store;K&&console.warn("R3F.createRoot should only be called once!");const xe=typeof reportError=="function"?reportError:console.error,ye=ge||createStore$1(invalidate,advance),ve=me||reconciler.createContainer(ye,constantsExports.ConcurrentRoot,null,!1,null,"",xe,xe,xe,null);K||_roots.set(fe,{fiber:ve,store:ye});let _e,Ee,be=!1,Ae=null;return{async configure(Se={}){let Ce;Ae=new Promise(Wt=>Ce=Wt);let{gl:Te,size:Re,scene:De,events:Ie,onCreated:Be,shadows:Le=!1,linear:Oe=!1,flat:Fe=!1,legacy:Ue=!1,orthographic:Ne=!1,frameloop:He="always",dpr:ze=[1,2],performance:je,raycaster:Ge,camera:Xe,onPointerMissed:qe}=Se,Qe=ye.getState(),nt=Qe.gl;if(!Qe.gl){const Wt={canvas:fe,powerPreference:"high-performance",antialias:!0,alpha:!0},Kt=typeof Te=="function"?await Te(Wt):Te;isRenderer(Kt)?nt=Kt:nt=new WebGLRenderer({...Wt,...Te}),Qe.set({gl:nt})}let Nt=Qe.raycaster;Nt||Qe.set({raycaster:Nt=new Raycaster});const{params:Ye,...at}=Ge||{};if(is$1.equ(at,Nt,shallowLoose)||applyProps(Nt,{...at}),is$1.equ(Ye,Nt.params,shallowLoose)||applyProps(Nt,{params:{...Nt.params,...Ye}}),!Qe.camera||Qe.camera===Ee&&!is$1.equ(Ee,Xe,shallowLoose)){Ee=Xe;const Wt=Xe?.isCamera,Kt=Wt?Xe:Ne?new OrthographicCamera(0,0,0,0,.1,1e3):new PerspectiveCamera(75,0,.1,1e3);Wt||(Kt.position.z=5,Xe&&(applyProps(Kt,Xe),Kt.manual||("aspect"in Xe||"left"in Xe||"right"in Xe||"bottom"in Xe||"top"in Xe)&&(Kt.manual=!0,Kt.updateProjectionMatrix())),!Qe.camera&&!(Xe!=null&&Xe.rotation)&&Kt.lookAt(0,0,0)),Qe.set({camera:Kt}),Nt.camera=Kt}if(!Qe.scene){let Wt;De!=null&&De.isScene?(Wt=De,prepare(Wt,ye,"",{})):(Wt=new Scene,prepare(Wt,ye,"",{}),De&&applyProps(Wt,De)),Qe.set({scene:Wt})}Ie&&!Qe.events.handlers&&Qe.set({events:Ie(ye)});const rt=computeInitialSize(fe,Re);if(is$1.equ(rt,Qe.size,shallowLoose)||Qe.setSize(rt.width,rt.height,rt.top,rt.left),ze&&Qe.viewport.dpr!==calculateDpr(ze)&&Qe.setDpr(ze),Qe.frameloop!==He&&Qe.setFrameloop(He),Qe.onPointerMissed||Qe.set({onPointerMissed:qe}),je&&!is$1.equ(je,Qe.performance,shallowLoose)&&Qe.set(Wt=>({performance:{...Wt.performance,...je}})),!Qe.xr){var Ft;const Wt=(Yt,Gt)=>{const an=ye.getState();an.frameloop!=="never"&&advance(Yt,!0,an,Gt)},Kt=()=>{const Yt=ye.getState();Yt.gl.xr.enabled=Yt.gl.xr.isPresenting,Yt.gl.xr.setAnimationLoop(Yt.gl.xr.isPresenting?Wt:null),Yt.gl.xr.isPresenting||invalidate(Yt)},Pt={connect(){const Yt=ye.getState().gl;Yt.xr.addEventListener("sessionstart",Kt),Yt.xr.addEventListener("sessionend",Kt)},disconnect(){const Yt=ye.getState().gl;Yt.xr.removeEventListener("sessionstart",Kt),Yt.xr.removeEventListener("sessionend",Kt)}};typeof((Ft=nt.xr)==null?void 0:Ft.addEventListener)=="function"&&Pt.connect(),Qe.set({xr:Pt})}if(nt.shadowMap){const Wt=nt.shadowMap.enabled,Kt=nt.shadowMap.type;if(nt.shadowMap.enabled=!!Le,is$1.boo(Le))nt.shadowMap.type=PCFSoftShadowMap;else if(is$1.str(Le)){var Je;const Pt={basic:BasicShadowMap,percentage:PCFShadowMap,soft:PCFSoftShadowMap,variance:VSMShadowMap};nt.shadowMap.type=(Je=Pt[Le])!=null?Je:PCFSoftShadowMap}else is$1.obj(Le)&&Object.assign(nt.shadowMap,Le);(Wt!==nt.shadowMap.enabled||Kt!==nt.shadowMap.type)&&(nt.shadowMap.needsUpdate=!0)}return ColorManagement.enabled=!Ue,be||(nt.outputColorSpace=Oe?LinearSRGBColorSpace:SRGBColorSpace,nt.toneMapping=Fe?NoToneMapping:ACESFilmicToneMapping),Qe.legacy!==Ue&&Qe.set(()=>({legacy:Ue})),Qe.linear!==Oe&&Qe.set(()=>({linear:Oe})),Qe.flat!==Fe&&Qe.set(()=>({flat:Fe})),Te&&!is$1.fun(Te)&&!isRenderer(Te)&&!is$1.equ(Te,nt,shallowLoose)&&applyProps(nt,Te),_e=Be,be=!0,Ce(),this},render(Se){return!be&&!Ae&&this.configure(),Ae.then(()=>{reconciler.updateContainer(jsxRuntimeExports.jsx(Provider,{store:ye,children:Se,onCreated:_e,rootElement:fe}),ve,null,()=>{})}),ye},unmount(){unmountComponentAtNode(fe)}}}function Provider({store:fe,children:K,onCreated:me,rootElement:ge}){return useIsomorphicLayoutEffect(()=>{const xe=fe.getState();xe.set(ye=>({internal:{...ye.internal,active:!0}})),me&&me(xe),fe.getState().events.connected||xe.events.connect==null||xe.events.connect(ge)},[]),jsxRuntimeExports.jsx(context$2.Provider,{value:fe,children:K})}function unmountComponentAtNode(fe,K){const me=_roots.get(fe),ge=me?.fiber;if(ge){const xe=me?.store.getState();xe&&(xe.internal.active=!1),reconciler.updateContainer(null,ge,null,()=>{xe&&setTimeout(()=>{try{var ye,ve,_e,Ee;xe.events.disconnect==null||xe.events.disconnect(),(ye=xe.gl)==null||(ve=ye.renderLists)==null||ve.dispose==null||ve.dispose(),(_e=xe.gl)==null||_e.forceContextLoss==null||_e.forceContextLoss(),(Ee=xe.gl)!=null&&Ee.xr&&xe.xr.disconnect(),dispose(xe.scene),_roots.delete(fe)}catch{}},500)})}}function createPortal(fe,K,me){return jsxRuntimeExports.jsx(Portal,{children:fe,container:K,state:me})}function Portal({state:fe={},children:K,container:me}){const{events:ge,size:xe,...ye}=fe,ve=useStore$1(),[_e]=reactExports.useState(()=>new Raycaster),[Ee]=reactExports.useState(()=>new Vector2),be=useMutableCallback((Se,Ce)=>{let Te;if(Ce.camera&&xe){const Re=Ce.camera;Te=Se.viewport.getCurrentViewport(Re,new Vector3,xe),Re!==Se.camera&&updateCamera(Re,xe)}return{...Se,...Ce,scene:me,raycaster:_e,pointer:Ee,mouse:Ee,previousRoot:ve,events:{...Se.events,...Ce.events,...ge},size:{...Se.size,...xe},viewport:{...Se.viewport,...Te},setEvents:Re=>Ce.set(De=>({...De,events:{...De.events,...Re}}))}}),Ae=reactExports.useMemo(()=>{const Se=createWithEqualityFn((Te,Re)=>({...ye,set:Te,get:Re})),Ce=Te=>Se.setState(Re=>be.current(Te,Re));return Ce(ve.getState()),ve.subscribe(Ce),Se},[ve,me]);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:reconciler.createPortal(jsxRuntimeExports.jsx(context$2.Provider,{value:Ae,children:K}),Ae,null)})}function createSubs(fe,K){const me={callback:fe};return K.add(me),()=>void K.delete(me)}const globalEffects=new Set,globalAfterEffects=new Set,globalTailEffects=new Set,addEffect=fe=>createSubs(fe,globalEffects),addAfterEffect=fe=>createSubs(fe,globalAfterEffects);function run$1(fe,K){if(fe.size)for(const{callback:me}of fe.values())me(K)}function flushGlobalEffects(fe,K){switch(fe){case"before":return run$1(globalEffects,K);case"after":return run$1(globalAfterEffects,K);case"tail":return run$1(globalTailEffects,K)}}let subscribers,subscription;function update(fe,K,me){let ge=K.clock.getDelta();K.frameloop==="never"&&typeof fe=="number"&&(ge=fe-K.clock.elapsedTime,K.clock.oldTime=K.clock.elapsedTime,K.clock.elapsedTime=fe),subscribers=K.internal.subscribers;for(let xe=0;xe<subscribers.length;xe++)subscription=subscribers[xe],subscription.ref.current(subscription.store.getState(),ge,me);return!K.internal.priority&&K.gl.render&&K.gl.render(K.scene,K.camera),K.internal.frames=Math.max(0,K.internal.frames-1),K.frameloop==="always"?1:K.internal.frames}let running=!1,useFrameInProgress=!1,repeat,frame,state;function loop(fe){frame=requestAnimationFrame(loop),running=!0,repeat=0,flushGlobalEffects("before",fe),useFrameInProgress=!0;for(const me of _roots.values()){var K;state=me.store.getState(),state.internal.active&&(state.frameloop==="always"||state.internal.frames>0)&&!((K=state.gl.xr)!=null&&K.isPresenting)&&(repeat+=update(fe,state))}if(useFrameInProgress=!1,flushGlobalEffects("after",fe),repeat===0)return flushGlobalEffects("tail",fe),running=!1,cancelAnimationFrame(frame)}function invalidate(fe,K=1){var me;if(!fe)return _roots.forEach(ge=>invalidate(ge.store.getState(),K));(me=fe.gl.xr)!=null&&me.isPresenting||!fe.internal.active||fe.frameloop==="never"||(K>1?fe.internal.frames=Math.min(60,fe.internal.frames+K):useFrameInProgress?fe.internal.frames=2:fe.internal.frames=1,running||(running=!0,requestAnimationFrame(loop)))}function advance(fe,K=!0,me,ge){if(K&&flushGlobalEffects("before",fe),me)update(fe,me,ge);else for(const xe of _roots.values())update(fe,xe.store.getState());K&&flushGlobalEffects("after",fe)}const DOM_EVENTS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function createPointerEvents(fe){const{handlePointer:K}=createEvents(fe);return{priority:1,enabled:!0,compute(me,ge,xe){ge.pointer.set(me.offsetX/ge.size.width*2-1,-(me.offsetY/ge.size.height)*2+1),ge.raycaster.setFromCamera(ge.pointer,ge.camera)},connected:void 0,handlers:Object.keys(DOM_EVENTS).reduce((me,ge)=>({...me,[ge]:K(ge)}),{}),update:()=>{var me;const{events:ge,internal:xe}=fe.getState();(me=xe.lastEvent)!=null&&me.current&&ge.handlers&&ge.handlers.onPointerMove(xe.lastEvent.current)},connect:me=>{const{set:ge,events:xe}=fe.getState();if(xe.disconnect==null||xe.disconnect(),ge(ye=>({events:{...ye.events,connected:me}})),xe.handlers)for(const ye in xe.handlers){const ve=xe.handlers[ye],[_e,Ee]=DOM_EVENTS[ye];me.addEventListener(_e,ve,{passive:Ee})}},disconnect:()=>{const{set:me,events:ge}=fe.getState();if(ge.connected){if(ge.handlers)for(const xe in ge.handlers){const ye=ge.handlers[xe],[ve]=DOM_EVENTS[xe];ge.connected.removeEventListener(ve,ye)}me(xe=>({events:{...xe.events,connected:void 0}}))}}}}function g$2(fe,K){let me;return(...ge)=>{window.clearTimeout(me),me=window.setTimeout(()=>fe(...ge),K)}}function j$1({debounce:fe,scroll:K,polyfill:me,offsetSize:ge}={debounce:0,scroll:!1,offsetSize:!1}){const xe=me||(typeof window>"u"?class{}:window.ResizeObserver);if(!xe)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[ye,ve]=reactExports.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),_e=reactExports.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:ye,orientationHandler:null}),Ee=fe?typeof fe=="number"?fe:fe.scroll:null,be=fe?typeof fe=="number"?fe:fe.resize:null,Ae=reactExports.useRef(!1);reactExports.useEffect(()=>(Ae.current=!0,()=>void(Ae.current=!1)));const[Se,Ce,Te]=reactExports.useMemo(()=>{const Be=()=>{if(!_e.current.element)return;const{left:Le,top:Oe,width:Fe,height:Ue,bottom:Ne,right:He,x:ze,y:je}=_e.current.element.getBoundingClientRect(),Ge={left:Le,top:Oe,width:Fe,height:Ue,bottom:Ne,right:He,x:ze,y:je};_e.current.element instanceof HTMLElement&&ge&&(Ge.height=_e.current.element.offsetHeight,Ge.width=_e.current.element.offsetWidth),Object.freeze(Ge),Ae.current&&!D$2(_e.current.lastBounds,Ge)&&ve(_e.current.lastBounds=Ge)};return[Be,be?g$2(Be,be):Be,Ee?g$2(Be,Ee):Be]},[ve,ge,Ee,be]);function Re(){_e.current.scrollContainers&&(_e.current.scrollContainers.forEach(Be=>Be.removeEventListener("scroll",Te,!0)),_e.current.scrollContainers=null),_e.current.resizeObserver&&(_e.current.resizeObserver.disconnect(),_e.current.resizeObserver=null),_e.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",_e.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",_e.current.orientationHandler))}function De(){_e.current.element&&(_e.current.resizeObserver=new xe(Te),_e.current.resizeObserver.observe(_e.current.element),K&&_e.current.scrollContainers&&_e.current.scrollContainers.forEach(Be=>Be.addEventListener("scroll",Te,{capture:!0,passive:!0})),_e.current.orientationHandler=()=>{Te()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",_e.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",_e.current.orientationHandler))}const Ie=Be=>{!Be||Be===_e.current.element||(Re(),_e.current.element=Be,_e.current.scrollContainers=E$1(Be),De())};return X$3(Te,!!K),W$2(Ce),reactExports.useEffect(()=>{Re(),De()},[K,Te,Ce]),reactExports.useEffect(()=>Re,[]),[Ie,ye,Se]}function W$2(fe){reactExports.useEffect(()=>{const K=fe;return window.addEventListener("resize",K),()=>void window.removeEventListener("resize",K)},[fe])}function X$3(fe,K){reactExports.useEffect(()=>{if(K){const me=fe;return window.addEventListener("scroll",me,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",me,!0)}},[fe,K])}function E$1(fe){const K=[];if(!fe||fe===document.body)return K;const{overflow:me,overflowX:ge,overflowY:xe}=window.getComputedStyle(fe);return[me,ge,xe].some(ye=>ye==="auto"||ye==="scroll")&&K.push(fe),[...K,...E$1(fe.parentElement)]}const k$1=["x","y","top","bottom","left","right","width","height"],D$2=(fe,K)=>k$1.every(me=>fe[me]===K[me]);function CanvasImpl({ref:fe,children:K,fallback:me,resize:ge,style:xe,gl:ye,events:ve=createPointerEvents,eventSource:_e,eventPrefix:Ee,shadows:be,linear:Ae,flat:Se,legacy:Ce,orthographic:Te,frameloop:Re,dpr:De,performance:Ie,raycaster:Be,camera:Le,scene:Oe,onPointerMissed:Fe,onCreated:Ue,...Ne}){reactExports.useMemo(()=>extend$3(THREE$1),[]);const He=useBridge(),[ze,je]=j$1({scroll:!0,debounce:{scroll:50,resize:0},...ge}),Ge=reactExports.useRef(null),Xe=reactExports.useRef(null);reactExports.useImperativeHandle(fe,()=>Ge.current);const qe=useMutableCallback(Fe),[Qe,nt]=reactExports.useState(!1),[Nt,Ye]=reactExports.useState(!1);if(Qe)throw Qe;if(Nt)throw Nt;const at=reactExports.useRef(null);useIsomorphicLayoutEffect(()=>{const Ft=Ge.current;if(je.width>0&&je.height>0&&Ft){at.current||(at.current=createRoot(Ft));async function Je(){await at.current.configure({gl:ye,scene:Oe,events:ve,shadows:be,linear:Ae,flat:Se,legacy:Ce,orthographic:Te,frameloop:Re,dpr:De,performance:Ie,raycaster:Be,camera:Le,size:je,onPointerMissed:(...Wt)=>qe.current==null?void 0:qe.current(...Wt),onCreated:Wt=>{Wt.events.connect==null||Wt.events.connect(_e?isRef$1(_e)?_e.current:_e:Xe.current),Ee&&Wt.setEvents({compute:(Kt,Pt)=>{const Yt=Kt[Ee+"X"],Gt=Kt[Ee+"Y"];Pt.pointer.set(Yt/Pt.size.width*2-1,-(Gt/Pt.size.height)*2+1),Pt.raycaster.setFromCamera(Pt.pointer,Pt.camera)}}),Ue?.(Wt)}}),at.current.render(jsxRuntimeExports.jsx(He,{children:jsxRuntimeExports.jsx(ErrorBoundary$1,{set:Ye,children:jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Block,{set:nt}),children:K??null})})}))}Je()}}),reactExports.useEffect(()=>{const Ft=Ge.current;if(Ft)return()=>unmountComponentAtNode(Ft)},[]);const rt=_e?"none":"auto";return jsxRuntimeExports.jsx("div",{ref:Xe,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:rt,...xe},...Ne,children:jsxRuntimeExports.jsx("div",{ref:ze,style:{width:"100%",height:"100%"},children:jsxRuntimeExports.jsx("canvas",{ref:Ge,style:{display:"block"},children:me})})})}function Canvas(fe){return jsxRuntimeExports.jsx(m$2,{children:jsxRuntimeExports.jsx(CanvasImpl,{...fe})})}const v1=new Vector3,v2=new Vector3,v3=new Vector3,v4$1=new Vector2;function defaultCalculatePosition(fe,K,me){const ge=v1.setFromMatrixPosition(fe.matrixWorld);ge.project(K);const xe=me.width/2,ye=me.height/2;return[ge.x*xe+xe,-(ge.y*ye)+ye]}function isObjectBehindCamera(fe,K){const me=v1.setFromMatrixPosition(fe.matrixWorld),ge=v2.setFromMatrixPosition(K.matrixWorld),xe=me.sub(ge),ye=K.getWorldDirection(v3);return xe.angleTo(ye)>Math.PI/2}function isObjectVisible(fe,K,me,ge){const xe=v1.setFromMatrixPosition(fe.matrixWorld),ye=xe.clone();ye.project(K),v4$1.set(ye.x,ye.y),me.setFromCamera(v4$1,K);const ve=me.intersectObjects(ge,!0);if(ve.length){const _e=ve[0].distance;return xe.distanceTo(me.ray.origin)<_e}return!0}function objectScale(fe,K){if(K instanceof OrthographicCamera)return K.zoom;if(K instanceof PerspectiveCamera){const me=v1.setFromMatrixPosition(fe.matrixWorld),ge=v2.setFromMatrixPosition(K.matrixWorld),xe=K.fov*Math.PI/180,ye=me.distanceTo(ge);return 1/(2*Math.tan(xe/2)*ye)}else return 1}function objectZIndex(fe,K,me){if(K instanceof PerspectiveCamera||K instanceof OrthographicCamera){const ge=v1.setFromMatrixPosition(fe.matrixWorld),xe=v2.setFromMatrixPosition(K.matrixWorld),ye=ge.distanceTo(xe),ve=(me[1]-me[0])/(K.far-K.near),_e=me[1]-ve*K.far;return Math.round(ve*ye+_e)}}const epsilon=fe=>Math.abs(fe)<1e-10?0:fe;function getCSSMatrix(fe,K,me=""){let ge="matrix3d(";for(let xe=0;xe!==16;xe++)ge+=epsilon(K[xe]*fe.elements[xe])+(xe!==15?",":")");return me+ge}const getCameraCSSMatrix=(fe=>K=>getCSSMatrix(K,fe))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),getObjectCSSMatrix=(fe=>(K,me)=>getCSSMatrix(K,fe(me),"translate(-50%,-50%)"))(fe=>[1/fe,1/fe,1/fe,1,-1/fe,-1/fe,-1/fe,-1,1/fe,1/fe,1/fe,1,1,1,1,1]);function isRefObject(fe){return fe&&typeof fe=="object"&&"current"in fe}const Html=reactExports.forwardRef(({children:fe,eps:K=.001,style:me,className:ge,prepend:xe,center:ye,fullscreen:ve,portal:_e,distanceFactor:Ee,sprite:be=!1,transform:Ae=!1,occlude:Se,onOcclude:Ce,castShadow:Te,receiveShadow:Re,material:De,geometry:Ie,zIndexRange:Be=[16777271,0],calculatePosition:Le=defaultCalculatePosition,as:Oe="div",wrapperClass:Fe,pointerEvents:Ue="auto",...Ne},He)=>{const{gl:ze,camera:je,scene:Ge,size:Xe,raycaster:qe,events:Qe,viewport:nt}=useThree(),[Nt]=reactExports.useState(()=>document.createElement(Oe)),Ye=reactExports.useRef(null),at=reactExports.useRef(null),rt=reactExports.useRef(0),Ft=reactExports.useRef([0,0]),Je=reactExports.useRef(null),Wt=reactExports.useRef(null),Kt=_e?.current||Qe.connected||ze.domElement.parentNode,Pt=reactExports.useRef(null),Yt=reactExports.useRef(!1),Gt=reactExports.useMemo(()=>Se&&Se!=="blending"||Array.isArray(Se)&&Se.length&&isRefObject(Se[0]),[Se]);reactExports.useLayoutEffect(()=>{const Un=ze.domElement;Se&&Se==="blending"?(Un.style.zIndex=`${Math.floor(Be[0]/2)}`,Un.style.position="absolute",Un.style.pointerEvents="none"):(Un.style.zIndex=null,Un.style.position=null,Un.style.pointerEvents=null)},[Se]),reactExports.useLayoutEffect(()=>{if(at.current){const Un=Ye.current=clientExports.createRoot(Nt);if(Ge.updateMatrixWorld(),Ae)Nt.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const kn=Le(at.current,je,Xe);Nt.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${kn[0]}px,${kn[1]}px,0);transform-origin:0 0;`}return Kt&&(xe?Kt.prepend(Nt):Kt.appendChild(Nt)),()=>{Kt&&Kt.removeChild(Nt),Un.unmount()}}},[Kt,Ae]),reactExports.useLayoutEffect(()=>{Fe&&(Nt.className=Fe)},[Fe]);const an=reactExports.useMemo(()=>Ae?{position:"absolute",top:0,left:0,width:Xe.width,height:Xe.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:ye?"translate3d(-50%,-50%,0)":"none",...ve&&{top:-Xe.height/2,left:-Xe.width/2,width:Xe.width,height:Xe.height},...me},[me,ye,ve,Xe,Ae]),pn=reactExports.useMemo(()=>({position:"absolute",pointerEvents:Ue}),[Ue]);reactExports.useLayoutEffect(()=>{if(Yt.current=!1,Ae){var Un;(Un=Ye.current)==null||Un.render(reactExports.createElement("div",{ref:Je,style:an},reactExports.createElement("div",{ref:Wt,style:pn},reactExports.createElement("div",{ref:He,className:ge,style:me,children:fe}))))}else{var kn;(kn=Ye.current)==null||kn.render(reactExports.createElement("div",{ref:He,style:an,className:ge,children:fe}))}});const En=reactExports.useRef(!0);useFrame(Un=>{if(at.current){je.updateMatrixWorld(),at.current.updateWorldMatrix(!0,!1);const kn=Ae?Ft.current:Le(at.current,je,Xe);if(Ae||Math.abs(rt.current-je.zoom)>K||Math.abs(Ft.current[0]-kn[0])>K||Math.abs(Ft.current[1]-kn[1])>K){const bn=isObjectBehindCamera(at.current,je);let Mn=!1;Gt&&(Array.isArray(Se)?Mn=Se.map(mn=>mn.current):Se!=="blending"&&(Mn=[Ge]));const zt=En.current;if(Mn){const mn=isObjectVisible(at.current,je,qe,Mn);En.current=mn&&!bn}else En.current=!bn;zt!==En.current&&(Ce?Ce(!En.current):Nt.style.display=En.current?"block":"none");const Dn=Math.floor(Be[0]/2),hn=Se?Gt?[Be[0],Dn]:[Dn-1,0]:Be;if(Nt.style.zIndex=`${objectZIndex(at.current,je,hn)}`,Ae){const[mn,dn]=[Xe.width/2,Xe.height/2],Hn=je.projectionMatrix.elements[5]*dn,{isOrthographicCamera:Bn,top:kt,left:Dt,bottom:ln,right:nn}=je,gn=getCameraCSSMatrix(je.matrixWorldInverse),Xt=Bn?`scale(${Hn})translate(${epsilon(-(nn+Dt)/2)}px,${epsilon((kt+ln)/2)}px)`:`translateZ(${Hn}px)`;let on=at.current.matrixWorld;be&&(on=je.matrixWorldInverse.clone().transpose().copyPosition(on).scale(at.current.scale),on.elements[3]=on.elements[7]=on.elements[11]=0,on.elements[15]=1),Nt.style.width=Xe.width+"px",Nt.style.height=Xe.height+"px",Nt.style.perspective=Bn?"":`${Hn}px`,Je.current&&Wt.current&&(Je.current.style.transform=`${Xt}${gn}translate(${mn}px,${dn}px)`,Wt.current.style.transform=getObjectCSSMatrix(on,1/((Ee||10)/400)))}else{const mn=Ee===void 0?1:objectScale(at.current,je)*Ee;Nt.style.transform=`translate3d(${kn[0]}px,${kn[1]}px,0) scale(${mn})`}Ft.current=kn,rt.current=je.zoom}}if(!Gt&&Pt.current&&!Yt.current)if(Ae){if(Je.current){const kn=Je.current.children[0];if(kn!=null&&kn.clientWidth&&kn!=null&&kn.clientHeight){const{isOrthographicCamera:bn}=je;if(bn||Ie)Ne.scale&&(Array.isArray(Ne.scale)?Ne.scale instanceof Vector3?Pt.current.scale.copy(Ne.scale.clone().divideScalar(1)):Pt.current.scale.set(1/Ne.scale[0],1/Ne.scale[1],1/Ne.scale[2]):Pt.current.scale.setScalar(1/Ne.scale));else{const Mn=(Ee||10)/400,zt=kn.clientWidth*Mn,Dn=kn.clientHeight*Mn;Pt.current.scale.set(zt,Dn,1)}Yt.current=!0}}}else{const kn=Nt.children[0];if(kn!=null&&kn.clientWidth&&kn!=null&&kn.clientHeight){const bn=1/nt.factor,Mn=kn.clientWidth*bn,zt=kn.clientHeight*bn;Pt.current.scale.set(Mn,zt,1),Yt.current=!0}Pt.current.lookAt(Un.camera.position)}});const $n=reactExports.useMemo(()=>({vertexShader:Ae?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[Ae]);return reactExports.createElement("group",_extends$2({},Ne,{ref:at}),Se&&!Gt&&reactExports.createElement("mesh",{castShadow:Te,receiveShadow:Re,ref:Pt},Ie||reactExports.createElement("planeGeometry",null),De||reactExports.createElement("shaderMaterial",{side:DoubleSide,vertexShader:$n.vertexShader,fragmentShader:$n.fragmentShader})))}),version$1=parseInt(REVISION.replace(/\D+/g,"")),UV1=version$1>=125?"uv1":"uv2";function toCreasedNormals(fe,K=Math.PI/3){const me=Math.cos(K),ge=(1+1e-10)*100,xe=[new Vector3,new Vector3,new Vector3],ye=new Vector3,ve=new Vector3,_e=new Vector3,Ee=new Vector3;function be(De){const Ie=~~(De.x*ge),Be=~~(De.y*ge),Le=~~(De.z*ge);return`${Ie},${Be},${Le}`}const Ae=fe.index?fe.toNonIndexed():fe,Se=Ae.attributes.position,Ce={};for(let De=0,Ie=Se.count/3;De<Ie;De++){const Be=3*De,Le=xe[0].fromBufferAttribute(Se,Be+0),Oe=xe[1].fromBufferAttribute(Se,Be+1),Fe=xe[2].fromBufferAttribute(Se,Be+2);ye.subVectors(Fe,Oe),ve.subVectors(Le,Oe);const Ue=new Vector3().crossVectors(ye,ve).normalize();for(let Ne=0;Ne<3;Ne++){const He=xe[Ne],ze=be(He);ze in Ce||(Ce[ze]=[]),Ce[ze].push(Ue)}}const Te=new Float32Array(Se.count*3),Re=new BufferAttribute(Te,3,!1);for(let De=0,Ie=Se.count/3;De<Ie;De++){const Be=3*De,Le=xe[0].fromBufferAttribute(Se,Be+0),Oe=xe[1].fromBufferAttribute(Se,Be+1),Fe=xe[2].fromBufferAttribute(Se,Be+2);ye.subVectors(Fe,Oe),ve.subVectors(Le,Oe),_e.crossVectors(ye,ve).normalize();for(let Ue=0;Ue<3;Ue++){const Ne=xe[Ue],He=be(Ne),ze=Ce[He];Ee.set(0,0,0);for(let je=0,Ge=ze.length;je<Ge;je++){const Xe=ze[je];_e.dot(Xe)>me&&Ee.add(Xe)}Ee.normalize(),Re.setXYZ(Be+Ue,Ee.x,Ee.y,Ee.z)}}return Ae.setAttribute("normal",Re),Ae}var u8$1=Uint8Array,u16$1=Uint16Array,u32=Uint32Array,fleb$1=new u8$1([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb$1=new u8$1([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim$1=new u8$1([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb$1=function(fe,K){for(var me=new u16$1(31),ge=0;ge<31;++ge)me[ge]=K+=1<<fe[ge-1];for(var xe=new u32(me[30]),ge=1;ge<30;++ge)for(var ye=me[ge];ye<me[ge+1];++ye)xe[ye]=ye-me[ge]<<5|ge;return[me,xe]},_a$2=freb$1(fleb$1,2),fl$1=_a$2[0],revfl$1=_a$2[1];fl$1[28]=258,revfl$1[258]=28;var _b$1=freb$1(fdeb$1,0),fd$1=_b$1[0],rev$1=new u16$1(32768);for(var i$3=0;i$3<32768;++i$3){var x$2=(i$3&43690)>>>1|(i$3&21845)<<1;x$2=(x$2&52428)>>>2|(x$2&13107)<<2,x$2=(x$2&61680)>>>4|(x$2&3855)<<4,rev$1[i$3]=((x$2&65280)>>>8|(x$2&255)<<8)>>>1}var hMap$1=function(fe,K,me){for(var ge=fe.length,xe=0,ye=new u16$1(K);xe<ge;++xe)++ye[fe[xe]-1];var ve=new u16$1(K);for(xe=0;xe<K;++xe)ve[xe]=ve[xe-1]+ye[xe-1]<<1;var _e;if(me){_e=new u16$1(1<<K);var Ee=15-K;for(xe=0;xe<ge;++xe)if(fe[xe])for(var be=xe<<4|fe[xe],Ae=K-fe[xe],Se=ve[fe[xe]-1]++<<Ae,Ce=Se|(1<<Ae)-1;Se<=Ce;++Se)_e[rev$1[Se]>>>Ee]=be}else for(_e=new u16$1(ge),xe=0;xe<ge;++xe)fe[xe]&&(_e[xe]=rev$1[ve[fe[xe]-1]++]>>>15-fe[xe]);return _e},flt$1=new u8$1(288);for(var i$3=0;i$3<144;++i$3)flt$1[i$3]=8;for(var i$3=144;i$3<256;++i$3)flt$1[i$3]=9;for(var i$3=256;i$3<280;++i$3)flt$1[i$3]=7;for(var i$3=280;i$3<288;++i$3)flt$1[i$3]=8;var fdt$1=new u8$1(32);for(var i$3=0;i$3<32;++i$3)fdt$1[i$3]=5;var flrm$1=hMap$1(flt$1,9,1),fdrm$1=hMap$1(fdt$1,5,1),max$1=function(fe){for(var K=fe[0],me=1;me<fe.length;++me)fe[me]>K&&(K=fe[me]);return K},bits$1=function(fe,K,me){var ge=K/8|0;return(fe[ge]|fe[ge+1]<<8)>>(K&7)&me},bits16$1=function(fe,K){var me=K/8|0;return(fe[me]|fe[me+1]<<8|fe[me+2]<<16)>>(K&7)},shft$1=function(fe){return(fe/8|0)+(fe&7&&1)},slc$1=function(fe,K,me){(me==null||me>fe.length)&&(me=fe.length);var ge=new(fe instanceof u16$1?u16$1:fe instanceof u32?u32:u8$1)(me-K);return ge.set(fe.subarray(K,me)),ge},inflt$1=function(fe,K,me){var ge=fe.length;if(!ge||me&&!me.l&&ge<5)return K||new u8$1(0);var xe=!K||me,ye=!me||me.i;me||(me={}),K||(K=new u8$1(ge*3));var ve=function(an){var pn=K.length;if(an>pn){var En=new u8$1(Math.max(pn*2,an));En.set(K),K=En}},_e=me.f||0,Ee=me.p||0,be=me.b||0,Ae=me.l,Se=me.d,Ce=me.m,Te=me.n,Re=ge*8;do{if(!Ae){me.f=_e=bits$1(fe,Ee,1);var De=bits$1(fe,Ee+1,3);if(Ee+=3,De)if(De==1)Ae=flrm$1,Se=fdrm$1,Ce=9,Te=5;else if(De==2){var Oe=bits$1(fe,Ee,31)+257,Fe=bits$1(fe,Ee+10,15)+4,Ue=Oe+bits$1(fe,Ee+5,31)+1;Ee+=14;for(var Ne=new u8$1(Ue),He=new u8$1(19),ze=0;ze<Fe;++ze)He[clim$1[ze]]=bits$1(fe,Ee+ze*3,7);Ee+=Fe*3;for(var je=max$1(He),Ge=(1<<je)-1,Xe=hMap$1(He,je,1),ze=0;ze<Ue;){var qe=Xe[bits$1(fe,Ee,Ge)];Ee+=qe&15;var Ie=qe>>>4;if(Ie<16)Ne[ze++]=Ie;else{var Qe=0,nt=0;for(Ie==16?(nt=3+bits$1(fe,Ee,3),Ee+=2,Qe=Ne[ze-1]):Ie==17?(nt=3+bits$1(fe,Ee,7),Ee+=3):Ie==18&&(nt=11+bits$1(fe,Ee,127),Ee+=7);nt--;)Ne[ze++]=Qe}}var Nt=Ne.subarray(0,Oe),Ye=Ne.subarray(Oe);Ce=max$1(Nt),Te=max$1(Ye),Ae=hMap$1(Nt,Ce,1),Se=hMap$1(Ye,Te,1)}else throw"invalid block type";else{var Ie=shft$1(Ee)+4,Be=fe[Ie-4]|fe[Ie-3]<<8,Le=Ie+Be;if(Le>ge){if(ye)throw"unexpected EOF";break}xe&&ve(be+Be),K.set(fe.subarray(Ie,Le),be),me.b=be+=Be,me.p=Ee=Le*8;continue}if(Ee>Re){if(ye)throw"unexpected EOF";break}}xe&&ve(be+131072);for(var at=(1<<Ce)-1,rt=(1<<Te)-1,Ft=Ee;;Ft=Ee){var Qe=Ae[bits16$1(fe,Ee)&at],Je=Qe>>>4;if(Ee+=Qe&15,Ee>Re){if(ye)throw"unexpected EOF";break}if(!Qe)throw"invalid length/literal";if(Je<256)K[be++]=Je;else if(Je==256){Ft=Ee,Ae=null;break}else{var Wt=Je-254;if(Je>264){var ze=Je-257,Kt=fleb$1[ze];Wt=bits$1(fe,Ee,(1<<Kt)-1)+fl$1[ze],Ee+=Kt}var Pt=Se[bits16$1(fe,Ee)&rt],Yt=Pt>>>4;if(!Pt)throw"invalid distance";Ee+=Pt&15;var Ye=fd$1[Yt];if(Yt>3){var Kt=fdeb$1[Yt];Ye+=bits16$1(fe,Ee)&(1<<Kt)-1,Ee+=Kt}if(Ee>Re){if(ye)throw"unexpected EOF";break}xe&&ve(be+131072);for(var Gt=be+Wt;be<Gt;be+=4)K[be]=K[be-Ye],K[be+1]=K[be+1-Ye],K[be+2]=K[be+2-Ye],K[be+3]=K[be+3-Ye];be=Gt}}me.l=Ae,me.p=Ft,me.b=be,Ae&&(_e=1,me.m=Ce,me.d=Se,me.n=Te)}while(!_e);return be==K.length?K:slc$1(K,0,be)},et$2=new u8$1(0),zlv=function(fe){if((fe[0]&15)!=8||fe[0]>>>4>7||(fe[0]<<8|fe[1])%31)throw"invalid zlib data";if(fe[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function unzlibSync$1(fe,K){return inflt$1((zlv(fe),fe.subarray(2,-4)),K)}var td$1=typeof TextDecoder<"u"&&new TextDecoder,tds$1=0;try{td$1.decode(et$2,{stream:!0}),tds$1=1}catch{}const isCubeTexture=fe=>fe&&fe.isCubeTexture;class GroundProjectedEnv extends Mesh{constructor(K,me){var ge,xe;const ye=isCubeTexture(K),_e=((xe=ye?(ge=K.image[0])==null?void 0:ge.width:K.image.width)!=null?xe:1024)/4,Ee=Math.floor(Math.log2(_e)),be=Math.pow(2,Ee),Ae=3*Math.max(be,16*7),Se=4*be,Ce=[ye?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/Ae}`,`#define CUBEUV_TEXEL_HEIGHT ${1/Se}`,`#define CUBEUV_MAX_MIP ${Ee}.0`],Te=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,Re=Ce.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${version$1>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,De={map:{value:K},height:{value:me?.height||15},radius:{value:me?.radius||100}},Ie=new IcosahedronGeometry(1,16),Be=new ShaderMaterial({uniforms:De,fragmentShader:Re,vertexShader:Te,side:DoubleSide});super(Ie,Be)}set radius(K){this.material.uniforms.radius.value=K}get radius(){return this.material.uniforms.radius.value}set height(K){this.material.uniforms.height.value=K}get height(){return this.material.uniforms.height.value}}class RGBELoader extends DataTextureLoader{constructor(K){super(K),this.type=HalfFloatType}parse(K){const ve=function(ze,je){switch(ze){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(je||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(je||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(je||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(je||""))}},Ae=`
`,Se=function(ze,je,Ge){je=je||1024;let qe=ze.pos,Qe=-1,nt=0,Nt="",Ye=String.fromCharCode.apply(null,new Uint16Array(ze.subarray(qe,qe+128)));for(;0>(Qe=Ye.indexOf(Ae))&&nt<je&&qe<ze.byteLength;)Nt+=Ye,nt+=Ye.length,qe+=128,Ye+=String.fromCharCode.apply(null,new Uint16Array(ze.subarray(qe,qe+128)));return-1<Qe?(ze.pos+=nt+Qe+1,Nt+Ye.slice(0,Qe)):!1},Ce=function(ze){const je=/^#\?(\S+)/,Ge=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,Xe=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,qe=/^\s*FORMAT=(\S+)\s*$/,Qe=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,nt={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let Nt,Ye;for((ze.pos>=ze.byteLength||!(Nt=Se(ze)))&&ve(1,"no header found"),(Ye=Nt.match(je))||ve(3,"bad initial token"),nt.valid|=1,nt.programtype=Ye[1],nt.string+=Nt+`
`;Nt=Se(ze),Nt!==!1;){if(nt.string+=Nt+`
`,Nt.charAt(0)==="#"){nt.comments+=Nt+`
`;continue}if((Ye=Nt.match(Ge))&&(nt.gamma=parseFloat(Ye[1])),(Ye=Nt.match(Xe))&&(nt.exposure=parseFloat(Ye[1])),(Ye=Nt.match(qe))&&(nt.valid|=2,nt.format=Ye[1]),(Ye=Nt.match(Qe))&&(nt.valid|=4,nt.height=parseInt(Ye[1],10),nt.width=parseInt(Ye[2],10)),nt.valid&2&&nt.valid&4)break}return nt.valid&2||ve(3,"missing format specifier"),nt.valid&4||ve(3,"missing image size specifier"),nt},Te=function(ze,je,Ge){const Xe=je;if(Xe<8||Xe>32767||ze[0]!==2||ze[1]!==2||ze[2]&128)return new Uint8Array(ze);Xe!==(ze[2]<<8|ze[3])&&ve(3,"wrong scanline width");const qe=new Uint8Array(4*je*Ge);qe.length||ve(4,"unable to allocate buffer space");let Qe=0,nt=0;const Nt=4*Xe,Ye=new Uint8Array(4),at=new Uint8Array(Nt);let rt=Ge;for(;rt>0&&nt<ze.byteLength;){nt+4>ze.byteLength&&ve(1),Ye[0]=ze[nt++],Ye[1]=ze[nt++],Ye[2]=ze[nt++],Ye[3]=ze[nt++],(Ye[0]!=2||Ye[1]!=2||(Ye[2]<<8|Ye[3])!=Xe)&&ve(3,"bad rgbe scanline format");let Ft=0,Je;for(;Ft<Nt&&nt<ze.byteLength;){Je=ze[nt++];const Kt=Je>128;if(Kt&&(Je-=128),(Je===0||Ft+Je>Nt)&&ve(3,"bad scanline data"),Kt){const Pt=ze[nt++];for(let Yt=0;Yt<Je;Yt++)at[Ft++]=Pt}else at.set(ze.subarray(nt,nt+Je),Ft),Ft+=Je,nt+=Je}const Wt=Xe;for(let Kt=0;Kt<Wt;Kt++){let Pt=0;qe[Qe]=at[Kt+Pt],Pt+=Xe,qe[Qe+1]=at[Kt+Pt],Pt+=Xe,qe[Qe+2]=at[Kt+Pt],Pt+=Xe,qe[Qe+3]=at[Kt+Pt],Qe+=4}rt--}return qe},Re=function(ze,je,Ge,Xe){const qe=ze[je+3],Qe=Math.pow(2,qe-128)/255;Ge[Xe+0]=ze[je+0]*Qe,Ge[Xe+1]=ze[je+1]*Qe,Ge[Xe+2]=ze[je+2]*Qe,Ge[Xe+3]=1},De=function(ze,je,Ge,Xe){const qe=ze[je+3],Qe=Math.pow(2,qe-128)/255;Ge[Xe+0]=DataUtils.toHalfFloat(Math.min(ze[je+0]*Qe,65504)),Ge[Xe+1]=DataUtils.toHalfFloat(Math.min(ze[je+1]*Qe,65504)),Ge[Xe+2]=DataUtils.toHalfFloat(Math.min(ze[je+2]*Qe,65504)),Ge[Xe+3]=DataUtils.toHalfFloat(1)},Ie=new Uint8Array(K);Ie.pos=0;const Be=Ce(Ie),Le=Be.width,Oe=Be.height,Fe=Te(Ie.subarray(Ie.pos),Le,Oe);let Ue,Ne,He;switch(this.type){case FloatType:He=Fe.length/4;const ze=new Float32Array(He*4);for(let Ge=0;Ge<He;Ge++)Re(Fe,Ge*4,ze,Ge*4);Ue=ze,Ne=FloatType;break;case HalfFloatType:He=Fe.length/4;const je=new Uint16Array(He*4);for(let Ge=0;Ge<He;Ge++)De(Fe,Ge*4,je,Ge*4);Ue=je,Ne=HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:Le,height:Oe,data:Ue,header:Be.string,gamma:Be.gamma,exposure:Be.exposure,type:Ne}}setDataType(K){return this.type=K,this}load(K,me,ge,xe){function ye(ve,_e){switch(ve.type){case FloatType:case HalfFloatType:"colorSpace"in ve?ve.colorSpace="srgb-linear":ve.encoding=3e3,ve.minFilter=LinearFilter,ve.magFilter=LinearFilter,ve.generateMipmaps=!1,ve.flipY=!0;break}me&&me(ve,_e)}return super.load(K,ye,ge,xe)}}const hasColorSpace=version$1>=152;class EXRLoader extends DataTextureLoader{constructor(K){super(K),this.type=HalfFloatType}parse(K){const je=Math.pow(2.7182818,2.2);function Ge(Et,Vt){for(var sn=0,Cn=0;Cn<65536;++Cn)(Cn==0||Et[Cn>>3]&1<<(Cn&7))&&(Vt[sn++]=Cn);for(var Nn=sn-1;sn<65536;)Vt[sn++]=0;return Nn}function Xe(Et){for(var Vt=0;Vt<16384;Vt++)Et[Vt]={},Et[Vt].len=0,Et[Vt].lit=0,Et[Vt].p=null}const qe={l:0,c:0,lc:0};function Qe(Et,Vt,sn,Cn,Nn){for(;sn<Et;)Vt=Vt<<8|lr(Cn,Nn),sn+=8;sn-=Et,qe.l=Vt>>sn&(1<<Et)-1,qe.c=Vt,qe.lc=sn}const nt=new Array(59);function Nt(Et){for(var Vt=0;Vt<=58;++Vt)nt[Vt]=0;for(var Vt=0;Vt<65537;++Vt)nt[Et[Vt]]+=1;for(var sn=0,Vt=58;Vt>0;--Vt){var Cn=sn+nt[Vt]>>1;nt[Vt]=sn,sn=Cn}for(var Vt=0;Vt<65537;++Vt){var Nn=Et[Vt];Nn>0&&(Et[Vt]=Nn|nt[Nn]++<<6)}}function Ye(Et,Vt,sn,Cn,Nn,Pn,Qn){for(var Jn=sn,pt=0,$t=0;Nn<=Pn;Nn++){if(Jn.value-sn.value>Cn)return!1;Qe(6,pt,$t,Et,Jn);var en=qe.l;if(pt=qe.c,$t=qe.lc,Qn[Nn]=en,en==63){if(Jn.value-sn.value>Cn)throw"Something wrong with hufUnpackEncTable";Qe(8,pt,$t,Et,Jn);var tn=qe.l+6;if(pt=qe.c,$t=qe.lc,Nn+tn>Pn+1)throw"Something wrong with hufUnpackEncTable";for(;tn--;)Qn[Nn++]=0;Nn--}else if(en>=59){var tn=en-59+2;if(Nn+tn>Pn+1)throw"Something wrong with hufUnpackEncTable";for(;tn--;)Qn[Nn++]=0;Nn--}}Nt(Qn)}function at(Et){return Et&63}function rt(Et){return Et>>6}function Ft(Et,Vt,sn,Cn){for(;Vt<=sn;Vt++){var Nn=rt(Et[Vt]),Pn=at(Et[Vt]);if(Nn>>Pn)throw"Invalid table entry";if(Pn>14){var Qn=Cn[Nn>>Pn-14];if(Qn.len)throw"Invalid table entry";if(Qn.lit++,Qn.p){var Jn=Qn.p;Qn.p=new Array(Qn.lit);for(var pt=0;pt<Qn.lit-1;++pt)Qn.p[pt]=Jn[pt]}else Qn.p=new Array(1);Qn.p[Qn.lit-1]=Vt}else if(Pn)for(var $t=0,pt=1<<14-Pn;pt>0;pt--){var Qn=Cn[(Nn<<14-Pn)+$t];if(Qn.len||Qn.p)throw"Invalid table entry";Qn.len=Pn,Qn.lit=Vt,$t++}}return!0}const Je={c:0,lc:0};function Wt(Et,Vt,sn,Cn){Et=Et<<8|lr(sn,Cn),Vt+=8,Je.c=Et,Je.lc=Vt}const Kt={c:0,lc:0};function Pt(Et,Vt,sn,Cn,Nn,Pn,Qn,Jn,pt,$t){if(Et==Vt){Cn<8&&(Wt(sn,Cn,Nn,Qn),sn=Je.c,Cn=Je.lc),Cn-=8;var en=sn>>Cn,en=new Uint8Array([en])[0];if(pt.value+en>$t)return!1;for(var tn=Jn[pt.value-1];en-- >0;)Jn[pt.value++]=tn}else if(pt.value<$t)Jn[pt.value++]=Et;else return!1;Kt.c=sn,Kt.lc=Cn}function Yt(Et){return Et&65535}function Gt(Et){var Vt=Yt(Et);return Vt>32767?Vt-65536:Vt}const an={a:0,b:0};function pn(Et,Vt){var sn=Gt(Et),Cn=Gt(Vt),Nn=Cn,Pn=sn+(Nn&1)+(Nn>>1),Qn=Pn,Jn=Pn-Nn;an.a=Qn,an.b=Jn}function En(Et,Vt){var sn=Yt(Et),Cn=Yt(Vt),Nn=sn-(Cn>>1)&65535,Pn=Cn+Nn-32768&65535;an.a=Pn,an.b=Nn}function $n(Et,Vt,sn,Cn,Nn,Pn,Qn){for(var Jn=Qn<16384,pt=sn>Nn?Nn:sn,$t=1,en;$t<=pt;)$t<<=1;for($t>>=1,en=$t,$t>>=1;$t>=1;){for(var tn=0,cn=tn+Pn*(Nn-en),_n=Pn*$t,Fn=Pn*en,Wn=Cn*$t,qn=Cn*en,dr,Ln,fr,_r;tn<=cn;tn+=Fn){for(var yr=tn,Hr=tn+Cn*(sn-en);yr<=Hr;yr+=qn){var Sr=yr+Wn,Cr=yr+_n,vr=Cr+Wn;Jn?(pn(Et[yr+Vt],Et[Cr+Vt]),dr=an.a,fr=an.b,pn(Et[Sr+Vt],Et[vr+Vt]),Ln=an.a,_r=an.b,pn(dr,Ln),Et[yr+Vt]=an.a,Et[Sr+Vt]=an.b,pn(fr,_r),Et[Cr+Vt]=an.a,Et[vr+Vt]=an.b):(En(Et[yr+Vt],Et[Cr+Vt]),dr=an.a,fr=an.b,En(Et[Sr+Vt],Et[vr+Vt]),Ln=an.a,_r=an.b,En(dr,Ln),Et[yr+Vt]=an.a,Et[Sr+Vt]=an.b,En(fr,_r),Et[Cr+Vt]=an.a,Et[vr+Vt]=an.b)}if(sn&$t){var Cr=yr+_n;Jn?pn(Et[yr+Vt],Et[Cr+Vt]):En(Et[yr+Vt],Et[Cr+Vt]),dr=an.a,Et[Cr+Vt]=an.b,Et[yr+Vt]=dr}}if(Nn&$t)for(var yr=tn,Hr=tn+Cn*(sn-en);yr<=Hr;yr+=qn){var Sr=yr+Wn;Jn?pn(Et[yr+Vt],Et[Sr+Vt]):En(Et[yr+Vt],Et[Sr+Vt]),dr=an.a,Et[Sr+Vt]=an.b,Et[yr+Vt]=dr}en=$t,$t>>=1}return tn}function Un(Et,Vt,sn,Cn,Nn,Pn,Qn,Jn,pt,$t){for(var en=0,tn=0,cn=Jn,_n=Math.trunc(Nn.value+(Pn+7)/8);Nn.value<_n;)for(Wt(en,tn,sn,Nn),en=Je.c,tn=Je.lc;tn>=14;){var Fn=en>>tn-14&16383,Wn=Vt[Fn];if(Wn.len)tn-=Wn.len,Pt(Wn.lit,Qn,en,tn,sn,Cn,Nn,pt,$t,cn),en=Kt.c,tn=Kt.lc;else{if(!Wn.p)throw"hufDecode issues";var qn;for(qn=0;qn<Wn.lit;qn++){for(var dr=at(Et[Wn.p[qn]]);tn<dr&&Nn.value<_n;)Wt(en,tn,sn,Nn),en=Je.c,tn=Je.lc;if(tn>=dr&&rt(Et[Wn.p[qn]])==(en>>tn-dr&(1<<dr)-1)){tn-=dr,Pt(Wn.p[qn],Qn,en,tn,sn,Cn,Nn,pt,$t,cn),en=Kt.c,tn=Kt.lc;break}}if(qn==Wn.lit)throw"hufDecode issues"}}var Ln=8-Pn&7;for(en>>=Ln,tn-=Ln;tn>0;){var Wn=Vt[en<<14-tn&16383];if(Wn.len)tn-=Wn.len,Pt(Wn.lit,Qn,en,tn,sn,Cn,Nn,pt,$t,cn),en=Kt.c,tn=Kt.lc;else throw"hufDecode issues"}return!0}function kn(Et,Vt,sn,Cn,Nn,Pn){var Qn={value:0},Jn=sn.value,pt=Kn(Vt,sn),$t=Kn(Vt,sn);sn.value+=4;var en=Kn(Vt,sn);if(sn.value+=4,pt<0||pt>=65537||$t<0||$t>=65537)throw"Something wrong with HUF_ENCSIZE";var tn=new Array(65537),cn=new Array(16384);Xe(cn);var _n=Cn-(sn.value-Jn);if(Ye(Et,Vt,sn,_n,pt,$t,tn),en>8*(Cn-(sn.value-Jn)))throw"Something wrong with hufUncompress";Ft(tn,pt,$t,cn),Un(tn,cn,Et,Vt,sn,en,$t,Pn,Nn,Qn)}function bn(Et,Vt,sn){for(var Cn=0;Cn<sn;++Cn)Vt[Cn]=Et[Vt[Cn]]}function Mn(Et){for(var Vt=1;Vt<Et.length;Vt++){var sn=Et[Vt-1]+Et[Vt]-128;Et[Vt]=sn}}function zt(Et,Vt){for(var sn=0,Cn=Math.floor((Et.length+1)/2),Nn=0,Pn=Et.length-1;!(Nn>Pn||(Vt[Nn++]=Et[sn++],Nn>Pn));)Vt[Nn++]=Et[Cn++]}function Dn(Et){for(var Vt=Et.byteLength,sn=new Array,Cn=0,Nn=new DataView(Et);Vt>0;){var Pn=Nn.getInt8(Cn++);if(Pn<0){var Qn=-Pn;Vt-=Qn+1;for(var Jn=0;Jn<Qn;Jn++)sn.push(Nn.getUint8(Cn++))}else{var Qn=Pn;Vt-=2;for(var pt=Nn.getUint8(Cn++),Jn=0;Jn<Qn+1;Jn++)sn.push(pt)}}return sn}function hn(Et,Vt,sn,Cn,Nn,Pn){var Sr=new DataView(Pn.buffer),Qn=sn[Et.idx[0]].width,Jn=sn[Et.idx[0]].height,pt=3,$t=Math.floor(Qn/8),en=Math.ceil(Qn/8),tn=Math.ceil(Jn/8),cn=Qn-(en-1)*8,_n=Jn-(tn-1)*8,Fn={value:0},Wn=new Array(pt),qn=new Array(pt),dr=new Array(pt),Ln=new Array(pt),fr=new Array(pt);for(let Dr=0;Dr<pt;++Dr)fr[Dr]=Vt[Et.idx[Dr]],Wn[Dr]=Dr<1?0:Wn[Dr-1]+en*tn,qn[Dr]=new Float32Array(64),dr[Dr]=new Uint16Array(64),Ln[Dr]=new Uint16Array(en*64);for(let Dr=0;Dr<tn;++Dr){var _r=8;Dr==tn-1&&(_r=_n);var yr=8;for(let Tr=0;Tr<en;++Tr){Tr==en-1&&(yr=cn);for(let Nr=0;Nr<pt;++Nr)dr[Nr].fill(0),dr[Nr][0]=Nn[Wn[Nr]++],mn(Fn,Cn,dr[Nr]),dn(dr[Nr],qn[Nr]),Hn(qn[Nr]);Bn(qn);for(let Nr=0;Nr<pt;++Nr)kt(qn[Nr],Ln[Nr],Tr*64)}let Ur=0;for(let Tr=0;Tr<pt;++Tr){const Nr=sn[Et.idx[Tr]].type;for(let Lr=8*Dr;Lr<8*Dr+_r;++Lr){Ur=fr[Tr][Lr];for(let ri=0;ri<$t;++ri){const Xr=ri*64+(Lr&7)*8;Sr.setUint16(Ur+0*2*Nr,Ln[Tr][Xr+0],!0),Sr.setUint16(Ur+1*2*Nr,Ln[Tr][Xr+1],!0),Sr.setUint16(Ur+2*2*Nr,Ln[Tr][Xr+2],!0),Sr.setUint16(Ur+3*2*Nr,Ln[Tr][Xr+3],!0),Sr.setUint16(Ur+4*2*Nr,Ln[Tr][Xr+4],!0),Sr.setUint16(Ur+5*2*Nr,Ln[Tr][Xr+5],!0),Sr.setUint16(Ur+6*2*Nr,Ln[Tr][Xr+6],!0),Sr.setUint16(Ur+7*2*Nr,Ln[Tr][Xr+7],!0),Ur+=8*2*Nr}}if($t!=en)for(let Lr=8*Dr;Lr<8*Dr+_r;++Lr){const ri=fr[Tr][Lr]+8*$t*2*Nr,Xr=$t*64+(Lr&7)*8;for(let ei=0;ei<yr;++ei)Sr.setUint16(ri+ei*2*Nr,Ln[Tr][Xr+ei],!0)}}}for(var Hr=new Uint16Array(Qn),Sr=new DataView(Pn.buffer),Cr=0;Cr<pt;++Cr){sn[Et.idx[Cr]].decoded=!0;var vr=sn[Et.idx[Cr]].type;if(sn[Cr].type==2)for(var jr=0;jr<Jn;++jr){const Dr=fr[Cr][jr];for(var Rr=0;Rr<Qn;++Rr)Hr[Rr]=Sr.getUint16(Dr+Rr*2*vr,!0);for(var Rr=0;Rr<Qn;++Rr)Sr.setFloat32(Dr+Rr*2*vr,Sn(Hr[Rr]),!0)}}}function mn(Et,Vt,sn){for(var Cn,Nn=1;Nn<64;)Cn=Vt[Et.value],Cn==65280?Nn=64:Cn>>8==255?Nn+=Cn&255:(sn[Nn]=Cn,Nn++),Et.value++}function dn(Et,Vt){Vt[0]=Sn(Et[0]),Vt[1]=Sn(Et[1]),Vt[2]=Sn(Et[5]),Vt[3]=Sn(Et[6]),Vt[4]=Sn(Et[14]),Vt[5]=Sn(Et[15]),Vt[6]=Sn(Et[27]),Vt[7]=Sn(Et[28]),Vt[8]=Sn(Et[2]),Vt[9]=Sn(Et[4]),Vt[10]=Sn(Et[7]),Vt[11]=Sn(Et[13]),Vt[12]=Sn(Et[16]),Vt[13]=Sn(Et[26]),Vt[14]=Sn(Et[29]),Vt[15]=Sn(Et[42]),Vt[16]=Sn(Et[3]),Vt[17]=Sn(Et[8]),Vt[18]=Sn(Et[12]),Vt[19]=Sn(Et[17]),Vt[20]=Sn(Et[25]),Vt[21]=Sn(Et[30]),Vt[22]=Sn(Et[41]),Vt[23]=Sn(Et[43]),Vt[24]=Sn(Et[9]),Vt[25]=Sn(Et[11]),Vt[26]=Sn(Et[18]),Vt[27]=Sn(Et[24]),Vt[28]=Sn(Et[31]),Vt[29]=Sn(Et[40]),Vt[30]=Sn(Et[44]),Vt[31]=Sn(Et[53]),Vt[32]=Sn(Et[10]),Vt[33]=Sn(Et[19]),Vt[34]=Sn(Et[23]),Vt[35]=Sn(Et[32]),Vt[36]=Sn(Et[39]),Vt[37]=Sn(Et[45]),Vt[38]=Sn(Et[52]),Vt[39]=Sn(Et[54]),Vt[40]=Sn(Et[20]),Vt[41]=Sn(Et[22]),Vt[42]=Sn(Et[33]),Vt[43]=Sn(Et[38]),Vt[44]=Sn(Et[46]),Vt[45]=Sn(Et[51]),Vt[46]=Sn(Et[55]),Vt[47]=Sn(Et[60]),Vt[48]=Sn(Et[21]),Vt[49]=Sn(Et[34]),Vt[50]=Sn(Et[37]),Vt[51]=Sn(Et[47]),Vt[52]=Sn(Et[50]),Vt[53]=Sn(Et[56]),Vt[54]=Sn(Et[59]),Vt[55]=Sn(Et[61]),Vt[56]=Sn(Et[35]),Vt[57]=Sn(Et[36]),Vt[58]=Sn(Et[48]),Vt[59]=Sn(Et[49]),Vt[60]=Sn(Et[57]),Vt[61]=Sn(Et[58]),Vt[62]=Sn(Et[62]),Vt[63]=Sn(Et[63])}function Hn(Et){const Vt=.5*Math.cos(.7853975),sn=.5*Math.cos(3.14159/16),Cn=.5*Math.cos(3.14159/8),Nn=.5*Math.cos(3*3.14159/16),Pn=.5*Math.cos(5*3.14159/16),Qn=.5*Math.cos(3*3.14159/8),Jn=.5*Math.cos(7*3.14159/16);for(var pt=new Array(4),$t=new Array(4),en=new Array(4),tn=new Array(4),cn=0;cn<8;++cn){var _n=cn*8;pt[0]=Cn*Et[_n+2],pt[1]=Qn*Et[_n+2],pt[2]=Cn*Et[_n+6],pt[3]=Qn*Et[_n+6],$t[0]=sn*Et[_n+1]+Nn*Et[_n+3]+Pn*Et[_n+5]+Jn*Et[_n+7],$t[1]=Nn*Et[_n+1]-Jn*Et[_n+3]-sn*Et[_n+5]-Pn*Et[_n+7],$t[2]=Pn*Et[_n+1]-sn*Et[_n+3]+Jn*Et[_n+5]+Nn*Et[_n+7],$t[3]=Jn*Et[_n+1]-Pn*Et[_n+3]+Nn*Et[_n+5]-sn*Et[_n+7],en[0]=Vt*(Et[_n+0]+Et[_n+4]),en[3]=Vt*(Et[_n+0]-Et[_n+4]),en[1]=pt[0]+pt[3],en[2]=pt[1]-pt[2],tn[0]=en[0]+en[1],tn[1]=en[3]+en[2],tn[2]=en[3]-en[2],tn[3]=en[0]-en[1],Et[_n+0]=tn[0]+$t[0],Et[_n+1]=tn[1]+$t[1],Et[_n+2]=tn[2]+$t[2],Et[_n+3]=tn[3]+$t[3],Et[_n+4]=tn[3]-$t[3],Et[_n+5]=tn[2]-$t[2],Et[_n+6]=tn[1]-$t[1],Et[_n+7]=tn[0]-$t[0]}for(var Fn=0;Fn<8;++Fn)pt[0]=Cn*Et[16+Fn],pt[1]=Qn*Et[16+Fn],pt[2]=Cn*Et[48+Fn],pt[3]=Qn*Et[48+Fn],$t[0]=sn*Et[8+Fn]+Nn*Et[24+Fn]+Pn*Et[40+Fn]+Jn*Et[56+Fn],$t[1]=Nn*Et[8+Fn]-Jn*Et[24+Fn]-sn*Et[40+Fn]-Pn*Et[56+Fn],$t[2]=Pn*Et[8+Fn]-sn*Et[24+Fn]+Jn*Et[40+Fn]+Nn*Et[56+Fn],$t[3]=Jn*Et[8+Fn]-Pn*Et[24+Fn]+Nn*Et[40+Fn]-sn*Et[56+Fn],en[0]=Vt*(Et[Fn]+Et[32+Fn]),en[3]=Vt*(Et[Fn]-Et[32+Fn]),en[1]=pt[0]+pt[3],en[2]=pt[1]-pt[2],tn[0]=en[0]+en[1],tn[1]=en[3]+en[2],tn[2]=en[3]-en[2],tn[3]=en[0]-en[1],Et[0+Fn]=tn[0]+$t[0],Et[8+Fn]=tn[1]+$t[1],Et[16+Fn]=tn[2]+$t[2],Et[24+Fn]=tn[3]+$t[3],Et[32+Fn]=tn[3]-$t[3],Et[40+Fn]=tn[2]-$t[2],Et[48+Fn]=tn[1]-$t[1],Et[56+Fn]=tn[0]-$t[0]}function Bn(Et){for(var Vt=0;Vt<64;++Vt){var sn=Et[0][Vt],Cn=Et[1][Vt],Nn=Et[2][Vt];Et[0][Vt]=sn+1.5747*Nn,Et[1][Vt]=sn-.1873*Cn-.4682*Nn,Et[2][Vt]=sn+1.8556*Cn}}function kt(Et,Vt,sn){for(var Cn=0;Cn<64;++Cn)Vt[sn+Cn]=DataUtils.toHalfFloat(Dt(Et[Cn]))}function Dt(Et){return Et<=1?Math.sign(Et)*Math.pow(Math.abs(Et),2.2):Math.sign(Et)*Math.pow(je,Math.abs(Et)-1)}function ln(Et){return new DataView(Et.array.buffer,Et.offset.value,Et.size)}function nn(Et){var Vt=Et.viewer.buffer.slice(Et.offset.value,Et.offset.value+Et.size),sn=new Uint8Array(Dn(Vt)),Cn=new Uint8Array(sn.length);return Mn(sn),zt(sn,Cn),new DataView(Cn.buffer)}function gn(Et){var Vt=Et.array.slice(Et.offset.value,Et.offset.value+Et.size),sn=unzlibSync$1(Vt),Cn=new Uint8Array(sn.length);return Mn(sn),zt(sn,Cn),new DataView(Cn.buffer)}function Xt(Et){for(var Vt=Et.viewer,sn={value:Et.offset.value},Cn=new Uint16Array(Et.width*Et.scanlineBlockSize*(Et.channels*Et.type)),Nn=new Uint8Array(8192),Pn=0,Qn=new Array(Et.channels),Jn=0;Jn<Et.channels;Jn++)Qn[Jn]={},Qn[Jn].start=Pn,Qn[Jn].end=Qn[Jn].start,Qn[Jn].nx=Et.width,Qn[Jn].ny=Et.lines,Qn[Jn].size=Et.type,Pn+=Qn[Jn].nx*Qn[Jn].ny*Qn[Jn].size;var pt=wn(Vt,sn),$t=wn(Vt,sn);if($t>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(pt<=$t)for(var Jn=0;Jn<$t-pt+1;Jn++)Nn[Jn+pt]=gr(Vt,sn);var en=new Uint16Array(65536),tn=Ge(Nn,en),cn=Kn(Vt,sn);kn(Et.array,Vt,sn,cn,Cn,Pn);for(var Jn=0;Jn<Et.channels;++Jn)for(var _n=Qn[Jn],Fn=0;Fn<Qn[Jn].size;++Fn)$n(Cn,_n.start+Fn,_n.nx,_n.size,_n.ny,_n.nx*_n.size,tn);bn(en,Cn,Pn);for(var Wn=0,qn=new Uint8Array(Cn.buffer.byteLength),dr=0;dr<Et.lines;dr++)for(var Ln=0;Ln<Et.channels;Ln++){var _n=Qn[Ln],fr=_n.nx*_n.size,_r=new Uint8Array(Cn.buffer,_n.end*2,fr*2);qn.set(_r,Wn),Wn+=fr*2,_n.end+=fr}return new DataView(qn.buffer)}function on(Et){var Vt=Et.array.slice(Et.offset.value,Et.offset.value+Et.size),sn=unzlibSync$1(Vt);const Cn=Et.lines*Et.channels*Et.width,Nn=Et.type==1?new Uint16Array(Cn):new Uint32Array(Cn);let Pn=0,Qn=0;const Jn=new Array(4);for(let pt=0;pt<Et.lines;pt++)for(let $t=0;$t<Et.channels;$t++){let en=0;switch(Et.type){case 1:Jn[0]=Pn,Jn[1]=Jn[0]+Et.width,Pn=Jn[1]+Et.width;for(let tn=0;tn<Et.width;++tn){const cn=sn[Jn[0]++]<<8|sn[Jn[1]++];en+=cn,Nn[Qn]=en,Qn++}break;case 2:Jn[0]=Pn,Jn[1]=Jn[0]+Et.width,Jn[2]=Jn[1]+Et.width,Pn=Jn[2]+Et.width;for(let tn=0;tn<Et.width;++tn){const cn=sn[Jn[0]++]<<24|sn[Jn[1]++]<<16|sn[Jn[2]++]<<8;en+=cn,Nn[Qn]=en,Qn++}break}}return new DataView(Nn.buffer)}function Rt(Et){var Vt=Et.viewer,sn={value:Et.offset.value},Cn=new Uint8Array(Et.width*Et.lines*(Et.channels*Et.type*2)),Nn={version:hr(Vt,sn),unknownUncompressedSize:hr(Vt,sn),unknownCompressedSize:hr(Vt,sn),acCompressedSize:hr(Vt,sn),dcCompressedSize:hr(Vt,sn),rleCompressedSize:hr(Vt,sn),rleUncompressedSize:hr(Vt,sn),rleRawSize:hr(Vt,sn),totalAcUncompressedCount:hr(Vt,sn),totalDcUncompressedCount:hr(Vt,sn),acCompression:hr(Vt,sn)};if(Nn.version<2)throw"EXRLoader.parse: "+mi.compression+" version "+Nn.version+" is unsupported";for(var Pn=new Array,Qn=wn(Vt,sn)-2;Qn>0;){var Jn=An(Vt.buffer,sn),pt=gr(Vt,sn),$t=pt>>2&3,en=(pt>>4)-1,tn=new Int8Array([en])[0],cn=gr(Vt,sn);Pn.push({name:Jn,index:tn,type:cn,compression:$t}),Qn-=Jn.length+3}for(var _n=mi.channels,Fn=new Array(Et.channels),Wn=0;Wn<Et.channels;++Wn){var qn=Fn[Wn]={},dr=_n[Wn];qn.name=dr.name,qn.compression=0,qn.decoded=!1,qn.type=dr.pixelType,qn.pLinear=dr.pLinear,qn.width=Et.width,qn.height=Et.lines}for(var Ln={idx:new Array(3)},fr=0;fr<Et.channels;++fr)for(var qn=Fn[fr],Wn=0;Wn<Pn.length;++Wn){var _r=Pn[Wn];qn.name==_r.name&&(qn.compression=_r.compression,_r.index>=0&&(Ln.idx[_r.index]=fr),qn.offset=fr)}if(Nn.acCompressedSize>0)switch(Nn.acCompression){case 0:var Sr=new Uint16Array(Nn.totalAcUncompressedCount);kn(Et.array,Vt,sn,Nn.acCompressedSize,Sr,Nn.totalAcUncompressedCount);break;case 1:var yr=Et.array.slice(sn.value,sn.value+Nn.totalAcUncompressedCount),Hr=unzlibSync$1(yr),Sr=new Uint16Array(Hr.buffer);sn.value+=Nn.totalAcUncompressedCount;break}if(Nn.dcCompressedSize>0){var Cr={array:Et.array,offset:sn,size:Nn.dcCompressedSize},vr=new Uint16Array(gn(Cr).buffer);sn.value+=Nn.dcCompressedSize}if(Nn.rleRawSize>0){var yr=Et.array.slice(sn.value,sn.value+Nn.rleCompressedSize),Hr=unzlibSync$1(yr),jr=Dn(Hr.buffer);sn.value+=Nn.rleCompressedSize}for(var Rr=0,Dr=new Array(Fn.length),Wn=0;Wn<Dr.length;++Wn)Dr[Wn]=new Array;for(var Ur=0;Ur<Et.lines;++Ur)for(var Tr=0;Tr<Fn.length;++Tr)Dr[Tr].push(Rr),Rr+=Fn[Tr].width*Et.type*2;hn(Ln,Dr,Fn,Sr,vr,Cn);for(var Wn=0;Wn<Fn.length;++Wn){var qn=Fn[Wn];if(!qn.decoded)switch(qn.compression){case 2:for(var Nr=0,Lr=0,Ur=0;Ur<Et.lines;++Ur){for(var ri=Dr[Wn][Nr],Xr=0;Xr<qn.width;++Xr){for(var ei=0;ei<2*qn.type;++ei)Cn[ri++]=jr[Lr+ei*qn.width*qn.height];Lr++}Nr++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(Cn.buffer)}function An(Et,Vt){for(var sn=new Uint8Array(Et),Cn=0;sn[Vt.value+Cn]!=0;)Cn+=1;var Nn=new TextDecoder().decode(sn.slice(Vt.value,Vt.value+Cn));return Vt.value=Vt.value+Cn+1,Nn}function sr(Et,Vt,sn){var Cn=new TextDecoder().decode(new Uint8Array(Et).slice(Vt.value,Vt.value+sn));return Vt.value=Vt.value+sn,Cn}function zn(Et,Vt){var sn=er(Et,Vt),Cn=Kn(Et,Vt);return[sn,Cn]}function In(Et,Vt){var sn=Kn(Et,Vt),Cn=Kn(Et,Vt);return[sn,Cn]}function er(Et,Vt){var sn=Et.getInt32(Vt.value,!0);return Vt.value=Vt.value+4,sn}function Kn(Et,Vt){var sn=Et.getUint32(Vt.value,!0);return Vt.value=Vt.value+4,sn}function lr(Et,Vt){var sn=Et[Vt.value];return Vt.value=Vt.value+1,sn}function gr(Et,Vt){var sn=Et.getUint8(Vt.value);return Vt.value=Vt.value+1,sn}const hr=function(Et,Vt){let sn;return"getBigInt64"in DataView.prototype?sn=Number(Et.getBigInt64(Vt.value,!0)):sn=Et.getUint32(Vt.value+4,!0)+Number(Et.getUint32(Vt.value,!0)<<32),Vt.value+=8,sn};function Er(Et,Vt){var sn=Et.getFloat32(Vt.value,!0);return Vt.value+=4,sn}function un(Et,Vt){return DataUtils.toHalfFloat(Er(Et,Vt))}function Sn(Et){var Vt=(Et&31744)>>10,sn=Et&1023;return(Et>>15?-1:1)*(Vt?Vt===31?sn?NaN:1/0:Math.pow(2,Vt-15)*(1+sn/1024):6103515625e-14*(sn/1024))}function wn(Et,Vt){var sn=Et.getUint16(Vt.value,!0);return Vt.value+=2,sn}function Gn(Et,Vt){return Sn(wn(Et,Vt))}function Yn(Et,Vt,sn,Cn){for(var Nn=sn.value,Pn=[];sn.value<Nn+Cn-1;){var Qn=An(Vt,sn),Jn=er(Et,sn),pt=gr(Et,sn);sn.value+=3;var $t=er(Et,sn),en=er(Et,sn);Pn.push({name:Qn,pixelType:Jn,pLinear:pt,xSampling:$t,ySampling:en})}return sn.value+=1,Pn}function cr(Et,Vt){var sn=Er(Et,Vt),Cn=Er(Et,Vt),Nn=Er(Et,Vt),Pn=Er(Et,Vt),Qn=Er(Et,Vt),Jn=Er(Et,Vt),pt=Er(Et,Vt),$t=Er(Et,Vt);return{redX:sn,redY:Cn,greenX:Nn,greenY:Pn,blueX:Qn,blueY:Jn,whiteX:pt,whiteY:$t}}function tr(Et,Vt){var sn=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],Cn=gr(Et,Vt);return sn[Cn]}function Wr(Et,Vt){var sn=Kn(Et,Vt),Cn=Kn(Et,Vt),Nn=Kn(Et,Vt),Pn=Kn(Et,Vt);return{xMin:sn,yMin:Cn,xMax:Nn,yMax:Pn}}function Qr(Et,Vt){var sn=["INCREASING_Y"],Cn=gr(Et,Vt);return sn[Cn]}function kr(Et,Vt){var sn=Er(Et,Vt),Cn=Er(Et,Vt);return[sn,Cn]}function di(Et,Vt){var sn=Er(Et,Vt),Cn=Er(Et,Vt),Nn=Er(Et,Vt);return[sn,Cn,Nn]}function ci(Et,Vt,sn,Cn,Nn){if(Cn==="string"||Cn==="stringvector"||Cn==="iccProfile")return sr(Vt,sn,Nn);if(Cn==="chlist")return Yn(Et,Vt,sn,Nn);if(Cn==="chromaticities")return cr(Et,sn);if(Cn==="compression")return tr(Et,sn);if(Cn==="box2i")return Wr(Et,sn);if(Cn==="lineOrder")return Qr(Et,sn);if(Cn==="float")return Er(Et,sn);if(Cn==="v2f")return kr(Et,sn);if(Cn==="v3f")return di(Et,sn);if(Cn==="int")return er(Et,sn);if(Cn==="rational")return zn(Et,sn);if(Cn==="timecode")return In(Et,sn);if(Cn==="preview")return sn.value+=Nn,"skipped";sn.value+=Nn}function hs(Et,Vt,sn){const Cn={};if(Et.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";Cn.version=Et.getUint8(4);const Nn=Et.getUint8(5);Cn.spec={singleTile:!!(Nn&2),longName:!!(Nn&4),deepFormat:!!(Nn&8),multiPart:!!(Nn&16)},sn.value=8;for(var Pn=!0;Pn;){var Qn=An(Vt,sn);if(Qn==0)Pn=!1;else{var Jn=An(Vt,sn),pt=Kn(Et,sn),$t=ci(Et,Vt,sn,Jn,pt);$t===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Jn}'.`):Cn[Qn]=$t}}if(Nn&-5)throw console.error("EXRHeader:",Cn),"THREE.EXRLoader: provided file is currently unsupported.";return Cn}function Ei(Et,Vt,sn,Cn,Nn){const Pn={size:0,viewer:Vt,array:sn,offset:Cn,width:Et.dataWindow.xMax-Et.dataWindow.xMin+1,height:Et.dataWindow.yMax-Et.dataWindow.yMin+1,channels:Et.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:Et.channels[0].pixelType,uncompress:null,getter:null,format:null,[hasColorSpace?"colorSpace":"encoding"]:null};switch(Et.compression){case"NO_COMPRESSION":Pn.lines=1,Pn.uncompress=ln;break;case"RLE_COMPRESSION":Pn.lines=1,Pn.uncompress=nn;break;case"ZIPS_COMPRESSION":Pn.lines=1,Pn.uncompress=gn;break;case"ZIP_COMPRESSION":Pn.lines=16,Pn.uncompress=gn;break;case"PIZ_COMPRESSION":Pn.lines=32,Pn.uncompress=Xt;break;case"PXR24_COMPRESSION":Pn.lines=16,Pn.uncompress=on;break;case"DWAA_COMPRESSION":Pn.lines=32,Pn.uncompress=Rt;break;case"DWAB_COMPRESSION":Pn.lines=256,Pn.uncompress=Rt;break;default:throw"EXRLoader.parse: "+Et.compression+" is unsupported"}if(Pn.scanlineBlockSize=Pn.lines,Pn.type==1)switch(Nn){case FloatType:Pn.getter=Gn,Pn.inputSize=2;break;case HalfFloatType:Pn.getter=wn,Pn.inputSize=2;break}else if(Pn.type==2)switch(Nn){case FloatType:Pn.getter=Er,Pn.inputSize=4;break;case HalfFloatType:Pn.getter=un,Pn.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+Pn.type+" for "+Et.compression+".";Pn.blockCount=(Et.dataWindow.yMax+1)/Pn.scanlineBlockSize;for(var Qn=0;Qn<Pn.blockCount;Qn++)hr(Vt,Cn);Pn.outputChannels=Pn.channels==3?4:Pn.channels;const Jn=Pn.width*Pn.height*Pn.outputChannels;switch(Nn){case FloatType:Pn.byteArray=new Float32Array(Jn),Pn.channels<Pn.outputChannels&&Pn.byteArray.fill(1,0,Jn);break;case HalfFloatType:Pn.byteArray=new Uint16Array(Jn),Pn.channels<Pn.outputChannels&&Pn.byteArray.fill(15360,0,Jn);break;default:console.error("THREE.EXRLoader: unsupported type: ",Nn);break}return Pn.bytesPerLine=Pn.width*Pn.inputSize*Pn.channels,Pn.outputChannels==4?Pn.format=RGBAFormat:Pn.format=RedFormat,hasColorSpace?Pn.colorSpace="srgb-linear":Pn.encoding=3e3,Pn}const ai=new DataView(K),hi=new Uint8Array(K),Fi={value:0},mi=hs(ai,K,Fi),Ar=Ei(mi,ai,hi,Fi,this.type),ki={value:0},qr={R:0,G:1,B:2,A:3,Y:0};for(let Et=0;Et<Ar.height/Ar.scanlineBlockSize;Et++){const Vt=Kn(ai,Fi);Ar.size=Kn(ai,Fi),Ar.lines=Vt+Ar.scanlineBlockSize>Ar.height?Ar.height-Vt:Ar.scanlineBlockSize;const Cn=Ar.size<Ar.lines*Ar.bytesPerLine?Ar.uncompress(Ar):ln(Ar);Fi.value+=Ar.size;for(let Nn=0;Nn<Ar.scanlineBlockSize;Nn++){const Pn=Nn+Et*Ar.scanlineBlockSize;if(Pn>=Ar.height)break;for(let Qn=0;Qn<Ar.channels;Qn++){const Jn=qr[mi.channels[Qn].name];for(let pt=0;pt<Ar.width;pt++){ki.value=(Nn*(Ar.channels*Ar.width)+Qn*Ar.width+pt)*Ar.inputSize;const $t=(Ar.height-1-Pn)*(Ar.width*Ar.outputChannels)+pt*Ar.outputChannels+Jn;Ar.byteArray[$t]=Ar.getter(Cn,ki)}}}}return{header:mi,width:Ar.width,height:Ar.height,data:Ar.byteArray,format:Ar.format,[hasColorSpace?"colorSpace":"encoding"]:Ar[hasColorSpace?"colorSpace":"encoding"],type:this.type}}setDataType(K){return this.type=K,this}load(K,me,ge,xe){function ye(ve,_e){hasColorSpace?ve.colorSpace=_e.colorSpace:ve.encoding=_e.encoding,ve.minFilter=LinearFilter,ve.magFilter=LinearFilter,ve.generateMipmaps=!1,ve.flipY=!1,me&&me(ve,_e)}return super.load(K,ye,ge,xe)}}const _box$1=new Box3,_vector=new Vector3;class LineSegmentsGeometry extends InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const K=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],me=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],ge=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(ge),this.setAttribute("position",new Float32BufferAttribute(K,3)),this.setAttribute("uv",new Float32BufferAttribute(me,2))}applyMatrix4(K){const me=this.attributes.instanceStart,ge=this.attributes.instanceEnd;return me!==void 0&&(me.applyMatrix4(K),ge.applyMatrix4(K),me.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(K){let me;K instanceof Float32Array?me=K:Array.isArray(K)&&(me=new Float32Array(K));const ge=new InstancedInterleavedBuffer(me,6,1);return this.setAttribute("instanceStart",new InterleavedBufferAttribute(ge,3,0)),this.setAttribute("instanceEnd",new InterleavedBufferAttribute(ge,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(K,me=3){let ge;K instanceof Float32Array?ge=K:Array.isArray(K)&&(ge=new Float32Array(K));const xe=new InstancedInterleavedBuffer(ge,me*2,1);return this.setAttribute("instanceColorStart",new InterleavedBufferAttribute(xe,me,0)),this.setAttribute("instanceColorEnd",new InterleavedBufferAttribute(xe,me,me)),this}fromWireframeGeometry(K){return this.setPositions(K.attributes.position.array),this}fromEdgesGeometry(K){return this.setPositions(K.attributes.position.array),this}fromMesh(K){return this.fromWireframeGeometry(new WireframeGeometry(K.geometry)),this}fromLineSegments(K){const me=K.geometry;return this.setPositions(me.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Box3);const K=this.attributes.instanceStart,me=this.attributes.instanceEnd;K!==void 0&&me!==void 0&&(this.boundingBox.setFromBufferAttribute(K),_box$1.setFromBufferAttribute(me),this.boundingBox.union(_box$1))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Sphere),this.boundingBox===null&&this.computeBoundingBox();const K=this.attributes.instanceStart,me=this.attributes.instanceEnd;if(K!==void 0&&me!==void 0){const ge=this.boundingSphere.center;this.boundingBox.getCenter(ge);let xe=0;for(let ye=0,ve=K.count;ye<ve;ye++)_vector.fromBufferAttribute(K,ye),xe=Math.max(xe,ge.distanceToSquared(_vector)),_vector.fromBufferAttribute(me,ye),xe=Math.max(xe,ge.distanceToSquared(_vector));this.boundingSphere.radius=Math.sqrt(xe),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(K){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(K)}}class LineGeometry extends LineSegmentsGeometry{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(K){const me=K.length-3,ge=new Float32Array(2*me);for(let xe=0;xe<me;xe+=3)ge[2*xe]=K[xe],ge[2*xe+1]=K[xe+1],ge[2*xe+2]=K[xe+2],ge[2*xe+3]=K[xe+3],ge[2*xe+4]=K[xe+4],ge[2*xe+5]=K[xe+5];return super.setPositions(ge),this}setColors(K,me=3){const ge=K.length-me,xe=new Float32Array(2*ge);if(me===3)for(let ye=0;ye<ge;ye+=me)xe[2*ye]=K[ye],xe[2*ye+1]=K[ye+1],xe[2*ye+2]=K[ye+2],xe[2*ye+3]=K[ye+3],xe[2*ye+4]=K[ye+4],xe[2*ye+5]=K[ye+5];else for(let ye=0;ye<ge;ye+=me)xe[2*ye]=K[ye],xe[2*ye+1]=K[ye+1],xe[2*ye+2]=K[ye+2],xe[2*ye+3]=K[ye+3],xe[2*ye+4]=K[ye+4],xe[2*ye+5]=K[ye+5],xe[2*ye+6]=K[ye+6],xe[2*ye+7]=K[ye+7];return super.setColors(xe,me),this}fromLine(K){const me=K.geometry;return this.setPositions(me.attributes.position.array),this}}class LineMaterial extends ShaderMaterial{constructor(K){super({type:"LineMaterial",uniforms:UniformsUtils.clone(UniformsUtils.merge([UniformsLib.common,UniformsLib.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${version$1>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(me){this.uniforms.diffuse.value=me}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(me){me===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(me){this.uniforms.linewidth.value=me}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(me){!!me!="USE_DASH"in this.defines&&(this.needsUpdate=!0),me===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(me){this.uniforms.dashScale.value=me}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(me){this.uniforms.dashSize.value=me}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(me){this.uniforms.dashOffset.value=me}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(me){this.uniforms.gapSize.value=me}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(me){this.uniforms.opacity.value=me}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(me){this.uniforms.resolution.value.copy(me)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(me){!!me!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),me===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(K)}}const _viewport=new Vector4,_start=new Vector3,_end=new Vector3,_start4=new Vector4,_end4=new Vector4,_ssOrigin=new Vector4,_ssOrigin3=new Vector3,_mvMatrix=new Matrix4,_line=new Line3,_closestPoint=new Vector3,_box=new Box3,_sphere$1=new Sphere,_clipToWorldVector=new Vector4;let _ray,_lineWidth;function getWorldSpaceHalfWidth(fe,K,me){return _clipToWorldVector.set(0,0,-K,1).applyMatrix4(fe.projectionMatrix),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),_clipToWorldVector.x=_lineWidth/me.width,_clipToWorldVector.y=_lineWidth/me.height,_clipToWorldVector.applyMatrix4(fe.projectionMatrixInverse),_clipToWorldVector.multiplyScalar(1/_clipToWorldVector.w),Math.abs(Math.max(_clipToWorldVector.x,_clipToWorldVector.y))}function raycastWorldUnits(fe,K){const me=fe.matrixWorld,ge=fe.geometry,xe=ge.attributes.instanceStart,ye=ge.attributes.instanceEnd,ve=Math.min(ge.instanceCount,xe.count);for(let _e=0,Ee=ve;_e<Ee;_e++){_line.start.fromBufferAttribute(xe,_e),_line.end.fromBufferAttribute(ye,_e),_line.applyMatrix4(me);const be=new Vector3,Ae=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,Ae,be),Ae.distanceTo(be)<_lineWidth*.5&&K.push({point:Ae,pointOnLine:be,distance:_ray.origin.distanceTo(Ae),object:fe,face:null,faceIndex:_e,uv:null,[UV1]:null})}}function raycastScreenSpace(fe,K,me){const ge=K.projectionMatrix,ye=fe.material.resolution,ve=fe.matrixWorld,_e=fe.geometry,Ee=_e.attributes.instanceStart,be=_e.attributes.instanceEnd,Ae=Math.min(_e.instanceCount,Ee.count),Se=-K.near;_ray.at(1,_ssOrigin),_ssOrigin.w=1,_ssOrigin.applyMatrix4(K.matrixWorldInverse),_ssOrigin.applyMatrix4(ge),_ssOrigin.multiplyScalar(1/_ssOrigin.w),_ssOrigin.x*=ye.x/2,_ssOrigin.y*=ye.y/2,_ssOrigin.z=0,_ssOrigin3.copy(_ssOrigin),_mvMatrix.multiplyMatrices(K.matrixWorldInverse,ve);for(let Ce=0,Te=Ae;Ce<Te;Ce++){if(_start4.fromBufferAttribute(Ee,Ce),_end4.fromBufferAttribute(be,Ce),_start4.w=1,_end4.w=1,_start4.applyMatrix4(_mvMatrix),_end4.applyMatrix4(_mvMatrix),_start4.z>Se&&_end4.z>Se)continue;if(_start4.z>Se){const Oe=_start4.z-_end4.z,Fe=(_start4.z-Se)/Oe;_start4.lerp(_end4,Fe)}else if(_end4.z>Se){const Oe=_end4.z-_start4.z,Fe=(_end4.z-Se)/Oe;_end4.lerp(_start4,Fe)}_start4.applyMatrix4(ge),_end4.applyMatrix4(ge),_start4.multiplyScalar(1/_start4.w),_end4.multiplyScalar(1/_end4.w),_start4.x*=ye.x/2,_start4.y*=ye.y/2,_end4.x*=ye.x/2,_end4.y*=ye.y/2,_line.start.copy(_start4),_line.start.z=0,_line.end.copy(_end4),_line.end.z=0;const De=_line.closestPointToPointParameter(_ssOrigin3,!0);_line.at(De,_closestPoint);const Ie=MathUtils.lerp(_start4.z,_end4.z,De),Be=Ie>=-1&&Ie<=1,Le=_ssOrigin3.distanceTo(_closestPoint)<_lineWidth*.5;if(Be&&Le){_line.start.fromBufferAttribute(Ee,Ce),_line.end.fromBufferAttribute(be,Ce),_line.start.applyMatrix4(ve),_line.end.applyMatrix4(ve);const Oe=new Vector3,Fe=new Vector3;_ray.distanceSqToSegment(_line.start,_line.end,Fe,Oe),me.push({point:Fe,pointOnLine:Oe,distance:_ray.origin.distanceTo(Fe),object:fe,face:null,faceIndex:Ce,uv:null,[UV1]:null})}}}class LineSegments2 extends Mesh{constructor(K=new LineSegmentsGeometry,me=new LineMaterial({color:Math.random()*16777215})){super(K,me),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const K=this.geometry,me=K.attributes.instanceStart,ge=K.attributes.instanceEnd,xe=new Float32Array(2*me.count);for(let ve=0,_e=0,Ee=me.count;ve<Ee;ve++,_e+=2)_start.fromBufferAttribute(me,ve),_end.fromBufferAttribute(ge,ve),xe[_e]=_e===0?0:xe[_e-1],xe[_e+1]=xe[_e]+_start.distanceTo(_end);const ye=new InstancedInterleavedBuffer(xe,2,1);return K.setAttribute("instanceDistanceStart",new InterleavedBufferAttribute(ye,1,0)),K.setAttribute("instanceDistanceEnd",new InterleavedBufferAttribute(ye,1,1)),this}raycast(K,me){const ge=this.material.worldUnits,xe=K.camera;xe===null&&!ge&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const ye=K.params.Line2!==void 0&&K.params.Line2.threshold||0;_ray=K.ray;const ve=this.matrixWorld,_e=this.geometry,Ee=this.material;_lineWidth=Ee.linewidth+ye,_e.boundingSphere===null&&_e.computeBoundingSphere(),_sphere$1.copy(_e.boundingSphere).applyMatrix4(ve);let be;if(ge)be=_lineWidth*.5;else{const Se=Math.max(xe.near,_sphere$1.distanceToPoint(_ray.origin));be=getWorldSpaceHalfWidth(xe,Se,Ee.resolution)}if(_sphere$1.radius+=be,_ray.intersectsSphere(_sphere$1)===!1)return;_e.boundingBox===null&&_e.computeBoundingBox(),_box.copy(_e.boundingBox).applyMatrix4(ve);let Ae;if(ge)Ae=_lineWidth*.5;else{const Se=Math.max(xe.near,_box.distanceToPoint(_ray.origin));Ae=getWorldSpaceHalfWidth(xe,Se,Ee.resolution)}_box.expandByScalar(Ae),_ray.intersectsBox(_box)!==!1&&(ge?raycastWorldUnits(this,me):raycastScreenSpace(this,xe,me))}onBeforeRender(K){const me=this.material.uniforms;me&&me.resolution&&(K.getViewport(_viewport),this.material.uniforms.resolution.value.set(_viewport.z,_viewport.w))}}class Line2 extends LineSegments2{constructor(K=new LineGeometry,me=new LineMaterial({color:Math.random()*16777215})){super(K,me),this.isLine2=!0,this.type="Line2"}}const tV0=new Vector3,tV1=new Vector3,tV2=new Vector3,getPoint2=(fe,K,me)=>{const ge=me.width/2,xe=me.height/2;K.updateMatrixWorld(!1);const ye=fe.project(K);return ye.x=ye.x*ge+ge,ye.y=-(ye.y*xe)+xe,ye},getPoint3=(fe,K,me,ge=1)=>{const xe=tV0.set(fe.x/me.width*2-1,-(fe.y/me.height)*2+1,ge);return xe.unproject(K),xe},calculateScaleFactor=(fe,K,me,ge)=>{const xe=getPoint2(tV2.copy(fe),me,ge);let ye=0;for(let ve=0;ve<2;++ve){const _e=tV1.copy(xe).setComponent(ve,xe.getComponent(ve)+K),Ee=getPoint3(_e,me,ge,_e.z);ye=Math.max(ye,fe.distanceTo(Ee))}return ye},Line$1=reactExports.forwardRef(function({points:K,color:me=16777215,vertexColors:ge,linewidth:xe,lineWidth:ye,segments:ve,dashed:_e,...Ee},be){var Ae,Se;const Ce=useThree(Be=>Be.size),Te=reactExports.useMemo(()=>ve?new LineSegments2:new Line2,[ve]),[Re]=reactExports.useState(()=>new LineMaterial),De=(ge==null||(Ae=ge[0])==null?void 0:Ae.length)===4?4:3,Ie=reactExports.useMemo(()=>{const Be=ve?new LineSegmentsGeometry:new LineGeometry,Le=K.map(Oe=>{const Fe=Array.isArray(Oe);return Oe instanceof Vector3||Oe instanceof Vector4?[Oe.x,Oe.y,Oe.z]:Oe instanceof Vector2?[Oe.x,Oe.y,0]:Fe&&Oe.length===3?[Oe[0],Oe[1],Oe[2]]:Fe&&Oe.length===2?[Oe[0],Oe[1],0]:Oe});if(Be.setPositions(Le.flat()),ge){me=16777215;const Oe=ge.map(Fe=>Fe instanceof Color$1?Fe.toArray():Fe);Be.setColors(Oe.flat(),De)}return Be},[K,ve,ge,De]);return reactExports.useLayoutEffect(()=>{Te.computeLineDistances()},[K,Te]),reactExports.useLayoutEffect(()=>{_e?Re.defines.USE_DASH="":delete Re.defines.USE_DASH,Re.needsUpdate=!0},[_e,Re]),reactExports.useEffect(()=>()=>{Ie.dispose(),Re.dispose()},[Ie]),reactExports.createElement("primitive",_extends$2({object:Te,ref:be},Ee),reactExports.createElement("primitive",{object:Ie,attach:"geometry"}),reactExports.createElement("primitive",_extends$2({object:Re,attach:"material",color:me,vertexColors:!!ge,resolution:[Ce.width,Ce.height],linewidth:(Se=xe??ye)!==null&&Se!==void 0?Se:1,dashed:_e,transparent:De===4},Ee)))}),CubicBezierLine=reactExports.forwardRef(function({start:K,end:me,midA:ge,midB:xe,segments:ye=20,...ve},_e){const Ee=reactExports.useMemo(()=>{const be=K instanceof Vector3?K:new Vector3(...K),Ae=me instanceof Vector3?me:new Vector3(...me),Se=ge instanceof Vector3?ge:new Vector3(...ge),Ce=xe instanceof Vector3?xe:new Vector3(...xe);return new CubicBezierCurve3(be,Se,Ce,Ae).getPoints(ye)},[K,me,ge,xe,ye]);return reactExports.createElement(Line$1,_extends$2({ref:_e,points:Ee},ve))}),CatmullRomLine=reactExports.forwardRef(function({points:K,closed:me=!1,curveType:ge="centripetal",tension:xe=.5,segments:ye=20,vertexColors:ve,..._e},Ee){const be=reactExports.useMemo(()=>{const Ce=K.map(Te=>Te instanceof Vector3?Te:new Vector3(...Te));return new CatmullRomCurve3(Ce,me,ge,xe)},[K,me,ge,xe]),Ae=reactExports.useMemo(()=>be.getPoints(ye),[be,ye]),Se=reactExports.useMemo(()=>{if(!ve||ve.length<2)return;if(ve.length===ye+1)return ve;const Ce=ve.map(De=>De instanceof Color$1?De:new Color$1(...De));me&&Ce.push(Ce[0].clone());const Te=[Ce[0]],Re=ye/(Ce.length-1);for(let De=1;De<ye;De++){const Ie=De%Re/Re,Be=Math.floor(De/Re);Te.push(Ce[Be].clone().lerp(Ce[Be+1],Ie))}return Te.push(Ce[Ce.length-1]),Te},[ve,ye]);return reactExports.createElement(Line$1,_extends$2({ref:Ee,points:Ae,vertexColors:Se},_e))});function shaderMaterial(fe,K,me,ge){var xe;return xe=class extends ShaderMaterial{constructor(ye){super({vertexShader:K,fragmentShader:me,...ye});for(const ve in fe)this.uniforms[ve]=new Uniform(fe[ve]),Object.defineProperty(this,ve,{get(){return this.uniforms[ve].value},set(_e){this.uniforms[ve].value=_e}});this.uniforms=UniformsUtils.clone(this.uniforms)}},xe.key=MathUtils.generateUUID(),xe}const getVersion=()=>parseInt(REVISION.replace(/\D+/g,"")),version=getVersion();/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const MOUSE_BUTTON={LEFT:1,RIGHT:2,MIDDLE:4},ACTION=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,SCREEN_PAN:4,OFFSET:8,DOLLY:16,ZOOM:32,TOUCH_ROTATE:64,TOUCH_TRUCK:128,TOUCH_SCREEN_PAN:256,TOUCH_OFFSET:512,TOUCH_DOLLY:1024,TOUCH_ZOOM:2048,TOUCH_DOLLY_TRUCK:4096,TOUCH_DOLLY_SCREEN_PAN:8192,TOUCH_DOLLY_OFFSET:16384,TOUCH_DOLLY_ROTATE:32768,TOUCH_ZOOM_TRUCK:65536,TOUCH_ZOOM_OFFSET:131072,TOUCH_ZOOM_SCREEN_PAN:262144,TOUCH_ZOOM_ROTATE:524288}),DOLLY_DIRECTION={NONE:0,IN:1,OUT:-1};function isPerspectiveCamera(fe){return fe.isPerspectiveCamera}function isOrthographicCamera(fe){return fe.isOrthographicCamera}const PI_2=Math.PI*2,PI_HALF=Math.PI/2,EPSILON=1e-5,DEG2RAD=Math.PI/180;function clamp(fe,K,me){return Math.max(K,Math.min(me,fe))}function approxZero(fe,K=EPSILON){return Math.abs(fe)<K}function approxEquals(fe,K,me=EPSILON){return approxZero(fe-K,me)}function roundToStep(fe,K){return Math.round(fe/K)*K}function infinityToMaxNumber(fe){return isFinite(fe)?fe:fe<0?-Number.MAX_VALUE:Number.MAX_VALUE}function maxNumberToInfinity(fe){return Math.abs(fe)<Number.MAX_VALUE?fe:fe*(1/0)}function smoothDamp(fe,K,me,ge,xe=1/0,ye){ge=Math.max(1e-4,ge);const ve=2/ge,_e=ve*ye,Ee=1/(1+_e+.48*_e*_e+.235*_e*_e*_e);let be=fe-K;const Ae=K,Se=xe*ge;be=clamp(be,-Se,Se),K=fe-be;const Ce=(me.value+ve*be)*ye;me.value=(me.value-ve*Ce)*Ee;let Te=K+(be+Ce)*Ee;return Ae-fe>0==Te>Ae&&(Te=Ae,me.value=(Te-Ae)/ye),Te}function smoothDampVec3(fe,K,me,ge,xe=1/0,ye,ve){ge=Math.max(1e-4,ge);const _e=2/ge,Ee=_e*ye,be=1/(1+Ee+.48*Ee*Ee+.235*Ee*Ee*Ee);let Ae=K.x,Se=K.y,Ce=K.z,Te=fe.x-Ae,Re=fe.y-Se,De=fe.z-Ce;const Ie=Ae,Be=Se,Le=Ce,Oe=xe*ge,Fe=Oe*Oe,Ue=Te*Te+Re*Re+De*De;if(Ue>Fe){const Nt=Math.sqrt(Ue);Te=Te/Nt*Oe,Re=Re/Nt*Oe,De=De/Nt*Oe}Ae=fe.x-Te,Se=fe.y-Re,Ce=fe.z-De;const Ne=(me.x+_e*Te)*ye,He=(me.y+_e*Re)*ye,ze=(me.z+_e*De)*ye;me.x=(me.x-_e*Ne)*be,me.y=(me.y-_e*He)*be,me.z=(me.z-_e*ze)*be,ve.x=Ae+(Te+Ne)*be,ve.y=Se+(Re+He)*be,ve.z=Ce+(De+ze)*be;const je=Ie-fe.x,Ge=Be-fe.y,Xe=Le-fe.z,qe=ve.x-Ie,Qe=ve.y-Be,nt=ve.z-Le;return je*qe+Ge*Qe+Xe*nt>0&&(ve.x=Ie,ve.y=Be,ve.z=Le,me.x=(ve.x-Ie)/ye,me.y=(ve.y-Be)/ye,me.z=(ve.z-Le)/ye),ve}function extractClientCoordFromEvent(fe,K){K.set(0,0),fe.forEach(me=>{K.x+=me.clientX,K.y+=me.clientY}),K.x/=fe.length,K.y/=fe.length}function notSupportedInOrthographicCamera(fe,K){return isOrthographicCamera(fe)?(console.warn(`${K} is not supported in OrthographicCamera`),!0):!1}let EventDispatcher$1=class{constructor(){this._listeners={}}addEventListener(K,me){const ge=this._listeners;ge[K]===void 0&&(ge[K]=[]),ge[K].indexOf(me)===-1&&ge[K].push(me)}hasEventListener(K,me){const ge=this._listeners;return ge[K]!==void 0&&ge[K].indexOf(me)!==-1}removeEventListener(K,me){const xe=this._listeners[K];if(xe!==void 0){const ye=xe.indexOf(me);ye!==-1&&xe.splice(ye,1)}}removeAllEventListeners(K){if(!K){this._listeners={};return}Array.isArray(this._listeners[K])&&(this._listeners[K].length=0)}dispatchEvent(K){const ge=this._listeners[K.type];if(ge!==void 0){K.target=this;const xe=ge.slice(0);for(let ye=0,ve=xe.length;ye<ve;ye++)xe[ye].call(this,K)}}};var _a$1;const VERSION="2.10.0",TOUCH_DOLLY_FACTOR=1/8,isMac=/Mac/.test((_a$1=globalThis?.navigator)===null||_a$1===void 0?void 0:_a$1.platform);let THREE,_ORIGIN,_AXIS_Y,_AXIS_Z,_v2,_v3A,_v3B,_v3C,_cameraDirection,_xColumn,_yColumn,_zColumn,_deltaTarget,_deltaOffset,_sphericalA,_sphericalB,_box3A,_box3B,_sphere,_quaternionA,_quaternionB,_rotationMatrix,_raycaster,CameraControls$1=class Ec extends EventDispatcher$1{static install(K){THREE=K.THREE,_ORIGIN=Object.freeze(new THREE.Vector3(0,0,0)),_AXIS_Y=Object.freeze(new THREE.Vector3(0,1,0)),_AXIS_Z=Object.freeze(new THREE.Vector3(0,0,1)),_v2=new THREE.Vector2,_v3A=new THREE.Vector3,_v3B=new THREE.Vector3,_v3C=new THREE.Vector3,_cameraDirection=new THREE.Vector3,_xColumn=new THREE.Vector3,_yColumn=new THREE.Vector3,_zColumn=new THREE.Vector3,_deltaTarget=new THREE.Vector3,_deltaOffset=new THREE.Vector3,_sphericalA=new THREE.Spherical,_sphericalB=new THREE.Spherical,_box3A=new THREE.Box3,_box3B=new THREE.Box3,_sphere=new THREE.Sphere,_quaternionA=new THREE.Quaternion,_quaternionB=new THREE.Quaternion,_rotationMatrix=new THREE.Matrix4,_raycaster=new THREE.Raycaster}static get ACTION(){return ACTION}constructor(K,me){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=ACTION.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=DOLLY_DIRECTION.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new THREE.Vector3,this._focalOffsetVelocity=new THREE.Vector3,this._zoomVelocity={value:0},this._truckInternal=(Be,Le,Oe,Fe)=>{let Ue,Ne;if(isPerspectiveCamera(this._camera)){const He=_v3A.copy(this._camera.position).sub(this._target),ze=this._camera.getEffectiveFOV()*DEG2RAD,je=He.length()*Math.tan(ze*.5);Ue=this.truckSpeed*Be*je/this._elementRect.height,Ne=this.truckSpeed*Le*je/this._elementRect.height}else if(isOrthographicCamera(this._camera)){const He=this._camera;Ue=this.truckSpeed*Be*(He.right-He.left)/He.zoom/this._elementRect.width,Ne=this.truckSpeed*Le*(He.top-He.bottom)/He.zoom/this._elementRect.height}else return;Fe?(Oe?this.setFocalOffset(this._focalOffsetEnd.x+Ue,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(Ue,0,!0),this.forward(-Ne,!0)):Oe?this.setFocalOffset(this._focalOffsetEnd.x+Ue,this._focalOffsetEnd.y+Ne,this._focalOffsetEnd.z,!0):this.truck(Ue,Ne,!0)},this._rotateInternal=(Be,Le)=>{const Oe=PI_2*this.azimuthRotateSpeed*Be/this._elementRect.height,Fe=PI_2*this.polarRotateSpeed*Le/this._elementRect.height;this.rotate(Oe,Fe,!0)},this._dollyInternal=(Be,Le,Oe)=>{const Fe=Math.pow(.95,-Be*this.dollySpeed),Ue=this._sphericalEnd.radius,Ne=this._sphericalEnd.radius*Fe,He=clamp(Ne,this.minDistance,this.maxDistance),ze=He-Ne;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(Ne,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(ze,!0),this._dollyToNoClamp(He,!0)):this._dollyToNoClamp(He,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?Ne:He)-Ue,this._dollyControlCoord.set(Le,Oe)),this._lastDollyDirection=Math.sign(-Be)},this._zoomInternal=(Be,Le,Oe)=>{const Fe=Math.pow(.95,Be*this.dollySpeed),Ue=this._zoom,Ne=this._zoom*Fe;this.zoomTo(Ne,!0),this.dollyToCursor&&(this._changedZoom+=Ne-Ue,this._dollyControlCoord.set(Le,Oe))},typeof THREE>"u"&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=K,this._yAxisUpSpace=new THREE.Quaternion().setFromUnitVectors(this._camera.up,_AXIS_Y),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=ACTION.NONE,this._target=new THREE.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new THREE.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new THREE.Spherical().setFromVector3(_v3A.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this._updateNearPlaneCorners(),this._boundary=new THREE.Box3(new THREE.Vector3(-1/0,-1/0,-1/0),new THREE.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new THREE.Vector2,this.mouseButtons={left:ACTION.ROTATE,middle:ACTION.DOLLY,right:ACTION.TRUCK,wheel:isPerspectiveCamera(this._camera)?ACTION.DOLLY:isOrthographicCamera(this._camera)?ACTION.ZOOM:ACTION.NONE},this.touches={one:ACTION.TOUCH_ROTATE,two:isPerspectiveCamera(this._camera)?ACTION.TOUCH_DOLLY_TRUCK:isOrthographicCamera(this._camera)?ACTION.TOUCH_ZOOM_TRUCK:ACTION.NONE,three:ACTION.TOUCH_TRUCK};const ge=new THREE.Vector2,xe=new THREE.Vector2,ye=new THREE.Vector2,ve=Be=>{if(!this._enabled||!this._domElement)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const Fe=this._domElement.getBoundingClientRect(),Ue=Be.clientX/Fe.width,Ne=Be.clientY/Fe.height;if(Ue<this._interactiveArea.left||Ue>this._interactiveArea.right||Ne<this._interactiveArea.top||Ne>this._interactiveArea.bottom)return}const Le=Be.pointerType!=="mouse"?null:(Be.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT?MOUSE_BUTTON.LEFT:(Be.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE?MOUSE_BUTTON.MIDDLE:(Be.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT?MOUSE_BUTTON.RIGHT:null;if(Le!==null){const Fe=this._findPointerByMouseButton(Le);Fe&&this._disposePointer(Fe)}if((Be.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT&&this._lockedPointer)return;const Oe={pointerId:Be.pointerId,clientX:Be.clientX,clientY:Be.clientY,deltaX:0,deltaY:0,mouseButton:Le};this._activePointers.push(Oe),this._domElement.ownerDocument.removeEventListener("pointermove",_e,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",Ee),this._domElement.ownerDocument.addEventListener("pointermove",_e,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",Ee),this._isDragging=!0,Ce(Be)},_e=Be=>{Be.cancelable&&Be.preventDefault();const Le=Be.pointerId,Oe=this._lockedPointer||this._findPointerById(Le);if(Oe){if(Oe.clientX=Be.clientX,Oe.clientY=Be.clientY,Oe.deltaX=Be.movementX,Oe.deltaY=Be.movementY,this._state=0,Be.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(Be.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(Be.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(Be.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT&&(this._state=this._state|this.mouseButtons.right);Te()}},Ee=Be=>{const Le=this._findPointerById(Be.pointerId);if(!(Le&&Le===this._lockedPointer)){if(Le&&this._disposePointer(Le),Be.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=ACTION.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=ACTION.NONE;Re()}};let be=-1;const Ae=Be=>{if(!this._domElement||!this._enabled||this.mouseButtons.wheel===ACTION.NONE)return;if(this._interactiveArea.left!==0||this._interactiveArea.top!==0||this._interactiveArea.width!==1||this._interactiveArea.height!==1){const Ne=this._domElement.getBoundingClientRect(),He=Be.clientX/Ne.width,ze=Be.clientY/Ne.height;if(He<this._interactiveArea.left||He>this._interactiveArea.right||ze<this._interactiveArea.top||ze>this._interactiveArea.bottom)return}if(Be.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===ACTION.ROTATE||this.mouseButtons.wheel===ACTION.TRUCK){const Ne=performance.now();be-Ne<1e3&&this._getClientRect(this._elementRect),be=Ne}const Le=isMac?-1:-3,Oe=Be.deltaMode===1?Be.deltaY/Le:Be.deltaY/(Le*10),Fe=this.dollyToCursor?(Be.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,Ue=this.dollyToCursor?(Be.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case ACTION.ROTATE:{this._rotateInternal(Be.deltaX,Be.deltaY),this._isUserControllingRotate=!0;break}case ACTION.TRUCK:{this._truckInternal(Be.deltaX,Be.deltaY,!1,!1),this._isUserControllingTruck=!0;break}case ACTION.SCREEN_PAN:{this._truckInternal(Be.deltaX,Be.deltaY,!1,!0),this._isUserControllingTruck=!0;break}case ACTION.OFFSET:{this._truckInternal(Be.deltaX,Be.deltaY,!0,!1),this._isUserControllingOffset=!0;break}case ACTION.DOLLY:{this._dollyInternal(-Oe,Fe,Ue),this._isUserControllingDolly=!0;break}case ACTION.ZOOM:{this._zoomInternal(-Oe,Fe,Ue),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},Se=Be=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Ec.ACTION.NONE){const Le=Be instanceof PointerEvent?Be.pointerId:0,Oe=this._findPointerById(Le);Oe&&this._disposePointer(Oe),this._domElement.ownerDocument.removeEventListener("pointermove",_e,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",Ee);return}Be.preventDefault()}},Ce=Be=>{if(!this._enabled)return;if(extractClientCoordFromEvent(this._activePointers,_v2),this._getClientRect(this._elementRect),ge.copy(_v2),xe.copy(_v2),this._activePointers.length>=2){const Oe=_v2.x-this._activePointers[1].clientX,Fe=_v2.y-this._activePointers[1].clientY,Ue=Math.sqrt(Oe*Oe+Fe*Fe);ye.set(0,Ue);const Ne=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,He=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;xe.set(Ne,He)}if(this._state=0,!Be)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in Be&&Be.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(Be.buttons&MOUSE_BUTTON.LEFT)===MOUSE_BUTTON.LEFT&&(this._state=this._state|this.mouseButtons.left),(Be.buttons&MOUSE_BUTTON.MIDDLE)===MOUSE_BUTTON.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(Be.buttons&MOUSE_BUTTON.RIGHT)===MOUSE_BUTTON.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&ACTION.ROTATE)===ACTION.ROTATE||(this._state&ACTION.TOUCH_ROTATE)===ACTION.TOUCH_ROTATE||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&ACTION.TRUCK)===ACTION.TRUCK||(this._state&ACTION.SCREEN_PAN)===ACTION.SCREEN_PAN||(this._state&ACTION.TOUCH_TRUCK)===ACTION.TOUCH_TRUCK||(this._state&ACTION.TOUCH_SCREEN_PAN)===ACTION.TOUCH_SCREEN_PAN||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_DOLLY_SCREEN_PAN)===ACTION.TOUCH_DOLLY_SCREEN_PAN||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK||(this._state&ACTION.TOUCH_ZOOM_SCREEN_PAN)===ACTION.TOUCH_DOLLY_SCREEN_PAN)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&ACTION.DOLLY)===ACTION.DOLLY||(this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_DOLLY_SCREEN_PAN)===ACTION.TOUCH_DOLLY_SCREEN_PAN||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&ACTION.ZOOM)===ACTION.ZOOM||(this._state&ACTION.TOUCH_ZOOM)===ACTION.TOUCH_ZOOM||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK||(this._state&ACTION.TOUCH_ZOOM_SCREEN_PAN)===ACTION.TOUCH_ZOOM_SCREEN_PAN||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&ACTION.OFFSET)===ACTION.OFFSET||(this._state&ACTION.TOUCH_OFFSET)===ACTION.TOUCH_OFFSET||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},Te=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,extractClientCoordFromEvent(this._activePointers,_v2);const Le=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,Oe=Le?-Le.deltaX:xe.x-_v2.x,Fe=Le?-Le.deltaY:xe.y-_v2.y;if(xe.copy(_v2),((this._state&ACTION.ROTATE)===ACTION.ROTATE||(this._state&ACTION.TOUCH_ROTATE)===ACTION.TOUCH_ROTATE||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(Oe,Fe),this._isUserControllingRotate=!0),(this._state&ACTION.DOLLY)===ACTION.DOLLY||(this._state&ACTION.ZOOM)===ACTION.ZOOM){const Ue=this.dollyToCursor?(ge.x-this._elementRect.x)/this._elementRect.width*2-1:0,Ne=this.dollyToCursor?(ge.y-this._elementRect.y)/this._elementRect.height*-2+1:0,He=this.dollyDragInverted?-1:1;(this._state&ACTION.DOLLY)===ACTION.DOLLY?(this._dollyInternal(He*Fe*TOUCH_DOLLY_FACTOR,Ue,Ne),this._isUserControllingDolly=!0):(this._zoomInternal(He*Fe*TOUCH_DOLLY_FACTOR,Ue,Ne),this._isUserControllingZoom=!0)}if((this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_ZOOM)===ACTION.TOUCH_ZOOM||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK||(this._state&ACTION.TOUCH_DOLLY_SCREEN_PAN)===ACTION.TOUCH_DOLLY_SCREEN_PAN||(this._state&ACTION.TOUCH_ZOOM_SCREEN_PAN)===ACTION.TOUCH_ZOOM_SCREEN_PAN||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_ZOOM_ROTATE)===ACTION.TOUCH_ZOOM_ROTATE){const Ue=_v2.x-this._activePointers[1].clientX,Ne=_v2.y-this._activePointers[1].clientY,He=Math.sqrt(Ue*Ue+Ne*Ne),ze=ye.y-He;ye.set(0,He);const je=this.dollyToCursor?(xe.x-this._elementRect.x)/this._elementRect.width*2-1:0,Ge=this.dollyToCursor?(xe.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&ACTION.TOUCH_DOLLY)===ACTION.TOUCH_DOLLY||(this._state&ACTION.TOUCH_DOLLY_ROTATE)===ACTION.TOUCH_DOLLY_ROTATE||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_DOLLY_SCREEN_PAN)===ACTION.TOUCH_DOLLY_SCREEN_PAN||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET?(this._dollyInternal(ze*TOUCH_DOLLY_FACTOR,je,Ge),this._isUserControllingDolly=!0):(this._zoomInternal(ze*TOUCH_DOLLY_FACTOR,je,Ge),this._isUserControllingZoom=!0)}((this._state&ACTION.TRUCK)===ACTION.TRUCK||(this._state&ACTION.TOUCH_TRUCK)===ACTION.TOUCH_TRUCK||(this._state&ACTION.TOUCH_DOLLY_TRUCK)===ACTION.TOUCH_DOLLY_TRUCK||(this._state&ACTION.TOUCH_ZOOM_TRUCK)===ACTION.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(Oe,Fe,!1,!1),this._isUserControllingTruck=!0),((this._state&ACTION.SCREEN_PAN)===ACTION.SCREEN_PAN||(this._state&ACTION.TOUCH_SCREEN_PAN)===ACTION.TOUCH_SCREEN_PAN||(this._state&ACTION.TOUCH_DOLLY_SCREEN_PAN)===ACTION.TOUCH_DOLLY_SCREEN_PAN||(this._state&ACTION.TOUCH_ZOOM_SCREEN_PAN)===ACTION.TOUCH_ZOOM_SCREEN_PAN)&&(this._truckInternal(Oe,Fe,!1,!0),this._isUserControllingTruck=!0),((this._state&ACTION.OFFSET)===ACTION.OFFSET||(this._state&ACTION.TOUCH_OFFSET)===ACTION.TOUCH_OFFSET||(this._state&ACTION.TOUCH_DOLLY_OFFSET)===ACTION.TOUCH_DOLLY_OFFSET||(this._state&ACTION.TOUCH_ZOOM_OFFSET)===ACTION.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(Oe,Fe,!0,!1),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},Re=()=>{extractClientCoordFromEvent(this._activePointers,_v2),xe.copy(_v2),this._dragNeedsUpdate=!1,(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",_e,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",Ee),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",_e,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",Ee),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",De),this._domElement.ownerDocument.addEventListener("pointerlockerror",Ie),this._domElement.ownerDocument.addEventListener("pointermove",_e,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",Ee),Ce())},this.unlockPointer=()=>{var Be,Le,Oe;this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),(Be=this._domElement)===null||Be===void 0||Be.ownerDocument.exitPointerLock(),(Le=this._domElement)===null||Le===void 0||Le.ownerDocument.removeEventListener("pointerlockchange",De),(Oe=this._domElement)===null||Oe===void 0||Oe.ownerDocument.removeEventListener("pointerlockerror",Ie),this.cancel()};const De=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},Ie=()=>{this.unlockPointer()};this._addAllEventListeners=Be=>{this._domElement=Be,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",ve),this._domElement.addEventListener("pointercancel",Ee),this._domElement.addEventListener("wheel",Ae,{passive:!1}),this._domElement.addEventListener("contextmenu",Se)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",ve),this._domElement.removeEventListener("pointercancel",Ee),this._domElement.removeEventListener("wheel",Ae,{passive:!1}),this._domElement.removeEventListener("contextmenu",Se),this._domElement.ownerDocument.removeEventListener("pointermove",_e,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",Ee),this._domElement.ownerDocument.removeEventListener("pointerlockchange",De),this._domElement.ownerDocument.removeEventListener("pointerlockerror",Ie))},this.cancel=()=>{this._state!==ACTION.NONE&&(this._state=ACTION.NONE,this._activePointers.length=0,Re())},me&&this.connect(me),this.update(0)}get camera(){return this._camera}set camera(K){this._camera=K,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(K){this._enabled=K,this._domElement&&(K?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(K){this._spherical.radius===K&&this._sphericalEnd.radius===K||(this._spherical.radius=K,this._sphericalEnd.radius=K,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(K){this._spherical.theta===K&&this._sphericalEnd.theta===K||(this._spherical.theta=K,this._sphericalEnd.theta=K,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(K){this._spherical.phi===K&&this._sphericalEnd.phi===K||(this._spherical.phi=K,this._sphericalEnd.phi=K,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(K){this._boundaryEnclosesCamera=K,this._needsUpdate=!0}set interactiveArea(K){this._interactiveArea.width=clamp(K.width,0,1),this._interactiveArea.height=clamp(K.height,0,1),this._interactiveArea.x=clamp(K.x,0,1-this._interactiveArea.width),this._interactiveArea.y=clamp(K.y,0,1-this._interactiveArea.height)}addEventListener(K,me){super.addEventListener(K,me)}removeEventListener(K,me){super.removeEventListener(K,me)}rotate(K,me,ge=!1){return this.rotateTo(this._sphericalEnd.theta+K,this._sphericalEnd.phi+me,ge)}rotateAzimuthTo(K,me=!1){return this.rotateTo(K,this._sphericalEnd.phi,me)}rotatePolarTo(K,me=!1){return this.rotateTo(this._sphericalEnd.theta,K,me)}rotateTo(K,me,ge=!1){this._isUserControllingRotate=!1;const xe=clamp(K,this.minAzimuthAngle,this.maxAzimuthAngle),ye=clamp(me,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=xe,this._sphericalEnd.phi=ye,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,ge||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const ve=!ge||approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(ve)}dolly(K,me=!1){return this.dollyTo(this._sphericalEnd.radius-K,me)}dollyTo(K,me=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=DOLLY_DIRECTION.NONE,this._changedDolly=0,this._dollyToNoClamp(clamp(K,this.minDistance,this.maxDistance),me)}_dollyToNoClamp(K,me=!1){const ge=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const ve=this._collisionTest(),_e=approxEquals(ve,this._spherical.radius);if(!(ge>K)&&_e)return Promise.resolve();this._sphericalEnd.radius=Math.min(K,ve)}else this._sphericalEnd.radius=K;this._needsUpdate=!0,me||(this._spherical.radius=this._sphericalEnd.radius);const ye=!me||approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(ye)}dollyInFixed(K,me=!1){this._targetEnd.add(this._getCameraDirection(_cameraDirection).multiplyScalar(K)),me||this._target.copy(this._targetEnd);const ge=!me||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(ge)}zoom(K,me=!1){return this.zoomTo(this._zoomEnd+K,me)}zoomTo(K,me=!1){this._isUserControllingZoom=!1,this._zoomEnd=clamp(K,this.minZoom,this.maxZoom),this._needsUpdate=!0,me||(this._zoom=this._zoomEnd);const ge=!me||approxEquals(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(ge)}pan(K,me,ge=!1){return console.warn("`pan` has been renamed to `truck`"),this.truck(K,me,ge)}truck(K,me,ge=!1){this._camera.updateMatrix(),_xColumn.setFromMatrixColumn(this._camera.matrix,0),_yColumn.setFromMatrixColumn(this._camera.matrix,1),_xColumn.multiplyScalar(K),_yColumn.multiplyScalar(-me);const xe=_v3A.copy(_xColumn).add(_yColumn),ye=_v3B.copy(this._targetEnd).add(xe);return this.moveTo(ye.x,ye.y,ye.z,ge)}forward(K,me=!1){_v3A.setFromMatrixColumn(this._camera.matrix,0),_v3A.crossVectors(this._camera.up,_v3A),_v3A.multiplyScalar(K);const ge=_v3B.copy(this._targetEnd).add(_v3A);return this.moveTo(ge.x,ge.y,ge.z,me)}elevate(K,me=!1){return _v3A.copy(this._camera.up).multiplyScalar(K),this.moveTo(this._targetEnd.x+_v3A.x,this._targetEnd.y+_v3A.y,this._targetEnd.z+_v3A.z,me)}moveTo(K,me,ge,xe=!1){this._isUserControllingTruck=!1;const ye=_v3A.set(K,me,ge).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,ye,this.boundaryFriction),this._needsUpdate=!0,xe||this._target.copy(this._targetEnd);const ve=!xe||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(ve)}lookInDirectionOf(K,me,ge,xe=!1){const _e=_v3A.set(K,me,ge).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(_e.x,_e.y,_e.z,xe)}fitToBox(K,me,{cover:ge=!1,paddingLeft:xe=0,paddingRight:ye=0,paddingBottom:ve=0,paddingTop:_e=0}={}){const Ee=[],be=K.isBox3?_box3A.copy(K):_box3A.setFromObject(K);be.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const Ae=roundToStep(this._sphericalEnd.theta,PI_HALF),Se=roundToStep(this._sphericalEnd.phi,PI_HALF);Ee.push(this.rotateTo(Ae,Se,me));const Ce=_v3A.setFromSpherical(this._sphericalEnd).normalize(),Te=_quaternionA.setFromUnitVectors(Ce,_AXIS_Z),Re=approxEquals(Math.abs(Ce.y),1);Re&&Te.multiply(_quaternionB.setFromAxisAngle(_AXIS_Y,Ae)),Te.multiply(this._yAxisUpSpaceInverse);const De=_box3B.makeEmpty();_v3B.copy(be.min).applyQuaternion(Te),De.expandByPoint(_v3B),_v3B.copy(be.min).setX(be.max.x).applyQuaternion(Te),De.expandByPoint(_v3B),_v3B.copy(be.min).setY(be.max.y).applyQuaternion(Te),De.expandByPoint(_v3B),_v3B.copy(be.max).setZ(be.min.z).applyQuaternion(Te),De.expandByPoint(_v3B),_v3B.copy(be.min).setZ(be.max.z).applyQuaternion(Te),De.expandByPoint(_v3B),_v3B.copy(be.max).setY(be.min.y).applyQuaternion(Te),De.expandByPoint(_v3B),_v3B.copy(be.max).setX(be.min.x).applyQuaternion(Te),De.expandByPoint(_v3B),_v3B.copy(be.max).applyQuaternion(Te),De.expandByPoint(_v3B),De.min.x-=xe,De.min.y-=ve,De.max.x+=ye,De.max.y+=_e,Te.setFromUnitVectors(_AXIS_Z,Ce),Re&&Te.premultiply(_quaternionB.invert()),Te.premultiply(this._yAxisUpSpace);const Ie=De.getSize(_v3A),Be=De.getCenter(_v3B).applyQuaternion(Te);if(isPerspectiveCamera(this._camera)){const Le=this.getDistanceToFitBox(Ie.x,Ie.y,Ie.z,ge);Ee.push(this.moveTo(Be.x,Be.y,Be.z,me)),Ee.push(this.dollyTo(Le,me)),Ee.push(this.setFocalOffset(0,0,0,me))}else if(isOrthographicCamera(this._camera)){const Le=this._camera,Oe=Le.right-Le.left,Fe=Le.top-Le.bottom,Ue=ge?Math.max(Oe/Ie.x,Fe/Ie.y):Math.min(Oe/Ie.x,Fe/Ie.y);Ee.push(this.moveTo(Be.x,Be.y,Be.z,me)),Ee.push(this.zoomTo(Ue,me)),Ee.push(this.setFocalOffset(0,0,0,me))}return Promise.all(Ee)}fitToSphere(K,me){const ge=[],ye="isObject3D"in K?Ec.createBoundingSphere(K,_sphere):_sphere.copy(K);if(ge.push(this.moveTo(ye.center.x,ye.center.y,ye.center.z,me)),isPerspectiveCamera(this._camera)){const ve=this.getDistanceToFitSphere(ye.radius);ge.push(this.dollyTo(ve,me))}else if(isOrthographicCamera(this._camera)){const ve=this._camera.right-this._camera.left,_e=this._camera.top-this._camera.bottom,Ee=2*ye.radius,be=Math.min(ve/Ee,_e/Ee);ge.push(this.zoomTo(be,me))}return ge.push(this.setFocalOffset(0,0,0,me)),Promise.all(ge)}setLookAt(K,me,ge,xe,ye,ve,_e=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=DOLLY_DIRECTION.NONE,this._changedDolly=0;const Ee=_v3B.set(xe,ye,ve),be=_v3A.set(K,me,ge);this._targetEnd.copy(Ee),this._sphericalEnd.setFromVector3(be.sub(Ee).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,_e||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const Ae=!_e||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold)&&approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(Ae)}lerpLookAt(K,me,ge,xe,ye,ve,_e,Ee,be,Ae,Se,Ce,Te,Re=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=DOLLY_DIRECTION.NONE,this._changedDolly=0;const De=_v3A.set(xe,ye,ve),Ie=_v3B.set(K,me,ge);_sphericalA.setFromVector3(Ie.sub(De).applyQuaternion(this._yAxisUpSpace));const Be=_v3C.set(Ae,Se,Ce),Le=_v3B.set(_e,Ee,be);_sphericalB.setFromVector3(Le.sub(Be).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(De.lerp(Be,Te));const Oe=_sphericalB.theta-_sphericalA.theta,Fe=_sphericalB.phi-_sphericalA.phi,Ue=_sphericalB.radius-_sphericalA.radius;this._sphericalEnd.set(_sphericalA.radius+Ue*Te,_sphericalA.phi+Fe*Te,_sphericalA.theta+Oe*Te),this.normalizeRotations(),this._needsUpdate=!0,Re||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const Ne=!Re||approxEquals(this._target.x,this._targetEnd.x,this.restThreshold)&&approxEquals(this._target.y,this._targetEnd.y,this.restThreshold)&&approxEquals(this._target.z,this._targetEnd.z,this.restThreshold)&&approxEquals(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&approxEquals(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&approxEquals(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(Ne)}setPosition(K,me,ge,xe=!1){return this.setLookAt(K,me,ge,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,xe)}setTarget(K,me,ge,xe=!1){const ye=this.getPosition(_v3A),ve=this.setLookAt(ye.x,ye.y,ye.z,K,me,ge,xe);return this._sphericalEnd.phi=clamp(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),ve}setFocalOffset(K,me,ge,xe=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(K,me,ge),this._needsUpdate=!0,xe||this._focalOffset.copy(this._focalOffsetEnd);const ye=!xe||approxEquals(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&approxEquals(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&approxEquals(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(ye)}setOrbitPoint(K,me,ge){this._camera.updateMatrixWorld(),_xColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,0),_yColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,1),_zColumn.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const xe=_v3A.set(K,me,ge),ye=xe.distanceTo(this._camera.position),ve=xe.sub(this._camera.position);_xColumn.multiplyScalar(ve.x),_yColumn.multiplyScalar(ve.y),_zColumn.multiplyScalar(ve.z),_v3A.copy(_xColumn).add(_yColumn).add(_zColumn),_v3A.z=_v3A.z+ye,this.dollyTo(ye,!1),this.setFocalOffset(-_v3A.x,_v3A.y,-_v3A.z,!1),this.moveTo(K,me,ge,!1)}setBoundary(K){if(!K){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(K),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(K,me,ge,xe){if(K===null){this._viewport=null;return}this._viewport=this._viewport||new THREE.Vector4,typeof K=="number"?this._viewport.set(K,me,ge,xe):this._viewport.copy(K)}getDistanceToFitBox(K,me,ge,xe=!1){if(notSupportedInOrthographicCamera(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const ye=K/me,ve=this._camera.getEffectiveFOV()*DEG2RAD,_e=this._camera.aspect;return((xe?ye>_e:ye<_e)?me:K/_e)*.5/Math.tan(ve*.5)+ge*.5}getDistanceToFitSphere(K){if(notSupportedInOrthographicCamera(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const me=this._camera.getEffectiveFOV()*DEG2RAD,ge=Math.atan(Math.tan(me*.5)*this._camera.aspect)*2,xe=1<this._camera.aspect?me:ge;return K/Math.sin(xe*.5)}getTarget(K,me=!0){return(K&&K.isVector3?K:new THREE.Vector3).copy(me?this._targetEnd:this._target)}getPosition(K,me=!0){return(K&&K.isVector3?K:new THREE.Vector3).setFromSpherical(me?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(me?this._targetEnd:this._target)}getSpherical(K,me=!0){return(K||new THREE.Spherical).copy(me?this._sphericalEnd:this._spherical)}getFocalOffset(K,me=!0){return(K&&K.isVector3?K:new THREE.Vector3).copy(me?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%PI_2,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=PI_2),this._spherical.theta+=PI_2*Math.round((this._sphericalEnd.theta-this._spherical.theta)/PI_2)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(K=!1){if(!approxEquals(this._camera.up.x,this._cameraUp0.x)||!approxEquals(this._camera.up.y,this._cameraUp0.y)||!approxEquals(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const ge=this.getPosition(_v3A);this.updateCameraUp(),this.setPosition(ge.x,ge.y,ge.z)}const me=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,K),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,K),this.zoomTo(this._zoom0,K)];return Promise.all(me)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,_AXIS_Y),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const K=_v3A.subVectors(this._target,this._camera.position).normalize(),me=_v3B.crossVectors(K,this._camera.up);this._camera.up.crossVectors(me,K).normalize(),this._camera.updateMatrixWorld();const ge=this.getPosition(_v3A);this.updateCameraUp(),this.setPosition(ge.x,ge.y,ge.z)}update(K){const me=this._sphericalEnd.theta-this._spherical.theta,ge=this._sphericalEnd.phi-this._spherical.phi,xe=this._sphericalEnd.radius-this._spherical.radius,ye=_deltaTarget.subVectors(this._targetEnd,this._target),ve=_deltaOffset.subVectors(this._focalOffsetEnd,this._focalOffset),_e=this._zoomEnd-this._zoom;if(approxZero(me))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const Se=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=smoothDamp(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,Se,1/0,K),this._needsUpdate=!0}if(approxZero(ge))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const Se=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=smoothDamp(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,Se,1/0,K),this._needsUpdate=!0}if(approxZero(xe))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const Se=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=smoothDamp(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,Se,this.maxSpeed,K),this._needsUpdate=!0}if(approxZero(ye.x)&&approxZero(ye.y)&&approxZero(ye.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const Se=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;smoothDampVec3(this._target,this._targetEnd,this._targetVelocity,Se,this.maxSpeed,K,this._target),this._needsUpdate=!0}if(approxZero(ve.x)&&approxZero(ve.y)&&approxZero(ve.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const Se=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;smoothDampVec3(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,Se,this.maxSpeed,K,this._focalOffset),this._needsUpdate=!0}if(approxZero(_e))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const Se=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=smoothDamp(this._zoom,this._zoomEnd,this._zoomVelocity,Se,1/0,K)}if(this.dollyToCursor){if(isPerspectiveCamera(this._camera)&&this._changedDolly!==0){const Se=this._spherical.radius-this._lastDistance,Ce=this._camera,Te=this._getCameraDirection(_cameraDirection),Re=_v3A.copy(Te).cross(Ce.up).normalize();Re.lengthSq()===0&&(Re.x=1);const De=_v3B.crossVectors(Re,Te),Ie=this._sphericalEnd.radius*Math.tan(Ce.getEffectiveFOV()*DEG2RAD*.5),Le=(this._sphericalEnd.radius-Se-this._sphericalEnd.radius)/this._sphericalEnd.radius,Oe=_v3C.copy(this._targetEnd).add(Re.multiplyScalar(this._dollyControlCoord.x*Ie*Ce.aspect)).add(De.multiplyScalar(this._dollyControlCoord.y*Ie)),Fe=_v3A.copy(this._targetEnd).lerp(Oe,Le),Ue=this._lastDollyDirection===DOLLY_DIRECTION.IN&&this._spherical.radius<=this.minDistance,Ne=this._lastDollyDirection===DOLLY_DIRECTION.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(Ue||Ne)){this._sphericalEnd.radius-=Se,this._spherical.radius-=Se;const ze=_v3B.copy(Te).multiplyScalar(-Se);Fe.add(ze)}this._boundary.clampPoint(Fe,Fe);const He=_v3B.subVectors(Fe,this._targetEnd);this._targetEnd.copy(Fe),this._target.add(He),this._changedDolly-=Se,approxZero(this._changedDolly)&&(this._changedDolly=0)}else if(isOrthographicCamera(this._camera)&&this._changedZoom!==0){const Se=this._zoom-this._lastZoom,Ce=this._camera,Te=_v3A.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(Ce.near+Ce.far)/(Ce.near-Ce.far)).unproject(Ce),Re=_v3B.set(0,0,-1).applyQuaternion(Ce.quaternion),De=_v3C.copy(Te).add(Re.multiplyScalar(-Te.dot(Ce.up))),Be=-(this._zoom-Se-this._zoom)/this._zoom,Le=this._getCameraDirection(_cameraDirection),Oe=this._targetEnd.dot(Le),Fe=_v3A.copy(this._targetEnd).lerp(De,Be),Ue=Fe.dot(Le),Ne=Le.multiplyScalar(Ue-Oe);Fe.sub(Ne),this._boundary.clampPoint(Fe,Fe);const He=_v3B.subVectors(Fe,this._targetEnd);this._targetEnd.copy(Fe),this._target.add(He),this._changedZoom-=Se,approxZero(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const Ee=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,Ee),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!approxZero(this._focalOffset.x)||!approxZero(this._focalOffset.y)||!approxZero(this._focalOffset.z))&&(_xColumn.setFromMatrixColumn(this._camera.matrix,0),_yColumn.setFromMatrixColumn(this._camera.matrix,1),_zColumn.setFromMatrixColumn(this._camera.matrix,2),_xColumn.multiplyScalar(this._focalOffset.x),_yColumn.multiplyScalar(-this._focalOffset.y),_zColumn.multiplyScalar(this._focalOffset.z),_v3A.copy(_xColumn).add(_yColumn).add(_zColumn),this._camera.position.add(_v3A),this._camera.updateMatrixWorld()),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),_v3A.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const Ae=this._needsUpdate;return Ae&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):Ae?(this.dispatchEvent({type:"update"}),approxZero(me,this.restThreshold)&&approxZero(ge,this.restThreshold)&&approxZero(xe,this.restThreshold)&&approxZero(ye.x,this.restThreshold)&&approxZero(ye.y,this.restThreshold)&&approxZero(ye.z,this.restThreshold)&&approxZero(ve.x,this.restThreshold)&&approxZero(ve.y,this.restThreshold)&&approxZero(ve.z,this.restThreshold)&&approxZero(_e,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!Ae&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=Ae,this._needsUpdate=!1,Ae}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:infinityToMaxNumber(this.maxDistance),minZoom:this.minZoom,maxZoom:infinityToMaxNumber(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:infinityToMaxNumber(this.maxPolarAngle),minAzimuthAngle:infinityToMaxNumber(this.minAzimuthAngle),maxAzimuthAngle:infinityToMaxNumber(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,target:this._targetEnd.toArray(),position:_v3A.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(K,me=!1){const ge=JSON.parse(K);this.enabled=ge.enabled,this.minDistance=ge.minDistance,this.maxDistance=maxNumberToInfinity(ge.maxDistance),this.minZoom=ge.minZoom,this.maxZoom=maxNumberToInfinity(ge.maxZoom),this.minPolarAngle=ge.minPolarAngle,this.maxPolarAngle=maxNumberToInfinity(ge.maxPolarAngle),this.minAzimuthAngle=maxNumberToInfinity(ge.minAzimuthAngle),this.maxAzimuthAngle=maxNumberToInfinity(ge.maxAzimuthAngle),this.smoothTime=ge.smoothTime,this.draggingSmoothTime=ge.draggingSmoothTime,this.dollySpeed=ge.dollySpeed,this.truckSpeed=ge.truckSpeed,this.dollyToCursor=ge.dollyToCursor,this._target0.fromArray(ge.target0),this._position0.fromArray(ge.position0),this._zoom0=ge.zoom0,this._focalOffset0.fromArray(ge.focalOffset0),this.moveTo(ge.target[0],ge.target[1],ge.target[2],me),_sphericalA.setFromVector3(_v3A.fromArray(ge.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(_sphericalA.theta,_sphericalA.phi,me),this.dollyTo(_sphericalA.radius,me),this.zoomTo(ge.zoom,me),this.setFocalOffset(ge.focalOffset[0],ge.focalOffset[1],ge.focalOffset[2],me),this._needsUpdate=!0}connect(K){if(this._domElement){console.warn("camera-controls is already connected.");return}K.setAttribute("data-camera-controls-version",VERSION),this._addAllEventListeners(K),this._getClientRect(this._elementRect)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(K){return K.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(K){return this._getTargetDirection(K).negate()}_findPointerById(K){return this._activePointers.find(me=>me.pointerId===K)}_findPointerByMouseButton(K){return this._activePointers.find(me=>me.mouseButton===K)}_disposePointer(K){this._activePointers.splice(this._activePointers.indexOf(K),1)}_encloseToBoundary(K,me,ge){const xe=me.lengthSq();if(xe===0)return K;const ye=_v3B.copy(me).add(K),_e=this._boundary.clampPoint(ye,_v3C).sub(ye),Ee=_e.lengthSq();if(Ee===0)return K.add(me);if(Ee===xe)return K;if(ge===0)return K.add(me).add(_e);{const be=1+ge*Ee/me.dot(_e);return K.add(_v3B.copy(me).multiplyScalar(be)).add(_e.multiplyScalar(1-ge))}}_updateNearPlaneCorners(){if(isPerspectiveCamera(this._camera)){const K=this._camera,me=K.near,ge=K.getEffectiveFOV()*DEG2RAD,xe=Math.tan(ge*.5)*me,ye=xe*K.aspect;this._nearPlaneCorners[0].set(-ye,-xe,0),this._nearPlaneCorners[1].set(ye,-xe,0),this._nearPlaneCorners[2].set(ye,xe,0),this._nearPlaneCorners[3].set(-ye,xe,0)}else if(isOrthographicCamera(this._camera)){const K=this._camera,me=1/K.zoom,ge=K.left*me,xe=K.right*me,ye=K.top*me,ve=K.bottom*me;this._nearPlaneCorners[0].set(ge,ye,0),this._nearPlaneCorners[1].set(xe,ye,0),this._nearPlaneCorners[2].set(xe,ve,0),this._nearPlaneCorners[3].set(ge,ve,0)}}_collisionTest(){let K=1/0;if(!(this.colliderMeshes.length>=1)||notSupportedInOrthographicCamera(this._camera,"_collisionTest"))return K;const ge=this._getTargetDirection(_cameraDirection);_rotationMatrix.lookAt(_ORIGIN,ge,this._camera.up);for(let xe=0;xe<4;xe++){const ye=_v3B.copy(this._nearPlaneCorners[xe]);ye.applyMatrix4(_rotationMatrix);const ve=_v3C.addVectors(this._target,ye);_raycaster.set(ve,ge),_raycaster.far=this._spherical.radius+1;const _e=_raycaster.intersectObjects(this.colliderMeshes);_e.length!==0&&_e[0].distance<K&&(K=_e[0].distance)}return K}_getClientRect(K){if(!this._domElement)return;const me=this._domElement.getBoundingClientRect();return K.x=me.left,K.y=me.top,this._viewport?(K.x+=this._viewport.x,K.y+=me.height-this._viewport.w-this._viewport.y,K.width=this._viewport.z,K.height=this._viewport.w):(K.width=me.width,K.height=me.height),K}_createOnRestPromise(K){return K?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(me=>{const ge=()=>{this.removeEventListener("rest",ge),me()};this.addEventListener("rest",ge)}))}_addAllEventListeners(K){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(K){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(K){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(K,me=new THREE.Sphere){const ge=me,xe=ge.center;_box3A.makeEmpty(),K.traverseVisible(ve=>{ve.isMesh&&_box3A.expandByObject(ve)}),_box3A.getCenter(xe);let ye=0;return K.traverseVisible(ve=>{if(!ve.isMesh)return;const _e=ve;if(!_e.geometry)return;const Ee=_e.geometry.clone();Ee.applyMatrix4(_e.matrixWorld);const Ae=Ee.attributes.position;for(let Se=0,Ce=Ae.count;Se<Ce;Se++)_v3A.fromBufferAttribute(Ae,Se),ye=Math.max(ye,xe.distanceToSquared(_v3A))}),ge.radius=Math.sqrt(ye),ge}};const CameraControls=reactExports.forwardRef((fe,K)=>{reactExports.useMemo(()=>{const Ue={Box3,MathUtils:{clamp:MathUtils.clamp},Matrix4,Quaternion,Raycaster,Sphere,Spherical,Vector2,Vector3,Vector4};CameraControls$1.install({THREE:Ue}),extend$3({CameraControlsImpl:CameraControls$1})},[]);const{camera:me,domElement:ge,makeDefault:xe,onStart:ye,onEnd:ve,onChange:_e,regress:Ee,...be}=fe,Ae=useThree(Ue=>Ue.camera),Se=useThree(Ue=>Ue.gl),Ce=useThree(Ue=>Ue.invalidate),Te=useThree(Ue=>Ue.events),Re=useThree(Ue=>Ue.setEvents),De=useThree(Ue=>Ue.set),Ie=useThree(Ue=>Ue.get),Be=useThree(Ue=>Ue.performance),Le=me||Ae,Oe=ge||Te.connected||Se.domElement,Fe=reactExports.useMemo(()=>new CameraControls$1(Le),[Le]);return useFrame((Ue,Ne)=>{Fe.enabled&&Fe.update(Ne)},-1),reactExports.useEffect(()=>(Fe.connect(Oe),()=>void Fe.disconnect()),[Oe,Fe]),reactExports.useEffect(()=>{const Ue=ze=>{Ce(),Ee&&Be.regress(),_e&&_e(ze)},Ne=ze=>{ye&&ye(ze)},He=ze=>{ve&&ve(ze)};return Fe.addEventListener("update",Ue),Fe.addEventListener("controlstart",Ne),Fe.addEventListener("controlend",He),Fe.addEventListener("control",Ue),Fe.addEventListener("transitionstart",Ue),Fe.addEventListener("wake",Ue),()=>{Fe.removeEventListener("update",Ue),Fe.removeEventListener("controlstart",Ne),Fe.removeEventListener("controlend",He),Fe.removeEventListener("control",Ue),Fe.removeEventListener("transitionstart",Ue),Fe.removeEventListener("wake",Ue)}},[Fe,ye,ve,Ce,Re,Ee,_e]),reactExports.useEffect(()=>{if(xe){const Ue=Ie().controls;return De({controls:Fe}),()=>De({controls:Ue})}},[xe,Fe]),reactExports.createElement("primitive",_extends$2({ref:K,object:Fe},be))}),GridMaterial=shaderMaterial({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new Color$1,sectionColor:new Color$1,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new Vector3,worldPlanePosition:new Vector3},`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform vec3 worldPlanePosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      localPosition = position.xzy;
      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;
      
      worldPosition = modelMatrix * vec4(localPosition, 1.0);
      if (followCamera) {
        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);
        localPosition = (inverse(modelMatrix) * worldPosition).xyz;
      }

      gl_Position = projectionMatrix * viewMatrix * worldPosition;
    }
  `,`
    varying vec3 localPosition;
    varying vec4 worldPosition;

    uniform vec3 worldCamProjPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float fadeFrom;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = localPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1.0 - thickness;
      return 1.0 - min(line, 1.0);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      vec3 from = worldCamProjPosition*vec3(fadeFrom);
      float dist = distance(from, worldPosition.xyz);
      float d = 1.0 - min(dist / fadeDistance, 1.0);
      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
    }
  `),Grid=reactExports.forwardRef(({args:fe,cellColor:K="#000000",sectionColor:me="#2080ff",cellSize:ge=.5,sectionSize:xe=1,followCamera:ye=!1,infiniteGrid:ve=!1,fadeDistance:_e=100,fadeStrength:Ee=1,fadeFrom:be=1,cellThickness:Ae=.5,sectionThickness:Se=1,side:Ce=BackSide,...Te},Re)=>{extend$3({GridMaterial});const De=reactExports.useRef(null);reactExports.useImperativeHandle(Re,()=>De.current,[]);const Ie=new Plane,Be=new Vector3(0,1,0),Le=new Vector3(0,0,0);useFrame(Ue=>{Ie.setFromNormalAndCoplanarPoint(Be,Le).applyMatrix4(De.current.matrixWorld);const Ne=De.current.material,He=Ne.uniforms.worldCamProjPosition,ze=Ne.uniforms.worldPlanePosition;Ie.projectPoint(Ue.camera.position,He.value),ze.value.set(0,0,0).applyMatrix4(De.current.matrixWorld)});const Oe={cellSize:ge,sectionSize:xe,cellColor:K,sectionColor:me,cellThickness:Ae,sectionThickness:Se},Fe={fadeDistance:_e,fadeStrength:Ee,fadeFrom:be,infiniteGrid:ve,followCamera:ye};return reactExports.createElement("mesh",_extends$2({ref:De,frustumCulled:!1},Te),reactExports.createElement("gridMaterial",_extends$2({transparent:!0,"extensions-derivatives":!0,side:Ce},Oe,Fe)),reactExports.createElement("planeGeometry",{args:fe}))}),scriptRel="modulepreload",assetsURL=function(fe,K){return new URL(fe,K).href},seen={},__vitePreload=function(K,me,ge){let xe=Promise.resolve();if(me&&me.length>0){const ve=document.getElementsByTagName("link"),_e=document.querySelector("meta[property=csp-nonce]"),Ee=_e?.nonce||_e?.getAttribute("nonce");xe=Promise.allSettled(me.map(be=>{if(be=assetsURL(be,ge),be in seen)return;seen[be]=!0;const Ae=be.endsWith(".css"),Se=Ae?'[rel="stylesheet"]':"";if(!!ge)for(let Re=ve.length-1;Re>=0;Re--){const De=ve[Re];if(De.href===be&&(!Ae||De.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${be}"]${Se}`))return;const Te=document.createElement("link");if(Te.rel=Ae?"stylesheet":scriptRel,Ae||(Te.as="script"),Te.crossOrigin="",Te.href=be,Ee&&Te.setAttribute("nonce",Ee),document.head.appendChild(Te),Ae)return new Promise((Re,De)=>{Te.addEventListener("load",Re),Te.addEventListener("error",()=>De(new Error(`Unable to preload CSS for ${be}`)))})}))}function ye(ve){const _e=new Event("vite:preloadError",{cancelable:!0});if(_e.payload=ve,window.dispatchEvent(_e),!_e.defaultPrevented)throw ve}return xe.then(ve=>{for(const _e of ve||[])_e.status==="rejected"&&ye(_e.reason);return K().catch(ye)})};var stats_min={exports:{}};(function(fe,K){(function(me,ge){fe.exports=ge()})(commonjsGlobal,function(){var me=function(){function ge(Te){return ve.appendChild(Te.dom),Te}function xe(Te){for(var Re=0;Re<ve.children.length;Re++)ve.children[Re].style.display=Re===Te?"block":"none";ye=Te}var ye=0,ve=document.createElement("div");ve.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",ve.addEventListener("click",function(Te){Te.preventDefault(),xe(++ye%ve.children.length)},!1);var _e=(performance||Date).now(),Ee=_e,be=0,Ae=ge(new me.Panel("FPS","#0ff","#002")),Se=ge(new me.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var Ce=ge(new me.Panel("MB","#f08","#201"));return xe(0),{REVISION:16,dom:ve,addPanel:ge,showPanel:xe,begin:function(){_e=(performance||Date).now()},end:function(){be++;var Te=(performance||Date).now();if(Se.update(Te-_e,200),Te>Ee+1e3&&(Ae.update(1e3*be/(Te-Ee),100),Ee=Te,be=0,Ce)){var Re=performance.memory;Ce.update(Re.usedJSHeapSize/1048576,Re.jsHeapSizeLimit/1048576)}return Te},update:function(){_e=this.end()},domElement:ve,setMode:xe}};return me.Panel=function(ge,xe,ye){var ve=1/0,_e=0,Ee=Math.round,be=Ee(window.devicePixelRatio||1),Ae=80*be,Se=48*be,Ce=3*be,Te=2*be,Re=3*be,De=15*be,Ie=74*be,Be=30*be,Le=document.createElement("canvas");Le.width=Ae,Le.height=Se,Le.style.cssText="width:80px;height:48px";var Oe=Le.getContext("2d");return Oe.font="bold "+9*be+"px Helvetica,Arial,sans-serif",Oe.textBaseline="top",Oe.fillStyle=ye,Oe.fillRect(0,0,Ae,Se),Oe.fillStyle=xe,Oe.fillText(ge,Ce,Te),Oe.fillRect(Re,De,Ie,Be),Oe.fillStyle=ye,Oe.globalAlpha=.9,Oe.fillRect(Re,De,Ie,Be),{dom:Le,update:function(Fe,Ue){ve=Math.min(ve,Fe),_e=Math.max(_e,Fe),Oe.fillStyle=ye,Oe.globalAlpha=1,Oe.fillRect(0,0,Ae,De),Oe.fillStyle=xe,Oe.fillText(Ee(Fe)+" "+ge+" ("+Ee(ve)+"-"+Ee(_e)+")",Ce,Te),Oe.drawImage(Le,Re+be,De,Ie-be,Be,Re,De,Ie-be,Be),Oe.fillRect(Re+Ie-be,De,be,Be),Oe.fillStyle=ye,Oe.globalAlpha=.9,Oe.fillRect(Re+Ie-be,De,be,Ee((1-Fe/Ue)*Be))}}},me})})(stats_min);var stats_minExports=stats_min.exports;const StatsImpl=getDefaultExportFromCjs(stats_minExports);function call(fe,K){}function useEffectfulState(fe,K=[],me){const[ge,xe]=reactExports.useState();return reactExports.useLayoutEffect(()=>{const ye=fe();return xe(ye),()=>void 0},K),ge}function Stats({showPanel:fe=0,className:K,parent:me}){const ge=useEffectfulState(()=>new StatsImpl,[]);return reactExports.useEffect(()=>{if(ge){const xe=me&&me.current||document.body;ge.showPanel(fe),xe?.appendChild(ge.dom);const ye=(K??"").split(" ").filter(Ee=>Ee);ye.length&&ge.dom.classList.add(...ye);const ve=addEffect(()=>ge.begin()),_e=addAfterEffect(()=>ge.end());return()=>{ye.length&&ge.dom.classList.remove(...ye),xe?.removeChild(ge.dom),ve(),_e()}}},[me,ge,K,fe]),null}const CENTER=0,AVERAGE=1,SAH=2,CONTAINED=2,TRIANGLE_INTERSECT_COST=1.25,TRAVERSAL_COST=1,BYTES_PER_NODE=6*4+4+4,IS_LEAFNODE_FLAG=65535,FLOAT32_EPSILON=Math.pow(2,-24),SKIP_GENERATION=Symbol("SKIP_GENERATION");function getVertexCount(fe){return fe.index?fe.index.count:fe.attributes.position.count}function getTriCount(fe){return getVertexCount(fe)/3}function getIndexArray(fe,K=ArrayBuffer){return fe>65535?new Uint32Array(new K(4*fe)):new Uint16Array(new K(2*fe))}function ensureIndex(fe,K){if(!fe.index){const me=fe.attributes.position.count,ge=K.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,xe=getIndexArray(me,ge);fe.setIndex(new BufferAttribute(xe,1));for(let ye=0;ye<me;ye++)xe[ye]=ye}}function getFullGeometryRange(fe,K){const me=getTriCount(fe),ge=K||fe.drawRange,xe=ge.start/3,ye=(ge.start+ge.count)/3,ve=Math.max(0,xe),_e=Math.min(me,ye)-ve;return[{offset:Math.floor(ve),count:Math.floor(_e)}]}function getRootIndexRanges(fe,K){if(!fe.groups||!fe.groups.length)return getFullGeometryRange(fe,K);const me=[],ge=new Set,xe=K||fe.drawRange,ye=xe.start/3,ve=(xe.start+xe.count)/3;for(const Ee of fe.groups){const be=Ee.start/3,Ae=(Ee.start+Ee.count)/3;ge.add(Math.max(ye,be)),ge.add(Math.min(ve,Ae))}const _e=Array.from(ge.values()).sort((Ee,be)=>Ee-be);for(let Ee=0;Ee<_e.length-1;Ee++){const be=_e[Ee],Ae=_e[Ee+1];me.push({offset:Math.floor(be),count:Math.floor(Ae-be)})}return me}function hasGroupGaps(fe,K){const me=getTriCount(fe),ge=getRootIndexRanges(fe,K).sort((ve,_e)=>ve.offset-_e.offset),xe=ge[ge.length-1];xe.count=Math.min(me-xe.offset,xe.count);let ye=0;return ge.forEach(({count:ve})=>ye+=ve),me!==ye}function getBounds(fe,K,me,ge,xe){let ye=1/0,ve=1/0,_e=1/0,Ee=-1/0,be=-1/0,Ae=-1/0,Se=1/0,Ce=1/0,Te=1/0,Re=-1/0,De=-1/0,Ie=-1/0;for(let Be=K*6,Le=(K+me)*6;Be<Le;Be+=6){const Oe=fe[Be+0],Fe=fe[Be+1],Ue=Oe-Fe,Ne=Oe+Fe;Ue<ye&&(ye=Ue),Ne>Ee&&(Ee=Ne),Oe<Se&&(Se=Oe),Oe>Re&&(Re=Oe);const He=fe[Be+2],ze=fe[Be+3],je=He-ze,Ge=He+ze;je<ve&&(ve=je),Ge>be&&(be=Ge),He<Ce&&(Ce=He),He>De&&(De=He);const Xe=fe[Be+4],qe=fe[Be+5],Qe=Xe-qe,nt=Xe+qe;Qe<_e&&(_e=Qe),nt>Ae&&(Ae=nt),Xe<Te&&(Te=Xe),Xe>Ie&&(Ie=Xe)}ge[0]=ye,ge[1]=ve,ge[2]=_e,ge[3]=Ee,ge[4]=be,ge[5]=Ae,xe[0]=Se,xe[1]=Ce,xe[2]=Te,xe[3]=Re,xe[4]=De,xe[5]=Ie}function computeTriangleBounds(fe,K=null,me=null,ge=null){const xe=fe.attributes.position,ye=fe.index?fe.index.array:null,ve=getTriCount(fe),_e=xe.normalized;let Ee;K===null?(Ee=new Float32Array(ve*6),me=0,ge=ve):(Ee=K,me=me||0,ge=ge||ve);const be=xe.array,Ae=xe.offset||0;let Se=3;xe.isInterleavedBufferAttribute&&(Se=xe.data.stride);const Ce=["getX","getY","getZ"];for(let Te=me;Te<me+ge;Te++){const Re=Te*3,De=Te*6;let Ie=Re+0,Be=Re+1,Le=Re+2;ye&&(Ie=ye[Ie],Be=ye[Be],Le=ye[Le]),_e||(Ie=Ie*Se+Ae,Be=Be*Se+Ae,Le=Le*Se+Ae);for(let Oe=0;Oe<3;Oe++){let Fe,Ue,Ne;_e?(Fe=xe[Ce[Oe]](Ie),Ue=xe[Ce[Oe]](Be),Ne=xe[Ce[Oe]](Le)):(Fe=be[Ie+Oe],Ue=be[Be+Oe],Ne=be[Le+Oe]);let He=Fe;Ue<He&&(He=Ue),Ne<He&&(He=Ne);let ze=Fe;Ue>ze&&(ze=Ue),Ne>ze&&(ze=Ne);const je=(ze-He)/2,Ge=Oe*2;Ee[De+Ge+0]=He+je,Ee[De+Ge+1]=je+(Math.abs(He)+je)*FLOAT32_EPSILON}}return Ee}function arrayToBox(fe,K,me){return me.min.x=K[fe],me.min.y=K[fe+1],me.min.z=K[fe+2],me.max.x=K[fe+3],me.max.y=K[fe+4],me.max.z=K[fe+5],me}function getLongestEdgeIndex(fe){let K=-1,me=-1/0;for(let ge=0;ge<3;ge++){const xe=fe[ge+3]-fe[ge];xe>me&&(me=xe,K=ge)}return K}function copyBounds(fe,K){K.set(fe)}function unionBounds(fe,K,me){let ge,xe;for(let ye=0;ye<3;ye++){const ve=ye+3;ge=fe[ye],xe=K[ye],me[ye]=ge<xe?ge:xe,ge=fe[ve],xe=K[ve],me[ve]=ge>xe?ge:xe}}function expandByTriangleBounds(fe,K,me){for(let ge=0;ge<3;ge++){const xe=K[fe+2*ge],ye=K[fe+2*ge+1],ve=xe-ye,_e=xe+ye;ve<me[ge]&&(me[ge]=ve),_e>me[ge+3]&&(me[ge+3]=_e)}}function computeSurfaceArea(fe){const K=fe[3]-fe[0],me=fe[4]-fe[1],ge=fe[5]-fe[2];return 2*(K*me+me*ge+ge*K)}const BIN_COUNT=32,binsSort=(fe,K)=>fe.candidate-K.candidate,sahBins=new Array(BIN_COUNT).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),leftBounds=new Float32Array(6);function getOptimalSplit(fe,K,me,ge,xe,ye){let ve=-1,_e=0;if(ye===CENTER)ve=getLongestEdgeIndex(K),ve!==-1&&(_e=(K[ve]+K[ve+3])/2);else if(ye===AVERAGE)ve=getLongestEdgeIndex(fe),ve!==-1&&(_e=getAverage(me,ge,xe,ve));else if(ye===SAH){const Ee=computeSurfaceArea(fe);let be=TRIANGLE_INTERSECT_COST*xe;const Ae=ge*6,Se=(ge+xe)*6;for(let Ce=0;Ce<3;Ce++){const Te=K[Ce],Ie=(K[Ce+3]-Te)/BIN_COUNT;if(xe<BIN_COUNT/4){const Be=[...sahBins];Be.length=xe;let Le=0;for(let Fe=Ae;Fe<Se;Fe+=6,Le++){const Ue=Be[Le];Ue.candidate=me[Fe+2*Ce],Ue.count=0;const{bounds:Ne,leftCacheBounds:He,rightCacheBounds:ze}=Ue;for(let je=0;je<3;je++)ze[je]=1/0,ze[je+3]=-1/0,He[je]=1/0,He[je+3]=-1/0,Ne[je]=1/0,Ne[je+3]=-1/0;expandByTriangleBounds(Fe,me,Ne)}Be.sort(binsSort);let Oe=xe;for(let Fe=0;Fe<Oe;Fe++){const Ue=Be[Fe];for(;Fe+1<Oe&&Be[Fe+1].candidate===Ue.candidate;)Be.splice(Fe+1,1),Oe--}for(let Fe=Ae;Fe<Se;Fe+=6){const Ue=me[Fe+2*Ce];for(let Ne=0;Ne<Oe;Ne++){const He=Be[Ne];Ue>=He.candidate?expandByTriangleBounds(Fe,me,He.rightCacheBounds):(expandByTriangleBounds(Fe,me,He.leftCacheBounds),He.count++)}}for(let Fe=0;Fe<Oe;Fe++){const Ue=Be[Fe],Ne=Ue.count,He=xe-Ue.count,ze=Ue.leftCacheBounds,je=Ue.rightCacheBounds;let Ge=0;Ne!==0&&(Ge=computeSurfaceArea(ze)/Ee);let Xe=0;He!==0&&(Xe=computeSurfaceArea(je)/Ee);const qe=TRAVERSAL_COST+TRIANGLE_INTERSECT_COST*(Ge*Ne+Xe*He);qe<be&&(ve=Ce,be=qe,_e=Ue.candidate)}}else{for(let Oe=0;Oe<BIN_COUNT;Oe++){const Fe=sahBins[Oe];Fe.count=0,Fe.candidate=Te+Ie+Oe*Ie;const Ue=Fe.bounds;for(let Ne=0;Ne<3;Ne++)Ue[Ne]=1/0,Ue[Ne+3]=-1/0}for(let Oe=Ae;Oe<Se;Oe+=6){let Ne=~~((me[Oe+2*Ce]-Te)/Ie);Ne>=BIN_COUNT&&(Ne=BIN_COUNT-1);const He=sahBins[Ne];He.count++,expandByTriangleBounds(Oe,me,He.bounds)}const Be=sahBins[BIN_COUNT-1];copyBounds(Be.bounds,Be.rightCacheBounds);for(let Oe=BIN_COUNT-2;Oe>=0;Oe--){const Fe=sahBins[Oe],Ue=sahBins[Oe+1];unionBounds(Fe.bounds,Ue.rightCacheBounds,Fe.rightCacheBounds)}let Le=0;for(let Oe=0;Oe<BIN_COUNT-1;Oe++){const Fe=sahBins[Oe],Ue=Fe.count,Ne=Fe.bounds,ze=sahBins[Oe+1].rightCacheBounds;Ue!==0&&(Le===0?copyBounds(Ne,leftBounds):unionBounds(Ne,leftBounds,leftBounds)),Le+=Ue;let je=0,Ge=0;Le!==0&&(je=computeSurfaceArea(leftBounds)/Ee);const Xe=xe-Le;Xe!==0&&(Ge=computeSurfaceArea(ze)/Ee);const qe=TRAVERSAL_COST+TRIANGLE_INTERSECT_COST*(je*Le+Ge*Xe);qe<be&&(ve=Ce,be=qe,_e=Fe.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${ye} used.`);return{axis:ve,pos:_e}}function getAverage(fe,K,me,ge){let xe=0;for(let ye=K,ve=K+me;ye<ve;ye++)xe+=fe[ye*6+ge*2];return xe/me}class MeshBVHNode{constructor(){this.boundingData=new Float32Array(6)}}function partition(fe,K,me,ge,xe,ye){let ve=ge,_e=ge+xe-1;const Ee=ye.pos,be=ye.axis*2;for(;;){for(;ve<=_e&&me[ve*6+be]<Ee;)ve++;for(;ve<=_e&&me[_e*6+be]>=Ee;)_e--;if(ve<_e){for(let Ae=0;Ae<3;Ae++){let Se=K[ve*3+Ae];K[ve*3+Ae]=K[_e*3+Ae],K[_e*3+Ae]=Se}for(let Ae=0;Ae<6;Ae++){let Se=me[ve*6+Ae];me[ve*6+Ae]=me[_e*6+Ae],me[_e*6+Ae]=Se}ve++,_e--}else return ve}}function partition_indirect(fe,K,me,ge,xe,ye){let ve=ge,_e=ge+xe-1;const Ee=ye.pos,be=ye.axis*2;for(;;){for(;ve<=_e&&me[ve*6+be]<Ee;)ve++;for(;ve<=_e&&me[_e*6+be]>=Ee;)_e--;if(ve<_e){let Ae=fe[ve];fe[ve]=fe[_e],fe[_e]=Ae;for(let Se=0;Se<6;Se++){let Ce=me[ve*6+Se];me[ve*6+Se]=me[_e*6+Se],me[_e*6+Se]=Ce}ve++,_e--}else return ve}}function IS_LEAF(fe,K){return K[fe+15]===65535}function OFFSET(fe,K){return K[fe+6]}function COUNT(fe,K){return K[fe+14]}function LEFT_NODE(fe){return fe+8}function RIGHT_NODE(fe,K){return K[fe+6]}function SPLIT_AXIS(fe,K){return K[fe+7]}function BOUNDING_DATA_INDEX(fe){return fe}let float32Array,uint32Array,uint16Array,uint8Array;const MAX_POINTER=Math.pow(2,32);function countNodes(fe){return"count"in fe?1:1+countNodes(fe.left)+countNodes(fe.right)}function populateBuffer(fe,K,me){return float32Array=new Float32Array(me),uint32Array=new Uint32Array(me),uint16Array=new Uint16Array(me),uint8Array=new Uint8Array(me),_populateBuffer(fe,K)}function _populateBuffer(fe,K){const me=fe/4,ge=fe/2,xe="count"in K,ye=K.boundingData;for(let ve=0;ve<6;ve++)float32Array[me+ve]=ye[ve];if(xe)if(K.buffer){const ve=K.buffer;uint8Array.set(new Uint8Array(ve),fe);for(let _e=fe,Ee=fe+ve.byteLength;_e<Ee;_e+=BYTES_PER_NODE){const be=_e/2;IS_LEAF(be,uint16Array)||(uint32Array[_e/4+6]+=me)}return fe+ve.byteLength}else{const ve=K.offset,_e=K.count;return uint32Array[me+6]=ve,uint16Array[ge+14]=_e,uint16Array[ge+15]=IS_LEAFNODE_FLAG,fe+BYTES_PER_NODE}else{const ve=K.left,_e=K.right,Ee=K.splitAxis;let be;if(be=_populateBuffer(fe+BYTES_PER_NODE,ve),be/4>MAX_POINTER)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return uint32Array[me+6]=be/4,be=_populateBuffer(be,_e),uint32Array[me+7]=Ee,be}}function generateIndirectBuffer(fe,K){const me=(fe.index?fe.index.count:fe.attributes.position.count)/3,ge=me>2**16,xe=ge?4:2,ye=K?new SharedArrayBuffer(me*xe):new ArrayBuffer(me*xe),ve=ge?new Uint32Array(ye):new Uint16Array(ye);for(let _e=0,Ee=ve.length;_e<Ee;_e++)ve[_e]=_e;return ve}function buildTree(fe,K,me,ge,xe){const{maxDepth:ye,verbose:ve,maxLeafTris:_e,strategy:Ee,onProgress:be,indirect:Ae}=xe,Se=fe._indirectBuffer,Ce=fe.geometry,Te=Ce.index?Ce.index.array:null,Re=Ae?partition_indirect:partition,De=getTriCount(Ce),Ie=new Float32Array(6);let Be=!1;const Le=new MeshBVHNode;return getBounds(K,me,ge,Le.boundingData,Ie),Fe(Le,me,ge,Ie),Le;function Oe(Ue){be&&be(Ue/De)}function Fe(Ue,Ne,He,ze=null,je=0){if(!Be&&je>=ye&&(Be=!0,ve&&(console.warn(`MeshBVH: Max depth of ${ye} reached when generating BVH. Consider increasing maxDepth.`),console.warn(Ce))),He<=_e||je>=ye)return Oe(Ne+He),Ue.offset=Ne,Ue.count=He,Ue;const Ge=getOptimalSplit(Ue.boundingData,ze,K,Ne,He,Ee);if(Ge.axis===-1)return Oe(Ne+He),Ue.offset=Ne,Ue.count=He,Ue;const Xe=Re(Se,Te,K,Ne,He,Ge);if(Xe===Ne||Xe===Ne+He)Oe(Ne+He),Ue.offset=Ne,Ue.count=He;else{Ue.splitAxis=Ge.axis;const qe=new MeshBVHNode,Qe=Ne,nt=Xe-Ne;Ue.left=qe,getBounds(K,Qe,nt,qe.boundingData,Ie),Fe(qe,Qe,nt,Ie,je+1);const Nt=new MeshBVHNode,Ye=Xe,at=He-nt;Ue.right=Nt,getBounds(K,Ye,at,Nt.boundingData,Ie),Fe(Nt,Ye,at,Ie,je+1)}return Ue}}function buildPackedTree(fe,K){const me=fe.geometry;K.indirect&&(fe._indirectBuffer=generateIndirectBuffer(me,K.useSharedArrayBuffer),hasGroupGaps(me,K.range)&&!K.verbose&&console.warn('MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),fe._indirectBuffer||ensureIndex(me,K);const ge=K.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,xe=computeTriangleBounds(me),ye=K.indirect?getFullGeometryRange(me,K.range):getRootIndexRanges(me,K.range);fe._roots=ye.map(ve=>{const _e=buildTree(fe,xe,ve.offset,ve.count,K),Ee=countNodes(_e),be=new ge(BYTES_PER_NODE*Ee);return populateBuffer(0,_e,be),be})}class SeparatingAxisBounds{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(K,me){let ge=1/0,xe=-1/0;for(let ye=0,ve=K.length;ye<ve;ye++){const Ee=K[ye][me];ge=Ee<ge?Ee:ge,xe=Ee>xe?Ee:xe}this.min=ge,this.max=xe}setFromPoints(K,me){let ge=1/0,xe=-1/0;for(let ye=0,ve=me.length;ye<ve;ye++){const _e=me[ye],Ee=K.dot(_e);ge=Ee<ge?Ee:ge,xe=Ee>xe?Ee:xe}this.min=ge,this.max=xe}isSeparated(K){return this.min>K.max||K.min>this.max}}SeparatingAxisBounds.prototype.setFromBox=function(){const fe=new Vector3;return function(me,ge){const xe=ge.min,ye=ge.max;let ve=1/0,_e=-1/0;for(let Ee=0;Ee<=1;Ee++)for(let be=0;be<=1;be++)for(let Ae=0;Ae<=1;Ae++){fe.x=xe.x*Ee+ye.x*(1-Ee),fe.y=xe.y*be+ye.y*(1-be),fe.z=xe.z*Ae+ye.z*(1-Ae);const Se=me.dot(fe);ve=Math.min(Se,ve),_e=Math.max(Se,_e)}this.min=ve,this.max=_e}}();const closestPointLineToLine=function(){const fe=new Vector3,K=new Vector3,me=new Vector3;return function(xe,ye,ve){const _e=xe.start,Ee=fe,be=ye.start,Ae=K;me.subVectors(_e,be),fe.subVectors(xe.end,xe.start),K.subVectors(ye.end,ye.start);const Se=me.dot(Ae),Ce=Ae.dot(Ee),Te=Ae.dot(Ae),Re=me.dot(Ee),Ie=Ee.dot(Ee)*Te-Ce*Ce;let Be,Le;Ie!==0?Be=(Se*Ce-Re*Te)/Ie:Be=0,Le=(Se+Be*Ce)/Te,ve.x=Be,ve.y=Le}}(),closestPointsSegmentToSegment=function(){const fe=new Vector2,K=new Vector3,me=new Vector3;return function(xe,ye,ve,_e){closestPointLineToLine(xe,ye,fe);let Ee=fe.x,be=fe.y;if(Ee>=0&&Ee<=1&&be>=0&&be<=1){xe.at(Ee,ve),ye.at(be,_e);return}else if(Ee>=0&&Ee<=1){be<0?ye.at(0,_e):ye.at(1,_e),xe.closestPointToPoint(_e,!0,ve);return}else if(be>=0&&be<=1){Ee<0?xe.at(0,ve):xe.at(1,ve),ye.closestPointToPoint(ve,!0,_e);return}else{let Ae;Ee<0?Ae=xe.start:Ae=xe.end;let Se;be<0?Se=ye.start:Se=ye.end;const Ce=K,Te=me;if(xe.closestPointToPoint(Se,!0,K),ye.closestPointToPoint(Ae,!0,me),Ce.distanceToSquared(Se)<=Te.distanceToSquared(Ae)){ve.copy(Ce),_e.copy(Se);return}else{ve.copy(Ae),_e.copy(Te);return}}}}(),sphereIntersectTriangle=function(){const fe=new Vector3,K=new Vector3,me=new Plane,ge=new Line3;return function(ye,ve){const{radius:_e,center:Ee}=ye,{a:be,b:Ae,c:Se}=ve;if(ge.start=be,ge.end=Ae,ge.closestPointToPoint(Ee,!0,fe).distanceTo(Ee)<=_e||(ge.start=be,ge.end=Se,ge.closestPointToPoint(Ee,!0,fe).distanceTo(Ee)<=_e)||(ge.start=Ae,ge.end=Se,ge.closestPointToPoint(Ee,!0,fe).distanceTo(Ee)<=_e))return!0;const De=ve.getPlane(me);if(Math.abs(De.distanceToPoint(Ee))<=_e){const Be=De.projectPoint(Ee,K);if(ve.containsPoint(Be))return!0}return!1}}(),ZERO_EPSILON=1e-15;function isNearZero(fe){return Math.abs(fe)<ZERO_EPSILON}class ExtendedTriangle extends Triangle{constructor(...K){super(...K),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new Vector3),this.satBounds=new Array(4).fill().map(()=>new SeparatingAxisBounds),this.points=[this.a,this.b,this.c],this.sphere=new Sphere,this.plane=new Plane,this.needsUpdate=!0}intersectsSphere(K){return sphereIntersectTriangle(K,this)}update(){const K=this.a,me=this.b,ge=this.c,xe=this.points,ye=this.satAxes,ve=this.satBounds,_e=ye[0],Ee=ve[0];this.getNormal(_e),Ee.setFromPoints(_e,xe);const be=ye[1],Ae=ve[1];be.subVectors(K,me),Ae.setFromPoints(be,xe);const Se=ye[2],Ce=ve[2];Se.subVectors(me,ge),Ce.setFromPoints(Se,xe);const Te=ye[3],Re=ve[3];Te.subVectors(ge,K),Re.setFromPoints(Te,xe),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(_e,K),this.needsUpdate=!1}}ExtendedTriangle.prototype.closestPointToSegment=function(){const fe=new Vector3,K=new Vector3,me=new Line3;return function(xe,ye=null,ve=null){const{start:_e,end:Ee}=xe,be=this.points;let Ae,Se=1/0;for(let Ce=0;Ce<3;Ce++){const Te=(Ce+1)%3;me.start.copy(be[Ce]),me.end.copy(be[Te]),closestPointsSegmentToSegment(me,xe,fe,K),Ae=fe.distanceToSquared(K),Ae<Se&&(Se=Ae,ye&&ye.copy(fe),ve&&ve.copy(K))}return this.closestPointToPoint(_e,fe),Ae=_e.distanceToSquared(fe),Ae<Se&&(Se=Ae,ye&&ye.copy(fe),ve&&ve.copy(_e)),this.closestPointToPoint(Ee,fe),Ae=Ee.distanceToSquared(fe),Ae<Se&&(Se=Ae,ye&&ye.copy(fe),ve&&ve.copy(Ee)),Math.sqrt(Se)}}();ExtendedTriangle.prototype.intersectsTriangle=function(){const fe=new ExtendedTriangle,K=new Array(3),me=new Array(3),ge=new SeparatingAxisBounds,xe=new SeparatingAxisBounds,ye=new Vector3,ve=new Vector3,_e=new Vector3,Ee=new Vector3,be=new Vector3,Ae=new Line3,Se=new Line3,Ce=new Line3,Te=new Vector3;function Re(De,Ie,Be){const Le=De.points;let Oe=0,Fe=-1;for(let Ue=0;Ue<3;Ue++){const{start:Ne,end:He}=Ae;Ne.copy(Le[Ue]),He.copy(Le[(Ue+1)%3]),Ae.delta(ve);const ze=isNearZero(Ie.distanceToPoint(Ne));if(isNearZero(Ie.normal.dot(ve))&&ze){Be.copy(Ae),Oe=2;break}const je=Ie.intersectLine(Ae,Te);if(!je&&ze&&Te.copy(Ne),(je||ze)&&!isNearZero(Te.distanceTo(He))){if(Oe<=1)(Oe===1?Be.start:Be.end).copy(Te),ze&&(Fe=Oe);else if(Oe>=2){(Fe===1?Be.start:Be.end).copy(Te),Oe=2;break}if(Oe++,Oe===2&&Fe===-1)break}}return Oe}return function(Ie,Be=null,Le=!1){this.needsUpdate&&this.update(),Ie.isExtendedTriangle?Ie.needsUpdate&&Ie.update():(fe.copy(Ie),fe.update(),Ie=fe);const Oe=this.plane,Fe=Ie.plane;if(Math.abs(Oe.normal.dot(Fe.normal))>1-1e-10){const Ue=this.satBounds,Ne=this.satAxes;me[0]=Ie.a,me[1]=Ie.b,me[2]=Ie.c;for(let je=0;je<4;je++){const Ge=Ue[je],Xe=Ne[je];if(ge.setFromPoints(Xe,me),Ge.isSeparated(ge))return!1}const He=Ie.satBounds,ze=Ie.satAxes;K[0]=this.a,K[1]=this.b,K[2]=this.c;for(let je=0;je<4;je++){const Ge=He[je],Xe=ze[je];if(ge.setFromPoints(Xe,K),Ge.isSeparated(ge))return!1}for(let je=0;je<4;je++){const Ge=Ne[je];for(let Xe=0;Xe<4;Xe++){const qe=ze[Xe];if(ye.crossVectors(Ge,qe),ge.setFromPoints(ye,K),xe.setFromPoints(ye,me),ge.isSeparated(xe))return!1}}return Be&&(Le||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),Be.start.set(0,0,0),Be.end.set(0,0,0)),!0}else{const Ue=Re(this,Fe,Se);if(Ue===1&&Ie.containsPoint(Se.end))return Be&&(Be.start.copy(Se.end),Be.end.copy(Se.end)),!0;if(Ue!==2)return!1;const Ne=Re(Ie,Oe,Ce);if(Ne===1&&this.containsPoint(Ce.end))return Be&&(Be.start.copy(Ce.end),Be.end.copy(Ce.end)),!0;if(Ne!==2)return!1;if(Se.delta(_e),Ce.delta(Ee),_e.dot(Ee)<0){let Qe=Ce.start;Ce.start=Ce.end,Ce.end=Qe}const He=Se.start.dot(_e),ze=Se.end.dot(_e),je=Ce.start.dot(_e),Ge=Ce.end.dot(_e),Xe=ze<je,qe=He<Ge;return He!==Ge&&je!==ze&&Xe===qe?!1:(Be&&(be.subVectors(Se.start,Ce.start),be.dot(_e)>0?Be.start.copy(Se.start):Be.start.copy(Ce.start),be.subVectors(Se.end,Ce.end),be.dot(_e)<0?Be.end.copy(Se.end):Be.end.copy(Ce.end)),!0)}}}();ExtendedTriangle.prototype.distanceToPoint=function(){const fe=new Vector3;return function(me){return this.closestPointToPoint(me,fe),me.distanceTo(fe)}}();ExtendedTriangle.prototype.distanceToTriangle=function(){const fe=new Vector3,K=new Vector3,me=["a","b","c"],ge=new Line3,xe=new Line3;return function(ve,_e=null,Ee=null){const be=_e||Ee?ge:null;if(this.intersectsTriangle(ve,be))return(_e||Ee)&&(_e&&be.getCenter(_e),Ee&&be.getCenter(Ee)),0;let Ae=1/0;for(let Se=0;Se<3;Se++){let Ce;const Te=me[Se],Re=ve[Te];this.closestPointToPoint(Re,fe),Ce=Re.distanceToSquared(fe),Ce<Ae&&(Ae=Ce,_e&&_e.copy(fe),Ee&&Ee.copy(Re));const De=this[Te];ve.closestPointToPoint(De,fe),Ce=De.distanceToSquared(fe),Ce<Ae&&(Ae=Ce,_e&&_e.copy(De),Ee&&Ee.copy(fe))}for(let Se=0;Se<3;Se++){const Ce=me[Se],Te=me[(Se+1)%3];ge.set(this[Ce],this[Te]);for(let Re=0;Re<3;Re++){const De=me[Re],Ie=me[(Re+1)%3];xe.set(ve[De],ve[Ie]),closestPointsSegmentToSegment(ge,xe,fe,K);const Be=fe.distanceToSquared(K);Be<Ae&&(Ae=Be,_e&&_e.copy(fe),Ee&&Ee.copy(K))}}return Math.sqrt(Ae)}}();class OrientedBox{constructor(K,me,ge){this.isOrientedBox=!0,this.min=new Vector3,this.max=new Vector3,this.matrix=new Matrix4,this.invMatrix=new Matrix4,this.points=new Array(8).fill().map(()=>new Vector3),this.satAxes=new Array(3).fill().map(()=>new Vector3),this.satBounds=new Array(3).fill().map(()=>new SeparatingAxisBounds),this.alignedSatBounds=new Array(3).fill().map(()=>new SeparatingAxisBounds),this.needsUpdate=!1,K&&this.min.copy(K),me&&this.max.copy(me),ge&&this.matrix.copy(ge)}set(K,me,ge){this.min.copy(K),this.max.copy(me),this.matrix.copy(ge),this.needsUpdate=!0}copy(K){this.min.copy(K.min),this.max.copy(K.max),this.matrix.copy(K.matrix),this.needsUpdate=!0}}OrientedBox.prototype.update=function(){return function(){const K=this.matrix,me=this.min,ge=this.max,xe=this.points;for(let be=0;be<=1;be++)for(let Ae=0;Ae<=1;Ae++)for(let Se=0;Se<=1;Se++){const Ce=1*be|2*Ae|4*Se,Te=xe[Ce];Te.x=be?ge.x:me.x,Te.y=Ae?ge.y:me.y,Te.z=Se?ge.z:me.z,Te.applyMatrix4(K)}const ye=this.satBounds,ve=this.satAxes,_e=xe[0];for(let be=0;be<3;be++){const Ae=ve[be],Se=ye[be],Ce=1<<be,Te=xe[Ce];Ae.subVectors(_e,Te),Se.setFromPoints(Ae,xe)}const Ee=this.alignedSatBounds;Ee[0].setFromPointsField(xe,"x"),Ee[1].setFromPointsField(xe,"y"),Ee[2].setFromPointsField(xe,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}();OrientedBox.prototype.intersectsBox=function(){const fe=new SeparatingAxisBounds;return function(me){this.needsUpdate&&this.update();const ge=me.min,xe=me.max,ye=this.satBounds,ve=this.satAxes,_e=this.alignedSatBounds;if(fe.min=ge.x,fe.max=xe.x,_e[0].isSeparated(fe)||(fe.min=ge.y,fe.max=xe.y,_e[1].isSeparated(fe))||(fe.min=ge.z,fe.max=xe.z,_e[2].isSeparated(fe)))return!1;for(let Ee=0;Ee<3;Ee++){const be=ve[Ee],Ae=ye[Ee];if(fe.setFromBox(be,me),Ae.isSeparated(fe))return!1}return!0}}();OrientedBox.prototype.intersectsTriangle=function(){const fe=new ExtendedTriangle,K=new Array(3),me=new SeparatingAxisBounds,ge=new SeparatingAxisBounds,xe=new Vector3;return function(ve){this.needsUpdate&&this.update(),ve.isExtendedTriangle?ve.needsUpdate&&ve.update():(fe.copy(ve),fe.update(),ve=fe);const _e=this.satBounds,Ee=this.satAxes;K[0]=ve.a,K[1]=ve.b,K[2]=ve.c;for(let Ce=0;Ce<3;Ce++){const Te=_e[Ce],Re=Ee[Ce];if(me.setFromPoints(Re,K),Te.isSeparated(me))return!1}const be=ve.satBounds,Ae=ve.satAxes,Se=this.points;for(let Ce=0;Ce<3;Ce++){const Te=be[Ce],Re=Ae[Ce];if(me.setFromPoints(Re,Se),Te.isSeparated(me))return!1}for(let Ce=0;Ce<3;Ce++){const Te=Ee[Ce];for(let Re=0;Re<4;Re++){const De=Ae[Re];if(xe.crossVectors(Te,De),me.setFromPoints(xe,K),ge.setFromPoints(xe,Se),me.isSeparated(ge))return!1}}return!0}}();OrientedBox.prototype.closestPointToPoint=function(){return function(K,me){return this.needsUpdate&&this.update(),me.copy(K).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),me}}();OrientedBox.prototype.distanceToPoint=function(){const fe=new Vector3;return function(me){return this.closestPointToPoint(me,fe),me.distanceTo(fe)}}();OrientedBox.prototype.distanceToBox=function(){const fe=["x","y","z"],K=new Array(12).fill().map(()=>new Line3),me=new Array(12).fill().map(()=>new Line3),ge=new Vector3,xe=new Vector3;return function(ve,_e=0,Ee=null,be=null){if(this.needsUpdate&&this.update(),this.intersectsBox(ve))return(Ee||be)&&(ve.getCenter(xe),this.closestPointToPoint(xe,ge),ve.closestPointToPoint(ge,xe),Ee&&Ee.copy(ge),be&&be.copy(xe)),0;const Ae=_e*_e,Se=ve.min,Ce=ve.max,Te=this.points;let Re=1/0;for(let Ie=0;Ie<8;Ie++){const Be=Te[Ie];xe.copy(Be).clamp(Se,Ce);const Le=Be.distanceToSquared(xe);if(Le<Re&&(Re=Le,Ee&&Ee.copy(Be),be&&be.copy(xe),Le<Ae))return Math.sqrt(Le)}let De=0;for(let Ie=0;Ie<3;Ie++)for(let Be=0;Be<=1;Be++)for(let Le=0;Le<=1;Le++){const Oe=(Ie+1)%3,Fe=(Ie+2)%3,Ue=Be<<Oe|Le<<Fe,Ne=1<<Ie|Be<<Oe|Le<<Fe,He=Te[Ue],ze=Te[Ne];K[De].set(He,ze);const Ge=fe[Ie],Xe=fe[Oe],qe=fe[Fe],Qe=me[De],nt=Qe.start,Nt=Qe.end;nt[Ge]=Se[Ge],nt[Xe]=Be?Se[Xe]:Ce[Xe],nt[qe]=Le?Se[qe]:Ce[Xe],Nt[Ge]=Ce[Ge],Nt[Xe]=Be?Se[Xe]:Ce[Xe],Nt[qe]=Le?Se[qe]:Ce[Xe],De++}for(let Ie=0;Ie<=1;Ie++)for(let Be=0;Be<=1;Be++)for(let Le=0;Le<=1;Le++){xe.x=Ie?Ce.x:Se.x,xe.y=Be?Ce.y:Se.y,xe.z=Le?Ce.z:Se.z,this.closestPointToPoint(xe,ge);const Oe=xe.distanceToSquared(ge);if(Oe<Re&&(Re=Oe,Ee&&Ee.copy(ge),be&&be.copy(xe),Oe<Ae))return Math.sqrt(Oe)}for(let Ie=0;Ie<12;Ie++){const Be=K[Ie];for(let Le=0;Le<12;Le++){const Oe=me[Le];closestPointsSegmentToSegment(Be,Oe,ge,xe);const Fe=ge.distanceToSquared(xe);if(Fe<Re&&(Re=Fe,Ee&&Ee.copy(ge),be&&be.copy(xe),Fe<Ae))return Math.sqrt(Fe)}}return Math.sqrt(Re)}}();class PrimitivePool{constructor(K){this._getNewPrimitive=K,this._primitives=[]}getPrimitive(){const K=this._primitives;return K.length===0?this._getNewPrimitive():K.pop()}releasePrimitive(K){this._primitives.push(K)}}class ExtendedTrianglePoolBase extends PrimitivePool{constructor(){super(()=>new ExtendedTriangle)}}const ExtendedTrianglePool=new ExtendedTrianglePoolBase;class _BufferStack{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const K=[];let me=null;this.setBuffer=ge=>{me&&K.push(me),me=ge,this.float32Array=new Float32Array(ge),this.uint16Array=new Uint16Array(ge),this.uint32Array=new Uint32Array(ge)},this.clearBuffer=()=>{me=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,K.length!==0&&this.setBuffer(K.pop())}}}const BufferStack=new _BufferStack;let _box1,_box2;const boxStack=[],boxPool=new PrimitivePool(()=>new Box3);function shapecast(fe,K,me,ge,xe,ye){_box1=boxPool.getPrimitive(),_box2=boxPool.getPrimitive(),boxStack.push(_box1,_box2),BufferStack.setBuffer(fe._roots[K]);const ve=shapecastTraverse(0,fe.geometry,me,ge,xe,ye);BufferStack.clearBuffer(),boxPool.releasePrimitive(_box1),boxPool.releasePrimitive(_box2),boxStack.pop(),boxStack.pop();const _e=boxStack.length;return _e>0&&(_box2=boxStack[_e-1],_box1=boxStack[_e-2]),ve}function shapecastTraverse(fe,K,me,ge,xe=null,ye=0,ve=0){const{float32Array:_e,uint16Array:Ee,uint32Array:be}=BufferStack;let Ae=fe*2;if(IS_LEAF(Ae,Ee)){const Ce=OFFSET(fe,be),Te=COUNT(Ae,Ee);return arrayToBox(fe,_e,_box1),ge(Ce,Te,!1,ve,ye+fe,_box1)}else{let Ge=function(qe){const{uint16Array:Qe,uint32Array:nt}=BufferStack;let Nt=qe*2;for(;!IS_LEAF(Nt,Qe);)qe=LEFT_NODE(qe),Nt=qe*2;return OFFSET(qe,nt)},Xe=function(qe){const{uint16Array:Qe,uint32Array:nt}=BufferStack;let Nt=qe*2;for(;!IS_LEAF(Nt,Qe);)qe=RIGHT_NODE(qe,nt),Nt=qe*2;return OFFSET(qe,nt)+COUNT(Nt,Qe)};const Ce=LEFT_NODE(fe),Te=RIGHT_NODE(fe,be);let Re=Ce,De=Te,Ie,Be,Le,Oe;if(xe&&(Le=_box1,Oe=_box2,arrayToBox(Re,_e,Le),arrayToBox(De,_e,Oe),Ie=xe(Le),Be=xe(Oe),Be<Ie)){Re=Te,De=Ce;const qe=Ie;Ie=Be,Be=qe,Le=Oe}Le||(Le=_box1,arrayToBox(Re,_e,Le));const Fe=IS_LEAF(Re*2,Ee),Ue=me(Le,Fe,Ie,ve+1,ye+Re);let Ne;if(Ue===CONTAINED){const qe=Ge(Re),nt=Xe(Re)-qe;Ne=ge(qe,nt,!0,ve+1,ye+Re,Le)}else Ne=Ue&&shapecastTraverse(Re,K,me,ge,xe,ye,ve+1);if(Ne)return!0;Oe=_box2,arrayToBox(De,_e,Oe);const He=IS_LEAF(De*2,Ee),ze=me(Oe,He,Be,ve+1,ye+De);let je;if(ze===CONTAINED){const qe=Ge(De),nt=Xe(De)-qe;je=ge(qe,nt,!0,ve+1,ye+De,Oe)}else je=ze&&shapecastTraverse(De,K,me,ge,xe,ye,ve+1);return!!je}}const temp=new Vector3,temp1$2=new Vector3;function closestPointToPoint(fe,K,me={},ge=0,xe=1/0){const ye=ge*ge,ve=xe*xe;let _e=1/0,Ee=null;if(fe.shapecast({boundsTraverseOrder:Ae=>(temp.copy(K).clamp(Ae.min,Ae.max),temp.distanceToSquared(K)),intersectsBounds:(Ae,Se,Ce)=>Ce<_e&&Ce<ve,intersectsTriangle:(Ae,Se)=>{Ae.closestPointToPoint(K,temp);const Ce=K.distanceToSquared(temp);return Ce<_e&&(temp1$2.copy(temp),_e=Ce,Ee=Se),Ce<ye}}),_e===1/0)return null;const be=Math.sqrt(_e);return me.point?me.point.copy(temp1$2):me.point=temp1$2.clone(),me.distance=be,me.faceIndex=Ee,me}const IS_GT_REVISION_169=parseInt(REVISION)>=169,_vA=new Vector3,_vB=new Vector3,_vC=new Vector3,_uvA=new Vector2,_uvB=new Vector2,_uvC=new Vector2,_normalA=new Vector3,_normalB=new Vector3,_normalC=new Vector3,_intersectionPoint=new Vector3;function checkIntersection(fe,K,me,ge,xe,ye,ve,_e){let Ee;if(ye===BackSide?Ee=fe.intersectTriangle(ge,me,K,!0,xe):Ee=fe.intersectTriangle(K,me,ge,ye!==DoubleSide,xe),Ee===null)return null;const be=fe.origin.distanceTo(xe);return be<ve||be>_e?null:{distance:be,point:xe.clone()}}function checkBufferGeometryIntersection(fe,K,me,ge,xe,ye,ve,_e,Ee,be,Ae){_vA.fromBufferAttribute(K,ye),_vB.fromBufferAttribute(K,ve),_vC.fromBufferAttribute(K,_e);const Se=checkIntersection(fe,_vA,_vB,_vC,_intersectionPoint,Ee,be,Ae);if(Se){const Ce=new Vector3;Triangle.getBarycoord(_intersectionPoint,_vA,_vB,_vC,Ce),ge&&(_uvA.fromBufferAttribute(ge,ye),_uvB.fromBufferAttribute(ge,ve),_uvC.fromBufferAttribute(ge,_e),Se.uv=Triangle.getInterpolation(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),xe&&(_uvA.fromBufferAttribute(xe,ye),_uvB.fromBufferAttribute(xe,ve),_uvC.fromBufferAttribute(xe,_e),Se.uv1=Triangle.getInterpolation(_intersectionPoint,_vA,_vB,_vC,_uvA,_uvB,_uvC,new Vector2)),me&&(_normalA.fromBufferAttribute(me,ye),_normalB.fromBufferAttribute(me,ve),_normalC.fromBufferAttribute(me,_e),Se.normal=Triangle.getInterpolation(_intersectionPoint,_vA,_vB,_vC,_normalA,_normalB,_normalC,new Vector3),Se.normal.dot(fe.direction)>0&&Se.normal.multiplyScalar(-1));const Te={a:ye,b:ve,c:_e,normal:new Vector3,materialIndex:0};Triangle.getNormal(_vA,_vB,_vC,Te.normal),Se.face=Te,Se.faceIndex=ye,IS_GT_REVISION_169&&(Se.barycoord=Ce)}return Se}function intersectTri(fe,K,me,ge,xe,ye,ve){const _e=ge*3;let Ee=_e+0,be=_e+1,Ae=_e+2;const Se=fe.index;fe.index&&(Ee=Se.getX(Ee),be=Se.getX(be),Ae=Se.getX(Ae));const{position:Ce,normal:Te,uv:Re,uv1:De}=fe.attributes,Ie=checkBufferGeometryIntersection(me,Ce,Te,Re,De,Ee,be,Ae,K,ye,ve);return Ie?(Ie.faceIndex=ge,xe&&xe.push(Ie),Ie):null}function setTriangle(fe,K,me,ge){const xe=fe.a,ye=fe.b,ve=fe.c;let _e=K,Ee=K+1,be=K+2;me&&(_e=me.getX(_e),Ee=me.getX(Ee),be=me.getX(be)),xe.x=ge.getX(_e),xe.y=ge.getY(_e),xe.z=ge.getZ(_e),ye.x=ge.getX(Ee),ye.y=ge.getY(Ee),ye.z=ge.getZ(Ee),ve.x=ge.getX(be),ve.y=ge.getY(be),ve.z=ge.getZ(be)}function intersectTris(fe,K,me,ge,xe,ye,ve,_e){const{geometry:Ee,_indirectBuffer:be}=fe;for(let Ae=ge,Se=ge+xe;Ae<Se;Ae++)intersectTri(Ee,K,me,Ae,ye,ve,_e)}function intersectClosestTri(fe,K,me,ge,xe,ye,ve){const{geometry:_e,_indirectBuffer:Ee}=fe;let be=1/0,Ae=null;for(let Se=ge,Ce=ge+xe;Se<Ce;Se++){let Te;Te=intersectTri(_e,K,me,Se,null,ye,ve),Te&&Te.distance<be&&(Ae=Te,be=Te.distance)}return Ae}function iterateOverTriangles(fe,K,me,ge,xe,ye,ve){const{geometry:_e}=me,{index:Ee}=_e,be=_e.attributes.position;for(let Ae=fe,Se=K+fe;Ae<Se;Ae++){let Ce;if(Ce=Ae,setTriangle(ve,Ce*3,Ee,be),ve.needsUpdate=!0,ge(ve,Ce,xe,ye))return!0}return!1}function refit(fe,K=null){K&&Array.isArray(K)&&(K=new Set(K));const me=fe.geometry,ge=me.index?me.index.array:null,xe=me.attributes.position;let ye,ve,_e,Ee,be=0;const Ae=fe._roots;for(let Ce=0,Te=Ae.length;Ce<Te;Ce++)ye=Ae[Ce],ve=new Uint32Array(ye),_e=new Uint16Array(ye),Ee=new Float32Array(ye),Se(0,be),be+=ye.byteLength;function Se(Ce,Te,Re=!1){const De=Ce*2;if(_e[De+15]===IS_LEAFNODE_FLAG){const Be=ve[Ce+6],Le=_e[De+14];let Oe=1/0,Fe=1/0,Ue=1/0,Ne=-1/0,He=-1/0,ze=-1/0;for(let je=3*Be,Ge=3*(Be+Le);je<Ge;je++){let Xe=ge[je];const qe=xe.getX(Xe),Qe=xe.getY(Xe),nt=xe.getZ(Xe);qe<Oe&&(Oe=qe),qe>Ne&&(Ne=qe),Qe<Fe&&(Fe=Qe),Qe>He&&(He=Qe),nt<Ue&&(Ue=nt),nt>ze&&(ze=nt)}return Ee[Ce+0]!==Oe||Ee[Ce+1]!==Fe||Ee[Ce+2]!==Ue||Ee[Ce+3]!==Ne||Ee[Ce+4]!==He||Ee[Ce+5]!==ze?(Ee[Ce+0]=Oe,Ee[Ce+1]=Fe,Ee[Ce+2]=Ue,Ee[Ce+3]=Ne,Ee[Ce+4]=He,Ee[Ce+5]=ze,!0):!1}else{const Be=Ce+8,Le=ve[Ce+6],Oe=Be+Te,Fe=Le+Te;let Ue=Re,Ne=!1,He=!1;K?Ue||(Ne=K.has(Oe),He=K.has(Fe),Ue=!Ne&&!He):(Ne=!0,He=!0);const ze=Ue||Ne,je=Ue||He;let Ge=!1;ze&&(Ge=Se(Be,Te,Ue));let Xe=!1;je&&(Xe=Se(Le,Te,Ue));const qe=Ge||Xe;if(qe)for(let Qe=0;Qe<3;Qe++){const nt=Be+Qe,Nt=Le+Qe,Ye=Ee[nt],at=Ee[nt+3],rt=Ee[Nt],Ft=Ee[Nt+3];Ee[Ce+Qe]=Ye<rt?Ye:rt,Ee[Ce+Qe+3]=at>Ft?at:Ft}return qe}}}function intersectRay(fe,K,me,ge,xe){let ye,ve,_e,Ee,be,Ae;const Se=1/me.direction.x,Ce=1/me.direction.y,Te=1/me.direction.z,Re=me.origin.x,De=me.origin.y,Ie=me.origin.z;let Be=K[fe],Le=K[fe+3],Oe=K[fe+1],Fe=K[fe+3+1],Ue=K[fe+2],Ne=K[fe+3+2];return Se>=0?(ye=(Be-Re)*Se,ve=(Le-Re)*Se):(ye=(Le-Re)*Se,ve=(Be-Re)*Se),Ce>=0?(_e=(Oe-De)*Ce,Ee=(Fe-De)*Ce):(_e=(Fe-De)*Ce,Ee=(Oe-De)*Ce),ye>Ee||_e>ve||((_e>ye||isNaN(ye))&&(ye=_e),(Ee<ve||isNaN(ve))&&(ve=Ee),Te>=0?(be=(Ue-Ie)*Te,Ae=(Ne-Ie)*Te):(be=(Ne-Ie)*Te,Ae=(Ue-Ie)*Te),ye>Ae||be>ve)?!1:((be>ye||ye!==ye)&&(ye=be),(Ae<ve||ve!==ve)&&(ve=Ae),ye<=xe&&ve>=ge)}function intersectTris_indirect(fe,K,me,ge,xe,ye,ve,_e){const{geometry:Ee,_indirectBuffer:be}=fe;for(let Ae=ge,Se=ge+xe;Ae<Se;Ae++){let Ce=be?be[Ae]:Ae;intersectTri(Ee,K,me,Ce,ye,ve,_e)}}function intersectClosestTri_indirect(fe,K,me,ge,xe,ye,ve){const{geometry:_e,_indirectBuffer:Ee}=fe;let be=1/0,Ae=null;for(let Se=ge,Ce=ge+xe;Se<Ce;Se++){let Te;Te=intersectTri(_e,K,me,Ee?Ee[Se]:Se,null,ye,ve),Te&&Te.distance<be&&(Ae=Te,be=Te.distance)}return Ae}function iterateOverTriangles_indirect(fe,K,me,ge,xe,ye,ve){const{geometry:_e}=me,{index:Ee}=_e,be=_e.attributes.position;for(let Ae=fe,Se=K+fe;Ae<Se;Ae++){let Ce;if(Ce=me.resolveTriangleIndex(Ae),setTriangle(ve,Ce*3,Ee,be),ve.needsUpdate=!0,ge(ve,Ce,xe,ye))return!0}return!1}function raycast(fe,K,me,ge,xe,ye,ve){BufferStack.setBuffer(fe._roots[K]),_raycast$1(0,fe,me,ge,xe,ye,ve),BufferStack.clearBuffer()}function _raycast$1(fe,K,me,ge,xe,ye,ve){const{float32Array:_e,uint16Array:Ee,uint32Array:be}=BufferStack,Ae=fe*2;if(IS_LEAF(Ae,Ee)){const Ce=OFFSET(fe,be),Te=COUNT(Ae,Ee);intersectTris(K,me,ge,Ce,Te,xe,ye,ve)}else{const Ce=LEFT_NODE(fe);intersectRay(Ce,_e,ge,ye,ve)&&_raycast$1(Ce,K,me,ge,xe,ye,ve);const Te=RIGHT_NODE(fe,be);intersectRay(Te,_e,ge,ye,ve)&&_raycast$1(Te,K,me,ge,xe,ye,ve)}}const _xyzFields$1=["x","y","z"];function raycastFirst(fe,K,me,ge,xe,ye){BufferStack.setBuffer(fe._roots[K]);const ve=_raycastFirst$1(0,fe,me,ge,xe,ye);return BufferStack.clearBuffer(),ve}function _raycastFirst$1(fe,K,me,ge,xe,ye){const{float32Array:ve,uint16Array:_e,uint32Array:Ee}=BufferStack;let be=fe*2;if(IS_LEAF(be,_e)){const Se=OFFSET(fe,Ee),Ce=COUNT(be,_e);return intersectClosestTri(K,me,ge,Se,Ce,xe,ye)}else{const Se=SPLIT_AXIS(fe,Ee),Ce=_xyzFields$1[Se],Re=ge.direction[Ce]>=0;let De,Ie;Re?(De=LEFT_NODE(fe),Ie=RIGHT_NODE(fe,Ee)):(De=RIGHT_NODE(fe,Ee),Ie=LEFT_NODE(fe));const Le=intersectRay(De,ve,ge,xe,ye)?_raycastFirst$1(De,K,me,ge,xe,ye):null;if(Le){const Ue=Le.point[Ce];if(Re?Ue<=ve[Ie+Se]:Ue>=ve[Ie+Se+3])return Le}const Fe=intersectRay(Ie,ve,ge,xe,ye)?_raycastFirst$1(Ie,K,me,ge,xe,ye):null;return Le&&Fe?Le.distance<=Fe.distance?Le:Fe:Le||Fe||null}}const boundingBox$1=new Box3,triangle$1=new ExtendedTriangle,triangle2$1=new ExtendedTriangle,invertedMat$1=new Matrix4,obb$4=new OrientedBox,obb2$3=new OrientedBox;function intersectsGeometry(fe,K,me,ge){BufferStack.setBuffer(fe._roots[K]);const xe=_intersectsGeometry$1(0,fe,me,ge);return BufferStack.clearBuffer(),xe}function _intersectsGeometry$1(fe,K,me,ge,xe=null){const{float32Array:ye,uint16Array:ve,uint32Array:_e}=BufferStack;let Ee=fe*2;if(xe===null&&(me.boundingBox||me.computeBoundingBox(),obb$4.set(me.boundingBox.min,me.boundingBox.max,ge),xe=obb$4),IS_LEAF(Ee,ve)){const Ae=K.geometry,Se=Ae.index,Ce=Ae.attributes.position,Te=me.index,Re=me.attributes.position,De=OFFSET(fe,_e),Ie=COUNT(Ee,ve);if(invertedMat$1.copy(ge).invert(),me.boundsTree)return arrayToBox(fe,ye,obb2$3),obb2$3.matrix.copy(invertedMat$1),obb2$3.needsUpdate=!0,me.boundsTree.shapecast({intersectsBounds:Le=>obb2$3.intersectsBox(Le),intersectsTriangle:Le=>{Le.a.applyMatrix4(ge),Le.b.applyMatrix4(ge),Le.c.applyMatrix4(ge),Le.needsUpdate=!0;for(let Oe=De*3,Fe=(Ie+De)*3;Oe<Fe;Oe+=3)if(setTriangle(triangle2$1,Oe,Se,Ce),triangle2$1.needsUpdate=!0,Le.intersectsTriangle(triangle2$1))return!0;return!1}});for(let Be=De*3,Le=(Ie+De)*3;Be<Le;Be+=3){setTriangle(triangle$1,Be,Se,Ce),triangle$1.a.applyMatrix4(invertedMat$1),triangle$1.b.applyMatrix4(invertedMat$1),triangle$1.c.applyMatrix4(invertedMat$1),triangle$1.needsUpdate=!0;for(let Oe=0,Fe=Te.count;Oe<Fe;Oe+=3)if(setTriangle(triangle2$1,Oe,Te,Re),triangle2$1.needsUpdate=!0,triangle$1.intersectsTriangle(triangle2$1))return!0}}else{const Ae=fe+8,Se=_e[fe+6];return arrayToBox(Ae,ye,boundingBox$1),!!(xe.intersectsBox(boundingBox$1)&&_intersectsGeometry$1(Ae,K,me,ge,xe)||(arrayToBox(Se,ye,boundingBox$1),xe.intersectsBox(boundingBox$1)&&_intersectsGeometry$1(Se,K,me,ge,xe)))}}const tempMatrix$2=new Matrix4,obb$3=new OrientedBox,obb2$2=new OrientedBox,temp1$1=new Vector3,temp2$1=new Vector3,temp3$1=new Vector3,temp4$1=new Vector3;function closestPointToGeometry(fe,K,me,ge={},xe={},ye=0,ve=1/0){K.boundingBox||K.computeBoundingBox(),obb$3.set(K.boundingBox.min,K.boundingBox.max,me),obb$3.needsUpdate=!0;const _e=fe.geometry,Ee=_e.attributes.position,be=_e.index,Ae=K.attributes.position,Se=K.index,Ce=ExtendedTrianglePool.getPrimitive(),Te=ExtendedTrianglePool.getPrimitive();let Re=temp1$1,De=temp2$1,Ie=null,Be=null;xe&&(Ie=temp3$1,Be=temp4$1);let Le=1/0,Oe=null,Fe=null;return tempMatrix$2.copy(me).invert(),obb2$2.matrix.copy(tempMatrix$2),fe.shapecast({boundsTraverseOrder:Ue=>obb$3.distanceToBox(Ue),intersectsBounds:(Ue,Ne,He)=>He<Le&&He<ve?(Ne&&(obb2$2.min.copy(Ue.min),obb2$2.max.copy(Ue.max),obb2$2.needsUpdate=!0),!0):!1,intersectsRange:(Ue,Ne)=>{if(K.boundsTree)return K.boundsTree.shapecast({boundsTraverseOrder:ze=>obb2$2.distanceToBox(ze),intersectsBounds:(ze,je,Ge)=>Ge<Le&&Ge<ve,intersectsRange:(ze,je)=>{for(let Ge=ze,Xe=ze+je;Ge<Xe;Ge++){setTriangle(Te,3*Ge,Se,Ae),Te.a.applyMatrix4(me),Te.b.applyMatrix4(me),Te.c.applyMatrix4(me),Te.needsUpdate=!0;for(let qe=Ue,Qe=Ue+Ne;qe<Qe;qe++){setTriangle(Ce,3*qe,be,Ee),Ce.needsUpdate=!0;const nt=Ce.distanceToTriangle(Te,Re,Ie);if(nt<Le&&(De.copy(Re),Be&&Be.copy(Ie),Le=nt,Oe=qe,Fe=Ge),nt<ye)return!0}}}});{const He=getTriCount(K);for(let ze=0,je=He;ze<je;ze++){setTriangle(Te,3*ze,Se,Ae),Te.a.applyMatrix4(me),Te.b.applyMatrix4(me),Te.c.applyMatrix4(me),Te.needsUpdate=!0;for(let Ge=Ue,Xe=Ue+Ne;Ge<Xe;Ge++){setTriangle(Ce,3*Ge,be,Ee),Ce.needsUpdate=!0;const qe=Ce.distanceToTriangle(Te,Re,Ie);if(qe<Le&&(De.copy(Re),Be&&Be.copy(Ie),Le=qe,Oe=Ge,Fe=ze),qe<ye)return!0}}}}}),ExtendedTrianglePool.releasePrimitive(Ce),ExtendedTrianglePool.releasePrimitive(Te),Le===1/0?null:(ge.point?ge.point.copy(De):ge.point=De.clone(),ge.distance=Le,ge.faceIndex=Oe,xe&&(xe.point?xe.point.copy(Be):xe.point=Be.clone(),xe.point.applyMatrix4(tempMatrix$2),De.applyMatrix4(tempMatrix$2),xe.distance=De.sub(xe.point).length(),xe.faceIndex=Fe),ge)}function refit_indirect(fe,K=null){K&&Array.isArray(K)&&(K=new Set(K));const me=fe.geometry,ge=me.index?me.index.array:null,xe=me.attributes.position;let ye,ve,_e,Ee,be=0;const Ae=fe._roots;for(let Ce=0,Te=Ae.length;Ce<Te;Ce++)ye=Ae[Ce],ve=new Uint32Array(ye),_e=new Uint16Array(ye),Ee=new Float32Array(ye),Se(0,be),be+=ye.byteLength;function Se(Ce,Te,Re=!1){const De=Ce*2;if(_e[De+15]===IS_LEAFNODE_FLAG){const Be=ve[Ce+6],Le=_e[De+14];let Oe=1/0,Fe=1/0,Ue=1/0,Ne=-1/0,He=-1/0,ze=-1/0;for(let je=Be,Ge=Be+Le;je<Ge;je++){const Xe=3*fe.resolveTriangleIndex(je);for(let qe=0;qe<3;qe++){let Qe=Xe+qe;Qe=ge?ge[Qe]:Qe;const nt=xe.getX(Qe),Nt=xe.getY(Qe),Ye=xe.getZ(Qe);nt<Oe&&(Oe=nt),nt>Ne&&(Ne=nt),Nt<Fe&&(Fe=Nt),Nt>He&&(He=Nt),Ye<Ue&&(Ue=Ye),Ye>ze&&(ze=Ye)}}return Ee[Ce+0]!==Oe||Ee[Ce+1]!==Fe||Ee[Ce+2]!==Ue||Ee[Ce+3]!==Ne||Ee[Ce+4]!==He||Ee[Ce+5]!==ze?(Ee[Ce+0]=Oe,Ee[Ce+1]=Fe,Ee[Ce+2]=Ue,Ee[Ce+3]=Ne,Ee[Ce+4]=He,Ee[Ce+5]=ze,!0):!1}else{const Be=Ce+8,Le=ve[Ce+6],Oe=Be+Te,Fe=Le+Te;let Ue=Re,Ne=!1,He=!1;K?Ue||(Ne=K.has(Oe),He=K.has(Fe),Ue=!Ne&&!He):(Ne=!0,He=!0);const ze=Ue||Ne,je=Ue||He;let Ge=!1;ze&&(Ge=Se(Be,Te,Ue));let Xe=!1;je&&(Xe=Se(Le,Te,Ue));const qe=Ge||Xe;if(qe)for(let Qe=0;Qe<3;Qe++){const nt=Be+Qe,Nt=Le+Qe,Ye=Ee[nt],at=Ee[nt+3],rt=Ee[Nt],Ft=Ee[Nt+3];Ee[Ce+Qe]=Ye<rt?Ye:rt,Ee[Ce+Qe+3]=at>Ft?at:Ft}return qe}}}function raycast_indirect(fe,K,me,ge,xe,ye,ve){BufferStack.setBuffer(fe._roots[K]),_raycast(0,fe,me,ge,xe,ye,ve),BufferStack.clearBuffer()}function _raycast(fe,K,me,ge,xe,ye,ve){const{float32Array:_e,uint16Array:Ee,uint32Array:be}=BufferStack,Ae=fe*2;if(IS_LEAF(Ae,Ee)){const Ce=OFFSET(fe,be),Te=COUNT(Ae,Ee);intersectTris_indirect(K,me,ge,Ce,Te,xe,ye,ve)}else{const Ce=LEFT_NODE(fe);intersectRay(Ce,_e,ge,ye,ve)&&_raycast(Ce,K,me,ge,xe,ye,ve);const Te=RIGHT_NODE(fe,be);intersectRay(Te,_e,ge,ye,ve)&&_raycast(Te,K,me,ge,xe,ye,ve)}}const _xyzFields=["x","y","z"];function raycastFirst_indirect(fe,K,me,ge,xe,ye){BufferStack.setBuffer(fe._roots[K]);const ve=_raycastFirst(0,fe,me,ge,xe,ye);return BufferStack.clearBuffer(),ve}function _raycastFirst(fe,K,me,ge,xe,ye){const{float32Array:ve,uint16Array:_e,uint32Array:Ee}=BufferStack;let be=fe*2;if(IS_LEAF(be,_e)){const Se=OFFSET(fe,Ee),Ce=COUNT(be,_e);return intersectClosestTri_indirect(K,me,ge,Se,Ce,xe,ye)}else{const Se=SPLIT_AXIS(fe,Ee),Ce=_xyzFields[Se],Re=ge.direction[Ce]>=0;let De,Ie;Re?(De=LEFT_NODE(fe),Ie=RIGHT_NODE(fe,Ee)):(De=RIGHT_NODE(fe,Ee),Ie=LEFT_NODE(fe));const Le=intersectRay(De,ve,ge,xe,ye)?_raycastFirst(De,K,me,ge,xe,ye):null;if(Le){const Ue=Le.point[Ce];if(Re?Ue<=ve[Ie+Se]:Ue>=ve[Ie+Se+3])return Le}const Fe=intersectRay(Ie,ve,ge,xe,ye)?_raycastFirst(Ie,K,me,ge,xe,ye):null;return Le&&Fe?Le.distance<=Fe.distance?Le:Fe:Le||Fe||null}}const boundingBox=new Box3,triangle=new ExtendedTriangle,triangle2=new ExtendedTriangle,invertedMat=new Matrix4,obb$2=new OrientedBox,obb2$1=new OrientedBox;function intersectsGeometry_indirect(fe,K,me,ge){BufferStack.setBuffer(fe._roots[K]);const xe=_intersectsGeometry(0,fe,me,ge);return BufferStack.clearBuffer(),xe}function _intersectsGeometry(fe,K,me,ge,xe=null){const{float32Array:ye,uint16Array:ve,uint32Array:_e}=BufferStack;let Ee=fe*2;if(xe===null&&(me.boundingBox||me.computeBoundingBox(),obb$2.set(me.boundingBox.min,me.boundingBox.max,ge),xe=obb$2),IS_LEAF(Ee,ve)){const Ae=K.geometry,Se=Ae.index,Ce=Ae.attributes.position,Te=me.index,Re=me.attributes.position,De=OFFSET(fe,_e),Ie=COUNT(Ee,ve);if(invertedMat.copy(ge).invert(),me.boundsTree)return arrayToBox(fe,ye,obb2$1),obb2$1.matrix.copy(invertedMat),obb2$1.needsUpdate=!0,me.boundsTree.shapecast({intersectsBounds:Le=>obb2$1.intersectsBox(Le),intersectsTriangle:Le=>{Le.a.applyMatrix4(ge),Le.b.applyMatrix4(ge),Le.c.applyMatrix4(ge),Le.needsUpdate=!0;for(let Oe=De,Fe=Ie+De;Oe<Fe;Oe++)if(setTriangle(triangle2,3*K.resolveTriangleIndex(Oe),Se,Ce),triangle2.needsUpdate=!0,Le.intersectsTriangle(triangle2))return!0;return!1}});for(let Be=De,Le=Ie+De;Be<Le;Be++){const Oe=K.resolveTriangleIndex(Be);setTriangle(triangle,3*Oe,Se,Ce),triangle.a.applyMatrix4(invertedMat),triangle.b.applyMatrix4(invertedMat),triangle.c.applyMatrix4(invertedMat),triangle.needsUpdate=!0;for(let Fe=0,Ue=Te.count;Fe<Ue;Fe+=3)if(setTriangle(triangle2,Fe,Te,Re),triangle2.needsUpdate=!0,triangle.intersectsTriangle(triangle2))return!0}}else{const Ae=fe+8,Se=_e[fe+6];return arrayToBox(Ae,ye,boundingBox),!!(xe.intersectsBox(boundingBox)&&_intersectsGeometry(Ae,K,me,ge,xe)||(arrayToBox(Se,ye,boundingBox),xe.intersectsBox(boundingBox)&&_intersectsGeometry(Se,K,me,ge,xe)))}}const tempMatrix$1=new Matrix4,obb$1=new OrientedBox,obb2=new OrientedBox,temp1=new Vector3,temp2=new Vector3,temp3=new Vector3,temp4=new Vector3;function closestPointToGeometry_indirect(fe,K,me,ge={},xe={},ye=0,ve=1/0){K.boundingBox||K.computeBoundingBox(),obb$1.set(K.boundingBox.min,K.boundingBox.max,me),obb$1.needsUpdate=!0;const _e=fe.geometry,Ee=_e.attributes.position,be=_e.index,Ae=K.attributes.position,Se=K.index,Ce=ExtendedTrianglePool.getPrimitive(),Te=ExtendedTrianglePool.getPrimitive();let Re=temp1,De=temp2,Ie=null,Be=null;xe&&(Ie=temp3,Be=temp4);let Le=1/0,Oe=null,Fe=null;return tempMatrix$1.copy(me).invert(),obb2.matrix.copy(tempMatrix$1),fe.shapecast({boundsTraverseOrder:Ue=>obb$1.distanceToBox(Ue),intersectsBounds:(Ue,Ne,He)=>He<Le&&He<ve?(Ne&&(obb2.min.copy(Ue.min),obb2.max.copy(Ue.max),obb2.needsUpdate=!0),!0):!1,intersectsRange:(Ue,Ne)=>{if(K.boundsTree){const He=K.boundsTree;return He.shapecast({boundsTraverseOrder:ze=>obb2.distanceToBox(ze),intersectsBounds:(ze,je,Ge)=>Ge<Le&&Ge<ve,intersectsRange:(ze,je)=>{for(let Ge=ze,Xe=ze+je;Ge<Xe;Ge++){const qe=He.resolveTriangleIndex(Ge);setTriangle(Te,3*qe,Se,Ae),Te.a.applyMatrix4(me),Te.b.applyMatrix4(me),Te.c.applyMatrix4(me),Te.needsUpdate=!0;for(let Qe=Ue,nt=Ue+Ne;Qe<nt;Qe++){const Nt=fe.resolveTriangleIndex(Qe);setTriangle(Ce,3*Nt,be,Ee),Ce.needsUpdate=!0;const Ye=Ce.distanceToTriangle(Te,Re,Ie);if(Ye<Le&&(De.copy(Re),Be&&Be.copy(Ie),Le=Ye,Oe=Qe,Fe=Ge),Ye<ye)return!0}}}})}else{const He=getTriCount(K);for(let ze=0,je=He;ze<je;ze++){setTriangle(Te,3*ze,Se,Ae),Te.a.applyMatrix4(me),Te.b.applyMatrix4(me),Te.c.applyMatrix4(me),Te.needsUpdate=!0;for(let Ge=Ue,Xe=Ue+Ne;Ge<Xe;Ge++){const qe=fe.resolveTriangleIndex(Ge);setTriangle(Ce,3*qe,be,Ee),Ce.needsUpdate=!0;const Qe=Ce.distanceToTriangle(Te,Re,Ie);if(Qe<Le&&(De.copy(Re),Be&&Be.copy(Ie),Le=Qe,Oe=Ge,Fe=ze),Qe<ye)return!0}}}}}),ExtendedTrianglePool.releasePrimitive(Ce),ExtendedTrianglePool.releasePrimitive(Te),Le===1/0?null:(ge.point?ge.point.copy(De):ge.point=De.clone(),ge.distance=Le,ge.faceIndex=Oe,xe&&(xe.point?xe.point.copy(Be):xe.point=Be.clone(),xe.point.applyMatrix4(tempMatrix$1),De.applyMatrix4(tempMatrix$1),xe.distance=De.sub(xe.point).length(),xe.faceIndex=Fe),ge)}function isSharedArrayBufferSupported(){return typeof SharedArrayBuffer<"u"}const _bufferStack1=new BufferStack.constructor,_bufferStack2=new BufferStack.constructor,_boxPool=new PrimitivePool(()=>new Box3),_leftBox1=new Box3,_rightBox1=new Box3,_leftBox2=new Box3,_rightBox2=new Box3;let _active=!1;function bvhcast(fe,K,me,ge){if(_active)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");_active=!0;const xe=fe._roots,ye=K._roots;let ve,_e=0,Ee=0;const be=new Matrix4().copy(me).invert();for(let Ae=0,Se=xe.length;Ae<Se;Ae++){_bufferStack1.setBuffer(xe[Ae]),Ee=0;const Ce=_boxPool.getPrimitive();arrayToBox(0,_bufferStack1.float32Array,Ce),Ce.applyMatrix4(be);for(let Te=0,Re=ye.length;Te<Re&&(_bufferStack2.setBuffer(ye[Te]),ve=_traverse(0,0,me,be,ge,_e,Ee,0,0,Ce),_bufferStack2.clearBuffer(),Ee+=ye[Te].length,!ve);Te++);if(_boxPool.releasePrimitive(Ce),_bufferStack1.clearBuffer(),_e+=xe[Ae].length,ve)break}return _active=!1,ve}function _traverse(fe,K,me,ge,xe,ye=0,ve=0,_e=0,Ee=0,be=null,Ae=!1){let Se,Ce;Ae?(Se=_bufferStack2,Ce=_bufferStack1):(Se=_bufferStack1,Ce=_bufferStack2);const Te=Se.float32Array,Re=Se.uint32Array,De=Se.uint16Array,Ie=Ce.float32Array,Be=Ce.uint32Array,Le=Ce.uint16Array,Oe=fe*2,Fe=K*2,Ue=IS_LEAF(Oe,De),Ne=IS_LEAF(Fe,Le);let He=!1;if(Ne&&Ue)Ae?He=xe(OFFSET(K,Be),COUNT(K*2,Le),OFFSET(fe,Re),COUNT(fe*2,De),Ee,ve+K,_e,ye+fe):He=xe(OFFSET(fe,Re),COUNT(fe*2,De),OFFSET(K,Be),COUNT(K*2,Le),_e,ye+fe,Ee,ve+K);else if(Ne){const ze=_boxPool.getPrimitive();arrayToBox(K,Ie,ze),ze.applyMatrix4(me);const je=LEFT_NODE(fe),Ge=RIGHT_NODE(fe,Re);arrayToBox(je,Te,_leftBox1),arrayToBox(Ge,Te,_rightBox1);const Xe=ze.intersectsBox(_leftBox1),qe=ze.intersectsBox(_rightBox1);He=Xe&&_traverse(K,je,ge,me,xe,ve,ye,Ee,_e+1,ze,!Ae)||qe&&_traverse(K,Ge,ge,me,xe,ve,ye,Ee,_e+1,ze,!Ae),_boxPool.releasePrimitive(ze)}else{const ze=LEFT_NODE(K),je=RIGHT_NODE(K,Be);arrayToBox(ze,Ie,_leftBox2),arrayToBox(je,Ie,_rightBox2);const Ge=be.intersectsBox(_leftBox2),Xe=be.intersectsBox(_rightBox2);if(Ge&&Xe)He=_traverse(fe,ze,me,ge,xe,ye,ve,_e,Ee+1,be,Ae)||_traverse(fe,je,me,ge,xe,ye,ve,_e,Ee+1,be,Ae);else if(Ge)if(Ue)He=_traverse(fe,ze,me,ge,xe,ye,ve,_e,Ee+1,be,Ae);else{const qe=_boxPool.getPrimitive();qe.copy(_leftBox2).applyMatrix4(me);const Qe=LEFT_NODE(fe),nt=RIGHT_NODE(fe,Re);arrayToBox(Qe,Te,_leftBox1),arrayToBox(nt,Te,_rightBox1);const Nt=qe.intersectsBox(_leftBox1),Ye=qe.intersectsBox(_rightBox1);He=Nt&&_traverse(ze,Qe,ge,me,xe,ve,ye,Ee,_e+1,qe,!Ae)||Ye&&_traverse(ze,nt,ge,me,xe,ve,ye,Ee,_e+1,qe,!Ae),_boxPool.releasePrimitive(qe)}else if(Xe)if(Ue)He=_traverse(fe,je,me,ge,xe,ye,ve,_e,Ee+1,be,Ae);else{const qe=_boxPool.getPrimitive();qe.copy(_rightBox2).applyMatrix4(me);const Qe=LEFT_NODE(fe),nt=RIGHT_NODE(fe,Re);arrayToBox(Qe,Te,_leftBox1),arrayToBox(nt,Te,_rightBox1);const Nt=qe.intersectsBox(_leftBox1),Ye=qe.intersectsBox(_rightBox1);He=Nt&&_traverse(je,Qe,ge,me,xe,ve,ye,Ee,_e+1,qe,!Ae)||Ye&&_traverse(je,nt,ge,me,xe,ve,ye,Ee,_e+1,qe,!Ae),_boxPool.releasePrimitive(qe)}}return He}const obb=new OrientedBox,tempBox=new Box3,DEFAULT_OPTIONS={strategy:CENTER,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null};class MeshBVH{static serialize(K,me={}){me={cloneBuffers:!0,...me};const ge=K.geometry,xe=K._roots,ye=K._indirectBuffer,ve=ge.getIndex();let _e;return me.cloneBuffers?_e={roots:xe.map(Ee=>Ee.slice()),index:ve?ve.array.slice():null,indirectBuffer:ye?ye.slice():null}:_e={roots:xe,index:ve?ve.array:null,indirectBuffer:ye},_e}static deserialize(K,me,ge={}){ge={setIndex:!0,indirect:!!K.indirectBuffer,...ge};const{index:xe,roots:ye,indirectBuffer:ve}=K,_e=new MeshBVH(me,{...ge,[SKIP_GENERATION]:!0});if(_e._roots=ye,_e._indirectBuffer=ve||null,ge.setIndex){const Ee=me.getIndex();if(Ee===null){const be=new BufferAttribute(K.index,1,!1);me.setIndex(be)}else Ee.array!==xe&&(Ee.array.set(xe),Ee.needsUpdate=!0)}return _e}get indirect(){return!!this._indirectBuffer}constructor(K,me={}){if(K.isBufferGeometry){if(K.index&&K.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(me=Object.assign({...DEFAULT_OPTIONS,[SKIP_GENERATION]:!1},me),me.useSharedArrayBuffer&&!isSharedArrayBufferSupported())throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=K,this._roots=null,this._indirectBuffer=null,me[SKIP_GENERATION]||(buildPackedTree(this,me),!K.boundingBox&&me.setBoundingBox&&(K.boundingBox=this.getBoundingBox(new Box3))),this.resolveTriangleIndex=me.indirect?ge=>this._indirectBuffer[ge]:ge=>ge}refit(K=null){return(this.indirect?refit_indirect:refit)(this,K)}traverse(K,me=0){const ge=this._roots[me],xe=new Uint32Array(ge),ye=new Uint16Array(ge);ve(0);function ve(_e,Ee=0){const be=_e*2,Ae=ye[be+15]===IS_LEAFNODE_FLAG;if(Ae){const Se=xe[_e+6],Ce=ye[be+14];K(Ee,Ae,new Float32Array(ge,_e*4,6),Se,Ce)}else{const Se=_e+BYTES_PER_NODE/4,Ce=xe[_e+6],Te=xe[_e+7];K(Ee,Ae,new Float32Array(ge,_e*4,6),Te)||(ve(Se,Ee+1),ve(Ce,Ee+1))}}}raycast(K,me=FrontSide,ge=0,xe=1/0){const ye=this._roots,ve=this.geometry,_e=[],Ee=me.isMaterial,be=Array.isArray(me),Ae=ve.groups,Se=Ee?me.side:me,Ce=this.indirect?raycast_indirect:raycast;for(let Te=0,Re=ye.length;Te<Re;Te++){const De=be?me[Ae[Te].materialIndex].side:Se,Ie=_e.length;if(Ce(this,Te,De,K,_e,ge,xe),be){const Be=Ae[Te].materialIndex;for(let Le=Ie,Oe=_e.length;Le<Oe;Le++)_e[Le].face.materialIndex=Be}}return _e}raycastFirst(K,me=FrontSide,ge=0,xe=1/0){const ye=this._roots,ve=this.geometry,_e=me.isMaterial,Ee=Array.isArray(me);let be=null;const Ae=ve.groups,Se=_e?me.side:me,Ce=this.indirect?raycastFirst_indirect:raycastFirst;for(let Te=0,Re=ye.length;Te<Re;Te++){const De=Ee?me[Ae[Te].materialIndex].side:Se,Ie=Ce(this,Te,De,K,ge,xe);Ie!=null&&(be==null||Ie.distance<be.distance)&&(be=Ie,Ee&&(Ie.face.materialIndex=Ae[Te].materialIndex))}return be}intersectsGeometry(K,me){let ge=!1;const xe=this._roots,ye=this.indirect?intersectsGeometry_indirect:intersectsGeometry;for(let ve=0,_e=xe.length;ve<_e&&(ge=ye(this,ve,K,me),!ge);ve++);return ge}shapecast(K){const me=ExtendedTrianglePool.getPrimitive(),ge=this.indirect?iterateOverTriangles_indirect:iterateOverTriangles;let{boundsTraverseOrder:xe,intersectsBounds:ye,intersectsRange:ve,intersectsTriangle:_e}=K;if(ve&&_e){const Se=ve;ve=(Ce,Te,Re,De,Ie)=>Se(Ce,Te,Re,De,Ie)?!0:ge(Ce,Te,this,_e,Re,De,me)}else ve||(_e?ve=(Se,Ce,Te,Re)=>ge(Se,Ce,this,_e,Te,Re,me):ve=(Se,Ce,Te)=>Te);let Ee=!1,be=0;const Ae=this._roots;for(let Se=0,Ce=Ae.length;Se<Ce;Se++){const Te=Ae[Se];if(Ee=shapecast(this,Se,ye,ve,xe,be),Ee)break;be+=Te.byteLength}return ExtendedTrianglePool.releasePrimitive(me),Ee}bvhcast(K,me,ge){let{intersectsRanges:xe,intersectsTriangles:ye}=ge;const ve=ExtendedTrianglePool.getPrimitive(),_e=this.geometry.index,Ee=this.geometry.attributes.position,be=this.indirect?Re=>{const De=this.resolveTriangleIndex(Re);setTriangle(ve,De*3,_e,Ee)}:Re=>{setTriangle(ve,Re*3,_e,Ee)},Ae=ExtendedTrianglePool.getPrimitive(),Se=K.geometry.index,Ce=K.geometry.attributes.position,Te=K.indirect?Re=>{const De=K.resolveTriangleIndex(Re);setTriangle(Ae,De*3,Se,Ce)}:Re=>{setTriangle(Ae,Re*3,Se,Ce)};if(ye){const Re=(De,Ie,Be,Le,Oe,Fe,Ue,Ne)=>{for(let He=Be,ze=Be+Le;He<ze;He++){Te(He),Ae.a.applyMatrix4(me),Ae.b.applyMatrix4(me),Ae.c.applyMatrix4(me),Ae.needsUpdate=!0;for(let je=De,Ge=De+Ie;je<Ge;je++)if(be(je),ve.needsUpdate=!0,ye(ve,Ae,je,He,Oe,Fe,Ue,Ne))return!0}return!1};if(xe){const De=xe;xe=function(Ie,Be,Le,Oe,Fe,Ue,Ne,He){return De(Ie,Be,Le,Oe,Fe,Ue,Ne,He)?!0:Re(Ie,Be,Le,Oe,Fe,Ue,Ne,He)}}else xe=Re}return bvhcast(this,K,me,xe)}intersectsBox(K,me){return obb.set(K.min,K.max,me),obb.needsUpdate=!0,this.shapecast({intersectsBounds:ge=>obb.intersectsBox(ge),intersectsTriangle:ge=>obb.intersectsTriangle(ge)})}intersectsSphere(K){return this.shapecast({intersectsBounds:me=>K.intersectsBox(me),intersectsTriangle:me=>me.intersectsSphere(K)})}closestPointToGeometry(K,me,ge={},xe={},ye=0,ve=1/0){return(this.indirect?closestPointToGeometry_indirect:closestPointToGeometry)(this,K,me,ge,xe,ye,ve)}closestPointToPoint(K,me={},ge=0,xe=1/0){return closestPointToPoint(this,K,me,ge,xe)}getBoundingBox(K){return K.makeEmpty(),this._roots.forEach(ge=>{arrayToBox(0,new Float32Array(ge),tempBox),K.union(tempBox)}),K}}function convertRaycastIntersect(fe,K,me){return fe===null?null:(fe.point.applyMatrix4(K.matrixWorld),fe.distance=fe.point.distanceTo(me.ray.origin),fe.object=K,fe)}const ray$2=new Ray,direction=new Vector3,tmpInverseMatrix=new Matrix4,origMeshRaycastFunc=Mesh.prototype.raycast,origBatchedRaycastFunc=BatchedMesh$1.prototype.raycast,_worldScale=new Vector3,_mesh$1=new Mesh,_batchIntersects=[];function acceleratedRaycast(fe,K){this.isBatchedMesh?acceleratedBatchedMeshRaycast.call(this,fe,K):acceleratedMeshRaycast.call(this,fe,K)}function acceleratedBatchedMeshRaycast(fe,K){if(this.boundsTrees){const me=this.boundsTrees,ge=this._drawInfo||this._instanceInfo,xe=this._drawRanges||this._geometryInfo,ye=this.matrixWorld;_mesh$1.material=this.material,_mesh$1.geometry=this.geometry;const ve=_mesh$1.geometry.boundsTree,_e=_mesh$1.geometry.drawRange;_mesh$1.geometry.boundingSphere===null&&(_mesh$1.geometry.boundingSphere=new Sphere);for(let Ee=0,be=ge.length;Ee<be;Ee++){if(!this.getVisibleAt(Ee))continue;const Ae=ge[Ee].geometryIndex;if(_mesh$1.geometry.boundsTree=me[Ae],this.getMatrixAt(Ee,_mesh$1.matrixWorld).premultiply(ye),!_mesh$1.geometry.boundsTree){this.getBoundingBoxAt(Ae,_mesh$1.geometry.boundingBox),this.getBoundingSphereAt(Ae,_mesh$1.geometry.boundingSphere);const Se=xe[Ae];_mesh$1.geometry.setDrawRange(Se.start,Se.count)}_mesh$1.raycast(fe,_batchIntersects);for(let Se=0,Ce=_batchIntersects.length;Se<Ce;Se++){const Te=_batchIntersects[Se];Te.object=this,Te.batchId=Ee,K.push(Te)}_batchIntersects.length=0}_mesh$1.geometry.boundsTree=ve,_mesh$1.geometry.drawRange=_e,_mesh$1.material=null,_mesh$1.geometry=null}else origBatchedRaycastFunc.call(this,fe,K)}function acceleratedMeshRaycast(fe,K){if(this.geometry.boundsTree){if(this.material===void 0)return;tmpInverseMatrix.copy(this.matrixWorld).invert(),ray$2.copy(fe.ray).applyMatrix4(tmpInverseMatrix),_worldScale.setFromMatrixScale(this.matrixWorld),direction.copy(ray$2.direction).multiply(_worldScale);const me=direction.length(),ge=fe.near/me,xe=fe.far/me,ye=this.geometry.boundsTree;if(fe.firstHitOnly===!0){const ve=convertRaycastIntersect(ye.raycastFirst(ray$2,this.material,ge,xe),this,fe);ve&&K.push(ve)}else{const ve=ye.raycast(ray$2,this.material,ge,xe);for(let _e=0,Ee=ve.length;_e<Ee;_e++){const be=convertRaycastIntersect(ve[_e],this,fe);be&&K.push(be)}}}else origMeshRaycastFunc.call(this,fe,K)}function computeBoundsTree(fe={}){return this.boundsTree=new MeshBVH(this,fe),this.boundsTree}function disposeBoundsTree(){this.boundsTree=null}const isMesh=fe=>fe.isMesh,Bvh=reactExports.forwardRef(({enabled:fe=!0,firstHitOnly:K=!1,children:me,strategy:ge=SAH,verbose:xe=!1,setBoundingBox:ye=!0,maxDepth:ve=40,maxLeafTris:_e=10,indirect:Ee=!1,...be},Ae)=>{const Se=reactExports.useRef(null),Ce=useThree(Te=>Te.raycaster);return reactExports.useImperativeHandle(Ae,()=>Se.current,[]),reactExports.useEffect(()=>{if(fe){const Te={strategy:ge,verbose:xe,setBoundingBox:ye,maxDepth:ve,maxLeafTris:_e,indirect:Ee},Re=Se.current;return Ce.firstHitOnly=K,Re.traverse(De=>{isMesh(De)&&!De.geometry.boundsTree&&De.raycast===Mesh.prototype.raycast&&(De.raycast=acceleratedRaycast,De.geometry.computeBoundsTree=computeBoundsTree,De.geometry.disposeBoundsTree=disposeBoundsTree,De.geometry.computeBoundsTree(Te))}),()=>{delete Ce.firstHitOnly,Re.traverse(De=>{isMesh(De)&&De.geometry.boundsTree&&(De.geometry.disposeBoundsTree(),De.raycast=Mesh.prototype.raycast)})}}},[]),reactExports.createElement("group",_extends$2({ref:Se},be),me)}),setUpdateRange=(fe,K)=>{fe.updateRanges[0]=K};function isFunctionChild(fe){return typeof fe=="function"}const _instanceLocalMatrix=new Matrix4,_instanceWorldMatrix=new Matrix4,_instanceIntersects=[],_mesh=new Mesh;class PositionMesh extends Group{constructor(){super(),this.color=new Color$1("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var K;return(K=this.instance.current)==null?void 0:K.geometry}raycast(K,me){const ge=this.instance.current;if(!ge||!ge.geometry||!ge.material)return;_mesh.geometry=ge.geometry;const xe=ge.matrixWorld,ye=ge.userData.instances.indexOf(this.instanceKey);if(!(ye===-1||ye>ge.count)){ge.getMatrixAt(ye,_instanceLocalMatrix),_instanceWorldMatrix.multiplyMatrices(xe,_instanceLocalMatrix),_mesh.matrixWorld=_instanceWorldMatrix,ge.material instanceof Material?_mesh.material.side=ge.material.side:_mesh.material.side=ge.material[0].side,_mesh.raycast(K,_instanceIntersects);for(let ve=0,_e=_instanceIntersects.length;ve<_e;ve++){const Ee=_instanceIntersects[ve];Ee.instanceId=ye,Ee.object=this,me.push(Ee)}_instanceIntersects.length=0}}}const globalContext=reactExports.createContext(null),parentMatrix=new Matrix4,instanceMatrix=new Matrix4,tempMatrix=new Matrix4,translation=new Vector3,rotation=new Quaternion,scale=new Vector3,isInstancedBufferAttribute=fe=>fe.isInstancedBufferAttribute,Instance=reactExports.forwardRef(({context:fe,children:K,...me},ge)=>{reactExports.useMemo(()=>extend$3({PositionMesh}),[]);const xe=reactExports.useRef(null);reactExports.useImperativeHandle(ge,()=>xe.current,[]);const{subscribe:ye,getParent:ve}=reactExports.useContext(fe||globalContext);return reactExports.useLayoutEffect(()=>ye(xe),[]),reactExports.createElement("positionMesh",_extends$2({instance:ve(),instanceKey:xe,ref:xe},me),K)}),Instances=reactExports.forwardRef(({context:fe,children:K,range:me,limit:ge=1e3,frames:xe=1/0,...ye},ve)=>{const[{localContext:_e,instance:Ee}]=reactExports.useState(()=>{const Le=reactExports.createContext(null);return{localContext:Le,instance:reactExports.forwardRef((Oe,Fe)=>reactExports.createElement(Instance,_extends$2({context:Le},Oe,{ref:Fe})))}}),be=reactExports.useRef(null);reactExports.useImperativeHandle(ve,()=>be.current,[]);const[Ae,Se]=reactExports.useState([]),[[Ce,Te]]=reactExports.useState(()=>{const Le=new Float32Array(ge*16);for(let Oe=0;Oe<ge;Oe++)tempMatrix.identity().toArray(Le,Oe*16);return[Le,new Float32Array([...new Array(ge*3)].map(()=>1))]});reactExports.useEffect(()=>{be.current.instanceMatrix.needsUpdate=!0});let Re=0,De=0;const Ie=reactExports.useRef([]);reactExports.useLayoutEffect(()=>{Ie.current=Object.entries(be.current.geometry.attributes).filter(([Le,Oe])=>isInstancedBufferAttribute(Oe))}),useFrame(()=>{if(xe===1/0||Re<xe){be.current.updateMatrix(),be.current.updateMatrixWorld(),parentMatrix.copy(be.current.matrixWorld).invert(),De=Math.min(ge,me!==void 0?me:ge,Ae.length),be.current.count=De,setUpdateRange(be.current.instanceMatrix,{start:0,count:De*16}),setUpdateRange(be.current.instanceColor,{start:0,count:De*3});for(let Le=0;Le<Ae.length;Le++){const Oe=Ae[Le].current;Oe.matrixWorld.decompose(translation,rotation,scale),instanceMatrix.compose(translation,rotation,scale).premultiply(parentMatrix),instanceMatrix.toArray(Ce,Le*16),be.current.instanceMatrix.needsUpdate=!0,Oe.color.toArray(Te,Le*3),be.current.instanceColor.needsUpdate=!0}Re++}});const Be=reactExports.useMemo(()=>({getParent:()=>be,subscribe:Le=>(Se(Oe=>[...Oe,Le]),()=>Se(Oe=>Oe.filter(Fe=>Fe.current!==Le.current)))}),[]);return reactExports.createElement("instancedMesh",_extends$2({userData:{instances:Ae,limit:ge,frames:xe},matrixAutoUpdate:!1,ref:be,args:[null,null,0],raycast:()=>null},ye),reactExports.createElement("instancedBufferAttribute",{attach:"instanceMatrix",args:[Ce,16],usage:DynamicDrawUsage}),reactExports.createElement("instancedBufferAttribute",{attach:"instanceColor",args:[Te,3],usage:DynamicDrawUsage}),isFunctionChild(K)?reactExports.createElement(_e.Provider,{value:Be},K(Ee)):fe?reactExports.createElement(fe.Provider,{value:Be},K):reactExports.createElement(globalContext.Provider,{value:Be},K))}),getBufferForType=(fe,K,me)=>{let ge;switch(fe){case UnsignedByteType:ge=new Uint8ClampedArray(K*me*4);break;case HalfFloatType:ge=new Uint16Array(K*me*4);break;case UnsignedIntType:ge=new Uint32Array(K*me*4);break;case ByteType:ge=new Int8Array(K*me*4);break;case ShortType:ge=new Int16Array(K*me*4);break;case IntType:ge=new Int32Array(K*me*4);break;case FloatType:ge=new Float32Array(K*me*4);break;default:throw new Error("Unsupported data type")}return ge};let _canReadPixelsResult;const canReadPixels=(fe,K,me,ge)=>{if(_canReadPixelsResult!==void 0)return _canReadPixelsResult;const xe=new WebGLRenderTarget(1,1,ge);K.setRenderTarget(xe);const ye=new Mesh(new PlaneGeometry,new MeshBasicMaterial({color:16777215}));K.render(ye,me),K.setRenderTarget(null);const ve=getBufferForType(fe,xe.width,xe.height);return K.readRenderTargetPixels(xe,0,0,xe.width,xe.height,ve),xe.dispose(),ye.geometry.dispose(),ye.material.dispose(),_canReadPixelsResult=ve[0]!==0,_canReadPixelsResult};class QuadRenderer{constructor(K){var me,ge,xe,ye,ve,_e,Ee,be,Ae,Se,Ce,Te,Re,De,Ie,Be;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(Oe){throw this._renderer.setRenderTarget(null),Oe}this._renderer.setRenderTarget(null)},this._width=K.width,this._height=K.height,this._type=K.type,this._colorSpace=K.colorSpace;const Le={format:RGBAFormat,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((me=K.renderTargetOptions)===null||me===void 0?void 0:me.anisotropy)!==void 0?(ge=K.renderTargetOptions)===null||ge===void 0?void 0:ge.anisotropy:1,generateMipmaps:((xe=K.renderTargetOptions)===null||xe===void 0?void 0:xe.generateMipmaps)!==void 0?(ye=K.renderTargetOptions)===null||ye===void 0?void 0:ye.generateMipmaps:!1,magFilter:((ve=K.renderTargetOptions)===null||ve===void 0?void 0:ve.magFilter)!==void 0?(_e=K.renderTargetOptions)===null||_e===void 0?void 0:_e.magFilter:LinearFilter,minFilter:((Ee=K.renderTargetOptions)===null||Ee===void 0?void 0:Ee.minFilter)!==void 0?(be=K.renderTargetOptions)===null||be===void 0?void 0:be.minFilter:LinearFilter,samples:((Ae=K.renderTargetOptions)===null||Ae===void 0?void 0:Ae.samples)!==void 0?(Se=K.renderTargetOptions)===null||Se===void 0?void 0:Se.samples:void 0,wrapS:((Ce=K.renderTargetOptions)===null||Ce===void 0?void 0:Ce.wrapS)!==void 0?(Te=K.renderTargetOptions)===null||Te===void 0?void 0:Te.wrapS:ClampToEdgeWrapping,wrapT:((Re=K.renderTargetOptions)===null||Re===void 0?void 0:Re.wrapT)!==void 0?(De=K.renderTargetOptions)===null||De===void 0?void 0:De.wrapT:ClampToEdgeWrapping};if(this._material=K.material,K.renderer?this._renderer=K.renderer:(this._renderer=QuadRenderer.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Scene,this._camera=new OrthographicCamera,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!canReadPixels(this._type,this._renderer,this._camera,Le)){let Oe;switch(this._type){case HalfFloatType:Oe=this._renderer.extensions.has("EXT_color_buffer_float")?FloatType:void 0;break}Oe!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${FloatType}`),this._type=Oe):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Mesh(new PlaneGeometry,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new WebGLRenderTarget(this.width,this.height,Le),this._renderTarget.texture.mapping=((Ie=K.renderTargetOptions)===null||Ie===void 0?void 0:Ie.mapping)!==void 0?(Be=K.renderTargetOptions)===null||Be===void 0?void 0:Be.mapping:UVMapping}static instantiateRenderer(){const K=new WebGLRenderer;return K.setSize(128,128),K}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const K=getBufferForType(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,K),K}toDataTexture(K){const me=new DataTexture(this.toArray(),this.width,this.height,RGBAFormat,this._type,K?.mapping||UVMapping,K?.wrapS||ClampToEdgeWrapping,K?.wrapT||ClampToEdgeWrapping,K?.magFilter||LinearFilter,K?.minFilter||LinearFilter,K?.anisotropy||1,LinearSRGBColorSpace);return me.generateMipmaps=K?.generateMipmaps!==void 0?K?.generateMipmaps:!1,me}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(K){this.disposeOnDemandRenderer(),K&&this.renderTarget.dispose(),this.material instanceof ShaderMaterial&&Object.values(this.material.uniforms).forEach(me=>{me.value instanceof Texture&&me.value.dispose()}),Object.values(this.material).forEach(me=>{me instanceof Texture&&me.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(K){this._width=K,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(K){this._height=K,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(K){this._renderTarget=K,this._width=K.width,this._height=K.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const vertexShader=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,fragmentShader=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class GainMapDecoderMaterial extends ShaderMaterial{constructor({gamma:K,offsetHdr:me,offsetSdr:ge,gainMapMin:xe,gainMapMax:ye,maxDisplayBoost:ve,hdrCapacityMin:_e,hdrCapacityMax:Ee,sdr:be,gainMap:Ae}){super({name:"GainMapDecoderMaterial",vertexShader,fragmentShader,uniforms:{sdr:{value:be},gainMap:{value:Ae},gamma:{value:new Vector3(1/K[0],1/K[1],1/K[2])},offsetHdr:{value:new Vector3().fromArray(me)},offsetSdr:{value:new Vector3().fromArray(ge)},gainMapMin:{value:new Vector3().fromArray(xe)},gainMapMax:{value:new Vector3().fromArray(ye)},weightFactor:{value:(Math.log2(ve)-_e)/(Ee-_e)}},blending:NoBlending,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=ve,this._hdrCapacityMin=_e,this._hdrCapacityMax=Ee,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(K){this.uniforms.sdr.value=K}get gainMap(){return this.uniforms.gainMap.value}set gainMap(K){this.uniforms.gainMap.value=K}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(K){this.uniforms.offsetHdr.value.fromArray(K)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(K){this.uniforms.offsetSdr.value.fromArray(K)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(K){this.uniforms.gainMapMin.value.fromArray(K)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(K){this.uniforms.gainMapMax.value.fromArray(K)}get gamma(){const K=this.uniforms.gamma.value;return[1/K.x,1/K.y,1/K.z]}set gamma(K){const me=this.uniforms.gamma.value;me.x=1/K[0],me.y=1/K[1],me.z=1/K[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(K){this._hdrCapacityMin=K,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(K){this._hdrCapacityMax=K,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(K){this._maxDisplayBoost=Math.max(1,Math.min(65504,K)),this.calculateWeight()}calculateWeight(){const K=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,K))}}class GainMapNotFoundError extends Error{}class XMPMetadataNotFoundError extends Error{}const getXMLValue=(fe,K,me)=>{const ge=new RegExp(`${K}="([^"]*)"`,"i").exec(fe);if(ge)return ge[1];const xe=new RegExp(`<${K}[^>]*>([\\s\\S]*?)</${K}>`,"i").exec(fe);if(xe){const ye=xe[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return ye&&ye.length===3?ye.map(ve=>ve.replace(/<\/?rdf:li>/g,"")):xe[1].trim()}if(me!==void 0)return me;throw new Error(`Can't find ${K} in gainmap metadata`)},extractXMP=fe=>{let K;typeof TextDecoder<"u"?K=new TextDecoder().decode(fe):K=fe.toString();let me=K.indexOf("<x:xmpmeta");for(;me!==-1;){const ge=K.indexOf("x:xmpmeta>",me),xe=K.slice(me,ge+10);try{const ye=getXMLValue(xe,"hdrgm:GainMapMin","0"),ve=getXMLValue(xe,"hdrgm:GainMapMax"),_e=getXMLValue(xe,"hdrgm:Gamma","1"),Ee=getXMLValue(xe,"hdrgm:OffsetSDR","0.015625"),be=getXMLValue(xe,"hdrgm:OffsetHDR","0.015625"),Ae=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(xe),Se=Ae?Ae[1]:"0",Ce=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(xe);if(!Ce)throw new Error("Incomplete gainmap metadata");const Te=Ce[1];return{gainMapMin:Array.isArray(ye)?ye.map(Re=>parseFloat(Re)):[parseFloat(ye),parseFloat(ye),parseFloat(ye)],gainMapMax:Array.isArray(ve)?ve.map(Re=>parseFloat(Re)):[parseFloat(ve),parseFloat(ve),parseFloat(ve)],gamma:Array.isArray(_e)?_e.map(Re=>parseFloat(Re)):[parseFloat(_e),parseFloat(_e),parseFloat(_e)],offsetSdr:Array.isArray(Ee)?Ee.map(Re=>parseFloat(Re)):[parseFloat(Ee),parseFloat(Ee),parseFloat(Ee)],offsetHdr:Array.isArray(be)?be.map(Re=>parseFloat(Re)):[parseFloat(be),parseFloat(be),parseFloat(be)],hdrCapacityMin:parseFloat(Se),hdrCapacityMax:parseFloat(Te)}}catch{}me=K.indexOf("<x:xmpmeta",ge)}};class MPFExtractor{constructor(K){this.options={debug:K&&K.debug!==void 0?K.debug:!1,extractFII:K&&K.extractFII!==void 0?K.extractFII:!0,extractNonFII:K&&K.extractNonFII!==void 0?K.extractNonFII:!0}}extract(K){return new Promise((me,ge)=>{const xe=this.options.debug,ye=new DataView(K.buffer);if(ye.getUint16(0)!==65496){ge(new Error("Not a valid jpeg"));return}const ve=ye.byteLength;let _e=2,Ee=0,be;for(;_e<ve;){if(++Ee>250){ge(new Error(`Found no marker after ${Ee} loops 😵`));return}if(ye.getUint8(_e)!==255){ge(new Error(`Not a valid marker at offset 0x${_e.toString(16)}, found: 0x${ye.getUint8(_e).toString(16)}`));return}if(be=ye.getUint8(_e+1),xe&&console.log(`Marker: ${be.toString(16)}`),be===226){xe&&console.log("Found APP2 marker (0xffe2)");const Ae=_e+4;if(ye.getUint32(Ae)===1297106432){const Se=Ae+4;let Ce;if(ye.getUint16(Se)===18761)Ce=!1;else if(ye.getUint16(Se)===19789)Ce=!0;else{ge(new Error("No valid endianness marker found in TIFF header"));return}if(ye.getUint16(Se+2,!Ce)!==42){ge(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const Te=ye.getUint32(Se+4,!Ce);if(Te<8){ge(new Error("Not valid TIFF data! (First offset less than 8)"));return}const Re=Se+Te,De=ye.getUint16(Re,!Ce),Ie=Re+2;let Be=0;for(let Ue=Ie;Ue<Ie+12*De;Ue+=12)ye.getUint16(Ue,!Ce)===45057&&(Be=ye.getUint32(Ue+8,!Ce));const Oe=Re+2+De*12+4,Fe=[];for(let Ue=Oe;Ue<Oe+Be*16;Ue+=16){const Ne={MPType:ye.getUint32(Ue,!Ce),size:ye.getUint32(Ue+4,!Ce),dataOffset:ye.getUint32(Ue+8,!Ce),dependantImages:ye.getUint32(Ue+12,!Ce),start:-1,end:-1,isFII:!1};Ne.dataOffset?(Ne.start=Se+Ne.dataOffset,Ne.isFII=!1):(Ne.start=0,Ne.isFII=!0),Ne.end=Ne.start+Ne.size,Fe.push(Ne)}if(this.options.extractNonFII&&Fe.length){const Ue=new Blob([ye]),Ne=[];for(const He of Fe){if(He.isFII&&!this.options.extractFII)continue;const ze=Ue.slice(He.start,He.end+1,"image/jpeg");Ne.push(ze)}me(Ne)}}}_e+=2+ye.getUint16(_e+2)}})}}const extractGainmapFromJPEG=async fe=>{const K=extractXMP(fe);if(!K)throw new XMPMetadataNotFoundError("Gain map XMP metadata not found");const ge=await new MPFExtractor({extractFII:!0,extractNonFII:!0}).extract(fe);if(ge.length!==2)throw new GainMapNotFoundError("Gain map recovery image not found");return{sdr:new Uint8Array(await ge[0].arrayBuffer()),gainMap:new Uint8Array(await ge[1].arrayBuffer()),metadata:K}},getHTMLImageFromBlob=fe=>new Promise((K,me)=>{const ge=document.createElement("img");ge.onload=()=>{K(ge)},ge.onerror=xe=>{me(xe)},ge.src=URL.createObjectURL(fe)});class LoaderBase extends Loader{constructor(K,me){super(me),K&&(this._renderer=K),this._internalLoadingManager=new LoadingManager}setRenderer(K){return this._renderer=K,this}setRenderTargetOptions(K){return this._renderTargetOptions=K,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const K=new GainMapDecoderMaterial({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Texture,sdr:new Texture});return new QuadRenderer({width:16,height:16,type:HalfFloatType,colorSpace:LinearSRGBColorSpace,material:K,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(K,me,ge,xe){const ye=xe?new Blob([xe],{type:"image/jpeg"}):void 0,ve=new Blob([ge],{type:"image/jpeg"});let _e,Ee,be=!1;if(typeof createImageBitmap>"u"){const Ce=await Promise.all([ye?getHTMLImageFromBlob(ye):Promise.resolve(void 0),getHTMLImageFromBlob(ve)]);Ee=Ce[0],_e=Ce[1],be=!0}else{const Ce=await Promise.all([ye?createImageBitmap(ye,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(ve,{imageOrientation:"flipY"})]);Ee=Ce[0],_e=Ce[1]}const Ae=new Texture(Ee||new ImageData(2,2),UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,LinearSRGBColorSpace);Ae.flipY=be,Ae.needsUpdate=!0;const Se=new Texture(_e,UVMapping,ClampToEdgeWrapping,ClampToEdgeWrapping,LinearFilter,LinearMipMapLinearFilter,RGBAFormat,UnsignedByteType,1,SRGBColorSpace);Se.flipY=be,Se.needsUpdate=!0,K.width=_e.width,K.height=_e.height,K.material.gainMap=Ae,K.material.sdr=Se,K.material.gainMapMin=me.gainMapMin,K.material.gainMapMax=me.gainMapMax,K.material.offsetHdr=me.offsetHdr,K.material.offsetSdr=me.offsetSdr,K.material.gamma=me.gamma,K.material.hdrCapacityMin=me.hdrCapacityMin,K.material.hdrCapacityMax=me.hdrCapacityMax,K.material.maxDisplayBoost=Math.pow(2,me.hdrCapacityMax),K.material.needsUpdate=!0,K.render()}}class GainMapLoader extends LoaderBase{load([K,me,ge],xe,ye,ve){const _e=this.prepareQuadRenderer();let Ee,be,Ae;const Se=async()=>{if(Ee&&be&&Ae){try{await this.render(_e,Ae,Ee,be)}catch(je){this.manager.itemError(K),this.manager.itemError(me),this.manager.itemError(ge),typeof ve=="function"&&ve(je),_e.disposeOnDemandRenderer();return}typeof xe=="function"&&xe(_e),this.manager.itemEnd(K),this.manager.itemEnd(me),this.manager.itemEnd(ge),_e.disposeOnDemandRenderer()}};let Ce=!0,Te=0,Re=0,De=!0,Ie=0,Be=0,Le=!0,Oe=0,Fe=0;const Ue=()=>{if(typeof ye=="function"){const je=Te+Ie+Oe,Ge=Re+Be+Fe,Xe=Ce&&De&&Le;ye(new ProgressEvent("progress",{lengthComputable:Xe,loaded:Ge,total:je}))}};this.manager.itemStart(K),this.manager.itemStart(me),this.manager.itemStart(ge);const Ne=new FileLoader(this._internalLoadingManager);Ne.setResponseType("arraybuffer"),Ne.setRequestHeader(this.requestHeader),Ne.setPath(this.path),Ne.setWithCredentials(this.withCredentials),Ne.load(K,async je=>{if(typeof je=="string")throw new Error("Invalid sdr buffer");Ee=je,await Se()},je=>{Ce=je.lengthComputable,Re=je.loaded,Te=je.total,Ue()},je=>{this.manager.itemError(K),typeof ve=="function"&&ve(je)});const He=new FileLoader(this._internalLoadingManager);He.setResponseType("arraybuffer"),He.setRequestHeader(this.requestHeader),He.setPath(this.path),He.setWithCredentials(this.withCredentials),He.load(me,async je=>{if(typeof je=="string")throw new Error("Invalid gainmap buffer");be=je,await Se()},je=>{De=je.lengthComputable,Be=je.loaded,Ie=je.total,Ue()},je=>{this.manager.itemError(me),typeof ve=="function"&&ve(je)});const ze=new FileLoader(this._internalLoadingManager);return ze.setRequestHeader(this.requestHeader),ze.setPath(this.path),ze.setWithCredentials(this.withCredentials),ze.load(ge,async je=>{if(typeof je!="string")throw new Error("Invalid metadata string");Ae=JSON.parse(je),await Se()},je=>{Le=je.lengthComputable,Fe=je.loaded,Oe=je.total,Ue()},je=>{this.manager.itemError(ge),typeof ve=="function"&&ve(je)}),_e}}class HDRJPGLoader extends LoaderBase{load(K,me,ge,xe){const ye=this.prepareQuadRenderer(),ve=new FileLoader(this._internalLoadingManager);return ve.setResponseType("arraybuffer"),ve.setRequestHeader(this.requestHeader),ve.setPath(this.path),ve.setWithCredentials(this.withCredentials),this.manager.itemStart(K),ve.load(K,async _e=>{if(typeof _e=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const Ee=new Uint8Array(_e);let be,Ae,Se;try{const Ce=await extractGainmapFromJPEG(Ee);be=Ce.sdr,Ae=Ce.gainMap,Se=Ce.metadata}catch(Ce){if(Ce instanceof XMPMetadataNotFoundError||Ce instanceof GainMapNotFoundError)console.warn(`Failure to reconstruct an HDR image from ${K}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),Se={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},be=Ee;else throw Ce}try{await this.render(ye,Se,be,Ae)}catch(Ce){this.manager.itemError(K),typeof xe=="function"&&xe(Ce),ye.disposeOnDemandRenderer();return}typeof me=="function"&&me(ye),this.manager.itemEnd(K),ye.disposeOnDemandRenderer()},ge,_e=>{this.manager.itemError(K),typeof xe=="function"&&xe(_e)}),ye}}const presetsObj={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},CUBEMAP_ROOT="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",isArray$1=fe=>Array.isArray(fe),defaultFiles=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function useEnvironment({files:fe=defaultFiles,path:K="",preset:me=void 0,colorSpace:ge=void 0,extensions:xe}={}){me&&(validatePreset(me),fe=presetsObj[me],K=CUBEMAP_ROOT);const ye=isArray$1(fe),{extension:ve,isCubemap:_e}=getExtension(fe),Ee=getLoader(ve);if(!Ee)throw new Error("useEnvironment: Unrecognized file extension: "+fe);const be=useThree(Te=>Te.gl);reactExports.useLayoutEffect(()=>{if(ve!=="webp"&&ve!=="jpg"&&ve!=="jpeg")return;function Te(){useLoader.clear(Ee,ye?[fe]:fe)}be.domElement.addEventListener("webglcontextlost",Te,{once:!0})},[fe,be.domElement]);const Ae=useLoader(Ee,ye?[fe]:fe,Te=>{(ve==="webp"||ve==="jpg"||ve==="jpeg")&&Te.setRenderer(be),Te.setPath==null||Te.setPath(K),xe&&xe(Te)});let Se=ye?Ae[0]:Ae;if(ve==="jpg"||ve==="jpeg"||ve==="webp"){var Ce;Se=(Ce=Se.renderTarget)==null?void 0:Ce.texture}return Se.mapping=_e?CubeReflectionMapping:EquirectangularReflectionMapping,Se.colorSpace=ge??(_e?"srgb":"srgb-linear"),Se}const preloadDefaultOptions={files:defaultFiles,path:"",preset:void 0,extensions:void 0};useEnvironment.preload=fe=>{const K={...preloadDefaultOptions,...fe};let{files:me,path:ge=""}=K;const{preset:xe,extensions:ye}=K;xe&&(validatePreset(xe),me=presetsObj[xe],ge=CUBEMAP_ROOT);const{extension:ve}=getExtension(me);if(ve==="webp"||ve==="jpg"||ve==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const _e=getLoader(ve);if(!_e)throw new Error("useEnvironment: Unrecognized file extension: "+me);useLoader.preload(_e,isArray$1(me)?[me]:me,Ee=>{Ee.setPath==null||Ee.setPath(ge),ye&&ye(Ee)})};const clearDefaultOptins={files:defaultFiles,preset:void 0};useEnvironment.clear=fe=>{const K={...clearDefaultOptins,...fe};let{files:me}=K;const{preset:ge}=K;ge&&(validatePreset(ge),me=presetsObj[ge]);const{extension:xe}=getExtension(me),ye=getLoader(xe);if(!ye)throw new Error("useEnvironment: Unrecognized file extension: "+me);useLoader.clear(ye,isArray$1(me)?[me]:me)};function validatePreset(fe){if(!(fe in presetsObj))throw new Error("Preset must be one of: "+Object.keys(presetsObj).join(", "))}function getExtension(fe){var K;const me=isArray$1(fe)&&fe.length===6,ge=isArray$1(fe)&&fe.length===3&&fe.some(ve=>ve.endsWith("json")),xe=isArray$1(fe)?fe[0]:fe;return{extension:me?"cube":ge?"webp":xe.startsWith("data:application/exr")?"exr":xe.startsWith("data:application/hdr")?"hdr":xe.startsWith("data:image/jpeg")?"jpg":(K=xe.split(".").pop())==null||(K=K.split("?"))==null||(K=K.shift())==null?void 0:K.toLowerCase(),isCubemap:me,isGainmap:ge}}function getLoader(fe){return fe==="cube"?CubeTextureLoader:fe==="hdr"?RGBELoader:fe==="exr"?EXRLoader:fe==="jpg"||fe==="jpeg"?HDRJPGLoader:fe==="webp"?GainMapLoader:null}const isRef=fe=>fe.current&&fe.current.isScene,resolveScene=fe=>isRef(fe)?fe.current:fe;function setEnvProps(fe,K,me,ge,xe={}){var ye,ve,_e,Ee;xe={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...xe};const be=resolveScene(K||me),Ae=be.background,Se=be.environment,Ce={backgroundBlurriness:be.backgroundBlurriness,backgroundIntensity:be.backgroundIntensity,backgroundRotation:(ye=(ve=be.backgroundRotation)==null||ve.clone==null?void 0:ve.clone())!==null&&ye!==void 0?ye:[0,0,0],environmentIntensity:be.environmentIntensity,environmentRotation:(_e=(Ee=be.environmentRotation)==null||Ee.clone==null?void 0:Ee.clone())!==null&&_e!==void 0?_e:[0,0,0]};return fe!=="only"&&(be.environment=ge),fe&&(be.background=ge),applyProps(be,xe),()=>{fe!=="only"&&(be.environment=Se),fe&&(be.background=Ae),applyProps(be,Ce)}}function EnvironmentMap({scene:fe,background:K=!1,map:me,...ge}){const xe=useThree(ye=>ye.scene);return reactExports.useLayoutEffect(()=>{if(me)return setEnvProps(K,fe,xe,me,ge)}),null}function EnvironmentCube({background:fe=!1,scene:K,blur:me,backgroundBlurriness:ge,backgroundIntensity:xe,backgroundRotation:ye,environmentIntensity:ve,environmentRotation:_e,...Ee}){const be=useEnvironment(Ee),Ae=useThree(Se=>Se.scene);return reactExports.useLayoutEffect(()=>setEnvProps(fe,K,Ae,be,{backgroundBlurriness:me??ge,backgroundIntensity:xe,backgroundRotation:ye,environmentIntensity:ve,environmentRotation:_e})),reactExports.useEffect(()=>()=>{be.dispose()},[be]),null}function EnvironmentPortal({children:fe,near:K=.1,far:me=1e3,resolution:ge=256,frames:xe=1,map:ye,background:ve=!1,blur:_e,backgroundBlurriness:Ee,backgroundIntensity:be,backgroundRotation:Ae,environmentIntensity:Se,environmentRotation:Ce,scene:Te,files:Re,path:De,preset:Ie=void 0,extensions:Be}){const Le=useThree(ze=>ze.gl),Oe=useThree(ze=>ze.scene),Fe=reactExports.useRef(null),[Ue]=reactExports.useState(()=>new Scene),Ne=reactExports.useMemo(()=>{const ze=new WebGLCubeRenderTarget(ge);return ze.texture.type=HalfFloatType,ze},[ge]);reactExports.useEffect(()=>()=>{Ne.dispose()},[Ne]),reactExports.useLayoutEffect(()=>{if(xe===1){const ze=Le.autoClear;Le.autoClear=!0,Fe.current.update(Le,Ue),Le.autoClear=ze}return setEnvProps(ve,Te,Oe,Ne.texture,{backgroundBlurriness:_e??Ee,backgroundIntensity:be,backgroundRotation:Ae,environmentIntensity:Se,environmentRotation:Ce})},[fe,Ue,Ne.texture,Te,Oe,ve,xe,Le]);let He=1;return useFrame(()=>{if(xe===1/0||He<xe){const ze=Le.autoClear;Le.autoClear=!0,Fe.current.update(Le,Ue),Le.autoClear=ze,He++}}),reactExports.createElement(reactExports.Fragment,null,createPortal(reactExports.createElement(reactExports.Fragment,null,fe,reactExports.createElement("cubeCamera",{ref:Fe,args:[K,me,Ne]}),Re||Ie?reactExports.createElement(EnvironmentCube,{background:!0,files:Re,preset:Ie,path:De,extensions:Be}):ye?reactExports.createElement(EnvironmentMap,{background:!0,map:ye,extensions:Be}):null),Ue))}function EnvironmentGround(fe){var K,me,ge,xe;const ye=useEnvironment(fe),ve=fe.map||ye;reactExports.useMemo(()=>extend$3({GroundProjectedEnvImpl:GroundProjectedEnv}),[]),reactExports.useEffect(()=>()=>{ye.dispose()},[ye]);const _e=reactExports.useMemo(()=>[ve],[ve]),Ee=(K=fe.ground)==null?void 0:K.height,be=(me=fe.ground)==null?void 0:me.radius,Ae=(ge=(xe=fe.ground)==null?void 0:xe.scale)!==null&&ge!==void 0?ge:1e3;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(EnvironmentMap,_extends$2({},fe,{map:ve})),reactExports.createElement("groundProjectedEnvImpl",{args:_e,scale:Ae,height:Ee,radius:be}))}function Environment(fe){return fe.ground?reactExports.createElement(EnvironmentGround,fe):fe.map?reactExports.createElement(EnvironmentMap,fe):fe.children?reactExports.createElement(EnvironmentPortal,fe):reactExports.createElement(EnvironmentCube,fe)}const context$1=reactExports.createContext(null);function PerformanceMonitor({iterations:fe=10,ms:K=250,threshold:me=.75,step:ge=.1,factor:xe=.5,flipflops:ye=1/0,bounds:ve=Ce=>Ce>100?[60,100]:[40,60],onIncline:_e,onDecline:Ee,onChange:be,onFallback:Ae,children:Se}){const Ce=Math.pow(10,0),[Te,Re]=reactExports.useState(()=>({fps:0,index:0,factor:xe,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:Ie=>{const Be=Symbol();return Te.subscriptions.set(Be,Ie.current),()=>void Te.subscriptions.delete(Be)}}));let De=0;return useFrame(()=>{const{frames:Ie,averages:Be}=Te;if(!Te.fallback&&Be.length<fe){Ie.push(performance.now());const Le=Ie[Ie.length-1]-Ie[0];if(Le>=K){if(Te.fps=Math.round(Ie.length/Le*1e3*Ce)/Ce,Te.refreshrate=Math.max(Te.refreshrate,Te.fps),Be[Te.index++%fe]=Te.fps,Be.length===fe){const[Oe,Fe]=ve(Te.refreshrate),Ue=Be.filter(He=>He>=Fe),Ne=Be.filter(He=>He<Oe);Ue.length>fe*me&&(Te.factor=Math.min(1,Te.factor+ge),Te.flipped++,_e&&_e(Te),Te.subscriptions.forEach(He=>He.onIncline&&He.onIncline(Te))),Ne.length>fe*me&&(Te.factor=Math.max(0,Te.factor-ge),Te.flipped++,Ee&&Ee(Te),Te.subscriptions.forEach(He=>He.onDecline&&He.onDecline(Te))),De!==Te.factor&&(De=Te.factor,be&&be(Te),Te.subscriptions.forEach(He=>He.onChange&&He.onChange(Te))),Te.flipped>ye&&!Te.fallback&&(Te.fallback=!0,Ae&&Ae(Te),Te.subscriptions.forEach(He=>He.onFallback&&He.onFallback(Te))),Te.averages=[]}Te.frames=[]}}}),reactExports.createElement(context$1.Provider,{value:Te},Se)}const __vite_import_meta_env__$1={},createStoreImpl=fe=>{let K;const me=new Set,ge=(Ae,Se)=>{const Ce=typeof Ae=="function"?Ae(K):Ae;if(!Object.is(Ce,K)){const Te=K;K=Se??(typeof Ce!="object"||Ce===null)?Ce:Object.assign({},K,Ce),me.forEach(Re=>Re(K,Te))}},xe=()=>K,Ee={setState:ge,getState:xe,getInitialState:()=>be,subscribe:Ae=>(me.add(Ae),()=>me.delete(Ae)),destroy:()=>{(__vite_import_meta_env__$1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),me.clear()}},be=K=fe(ge,xe,Ee);return Ee},createStore=fe=>fe?createStoreImpl(fe):createStoreImpl,__vite_import_meta_env__={},{useDebugValue}=React$4,{useSyncExternalStoreWithSelector}=useSyncExternalStoreExports;let didWarnAboutEqualityFn=!1;const identity=fe=>fe;function useStore(fe,K=identity,me){(__vite_import_meta_env__?"production":void 0)!=="production"&&me&&!didWarnAboutEqualityFn&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),didWarnAboutEqualityFn=!0);const ge=useSyncExternalStoreWithSelector(fe.subscribe,fe.getState,fe.getServerState||fe.getInitialState,K,me);return useDebugValue(ge),ge}const createImpl=fe=>{(__vite_import_meta_env__?"production":void 0)!=="production"&&typeof fe!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const K=typeof fe=="function"?createStore(fe):fe,me=(ge,xe)=>useStore(K,ge,xe);return Object.assign(me,K),me},create$3=fe=>fe?createImpl(fe):createImpl,context=reactExports.createContext(null),vec1$1=new Vector3,vec2$1=new Vector3,calculateOffset$1=(fe,K,me,ge)=>{const xe=K.dot(K),ye=K.dot(fe)-K.dot(me),ve=K.dot(ge);return ve===0?-ye/xe:(vec1$1.copy(ge).multiplyScalar(xe/ve).sub(K),vec2$1.copy(ge).multiplyScalar(ye/ve).add(me).sub(fe),-vec1$1.dot(vec2$1)/vec1$1.dot(vec1$1))},upV$1=new Vector3(0,1,0),offsetMatrix$1=new Matrix4,AxisArrow=({direction:fe,axis:K})=>{const{translation:me,translationLimits:ge,annotations:xe,annotationsClass:ye,depthTest:ve,scale:_e,lineWidth:Ee,fixed:be,axisColors:Ae,hoveredColor:Se,opacity:Ce,onDragStart:Te,onDrag:Re,onDragEnd:De,userData:Ie}=reactExports.useContext(context),Be=useThree(at=>at.controls),Le=reactExports.useRef(null),Oe=reactExports.useRef(null),Fe=reactExports.useRef(null),Ue=reactExports.useRef(0),[Ne,He]=reactExports.useState(!1),ze=reactExports.useCallback(at=>{xe&&(Le.current.innerText=`${me.current[K].toFixed(2)}`,Le.current.style.display="block"),at.stopPropagation();const rt=new Matrix4().extractRotation(Oe.current.matrixWorld),Ft=at.point.clone(),Je=new Vector3().setFromMatrixPosition(Oe.current.matrixWorld),Wt=fe.clone().applyMatrix4(rt).normalize();Fe.current={clickPoint:Ft,dir:Wt},Ue.current=me.current[K],Te({component:"Arrow",axis:K,origin:Je,directions:[Wt]}),Be&&(Be.enabled=!1),at.target.setPointerCapture(at.pointerId)},[xe,fe,Be,Te,me,K]),je=reactExports.useCallback(at=>{if(at.stopPropagation(),Ne||He(!0),Fe.current){const{clickPoint:rt,dir:Ft}=Fe.current,[Je,Wt]=ge?.[K]||[void 0,void 0];let Kt=calculateOffset$1(rt,Ft,at.ray.origin,at.ray.direction);Je!==void 0&&(Kt=Math.max(Kt,Je-Ue.current)),Wt!==void 0&&(Kt=Math.min(Kt,Wt-Ue.current)),me.current[K]=Ue.current+Kt,xe&&(Le.current.innerText=`${me.current[K].toFixed(2)}`),offsetMatrix$1.makeTranslation(Ft.x*Kt,Ft.y*Kt,Ft.z*Kt),Re(offsetMatrix$1)}},[xe,Re,Ne,me,ge,K]),Ge=reactExports.useCallback(at=>{xe&&(Le.current.style.display="none"),at.stopPropagation(),Fe.current=null,De(),Be&&(Be.enabled=!0),at.target.releasePointerCapture(at.pointerId)},[xe,Be,De]),Xe=reactExports.useCallback(at=>{at.stopPropagation(),He(!1)},[]),{cylinderLength:qe,coneWidth:Qe,coneLength:nt,matrixL:Nt}=reactExports.useMemo(()=>{const at=be?Ee/_e*1.6:_e/20,rt=be?.2:_e/5,Ft=be?1-rt:_e-rt,Je=new Quaternion().setFromUnitVectors(upV$1,fe.clone().normalize()),Wt=new Matrix4().makeRotationFromQuaternion(Je);return{cylinderLength:Ft,coneWidth:at,coneLength:rt,matrixL:Wt}},[fe,_e,Ee,be]),Ye=Ne?Se:Ae[K];return reactExports.createElement("group",{ref:Oe},reactExports.createElement("group",{matrix:Nt,matrixAutoUpdate:!1,onPointerDown:ze,onPointerMove:je,onPointerUp:Ge,onPointerOut:Xe},xe&&reactExports.createElement(Html,{position:[0,-nt,0]},reactExports.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:ye,ref:Le})),reactExports.createElement("mesh",{visible:!1,position:[0,(qe+nt)/2,0],userData:Ie},reactExports.createElement("cylinderGeometry",{args:[Qe*1.4,Qe*1.4,qe+nt,8,1]})),reactExports.createElement(Line$1,{transparent:!0,raycast:()=>null,depthTest:ve,points:[0,0,0,0,qe,0],lineWidth:Ee,side:DoubleSide,color:Ye,opacity:Ce,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),reactExports.createElement("mesh",{raycast:()=>null,position:[0,qe+nt/2,0],renderOrder:500},reactExports.createElement("coneGeometry",{args:[Qe,nt,24,1]}),reactExports.createElement("meshBasicMaterial",{transparent:!0,depthTest:ve,color:Ye,opacity:Ce,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},clickDir=new Vector3,intersectionDir=new Vector3,toDegrees=fe=>fe*180/Math.PI,toRadians=fe=>fe*Math.PI/180,calculateAngle=(fe,K,me,ge,xe)=>{clickDir.copy(fe).sub(me),intersectionDir.copy(K).sub(me);const ye=ge.dot(ge),ve=xe.dot(xe),_e=clickDir.dot(ge)/ye,Ee=clickDir.dot(xe)/ve,be=intersectionDir.dot(ge)/ye,Ae=intersectionDir.dot(xe)/ve,Se=Math.atan2(Ee,_e);return Math.atan2(Ae,be)-Se},fmod=(fe,K)=>{let me=Math.floor(fe/K);return me=me<0?me+1:me,fe-me*K},minimizeAngle=fe=>{let K=fmod(fe,2*Math.PI);return Math.abs(K)<1e-6?0:(K<0&&(K+=2*Math.PI),K)},rotMatrix=new Matrix4,posNew=new Vector3,ray$1=new Ray,intersection$1=new Vector3,AxisRotator=({dir1:fe,dir2:K,axis:me})=>{const{rotationLimits:ge,annotations:xe,annotationsClass:ye,depthTest:ve,scale:_e,lineWidth:Ee,fixed:be,axisColors:Ae,hoveredColor:Se,opacity:Ce,onDragStart:Te,onDrag:Re,onDragEnd:De,userData:Ie}=reactExports.useContext(context),Be=useThree(Ye=>Ye.controls),Le=reactExports.useRef(null),Oe=reactExports.useRef(null),Fe=reactExports.useRef(0),Ue=reactExports.useRef(0),Ne=reactExports.useRef(null),[He,ze]=reactExports.useState(!1),je=reactExports.useCallback(Ye=>{xe&&(Le.current.innerText=`${toDegrees(Ue.current).toFixed(0)}º`,Le.current.style.display="block"),Ye.stopPropagation();const at=Ye.point.clone(),rt=new Vector3().setFromMatrixPosition(Oe.current.matrixWorld),Ft=new Vector3().setFromMatrixColumn(Oe.current.matrixWorld,0).normalize(),Je=new Vector3().setFromMatrixColumn(Oe.current.matrixWorld,1).normalize(),Wt=new Vector3().setFromMatrixColumn(Oe.current.matrixWorld,2).normalize(),Kt=new Plane().setFromNormalAndCoplanarPoint(Wt,rt);Ne.current={clickPoint:at,origin:rt,e1:Ft,e2:Je,normal:Wt,plane:Kt},Te({component:"Rotator",axis:me,origin:rt,directions:[Ft,Je,Wt]}),Be&&(Be.enabled=!1),Ye.target.setPointerCapture(Ye.pointerId)},[xe,Be,Te,me]),Ge=reactExports.useCallback(Ye=>{if(Ye.stopPropagation(),He||ze(!0),Ne.current){const{clickPoint:at,origin:rt,e1:Ft,e2:Je,normal:Wt,plane:Kt}=Ne.current,[Pt,Yt]=ge?.[me]||[void 0,void 0];ray$1.copy(Ye.ray),ray$1.intersectPlane(Kt,intersection$1),ray$1.direction.negate(),ray$1.intersectPlane(Kt,intersection$1);let Gt=calculateAngle(at,intersection$1,rt,Ft,Je),an=toDegrees(Gt);Ye.shiftKey&&(an=Math.round(an/10)*10,Gt=toRadians(an)),Pt!==void 0&&Yt!==void 0&&Yt-Pt<2*Math.PI?(Gt=minimizeAngle(Gt),Gt=Gt>Math.PI?Gt-2*Math.PI:Gt,Gt=MathUtils.clamp(Gt,Pt-Fe.current,Yt-Fe.current),Ue.current=Fe.current+Gt):(Ue.current=minimizeAngle(Fe.current+Gt),Ue.current=Ue.current>Math.PI?Ue.current-2*Math.PI:Ue.current),xe&&(an=toDegrees(Ue.current),Le.current.innerText=`${an.toFixed(0)}º`),rotMatrix.makeRotationAxis(Wt,Gt),posNew.copy(rt).applyMatrix4(rotMatrix).sub(rt).negate(),rotMatrix.setPosition(posNew),Re(rotMatrix)}},[xe,Re,He,ge,me]),Xe=reactExports.useCallback(Ye=>{xe&&(Le.current.style.display="none"),Ye.stopPropagation(),Fe.current=Ue.current,Ne.current=null,De(),Be&&(Be.enabled=!0),Ye.target.releasePointerCapture(Ye.pointerId)},[xe,Be,De]),qe=reactExports.useCallback(Ye=>{Ye.stopPropagation(),ze(!1)},[]),Qe=reactExports.useMemo(()=>{const Ye=fe.clone().normalize(),at=K.clone().normalize();return new Matrix4().makeBasis(Ye,at,Ye.clone().cross(at))},[fe,K]),nt=be?.65:_e*.65,Nt=reactExports.useMemo(()=>{const at=[];for(let rt=0;rt<=32;rt++){const Ft=rt*(Math.PI/2)/32;at.push(new Vector3(Math.cos(Ft)*nt,Math.sin(Ft)*nt,0))}return at},[nt]);return reactExports.createElement("group",{ref:Oe,onPointerDown:je,onPointerMove:Ge,onPointerUp:Xe,onPointerOut:qe,matrix:Qe,matrixAutoUpdate:!1},xe&&reactExports.createElement(Html,{position:[nt,nt,0]},reactExports.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:ye,ref:Le})),reactExports.createElement(Line$1,{points:Nt,lineWidth:Ee*4,visible:!1,userData:Ie}),reactExports.createElement(Line$1,{transparent:!0,raycast:()=>null,depthTest:ve,points:Nt,lineWidth:Ee,side:DoubleSide,color:He?Se:Ae[me],opacity:Ce,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},decomposeIntoBasis=(fe,K,me)=>{const ge=Math.abs(fe.x)>=Math.abs(fe.y)&&Math.abs(fe.x)>=Math.abs(fe.z)?0:Math.abs(fe.y)>=Math.abs(fe.x)&&Math.abs(fe.y)>=Math.abs(fe.z)?1:2,xe=[0,1,2].sort((Re,De)=>Math.abs(K.getComponent(De))-Math.abs(K.getComponent(Re))),ye=ge===xe[0]?xe[1]:xe[0],ve=fe.getComponent(ge),_e=fe.getComponent(ye),Ee=K.getComponent(ge),be=K.getComponent(ye),Ae=me.getComponent(ge),Ce=(me.getComponent(ye)-Ae*(_e/ve))/(be-Ee*(_e/ve));return[(Ae-Ce*Ee)/ve,Ce]},ray=new Ray,intersection=new Vector3,offsetMatrix=new Matrix4,PlaneSlider=({dir1:fe,dir2:K,axis:me})=>{const{translation:ge,translationLimits:xe,annotations:ye,annotationsClass:ve,depthTest:_e,scale:Ee,lineWidth:be,fixed:Ae,axisColors:Se,hoveredColor:Ce,opacity:Te,onDragStart:Re,onDrag:De,onDragEnd:Ie,userData:Be}=reactExports.useContext(context),Le=useThree(Ft=>Ft.controls),Oe=reactExports.useRef(null),Fe=reactExports.useRef(null),Ue=reactExports.useRef(null),Ne=reactExports.useRef(0),He=reactExports.useRef(0),[ze,je]=reactExports.useState(!1),Ge=reactExports.useCallback(Ft=>{ye&&(Oe.current.innerText=`${ge.current[(me+1)%3].toFixed(2)}, ${ge.current[(me+2)%3].toFixed(2)}`,Oe.current.style.display="block"),Ft.stopPropagation();const Je=Ft.point.clone(),Wt=new Vector3().setFromMatrixPosition(Fe.current.matrixWorld),Kt=new Vector3().setFromMatrixColumn(Fe.current.matrixWorld,0).normalize(),Pt=new Vector3().setFromMatrixColumn(Fe.current.matrixWorld,1).normalize(),Yt=new Vector3().setFromMatrixColumn(Fe.current.matrixWorld,2).normalize(),Gt=new Plane().setFromNormalAndCoplanarPoint(Yt,Wt);Ue.current={clickPoint:Je,e1:Kt,e2:Pt,plane:Gt},Ne.current=ge.current[(me+1)%3],He.current=ge.current[(me+2)%3],Re({component:"Slider",axis:me,origin:Wt,directions:[Kt,Pt,Yt]}),Le&&(Le.enabled=!1),Ft.target.setPointerCapture(Ft.pointerId)},[ye,Le,Re,me]),Xe=reactExports.useCallback(Ft=>{if(Ft.stopPropagation(),ze||je(!0),Ue.current){const{clickPoint:Je,e1:Wt,e2:Kt,plane:Pt}=Ue.current,[Yt,Gt]=xe?.[(me+1)%3]||[void 0,void 0],[an,pn]=xe?.[(me+2)%3]||[void 0,void 0];ray.copy(Ft.ray),ray.intersectPlane(Pt,intersection),ray.direction.negate(),ray.intersectPlane(Pt,intersection),intersection.sub(Je);let[En,$n]=decomposeIntoBasis(Wt,Kt,intersection);Yt!==void 0&&(En=Math.max(En,Yt-Ne.current)),Gt!==void 0&&(En=Math.min(En,Gt-Ne.current)),an!==void 0&&($n=Math.max($n,an-He.current)),pn!==void 0&&($n=Math.min($n,pn-He.current)),ge.current[(me+1)%3]=Ne.current+En,ge.current[(me+2)%3]=He.current+$n,ye&&(Oe.current.innerText=`${ge.current[(me+1)%3].toFixed(2)}, ${ge.current[(me+2)%3].toFixed(2)}`),offsetMatrix.makeTranslation(En*Wt.x+$n*Kt.x,En*Wt.y+$n*Kt.y,En*Wt.z+$n*Kt.z),De(offsetMatrix)}},[ye,De,ze,ge,xe,me]),qe=reactExports.useCallback(Ft=>{ye&&(Oe.current.style.display="none"),Ft.stopPropagation(),Ue.current=null,Ie(),Le&&(Le.enabled=!0),Ft.target.releasePointerCapture(Ft.pointerId)},[ye,Le,Ie]),Qe=reactExports.useCallback(Ft=>{Ft.stopPropagation(),je(!1)},[]),nt=reactExports.useMemo(()=>{const Ft=fe.clone().normalize(),Je=K.clone().normalize();return new Matrix4().makeBasis(Ft,Je,Ft.clone().cross(Je))},[fe,K]),Nt=Ae?1/7:Ee/7,Ye=Ae?.225:Ee*.225,at=ze?Ce:Se[me],rt=reactExports.useMemo(()=>[new Vector3(0,0,0),new Vector3(0,Ye,0),new Vector3(Ye,Ye,0),new Vector3(Ye,0,0),new Vector3(0,0,0)],[Ye]);return reactExports.createElement("group",{ref:Fe,matrix:nt,matrixAutoUpdate:!1},ye&&reactExports.createElement(Html,{position:[0,0,0]},reactExports.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:ve,ref:Oe})),reactExports.createElement("group",{position:[Nt*1.7,Nt*1.7,0]},reactExports.createElement("mesh",{visible:!0,onPointerDown:Ge,onPointerMove:Xe,onPointerUp:qe,onPointerOut:Qe,scale:Ye,userData:Be},reactExports.createElement("planeGeometry",null),reactExports.createElement("meshBasicMaterial",{transparent:!0,depthTest:_e,color:at,polygonOffset:!0,polygonOffsetFactor:-10,side:DoubleSide,fog:!1})),reactExports.createElement(Line$1,{position:[-Ye/2,-Ye/2,0],transparent:!0,depthTest:_e,points:rt,lineWidth:be,color:at,opacity:Te,polygonOffset:!0,polygonOffsetFactor:-10,userData:Be,fog:!1})))},vec1=new Vector3,vec2=new Vector3,calculateOffset=(fe,K,me,ge)=>{const xe=K.dot(K),ye=K.dot(fe)-K.dot(me),ve=K.dot(ge);return ve===0?-ye/xe:(vec1.copy(ge).multiplyScalar(xe/ve).sub(K),vec2.copy(ge).multiplyScalar(ye/ve).add(me).sub(fe),-vec1.dot(vec2)/vec1.dot(vec1))},upV=new Vector3(0,1,0),scaleV=new Vector3,scaleMatrix=new Matrix4,ScalingSphere=({direction:fe,axis:K})=>{const{scaleLimits:me,annotations:ge,annotationsClass:xe,depthTest:ye,scale:ve,lineWidth:_e,fixed:Ee,axisColors:be,hoveredColor:Ae,opacity:Se,onDragStart:Ce,onDrag:Te,onDragEnd:Re,userData:De}=reactExports.useContext(context),Ie=useThree(rt=>rt.size),Be=useThree(rt=>rt.controls),Le=reactExports.useRef(null),Oe=reactExports.useRef(null),Fe=reactExports.useRef(null),Ue=reactExports.useRef(1),Ne=reactExports.useRef(1),He=reactExports.useRef(null),[ze,je]=reactExports.useState(!1),Ge=Ee?1.2:1.2*ve,Xe=reactExports.useCallback(rt=>{ge&&(Le.current.innerText=`${Ne.current.toFixed(2)}`,Le.current.style.display="block"),rt.stopPropagation();const Ft=new Matrix4().extractRotation(Oe.current.matrixWorld),Je=rt.point.clone(),Wt=new Vector3().setFromMatrixPosition(Oe.current.matrixWorld),Kt=fe.clone().applyMatrix4(Ft).normalize(),Pt=Oe.current.matrixWorld.clone(),Yt=Pt.clone().invert(),Gt=Ee?1/calculateScaleFactor(Oe.current.getWorldPosition(vec1),ve,rt.camera,Ie):1;He.current={clickPoint:Je,dir:Kt,mPLG:Pt,mPLGInv:Yt,offsetMultiplier:Gt},Ce({component:"Sphere",axis:K,origin:Wt,directions:[Kt]}),Be&&(Be.enabled=!1),rt.target.setPointerCapture(rt.pointerId)},[ge,Be,fe,Ce,K,Ee,ve,Ie]),qe=reactExports.useCallback(rt=>{if(rt.stopPropagation(),ze||je(!0),He.current){const{clickPoint:Ft,dir:Je,mPLG:Wt,mPLGInv:Kt,offsetMultiplier:Pt}=He.current,[Yt,Gt]=me?.[K]||[1e-5,void 0],pn=calculateOffset(Ft,Je,rt.ray.origin,rt.ray.direction)*Pt,En=Ee?pn:pn/ve;let $n=Math.pow(2,En*.2);rt.shiftKey&&($n=Math.round($n*10)/10),$n=Math.max($n,Yt/Ue.current),Gt!==void 0&&($n=Math.min($n,Gt/Ue.current)),Ne.current=Ue.current*$n,Fe.current.position.set(0,Ge+pn,0),ge&&(Le.current.innerText=`${Ne.current.toFixed(2)}`),scaleV.set(1,1,1),scaleV.setComponent(K,$n),scaleMatrix.makeScale(scaleV.x,scaleV.y,scaleV.z).premultiply(Wt).multiply(Kt),Te(scaleMatrix)}},[ge,Ge,Te,ze,me,K]),Qe=reactExports.useCallback(rt=>{ge&&(Le.current.style.display="none"),rt.stopPropagation(),Ue.current=Ne.current,He.current=null,Fe.current.position.set(0,Ge,0),Re(),Be&&(Be.enabled=!0),rt.target.releasePointerCapture(rt.pointerId)},[ge,Be,Re,Ge]),nt=reactExports.useCallback(rt=>{rt.stopPropagation(),je(!1)},[]),{radius:Nt,matrixL:Ye}=reactExports.useMemo(()=>{const rt=Ee?_e/ve*1.8:ve/22.5,Ft=new Quaternion().setFromUnitVectors(upV,fe.clone().normalize()),Je=new Matrix4().makeRotationFromQuaternion(Ft);return{radius:rt,matrixL:Je}},[fe,ve,_e,Ee]),at=ze?Ae:be[K];return reactExports.createElement("group",{ref:Oe},reactExports.createElement("group",{matrix:Ye,matrixAutoUpdate:!1,onPointerDown:Xe,onPointerMove:qe,onPointerUp:Qe,onPointerOut:nt},ge&&reactExports.createElement(Html,{position:[0,Ge/2,0]},reactExports.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:xe,ref:Le})),reactExports.createElement("mesh",{ref:Fe,position:[0,Ge,0],renderOrder:500,userData:De},reactExports.createElement("sphereGeometry",{args:[Nt,12,12]}),reactExports.createElement("meshBasicMaterial",{transparent:!0,depthTest:ye,color:at,opacity:Se,polygonOffset:!0,polygonOffsetFactor:-10}))))},mL0=new Matrix4,mW0=new Matrix4,mP=new Matrix4,mPInv=new Matrix4,mW=new Matrix4,mL=new Matrix4,mL0Inv=new Matrix4,mdL=new Matrix4,mG=new Matrix4,bb=new Box3,bbObj=new Box3,vCenter=new Vector3,vSize=new Vector3,vAnchorOffset=new Vector3,vPosition=new Vector3,vScale=new Vector3,xDir=new Vector3(1,0,0),yDir=new Vector3(0,1,0),zDir=new Vector3(0,0,1),PivotControls=reactExports.forwardRef(({enabled:fe=!0,matrix:K,onDragStart:me,onDrag:ge,onDragEnd:xe,autoTransform:ye=!0,anchor:ve,disableAxes:_e=!1,disableSliders:Ee=!1,disableRotations:be=!1,disableScaling:Ae=!1,activeAxes:Se=[!0,!0,!0],offset:Ce=[0,0,0],rotation:Te=[0,0,0],scale:Re=1,lineWidth:De=4,fixed:Ie=!1,translationLimits:Be,rotationLimits:Le,scaleLimits:Oe,depthTest:Fe=!0,axisColors:Ue=["#ff2060","#20df80","#2080ff"],hoveredColor:Ne="#ffff40",annotations:He=!1,annotationsClass:ze,opacity:je=1,visible:Ge=!0,userData:Xe,children:qe,...Qe},nt)=>{const Nt=useThree(Gt=>Gt.invalidate),Ye=reactExports.useRef(null),at=reactExports.useRef(null),rt=reactExports.useRef(null),Ft=reactExports.useRef(null),Je=reactExports.useRef([0,0,0]),Wt=reactExports.useRef(new Vector3(1,1,1)),Kt=reactExports.useRef(new Vector3(1,1,1));reactExports.useLayoutEffect(()=>{ve&&(Ft.current.updateWorldMatrix(!0,!0),mPInv.copy(Ft.current.matrixWorld).invert(),bb.makeEmpty(),Ft.current.traverse(Gt=>{Gt.geometry&&(Gt.geometry.boundingBox||Gt.geometry.computeBoundingBox(),mL.copy(Gt.matrixWorld).premultiply(mPInv),bbObj.copy(Gt.geometry.boundingBox),bbObj.applyMatrix4(mL),bb.union(bbObj))}),vCenter.copy(bb.max).add(bb.min).multiplyScalar(.5),vSize.copy(bb.max).sub(bb.min).multiplyScalar(.5),vAnchorOffset.copy(vSize).multiply(new Vector3(...ve)).add(vCenter),vPosition.set(...Ce).add(vAnchorOffset),rt.current.position.copy(vPosition),Nt())});const Pt=reactExports.useMemo(()=>({onDragStart:Gt=>{mL0.copy(at.current.matrix),mW0.copy(at.current.matrixWorld),me&&me(Gt),Nt()},onDrag:Gt=>{mP.copy(Ye.current.matrixWorld),mPInv.copy(mP).invert(),mW.copy(mW0).premultiply(Gt),mL.copy(mW).premultiply(mPInv),mL0Inv.copy(mL0).invert(),mdL.copy(mL).multiply(mL0Inv),ye&&at.current.matrix.copy(mL),ge&&ge(mL,mdL,mW,Gt),Nt()},onDragEnd:()=>{xe&&xe(),Nt()},translation:Je,translationLimits:Be,rotationLimits:Le,axisColors:Ue,hoveredColor:Ne,opacity:je,scale:Re,lineWidth:De,fixed:Ie,depthTest:Fe,userData:Xe,annotations:He,annotationsClass:ze}),[me,ge,xe,Je,Be,Le,Oe,Fe,Re,De,Ie,...Ue,Ne,je,Xe,ye,He,ze]),Yt=new Vector3;return useFrame(Gt=>{if(Ie){const an=calculateScaleFactor(rt.current.getWorldPosition(Yt),Re,Gt.camera,Gt.size);Wt.current.setScalar(an)}K&&K instanceof Matrix4&&(at.current.matrix=K),at.current.updateWorldMatrix(!0,!0),mG.makeRotationFromEuler(rt.current.rotation).setPosition(rt.current.position).premultiply(at.current.matrixWorld),Kt.current.setFromMatrixScale(mG),vScale.copy(Wt.current).divide(Kt.current),(Math.abs(rt.current.scale.x-vScale.x)>1e-4||Math.abs(rt.current.scale.y-vScale.y)>1e-4||Math.abs(rt.current.scale.z-vScale.z)>1e-4)&&(rt.current.scale.copy(vScale),Gt.invalidate())}),reactExports.useImperativeHandle(nt,()=>at.current,[]),reactExports.createElement(context.Provider,{value:Pt},reactExports.createElement("group",{ref:Ye},reactExports.createElement("group",_extends$2({ref:at,matrix:K,matrixAutoUpdate:!1},Qe),reactExports.createElement("group",{visible:Ge,ref:rt,position:Ce,rotation:Te},fe&&reactExports.createElement(reactExports.Fragment,null,!_e&&Se[0]&&reactExports.createElement(AxisArrow,{axis:0,direction:xDir}),!_e&&Se[1]&&reactExports.createElement(AxisArrow,{axis:1,direction:yDir}),!_e&&Se[2]&&reactExports.createElement(AxisArrow,{axis:2,direction:zDir}),!Ee&&Se[0]&&Se[1]&&reactExports.createElement(PlaneSlider,{axis:2,dir1:xDir,dir2:yDir}),!Ee&&Se[0]&&Se[2]&&reactExports.createElement(PlaneSlider,{axis:1,dir1:zDir,dir2:xDir}),!Ee&&Se[2]&&Se[1]&&reactExports.createElement(PlaneSlider,{axis:0,dir1:yDir,dir2:zDir}),!be&&Se[0]&&Se[1]&&reactExports.createElement(AxisRotator,{axis:2,dir1:xDir,dir2:yDir}),!be&&Se[0]&&Se[2]&&reactExports.createElement(AxisRotator,{axis:1,dir1:zDir,dir2:xDir}),!be&&Se[2]&&Se[1]&&reactExports.createElement(AxisRotator,{axis:0,dir1:yDir,dir2:zDir}),!Ae&&Se[0]&&reactExports.createElement(ScalingSphere,{axis:0,direction:xDir}),!Ae&&Se[1]&&reactExports.createElement(ScalingSphere,{axis:1,direction:yDir}),!Ae&&Se[2]&&reactExports.createElement(ScalingSphere,{axis:2,direction:zDir}))),reactExports.createElement("group",{ref:Ft},qe))))}),ViewerContext=React$4.createContext(null);/*!
 * hold-event
 * https://github.com/yomotsu/hold-event
 * (c) 2020 @yomotsu
 * Released under the MIT License.
 */var HOLD_EVENT_TYPE;(function(fe){fe.HOLD_START="holdStart",fe.HOLD_END="holdEnd",fe.HOLDING="holding"})(HOLD_EVENT_TYPE||(HOLD_EVENT_TYPE={}));class EventDispatcher{constructor(){this._listeners={}}addEventListener(K,me){const ge=this._listeners;ge[K]===void 0&&(ge[K]=[]),ge[K].indexOf(me)===-1&&ge[K].push(me)}removeEventListener(K,me){const xe=this._listeners[K];if(xe!==void 0){const ye=xe.indexOf(me);ye!==-1&&xe.splice(ye,1)}}dispatchEvent(K){const ge=this._listeners[K.type];if(ge!==void 0){K.target=this;const xe=ge.slice(0);for(let ye=0,ve=xe.length;ye<ve;ye++)xe[ye].call(this,K)}}}class Hold extends EventDispatcher{constructor(K){super(),this._enabled=!0,this._holding=!1,this._intervalId=-1,this._deltaTime=0,this._elapsedTime=0,this._lastTime=0,this._holdStart=me=>{if(!this._enabled||this._holding)return;this._deltaTime=0,this._elapsedTime=0,this._lastTime=performance.now(),this.dispatchEvent({type:HOLD_EVENT_TYPE.HOLD_START,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:me}),this._holding=!0;const ge=()=>{this._intervalId=this.holdIntervalDelay?window.setTimeout(ge,this.holdIntervalDelay):window.requestAnimationFrame(ge);const xe=performance.now();this._deltaTime=xe-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:HOLD_EVENT_TYPE.HOLDING,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:me})};this._intervalId=this.holdIntervalDelay?window.setTimeout(ge,this.holdIntervalDelay):window.requestAnimationFrame(ge)},this._holdEnd=me=>{if(!this._enabled||!this._holding)return;const ge=performance.now();this._deltaTime=ge-this._lastTime,this._elapsedTime+=this._deltaTime,this._lastTime=performance.now(),this.dispatchEvent({type:HOLD_EVENT_TYPE.HOLD_END,deltaTime:this._deltaTime,elapsedTime:this._elapsedTime,originalEvent:me}),window.clearTimeout(this._intervalId),window.cancelAnimationFrame(this._intervalId),this._holding=!1},this.holdIntervalDelay=K}get enabled(){return this._enabled}set enabled(K){this._enabled!==K&&(this._enabled=K,this._enabled||this._holdEnd())}get holding(){return this._holding}}class KeyboardKeyHold extends Hold{constructor(K,me){if(typeof K!="string"){console.error("KeyboardKeyHold: the first argument has to be a KeyboardEvent.code string.");return}super(me),this._holdStart=this._holdStart.bind(this),this._holdEnd=this._holdEnd.bind(this);const ge=ye=>{isInputEvent(ye)||ye.code===K&&this._holdStart(ye)},xe=ye=>{ye.code===K&&this._holdEnd(ye)};document.addEventListener("keydown",ge),document.addEventListener("keyup",xe),window.addEventListener("blur",this._holdEnd)}}function isInputEvent(fe){const K=fe.target;return K.tagName==="INPUT"||K.tagName==="SELECT"||K.tagName==="TEXTAREA"||K.isContentEditable}function computeT_threeworld_world(fe){const K=fe.nodeAttributesFromName.current[""].wxyz,me=fe.nodeAttributesFromName.current[""].position??[0,0,0];return new Matrix4().makeRotationFromQuaternion(new Quaternion(K[1],K[2],K[3],K[0])).setPosition(me[0],me[1],me[2])}function rayToViserCoords(fe,K){const me=computeT_threeworld_world(fe).invert(),ge=K.origin.clone().applyMatrix4(me),xe=me.setPosition(0,0,0),ye=K.direction.clone().applyMatrix4(xe);return new Ray(ge,ye)}function useThrottledMessageSender(fe){const K=React$4.useContext(ViewerContext);return makeThrottledMessageSender(K,fe)}function makeThrottledMessageSender(fe,K){let me=!0,ge=!1,xe=null;function ye(ve){fe.sendMessageRef.current!==null&&(xe=ve,me?(fe.sendMessageRef.current(ve),ge=!1,me=!1,setTimeout(()=>{me=!0,ge&&xe&&ye(xe)},K)):ge=!0)}return ye}function isTexture(fe){return fe!=null&&fe.isTexture!==void 0}function OrbitOriginTool({forceShow:fe,pivotRef:K,onPivotChange:me,update:ge}){const ye=reactExports.useContext(ViewerContext).useGui(ve=>ve.showOrbitOriginTool);return React$4.useEffect(ge,[ye]),!ye&&!fe?null:jsxRuntimeExports.jsxs(PivotControls,{ref:K,scale:200,lineWidth:4,fixed:!0,axisColors:["#ffaaff","#ff33ff","#ffaaff"],disableScaling:!0,onDragEnd:()=>{me(K.current.matrix)},children:[jsxRuntimeExports.jsxs("mesh",{children:[jsxRuntimeExports.jsx("sphereGeometry",{args:[.1,32,32]}),jsxRuntimeExports.jsx("shaderMaterial",{transparent:!0,uniforms:{color:{value:new Color$1("#ff33ff")},size:{value:200}},vertexShader:`
            // Custom shader for defining sphere size in screen space.
            uniform float size;
            void main() {
              vec4 clipPos = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);
              vec4 clipPosOffset = projectionMatrix * modelViewMatrix * vec4(position * size / 1000.0, 1.0);
              gl_Position = clipPos + (clipPosOffset - clipPos) * clipPos.w;
            }
          `,fragmentShader:`
            uniform vec3 color;
            void main() {
              gl_FragColor = vec4(color, 0.8);
            }
          `})]}),jsxRuntimeExports.jsx(Grid,{args:[10,10,10,10],infiniteGrid:!0,fadeStrength:0,fadeFrom:0,fadeDistance:1e3,sectionColor:"#ffaaff",cellColor:"#ffccff",side:DoubleSide})]})}function SynchronizedCameraControls(){const fe=reactExports.useContext(ViewerContext),K=useThree(qe=>qe.camera),me=useThrottledMessageSender(20),ge=reactExports.useRef(null),xe=reactExports.useRef(null),ye=fe.cameraControlRef,[ve,_e]=reactExports.useState(null),Ee=.5;useFrame(qe=>{if(ve&&ye.current){const Qe=ye.current,nt=Qe.camera,Nt=qe.clock.getElapsedTime()-ve.startTime,Ye=Math.min(Nt/ve.duration,1),at=Ye*Ye*(3-2*Ye),rt=new Vector3().copy(ve.startUp).lerp(ve.targetUp,at).normalize(),Ft=new Vector3().copy(ve.startLookAt).lerp(ve.targetLookAt,at);nt.up.copy(rt);const Je=new Vector3;Qe.getPosition(Je),Qe.updateCameraUp(),Qe.setPosition(Je.x,Je.y,Je.z,!1),Qe.setLookAt(Je.x,Je.y,Je.z,Ft.x,Ft.y,Ft.z,!1),Ye>=1&&_e(null)}});const{clock:be}=useThree(),Ae=qe=>{if(!ye.current)return;const Qe=new Vector3;Qe.setFromMatrixPosition(qe);const nt=ye.current,Nt=ye.current.camera,Ye=new Vector3().setFromMatrixColumn(qe,1),at=nt.getTarget(new Vector3);_e({startUp:Nt.up.clone(),targetUp:Ye,startLookAt:at,targetLookAt:Qe,startTime:be.getElapsedTime(),duration:Ee})},Se=()=>{if(ve!==null||!ye.current||!xe.current)return;const Qe=ye.current.getTarget(new Vector3),nt=new Matrix4().extractRotation(xe.current.matrix),Nt=K.up.clone().normalize(),Ye=new Vector3(0,1,0).applyMatrix4(nt).normalize(),at=new Vector3().crossVectors(Ye,Nt).normalize(),rt=Math.acos(Math.min(1,Math.max(-1,Nt.dot(Ye)))),Ft=new Matrix4;at.lengthSq()>1e-4&&Ft.makeRotationAxis(at,rt);const Je=new Matrix4;Je.multiply(Ft),Je.multiply(nt),Je.setPosition(Qe),xe.current.matrix.copy(Je),xe.current.updateMatrixWorld(!0)};fe.resetCameraViewRef.current=()=>{fe.cameraRef.current.up.set(ge.current.camera.up.x,ge.current.camera.up.y,ge.current.camera.up.z),fe.cameraControlRef.current.updateCameraUp(),fe.cameraControlRef.current.setLookAt(ge.current.camera.position.x,ge.current.camera.position.y,ge.current.camera.position.z,ge.current.lookAt.x,ge.current.lookAt.y,ge.current.lookAt.z,!0)};const Ce=new Quaternion().setFromEuler(new Euler(Math.PI,0,0)),Te=new Quaternion,Re=new Matrix4,De=new Vector3,Ie=new Quaternion,Be=new Vector3,Le=new Vector3,Oe=React$4.useCallback(()=>{Se();const qe=K,Qe=fe.cameraControlRef.current,nt=fe.canvasRef.current;if(Qe===null){setTimeout(Oe,10);return}const Nt=computeT_threeworld_world(fe).invert(),Ye=Nt.clone().multiply(Re.makeRotationFromQuaternion(qe.quaternion).setPosition(qe.position)).multiply(Re.makeRotationFromQuaternion(Ce));Te.setFromRotationMatrix(Nt),Qe.getTarget(De).applyQuaternion(Te);const at=qe.up.clone().applyQuaternion(Te);ge.current===null&&(ge.current={camera:qe.clone(),lookAt:Qe.getTarget(new Vector3)}),Ye.decompose(Be,Ie,Le),me({type:"ViewerCameraMessage",wxyz:[Ie.w,Ie.x,Ie.y,Ie.z],position:Be.toArray(),image_height:nt.height,image_width:nt.width,fov:qe.fov*Math.PI/180,near:qe.near,far:qe.far,look_at:[De.x,De.y,De.z],up_direction:[at.x,at.y,at.z]}),ze!=null&&console.log(`&initialCameraPosition=${Be.x.toFixed(3)},${Be.y.toFixed(3)},${Be.z.toFixed(3)}&initialCameraLookAt=${De.x.toFixed(3)},${De.y.toFixed(3)},${De.z.toFixed(3)}&initialCameraUp=${at.x.toFixed(3)},${at.y.toFixed(3)},${at.z.toFixed(3)}`)},[K,me]),Fe=new URLSearchParams(window.location.search),Ue=Fe.get("initialCameraPosition"),Ne=Fe.get("initialCameraLookAt"),He=Fe.get("initialCameraUp"),ze=Fe.get("logCamera"),je=fe.useGui(qe=>qe.websocketConnected),Ge=React$4.useRef(!1);React$4.useEffect(()=>{if(!Ge.current){const qe=new Vector3(...Ue?Ue.split(",").map(Number):[3,3,3]);qe.applyMatrix4(computeT_threeworld_world(fe));const Qe=new Vector3(...Ne?Ne.split(",").map(Number):[0,0,0]);Qe.applyMatrix4(computeT_threeworld_world(fe));const nt=new Vector3(...He?He.split(",").map(Number):[0,0,1]);nt.applyMatrix4(computeT_threeworld_world(fe)),nt.normalize(),fe.cameraRef.current.up.set(nt.x,nt.y,nt.z),fe.cameraControlRef.current.updateCameraUp(),fe.cameraControlRef.current.setLookAt(qe.x,qe.y,qe.z,Qe.x,Qe.y,Qe.z,!1),Ge.current=!0}fe.sendCameraRef.current=Oe,je&&setTimeout(()=>Oe(),50)},[je,Oe]);const Xe=fe.canvasRef.current;return React$4.useEffect(()=>{const qe=new ResizeObserver(()=>{Oe()});return qe.observe(Xe),()=>qe.disconnect()},[Xe]),React$4.useEffect(()=>{const qe=fe.cameraControlRef.current,Qe=new KeyboardKeyHold("KeyW",20),nt=new KeyboardKeyHold("KeyA",20),Nt=new KeyboardKeyHold("KeyS",20),Ye=new KeyboardKeyHold("KeyD",20),at=new KeyboardKeyHold("KeyQ",20),rt=new KeyboardKeyHold("KeyE",20);nt.addEventListener("holding",Pt=>{qe.truck(-.002*Pt?.deltaTime,0,!0)}),Ye.addEventListener("holding",Pt=>{qe.truck(.002*Pt?.deltaTime,0,!0)}),Qe.addEventListener("holding",Pt=>{qe.forward(.002*Pt?.deltaTime,!0)}),Nt.addEventListener("holding",Pt=>{qe.forward(-.002*Pt?.deltaTime,!0)}),at.addEventListener("holding",Pt=>{qe.elevate(-.002*Pt?.deltaTime,!0)}),rt.addEventListener("holding",Pt=>{qe.elevate(.002*Pt?.deltaTime,!0)});const Ft=new KeyboardKeyHold("ArrowLeft",20),Je=new KeyboardKeyHold("ArrowRight",20),Wt=new KeyboardKeyHold("ArrowUp",20),Kt=new KeyboardKeyHold("ArrowDown",20);return Ft.addEventListener("holding",Pt=>{qe.rotate(-.05*MathUtils.DEG2RAD*Pt?.deltaTime,0,!0)}),Je.addEventListener("holding",Pt=>{qe.rotate(.05*MathUtils.DEG2RAD*Pt?.deltaTime,0,!0)}),Wt.addEventListener("holding",Pt=>{qe.rotate(0,-.05*MathUtils.DEG2RAD*Pt?.deltaTime,!0)}),Kt.addEventListener("holding",Pt=>{qe.rotate(0,.05*MathUtils.DEG2RAD*Pt?.deltaTime,!0)}),()=>{}},[CameraControls]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CameraControls,{ref:fe.cameraControlRef,minDistance:.01,dollySpeed:.3,smoothTime:.05,draggingSmoothTime:0,onChange:Oe,makeDefault:!0}),jsxRuntimeExports.jsx(OrbitOriginTool,{forceShow:ze!==null,pivotRef:xe,onPivotChange:qe=>{Ae(qe)},update:Se})]})}const HoverableContext=React$4.createContext(null),OutlinesMaterial=shaderMaterial({screenspace:!1,color:new Color$1("black"),opacity:1,thickness:.05,size:new Vector2},`#include <common>
   #include <morphtarget_pars_vertex>
   #include <skinning_pars_vertex>
   uniform float thickness;
   uniform float screenspace;
   uniform vec2 size;
   void main() {
     #if defined (USE_SKINNING)
	     #include <beginnormal_vertex>
       #include <morphnormal_vertex>
       #include <skinbase_vertex>
       #include <skinnormal_vertex>
       #include <defaultnormal_vertex>
     #endif
     #include <begin_vertex>
	   #include <morphtarget_vertex>
	   #include <skinning_vertex>
     #include <project_vertex>
     vec4 tNormal = vec4(normal, 0.0);
     vec4 tPosition = vec4(transformed, 1.0);
     #ifdef USE_INSTANCING
       tNormal = instanceMatrix * tNormal;
       tPosition = instanceMatrix * tPosition;
     #endif
     if (screenspace == 0.0) {
       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;
       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0);
     } else {
       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;
       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;
       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;
       clipPosition.xy += offset;
       gl_Position = clipPosition;
     }
   }`,`uniform vec3 color;
   uniform float opacity;
   void main(){
     gl_FragColor = vec4(color, opacity);
     #include <tonemapping_fragment>
     #include <${version>=154?"colorspace_fragment":"encodings_fragment"}>
   }`),Outlines=reactExports.forwardRef(function({color:K="black",opacity:me=1,transparent:ge=!1,screenspace:xe=!1,toneMapped:ye=!0,polygonOffset:ve=!1,polygonOffsetFactor:_e=0,renderOrder:Ee=0,thickness:be=.05,angle:Ae=Math.PI,...Se},Ce){const Te=reactExports.useRef(null),[Re]=reactExports.useState(()=>new OutlinesMaterial({side:BackSide})),Ie=useThree(Oe=>Oe.gl).getDrawingBufferSize(new Vector2),Be=reactExports.useRef(0),Le=reactExports.useRef();return reactExports.useLayoutEffect(()=>{const Oe=Te.current;if(!Oe)return;const Fe=Oe.parent;if(Fe&&Fe.geometry&&(Be.current!==Ae||Le.current!==Fe.geometry)){Be.current=Ae,Le.current=Fe.geometry;let Ue=Oe.children[0];Ue&&(Ae&&Ue.geometry.dispose(),Oe.remove(Ue)),Fe.skeleton?(Ue=new SkinnedMesh$1,Ue.material=Re,Ue.bind(Fe.skeleton,Fe.bindMatrix),Oe.add(Ue)):Fe.isInstancedMesh?(Ue=new InstancedMesh(Fe.geometry,Re,Fe.count),Ue.instanceMatrix=Fe.instanceMatrix,Oe.add(Ue)):(Ue=new Mesh,Ue.material=Re,Oe.add(Ue)),Ue.geometry=Ae?toCreasedNormals(Fe.geometry,Ae):Fe.geometry}}),reactExports.useLayoutEffect(()=>{const Oe=Te.current;if(!Oe)return;const Fe=Oe.children[0];Fe&&(Fe.renderOrder=Ee,applyProps(Fe.material,{transparent:ge,thickness:be,color:K,opacity:me,size:Ie,screenspace:xe,toneMapped:ye,polygonOffset:ve,polygonOffsetFactor:_e}))}),reactExports.useEffect(()=>()=>{const Oe=Te.current;if(!Oe)return;const Fe=Oe.children[0];Fe&&(Ae&&Fe.geometry.dispose(),Oe.remove(Fe))},[]),jsxRuntimeExports.jsx("group",{ref:Oe=>{Te.current=Oe,typeof Ce=="function"?Ce(Oe):Ce&&(Ce.current=Oe)},...Se})});function OutlinesIfHovered(fe={alwaysMounted:!1,creaseAngle:Math.PI}){const K=React$4.useRef(null),me=React$4.useContext(HoverableContext),[ge,xe]=React$4.useState(!0);return useFrame(()=>{if(me!==null)if(fe.alwaysMounted){if(K.current===null)return;K.current.visible=me.current.isHovered}else me.current.isHovered!=ge&&xe(me.current.isHovered)}),me===null||!ge?null:jsxRuntimeExports.jsx(Outlines,{ref:K,thickness:10,screenspace:!0,color:16514816,opacity:.8,transparent:!0,angle:fe.creaseAngle})}const _tempObjects={instanceMatrix:new Matrix4,transformMatrix:new Matrix4,finalMatrix:new Matrix4,position:new Vector3,quaternion:new Quaternion,scale:new Vector3,oneVector:new Vector3(1,1,1)},BatchedMeshHoverOutlines=({geometry:fe,batched_positions:K,batched_wxyzs:me,meshTransform:ge,computeBatchIndexFromInstanceIndex:xe})=>{const ye=React$4.useContext(HoverableContext),ve=React$4.useRef(null),_e=useThree(Se=>Se.gl),Ee=React$4.useMemo(()=>_e.getDrawingBufferSize(new Vector2),[_e]),be=React$4.useMemo(()=>fe?fe.clone():null,[fe]),Ae=React$4.useMemo(()=>{const Se=new OutlinesMaterial({side:BackSide});return Se.thickness=10,Se.color=new Color$1(16514816),Se.opacity=.8,Se.size=Ee,Se.transparent=!0,Se.screenspace=!0,Se.toneMapped=!0,Se},[Ee]);return React$4.useEffect(()=>()=>{be&&be.dispose()},[be]),React$4.useEffect(()=>()=>{Ae&&Ae.dispose()},[Ae]),useFrame(()=>{if(!(!ve.current||!be||!ye)&&(ve.current.visible=!1,ye.current.isHovered&&ye.current.instanceId!==null)){const Se=ye.current.instanceId,Ce=xe?xe(Se):Se,Te=new DataView(K.buffer,K.byteOffset,K.byteLength),Re=new DataView(me.buffer,me.byteOffset,me.byteLength);if(Ce>=0&&Ce*12<K.byteLength){const De=Ce*3*4,Ie=Ce*4*4;ve.current.position.set(Te.getFloat32(De,!0),Te.getFloat32(De+4,!0),Te.getFloat32(De+8,!0)),ve.current.quaternion.set(Re.getFloat32(Ie+4,!0),Re.getFloat32(Ie+8,!0),Re.getFloat32(Ie+12,!0),Re.getFloat32(Ie,!0)),ge&&(_tempObjects.instanceMatrix.compose(ve.current.position,ve.current.quaternion,_tempObjects.oneVector),_tempObjects.transformMatrix.compose(ge.position,ge.rotation,ge.scale),_tempObjects.finalMatrix.copy(_tempObjects.instanceMatrix).multiply(_tempObjects.transformMatrix),_tempObjects.finalMatrix.decompose(_tempObjects.position,_tempObjects.quaternion,_tempObjects.scale),ve.current.position.copy(_tempObjects.position),ve.current.quaternion.copy(_tempObjects.quaternion),ve.current.scale.copy(_tempObjects.scale)),ve.current.visible=!0}}}),!ye||!be?null:jsxRuntimeExports.jsx("mesh",{ref:ve,geometry:be,material:Ae,visible:!1})};function rgbToInt$1(fe){return fe[0]<<16|fe[1]<<8|fe[2]}function generateGradientMap(fe){const K=new DataTexture(Uint8Array.from(fe===3?[0,128,255]:[0,64,128,192,255]),fe,1,RedFormat);return K.needsUpdate=!0,K}function assertUnreachable$1(fe){throw new Error(`Should never get here! ${fe}`)}function disposeMaterial(fe){"map"in fe&&fe.map?.dispose(),"lightMap"in fe&&fe.lightMap?.dispose(),"bumpMap"in fe&&fe.bumpMap?.dispose(),"normalMap"in fe&&fe.normalMap?.dispose(),"specularMap"in fe&&fe.specularMap?.dispose(),"envMap"in fe&&fe.envMap?.dispose(),"alphaMap"in fe&&fe.alphaMap?.dispose(),"aoMap"in fe&&fe.aoMap?.dispose(),"displacementMap"in fe&&fe.displacementMap?.dispose(),"emissiveMap"in fe&&fe.emissiveMap?.dispose(),"gradientMap"in fe&&fe.gradientMap?.dispose(),"metalnessMap"in fe&&fe.metalnessMap?.dispose(),"roughnessMap"in fe&&fe.roughnessMap?.dispose(),fe.dispose()}function createStandardMaterial(fe){const K={color:rgbToInt$1(fe.color),wireframe:fe.wireframe,transparent:fe.opacity!==null,opacity:fe.opacity??1,flatShading:fe.flat_shading&&!fe.wireframe,side:{front:FrontSide,back:BackSide,double:DoubleSide}[fe.side]};return fe.material=="standard"||fe.wireframe?new MeshStandardMaterial(K):fe.material=="toon3"?new MeshToonMaterial({gradientMap:generateGradientMap(3),...K}):fe.material=="toon5"?new MeshToonMaterial({gradientMap:generateGradientMap(5),...K}):assertUnreachable$1(fe.material)}const originGeom=new SphereGeometry(1),PointCloudMaterial=shaderMaterial({scale:1,point_ball_norm:0,uniformColor:new Color$1(1,1,1)},`
  precision mediump float;

  varying vec3 vPosition;
  varying vec3 vColor; // in the vertex shader
  uniform float scale;
  uniform vec3 uniformColor;

  void main() {
      vPosition = position;
      #ifdef USE_COLOR
      vColor = color;
      #else
      vColor = uniformColor;
      #endif
      vec4 world_pos = modelViewMatrix * vec4(position, 1.0);
      gl_Position = projectionMatrix * world_pos;
      gl_PointSize = (scale / -world_pos.z);
  }
   `,`varying vec3 vPosition;
  varying vec3 vColor;
  uniform float point_ball_norm;
  uniform vec3 uniformColor;

  void main() {
      if (point_ball_norm < 1000.0) {
          float r = pow(
              pow(abs(gl_PointCoord.x - 0.5), point_ball_norm)
              + pow(abs(gl_PointCoord.y - 0.5), point_ball_norm),
              1.0 / point_ball_norm);
          if (r > 0.5) discard;
      }
      gl_FragColor = vec4(vColor, 1.0);
  }
   `),PointCloud=React$4.forwardRef(function(K,me){const ge=useThree(Ee=>Ee.get),xe=K.props,ye=React$4.useMemo(()=>{const Ee=new BufferGeometry;return K.props.precision==="float16"?Ee.setAttribute("position",new Float16BufferAttribute(new Uint16Array(xe.points.buffer.slice(xe.points.byteOffset,xe.points.byteOffset+xe.points.byteLength)),3)):Ee.setAttribute("position",new Float32BufferAttribute(new Float32Array(xe.points.buffer.slice(xe.points.byteOffset,xe.points.byteOffset+xe.points.byteLength)),3)),xe.colors.length>3?Ee.setAttribute("color",new BufferAttribute(new Uint8Array(xe.colors),3,!0)):xe.colors.length<3&&console.error(`Invalid color buffer length, got ${xe.colors.length}`),Ee},[xe.points,xe.colors]),ve=React$4.useMemo(()=>{const Ee=new PointCloudMaterial;return xe.colors.length>3?Ee.vertexColors=!0:(Ee.vertexColors=!1,Ee.uniforms.uniformColor.value=new Color$1(xe.colors[0]/255,xe.colors[1]/255,xe.colors[2]/255)),Ee},[xe.colors]);React$4.useEffect(()=>()=>{ye.dispose(),ve.dispose()},[ye,ve]),React$4.useEffect(()=>{ve.uniforms.scale.value=10,ve.uniforms.point_ball_norm.value={square:1/0,diamond:1,circle:2,rounded:3,sparkle:.6}[xe.point_shape]},[xe.point_shape,ve]);const _e=new Vector2;return useFrame(()=>{ve.uniforms.scale.value=xe.point_size/Math.tan(ge().camera.fov/180*Math.PI/2)*ge().gl.getSize(_e).height*ge().gl.getPixelRatio()}),jsxRuntimeExports.jsx("points",{frustumCulled:!1,ref:me,geometry:ye,material:ve})}),CoordinateFrame=React$4.forwardRef(function({showAxes:K=!0,axesLength:me=.5,axesRadius:ge=.0125,originRadius:xe=void 0,originColor:ye=15526912},ve){return xe=xe??ge*2,jsxRuntimeExports.jsx("group",{ref:ve,children:K&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("mesh",{geometry:originGeom,scale:new Vector3(xe,xe,xe),children:[jsxRuntimeExports.jsx("meshBasicMaterial",{color:ye}),jsxRuntimeExports.jsx(OutlinesIfHovered,{})]}),jsxRuntimeExports.jsxs(Instances,{limit:3,children:[jsxRuntimeExports.jsx("meshBasicMaterial",{}),jsxRuntimeExports.jsx("cylinderGeometry",{args:[ge,ge,me,16]}),jsxRuntimeExports.jsx(Instance,{rotation:new Euler(0,0,3*Math.PI/2),position:[.5*me,0,0],color:13369344,children:jsxRuntimeExports.jsx(OutlinesIfHovered,{})}),jsxRuntimeExports.jsx(Instance,{position:[0,.5*me,0],color:52224,children:jsxRuntimeExports.jsx(OutlinesIfHovered,{})}),jsxRuntimeExports.jsx(Instance,{rotation:new Euler(Math.PI/2,0,0),position:[0,0,.5*me],color:204,children:jsxRuntimeExports.jsx(OutlinesIfHovered,{})})]})]})})}),InstancedAxes=React$4.forwardRef(function({batched_wxyzs:K,batched_positions:me,axes_length:ge=.5,axes_radius:xe=.0125},ye){const ve=React$4.useRef(null),_e=React$4.useMemo(()=>new CylinderGeometry(xe,xe,ge,16),[xe,ge]),Ee=React$4.useMemo(()=>new MeshBasicMaterial,[]);React$4.useEffect(()=>()=>{_e.dispose(),Ee.dispose()},[_e,Ee]);const be=React$4.useMemo(()=>({T_frame_framex:new Matrix4().makeRotationFromEuler(new Euler(0,0,3*Math.PI/2)).setPosition(.5*ge,0,0),T_frame_framey:new Matrix4().makeRotationFromEuler(new Euler(0,0,0)).setPosition(0,.5*ge,0),T_frame_framez:new Matrix4().makeRotationFromEuler(new Euler(Math.PI/2,0,0)).setPosition(0,0,.5*ge),red:new Color$1(13369344),green:new Color$1(52224),blue:new Color$1(204)}),[ge]);React$4.useEffect(()=>{if(!ve.current)return;const De=new Matrix4,Ie=new Matrix4,Be=new Matrix4,Le=new Matrix4,Oe=new Quaternion,{T_frame_framex:Fe,T_frame_framey:Ue,T_frame_framez:Ne,red:He,green:ze,blue:je}=be,Ge=new DataView(me.buffer,me.byteOffset,me.byteLength),Xe=new DataView(K.buffer,K.byteOffset,K.byteLength),qe=K.byteLength/(4*4);for(let Qe=0;Qe<qe;Qe++){const nt=Qe*3*4,Nt=Qe*4*4;De.makeRotationFromQuaternion(Oe.set(Xe.getFloat32(Nt+4,!0),Xe.getFloat32(Nt+8,!0),Xe.getFloat32(Nt+12,!0),Xe.getFloat32(Nt,!0))).setPosition(Ge.getFloat32(nt,!0),Ge.getFloat32(nt+4,!0),Ge.getFloat32(nt+8,!0)),Ie.copy(De).multiply(Fe),Be.copy(De).multiply(Ue),Le.copy(De).multiply(Ne),ve.current.setMatrixAt(Qe*3+0,Ie),ve.current.setMatrixAt(Qe*3+1,Be),ve.current.setMatrixAt(Qe*3+2,Le),ve.current.setColorAt(Qe*3+0,He),ve.current.setColorAt(Qe*3+1,ze),ve.current.setColorAt(Qe*3+2,je)}ve.current.instanceMatrix.needsUpdate=!0,ve.current.instanceColor.needsUpdate=!0},[K,me,be]);const Ae=React$4.useMemo(()=>new CylinderGeometry(xe,xe,ge,16),[xe,ge]),Se=React$4.useMemo(()=>({position:new Vector3(.5*ge,0,0),rotation:new Quaternion().setFromEuler(new Euler(0,0,3*Math.PI/2)),scale:new Vector3(1,1,1)}),[ge]),Ce=React$4.useMemo(()=>({position:new Vector3(0,.5*ge,0),rotation:new Quaternion().setFromEuler(new Euler(0,0,0)),scale:new Vector3(1,1,1)}),[ge]),Te=React$4.useMemo(()=>({position:new Vector3(0,0,.5*ge),rotation:new Quaternion().setFromEuler(new Euler(Math.PI/2,0,0)),scale:new Vector3(1,1,1)}),[ge]),Re=K.byteLength/(4*4)*3;return jsxRuntimeExports.jsxs("group",{ref:ye,children:[jsxRuntimeExports.jsx("instancedMesh",{ref:ve,args:[_e,Ee,Re]}),jsxRuntimeExports.jsx(BatchedMeshHoverOutlines,{geometry:Ae,batched_positions:me,batched_wxyzs:K,meshTransform:Se,computeBatchIndexFromInstanceIndex:De=>Math.floor(De/3)}),jsxRuntimeExports.jsx(BatchedMeshHoverOutlines,{geometry:Ae,batched_positions:me,batched_wxyzs:K,meshTransform:Ce,computeBatchIndexFromInstanceIndex:De=>Math.floor(De/3)}),jsxRuntimeExports.jsx(BatchedMeshHoverOutlines,{geometry:Ae,batched_positions:me,batched_wxyzs:K,meshTransform:Te,computeBatchIndexFromInstanceIndex:De=>Math.floor(De/3)})]})}),ViserImage=React$4.forwardRef(function(K,me){const[ge,xe]=React$4.useState();return React$4.useEffect(()=>{if(K.props.media_type!==null&&K.props._data!==null){const ye=URL.createObjectURL(new Blob([K.props._data]));new TextureLoader().load(ye,ve=>{xe(ve),URL.revokeObjectURL(ye)})}},[K.props.media_type,K.props._data]),jsxRuntimeExports.jsx("group",{ref:me,children:jsxRuntimeExports.jsxs("mesh",{rotation:new Euler(Math.PI,0,0),castShadow:K.props.cast_shadow,receiveShadow:K.props.receive_shadow,children:[jsxRuntimeExports.jsx(OutlinesIfHovered,{}),jsxRuntimeExports.jsx("planeGeometry",{attach:"geometry",args:[K.props.render_width,K.props.render_height]}),jsxRuntimeExports.jsx("meshBasicMaterial",{attach:"material",transparent:!0,side:DoubleSide,map:ge,toneMapped:!1})]})})}),CameraFrustum=React$4.forwardRef(function(K,me){const[ge,xe]=React$4.useState();React$4.useEffect(()=>{if(K.props.image_media_type!==null&&K.props._image_data!==null){const Te=URL.createObjectURL(new Blob([K.props._image_data]));new TextureLoader().load(Te,Re=>{xe(Re),URL.revokeObjectURL(Te)})}else xe(void 0)},[K.props.image_media_type,K.props._image_data]);let ye=Math.tan(K.props.fov/2),ve=ye*K.props.aspect,_e=1;const Ee=Math.cbrt(ve*ye*_e/3);ve/=Ee,ye/=Ee,_e/=Ee,ve*=K.props.scale,ye*=K.props.scale,_e*=K.props.scale;const be=React$4.useContext(HoverableContext),[Ae,Se]=React$4.useState(!1);useFrame(()=>{be!==null&&be.current.isHovered!==Ae&&Se(be.current.isHovered)});const Ce=[[-1,-1,1],[1,-1,1],[1,-1,1],[1,1,1],[1,1,1],[-1,1,1],[-1,1,1],[-1,-1,1],[-1,-1,1],[0,0,0],[0,0,0],[1,-1,1],[-1,1,1],[0,0,0],[0,0,0],[1,1,1],[0,-1.2,1],ge===void 0?[0,-.9,1]:[0,-1,1]].map(Te=>[Te[0]*ve,Te[1]*ye,Te[2]*_e]);return jsxRuntimeExports.jsxs("group",{ref:me,children:[jsxRuntimeExports.jsx(Line$1,{points:Ce,color:Ae?16514816:rgbToInt$1(K.props.color),lineWidth:Ae?1.5*K.props.line_width:K.props.line_width,segments:!0}),ge&&jsxRuntimeExports.jsxs("mesh",{position:[0,0,_e*.999999],rotation:new Euler(Math.PI,0,0),castShadow:K.props.cast_shadow,receiveShadow:K.props.receive_shadow,children:[jsxRuntimeExports.jsx("planeGeometry",{attach:"geometry",args:[K.props.aspect*ye*2,ye*2]}),jsxRuntimeExports.jsx("meshBasicMaterial",{attach:"material",transparent:!0,side:DoubleSide,map:ge,toneMapped:!1})]})]})});function ndcFromPointerXy(fe,K){const me=new Vector2;return me.x=2*((K[0]+.5)/fe.canvasRef.current.clientWidth)-1,me.y=1-2*((K[1]+.5)/fe.canvasRef.current.clientHeight),me.x<1&&me.x>-1&&me.y<1&&me.y>-1?me:null}function opencvXyFromPointerXy(fe,K){const me=new Vector2;return me.x=(K[0]+.5)/fe.canvasRef.current.clientWidth,me.y=(K[1]+.5)/fe.canvasRef.current.clientHeight,me}var Module=(()=>{var fe=import.meta.url;return async function(K={}){var me,ge=K,xe,ye,ve=new Promise((ct,ot)=>{xe=ct,ye=ot}),_e=typeof window=="object",Ee=typeof importScripts=="function",be=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(be){const{createRequire:ct}=await __vitePreload(()=>import("./__vite-browser-external-BIHI7g3E.js"),[],import.meta.url);var Ae=ct(import.meta.url)}var Se=Object.assign({},ge),Ce="";function Te(ct){return ge.locateFile?ge.locateFile(ct,Ce):Ce+ct}var Re,De,Ie;if(be){var Be=Ae("fs"),Le=Ae("path");Ce=Ae("url").fileURLToPath(new URL("./",import.meta.url)),Re=(ct,ot)=>(ct=bn(ct)?new URL(ct):Le.normalize(ct),Be.readFileSync(ct,ot?void 0:"utf8")),Ie=ct=>{var ot=Re(ct,!0);return ot.buffer||(ot=new Uint8Array(ot)),ot},De=(ct,ot,qt,fn=!0)=>{ct=bn(ct)?new URL(ct):Le.normalize(ct),Be.readFile(ct,fn?void 0:"utf8",(Vn,Zn)=>{Vn?qt(Vn):ot(fn?Zn.buffer:Zn)})},!ge.thisProgram&&process.argv.length>1&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2)}else(_e||Ee)&&(Ee?Ce=self.location.href:typeof document<"u"&&document.currentScript&&(Ce=document.currentScript.src),fe&&(Ce=fe),Ce.startsWith("blob:")?Ce="":Ce=Ce.substr(0,Ce.replace(/[?#].*/,"").lastIndexOf("/")+1),Re=ct=>{var ot=new XMLHttpRequest;return ot.open("GET",ct,!1),ot.send(null),ot.responseText},Ee&&(Ie=ct=>{var ot=new XMLHttpRequest;return ot.open("GET",ct,!1),ot.responseType="arraybuffer",ot.send(null),new Uint8Array(ot.response)}),De=(ct,ot,qt)=>{if(bn(ct)){var fn=new XMLHttpRequest;fn.open("GET",ct,!0),fn.responseType="arraybuffer",fn.onload=()=>{if(fn.status==200||fn.status==0&&fn.response){ot(fn.response);return}qt()},fn.onerror=qt,fn.send(null);return}fetch(ct,{credentials:"same-origin"}).then(Vn=>Vn.ok?Vn.arrayBuffer():Promise.reject(new Error(Vn.status+" : "+Vn.url))).then(ot,qt)});ge.print||console.log.bind(console);var Oe=ge.printErr||console.error.bind(console);Object.assign(ge,Se),Se=null,ge.arguments&&ge.arguments,ge.thisProgram&&ge.thisProgram,ge.quit&&ge.quit;var Fe;ge.wasmBinary&&(Fe=ge.wasmBinary);var Ue,Ne=!1,He,ze,je,Ge,Xe,qe,Qe,nt;function Nt(){var ct=Ue.buffer;ge.HEAP8=He=new Int8Array(ct),ge.HEAP16=je=new Int16Array(ct),ge.HEAPU8=ze=new Uint8Array(ct),ge.HEAPU16=Ge=new Uint16Array(ct),ge.HEAP32=Xe=new Int32Array(ct),ge.HEAPU32=qe=new Uint32Array(ct),ge.HEAPF32=Qe=new Float32Array(ct),ge.HEAPF64=nt=new Float64Array(ct)}var Ye=[],at=[],rt=[];function Ft(){if(ge.preRun)for(typeof ge.preRun=="function"&&(ge.preRun=[ge.preRun]);ge.preRun.length;)Kt(ge.preRun.shift());kt(Ye)}function Je(){kt(at)}function Wt(){if(ge.postRun)for(typeof ge.postRun=="function"&&(ge.postRun=[ge.postRun]);ge.postRun.length;)Yt(ge.postRun.shift());kt(rt)}function Kt(ct){Ye.unshift(ct)}function Pt(ct){at.unshift(ct)}function Yt(ct){rt.unshift(ct)}var Gt=0,an=null;function pn(ct){Gt++,ge.monitorRunDependencies?.(Gt)}function En(ct){if(Gt--,ge.monitorRunDependencies?.(Gt),Gt==0&&an){var ot=an;an=null,ot()}}function $n(ct){ge.onAbort?.(ct),ct="Aborted("+ct+")",Oe(ct),Ne=!0,ct+=". Build with -sASSERTIONS for more info.";var ot=new WebAssembly.RuntimeError(ct);throw ye(ot),ot}var Un="data:application/octet-stream;base64,",kn=ct=>ct.startsWith(Un),bn=ct=>ct.startsWith("file://");function Mn(){if(ge.locateFile){var ct="Sorter.wasm";return kn(ct)?ct:Te(ct)}return new URL(""+new URL("Sorter-Df0J3ZWJ.wasm",import.meta.url).href,import.meta.url).href}var zt;function Dn(ct){if(ct==zt&&Fe)return new Uint8Array(Fe);if(Ie)return Ie(ct);throw"both async and sync fetching of the wasm failed"}function hn(ct){return Fe?Promise.resolve().then(()=>Dn(ct)):new Promise((ot,qt)=>{De(ct,fn=>ot(new Uint8Array(fn)),fn=>{try{ot(Dn(ct))}catch(Vn){qt(Vn)}})})}function mn(ct,ot,qt){return hn(ct).then(fn=>WebAssembly.instantiate(fn,ot)).then(qt,fn=>{Oe(`failed to asynchronously prepare wasm: ${fn}`),$n(fn)})}function dn(ct,ot,qt,fn){return!ct&&typeof WebAssembly.instantiateStreaming=="function"&&!kn(ot)&&!bn(ot)&&!be&&typeof fetch=="function"?fetch(ot,{credentials:"same-origin"}).then(Vn=>{var Zn=WebAssembly.instantiateStreaming(Vn,qt);return Zn.then(fn,function(ar){return Oe(`wasm streaming compile failed: ${ar}`),Oe("falling back to ArrayBuffer instantiation"),mn(ot,qt,fn)})}):mn(ot,qt,fn)}function Hn(){return{a:mo}}function Bn(){var ct=Hn();function ot(fn,Vn){return ji=fn.exports,Ue=ji.z,Nt(),Hr=ji.C,Pt(ji.A),En(),ji}pn();function qt(fn){ot(fn.instance)}if(ge.instantiateWasm)try{return ge.instantiateWasm(ct,ot)}catch(fn){Oe(`Module.instantiateWasm callback failed with error: ${fn}`),ye(fn)}return zt||(zt=Mn()),dn(Fe,zt,ct,qt).catch(ye),{}}var kt=ct=>{for(;ct.length>0;)ct.shift()(ge)};ge.noExitRuntime;class Dt{constructor(ot){this.excPtr=ot,this.ptr=ot-24}set_type(ot){qe[this.ptr+4>>2]=ot}get_type(){return qe[this.ptr+4>>2]}set_destructor(ot){qe[this.ptr+8>>2]=ot}get_destructor(){return qe[this.ptr+8>>2]}set_caught(ot){ot=ot?1:0,He[this.ptr+12]=ot}get_caught(){return He[this.ptr+12]!=0}set_rethrown(ot){ot=ot?1:0,He[this.ptr+13]=ot}get_rethrown(){return He[this.ptr+13]!=0}init(ot,qt){this.set_adjusted_ptr(0),this.set_type(ot),this.set_destructor(qt)}set_adjusted_ptr(ot){qe[this.ptr+16>>2]=ot}get_adjusted_ptr(){return qe[this.ptr+16>>2]}get_exception_ptr(){var ot=rs(this.get_type());if(ot)return qe[this.excPtr>>2];var qt=this.get_adjusted_ptr();return qt!==0?qt:this.excPtr}}var ln=0,nn=(ct,ot,qt)=>{var fn=new Dt(ct);throw fn.init(ot,qt),ln=ct,ln},gn=()=>{$n("")},Xt=(ct,ot,qt,fn,Vn)=>{},on=()=>{for(var ct=new Array(256),ot=0;ot<256;++ot)ct[ot]=String.fromCharCode(ot);Rt=ct},Rt,An=ct=>{for(var ot="",qt=ct;ze[qt];)ot+=Rt[ze[qt++]];return ot},sr={},zn={},In={},er,Kn=ct=>{throw new er(ct)},lr,gr=ct=>{throw new lr(ct)},hr=(ct,ot,qt)=>{ct.forEach(function(Xn){In[Xn]=ot});function fn(Xn){var nr=qt(Xn);nr.length!==ct.length&&gr("Mismatched type converter count");for(var mr=0;mr<ct.length;++mr)un(ct[mr],nr[mr])}var Vn=new Array(ot.length),Zn=[],ar=0;ot.forEach((Xn,nr)=>{zn.hasOwnProperty(Xn)?Vn[nr]=zn[Xn]:(Zn.push(Xn),sr.hasOwnProperty(Xn)||(sr[Xn]=[]),sr[Xn].push(()=>{Vn[nr]=zn[Xn],++ar,ar===Zn.length&&fn(Vn)}))}),Zn.length===0&&fn(Vn)};function Er(ct,ot,qt={}){var fn=ot.name;if(ct||Kn(`type "${fn}" must have a positive integer typeid pointer`),zn.hasOwnProperty(ct)){if(qt.ignoreDuplicateRegistrations)return;Kn(`Cannot register type '${fn}' twice`)}if(zn[ct]=ot,delete In[ct],sr.hasOwnProperty(ct)){var Vn=sr[ct];delete sr[ct],Vn.forEach(Zn=>Zn())}}function un(ct,ot,qt={}){if(!("argPackAdvance"in ot))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Er(ct,ot,qt)}var Sn=8,wn=(ct,ot,qt,fn)=>{ot=An(ot),un(ct,{name:ot,fromWireType:function(Vn){return!!Vn},toWireType:function(Vn,Zn){return Zn?qt:fn},argPackAdvance:Sn,readValueFromPointer:function(Vn){return this.fromWireType(ze[Vn])},destructorFunction:null})},Gn=ct=>({count:ct.count,deleteScheduled:ct.deleteScheduled,preservePointerOnDelete:ct.preservePointerOnDelete,ptr:ct.ptr,ptrType:ct.ptrType,smartPtr:ct.smartPtr,smartPtrType:ct.smartPtrType}),Yn=ct=>{function ot(qt){return qt.$$.ptrType.registeredClass.name}Kn(ot(ct)+" instance already deleted")},cr=!1,tr=ct=>{},Wr=ct=>{ct.smartPtr?ct.smartPtrType.rawDestructor(ct.smartPtr):ct.ptrType.registeredClass.rawDestructor(ct.ptr)},Qr=ct=>{ct.count.value-=1;var ot=ct.count.value===0;ot&&Wr(ct)},kr=(ct,ot,qt)=>{if(ot===qt)return ct;if(qt.baseClass===void 0)return null;var fn=kr(ct,ot,qt.baseClass);return fn===null?null:qt.downcast(fn)},di={},ci=()=>Object.keys(Ar).length,hs=()=>{var ct=[];for(var ot in Ar)Ar.hasOwnProperty(ot)&&ct.push(Ar[ot]);return ct},Ei=[],ai=()=>{for(;Ei.length;){var ct=Ei.pop();ct.$$.deleteScheduled=!1,ct.delete()}},hi,Fi=ct=>{hi=ct,Ei.length&&hi&&hi(ai)},mi=()=>{ge.getInheritedInstanceCount=ci,ge.getLiveInheritedInstances=hs,ge.flushPendingDeletes=ai,ge.setDelayFunction=Fi},Ar={},ki=(ct,ot)=>{for(ot===void 0&&Kn("ptr should not be undefined");ct.baseClass;)ot=ct.upcast(ot),ct=ct.baseClass;return ot},qr=(ct,ot)=>(ot=ki(ct,ot),Ar[ot]),Et=(ct,ot)=>{(!ot.ptrType||!ot.ptr)&&gr("makeClassHandle requires ptr and ptrType");var qt=!!ot.smartPtrType,fn=!!ot.smartPtr;return qt!==fn&&gr("Both smartPtrType and smartPtr must be specified"),ot.count={value:1},sn(Object.create(ct,{$$:{value:ot,writable:!0}}))};function Vt(ct){var ot=this.getPointee(ct);if(!ot)return this.destructor(ct),null;var qt=qr(this.registeredClass,ot);if(qt!==void 0){if(qt.$$.count.value===0)return qt.$$.ptr=ot,qt.$$.smartPtr=ct,qt.clone();var fn=qt.clone();return this.destructor(ct),fn}function Vn(){return this.isSmartPointer?Et(this.registeredClass.instancePrototype,{ptrType:this.pointeeType,ptr:ot,smartPtrType:this,smartPtr:ct}):Et(this.registeredClass.instancePrototype,{ptrType:this,ptr:ct})}var Zn=this.registeredClass.getActualType(ot),ar=di[Zn];if(!ar)return Vn.call(this);var Xn;this.isConst?Xn=ar.constPointerType:Xn=ar.pointerType;var nr=kr(ot,this.registeredClass,Xn.registeredClass);return nr===null?Vn.call(this):this.isSmartPointer?Et(Xn.registeredClass.instancePrototype,{ptrType:Xn,ptr:nr,smartPtrType:this,smartPtr:ct}):Et(Xn.registeredClass.instancePrototype,{ptrType:Xn,ptr:nr})}var sn=ct=>typeof FinalizationRegistry>"u"?(sn=ot=>ot,ct):(cr=new FinalizationRegistry(ot=>{Qr(ot.$$)}),sn=ot=>{var qt=ot.$$,fn=!!qt.smartPtr;if(fn){var Vn={$$:qt};cr.register(ot,Vn,ot)}return ot},tr=ot=>cr.unregister(ot),sn(ct)),Cn=()=>{Object.assign(Nn.prototype,{isAliasOf(ct){if(!(this instanceof Nn)||!(ct instanceof Nn))return!1;var ot=this.$$.ptrType.registeredClass,qt=this.$$.ptr;ct.$$=ct.$$;for(var fn=ct.$$.ptrType.registeredClass,Vn=ct.$$.ptr;ot.baseClass;)qt=ot.upcast(qt),ot=ot.baseClass;for(;fn.baseClass;)Vn=fn.upcast(Vn),fn=fn.baseClass;return ot===fn&&qt===Vn},clone(){if(this.$$.ptr||Yn(this),this.$$.preservePointerOnDelete)return this.$$.count.value+=1,this;var ct=sn(Object.create(Object.getPrototypeOf(this),{$$:{value:Gn(this.$$)}}));return ct.$$.count.value+=1,ct.$$.deleteScheduled=!1,ct},delete(){this.$$.ptr||Yn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Kn("Object already scheduled for deletion"),tr(this),Qr(this.$$),this.$$.preservePointerOnDelete||(this.$$.smartPtr=void 0,this.$$.ptr=void 0)},isDeleted(){return!this.$$.ptr},deleteLater(){return this.$$.ptr||Yn(this),this.$$.deleteScheduled&&!this.$$.preservePointerOnDelete&&Kn("Object already scheduled for deletion"),Ei.push(this),Ei.length===1&&hi&&hi(ai),this.$$.deleteScheduled=!0,this}})};function Nn(){}var Pn=(ct,ot)=>Object.defineProperty(ot,"name",{value:ct}),Qn=(ct,ot,qt)=>{if(ct[ot].overloadTable===void 0){var fn=ct[ot];ct[ot]=function(...Vn){return ct[ot].overloadTable.hasOwnProperty(Vn.length)||Kn(`Function '${qt}' called with an invalid number of arguments (${Vn.length}) - expects one of (${ct[ot].overloadTable})!`),ct[ot].overloadTable[Vn.length].apply(this,Vn)},ct[ot].overloadTable=[],ct[ot].overloadTable[fn.argCount]=fn}},Jn=(ct,ot,qt)=>{ge.hasOwnProperty(ct)?(Kn(`Cannot register public name '${ct}' twice`),Qn(ge,ct,ct),ge.hasOwnProperty(qt)&&Kn(`Cannot register multiple overloads of a function with the same number of arguments (${qt})!`),ge[ct].overloadTable[qt]=ot):ge[ct]=ot},pt=48,$t=57,en=ct=>{if(ct===void 0)return"_unknown";ct=ct.replace(/[^a-zA-Z0-9_]/g,"$");var ot=ct.charCodeAt(0);return ot>=pt&&ot<=$t?`_${ct}`:ct};function tn(ct,ot,qt,fn,Vn,Zn,ar,Xn){this.name=ct,this.constructor=ot,this.instancePrototype=qt,this.rawDestructor=fn,this.baseClass=Vn,this.getActualType=Zn,this.upcast=ar,this.downcast=Xn,this.pureVirtualFunctions=[]}var cn=(ct,ot,qt)=>{for(;ot!==qt;)ot.upcast||Kn(`Expected null or instance of ${qt.name}, got an instance of ${ot.name}`),ct=ot.upcast(ct),ot=ot.baseClass;return ct};function _n(ct,ot){if(ot===null)return this.isReference&&Kn(`null is not a valid ${this.name}`),0;ot.$$||Kn(`Cannot pass "${Vs(ot)}" as a ${this.name}`),ot.$$.ptr||Kn(`Cannot pass deleted object as a pointer of type ${this.name}`);var qt=ot.$$.ptrType.registeredClass,fn=cn(ot.$$.ptr,qt,this.registeredClass);return fn}function Fn(ct,ot){var qt;if(ot===null)return this.isReference&&Kn(`null is not a valid ${this.name}`),this.isSmartPointer?(qt=this.rawConstructor(),ct!==null&&ct.push(this.rawDestructor,qt),qt):0;(!ot||!ot.$$)&&Kn(`Cannot pass "${Vs(ot)}" as a ${this.name}`),ot.$$.ptr||Kn(`Cannot pass deleted object as a pointer of type ${this.name}`),!this.isConst&&ot.$$.ptrType.isConst&&Kn(`Cannot convert argument of type ${ot.$$.smartPtrType?ot.$$.smartPtrType.name:ot.$$.ptrType.name} to parameter type ${this.name}`);var fn=ot.$$.ptrType.registeredClass;if(qt=cn(ot.$$.ptr,fn,this.registeredClass),this.isSmartPointer)switch(ot.$$.smartPtr===void 0&&Kn("Passing raw pointer to smart pointer is illegal"),this.sharingPolicy){case 0:ot.$$.smartPtrType===this?qt=ot.$$.smartPtr:Kn(`Cannot convert argument of type ${ot.$$.smartPtrType?ot.$$.smartPtrType.name:ot.$$.ptrType.name} to parameter type ${this.name}`);break;case 1:qt=ot.$$.smartPtr;break;case 2:if(ot.$$.smartPtrType===this)qt=ot.$$.smartPtr;else{var Vn=ot.clone();qt=this.rawShare(qt,Ri.toHandle(()=>Vn.delete())),ct!==null&&ct.push(this.rawDestructor,qt)}break;default:Kn("Unsupporting sharing policy")}return qt}function Wn(ct,ot){if(ot===null)return this.isReference&&Kn(`null is not a valid ${this.name}`),0;ot.$$||Kn(`Cannot pass "${Vs(ot)}" as a ${this.name}`),ot.$$.ptr||Kn(`Cannot pass deleted object as a pointer of type ${this.name}`),ot.$$.ptrType.isConst&&Kn(`Cannot convert argument of type ${ot.$$.ptrType.name} to parameter type ${this.name}`);var qt=ot.$$.ptrType.registeredClass,fn=cn(ot.$$.ptr,qt,this.registeredClass);return fn}function qn(ct){return this.fromWireType(qe[ct>>2])}var dr=()=>{Object.assign(Ln.prototype,{getPointee(ct){return this.rawGetPointee&&(ct=this.rawGetPointee(ct)),ct},destructor(ct){this.rawDestructor?.(ct)},argPackAdvance:Sn,readValueFromPointer:qn,fromWireType:Vt})};function Ln(ct,ot,qt,fn,Vn,Zn,ar,Xn,nr,mr,br){this.name=ct,this.registeredClass=ot,this.isReference=qt,this.isConst=fn,this.isSmartPointer=Vn,this.pointeeType=Zn,this.sharingPolicy=ar,this.rawGetPointee=Xn,this.rawConstructor=nr,this.rawShare=mr,this.rawDestructor=br,!Vn&&ot.baseClass===void 0?fn?(this.toWireType=_n,this.destructorFunction=null):(this.toWireType=Wn,this.destructorFunction=null):this.toWireType=Fn}var fr=(ct,ot,qt)=>{ge.hasOwnProperty(ct)||gr("Replacing nonexistent public symbol"),ge[ct].overloadTable!==void 0&&qt!==void 0||(ge[ct]=ot,ge[ct].argCount=qt)},_r=(ct,ot,qt)=>{ct=ct.replace(/p/g,"i");var fn=ge["dynCall_"+ct];return fn(ot,...qt)},yr=[],Hr,Sr=ct=>{var ot=yr[ct];return ot||(ct>=yr.length&&(yr.length=ct+1),yr[ct]=ot=Hr.get(ct)),ot},Cr=(ct,ot,qt=[])=>{if(ct.includes("j"))return _r(ct,ot,qt);var fn=Sr(ot)(...qt);return fn},vr=(ct,ot)=>(...qt)=>Cr(ct,ot,qt),jr=(ct,ot)=>{ct=An(ct);function qt(){return ct.includes("j")?vr(ct,ot):Sr(ot)}var fn=qt();return typeof fn!="function"&&Kn(`unknown function pointer with signature ${ct}: ${ot}`),fn},Rr=(ct,ot)=>{var qt=Pn(ot,function(fn){this.name=ot,this.message=fn;var Vn=new Error(fn).stack;Vn!==void 0&&(this.stack=this.toString()+`
`+Vn.replace(/^Error(:[^\n]*)?\n/,""))});return qt.prototype=Object.create(ct.prototype),qt.prototype.constructor=qt,qt.prototype.toString=function(){return this.message===void 0?this.name:`${this.name}: ${this.message}`},qt},Dr,Ur=ct=>{var ot=go(ct),qt=An(ot);return ns(ot),qt},Tr=(ct,ot)=>{var qt=[],fn={};function Vn(Zn){if(!fn[Zn]&&!zn[Zn]){if(In[Zn]){In[Zn].forEach(Vn);return}qt.push(Zn),fn[Zn]=!0}}throw ot.forEach(Vn),new Dr(`${ct}: `+qt.map(Ur).join([", "]))},Nr=(ct,ot,qt,fn,Vn,Zn,ar,Xn,nr,mr,br,Vr,ti)=>{br=An(br),Zn=jr(Vn,Zn),Xn&&=jr(ar,Xn),mr&&=jr(nr,mr),ti=jr(Vr,ti);var bi=en(br);Jn(bi,function(){Tr(`Cannot construct ${br} due to unbound types`,[fn])}),hr([ct,ot,qt],fn?[fn]:[],Ai=>{Ai=Ai[0];var Gs,_i;fn?(Gs=Ai.registeredClass,_i=Gs.instancePrototype):_i=Nn.prototype;var ua=Pn(br,function(...Na){if(Object.getPrototypeOf(this)!==fa)throw new er("Use 'new' to construct "+br);if(Wi.constructor_body===void 0)throw new er(br+" has no accessible constructor");var da=Wi.constructor_body[Na.length];if(da===void 0)throw new er(`Tried to invoke ctor of ${br} with invalid number of parameters (${Na.length}) - expected (${Object.keys(Wi.constructor_body).toString()}) parameters instead!`);return da.apply(this,Na)}),fa=Object.create(_i,{constructor:{value:ua}});ua.prototype=fa;var Wi=new tn(br,ua,fa,ti,Gs,Zn,Xn,mr);Wi.baseClass&&(Wi.baseClass.__derivedClasses??=[],Wi.baseClass.__derivedClasses.push(Wi));var jo=new Ln(br,Wi,!0,!1,!1),La=new Ln(br+"*",Wi,!1,!1,!1),Oa=new Ln(br+" const*",Wi,!1,!0,!1);return di[ct]={pointerType:La,constPointerType:Oa},fr(bi,ua),[jo,La,Oa]})},Lr=(ct,ot)=>{for(var qt=[],fn=0;fn<ct;fn++)qt.push(qe[ot+fn*4>>2]);return qt},ri=ct=>{for(;ct.length;){var ot=ct.pop(),qt=ct.pop();qt(ot)}};function Xr(ct){for(var ot=1;ot<ct.length;++ot)if(ct[ot]!==null&&ct[ot].destructorFunction===void 0)return!0;return!1}function ei(ct,ot){if(!(ct instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof ct} which is not a function`);var qt=Pn(ct.name||"unknownFunctionName",function(){});qt.prototype=ct.prototype;var fn=new qt,Vn=ct.apply(fn,ot);return Vn instanceof Object?Vn:fn}function vi(ct,ot,qt,fn){for(var Vn=Xr(ct),Zn=ct.length,ar="",Xn="",nr=0;nr<Zn-2;++nr)ar+=(nr!==0?", ":"")+"arg"+nr,Xn+=(nr!==0?", ":"")+"arg"+nr+"Wired";var mr=`
        return function (${ar}) {
        if (arguments.length !== ${Zn-2}) {
          throwBindingError('function ' + humanName + ' called with ' + arguments.length + ' arguments, expected ${Zn-2}');
        }`;Vn&&(mr+=`var destructors = [];
`);var br=Vn?"destructors":"null",Vr=["humanName","throwBindingError","invoker","fn","runDestructors","retType","classParam"];ot&&(mr+="var thisWired = classParam['toWireType']("+br+`, this);
`);for(var nr=0;nr<Zn-2;++nr)mr+="var arg"+nr+"Wired = argType"+nr+"['toWireType']("+br+", arg"+nr+`);
`,Vr.push("argType"+nr);if(ot&&(Xn="thisWired"+(Xn.length>0?", ":"")+Xn),mr+=(qt||fn?"var rv = ":"")+"invoker(fn"+(Xn.length>0?", ":"")+Xn+`);
`,Vn)mr+=`runDestructors(destructors);
`;else for(var nr=ot?1:2;nr<ct.length;++nr){var ti=nr===1?"thisWired":"arg"+(nr-2)+"Wired";ct[nr].destructorFunction!==null&&(mr+=`${ti}_dtor(${ti});
`,Vr.push(`${ti}_dtor`))}return qt&&(mr+=`var ret = retType['fromWireType'](rv);
return ret;
`),mr+=`}
`,[Vr,mr]}function wi(ct,ot,qt,fn,Vn,Zn){var ar=ot.length;ar<2&&Kn("argTypes array size mismatch! Must at least get return value and 'this' types!");for(var Xn=ot[1]!==null&&qt!==null,nr=Xr(ot),mr=ot[0].name!=="void",br=[ct,Kn,fn,Vn,ri,ot[0],ot[1]],Vr=0;Vr<ar-2;++Vr)br.push(ot[Vr+2]);if(!nr)for(var Vr=Xn?1:2;Vr<ot.length;++Vr)ot[Vr].destructorFunction!==null&&br.push(ot[Vr].destructorFunction);let[ti,bi]=vi(ot,Xn,mr,Zn);ti.push(bi);var Ai=ei(Function,ti)(...br);return Pn(ct,Ai)}var Ui=(ct,ot,qt,fn,Vn,Zn)=>{var ar=Lr(ot,qt);Vn=jr(fn,Vn),hr([],[ct],Xn=>{Xn=Xn[0];var nr=`constructor ${Xn.name}`;if(Xn.registeredClass.constructor_body===void 0&&(Xn.registeredClass.constructor_body=[]),Xn.registeredClass.constructor_body[ot-1]!==void 0)throw new er(`Cannot register multiple constructors with identical number of parameters (${ot-1}) for class '${Xn.name}'! Overload resolution is currently only performed using the parameter count, not actual type info!`);return Xn.registeredClass.constructor_body[ot-1]=()=>{Tr(`Cannot construct ${Xn.name} due to unbound types`,ar)},hr([],ar,mr=>(mr.splice(1,0,null),Xn.registeredClass.constructor_body[ot-1]=wi(nr,mr,null,Vn,Zn),[])),[]})},ws=ct=>{ct=ct.trim();const ot=ct.indexOf("(");return ot!==-1?ct.substr(0,ot):ct},Rs=(ct,ot,qt,fn,Vn,Zn,ar,Xn,nr)=>{var mr=Lr(qt,fn);ot=An(ot),ot=ws(ot),Zn=jr(Vn,Zn),hr([],[ct],br=>{br=br[0];var Vr=`${br.name}.${ot}`;ot.startsWith("@@")&&(ot=Symbol[ot.substring(2)]),Xn&&br.registeredClass.pureVirtualFunctions.push(ot);function ti(){Tr(`Cannot call ${Vr} due to unbound types`,mr)}var bi=br.registeredClass.instancePrototype,Ai=bi[ot];return Ai===void 0||Ai.overloadTable===void 0&&Ai.className!==br.name&&Ai.argCount===qt-2?(ti.argCount=qt-2,ti.className=br.name,bi[ot]=ti):(Qn(bi,ot,Vr),bi[ot].overloadTable[qt-2]=ti),hr([],mr,Gs=>{var _i=wi(Vr,Gs,br,Zn,ar,nr);return bi[ot].overloadTable===void 0?(_i.argCount=qt-2,bi[ot]=_i):bi[ot].overloadTable[qt-2]=_i,[]}),[]})},ps=[],Br=[],Hs=ct=>{ct>9&&--Br[ct+1]===0&&(Br[ct]=void 0,ps.push(ct))},sa=()=>Br.length/2-5-ps.length,aa=()=>{Br.push(0,1,void 0,1,null,1,!0,1,!1,1),ge.count_emval_handles=sa},Ri={toValue:ct=>(ct||Kn("Cannot use deleted val. handle = "+ct),Br[ct]),toHandle:ct=>{switch(ct){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:{const ot=ps.pop()||Br.length;return Br[ot]=ct,Br[ot+1]=1,ot}}}},oa={name:"emscripten::val",fromWireType:ct=>{var ot=Ri.toValue(ct);return Hs(ct),ot},toWireType:(ct,ot)=>Ri.toHandle(ot),argPackAdvance:Sn,readValueFromPointer:qn,destructorFunction:null},Ba=ct=>un(ct,oa),Vs=ct=>{if(ct===null)return"null";var ot=typeof ct;return ot==="object"||ot==="array"||ot==="function"?ct.toString():""+ct},Pe=(ct,ot)=>{switch(ot){case 4:return function(qt){return this.fromWireType(Qe[qt>>2])};case 8:return function(qt){return this.fromWireType(nt[qt>>3])};default:throw new TypeError(`invalid float width (${ot}): ${ct}`)}},$e=(ct,ot,qt)=>{ot=An(ot),un(ct,{name:ot,fromWireType:fn=>fn,toWireType:(fn,Vn)=>Vn,argPackAdvance:Sn,readValueFromPointer:Pe(ot,qt),destructorFunction:null})},Ze=(ct,ot,qt)=>{switch(ot){case 1:return qt?fn=>He[fn]:fn=>ze[fn];case 2:return qt?fn=>je[fn>>1]:fn=>Ge[fn>>1];case 4:return qt?fn=>Xe[fn>>2]:fn=>qe[fn>>2];default:throw new TypeError(`invalid integer width (${ot}): ${ct}`)}},wt=(ct,ot,qt,fn,Vn)=>{ot=An(ot);var Zn=br=>br;if(fn===0){var ar=32-8*qt;Zn=br=>br<<ar>>>ar}var Xn=ot.includes("unsigned"),nr=(br,Vr)=>{},mr;Xn?mr=function(br,Vr){return nr(Vr,this.name),Vr>>>0}:mr=function(br,Vr){return nr(Vr,this.name),Vr},un(ct,{name:ot,fromWireType:Zn,toWireType:mr,argPackAdvance:Sn,readValueFromPointer:Ze(ot,qt,fn!==0),destructorFunction:null})},jt=(ct,ot,qt)=>{var fn=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],Vn=fn[ot];function Zn(ar){var Xn=qe[ar>>2],nr=qe[ar+4>>2];return new Vn(He.buffer,nr,Xn)}qt=An(qt),un(ct,{name:qt,fromWireType:Zn,argPackAdvance:Sn,readValueFromPointer:Zn},{ignoreDuplicateRegistrations:!0})},yn=(ct,ot,qt,fn)=>{if(!(fn>0))return 0;for(var Vn=qt,Zn=qt+fn-1,ar=0;ar<ct.length;++ar){var Xn=ct.charCodeAt(ar);if(Xn>=55296&&Xn<=57343){var nr=ct.charCodeAt(++ar);Xn=65536+((Xn&1023)<<10)|nr&1023}if(Xn<=127){if(qt>=Zn)break;ot[qt++]=Xn}else if(Xn<=2047){if(qt+1>=Zn)break;ot[qt++]=192|Xn>>6,ot[qt++]=128|Xn&63}else if(Xn<=65535){if(qt+2>=Zn)break;ot[qt++]=224|Xn>>12,ot[qt++]=128|Xn>>6&63,ot[qt++]=128|Xn&63}else{if(qt+3>=Zn)break;ot[qt++]=240|Xn>>18,ot[qt++]=128|Xn>>12&63,ot[qt++]=128|Xn>>6&63,ot[qt++]=128|Xn&63}}return ot[qt]=0,qt-Vn},Tn=(ct,ot,qt)=>yn(ct,ze,ot,qt),rr=ct=>{for(var ot=0,qt=0;qt<ct.length;++qt){var fn=ct.charCodeAt(qt);fn<=127?ot++:fn<=2047?ot+=2:fn>=55296&&fn<=57343?(ot+=4,++qt):ot+=3}return ot},ur=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ir=(ct,ot,qt)=>{for(var fn=ot+qt,Vn=ot;ct[Vn]&&!(Vn>=fn);)++Vn;if(Vn-ot>16&&ct.buffer&&ur)return ur.decode(ct.subarray(ot,Vn));for(var Zn="";ot<Vn;){var ar=ct[ot++];if(!(ar&128)){Zn+=String.fromCharCode(ar);continue}var Xn=ct[ot++]&63;if((ar&224)==192){Zn+=String.fromCharCode((ar&31)<<6|Xn);continue}var nr=ct[ot++]&63;if((ar&240)==224?ar=(ar&15)<<12|Xn<<6|nr:ar=(ar&7)<<18|Xn<<12|nr<<6|ct[ot++]&63,ar<65536)Zn+=String.fromCharCode(ar);else{var mr=ar-65536;Zn+=String.fromCharCode(55296|mr>>10,56320|mr&1023)}}return Zn},wr=(ct,ot)=>ct?Ir(ze,ct,ot):"",ui=(ct,ot)=>{ot=An(ot);var qt=ot==="std::string";un(ct,{name:ot,fromWireType(fn){var Vn=qe[fn>>2],Zn=fn+4,ar;if(qt)for(var Xn=Zn,nr=0;nr<=Vn;++nr){var mr=Zn+nr;if(nr==Vn||ze[mr]==0){var br=mr-Xn,Vr=wr(Xn,br);ar===void 0?ar=Vr:(ar+="\0",ar+=Vr),Xn=mr+1}}else{for(var ti=new Array(Vn),nr=0;nr<Vn;++nr)ti[nr]=String.fromCharCode(ze[Zn+nr]);ar=ti.join("")}return ns(fn),ar},toWireType(fn,Vn){Vn instanceof ArrayBuffer&&(Vn=new Uint8Array(Vn));var Zn,ar=typeof Vn=="string";ar||Vn instanceof Uint8Array||Vn instanceof Uint8ClampedArray||Vn instanceof Int8Array||Kn("Cannot pass non-string to std::string"),qt&&ar?Zn=rr(Vn):Zn=Vn.length;var Xn=ca(4+Zn+1),nr=Xn+4;if(qe[Xn>>2]=Zn,qt&&ar)Tn(Vn,nr,Zn+1);else if(ar)for(var mr=0;mr<Zn;++mr){var br=Vn.charCodeAt(mr);br>255&&(ns(nr),Kn("String has UTF-16 code units that do not fit in 8 bits")),ze[nr+mr]=br}else for(var mr=0;mr<Zn;++mr)ze[nr+mr]=Vn[mr];return fn!==null&&fn.push(ns,Xn),Xn},argPackAdvance:Sn,readValueFromPointer:qn,destructorFunction(fn){ns(fn)}})},Hi=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,bs=(ct,ot)=>{for(var qt=ct,fn=qt>>1,Vn=fn+ot/2;!(fn>=Vn)&&Ge[fn];)++fn;if(qt=fn<<1,qt-ct>32&&Hi)return Hi.decode(ze.subarray(ct,qt));for(var Zn="",ar=0;!(ar>=ot/2);++ar){var Xn=je[ct+ar*2>>1];if(Xn==0)break;Zn+=String.fromCharCode(Xn)}return Zn},ms=(ct,ot,qt)=>{if(qt??=2147483647,qt<2)return 0;qt-=2;for(var fn=ot,Vn=qt<ct.length*2?qt/2:ct.length,Zn=0;Zn<Vn;++Zn){var ar=ct.charCodeAt(Zn);je[ot>>1]=ar,ot+=2}return je[ot>>1]=0,ot-fn},As=ct=>ct.length*2,gs=(ct,ot)=>{for(var qt=0,fn="";!(qt>=ot/4);){var Vn=Xe[ct+qt*4>>2];if(Vn==0)break;if(++qt,Vn>=65536){var Zn=Vn-65536;fn+=String.fromCharCode(55296|Zn>>10,56320|Zn&1023)}else fn+=String.fromCharCode(Vn)}return fn},xs=(ct,ot,qt)=>{if(qt??=2147483647,qt<4)return 0;for(var fn=ot,Vn=fn+qt-4,Zn=0;Zn<ct.length;++Zn){var ar=ct.charCodeAt(Zn);if(ar>=55296&&ar<=57343){var Xn=ct.charCodeAt(++Zn);ar=65536+((ar&1023)<<10)|Xn&1023}if(Xe[ot>>2]=ar,ot+=4,ot+4>Vn)break}return Xe[ot>>2]=0,ot-fn},Bs=ct=>{for(var ot=0,qt=0;qt<ct.length;++qt){var fn=ct.charCodeAt(qt);fn>=55296&&fn<=57343&&++qt,ot+=4}return ot},Da=(ct,ot,qt)=>{qt=An(qt);var fn,Vn,Zn,ar;ot===2?(fn=bs,Vn=ms,ar=As,Zn=Xn=>Ge[Xn>>1]):ot===4&&(fn=gs,Vn=xs,ar=Bs,Zn=Xn=>qe[Xn>>2]),un(ct,{name:qt,fromWireType:Xn=>{for(var nr=qe[Xn>>2],mr,br=Xn+4,Vr=0;Vr<=nr;++Vr){var ti=Xn+4+Vr*ot;if(Vr==nr||Zn(ti)==0){var bi=ti-br,Ai=fn(br,bi);mr===void 0?mr=Ai:(mr+="\0",mr+=Ai),br=ti+ot}}return ns(Xn),mr},toWireType:(Xn,nr)=>{typeof nr!="string"&&Kn(`Cannot pass non-string to C++ string type ${qt}`);var mr=ar(nr),br=ca(4+mr+ot);return qe[br>>2]=mr/ot,Vn(nr,br+4,mr+ot),Xn!==null&&Xn.push(ns,br),br},argPackAdvance:Sn,readValueFromPointer:qn,destructorFunction(Xn){ns(Xn)}})},No=(ct,ot)=>{ot=An(ot),un(ct,{isVoid:!0,name:ot,argPackAdvance:0,fromWireType:()=>{},toWireType:(qt,fn)=>{}})},oo=(ct,ot,qt)=>ze.copyWithin(ct,ot,ot+qt),Ia=(ct,ot)=>{var qt=zn[ct];return qt===void 0&&Kn(`${ot} has unknown type ${Ur(ct)}`),qt},lo=(ct,ot,qt)=>{var fn=[],Vn=ct.toWireType(fn,qt);return fn.length&&(qe[ot>>2]=Ri.toHandle(fn)),Vn},_l=(ct,ot,qt)=>(ct=Ri.toValue(ct),ot=Ia(ot,"emval::as"),lo(ot,qt,ct)),Ti={},co=ct=>{var ot=Ti[ct];return ot===void 0?An(ct):ot},Pa=[],Fo=(ct,ot,qt,fn,Vn)=>(ct=Pa[ct],ot=Ri.toValue(ot),qt=co(qt),ct(ot,ot[qt],fn,Vn)),ko=ct=>{var ot=Pa.length;return Pa.push(ct),ot},Uo=(ct,ot)=>{for(var qt=new Array(ct),fn=0;fn<ct;++fn)qt[fn]=Ia(qe[ot+fn*4>>2],"parameter "+fn);return qt},la=(ct,ot,qt)=>{var fn=Uo(ct,ot),Vn=fn.shift();ct--;var Zn=`return function (obj, func, destructorsRef, args) {
`,ar=0,Xn=[];qt===0&&Xn.push("obj");for(var nr=["retType"],mr=[Vn],br=0;br<ct;++br)Xn.push("arg"+br),nr.push("argType"+br),mr.push(fn[br]),Zn+=`  var arg${br} = argType${br}.readValueFromPointer(args${ar?"+"+ar:""});
`,ar+=fn[br].argPackAdvance;var Vr=qt===1?"new func":"func.call";Zn+=`  var rv = ${Vr}(${Xn.join(", ")});
`,Vn.isVoid||(nr.push("emval_returnValue"),mr.push(lo),Zn+=`  return emval_returnValue(retType, destructorsRef, rv);
`),Zn+=`};
`,nr.push(Zn);var ti=ei(Function,nr)(...mr),bi=`methodCaller<(${fn.map(Ai=>Ai.name).join(", ")}) => ${Vn.name}>`;return ko(Pn(bi,ti))},uo=(ct,ot)=>(ct=Ri.toValue(ct),ot=Ri.toValue(ot),Ri.toHandle(ct[ot])),Ho=ct=>{ct>9&&(Br[ct+1]+=1)},Vo=ct=>Ri.toHandle(co(ct)),zo=ct=>{var ot=Ri.toValue(ct);ri(ot),Hs(ct)},fo=(ct,ot)=>{ct=Ia(ct,"_emval_take_value");var qt=ct.readValueFromPointer(ot);return Ri.toHandle(qt)},ho=()=>1073741824,Go=ct=>{var ot=Ue.buffer,qt=(ct-ot.byteLength+65535)/65536;try{return Ue.grow(qt),Nt(),1}catch{}},po=ct=>{var ot=ze.length;ct>>>=0;var qt=ho();if(ct>qt)return!1;for(var fn=(nr,mr)=>nr+(mr-nr%mr)%mr,Vn=1;Vn<=4;Vn*=2){var Zn=ot*(1+.2/Vn);Zn=Math.min(Zn,ct+100663296);var ar=Math.min(qt,fn(Math.max(ct,Zn),65536)),Xn=Go(ar);if(Xn)return!0}return!1};on(),er=ge.BindingError=class extends Error{constructor(ot){super(ot),this.name="BindingError"}},lr=ge.InternalError=class extends Error{constructor(ot){super(ot),this.name="InternalError"}},Cn(),mi(),dr(),Dr=ge.UnboundTypeError=Rr(Error,"UnboundTypeError"),aa();var mo={n:nn,t:gn,s:Xt,x:wn,r:Nr,q:Ui,k:Rs,w:Ba,m:$e,c:wt,a:jt,l:ui,f:Da,y:No,v:oo,h:_l,o:Fo,b:Hs,p:la,i:uo,g:Ho,j:Vo,d:zo,e:fo,u:po},ji=Bn(),go=ct=>(go=ji.B)(ct),ca=ct=>(ca=ji.D)(ct),ns=ct=>(ns=ji.E)(ct),rs=ct=>(rs=ji.F)(ct);ge.addOnPostRun=Yt;var zs;an=function ct(){zs||$o(),zs||(an=ct)};function $o(){if(Gt>0||(Ft(),Gt>0))return;function ct(){zs||(zs=!0,ge.calledRun=!0,!Ne&&(Je(),xe(ge),ge.onRuntimeInitialized&&ge.onRuntimeInitialized(),Wt()))}ge.setStatus?(ge.setStatus("Running..."),setTimeout(function(){setTimeout(function(){ge.setStatus("")},1),ct()},1)):ct()}if(ge.preInit)for(typeof ge.preInit=="function"&&(ge.preInit=[ge.preInit]);ge.preInit.length>0;)ge.preInit.pop()();return $o(),me=ve,me}})();function WorkerWrapper$1(fe){return new Worker(""+new URL("SplatSortWorker-DiSpcAPr.js",import.meta.url).href,{type:"module",name:fe?.name})}const byteToHex=[];for(let fe=0;fe<256;++fe)byteToHex.push((fe+256).toString(16).slice(1));function unsafeStringify(fe,K=0){return(byteToHex[fe[K+0]]+byteToHex[fe[K+1]]+byteToHex[fe[K+2]]+byteToHex[fe[K+3]]+"-"+byteToHex[fe[K+4]]+byteToHex[fe[K+5]]+"-"+byteToHex[fe[K+6]]+byteToHex[fe[K+7]]+"-"+byteToHex[fe[K+8]]+byteToHex[fe[K+9]]+"-"+byteToHex[fe[K+10]]+byteToHex[fe[K+11]]+byteToHex[fe[K+12]]+byteToHex[fe[K+13]]+byteToHex[fe[K+14]]+byteToHex[fe[K+15]]).toLowerCase()}let getRandomValues;const rnds8=new Uint8Array(16);function rng(){if(!getRandomValues){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");getRandomValues=crypto.getRandomValues.bind(crypto)}return getRandomValues(rnds8)}const randomUUID=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),native={randomUUID};function v4(fe,K,me){if(native.randomUUID&&!fe)return native.randomUUID();fe=fe||{};const ge=fe.random??fe.rng?.()??rng();if(ge.length<16)throw new Error("Random bytes length must be >= 16");return ge[6]=ge[6]&15|64,ge[8]=ge[8]&63|128,unsafeStringify(ge)}const GaussianSplatMaterial=shaderMaterial({numGaussians:0,focal:[1,1],viewport:[640,480],near:1,far:100,depthTest:!0,depthWrite:!1,transparent:!0,textureBuffer:null,textureT_camera_groups:null,transitionInState:0},`precision highp usampler2D; // Most important: ints must be 32-bit.
  precision mediump float;

  // Index from the splat sorter.
  attribute uint sortedIndex;

  // Buffers for splat data; each Gaussian gets 4 floats and 4 int32s. We just
  // copy quadjr for this.
  uniform usampler2D textureBuffer;

  // We could also use a uniform to store transforms, but this would be more
  // limiting in terms of the # of groups we can have.
  uniform sampler2D textureT_camera_groups;

  // Various other uniforms...
  uniform uint numGaussians;
  uniform vec2 focal;
  uniform vec2 viewport;
  uniform float near;
  uniform float far;

  // Fade in state between [0, 1].
  uniform float transitionInState;

  out vec4 vRgba;
  out vec2 vPosition;

  // Function to fetch and construct the i-th transform matrix using texelFetch
  mat4 getGroupTransform(uint i) {
    // Calculate the base index for the i-th transform.
    uint baseIndex = i * 3u;

    // Fetch the texels that represent the first 3 rows of the transform. We
    // choose to use row-major here, since it lets us exclude the fourth row of
    // the matrix.
    vec4 row0 = texelFetch(textureT_camera_groups, ivec2(baseIndex + 0u, 0), 0);
    vec4 row1 = texelFetch(textureT_camera_groups, ivec2(baseIndex + 1u, 0), 0);
    vec4 row2 = texelFetch(textureT_camera_groups, ivec2(baseIndex + 2u, 0), 0);

    // Construct the mat4 with the fetched rows.
    mat4 transform = mat4(row0, row1, row2, vec4(0.0, 0.0, 0.0, 1.0));
    return transpose(transform);
  }

  void main () {
    // Get position + scale from float buffer.
    ivec2 texSize = textureSize(textureBuffer, 0);
    uint texStart = sortedIndex << 1u;
    ivec2 texPos0 = ivec2(texStart % uint(texSize.x), texStart / uint(texSize.x));


    // Fetch from textures.
    uvec4 floatBufferData = texelFetch(textureBuffer, texPos0, 0);
    mat4 T_camera_group = getGroupTransform(floatBufferData.w);

    // Any early return will discard the fragment.
    gl_Position = vec4(0.0, 0.0, 2.0, 1.0);

    // Get center wrt camera. modelViewMatrix is T_cam_world.
    vec3 center = uintBitsToFloat(floatBufferData.xyz);
    vec4 c_cam = T_camera_group * vec4(center, 1);
    if (-c_cam.z < near || -c_cam.z > far)
      return;
    vec4 pos2d = projectionMatrix * c_cam;
    float clip = 1.1 * pos2d.w;
    if (pos2d.x < -clip || pos2d.x > clip || pos2d.y < -clip || pos2d.y > clip)
      return;

    // Read covariance terms.
    ivec2 texPos1 = ivec2((texStart + 1u) % uint(texSize.x), (texStart + 1u) / uint(texSize.x));
    uvec4 intBufferData = texelFetch(textureBuffer, texPos1, 0);

    // Get covariance terms from int buffer.
    uint rgbaUint32 = intBufferData.w;
    vec2 triu01 = unpackHalf2x16(intBufferData.x);
    vec2 triu23 = unpackHalf2x16(intBufferData.y);
    vec2 triu45 = unpackHalf2x16(intBufferData.z);

    // Transition in.
    float startTime = 0.8 * float(sortedIndex) / float(numGaussians);
    float cov_scale = smoothstep(startTime, startTime + 0.2, transitionInState);

    // Do the actual splatting.
    mat3 cov3d = mat3(
        triu01.x, triu01.y, triu23.x,
        triu01.y, triu23.y, triu45.x,
        triu23.x, triu45.x, triu45.y
    );
    mat3 J = mat3(
        // Matrices are column-major.
        focal.x / c_cam.z, 0., 0.0,
        0., focal.y / c_cam.z, 0.0,
        -(focal.x * c_cam.x) / (c_cam.z * c_cam.z), -(focal.y * c_cam.y) / (c_cam.z * c_cam.z), 0.
    );
    mat3 A = J * mat3(T_camera_group);
    mat3 cov_proj = A * cov3d * transpose(A);
    float diag1 = cov_proj[0][0] + 0.3;
    float offDiag = cov_proj[0][1];
    float diag2 = cov_proj[1][1] + 0.3;

    // Eigendecomposition.
    float mid = 0.5 * (diag1 + diag2);
    float radius = length(vec2((diag1 - diag2) / 2.0, offDiag));
    float lambda1 = mid + radius;
    float lambda2 = mid - radius;
    if (lambda2 < 0.0)
      return;
    vec2 diagonalVector = normalize(vec2(offDiag, lambda1 - diag1));
    vec2 v1 = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;
    vec2 v2 = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);

    vRgba = vec4(
      float(rgbaUint32 & uint(0xFF)) / 255.0,
      float((rgbaUint32 >> uint(8)) & uint(0xFF)) / 255.0,
      float((rgbaUint32 >> uint(16)) & uint(0xFF)) / 255.0,
      float(rgbaUint32 >> uint(24)) / 255.0
    );

    // Throw the Gaussian off the screen if it's too close, too far, or too small.
    float weightedDeterminant = vRgba.a * (diag1 * diag2 - offDiag * offDiag);
    if (weightedDeterminant < 0.25)
      return;
    vPosition = position.xy;

    gl_Position = vec4(
        vec2(pos2d) / pos2d.w
            + position.x * v1 / viewport * 2.0
            + position.y * v2 / viewport * 2.0, pos2d.z / pos2d.w, 1.);
  }
`,`precision mediump float;

  uniform vec2 viewport;
  uniform vec2 focal;

  in vec4 vRgba;
  in vec2 vPosition;

  void main () {
    float A = -dot(vPosition, vPosition);
    if (A < -4.0) discard;
    float B = exp(A) * vRgba.a;
    if (B < 0.01) discard;  // alphaTest.
    gl_FragColor = vec4(vRgba.rgb, B);
  }`);function useGaussianMeshProps(fe,K){const me=fe.length/8,ge=useThree(Te=>Te.gl).capabilities.maxTextureSize,xe=new InstancedBufferGeometry;xe.instanceCount=me,xe.setIndex(new BufferAttribute(new Uint32Array([0,2,1,0,3,2]),1)),xe.setAttribute("position",new BufferAttribute(new Float32Array([-2,-2,2,-2,2,2,-2,2]),2));const ye=new InstancedBufferAttribute(new Uint32Array(me),1);ye.setUsage(DynamicDrawUsage),xe.setAttribute("sortedIndex",ye);const ve=Math.min(me*2,ge),_e=Math.ceil(me*2/ve),Ee=new Uint32Array(ve*_e*4);Ee.set(fe);const be=new DataTexture(Ee,ve,_e,RGBAIntegerFormat,UnsignedIntType);be.internalFormat="RGBA32UI",be.needsUpdate=!0;const Ae=new Float32Array(K*12),Se=new DataTexture(Ae,K*12/4,1,RGBAFormat,FloatType);Se.internalFormat="RGBA32F",Se.needsUpdate=!0;const Ce=new GaussianSplatMaterial;return Ce.textureBuffer=be,Ce.textureT_camera_groups=Se,Ce.numGaussians=me,Ce.focal=[640,480],{geometry:xe,material:Ce,textureBuffer:be,sortedIndexAttribute:ye,textureT_camera_groups:Se,rowMajorT_camera_groups:Ae}}function useGaussianSplatStore(){const fe=React$4.useRef({});return React$4.useState(()=>create$3(K=>({groupBufferFromId:{},nodeRefFromId:fe,setBuffer:(me,ge)=>K(xe=>({groupBufferFromId:{...xe.groupBufferFromId,[me]:ge}})),removeBuffer:me=>K(ge=>{const{[me]:xe,...ye}=ge.groupBufferFromId;return{groupBufferFromId:ye}})})))[0]}const GaussianSplatsContext=React$4.createContext(null);function SplatRenderContext({children:fe}){const K=useGaussianSplatStore();return jsxRuntimeExports.jsxs(GaussianSplatsContext.Provider,{value:{useGaussianSplatStore:K,updateCamera:React$4.useRef(null),meshPropsRef:React$4.useRef(null)},children:[jsxRuntimeExports.jsx(SplatRenderer,{}),fe]})}const SplatObject=React$4.forwardRef(function({buffer:K},me){const ge=React$4.useContext(GaussianSplatsContext),xe=ge.useGaussianSplatStore(Ee=>Ee.setBuffer),ye=ge.useGaussianSplatStore(Ee=>Ee.removeBuffer),ve=ge.useGaussianSplatStore(Ee=>Ee.nodeRefFromId),_e=React$4.useMemo(()=>v4(),[K]);return React$4.useEffect(()=>(xe(_e,K),()=>{ye(_e),delete ve.current[_e]}),[K]),jsxRuntimeExports.jsx("group",{ref:Ee=>{Ee!==null&&(me!==null&&("current"in me?me.current=Ee:me(Ee)),ve.current[_e]=Ee)}})});function SplatRenderer(){const K=React$4.useContext(GaussianSplatsContext).useGaussianSplatStore(me=>me.groupBufferFromId);return Object.keys(K).length>0?jsxRuntimeExports.jsx(SplatRendererImpl,{}):null}function SplatRendererImpl(){const fe=React$4.useContext(GaussianSplatsContext),K=fe.useGaussianSplatStore(De=>De.groupBufferFromId),me=fe.useGaussianSplatStore(De=>De.nodeRefFromId),ge=mergeGaussianGroups(K),xe=useGaussianMeshProps(ge.gaussianBuffer,ge.numGroups);fe.meshPropsRef.current=xe;const ye=new WorkerWrapper$1;let ve=!1;ye.onmessage=De=>{const Ie=De.data.sortedIndices;xe.sortedIndexAttribute.set(Ie),xe.sortedIndexAttribute.needsUpdate=!0,ve||(xe.material.uniforms.numGaussians.value=ge.numGaussians,xe.textureBuffer.needsUpdate=!0,ve=!0)};function _e(De){ye.postMessage(De)}_e({setBuffer:ge.gaussianBuffer,setGroupIndices:ge.groupIndices}),React$4.useEffect(()=>()=>{xe.textureBuffer.dispose(),xe.geometry.dispose(),xe.material.dispose(),_e({close:!0})});const Ee=React$4.useRef(null),be=new Matrix4,Ae=new Float32Array(ge.numGroups*4),Se=xe.rowMajorT_camera_groups.slice().fill(0),Ce=[],Te=React$4.useRef(null);React$4.useEffect(()=>{(async()=>Te.current=new(await Module()).Sorter(ge.gaussianBuffer,ge.groupIndices))()},[ge.gaussianBuffer,ge.groupIndices]);const Re=React$4.useCallback(function(Ie,Be,Le,Oe){const Fe=Ie.fov*Math.PI/180,Ue=Be/Le,Ne=2*Math.atan(Math.tan(Fe/2)*Ue),He=Le/(2*Math.tan(Fe/2)),ze=Be/(2*Math.tan(Ne/2));if(xe.material===void 0)return;const je=xe.material.uniforms;je.focal.value=[ze,He],je.near.value=Ie.near,je.far.value=Ie.far,je.viewport.value=[Be,Le],Ie.updateMatrixWorld();const Ge=Ie.matrixWorldInverse,Xe=[];let qe=!1;for(const[nt,Nt]of Object.keys(K).entries()){const Ye=me.current[Nt];if(Ye===void 0)continue;be.copy(Ge).multiply(Ye.matrixWorld);const at=be.elements;Ae.set([at[2],at[6],at[10],at[14]],nt*4);const rt=be.transpose().elements;xe.rowMajorT_camera_groups.set(rt.slice(0,12),nt*12);let Ft=Ye.visible&&Ye.parent!==null;Ft&&Ye.traverseAncestors(Je=>{Ft=Ft&&Je.visible}),Xe.push(Ft&&Ce[nt]===!0),Ce[nt]!==Ft&&(Ce[nt]=Ft,qe=!0)}const Qe=!xe.rowMajorT_camera_groups.every((nt,Nt)=>nt===Se[Nt]);if(Qe)if(Oe&&Te.current!==null){const nt=Te.current.sort(Ae);xe.sortedIndexAttribute.set(nt),xe.sortedIndexAttribute.needsUpdate=!0}else _e({setTz_camera_groups:Ae});if(Qe||qe){for(const[nt,Nt]of Xe.entries())Nt||(xe.rowMajorT_camera_groups[nt*12+3]=1e10,xe.rowMajorT_camera_groups[nt*12+7]=1e10,xe.rowMajorT_camera_groups[nt*12+11]=1e10);Se.set(xe.rowMajorT_camera_groups),xe.textureT_camera_groups.needsUpdate=!0}},[xe]);return fe.updateCamera.current=Re,useFrame((De,Ie)=>{if(Ee.current===null||ye===null||xe.rowMajorT_camera_groups.length===0)return;const Le=xe.material.uniforms;Le.transitionInState.value=Math.min(Le.transitionInState.value+Ie*2,1),Re(De.camera,De.viewport.dpr*De.size.width,De.viewport.dpr*De.size.height,!1)},-100),jsxRuntimeExports.jsx("mesh",{ref:Ee,geometry:xe.geometry,material:xe.material,renderOrder:1e4})}function mergeGaussianGroups(fe){let K=0;for(const _e of Object.values(fe))K+=_e.length;const me=K/8,ge=new Uint32Array(K),xe=new Uint32Array(me);let ye=0;for(const[_e,Ee]of Object.values(fe).entries()){xe.fill(_e,ye/8,(ye+Ee.length)/8),ge.set(Ee,ye);for(let be=0;be<Ee.length;be+=8)ge[ye+be+3]=_e;ye+=Ee.length}const ve=Object.keys(fe).length;return{numGaussians:me,gaussianBuffer:ge,numGroups:ve,groupIndices:xe}}const GuiComponentContext=reactExports.createContext({folderDepth:0,setValue:()=>{},messageSender:()=>{},GuiContainer:()=>{throw new Error("GuiComponentContext not initialized")}});var htmlIconWrapper="_11mcxao0",sliderDefaultMarks="_11mcxao1";function ButtonComponent({uuid:fe,props:{visible:K,disabled:me,label:ge,color:xe,_icon_html:ye}}){const{messageSender:ve}=React$4.useContext(GuiComponentContext);return K??!0?jsxRuntimeExports.jsx(Box,{mx:"xs",pb:"0.5em",children:jsxRuntimeExports.jsx(Button,{id:fe,fullWidth:!0,color:xe??void 0,onClick:()=>ve({type:"GuiUpdateMessage",uuid:fe,updates:{value:!0}}),style:{height:"2.125em"},disabled:me??!1,size:"sm",leftSection:ye===null?void 0:jsxRuntimeExports.jsx("div",{className:htmlIconWrapper,dangerouslySetInnerHTML:{__html:ye}}),children:ge})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function ViserInputComponent({uuid:fe,label:K,hint:me,children:ge}){const{folderDepth:xe}=reactExports.useContext(GuiComponentContext);return me!=null&&(ge=jsxRuntimeExports.jsx(Tooltip,{zIndex:100,label:me,multiline:!0,w:"15rem",withArrow:!0,openDelay:500,withinPortal:!0,children:jsxRuntimeExports.jsx(Box,{children:ge})})),K!==void 0&&(ge=jsxRuntimeExports.jsx(LabeledInput,{uuid:fe,label:K,input:ge,folderDepth:xe})),jsxRuntimeExports.jsx(Box,{pb:"0.5em",px:"xs",children:ge})}function LabeledInput(fe){return jsxRuntimeExports.jsxs(Flex,{align:"center",children:[jsxRuntimeExports.jsx(Box,{w:`${7.25-fe.folderDepth*.6375}em`,pr:"xs",style:{flexShrink:0,position:"relative"},children:jsxRuntimeExports.jsx(Text,{c:"dimmed",fz:"0.875em",fw:"450",lh:"1.375em",lts:"-0.75px",unselectable:"off",style:{width:"100%",boxSizing:"content-box"},children:jsxRuntimeExports.jsx("label",{htmlFor:fe.uuid,children:fe.label})})}),jsxRuntimeExports.jsx(Box,{style:{flexGrow:1},children:fe.input})]})}function VectorInput(fe){return jsxRuntimeExports.jsx(Flex,{justify:"space-between",columnGap:"0.5em",children:[...Array(fe.n).keys()].map(K=>jsxRuntimeExports.jsx(NumberInput,{id:K===0?fe.uuid:void 0,value:fe.value[K],onChange:me=>{const ge=[...fe.value];ge[K]=me===""?0:Number(me),fe.onChange(ge)},size:"xs",styles:{root:{flexGrow:1,width:0},input:{paddingLeft:"0.5em",paddingRight:"1.75em",textAlign:"right",height:"1.875em",minHeight:"1.875em"},controls:{height:"1.25em",width:"0.825em"}},rightSectionWidth:"1em",decimalScale:fe.precision,step:fe.step,min:fe.min===null?void 0:fe.min[K],max:fe.max===null?void 0:fe.max[K],stepHoldDelay:500,stepHoldInterval:me=>Math.max(1e3/me**2,25),disabled:fe.disabled},K))})}function SliderComponent({uuid:fe,value:K,props:{label:me,hint:ge,visible:xe,disabled:ye,min:ve,max:_e,precision:Ee,step:be,_marks:Ae}}){const{setValue:Se}=React$4.useContext(GuiComponentContext);if(!xe)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const Ce=De=>Se(fe,De),Te=useMantineColorScheme().colorScheme,Re=jsxRuntimeExports.jsxs(Flex,{justify:"space-between",children:[jsxRuntimeExports.jsx(Slider,{id:fe,className:Ae===null?sliderDefaultMarks:void 0,size:"xs",thumbSize:0,radius:"xs",style:{flexGrow:1},styles:De=>({thumb:{height:"0.75rem",width:"0.5rem"},trackContainer:{zIndex:3,position:"relative"},markLabel:{transform:"translate(-50%, 0.03rem)",fontSize:"0.6rem",textAlign:"center"},mark:{transform:"scale(1.95)"},markFilled:{background:ye?Te==="dark"?De.colors.dark[3]:De.colors.gray[4]:De.primaryColor}}),pt:"0.3em",pb:"0.2em",showLabelOnHover:!1,min:ve,max:_e,step:be??void 0,precision:Ee,value:K,onChange:Ce,marks:Ae===null?[{value:ve,label:`${ve.toFixed(6).replace(/\.?0+$/,"")}`},{value:_e,label:`${_e.toFixed(6).replace(/\.?0+$/,"")}`}]:Ae,disabled:ye}),jsxRuntimeExports.jsx(NumberInput,{value:K,onChange:De=>{De!==""&&Ce(Number(De))},size:"xs",min:ve,max:_e,hideControls:!0,step:be??void 0,style:{width:"3rem"},styles:{input:{padding:"0.375em",letterSpacing:"-0.5px",minHeight:"1.875em",height:"1.875em"}},ml:"xs"})]});return jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:ge,label:me,children:Re})}function NumberInputComponent({uuid:fe,value:K,props:{visible:me,label:ge,hint:xe,disabled:ye,precision:ve,min:_e,max:Ee,step:be}}){const{setValue:Ae}=reactExports.useContext(GuiComponentContext);return me?jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:xe,label:ge,children:jsxRuntimeExports.jsx(NumberInput,{id:fe,value:K,decimalScale:ve,min:_e??void 0,max:Ee??void 0,step:be,size:"xs",onChange:Se=>{Se!==""&&Ae(fe,Se)},styles:{input:{minHeight:"1.625rem",height:"1.625rem"},controls:{height:"1.625em",width:"0.825em"}},disabled:ye,stepHoldDelay:500,stepHoldInterval:Se=>Math.max(1e3/Se**2,25)})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function TextInputComponent({uuid:fe,value:K,props:{hint:me,label:ge,disabled:xe,visible:ye,multiline:ve}}){const{setValue:_e}=reactExports.useContext(GuiComponentContext);return ye?jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:me,label:ge,children:ve?jsxRuntimeExports.jsx(Textarea,{value:K,size:"xs",onChange:Ee=>{_e(fe,Ee.target.value)},styles:{input:{padding:"0 0.5em"}},disabled:xe,minRows:2,maxRows:6,autosize:!0,resize:"vertical"}):jsxRuntimeExports.jsx(TextInput,{value:K,size:"xs",onChange:Ee=>{_e(fe,Ee.target.value)},styles:{input:{minHeight:"1.625rem",height:"1.625rem",padding:"0 0.5em"}},disabled:xe})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function CheckboxComponent({uuid:fe,value:K,props:{disabled:me,visible:ge,hint:xe,label:ye}}){const{setValue:ve}=reactExports.useContext(GuiComponentContext);if(!ge)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});let _e=jsxRuntimeExports.jsx(Checkbox,{id:fe,checked:K,size:"xs",onChange:Ee=>{ve(fe,Ee.target.checked)},disabled:me});return xe!=null&&(_e=jsxRuntimeExports.jsx(Tooltip,{zIndex:100,label:xe,multiline:!0,w:"15rem",withArrow:!0,openDelay:500,withinPortal:!0,children:jsxRuntimeExports.jsx(Box,{style:{display:"inline-block"},children:_e})})),jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,label:ye,children:_e})}function Vector2Component({uuid:fe,value:K,props:{hint:me,label:ge,visible:xe,disabled:ye,min:ve,max:_e,step:Ee,precision:be}}){const{setValue:Ae}=reactExports.useContext(GuiComponentContext);return xe?jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:me,label:ge,children:jsxRuntimeExports.jsx(VectorInput,{uuid:fe,n:2,value:K,onChange:Se=>Ae(fe,Se),min:ve,max:_e,step:Ee,precision:be,disabled:ye})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function Vector3Component({uuid:fe,value:K,props:{hint:me,label:ge,visible:xe,disabled:ye,min:ve,max:_e,step:Ee,precision:be}}){const{setValue:Ae}=reactExports.useContext(GuiComponentContext);return xe?jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:me,label:ge,children:jsxRuntimeExports.jsx(VectorInput,{uuid:fe,n:3,value:K,onChange:Se=>Ae(fe,Se),min:ve,max:_e,step:Ee,precision:be,disabled:ye})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function DropdownComponent({uuid:fe,value:K,props:{hint:me,label:ge,disabled:xe,visible:ye,options:ve}}){const{setValue:_e}=reactExports.useContext(GuiComponentContext);return ye?jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:me,label:ge,children:jsxRuntimeExports.jsx(Select,{id:fe,radius:"xs",value:K,data:ve,onChange:Ee=>Ee!==null&&_e(fe,Ee),disabled:xe,searchable:!0,maxDropdownHeight:400,size:"xs",rightSectionWidth:"1.2em",styles:{input:{padding:"0.5em",letterSpacing:"-0.5px",minHeight:"1.625rem",height:"1.625rem"}},comboboxProps:{zIndex:1e3}})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function rgbToHex([fe,K,me]){const ge=fe.toString(16).padStart(2,"0"),xe=K.toString(16).padStart(2,"0"),ye=me.toString(16).padStart(2,"0");return`#${ge}${xe}${ye}`}function hexToRgb(fe){const K=fe.slice(1),me=parseInt(K.substring(0,2),16),ge=parseInt(K.substring(2,4),16),xe=parseInt(K.substring(4,6),16);return[me,ge,xe]}function rgbaToHex([fe,K,me,ge]){const xe=fe.toString(16).padStart(2,"0"),ye=K.toString(16).padStart(2,"0"),ve=me.toString(16).padStart(2,"0"),_e=ge.toString(16).padStart(2,"0");return`#${xe}${ye}${ve}${_e}`}function hexToRgba(fe){const K=fe.slice(1),me=parseInt(K.substring(0,2),16),ge=parseInt(K.substring(2,4),16),xe=parseInt(K.substring(4,6),16),ye=parseInt(K.substring(6,8),16);return[me,ge,xe,ye]}function RgbComponent({uuid:fe,value:K,props:{label:me,hint:ge,disabled:xe,visible:ye}}){const{setValue:ve}=reactExports.useContext(GuiComponentContext);return ye?jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:ge,label:me,children:jsxRuntimeExports.jsx(ColorInput,{disabled:xe,size:"xs",value:rgbToHex(K),onChange:_e=>ve(fe,hexToRgb(_e)),format:"hex",popoverProps:{zIndex:1e3},styles:{input:{height:"1.625rem",minHeight:"1.625rem"}}})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function RgbaComponent({uuid:fe,value:K,props:{label:me,hint:ge,disabled:xe,visible:ye}}){const{setValue:ve}=reactExports.useContext(GuiComponentContext);return ye?jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:ge,label:me,children:jsxRuntimeExports.jsx(ColorInput,{disabled:xe,size:"xs",value:rgbaToHex(K),onChange:_e=>ve(fe,hexToRgba(_e)),format:"hexa",popoverProps:{zIndex:1e3},styles:{input:{height:"1.625rem",minHeight:"1.625rem"}}})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function ButtonGroupComponent({uuid:fe,props:{hint:K,label:me,visible:ge,disabled:xe,options:ye}}){const{messageSender:ve}=reactExports.useContext(GuiComponentContext);return ge?jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:K,label:me,children:jsxRuntimeExports.jsx(Flex,{justify:"space-between",columnGap:"xs",children:ye.map((_e,Ee)=>jsxRuntimeExports.jsx(Button,{onClick:()=>ve({type:"GuiUpdateMessage",uuid:fe,updates:{value:_e}}),style:{flexGrow:1,wuuidth:0},disabled:xe,size:"compact-xs",variant:"outline",children:_e},Ee))})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}const emptyComponents={},MDXContext=React$4.createContext(emptyComponents);function useMDXComponents(fe){const K=React$4.useContext(MDXContext);return React$4.useMemo(function(){return typeof fe=="function"?fe(K):{...K,...fe}},[K,fe])}function MDXProvider(fe){let K;return fe.disableParentContext?K=typeof fe.components=="function"?fe.components(emptyComponents):fe.components||emptyComponents:K=useMDXComponents(fe.components),React$4.createElement(MDXContext.Provider,{value:K},fe.children)}const provider=Object.freeze(Object.defineProperty({__proto__:null,MDXProvider,useMDXComponents},Symbol.toStringTag,{value:"Module"}));function stringifyPosition(fe){return!fe||typeof fe!="object"?"":"position"in fe||"type"in fe?position$1(fe.position):"start"in fe||"end"in fe?position$1(fe):"line"in fe||"column"in fe?point$2(fe):""}function point$2(fe){return index(fe&&fe.line)+":"+index(fe&&fe.column)}function position$1(fe){return point$2(fe&&fe.start)+"-"+point$2(fe&&fe.end)}function index(fe){return fe&&typeof fe=="number"?fe:1}class VFileMessage extends Error{constructor(K,me,ge){super(),typeof me=="string"&&(ge=me,me=void 0);let xe="",ye={},ve=!1;if(me&&("line"in me&&"column"in me?ye={place:me}:"start"in me&&"end"in me?ye={place:me}:"type"in me?ye={ancestors:[me],place:me.position}:ye={...me}),typeof K=="string"?xe=K:!ye.cause&&K&&(ve=!0,xe=K.message,ye.cause=K),!ye.ruleId&&!ye.source&&typeof ge=="string"){const Ee=ge.indexOf(":");Ee===-1?ye.ruleId=ge:(ye.source=ge.slice(0,Ee),ye.ruleId=ge.slice(Ee+1))}if(!ye.place&&ye.ancestors&&ye.ancestors){const Ee=ye.ancestors[ye.ancestors.length-1];Ee&&(ye.place=Ee.position)}const _e=ye.place&&"start"in ye.place?ye.place.start:ye.place;this.ancestors=ye.ancestors||void 0,this.cause=ye.cause||void 0,this.column=_e?_e.column:void 0,this.fatal=void 0,this.file,this.message=xe,this.line=_e?_e.line:void 0,this.name=stringifyPosition(ye.place)||"1:1",this.place=ye.place||void 0,this.reason=this.message,this.ruleId=ye.ruleId||void 0,this.source=ye.source||void 0,this.stack=ve&&ye.cause&&typeof ye.cause.stack=="string"?ye.cause.stack:"",this.actual,this.expected,this.note,this.url}}VFileMessage.prototype.file="";VFileMessage.prototype.name="";VFileMessage.prototype.reason="";VFileMessage.prototype.message="";VFileMessage.prototype.stack="";VFileMessage.prototype.column=void 0;VFileMessage.prototype.line=void 0;VFileMessage.prototype.ancestors=void 0;VFileMessage.prototype.cause=void 0;VFileMessage.prototype.fatal=void 0;VFileMessage.prototype.place=void 0;VFileMessage.prototype.ruleId=void 0;VFileMessage.prototype.source=void 0;const minpath={basename,dirname,extname,join,sep:"/"};function basename(fe,K){if(K!==void 0&&typeof K!="string")throw new TypeError('"ext" argument must be a string');assertPath$1(fe);let me=0,ge=-1,xe=fe.length,ye;if(K===void 0||K.length===0||K.length>fe.length){for(;xe--;)if(fe.codePointAt(xe)===47){if(ye){me=xe+1;break}}else ge<0&&(ye=!0,ge=xe+1);return ge<0?"":fe.slice(me,ge)}if(K===fe)return"";let ve=-1,_e=K.length-1;for(;xe--;)if(fe.codePointAt(xe)===47){if(ye){me=xe+1;break}}else ve<0&&(ye=!0,ve=xe+1),_e>-1&&(fe.codePointAt(xe)===K.codePointAt(_e--)?_e<0&&(ge=xe):(_e=-1,ge=ve));return me===ge?ge=ve:ge<0&&(ge=fe.length),fe.slice(me,ge)}function dirname(fe){if(assertPath$1(fe),fe.length===0)return".";let K=-1,me=fe.length,ge;for(;--me;)if(fe.codePointAt(me)===47){if(ge){K=me;break}}else ge||(ge=!0);return K<0?fe.codePointAt(0)===47?"/":".":K===1&&fe.codePointAt(0)===47?"//":fe.slice(0,K)}function extname(fe){assertPath$1(fe);let K=fe.length,me=-1,ge=0,xe=-1,ye=0,ve;for(;K--;){const _e=fe.codePointAt(K);if(_e===47){if(ve){ge=K+1;break}continue}me<0&&(ve=!0,me=K+1),_e===46?xe<0?xe=K:ye!==1&&(ye=1):xe>-1&&(ye=-1)}return xe<0||me<0||ye===0||ye===1&&xe===me-1&&xe===ge+1?"":fe.slice(xe,me)}function join(...fe){let K=-1,me;for(;++K<fe.length;)assertPath$1(fe[K]),fe[K]&&(me=me===void 0?fe[K]:me+"/"+fe[K]);return me===void 0?".":normalize$1(me)}function normalize$1(fe){assertPath$1(fe);const K=fe.codePointAt(0)===47;let me=normalizeString(fe,!K);return me.length===0&&!K&&(me="."),me.length>0&&fe.codePointAt(fe.length-1)===47&&(me+="/"),K?"/"+me:me}function normalizeString(fe,K){let me="",ge=0,xe=-1,ye=0,ve=-1,_e,Ee;for(;++ve<=fe.length;){if(ve<fe.length)_e=fe.codePointAt(ve);else{if(_e===47)break;_e=47}if(_e===47){if(!(xe===ve-1||ye===1))if(xe!==ve-1&&ye===2){if(me.length<2||ge!==2||me.codePointAt(me.length-1)!==46||me.codePointAt(me.length-2)!==46){if(me.length>2){if(Ee=me.lastIndexOf("/"),Ee!==me.length-1){Ee<0?(me="",ge=0):(me=me.slice(0,Ee),ge=me.length-1-me.lastIndexOf("/")),xe=ve,ye=0;continue}}else if(me.length>0){me="",ge=0,xe=ve,ye=0;continue}}K&&(me=me.length>0?me+"/..":"..",ge=2)}else me.length>0?me+="/"+fe.slice(xe+1,ve):me=fe.slice(xe+1,ve),ge=ve-xe-1;xe=ve,ye=0}else _e===46&&ye>-1?ye++:ye=-1}return me}function assertPath$1(fe){if(typeof fe!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(fe))}const minproc={cwd};function cwd(){return"/"}function isUrl(fe){return!!(fe!==null&&typeof fe=="object"&&"href"in fe&&fe.href&&"protocol"in fe&&fe.protocol&&fe.auth===void 0)}function urlToPath(fe){if(typeof fe=="string")fe=new URL(fe);else if(!isUrl(fe)){const K=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+fe+"`");throw K.code="ERR_INVALID_ARG_TYPE",K}if(fe.protocol!=="file:"){const K=new TypeError("The URL must be of scheme file");throw K.code="ERR_INVALID_URL_SCHEME",K}return getPathFromURLPosix(fe)}function getPathFromURLPosix(fe){if(fe.hostname!==""){const ge=new TypeError('File URL host must be "localhost" or empty on darwin');throw ge.code="ERR_INVALID_FILE_URL_HOST",ge}const K=fe.pathname;let me=-1;for(;++me<K.length;)if(K.codePointAt(me)===37&&K.codePointAt(me+1)===50){const ge=K.codePointAt(me+2);if(ge===70||ge===102){const xe=new TypeError("File URL path must not include encoded / characters");throw xe.code="ERR_INVALID_FILE_URL_PATH",xe}}return decodeURIComponent(K)}const order=["history","path","basename","stem","extname","dirname"];class VFile{constructor(K){let me;K?isUrl(K)?me={path:K}:typeof K=="string"||isUint8Array$1(K)?me={value:K}:me=K:me={},this.cwd="cwd"in me?"":minproc.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let ge=-1;for(;++ge<order.length;){const ye=order[ge];ye in me&&me[ye]!==void 0&&me[ye]!==null&&(this[ye]=ye==="history"?[...me[ye]]:me[ye])}let xe;for(xe in me)order.includes(xe)||(this[xe]=me[xe])}get basename(){return typeof this.path=="string"?minpath.basename(this.path):void 0}set basename(K){assertNonEmpty(K,"basename"),assertPart(K,"basename"),this.path=minpath.join(this.dirname||"",K)}get dirname(){return typeof this.path=="string"?minpath.dirname(this.path):void 0}set dirname(K){assertPath(this.basename,"dirname"),this.path=minpath.join(K||"",this.basename)}get extname(){return typeof this.path=="string"?minpath.extname(this.path):void 0}set extname(K){if(assertPart(K,"extname"),assertPath(this.dirname,"extname"),K){if(K.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(K.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=minpath.join(this.dirname,this.stem+(K||""))}get path(){return this.history[this.history.length-1]}set path(K){isUrl(K)&&(K=urlToPath(K)),assertNonEmpty(K,"path"),this.path!==K&&this.history.push(K)}get stem(){return typeof this.path=="string"?minpath.basename(this.path,this.extname):void 0}set stem(K){assertNonEmpty(K,"stem"),assertPart(K,"stem"),this.path=minpath.join(this.dirname||"",K+(this.extname||""))}fail(K,me,ge){const xe=this.message(K,me,ge);throw xe.fatal=!0,xe}info(K,me,ge){const xe=this.message(K,me,ge);return xe.fatal=void 0,xe}message(K,me,ge){const xe=new VFileMessage(K,me,ge);return this.path&&(xe.name=this.path+":"+xe.name,xe.file=this.path),xe.fatal=!1,this.messages.push(xe),xe}toString(K){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(K||void 0).decode(this.value)}}function assertPart(fe,K){if(fe&&fe.includes(minpath.sep))throw new Error("`"+K+"` cannot be a path: did not expect `"+minpath.sep+"`")}function assertNonEmpty(fe,K){if(!fe)throw new Error("`"+K+"` cannot be empty")}function assertPath(fe,K){if(!fe)throw new Error("Setting `"+K+"` requires `path` to be set too")}function isUint8Array$1(fe){return!!(fe&&typeof fe=="object"&&"byteLength"in fe&&"byteOffset"in fe)}const markdownExtension=["md","markdown","mdown","mkdn","mkd","mdwn","mkdown","ron"],md=markdownExtension.map(function(fe){return"."+fe});function resolveFileAndOptions(fe,K){const me=looksLikeAVFile$1(fe)?fe:new VFile(fe),{format:ge,...xe}=K||{};return{file:me,options:{format:ge==="md"||ge==="mdx"?ge:me.extname&&(xe.mdExtensions||md).includes(me.extname)?"md":"mdx",...xe}}}function looksLikeAVFile$1(fe){return!!(fe&&typeof fe=="object"&&"message"in fe&&"messages"in fe)}function ok$1(){}const startRe=/[$_\p{ID_Start}]/u,contRe=/[$_\u{200C}\u{200D}\p{ID_Continue}]/u,contReJsx=/[-$_\u{200C}\u{200D}\p{ID_Continue}]/u,nameRe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,nameReJsx=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,emptyOptions$5={};function start(fe){return fe?startRe.test(String.fromCodePoint(fe)):!1}function cont(fe,K){const ge=(K||emptyOptions$5).jsx?contReJsx:contRe;return fe?ge.test(String.fromCodePoint(fe)):!1}function name$1(fe,K){return((K||emptyOptions$5).jsx?nameReJsx:nameRe).test(fe)}let WalkerBase$1=class{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:K=>this.replacement=K}}replace(K,me,ge,xe){K&&me&&(ge!=null?K[me][ge]=xe:K[me]=xe)}remove(K,me,ge){K&&me&&(ge!=null?K[me].splice(ge,1):delete K[me])}},SyncWalker$1=class extends WalkerBase$1{constructor(K,me){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:ge=>this.replacement=ge},this.enter=K,this.leave=me}visit(K,me,ge,xe){if(K){if(this.enter){const ve=this.should_skip,_e=this.should_remove,Ee=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,K,me,ge,xe),this.replacement&&(K=this.replacement,this.replace(me,ge,xe,K)),this.should_remove&&this.remove(me,ge,xe);const be=this.should_skip,Ae=this.should_remove;if(this.should_skip=ve,this.should_remove=_e,this.replacement=Ee,be)return K;if(Ae)return null}let ye;for(ye in K){const ve=K[ye];if(ve&&typeof ve=="object")if(Array.isArray(ve)){const _e=ve;for(let Ee=0;Ee<_e.length;Ee+=1){const be=_e[Ee];isNode$1(be)&&(this.visit(be,K,ye,Ee)||Ee--)}}else isNode$1(ve)&&this.visit(ve,K,ye,null)}if(this.leave){const ve=this.replacement,_e=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,K,me,ge,xe),this.replacement&&(K=this.replacement,this.replace(me,ge,xe,K)),this.should_remove&&this.remove(me,ge,xe);const Ee=this.should_remove;if(this.replacement=ve,this.should_remove=_e,Ee)return null}}return K}};function isNode$1(fe){return fe!==null&&typeof fe=="object"&&"type"in fe&&typeof fe.type=="string"}function walk$2(fe,{enter:K,leave:me}){return new SyncWalker$1(K,me).visit(fe,null)}const regex=/@(jsx|jsxFrag|jsxImportSource|jsxRuntime)\s+(\S+)/g;function buildJsx(fe,K){const me=K||{};let ge=me.runtime==="automatic";const xe={},ye={};walk$2(fe,{enter(ve){if(ve.type==="Program"){const _e=ve.comments||[];let Ee=-1;for(;++Ee<_e.length;){regex.lastIndex=0;let be=regex.exec(_e[Ee].value);for(;be;)xe[be[1]]=be[2],be=regex.exec(_e[Ee].value)}if(xe.jsxRuntime)if(xe.jsxRuntime==="automatic"){if(ge=!0,xe.jsx)throw new Error("Unexpected `@jsx` pragma w/ automatic runtime");if(xe.jsxFrag)throw new Error("Unexpected `@jsxFrag` pragma w/ automatic runtime")}else if(xe.jsxRuntime==="classic"){if(ge=!1,xe.jsxImportSource)throw new Error("Unexpected `@jsxImportSource` w/ classic runtime")}else throw new Error("Unexpected `jsxRuntime` `"+xe.jsxRuntime+"`, expected `automatic` or `classic`")}},leave(ve){if(ve.type==="Program"){const De=[];if(ye.fragment&&De.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"Fragment"},local:{type:"Identifier",name:"_Fragment"}}),ye.jsx&&De.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsx"},local:{type:"Identifier",name:"_jsx"}}),ye.jsxs&&De.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxs"},local:{type:"Identifier",name:"_jsxs"}}),ye.jsxDEV&&De.push({type:"ImportSpecifier",imported:{type:"Identifier",name:"jsxDEV"},local:{type:"Identifier",name:"_jsxDEV"}}),De.length>0){let Ie=0;for(;Ie<ve.body.length;){const Be=ve.body[Ie];if("directive"in Be&&Be.directive)Ie++;else break}ve.body.splice(Ie,0,{type:"ImportDeclaration",specifiers:De,source:{type:"Literal",value:(xe.jsxImportSource||me.importSource||"react")+(me.development?"/jsx-dev-runtime":"/jsx-runtime")}})}}if(ve.type!=="JSXElement"&&ve.type!=="JSXFragment")return;const _e=[];let Ee=-1;for(;++Ee<ve.children.length;){const De=ve.children[Ee];if(De.type==="JSXExpressionContainer")De.expression.type!=="JSXEmptyExpression"&&_e.push(De.expression);else if(De.type==="JSXText"){const Ie=De.value.replace(/\t/g," ").replace(/ *(\r?\n|\r) */g,`
`).replace(/\n+/g,`
`).replace(/\n+$/,"").replace(/^\n+/,"").replace(/\n/g," ");if(Ie){const Be={type:"Literal",value:Ie};create$2(De,Be),_e.push(Be)}}else De.type!=="JSXElement"&&De.type!=="JSXFragment"&&De.type,_e.push(De)}let be;const Ae=[];let Se=[],Ce;if(ve.type==="JSXElement"){if(be=toIdentifier(ve.openingElement.name),be.type==="Identifier"&&/^[a-z]/.test(be.name)){const Le={type:"Literal",value:be.name};create$2(be,Le),be=Le}let De;const Ie=ve.openingElement.attributes;let Be=-1;for(;++Be<Ie.length;){const Le=Ie[Be];if(Le.type==="JSXSpreadAttribute")Le.argument.type==="ObjectExpression"?Ae.push(...Le.argument.properties):Ae.push({type:"SpreadElement",argument:Le.argument}),De=!0;else{const Oe=toProperty(Le);if(ge&&Oe.key.type==="Identifier"&&Oe.key.name==="key"){if(De)throw new Error("Expected `key` to come before any spread expressions");const Fe=Oe.value;Fe.type!=="AssignmentPattern"&&Fe.type!=="ArrayPattern"&&Fe.type!=="ObjectPattern"&&Fe.type,Ce=Fe}else Ae.push(Oe)}}}else ge?(ye.fragment=!0,be={type:"Identifier",name:"_Fragment"}):be=toMemberExpression(xe.jsxFrag||me.pragmaFrag||"React.Fragment");ge?_e.length>0&&Ae.push({type:"Property",key:{type:"Identifier",name:"children"},value:_e.length>1?{type:"ArrayExpression",elements:_e}:_e[0],kind:"init",method:!1,shorthand:!1,computed:!1}):Se=_e;let Te;if(ge){Se.push({type:"ObjectExpression",properties:Ae}),Ce?Se.push(Ce):me.development&&Se.push({type:"Identifier",name:"undefined"});const De=_e.length>1;if(me.development){ye.jsxDEV=!0,Te={type:"Identifier",name:"_jsxDEV"},Se.push({type:"Literal",value:De});const Ie={type:"ObjectExpression",properties:[{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"fileName"},value:{type:"Literal",value:me.filePath||"<source.js>"}}]};ve.loc&&Ie.properties.push({type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"lineNumber"},value:{type:"Literal",value:ve.loc.start.line}},{type:"Property",method:!1,shorthand:!1,computed:!1,kind:"init",key:{type:"Identifier",name:"columnNumber"},value:{type:"Literal",value:ve.loc.start.column+1}}),Se.push(Ie,{type:"ThisExpression"})}else De?(ye.jsxs=!0,Te={type:"Identifier",name:"_jsxs"}):(ye.jsx=!0,Te={type:"Identifier",name:"_jsx"})}else Ae.length>0?Se.unshift({type:"ObjectExpression",properties:Ae}):Se.length>0&&Se.unshift({type:"Literal",value:null}),Te=toMemberExpression(xe.jsx||me.pragma||"React.createElement");Se.unshift(be);const Re={type:"CallExpression",callee:Te,arguments:Se,optional:!1};create$2(ve,Re),this.replace(Re)}})}function toProperty(fe){let K;if(fe.value)if(fe.value.type==="JSXExpressionContainer"){const ge=fe.value.expression;ge.type,K=ge}else{const ge=fe.value;ge.type!=="JSXElement"&&ge.type,K=ge,delete K.raw}else K={type:"Literal",value:!0};const me={type:"Property",key:toIdentifier(fe.name),value:K,kind:"init",method:!1,shorthand:!1,computed:!1};return create$2(fe,me),me}function toIdentifier(fe){let K;if(fe.type==="JSXMemberExpression"){const me=toIdentifier(fe.property);K={type:"MemberExpression",object:toIdentifier(fe.object),property:me,computed:me.type==="Literal",optional:!1}}else fe.type==="JSXNamespacedName"?K={type:"Literal",value:fe.namespace.name+":"+fe.name.name}:K=name$1(fe.name)?{type:"Identifier",name:fe.name}:{type:"Literal",value:fe.name};return create$2(fe,K),K}function toMemberExpression(fe){const K=fe.split(".");let me=-1,ge;for(;++me<K.length;){const xe=name$1(K[me])?{type:"Identifier",name:K[me]}:{type:"Literal",value:K[me]};ge=ge?{type:"MemberExpression",object:ge,property:xe,computed:!!(me&&xe.type==="Literal"),optional:!1}:xe}return ge}function create$2(fe,K){const me=["start","end","loc","range","comments"];let ge=-1;for(;++ge<me.length;){const xe=me[ge];xe in fe&&(K[xe]=fe[xe])}}function recmaJsx$1(fe){return function(K,me){buildJsx(K,{filePath:me.history[0],...fe})}}var acornJsx$1={exports:{}},xhtml={quot:'"',amp:"&",apos:"'",lt:"<",gt:">",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",times:"×",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",divide:"÷",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",frasl:"⁄",euro:"€",image:"ℑ",weierp:"℘",real:"ℜ",trade:"™",alefsym:"ℵ",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lArr:"⇐",uArr:"⇑",rArr:"⇒",dArr:"⇓",hArr:"⇔",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",lang:"〈",rang:"〉",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"},acorn={exports:{}},hasRequiredAcorn;function requireAcorn(){return hasRequiredAcorn||(hasRequiredAcorn=1,function(fe,K){(function(me,ge){ge(K)})(commonjsGlobal,function(me){var ge=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,7,9,32,4,318,1,80,3,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,68,8,2,0,3,0,2,3,2,4,2,0,15,1,83,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,7,19,58,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,343,9,54,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,10,5350,0,7,14,11465,27,2343,9,87,9,39,4,60,6,26,9,535,9,470,0,2,54,8,3,82,0,12,1,19628,1,4178,9,519,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,245,1,2,9,726,6,110,6,6,9,4759,9,787719,239],xe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,4,51,13,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,39,27,10,22,251,41,7,1,17,2,60,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,31,9,2,0,3,0,2,37,2,0,26,0,2,0,45,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,200,32,32,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,26,3994,6,582,6842,29,1763,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,433,44,212,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,42,9,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,229,29,3,0,496,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],ye="‌‍·̀-ͯ·҃-֑҇-ׇֽֿׁׂׅׄؐ-ًؚ-٩ٰۖ-ۜ۟-۪ۤۧۨ-ۭ۰-۹ܑܰ-݊ަ-ް߀-߉߫-߽߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࢗ-࢟࣊-ࣣ࣡-ःऺ-़ा-ॏ॑-ॗॢॣ०-९ঁ-ঃ়া-ৄেৈো-্ৗৢৣ০-৯৾ਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣ૦-૯ૺ-૿ଁ-ଃ଼ା-ୄେୈୋ-୍୕-ୗୢୣ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఀ-ఄ఼ా-ౄె-ైొ-్ౕౖౢౣ౦-౯ಁ-ಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣ೦-೯ೳഀ-ഃ഻഼ാ-ൄെ-ൈൊ-്ൗൢൣ൦-൯ඁ-ඃ්ා-ුූෘ-ෟ෦-෯ෲෳัิ-ฺ็-๎๐-๙ັິ-ຼ່-໎໐-໙༘༙༠-༩༹༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှ၀-၉ၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟፩-፱ᜒ-᜕ᜲ-᜴ᝒᝓᝲᝳ឴-៓៝០-៩᠋-᠍᠏-᠙ᢩᤠ-ᤫᤰ-᤻᥆-᥏᧐-᧚ᨗ-ᨛᩕ-ᩞ᩠-᩿᩼-᪉᪐-᪙᪰-᪽ᪿ-ᫎᬀ-ᬄ᬴-᭄᭐-᭙᭫-᭳ᮀ-ᮂᮡ-ᮭ᮰-᮹᯦-᯳ᰤ-᰷᱀-᱉᱐-᱙᳐-᳔᳒-᳨᳭᳴᳷-᳹᷀-᷿‌‍‿⁀⁔⃐-⃥⃜⃡-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯・꘠-꘩꙯ꙴ-꙽ꚞꚟ꛰꛱ꠂ꠆ꠋꠣ-ꠧ꠬ꢀꢁꢴ-ꣅ꣐-꣙꣠-꣱ꣿ-꤉ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀꧐-꧙ꧥ꧰-꧹ꨩ-ꨶꩃꩌꩍ꩐-꩙ꩻ-ꩽꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꫫ-ꫯꫵ꫶ꯣ-ꯪ꯬꯭꯰-꯹ﬞ︀-️︠-︯︳︴﹍-﹏０-９＿･",ve="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙՠ-ֈא-תׯ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࡠ-ࡪࡰ-ࢇࢉ-ࢎࢠ-ࣉऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱৼਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౝౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೝೞೠೡೱೲഄ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄຆ-ຊຌ-ຣລວ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛸᜀ-ᜑᜟ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡸᢀ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭌᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲊᲐ-ᲺᲽ-Ჿᳩ-ᳬᳮ-ᳳᳵᳶᳺᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕ℘-ℝℤΩℨK-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞ々-〇〡-〩〱-〵〸-〼ぁ-ゖ゛-ゟァ-ヺー-ヿㄅ-ㄯㄱ-ㆎㆠ-ㆿㇰ-ㇿ㐀-䶿一-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꟍꟐꟑꟓꟕ-Ƛꟲ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꣾꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭩꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",_e={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Ee="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",be={5:Ee,"5module":Ee+" export import",6:Ee+" const class extends export import super"},Ae=/^in(stanceof)?$/,Se=new RegExp("["+ve+"]"),Ce=new RegExp("["+ve+ye+"]");function Te(Pe,$e){for(var Ze=65536,wt=0;wt<$e.length;wt+=2){if(Ze+=$e[wt],Ze>Pe)return!1;if(Ze+=$e[wt+1],Ze>=Pe)return!0}return!1}function Re(Pe,$e){return Pe<65?Pe===36:Pe<91?!0:Pe<97?Pe===95:Pe<123?!0:Pe<=65535?Pe>=170&&Se.test(String.fromCharCode(Pe)):$e===!1?!1:Te(Pe,xe)}function De(Pe,$e){return Pe<48?Pe===36:Pe<58?!0:Pe<65?!1:Pe<91?!0:Pe<97?Pe===95:Pe<123?!0:Pe<=65535?Pe>=170&&Ce.test(String.fromCharCode(Pe)):$e===!1?!1:Te(Pe,xe)||Te(Pe,ge)}var Ie=function($e,Ze){Ze===void 0&&(Ze={}),this.label=$e,this.keyword=Ze.keyword,this.beforeExpr=!!Ze.beforeExpr,this.startsExpr=!!Ze.startsExpr,this.isLoop=!!Ze.isLoop,this.isAssign=!!Ze.isAssign,this.prefix=!!Ze.prefix,this.postfix=!!Ze.postfix,this.binop=Ze.binop||null,this.updateContext=null};function Be(Pe,$e){return new Ie(Pe,{beforeExpr:!0,binop:$e})}var Le={beforeExpr:!0},Oe={startsExpr:!0},Fe={};function Ue(Pe,$e){return $e===void 0&&($e={}),$e.keyword=Pe,Fe[Pe]=new Ie(Pe,$e)}var Ne={num:new Ie("num",Oe),regexp:new Ie("regexp",Oe),string:new Ie("string",Oe),name:new Ie("name",Oe),privateId:new Ie("privateId",Oe),eof:new Ie("eof"),bracketL:new Ie("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ie("]"),braceL:new Ie("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ie("}"),parenL:new Ie("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ie(")"),comma:new Ie(",",Le),semi:new Ie(";",Le),colon:new Ie(":",Le),dot:new Ie("."),question:new Ie("?",Le),questionDot:new Ie("?."),arrow:new Ie("=>",Le),template:new Ie("template"),invalidTemplate:new Ie("invalidTemplate"),ellipsis:new Ie("...",Le),backQuote:new Ie("`",Oe),dollarBraceL:new Ie("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ie("=",{beforeExpr:!0,isAssign:!0}),assign:new Ie("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ie("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ie("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Be("||",1),logicalAND:Be("&&",2),bitwiseOR:Be("|",3),bitwiseXOR:Be("^",4),bitwiseAND:Be("&",5),equality:Be("==/!=/===/!==",6),relational:Be("</>/<=/>=",7),bitShift:Be("<</>>/>>>",8),plusMin:new Ie("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Be("%",10),star:Be("*",10),slash:Be("/",10),starstar:new Ie("**",{beforeExpr:!0}),coalesce:Be("??",1),_break:Ue("break"),_case:Ue("case",Le),_catch:Ue("catch"),_continue:Ue("continue"),_debugger:Ue("debugger"),_default:Ue("default",Le),_do:Ue("do",{isLoop:!0,beforeExpr:!0}),_else:Ue("else",Le),_finally:Ue("finally"),_for:Ue("for",{isLoop:!0}),_function:Ue("function",Oe),_if:Ue("if"),_return:Ue("return",Le),_switch:Ue("switch"),_throw:Ue("throw",Le),_try:Ue("try"),_var:Ue("var"),_const:Ue("const"),_while:Ue("while",{isLoop:!0}),_with:Ue("with"),_new:Ue("new",{beforeExpr:!0,startsExpr:!0}),_this:Ue("this",Oe),_super:Ue("super",Oe),_class:Ue("class",Oe),_extends:Ue("extends",Le),_export:Ue("export"),_import:Ue("import",Oe),_null:Ue("null",Oe),_true:Ue("true",Oe),_false:Ue("false",Oe),_in:Ue("in",{beforeExpr:!0,binop:7}),_instanceof:Ue("instanceof",{beforeExpr:!0,binop:7}),_typeof:Ue("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Ue("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Ue("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},He=/\r\n?|\n|\u2028|\u2029/,ze=new RegExp(He.source,"g");function je(Pe){return Pe===10||Pe===13||Pe===8232||Pe===8233}function Ge(Pe,$e,Ze){Ze===void 0&&(Ze=Pe.length);for(var wt=$e;wt<Ze;wt++){var jt=Pe.charCodeAt(wt);if(je(jt))return wt<Ze-1&&jt===13&&Pe.charCodeAt(wt+1)===10?wt+2:wt+1}return-1}var Xe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,qe=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,Qe=Object.prototype,nt=Qe.hasOwnProperty,Nt=Qe.toString,Ye=Object.hasOwn||function(Pe,$e){return nt.call(Pe,$e)},at=Array.isArray||function(Pe){return Nt.call(Pe)==="[object Array]"},rt=Object.create(null);function Ft(Pe){return rt[Pe]||(rt[Pe]=new RegExp("^(?:"+Pe.replace(/ /g,"|")+")$"))}function Je(Pe){return Pe<=65535?String.fromCharCode(Pe):(Pe-=65536,String.fromCharCode((Pe>>10)+55296,(Pe&1023)+56320))}var Wt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Kt=function($e,Ze){this.line=$e,this.column=Ze};Kt.prototype.offset=function($e){return new Kt(this.line,this.column+$e)};var Pt=function($e,Ze,wt){this.start=Ze,this.end=wt,$e.sourceFile!==null&&(this.source=$e.sourceFile)};function Yt(Pe,$e){for(var Ze=1,wt=0;;){var jt=Ge(Pe,wt,$e);if(jt<0)return new Kt(Ze,$e-wt);++Ze,wt=jt}}var Gt={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},an=!1;function pn(Pe){var $e={};for(var Ze in Gt)$e[Ze]=Pe&&Ye(Pe,Ze)?Pe[Ze]:Gt[Ze];if($e.ecmaVersion==="latest"?$e.ecmaVersion=1e8:$e.ecmaVersion==null?(!an&&typeof console=="object"&&console.warn&&(an=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),$e.ecmaVersion=11):$e.ecmaVersion>=2015&&($e.ecmaVersion-=2009),$e.allowReserved==null&&($e.allowReserved=$e.ecmaVersion<5),(!Pe||Pe.allowHashBang==null)&&($e.allowHashBang=$e.ecmaVersion>=14),at($e.onToken)){var wt=$e.onToken;$e.onToken=function(jt){return wt.push(jt)}}return at($e.onComment)&&($e.onComment=En($e,$e.onComment)),$e}function En(Pe,$e){return function(Ze,wt,jt,yn,Tn,rr){var ur={type:Ze?"Block":"Line",value:wt,start:jt,end:yn};Pe.locations&&(ur.loc=new Pt(this,Tn,rr)),Pe.ranges&&(ur.range=[jt,yn]),$e.push(ur)}}var $n=1,Un=2,kn=4,bn=8,Mn=16,zt=32,Dn=64,hn=128,mn=256,dn=512,Hn=$n|Un|mn;function Bn(Pe,$e){return Un|(Pe?kn:0)|($e?bn:0)}var kt=0,Dt=1,ln=2,nn=3,gn=4,Xt=5,on=function($e,Ze,wt){this.options=$e=pn($e),this.sourceFile=$e.sourceFile,this.keywords=Ft(be[$e.ecmaVersion>=6?6:$e.sourceType==="module"?"5module":5]);var jt="";$e.allowReserved!==!0&&(jt=_e[$e.ecmaVersion>=6?6:$e.ecmaVersion===5?5:3],$e.sourceType==="module"&&(jt+=" await")),this.reservedWords=Ft(jt);var yn=(jt?jt+" ":"")+_e.strict;this.reservedWordsStrict=Ft(yn),this.reservedWordsStrictBind=Ft(yn+" "+_e.strictBind),this.input=String(Ze),this.containsEsc=!1,wt?(this.pos=wt,this.lineStart=this.input.lastIndexOf(`
`,wt-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(He).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Ne.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=$e.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&$e.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope($n),this.regexpState=null,this.privateNameStack=[]},Rt={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};on.prototype.parse=function(){var $e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel($e)},Rt.inFunction.get=function(){return(this.currentVarScope().flags&Un)>0},Rt.inGenerator.get=function(){return(this.currentVarScope().flags&bn)>0},Rt.inAsync.get=function(){return(this.currentVarScope().flags&kn)>0},Rt.canAwait.get=function(){for(var Pe=this.scopeStack.length-1;Pe>=0;Pe--){var $e=this.scopeStack[Pe],Ze=$e.flags;if(Ze&(mn|dn))return!1;if(Ze&Un)return(Ze&kn)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},Rt.allowSuper.get=function(){var Pe=this.currentThisScope(),$e=Pe.flags;return($e&Dn)>0||this.options.allowSuperOutsideMethod},Rt.allowDirectSuper.get=function(){return(this.currentThisScope().flags&hn)>0},Rt.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},Rt.allowNewDotTarget.get=function(){for(var Pe=this.scopeStack.length-1;Pe>=0;Pe--){var $e=this.scopeStack[Pe],Ze=$e.flags;if(Ze&(mn|dn)||Ze&Un&&!(Ze&Mn))return!0}return!1},Rt.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&mn)>0},on.extend=function(){for(var $e=[],Ze=arguments.length;Ze--;)$e[Ze]=arguments[Ze];for(var wt=this,jt=0;jt<$e.length;jt++)wt=$e[jt](wt);return wt},on.parse=function($e,Ze){return new this(Ze,$e).parse()},on.parseExpressionAt=function($e,Ze,wt){var jt=new this(wt,$e,Ze);return jt.nextToken(),jt.parseExpression()},on.tokenizer=function($e,Ze){return new this(Ze,$e)},Object.defineProperties(on.prototype,Rt);var An=on.prototype,sr=/^(?:'((?:\\[^]|[^'\\])*?)'|"((?:\\[^]|[^"\\])*?)")/;An.strictDirective=function(Pe){if(this.options.ecmaVersion<5)return!1;for(;;){qe.lastIndex=Pe,Pe+=qe.exec(this.input)[0].length;var $e=sr.exec(this.input.slice(Pe));if(!$e)return!1;if(($e[1]||$e[2])==="use strict"){qe.lastIndex=Pe+$e[0].length;var Ze=qe.exec(this.input),wt=Ze.index+Ze[0].length,jt=this.input.charAt(wt);return jt===";"||jt==="}"||He.test(Ze[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(jt)||jt==="!"&&this.input.charAt(wt+1)==="=")}Pe+=$e[0].length,qe.lastIndex=Pe,Pe+=qe.exec(this.input)[0].length,this.input[Pe]===";"&&Pe++}},An.eat=function(Pe){return this.type===Pe?(this.next(),!0):!1},An.isContextual=function(Pe){return this.type===Ne.name&&this.value===Pe&&!this.containsEsc},An.eatContextual=function(Pe){return this.isContextual(Pe)?(this.next(),!0):!1},An.expectContextual=function(Pe){this.eatContextual(Pe)||this.unexpected()},An.canInsertSemicolon=function(){return this.type===Ne.eof||this.type===Ne.braceR||He.test(this.input.slice(this.lastTokEnd,this.start))},An.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},An.semicolon=function(){!this.eat(Ne.semi)&&!this.insertSemicolon()&&this.unexpected()},An.afterTrailingComma=function(Pe,$e){if(this.type===Pe)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),$e||this.next(),!0},An.expect=function(Pe){this.eat(Pe)||this.unexpected()},An.unexpected=function(Pe){this.raise(Pe??this.start,"Unexpected token")};var zn=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};An.checkPatternErrors=function(Pe,$e){if(Pe){Pe.trailingComma>-1&&this.raiseRecoverable(Pe.trailingComma,"Comma is not permitted after the rest element");var Ze=$e?Pe.parenthesizedAssign:Pe.parenthesizedBind;Ze>-1&&this.raiseRecoverable(Ze,$e?"Assigning to rvalue":"Parenthesized pattern")}},An.checkExpressionErrors=function(Pe,$e){if(!Pe)return!1;var Ze=Pe.shorthandAssign,wt=Pe.doubleProto;if(!$e)return Ze>=0||wt>=0;Ze>=0&&this.raise(Ze,"Shorthand property assignments are valid only in destructuring patterns"),wt>=0&&this.raiseRecoverable(wt,"Redefinition of __proto__ property")},An.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},An.isSimpleAssignTarget=function(Pe){return Pe.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(Pe.expression):Pe.type==="Identifier"||Pe.type==="MemberExpression"};var In=on.prototype;In.parseTopLevel=function(Pe){var $e=Object.create(null);for(Pe.body||(Pe.body=[]);this.type!==Ne.eof;){var Ze=this.parseStatement(null,!0,$e);Pe.body.push(Ze)}if(this.inModule)for(var wt=0,jt=Object.keys(this.undefinedExports);wt<jt.length;wt+=1){var yn=jt[wt];this.raiseRecoverable(this.undefinedExports[yn].start,"Export '"+yn+"' is not defined")}return this.adaptDirectivePrologue(Pe.body),this.next(),Pe.sourceType=this.options.sourceType,this.finishNode(Pe,"Program")};var er={kind:"loop"},Kn={kind:"switch"};In.isLet=function(Pe){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;qe.lastIndex=this.pos;var $e=qe.exec(this.input),Ze=this.pos+$e[0].length,wt=this.input.charCodeAt(Ze);if(wt===91||wt===92)return!0;if(Pe)return!1;if(wt===123||wt>55295&&wt<56320)return!0;if(Re(wt,!0)){for(var jt=Ze+1;De(wt=this.input.charCodeAt(jt),!0);)++jt;if(wt===92||wt>55295&&wt<56320)return!0;var yn=this.input.slice(Ze,jt);if(!Ae.test(yn))return!0}return!1},In.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;qe.lastIndex=this.pos;var Pe=qe.exec(this.input),$e=this.pos+Pe[0].length,Ze;return!He.test(this.input.slice(this.pos,$e))&&this.input.slice($e,$e+8)==="function"&&($e+8===this.input.length||!(De(Ze=this.input.charCodeAt($e+8))||Ze>55295&&Ze<56320))},In.parseStatement=function(Pe,$e,Ze){var wt=this.type,jt=this.startNode(),yn;switch(this.isLet(Pe)&&(wt=Ne._var,yn="let"),wt){case Ne._break:case Ne._continue:return this.parseBreakContinueStatement(jt,wt.keyword);case Ne._debugger:return this.parseDebuggerStatement(jt);case Ne._do:return this.parseDoStatement(jt);case Ne._for:return this.parseForStatement(jt);case Ne._function:return Pe&&(this.strict||Pe!=="if"&&Pe!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(jt,!1,!Pe);case Ne._class:return Pe&&this.unexpected(),this.parseClass(jt,!0);case Ne._if:return this.parseIfStatement(jt);case Ne._return:return this.parseReturnStatement(jt);case Ne._switch:return this.parseSwitchStatement(jt);case Ne._throw:return this.parseThrowStatement(jt);case Ne._try:return this.parseTryStatement(jt);case Ne._const:case Ne._var:return yn=yn||this.value,Pe&&yn!=="var"&&this.unexpected(),this.parseVarStatement(jt,yn);case Ne._while:return this.parseWhileStatement(jt);case Ne._with:return this.parseWithStatement(jt);case Ne.braceL:return this.parseBlock(!0,jt);case Ne.semi:return this.parseEmptyStatement(jt);case Ne._export:case Ne._import:if(this.options.ecmaVersion>10&&wt===Ne._import){qe.lastIndex=this.pos;var Tn=qe.exec(this.input),rr=this.pos+Tn[0].length,ur=this.input.charCodeAt(rr);if(ur===40||ur===46)return this.parseExpressionStatement(jt,this.parseExpression())}return this.options.allowImportExportEverywhere||($e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),wt===Ne._import?this.parseImport(jt):this.parseExport(jt,Ze);default:if(this.isAsyncFunction())return Pe&&this.unexpected(),this.next(),this.parseFunctionStatement(jt,!0,!Pe);var Ir=this.value,wr=this.parseExpression();return wt===Ne.name&&wr.type==="Identifier"&&this.eat(Ne.colon)?this.parseLabeledStatement(jt,Ir,wr,Pe):this.parseExpressionStatement(jt,wr)}},In.parseBreakContinueStatement=function(Pe,$e){var Ze=$e==="break";this.next(),this.eat(Ne.semi)||this.insertSemicolon()?Pe.label=null:this.type!==Ne.name?this.unexpected():(Pe.label=this.parseIdent(),this.semicolon());for(var wt=0;wt<this.labels.length;++wt){var jt=this.labels[wt];if((Pe.label==null||jt.name===Pe.label.name)&&(jt.kind!=null&&(Ze||jt.kind==="loop")||Pe.label&&Ze))break}return wt===this.labels.length&&this.raise(Pe.start,"Unsyntactic "+$e),this.finishNode(Pe,Ze?"BreakStatement":"ContinueStatement")},In.parseDebuggerStatement=function(Pe){return this.next(),this.semicolon(),this.finishNode(Pe,"DebuggerStatement")},In.parseDoStatement=function(Pe){return this.next(),this.labels.push(er),Pe.body=this.parseStatement("do"),this.labels.pop(),this.expect(Ne._while),Pe.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Ne.semi):this.semicolon(),this.finishNode(Pe,"DoWhileStatement")},In.parseForStatement=function(Pe){this.next();var $e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(er),this.enterScope(0),this.expect(Ne.parenL),this.type===Ne.semi)return $e>-1&&this.unexpected($e),this.parseFor(Pe,null);var Ze=this.isLet();if(this.type===Ne._var||this.type===Ne._const||Ze){var wt=this.startNode(),jt=Ze?"let":this.value;return this.next(),this.parseVar(wt,!0,jt),this.finishNode(wt,"VariableDeclaration"),(this.type===Ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&wt.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===Ne._in?$e>-1&&this.unexpected($e):Pe.await=$e>-1),this.parseForIn(Pe,wt)):($e>-1&&this.unexpected($e),this.parseFor(Pe,wt))}var yn=this.isContextual("let"),Tn=!1,rr=this.containsEsc,ur=new zn,Ir=this.start,wr=$e>-1?this.parseExprSubscripts(ur,"await"):this.parseExpression(!0,ur);return this.type===Ne._in||(Tn=this.options.ecmaVersion>=6&&this.isContextual("of"))?($e>-1?(this.type===Ne._in&&this.unexpected($e),Pe.await=!0):Tn&&this.options.ecmaVersion>=8&&(wr.start===Ir&&!rr&&wr.type==="Identifier"&&wr.name==="async"?this.unexpected():this.options.ecmaVersion>=9&&(Pe.await=!1)),yn&&Tn&&this.raise(wr.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(wr,!1,ur),this.checkLValPattern(wr),this.parseForIn(Pe,wr)):(this.checkExpressionErrors(ur,!0),$e>-1&&this.unexpected($e),this.parseFor(Pe,wr))},In.parseFunctionStatement=function(Pe,$e,Ze){return this.next(),this.parseFunction(Pe,gr|(Ze?0:hr),!1,$e)},In.parseIfStatement=function(Pe){return this.next(),Pe.test=this.parseParenExpression(),Pe.consequent=this.parseStatement("if"),Pe.alternate=this.eat(Ne._else)?this.parseStatement("if"):null,this.finishNode(Pe,"IfStatement")},In.parseReturnStatement=function(Pe){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Ne.semi)||this.insertSemicolon()?Pe.argument=null:(Pe.argument=this.parseExpression(),this.semicolon()),this.finishNode(Pe,"ReturnStatement")},In.parseSwitchStatement=function(Pe){this.next(),Pe.discriminant=this.parseParenExpression(),Pe.cases=[],this.expect(Ne.braceL),this.labels.push(Kn),this.enterScope(0);for(var $e,Ze=!1;this.type!==Ne.braceR;)if(this.type===Ne._case||this.type===Ne._default){var wt=this.type===Ne._case;$e&&this.finishNode($e,"SwitchCase"),Pe.cases.push($e=this.startNode()),$e.consequent=[],this.next(),wt?$e.test=this.parseExpression():(Ze&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),Ze=!0,$e.test=null),this.expect(Ne.colon)}else $e||this.unexpected(),$e.consequent.push(this.parseStatement(null));return this.exitScope(),$e&&this.finishNode($e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(Pe,"SwitchStatement")},In.parseThrowStatement=function(Pe){return this.next(),He.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),Pe.argument=this.parseExpression(),this.semicolon(),this.finishNode(Pe,"ThrowStatement")};var lr=[];In.parseCatchClauseParam=function(){var Pe=this.parseBindingAtom(),$e=Pe.type==="Identifier";return this.enterScope($e?zt:0),this.checkLValPattern(Pe,$e?gn:ln),this.expect(Ne.parenR),Pe},In.parseTryStatement=function(Pe){if(this.next(),Pe.block=this.parseBlock(),Pe.handler=null,this.type===Ne._catch){var $e=this.startNode();this.next(),this.eat(Ne.parenL)?$e.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),$e.param=null,this.enterScope(0)),$e.body=this.parseBlock(!1),this.exitScope(),Pe.handler=this.finishNode($e,"CatchClause")}return Pe.finalizer=this.eat(Ne._finally)?this.parseBlock():null,!Pe.handler&&!Pe.finalizer&&this.raise(Pe.start,"Missing catch or finally clause"),this.finishNode(Pe,"TryStatement")},In.parseVarStatement=function(Pe,$e,Ze){return this.next(),this.parseVar(Pe,!1,$e,Ze),this.semicolon(),this.finishNode(Pe,"VariableDeclaration")},In.parseWhileStatement=function(Pe){return this.next(),Pe.test=this.parseParenExpression(),this.labels.push(er),Pe.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(Pe,"WhileStatement")},In.parseWithStatement=function(Pe){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),Pe.object=this.parseParenExpression(),Pe.body=this.parseStatement("with"),this.finishNode(Pe,"WithStatement")},In.parseEmptyStatement=function(Pe){return this.next(),this.finishNode(Pe,"EmptyStatement")},In.parseLabeledStatement=function(Pe,$e,Ze,wt){for(var jt=0,yn=this.labels;jt<yn.length;jt+=1){var Tn=yn[jt];Tn.name===$e&&this.raise(Ze.start,"Label '"+$e+"' is already declared")}for(var rr=this.type.isLoop?"loop":this.type===Ne._switch?"switch":null,ur=this.labels.length-1;ur>=0;ur--){var Ir=this.labels[ur];if(Ir.statementStart===Pe.start)Ir.statementStart=this.start,Ir.kind=rr;else break}return this.labels.push({name:$e,kind:rr,statementStart:this.start}),Pe.body=this.parseStatement(wt?wt.indexOf("label")===-1?wt+"label":wt:"label"),this.labels.pop(),Pe.label=Ze,this.finishNode(Pe,"LabeledStatement")},In.parseExpressionStatement=function(Pe,$e){return Pe.expression=$e,this.semicolon(),this.finishNode(Pe,"ExpressionStatement")},In.parseBlock=function(Pe,$e,Ze){for(Pe===void 0&&(Pe=!0),$e===void 0&&($e=this.startNode()),$e.body=[],this.expect(Ne.braceL),Pe&&this.enterScope(0);this.type!==Ne.braceR;){var wt=this.parseStatement(null);$e.body.push(wt)}return Ze&&(this.strict=!1),this.next(),Pe&&this.exitScope(),this.finishNode($e,"BlockStatement")},In.parseFor=function(Pe,$e){return Pe.init=$e,this.expect(Ne.semi),Pe.test=this.type===Ne.semi?null:this.parseExpression(),this.expect(Ne.semi),Pe.update=this.type===Ne.parenR?null:this.parseExpression(),this.expect(Ne.parenR),Pe.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(Pe,"ForStatement")},In.parseForIn=function(Pe,$e){var Ze=this.type===Ne._in;return this.next(),$e.type==="VariableDeclaration"&&$e.declarations[0].init!=null&&(!Ze||this.options.ecmaVersion<8||this.strict||$e.kind!=="var"||$e.declarations[0].id.type!=="Identifier")&&this.raise($e.start,(Ze?"for-in":"for-of")+" loop variable declaration may not have an initializer"),Pe.left=$e,Pe.right=Ze?this.parseExpression():this.parseMaybeAssign(),this.expect(Ne.parenR),Pe.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(Pe,Ze?"ForInStatement":"ForOfStatement")},In.parseVar=function(Pe,$e,Ze,wt){for(Pe.declarations=[],Pe.kind=Ze;;){var jt=this.startNode();if(this.parseVarId(jt,Ze),this.eat(Ne.eq)?jt.init=this.parseMaybeAssign($e):!wt&&Ze==="const"&&!(this.type===Ne._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!wt&&jt.id.type!=="Identifier"&&!($e&&(this.type===Ne._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):jt.init=null,Pe.declarations.push(this.finishNode(jt,"VariableDeclarator")),!this.eat(Ne.comma))break}return Pe},In.parseVarId=function(Pe,$e){Pe.id=this.parseBindingAtom(),this.checkLValPattern(Pe.id,$e==="var"?Dt:ln,!1)};var gr=1,hr=2,Er=4;In.parseFunction=function(Pe,$e,Ze,wt,jt){this.initFunction(Pe),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!wt)&&(this.type===Ne.star&&$e&hr&&this.unexpected(),Pe.generator=this.eat(Ne.star)),this.options.ecmaVersion>=8&&(Pe.async=!!wt),$e&gr&&(Pe.id=$e&Er&&this.type!==Ne.name?null:this.parseIdent(),Pe.id&&!($e&hr)&&this.checkLValSimple(Pe.id,this.strict||Pe.generator||Pe.async?this.treatFunctionsAsVar?Dt:ln:nn));var yn=this.yieldPos,Tn=this.awaitPos,rr=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Bn(Pe.async,Pe.generator)),$e&gr||(Pe.id=this.type===Ne.name?this.parseIdent():null),this.parseFunctionParams(Pe),this.parseFunctionBody(Pe,Ze,!1,jt),this.yieldPos=yn,this.awaitPos=Tn,this.awaitIdentPos=rr,this.finishNode(Pe,$e&gr?"FunctionDeclaration":"FunctionExpression")},In.parseFunctionParams=function(Pe){this.expect(Ne.parenL),Pe.params=this.parseBindingList(Ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},In.parseClass=function(Pe,$e){this.next();var Ze=this.strict;this.strict=!0,this.parseClassId(Pe,$e),this.parseClassSuper(Pe);var wt=this.enterClassBody(),jt=this.startNode(),yn=!1;for(jt.body=[],this.expect(Ne.braceL);this.type!==Ne.braceR;){var Tn=this.parseClassElement(Pe.superClass!==null);Tn&&(jt.body.push(Tn),Tn.type==="MethodDefinition"&&Tn.kind==="constructor"?(yn&&this.raiseRecoverable(Tn.start,"Duplicate constructor in the same class"),yn=!0):Tn.key&&Tn.key.type==="PrivateIdentifier"&&un(wt,Tn)&&this.raiseRecoverable(Tn.key.start,"Identifier '#"+Tn.key.name+"' has already been declared"))}return this.strict=Ze,this.next(),Pe.body=this.finishNode(jt,"ClassBody"),this.exitClassBody(),this.finishNode(Pe,$e?"ClassDeclaration":"ClassExpression")},In.parseClassElement=function(Pe){if(this.eat(Ne.semi))return null;var $e=this.options.ecmaVersion,Ze=this.startNode(),wt="",jt=!1,yn=!1,Tn="method",rr=!1;if(this.eatContextual("static")){if($e>=13&&this.eat(Ne.braceL))return this.parseClassStaticBlock(Ze),Ze;this.isClassElementNameStart()||this.type===Ne.star?rr=!0:wt="static"}if(Ze.static=rr,!wt&&$e>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===Ne.star)&&!this.canInsertSemicolon()?yn=!0:wt="async"),!wt&&($e>=9||!yn)&&this.eat(Ne.star)&&(jt=!0),!wt&&!yn&&!jt){var ur=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?Tn=ur:wt=ur)}if(wt?(Ze.computed=!1,Ze.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),Ze.key.name=wt,this.finishNode(Ze.key,"Identifier")):this.parseClassElementName(Ze),$e<13||this.type===Ne.parenL||Tn!=="method"||jt||yn){var Ir=!Ze.static&&Sn(Ze,"constructor"),wr=Ir&&Pe;Ir&&Tn!=="method"&&this.raise(Ze.key.start,"Constructor can't have get/set modifier"),Ze.kind=Ir?"constructor":Tn,this.parseClassMethod(Ze,jt,yn,wr)}else this.parseClassField(Ze);return Ze},In.isClassElementNameStart=function(){return this.type===Ne.name||this.type===Ne.privateId||this.type===Ne.num||this.type===Ne.string||this.type===Ne.bracketL||this.type.keyword},In.parseClassElementName=function(Pe){this.type===Ne.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),Pe.computed=!1,Pe.key=this.parsePrivateIdent()):this.parsePropertyName(Pe)},In.parseClassMethod=function(Pe,$e,Ze,wt){var jt=Pe.key;Pe.kind==="constructor"?($e&&this.raise(jt.start,"Constructor can't be a generator"),Ze&&this.raise(jt.start,"Constructor can't be an async method")):Pe.static&&Sn(Pe,"prototype")&&this.raise(jt.start,"Classes may not have a static property named prototype");var yn=Pe.value=this.parseMethod($e,Ze,wt);return Pe.kind==="get"&&yn.params.length!==0&&this.raiseRecoverable(yn.start,"getter should have no params"),Pe.kind==="set"&&yn.params.length!==1&&this.raiseRecoverable(yn.start,"setter should have exactly one param"),Pe.kind==="set"&&yn.params[0].type==="RestElement"&&this.raiseRecoverable(yn.params[0].start,"Setter cannot use rest params"),this.finishNode(Pe,"MethodDefinition")},In.parseClassField=function(Pe){return Sn(Pe,"constructor")?this.raise(Pe.key.start,"Classes can't have a field named 'constructor'"):Pe.static&&Sn(Pe,"prototype")&&this.raise(Pe.key.start,"Classes can't have a static field named 'prototype'"),this.eat(Ne.eq)?(this.enterScope(dn|Dn),Pe.value=this.parseMaybeAssign(),this.exitScope()):Pe.value=null,this.semicolon(),this.finishNode(Pe,"PropertyDefinition")},In.parseClassStaticBlock=function(Pe){Pe.body=[];var $e=this.labels;for(this.labels=[],this.enterScope(mn|Dn);this.type!==Ne.braceR;){var Ze=this.parseStatement(null);Pe.body.push(Ze)}return this.next(),this.exitScope(),this.labels=$e,this.finishNode(Pe,"StaticBlock")},In.parseClassId=function(Pe,$e){this.type===Ne.name?(Pe.id=this.parseIdent(),$e&&this.checkLValSimple(Pe.id,ln,!1)):($e===!0&&this.unexpected(),Pe.id=null)},In.parseClassSuper=function(Pe){Pe.superClass=this.eat(Ne._extends)?this.parseExprSubscripts(null,!1):null},In.enterClassBody=function(){var Pe={declared:Object.create(null),used:[]};return this.privateNameStack.push(Pe),Pe.declared},In.exitClassBody=function(){var Pe=this.privateNameStack.pop(),$e=Pe.declared,Ze=Pe.used;if(this.options.checkPrivateFields)for(var wt=this.privateNameStack.length,jt=wt===0?null:this.privateNameStack[wt-1],yn=0;yn<Ze.length;++yn){var Tn=Ze[yn];Ye($e,Tn.name)||(jt?jt.used.push(Tn):this.raiseRecoverable(Tn.start,"Private field '#"+Tn.name+"' must be declared in an enclosing class"))}};function un(Pe,$e){var Ze=$e.key.name,wt=Pe[Ze],jt="true";return $e.type==="MethodDefinition"&&($e.kind==="get"||$e.kind==="set")&&(jt=($e.static?"s":"i")+$e.kind),wt==="iget"&&jt==="iset"||wt==="iset"&&jt==="iget"||wt==="sget"&&jt==="sset"||wt==="sset"&&jt==="sget"?(Pe[Ze]="true",!1):wt?!0:(Pe[Ze]=jt,!1)}function Sn(Pe,$e){var Ze=Pe.computed,wt=Pe.key;return!Ze&&(wt.type==="Identifier"&&wt.name===$e||wt.type==="Literal"&&wt.value===$e)}In.parseExportAllDeclaration=function(Pe,$e){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(Pe.exported=this.parseModuleExportName(),this.checkExport($e,Pe.exported,this.lastTokStart)):Pe.exported=null),this.expectContextual("from"),this.type!==Ne.string&&this.unexpected(),Pe.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(Pe.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(Pe,"ExportAllDeclaration")},In.parseExport=function(Pe,$e){if(this.next(),this.eat(Ne.star))return this.parseExportAllDeclaration(Pe,$e);if(this.eat(Ne._default))return this.checkExport($e,"default",this.lastTokStart),Pe.declaration=this.parseExportDefaultDeclaration(),this.finishNode(Pe,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())Pe.declaration=this.parseExportDeclaration(Pe),Pe.declaration.type==="VariableDeclaration"?this.checkVariableExport($e,Pe.declaration.declarations):this.checkExport($e,Pe.declaration.id,Pe.declaration.id.start),Pe.specifiers=[],Pe.source=null,this.options.ecmaVersion>=16&&(Pe.attributes=[]);else{if(Pe.declaration=null,Pe.specifiers=this.parseExportSpecifiers($e),this.eatContextual("from"))this.type!==Ne.string&&this.unexpected(),Pe.source=this.parseExprAtom(),this.options.ecmaVersion>=16&&(Pe.attributes=this.parseWithClause());else{for(var Ze=0,wt=Pe.specifiers;Ze<wt.length;Ze+=1){var jt=wt[Ze];this.checkUnreserved(jt.local),this.checkLocalExport(jt.local),jt.local.type==="Literal"&&this.raise(jt.local.start,"A string literal cannot be used as an exported binding without `from`.")}Pe.source=null,this.options.ecmaVersion>=16&&(Pe.attributes=[])}this.semicolon()}return this.finishNode(Pe,"ExportNamedDeclaration")},In.parseExportDeclaration=function(Pe){return this.parseStatement(null)},In.parseExportDefaultDeclaration=function(){var Pe;if(this.type===Ne._function||(Pe=this.isAsyncFunction())){var $e=this.startNode();return this.next(),Pe&&this.next(),this.parseFunction($e,gr|Er,!1,Pe)}else if(this.type===Ne._class){var Ze=this.startNode();return this.parseClass(Ze,"nullableID")}else{var wt=this.parseMaybeAssign();return this.semicolon(),wt}},In.checkExport=function(Pe,$e,Ze){Pe&&(typeof $e!="string"&&($e=$e.type==="Identifier"?$e.name:$e.value),Ye(Pe,$e)&&this.raiseRecoverable(Ze,"Duplicate export '"+$e+"'"),Pe[$e]=!0)},In.checkPatternExport=function(Pe,$e){var Ze=$e.type;if(Ze==="Identifier")this.checkExport(Pe,$e,$e.start);else if(Ze==="ObjectPattern")for(var wt=0,jt=$e.properties;wt<jt.length;wt+=1){var yn=jt[wt];this.checkPatternExport(Pe,yn)}else if(Ze==="ArrayPattern")for(var Tn=0,rr=$e.elements;Tn<rr.length;Tn+=1){var ur=rr[Tn];ur&&this.checkPatternExport(Pe,ur)}else Ze==="Property"?this.checkPatternExport(Pe,$e.value):Ze==="AssignmentPattern"?this.checkPatternExport(Pe,$e.left):Ze==="RestElement"&&this.checkPatternExport(Pe,$e.argument)},In.checkVariableExport=function(Pe,$e){if(Pe)for(var Ze=0,wt=$e;Ze<wt.length;Ze+=1){var jt=wt[Ze];this.checkPatternExport(Pe,jt.id)}},In.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()},In.parseExportSpecifier=function(Pe){var $e=this.startNode();return $e.local=this.parseModuleExportName(),$e.exported=this.eatContextual("as")?this.parseModuleExportName():$e.local,this.checkExport(Pe,$e.exported,$e.exported.start),this.finishNode($e,"ExportSpecifier")},In.parseExportSpecifiers=function(Pe){var $e=[],Ze=!0;for(this.expect(Ne.braceL);!this.eat(Ne.braceR);){if(Ze)Ze=!1;else if(this.expect(Ne.comma),this.afterTrailingComma(Ne.braceR))break;$e.push(this.parseExportSpecifier(Pe))}return $e},In.parseImport=function(Pe){return this.next(),this.type===Ne.string?(Pe.specifiers=lr,Pe.source=this.parseExprAtom()):(Pe.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),Pe.source=this.type===Ne.string?this.parseExprAtom():this.unexpected()),this.options.ecmaVersion>=16&&(Pe.attributes=this.parseWithClause()),this.semicolon(),this.finishNode(Pe,"ImportDeclaration")},In.parseImportSpecifier=function(){var Pe=this.startNode();return Pe.imported=this.parseModuleExportName(),this.eatContextual("as")?Pe.local=this.parseIdent():(this.checkUnreserved(Pe.imported),Pe.local=Pe.imported),this.checkLValSimple(Pe.local,ln),this.finishNode(Pe,"ImportSpecifier")},In.parseImportDefaultSpecifier=function(){var Pe=this.startNode();return Pe.local=this.parseIdent(),this.checkLValSimple(Pe.local,ln),this.finishNode(Pe,"ImportDefaultSpecifier")},In.parseImportNamespaceSpecifier=function(){var Pe=this.startNode();return this.next(),this.expectContextual("as"),Pe.local=this.parseIdent(),this.checkLValSimple(Pe.local,ln),this.finishNode(Pe,"ImportNamespaceSpecifier")},In.parseImportSpecifiers=function(){var Pe=[],$e=!0;if(this.type===Ne.name&&(Pe.push(this.parseImportDefaultSpecifier()),!this.eat(Ne.comma)))return Pe;if(this.type===Ne.star)return Pe.push(this.parseImportNamespaceSpecifier()),Pe;for(this.expect(Ne.braceL);!this.eat(Ne.braceR);){if($e)$e=!1;else if(this.expect(Ne.comma),this.afterTrailingComma(Ne.braceR))break;Pe.push(this.parseImportSpecifier())}return Pe},In.parseWithClause=function(){var Pe=[];if(!this.eat(Ne._with))return Pe;this.expect(Ne.braceL);for(var $e={},Ze=!0;!this.eat(Ne.braceR);){if(Ze)Ze=!1;else if(this.expect(Ne.comma),this.afterTrailingComma(Ne.braceR))break;var wt=this.parseImportAttribute(),jt=wt.key.type==="Identifier"?wt.key.name:wt.key.value;Ye($e,jt)&&this.raiseRecoverable(wt.key.start,"Duplicate attribute key '"+jt+"'"),$e[jt]=!0,Pe.push(wt)}return Pe},In.parseImportAttribute=function(){var Pe=this.startNode();return Pe.key=this.type===Ne.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never"),this.expect(Ne.colon),this.type!==Ne.string&&this.unexpected(),Pe.value=this.parseExprAtom(),this.finishNode(Pe,"ImportAttribute")},In.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===Ne.string){var Pe=this.parseLiteral(this.value);return Wt.test(Pe.value)&&this.raise(Pe.start,"An export name cannot include a lone surrogate."),Pe}return this.parseIdent(!0)},In.adaptDirectivePrologue=function(Pe){for(var $e=0;$e<Pe.length&&this.isDirectiveCandidate(Pe[$e]);++$e)Pe[$e].directive=Pe[$e].expression.raw.slice(1,-1)},In.isDirectiveCandidate=function(Pe){return this.options.ecmaVersion>=5&&Pe.type==="ExpressionStatement"&&Pe.expression.type==="Literal"&&typeof Pe.expression.value=="string"&&(this.input[Pe.start]==='"'||this.input[Pe.start]==="'")};var wn=on.prototype;wn.toAssignable=function(Pe,$e,Ze){if(this.options.ecmaVersion>=6&&Pe)switch(Pe.type){case"Identifier":this.inAsync&&Pe.name==="await"&&this.raise(Pe.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":Pe.type="ObjectPattern",Ze&&this.checkPatternErrors(Ze,!0);for(var wt=0,jt=Pe.properties;wt<jt.length;wt+=1){var yn=jt[wt];this.toAssignable(yn,$e),yn.type==="RestElement"&&(yn.argument.type==="ArrayPattern"||yn.argument.type==="ObjectPattern")&&this.raise(yn.argument.start,"Unexpected token")}break;case"Property":Pe.kind!=="init"&&this.raise(Pe.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(Pe.value,$e);break;case"ArrayExpression":Pe.type="ArrayPattern",Ze&&this.checkPatternErrors(Ze,!0),this.toAssignableList(Pe.elements,$e);break;case"SpreadElement":Pe.type="RestElement",this.toAssignable(Pe.argument,$e),Pe.argument.type==="AssignmentPattern"&&this.raise(Pe.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":Pe.operator!=="="&&this.raise(Pe.left.end,"Only '=' operator can be used for specifying default value."),Pe.type="AssignmentPattern",delete Pe.operator,this.toAssignable(Pe.left,$e);break;case"ParenthesizedExpression":this.toAssignable(Pe.expression,$e,Ze);break;case"ChainExpression":this.raiseRecoverable(Pe.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!$e)break;default:this.raise(Pe.start,"Assigning to rvalue")}else Ze&&this.checkPatternErrors(Ze,!0);return Pe},wn.toAssignableList=function(Pe,$e){for(var Ze=Pe.length,wt=0;wt<Ze;wt++){var jt=Pe[wt];jt&&this.toAssignable(jt,$e)}if(Ze){var yn=Pe[Ze-1];this.options.ecmaVersion===6&&$e&&yn&&yn.type==="RestElement"&&yn.argument.type!=="Identifier"&&this.unexpected(yn.argument.start)}return Pe},wn.parseSpread=function(Pe){var $e=this.startNode();return this.next(),$e.argument=this.parseMaybeAssign(!1,Pe),this.finishNode($e,"SpreadElement")},wn.parseRestBinding=function(){var Pe=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==Ne.name&&this.unexpected(),Pe.argument=this.parseBindingAtom(),this.finishNode(Pe,"RestElement")},wn.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Ne.bracketL:var Pe=this.startNode();return this.next(),Pe.elements=this.parseBindingList(Ne.bracketR,!0,!0),this.finishNode(Pe,"ArrayPattern");case Ne.braceL:return this.parseObj(!0)}return this.parseIdent()},wn.parseBindingList=function(Pe,$e,Ze,wt){for(var jt=[],yn=!0;!this.eat(Pe);)if(yn?yn=!1:this.expect(Ne.comma),$e&&this.type===Ne.comma)jt.push(null);else{if(Ze&&this.afterTrailingComma(Pe))break;if(this.type===Ne.ellipsis){var Tn=this.parseRestBinding();this.parseBindingListItem(Tn),jt.push(Tn),this.type===Ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(Pe);break}else jt.push(this.parseAssignableListItem(wt))}return jt},wn.parseAssignableListItem=function(Pe){var $e=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem($e),$e},wn.parseBindingListItem=function(Pe){return Pe},wn.parseMaybeDefault=function(Pe,$e,Ze){if(Ze=Ze||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Ne.eq))return Ze;var wt=this.startNodeAt(Pe,$e);return wt.left=Ze,wt.right=this.parseMaybeAssign(),this.finishNode(wt,"AssignmentPattern")},wn.checkLValSimple=function(Pe,$e,Ze){$e===void 0&&($e=kt);var wt=$e!==kt;switch(Pe.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(Pe.name)&&this.raiseRecoverable(Pe.start,(wt?"Binding ":"Assigning to ")+Pe.name+" in strict mode"),wt&&($e===ln&&Pe.name==="let"&&this.raiseRecoverable(Pe.start,"let is disallowed as a lexically bound name"),Ze&&(Ye(Ze,Pe.name)&&this.raiseRecoverable(Pe.start,"Argument name clash"),Ze[Pe.name]=!0),$e!==Xt&&this.declareName(Pe.name,$e,Pe.start));break;case"ChainExpression":this.raiseRecoverable(Pe.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":wt&&this.raiseRecoverable(Pe.start,"Binding member expression");break;case"ParenthesizedExpression":return wt&&this.raiseRecoverable(Pe.start,"Binding parenthesized expression"),this.checkLValSimple(Pe.expression,$e,Ze);default:this.raise(Pe.start,(wt?"Binding":"Assigning to")+" rvalue")}},wn.checkLValPattern=function(Pe,$e,Ze){switch($e===void 0&&($e=kt),Pe.type){case"ObjectPattern":for(var wt=0,jt=Pe.properties;wt<jt.length;wt+=1){var yn=jt[wt];this.checkLValInnerPattern(yn,$e,Ze)}break;case"ArrayPattern":for(var Tn=0,rr=Pe.elements;Tn<rr.length;Tn+=1){var ur=rr[Tn];ur&&this.checkLValInnerPattern(ur,$e,Ze)}break;default:this.checkLValSimple(Pe,$e,Ze)}},wn.checkLValInnerPattern=function(Pe,$e,Ze){switch($e===void 0&&($e=kt),Pe.type){case"Property":this.checkLValInnerPattern(Pe.value,$e,Ze);break;case"AssignmentPattern":this.checkLValPattern(Pe.left,$e,Ze);break;case"RestElement":this.checkLValPattern(Pe.argument,$e,Ze);break;default:this.checkLValPattern(Pe,$e,Ze)}};var Gn=function($e,Ze,wt,jt,yn){this.token=$e,this.isExpr=!!Ze,this.preserveSpace=!!wt,this.override=jt,this.generator=!!yn},Yn={b_stat:new Gn("{",!1),b_expr:new Gn("{",!0),b_tmpl:new Gn("${",!1),p_stat:new Gn("(",!1),p_expr:new Gn("(",!0),q_tmpl:new Gn("`",!0,!0,function(Pe){return Pe.tryReadTemplateToken()}),f_stat:new Gn("function",!1),f_expr:new Gn("function",!0),f_expr_gen:new Gn("function",!0,!1,null,!0),f_gen:new Gn("function",!1,!1,null,!0)},cr=on.prototype;cr.initialContext=function(){return[Yn.b_stat]},cr.curContext=function(){return this.context[this.context.length-1]},cr.braceIsBlock=function(Pe){var $e=this.curContext();return $e===Yn.f_expr||$e===Yn.f_stat?!0:Pe===Ne.colon&&($e===Yn.b_stat||$e===Yn.b_expr)?!$e.isExpr:Pe===Ne._return||Pe===Ne.name&&this.exprAllowed?He.test(this.input.slice(this.lastTokEnd,this.start)):Pe===Ne._else||Pe===Ne.semi||Pe===Ne.eof||Pe===Ne.parenR||Pe===Ne.arrow?!0:Pe===Ne.braceL?$e===Yn.b_stat:Pe===Ne._var||Pe===Ne._const||Pe===Ne.name?!1:!this.exprAllowed},cr.inGeneratorContext=function(){for(var Pe=this.context.length-1;Pe>=1;Pe--){var $e=this.context[Pe];if($e.token==="function")return $e.generator}return!1},cr.updateContext=function(Pe){var $e,Ze=this.type;Ze.keyword&&Pe===Ne.dot?this.exprAllowed=!1:($e=Ze.updateContext)?$e.call(this,Pe):this.exprAllowed=Ze.beforeExpr},cr.overrideContext=function(Pe){this.curContext()!==Pe&&(this.context[this.context.length-1]=Pe)},Ne.parenR.updateContext=Ne.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var Pe=this.context.pop();Pe===Yn.b_stat&&this.curContext().token==="function"&&(Pe=this.context.pop()),this.exprAllowed=!Pe.isExpr},Ne.braceL.updateContext=function(Pe){this.context.push(this.braceIsBlock(Pe)?Yn.b_stat:Yn.b_expr),this.exprAllowed=!0},Ne.dollarBraceL.updateContext=function(){this.context.push(Yn.b_tmpl),this.exprAllowed=!0},Ne.parenL.updateContext=function(Pe){var $e=Pe===Ne._if||Pe===Ne._for||Pe===Ne._with||Pe===Ne._while;this.context.push($e?Yn.p_stat:Yn.p_expr),this.exprAllowed=!0},Ne.incDec.updateContext=function(){},Ne._function.updateContext=Ne._class.updateContext=function(Pe){Pe.beforeExpr&&Pe!==Ne._else&&!(Pe===Ne.semi&&this.curContext()!==Yn.p_stat)&&!(Pe===Ne._return&&He.test(this.input.slice(this.lastTokEnd,this.start)))&&!((Pe===Ne.colon||Pe===Ne.braceL)&&this.curContext()===Yn.b_stat)?this.context.push(Yn.f_expr):this.context.push(Yn.f_stat),this.exprAllowed=!1},Ne.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0},Ne.backQuote.updateContext=function(){this.curContext()===Yn.q_tmpl?this.context.pop():this.context.push(Yn.q_tmpl),this.exprAllowed=!1},Ne.star.updateContext=function(Pe){if(Pe===Ne._function){var $e=this.context.length-1;this.context[$e]===Yn.f_expr?this.context[$e]=Yn.f_expr_gen:this.context[$e]=Yn.f_gen}this.exprAllowed=!0},Ne.name.updateContext=function(Pe){var $e=!1;this.options.ecmaVersion>=6&&Pe!==Ne.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&($e=!0),this.exprAllowed=$e};var tr=on.prototype;tr.checkPropClash=function(Pe,$e,Ze){if(!(this.options.ecmaVersion>=9&&Pe.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(Pe.computed||Pe.method||Pe.shorthand))){var wt=Pe.key,jt;switch(wt.type){case"Identifier":jt=wt.name;break;case"Literal":jt=String(wt.value);break;default:return}var yn=Pe.kind;if(this.options.ecmaVersion>=6){jt==="__proto__"&&yn==="init"&&($e.proto&&(Ze?Ze.doubleProto<0&&(Ze.doubleProto=wt.start):this.raiseRecoverable(wt.start,"Redefinition of __proto__ property")),$e.proto=!0);return}jt="$"+jt;var Tn=$e[jt];if(Tn){var rr;yn==="init"?rr=this.strict&&Tn.init||Tn.get||Tn.set:rr=Tn.init||Tn[yn],rr&&this.raiseRecoverable(wt.start,"Redefinition of property")}else Tn=$e[jt]={init:!1,get:!1,set:!1};Tn[yn]=!0}},tr.parseExpression=function(Pe,$e){var Ze=this.start,wt=this.startLoc,jt=this.parseMaybeAssign(Pe,$e);if(this.type===Ne.comma){var yn=this.startNodeAt(Ze,wt);for(yn.expressions=[jt];this.eat(Ne.comma);)yn.expressions.push(this.parseMaybeAssign(Pe,$e));return this.finishNode(yn,"SequenceExpression")}return jt},tr.parseMaybeAssign=function(Pe,$e,Ze){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(Pe);this.exprAllowed=!1}var wt=!1,jt=-1,yn=-1,Tn=-1;$e?(jt=$e.parenthesizedAssign,yn=$e.trailingComma,Tn=$e.doubleProto,$e.parenthesizedAssign=$e.trailingComma=-1):($e=new zn,wt=!0);var rr=this.start,ur=this.startLoc;(this.type===Ne.parenL||this.type===Ne.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=Pe==="await");var Ir=this.parseMaybeConditional(Pe,$e);if(Ze&&(Ir=Ze.call(this,Ir,rr,ur)),this.type.isAssign){var wr=this.startNodeAt(rr,ur);return wr.operator=this.value,this.type===Ne.eq&&(Ir=this.toAssignable(Ir,!1,$e)),wt||($e.parenthesizedAssign=$e.trailingComma=$e.doubleProto=-1),$e.shorthandAssign>=Ir.start&&($e.shorthandAssign=-1),this.type===Ne.eq?this.checkLValPattern(Ir):this.checkLValSimple(Ir),wr.left=Ir,this.next(),wr.right=this.parseMaybeAssign(Pe),Tn>-1&&($e.doubleProto=Tn),this.finishNode(wr,"AssignmentExpression")}else wt&&this.checkExpressionErrors($e,!0);return jt>-1&&($e.parenthesizedAssign=jt),yn>-1&&($e.trailingComma=yn),Ir},tr.parseMaybeConditional=function(Pe,$e){var Ze=this.start,wt=this.startLoc,jt=this.parseExprOps(Pe,$e);if(this.checkExpressionErrors($e))return jt;if(this.eat(Ne.question)){var yn=this.startNodeAt(Ze,wt);return yn.test=jt,yn.consequent=this.parseMaybeAssign(),this.expect(Ne.colon),yn.alternate=this.parseMaybeAssign(Pe),this.finishNode(yn,"ConditionalExpression")}return jt},tr.parseExprOps=function(Pe,$e){var Ze=this.start,wt=this.startLoc,jt=this.parseMaybeUnary($e,!1,!1,Pe);return this.checkExpressionErrors($e)||jt.start===Ze&&jt.type==="ArrowFunctionExpression"?jt:this.parseExprOp(jt,Ze,wt,-1,Pe)},tr.parseExprOp=function(Pe,$e,Ze,wt,jt){var yn=this.type.binop;if(yn!=null&&(!jt||this.type!==Ne._in)&&yn>wt){var Tn=this.type===Ne.logicalOR||this.type===Ne.logicalAND,rr=this.type===Ne.coalesce;rr&&(yn=Ne.logicalAND.binop);var ur=this.value;this.next();var Ir=this.start,wr=this.startLoc,ui=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,jt),Ir,wr,yn,jt),Hi=this.buildBinary($e,Ze,Pe,ui,ur,Tn||rr);return(Tn&&this.type===Ne.coalesce||rr&&(this.type===Ne.logicalOR||this.type===Ne.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(Hi,$e,Ze,wt,jt)}return Pe},tr.buildBinary=function(Pe,$e,Ze,wt,jt,yn){wt.type==="PrivateIdentifier"&&this.raise(wt.start,"Private identifier can only be left side of binary expression");var Tn=this.startNodeAt(Pe,$e);return Tn.left=Ze,Tn.operator=jt,Tn.right=wt,this.finishNode(Tn,yn?"LogicalExpression":"BinaryExpression")},tr.parseMaybeUnary=function(Pe,$e,Ze,wt){var jt=this.start,yn=this.startLoc,Tn;if(this.isContextual("await")&&this.canAwait)Tn=this.parseAwait(wt),$e=!0;else if(this.type.prefix){var rr=this.startNode(),ur=this.type===Ne.incDec;rr.operator=this.value,rr.prefix=!0,this.next(),rr.argument=this.parseMaybeUnary(null,!0,ur,wt),this.checkExpressionErrors(Pe,!0),ur?this.checkLValSimple(rr.argument):this.strict&&rr.operator==="delete"&&Wr(rr.argument)?this.raiseRecoverable(rr.start,"Deleting local variable in strict mode"):rr.operator==="delete"&&Qr(rr.argument)?this.raiseRecoverable(rr.start,"Private fields can not be deleted"):$e=!0,Tn=this.finishNode(rr,ur?"UpdateExpression":"UnaryExpression")}else if(!$e&&this.type===Ne.privateId)(wt||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),Tn=this.parsePrivateIdent(),this.type!==Ne._in&&this.unexpected();else{if(Tn=this.parseExprSubscripts(Pe,wt),this.checkExpressionErrors(Pe))return Tn;for(;this.type.postfix&&!this.canInsertSemicolon();){var Ir=this.startNodeAt(jt,yn);Ir.operator=this.value,Ir.prefix=!1,Ir.argument=Tn,this.checkLValSimple(Tn),this.next(),Tn=this.finishNode(Ir,"UpdateExpression")}}if(!Ze&&this.eat(Ne.starstar))if($e)this.unexpected(this.lastTokStart);else return this.buildBinary(jt,yn,Tn,this.parseMaybeUnary(null,!1,!1,wt),"**",!1);else return Tn};function Wr(Pe){return Pe.type==="Identifier"||Pe.type==="ParenthesizedExpression"&&Wr(Pe.expression)}function Qr(Pe){return Pe.type==="MemberExpression"&&Pe.property.type==="PrivateIdentifier"||Pe.type==="ChainExpression"&&Qr(Pe.expression)||Pe.type==="ParenthesizedExpression"&&Qr(Pe.expression)}tr.parseExprSubscripts=function(Pe,$e){var Ze=this.start,wt=this.startLoc,jt=this.parseExprAtom(Pe,$e);if(jt.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return jt;var yn=this.parseSubscripts(jt,Ze,wt,!1,$e);return Pe&&yn.type==="MemberExpression"&&(Pe.parenthesizedAssign>=yn.start&&(Pe.parenthesizedAssign=-1),Pe.parenthesizedBind>=yn.start&&(Pe.parenthesizedBind=-1),Pe.trailingComma>=yn.start&&(Pe.trailingComma=-1)),yn},tr.parseSubscripts=function(Pe,$e,Ze,wt,jt){for(var yn=this.options.ecmaVersion>=8&&Pe.type==="Identifier"&&Pe.name==="async"&&this.lastTokEnd===Pe.end&&!this.canInsertSemicolon()&&Pe.end-Pe.start===5&&this.potentialArrowAt===Pe.start,Tn=!1;;){var rr=this.parseSubscript(Pe,$e,Ze,wt,yn,Tn,jt);if(rr.optional&&(Tn=!0),rr===Pe||rr.type==="ArrowFunctionExpression"){if(Tn){var ur=this.startNodeAt($e,Ze);ur.expression=rr,rr=this.finishNode(ur,"ChainExpression")}return rr}Pe=rr}},tr.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(Ne.arrow)},tr.parseSubscriptAsyncArrow=function(Pe,$e,Ze,wt){return this.parseArrowExpression(this.startNodeAt(Pe,$e),Ze,!0,wt)},tr.parseSubscript=function(Pe,$e,Ze,wt,jt,yn,Tn){var rr=this.options.ecmaVersion>=11,ur=rr&&this.eat(Ne.questionDot);wt&&ur&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var Ir=this.eat(Ne.bracketL);if(Ir||ur&&this.type!==Ne.parenL&&this.type!==Ne.backQuote||this.eat(Ne.dot)){var wr=this.startNodeAt($e,Ze);wr.object=Pe,Ir?(wr.property=this.parseExpression(),this.expect(Ne.bracketR)):this.type===Ne.privateId&&Pe.type!=="Super"?wr.property=this.parsePrivateIdent():wr.property=this.parseIdent(this.options.allowReserved!=="never"),wr.computed=!!Ir,rr&&(wr.optional=ur),Pe=this.finishNode(wr,"MemberExpression")}else if(!wt&&this.eat(Ne.parenL)){var ui=new zn,Hi=this.yieldPos,bs=this.awaitPos,ms=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var As=this.parseExprList(Ne.parenR,this.options.ecmaVersion>=8,!1,ui);if(jt&&!ur&&this.shouldParseAsyncArrow())return this.checkPatternErrors(ui,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=Hi,this.awaitPos=bs,this.awaitIdentPos=ms,this.parseSubscriptAsyncArrow($e,Ze,As,Tn);this.checkExpressionErrors(ui,!0),this.yieldPos=Hi||this.yieldPos,this.awaitPos=bs||this.awaitPos,this.awaitIdentPos=ms||this.awaitIdentPos;var gs=this.startNodeAt($e,Ze);gs.callee=Pe,gs.arguments=As,rr&&(gs.optional=ur),Pe=this.finishNode(gs,"CallExpression")}else if(this.type===Ne.backQuote){(ur||yn)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var xs=this.startNodeAt($e,Ze);xs.tag=Pe,xs.quasi=this.parseTemplate({isTagged:!0}),Pe=this.finishNode(xs,"TaggedTemplateExpression")}return Pe},tr.parseExprAtom=function(Pe,$e,Ze){this.type===Ne.slash&&this.readRegexp();var wt,jt=this.potentialArrowAt===this.start;switch(this.type){case Ne._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),wt=this.startNode(),this.next(),this.type===Ne.parenL&&!this.allowDirectSuper&&this.raise(wt.start,"super() call outside constructor of a subclass"),this.type!==Ne.dot&&this.type!==Ne.bracketL&&this.type!==Ne.parenL&&this.unexpected(),this.finishNode(wt,"Super");case Ne._this:return wt=this.startNode(),this.next(),this.finishNode(wt,"ThisExpression");case Ne.name:var yn=this.start,Tn=this.startLoc,rr=this.containsEsc,ur=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!rr&&ur.name==="async"&&!this.canInsertSemicolon()&&this.eat(Ne._function))return this.overrideContext(Yn.f_expr),this.parseFunction(this.startNodeAt(yn,Tn),0,!1,!0,$e);if(jt&&!this.canInsertSemicolon()){if(this.eat(Ne.arrow))return this.parseArrowExpression(this.startNodeAt(yn,Tn),[ur],!1,$e);if(this.options.ecmaVersion>=8&&ur.name==="async"&&this.type===Ne.name&&!rr&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return ur=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(Ne.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(yn,Tn),[ur],!0,$e)}return ur;case Ne.regexp:var Ir=this.value;return wt=this.parseLiteral(Ir.value),wt.regex={pattern:Ir.pattern,flags:Ir.flags},wt;case Ne.num:case Ne.string:return this.parseLiteral(this.value);case Ne._null:case Ne._true:case Ne._false:return wt=this.startNode(),wt.value=this.type===Ne._null?null:this.type===Ne._true,wt.raw=this.type.keyword,this.next(),this.finishNode(wt,"Literal");case Ne.parenL:var wr=this.start,ui=this.parseParenAndDistinguishExpression(jt,$e);return Pe&&(Pe.parenthesizedAssign<0&&!this.isSimpleAssignTarget(ui)&&(Pe.parenthesizedAssign=wr),Pe.parenthesizedBind<0&&(Pe.parenthesizedBind=wr)),ui;case Ne.bracketL:return wt=this.startNode(),this.next(),wt.elements=this.parseExprList(Ne.bracketR,!0,!0,Pe),this.finishNode(wt,"ArrayExpression");case Ne.braceL:return this.overrideContext(Yn.b_expr),this.parseObj(!1,Pe);case Ne._function:return wt=this.startNode(),this.next(),this.parseFunction(wt,0);case Ne._class:return this.parseClass(this.startNode(),!1);case Ne._new:return this.parseNew();case Ne.backQuote:return this.parseTemplate();case Ne._import:return this.options.ecmaVersion>=11?this.parseExprImport(Ze):this.unexpected();default:return this.parseExprAtomDefault()}},tr.parseExprAtomDefault=function(){this.unexpected()},tr.parseExprImport=function(Pe){var $e=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===Ne.parenL&&!Pe)return this.parseDynamicImport($e);if(this.type===Ne.dot){var Ze=this.startNodeAt($e.start,$e.loc&&$e.loc.start);return Ze.name="import",$e.meta=this.finishNode(Ze,"Identifier"),this.parseImportMeta($e)}else this.unexpected()},tr.parseDynamicImport=function(Pe){if(this.next(),Pe.source=this.parseMaybeAssign(),this.options.ecmaVersion>=16)this.eat(Ne.parenR)?Pe.options=null:(this.expect(Ne.comma),this.afterTrailingComma(Ne.parenR)?Pe.options=null:(Pe.options=this.parseMaybeAssign(),this.eat(Ne.parenR)||(this.expect(Ne.comma),this.afterTrailingComma(Ne.parenR)||this.unexpected())));else if(!this.eat(Ne.parenR)){var $e=this.start;this.eat(Ne.comma)&&this.eat(Ne.parenR)?this.raiseRecoverable($e,"Trailing comma is not allowed in import()"):this.unexpected($e)}return this.finishNode(Pe,"ImportExpression")},tr.parseImportMeta=function(Pe){this.next();var $e=this.containsEsc;return Pe.property=this.parseIdent(!0),Pe.property.name!=="meta"&&this.raiseRecoverable(Pe.property.start,"The only valid meta property for import is 'import.meta'"),$e&&this.raiseRecoverable(Pe.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(Pe.start,"Cannot use 'import.meta' outside a module"),this.finishNode(Pe,"MetaProperty")},tr.parseLiteral=function(Pe){var $e=this.startNode();return $e.value=Pe,$e.raw=this.input.slice(this.start,this.end),$e.raw.charCodeAt($e.raw.length-1)===110&&($e.bigint=$e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode($e,"Literal")},tr.parseParenExpression=function(){this.expect(Ne.parenL);var Pe=this.parseExpression();return this.expect(Ne.parenR),Pe},tr.shouldParseArrow=function(Pe){return!this.canInsertSemicolon()},tr.parseParenAndDistinguishExpression=function(Pe,$e){var Ze=this.start,wt=this.startLoc,jt,yn=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var Tn=this.start,rr=this.startLoc,ur=[],Ir=!0,wr=!1,ui=new zn,Hi=this.yieldPos,bs=this.awaitPos,ms;for(this.yieldPos=0,this.awaitPos=0;this.type!==Ne.parenR;)if(Ir?Ir=!1:this.expect(Ne.comma),yn&&this.afterTrailingComma(Ne.parenR,!0)){wr=!0;break}else if(this.type===Ne.ellipsis){ms=this.start,ur.push(this.parseParenItem(this.parseRestBinding())),this.type===Ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else ur.push(this.parseMaybeAssign(!1,ui,this.parseParenItem));var As=this.lastTokEnd,gs=this.lastTokEndLoc;if(this.expect(Ne.parenR),Pe&&this.shouldParseArrow(ur)&&this.eat(Ne.arrow))return this.checkPatternErrors(ui,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=Hi,this.awaitPos=bs,this.parseParenArrowList(Ze,wt,ur,$e);(!ur.length||wr)&&this.unexpected(this.lastTokStart),ms&&this.unexpected(ms),this.checkExpressionErrors(ui,!0),this.yieldPos=Hi||this.yieldPos,this.awaitPos=bs||this.awaitPos,ur.length>1?(jt=this.startNodeAt(Tn,rr),jt.expressions=ur,this.finishNodeAt(jt,"SequenceExpression",As,gs)):jt=ur[0]}else jt=this.parseParenExpression();if(this.options.preserveParens){var xs=this.startNodeAt(Ze,wt);return xs.expression=jt,this.finishNode(xs,"ParenthesizedExpression")}else return jt},tr.parseParenItem=function(Pe){return Pe},tr.parseParenArrowList=function(Pe,$e,Ze,wt){return this.parseArrowExpression(this.startNodeAt(Pe,$e),Ze,!1,wt)};var kr=[];tr.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var Pe=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===Ne.dot){var $e=this.startNodeAt(Pe.start,Pe.loc&&Pe.loc.start);$e.name="new",Pe.meta=this.finishNode($e,"Identifier"),this.next();var Ze=this.containsEsc;return Pe.property=this.parseIdent(!0),Pe.property.name!=="target"&&this.raiseRecoverable(Pe.property.start,"The only valid meta property for new is 'new.target'"),Ze&&this.raiseRecoverable(Pe.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(Pe.start,"'new.target' can only be used in functions and class static block"),this.finishNode(Pe,"MetaProperty")}var wt=this.start,jt=this.startLoc;return Pe.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),wt,jt,!0,!1),this.eat(Ne.parenL)?Pe.arguments=this.parseExprList(Ne.parenR,this.options.ecmaVersion>=8,!1):Pe.arguments=kr,this.finishNode(Pe,"NewExpression")},tr.parseTemplateElement=function(Pe){var $e=Pe.isTagged,Ze=this.startNode();return this.type===Ne.invalidTemplate?($e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),Ze.value={raw:this.value.replace(/\r\n?/g,`
`),cooked:null}):Ze.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),Ze.tail=this.type===Ne.backQuote,this.finishNode(Ze,"TemplateElement")},tr.parseTemplate=function(Pe){Pe===void 0&&(Pe={});var $e=Pe.isTagged;$e===void 0&&($e=!1);var Ze=this.startNode();this.next(),Ze.expressions=[];var wt=this.parseTemplateElement({isTagged:$e});for(Ze.quasis=[wt];!wt.tail;)this.type===Ne.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Ne.dollarBraceL),Ze.expressions.push(this.parseExpression()),this.expect(Ne.braceR),Ze.quasis.push(wt=this.parseTemplateElement({isTagged:$e}));return this.next(),this.finishNode(Ze,"TemplateLiteral")},tr.isAsyncProp=function(Pe){return!Pe.computed&&Pe.key.type==="Identifier"&&Pe.key.name==="async"&&(this.type===Ne.name||this.type===Ne.num||this.type===Ne.string||this.type===Ne.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Ne.star)&&!He.test(this.input.slice(this.lastTokEnd,this.start))},tr.parseObj=function(Pe,$e){var Ze=this.startNode(),wt=!0,jt={};for(Ze.properties=[],this.next();!this.eat(Ne.braceR);){if(wt)wt=!1;else if(this.expect(Ne.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(Ne.braceR))break;var yn=this.parseProperty(Pe,$e);Pe||this.checkPropClash(yn,jt,$e),Ze.properties.push(yn)}return this.finishNode(Ze,Pe?"ObjectPattern":"ObjectExpression")},tr.parseProperty=function(Pe,$e){var Ze=this.startNode(),wt,jt,yn,Tn;if(this.options.ecmaVersion>=9&&this.eat(Ne.ellipsis))return Pe?(Ze.argument=this.parseIdent(!1),this.type===Ne.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(Ze,"RestElement")):(Ze.argument=this.parseMaybeAssign(!1,$e),this.type===Ne.comma&&$e&&$e.trailingComma<0&&($e.trailingComma=this.start),this.finishNode(Ze,"SpreadElement"));this.options.ecmaVersion>=6&&(Ze.method=!1,Ze.shorthand=!1,(Pe||$e)&&(yn=this.start,Tn=this.startLoc),Pe||(wt=this.eat(Ne.star)));var rr=this.containsEsc;return this.parsePropertyName(Ze),!Pe&&!rr&&this.options.ecmaVersion>=8&&!wt&&this.isAsyncProp(Ze)?(jt=!0,wt=this.options.ecmaVersion>=9&&this.eat(Ne.star),this.parsePropertyName(Ze)):jt=!1,this.parsePropertyValue(Ze,Pe,wt,jt,yn,Tn,$e,rr),this.finishNode(Ze,"Property")},tr.parseGetterSetter=function(Pe){var $e=Pe.key.name;this.parsePropertyName(Pe),Pe.value=this.parseMethod(!1),Pe.kind=$e;var Ze=Pe.kind==="get"?0:1;if(Pe.value.params.length!==Ze){var wt=Pe.value.start;Pe.kind==="get"?this.raiseRecoverable(wt,"getter should have no params"):this.raiseRecoverable(wt,"setter should have exactly one param")}else Pe.kind==="set"&&Pe.value.params[0].type==="RestElement"&&this.raiseRecoverable(Pe.value.params[0].start,"Setter cannot use rest params")},tr.parsePropertyValue=function(Pe,$e,Ze,wt,jt,yn,Tn,rr){(Ze||wt)&&this.type===Ne.colon&&this.unexpected(),this.eat(Ne.colon)?(Pe.value=$e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,Tn),Pe.kind="init"):this.options.ecmaVersion>=6&&this.type===Ne.parenL?($e&&this.unexpected(),Pe.method=!0,Pe.value=this.parseMethod(Ze,wt),Pe.kind="init"):!$e&&!rr&&this.options.ecmaVersion>=5&&!Pe.computed&&Pe.key.type==="Identifier"&&(Pe.key.name==="get"||Pe.key.name==="set")&&this.type!==Ne.comma&&this.type!==Ne.braceR&&this.type!==Ne.eq?((Ze||wt)&&this.unexpected(),this.parseGetterSetter(Pe)):this.options.ecmaVersion>=6&&!Pe.computed&&Pe.key.type==="Identifier"?((Ze||wt)&&this.unexpected(),this.checkUnreserved(Pe.key),Pe.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=jt),$e?Pe.value=this.parseMaybeDefault(jt,yn,this.copyNode(Pe.key)):this.type===Ne.eq&&Tn?(Tn.shorthandAssign<0&&(Tn.shorthandAssign=this.start),Pe.value=this.parseMaybeDefault(jt,yn,this.copyNode(Pe.key))):Pe.value=this.copyNode(Pe.key),Pe.kind="init",Pe.shorthand=!0):this.unexpected()},tr.parsePropertyName=function(Pe){if(this.options.ecmaVersion>=6){if(this.eat(Ne.bracketL))return Pe.computed=!0,Pe.key=this.parseMaybeAssign(),this.expect(Ne.bracketR),Pe.key;Pe.computed=!1}return Pe.key=this.type===Ne.num||this.type===Ne.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")},tr.initFunction=function(Pe){Pe.id=null,this.options.ecmaVersion>=6&&(Pe.generator=Pe.expression=!1),this.options.ecmaVersion>=8&&(Pe.async=!1)},tr.parseMethod=function(Pe,$e,Ze){var wt=this.startNode(),jt=this.yieldPos,yn=this.awaitPos,Tn=this.awaitIdentPos;return this.initFunction(wt),this.options.ecmaVersion>=6&&(wt.generator=Pe),this.options.ecmaVersion>=8&&(wt.async=!!$e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(Bn($e,wt.generator)|Dn|(Ze?hn:0)),this.expect(Ne.parenL),wt.params=this.parseBindingList(Ne.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(wt,!1,!0,!1),this.yieldPos=jt,this.awaitPos=yn,this.awaitIdentPos=Tn,this.finishNode(wt,"FunctionExpression")},tr.parseArrowExpression=function(Pe,$e,Ze,wt){var jt=this.yieldPos,yn=this.awaitPos,Tn=this.awaitIdentPos;return this.enterScope(Bn(Ze,!1)|Mn),this.initFunction(Pe),this.options.ecmaVersion>=8&&(Pe.async=!!Ze),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,Pe.params=this.toAssignableList($e,!0),this.parseFunctionBody(Pe,!0,!1,wt),this.yieldPos=jt,this.awaitPos=yn,this.awaitIdentPos=Tn,this.finishNode(Pe,"ArrowFunctionExpression")},tr.parseFunctionBody=function(Pe,$e,Ze,wt){var jt=$e&&this.type!==Ne.braceL,yn=this.strict,Tn=!1;if(jt)Pe.body=this.parseMaybeAssign(wt),Pe.expression=!0,this.checkParams(Pe,!1);else{var rr=this.options.ecmaVersion>=7&&!this.isSimpleParamList(Pe.params);(!yn||rr)&&(Tn=this.strictDirective(this.end),Tn&&rr&&this.raiseRecoverable(Pe.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var ur=this.labels;this.labels=[],Tn&&(this.strict=!0),this.checkParams(Pe,!yn&&!Tn&&!$e&&!Ze&&this.isSimpleParamList(Pe.params)),this.strict&&Pe.id&&this.checkLValSimple(Pe.id,Xt),Pe.body=this.parseBlock(!1,void 0,Tn&&!yn),Pe.expression=!1,this.adaptDirectivePrologue(Pe.body.body),this.labels=ur}this.exitScope()},tr.isSimpleParamList=function(Pe){for(var $e=0,Ze=Pe;$e<Ze.length;$e+=1){var wt=Ze[$e];if(wt.type!=="Identifier")return!1}return!0},tr.checkParams=function(Pe,$e){for(var Ze=Object.create(null),wt=0,jt=Pe.params;wt<jt.length;wt+=1){var yn=jt[wt];this.checkLValInnerPattern(yn,Dt,$e?null:Ze)}},tr.parseExprList=function(Pe,$e,Ze,wt){for(var jt=[],yn=!0;!this.eat(Pe);){if(yn)yn=!1;else if(this.expect(Ne.comma),$e&&this.afterTrailingComma(Pe))break;var Tn=void 0;Ze&&this.type===Ne.comma?Tn=null:this.type===Ne.ellipsis?(Tn=this.parseSpread(wt),wt&&this.type===Ne.comma&&wt.trailingComma<0&&(wt.trailingComma=this.start)):Tn=this.parseMaybeAssign(!1,wt),jt.push(Tn)}return jt},tr.checkUnreserved=function(Pe){var $e=Pe.start,Ze=Pe.end,wt=Pe.name;if(this.inGenerator&&wt==="yield"&&this.raiseRecoverable($e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&wt==="await"&&this.raiseRecoverable($e,"Cannot use 'await' as identifier inside an async function"),!(this.currentThisScope().flags&Hn)&&wt==="arguments"&&this.raiseRecoverable($e,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(wt==="arguments"||wt==="await")&&this.raise($e,"Cannot use "+wt+" in class static initialization block"),this.keywords.test(wt)&&this.raise($e,"Unexpected keyword '"+wt+"'"),!(this.options.ecmaVersion<6&&this.input.slice($e,Ze).indexOf("\\")!==-1)){var jt=this.strict?this.reservedWordsStrict:this.reservedWords;jt.test(wt)&&(!this.inAsync&&wt==="await"&&this.raiseRecoverable($e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable($e,"The keyword '"+wt+"' is reserved"))}},tr.parseIdent=function(Pe){var $e=this.parseIdentNode();return this.next(!!Pe),this.finishNode($e,"Identifier"),Pe||(this.checkUnreserved($e),$e.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=$e.start)),$e},tr.parseIdentNode=function(){var Pe=this.startNode();return this.type===Ne.name?Pe.name=this.value:this.type.keyword?(Pe.name=this.type.keyword,(Pe.name==="class"||Pe.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=Ne.name):this.unexpected(),Pe},tr.parsePrivateIdent=function(){var Pe=this.startNode();return this.type===Ne.privateId?Pe.name=this.value:this.unexpected(),this.next(),this.finishNode(Pe,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(Pe.start,"Private field '#"+Pe.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(Pe)),Pe},tr.parseYield=function(Pe){this.yieldPos||(this.yieldPos=this.start);var $e=this.startNode();return this.next(),this.type===Ne.semi||this.canInsertSemicolon()||this.type!==Ne.star&&!this.type.startsExpr?($e.delegate=!1,$e.argument=null):($e.delegate=this.eat(Ne.star),$e.argument=this.parseMaybeAssign(Pe)),this.finishNode($e,"YieldExpression")},tr.parseAwait=function(Pe){this.awaitPos||(this.awaitPos=this.start);var $e=this.startNode();return this.next(),$e.argument=this.parseMaybeUnary(null,!0,!1,Pe),this.finishNode($e,"AwaitExpression")};var di=on.prototype;di.raise=function(Pe,$e){var Ze=Yt(this.input,Pe);$e+=" ("+Ze.line+":"+Ze.column+")",this.sourceFile&&($e+=" in "+this.sourceFile);var wt=new SyntaxError($e);throw wt.pos=Pe,wt.loc=Ze,wt.raisedAt=this.pos,wt},di.raiseRecoverable=di.raise,di.curPosition=function(){if(this.options.locations)return new Kt(this.curLine,this.pos-this.lineStart)};var ci=on.prototype,hs=function($e){this.flags=$e,this.var=[],this.lexical=[],this.functions=[]};ci.enterScope=function(Pe){this.scopeStack.push(new hs(Pe))},ci.exitScope=function(){this.scopeStack.pop()},ci.treatFunctionsAsVarInScope=function(Pe){return Pe.flags&Un||!this.inModule&&Pe.flags&$n},ci.declareName=function(Pe,$e,Ze){var wt=!1;if($e===ln){var jt=this.currentScope();wt=jt.lexical.indexOf(Pe)>-1||jt.functions.indexOf(Pe)>-1||jt.var.indexOf(Pe)>-1,jt.lexical.push(Pe),this.inModule&&jt.flags&$n&&delete this.undefinedExports[Pe]}else if($e===gn){var yn=this.currentScope();yn.lexical.push(Pe)}else if($e===nn){var Tn=this.currentScope();this.treatFunctionsAsVar?wt=Tn.lexical.indexOf(Pe)>-1:wt=Tn.lexical.indexOf(Pe)>-1||Tn.var.indexOf(Pe)>-1,Tn.functions.push(Pe)}else for(var rr=this.scopeStack.length-1;rr>=0;--rr){var ur=this.scopeStack[rr];if(ur.lexical.indexOf(Pe)>-1&&!(ur.flags&zt&&ur.lexical[0]===Pe)||!this.treatFunctionsAsVarInScope(ur)&&ur.functions.indexOf(Pe)>-1){wt=!0;break}if(ur.var.push(Pe),this.inModule&&ur.flags&$n&&delete this.undefinedExports[Pe],ur.flags&Hn)break}wt&&this.raiseRecoverable(Ze,"Identifier '"+Pe+"' has already been declared")},ci.checkLocalExport=function(Pe){this.scopeStack[0].lexical.indexOf(Pe.name)===-1&&this.scopeStack[0].var.indexOf(Pe.name)===-1&&(this.undefinedExports[Pe.name]=Pe)},ci.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},ci.currentVarScope=function(){for(var Pe=this.scopeStack.length-1;;Pe--){var $e=this.scopeStack[Pe];if($e.flags&(Hn|dn|mn))return $e}},ci.currentThisScope=function(){for(var Pe=this.scopeStack.length-1;;Pe--){var $e=this.scopeStack[Pe];if($e.flags&(Hn|dn|mn)&&!($e.flags&Mn))return $e}};var Ei=function($e,Ze,wt){this.type="",this.start=Ze,this.end=0,$e.options.locations&&(this.loc=new Pt($e,wt)),$e.options.directSourceFile&&(this.sourceFile=$e.options.directSourceFile),$e.options.ranges&&(this.range=[Ze,0])},ai=on.prototype;ai.startNode=function(){return new Ei(this,this.start,this.startLoc)},ai.startNodeAt=function(Pe,$e){return new Ei(this,Pe,$e)};function hi(Pe,$e,Ze,wt){return Pe.type=$e,Pe.end=Ze,this.options.locations&&(Pe.loc.end=wt),this.options.ranges&&(Pe.range[1]=Ze),Pe}ai.finishNode=function(Pe,$e){return hi.call(this,Pe,$e,this.lastTokEnd,this.lastTokEndLoc)},ai.finishNodeAt=function(Pe,$e,Ze,wt){return hi.call(this,Pe,$e,Ze,wt)},ai.copyNode=function(Pe){var $e=new Ei(this,Pe.start,this.startLoc);for(var Ze in Pe)$e[Ze]=Pe[Ze];return $e};var Fi="Gara Garay Gukh Gurung_Khema Hrkt Katakana_Or_Hiragana Kawi Kirat_Rai Krai Nag_Mundari Nagm Ol_Onal Onao Sunu Sunuwar Todhri Todr Tulu_Tigalari Tutg Unknown Zzzz",mi="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Ar=mi+" Extended_Pictographic",ki=Ar,qr=ki+" EBase EComp EMod EPres ExtPict",Et=qr,Vt=Et,sn={9:mi,10:Ar,11:ki,12:qr,13:Et,14:Vt},Cn="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Nn={9:"",10:"",11:"",12:"",13:"",14:Cn},Pn="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Qn="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Jn=Qn+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",pt=Jn+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",$t=pt+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",en=$t+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",tn=en+" "+Fi,cn={9:Qn,10:Jn,11:pt,12:$t,13:en,14:tn},_n={};function Fn(Pe){var $e=_n[Pe]={binary:Ft(sn[Pe]+" "+Pn),binaryOfStrings:Ft(Nn[Pe]),nonBinary:{General_Category:Ft(Pn),Script:Ft(cn[Pe])}};$e.nonBinary.Script_Extensions=$e.nonBinary.Script,$e.nonBinary.gc=$e.nonBinary.General_Category,$e.nonBinary.sc=$e.nonBinary.Script,$e.nonBinary.scx=$e.nonBinary.Script_Extensions}for(var Wn=0,qn=[9,10,11,12,13,14];Wn<qn.length;Wn+=1){var dr=qn[Wn];Fn(dr)}var Ln=on.prototype,fr=function($e,Ze){this.parent=$e,this.base=Ze||this};fr.prototype.separatedFrom=function($e){for(var Ze=this;Ze;Ze=Ze.parent)for(var wt=$e;wt;wt=wt.parent)if(Ze.base===wt.base&&Ze!==wt)return!0;return!1},fr.prototype.sibling=function(){return new fr(this.parent,this.base)};var _r=function($e){this.parser=$e,this.validFlags="gim"+($e.options.ecmaVersion>=6?"uy":"")+($e.options.ecmaVersion>=9?"s":"")+($e.options.ecmaVersion>=13?"d":"")+($e.options.ecmaVersion>=15?"v":""),this.unicodeProperties=_n[$e.options.ecmaVersion>=14?14:$e.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=Object.create(null),this.backReferenceNames=[],this.branchID=null};_r.prototype.reset=function($e,Ze,wt){var jt=wt.indexOf("v")!==-1,yn=wt.indexOf("u")!==-1;this.start=$e|0,this.source=Ze+"",this.flags=wt,jt&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=yn&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=yn&&this.parser.options.ecmaVersion>=9)},_r.prototype.raise=function($e){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+$e)},_r.prototype.at=function($e,Ze){Ze===void 0&&(Ze=!1);var wt=this.source,jt=wt.length;if($e>=jt)return-1;var yn=wt.charCodeAt($e);if(!(Ze||this.switchU)||yn<=55295||yn>=57344||$e+1>=jt)return yn;var Tn=wt.charCodeAt($e+1);return Tn>=56320&&Tn<=57343?(yn<<10)+Tn-56613888:yn},_r.prototype.nextIndex=function($e,Ze){Ze===void 0&&(Ze=!1);var wt=this.source,jt=wt.length;if($e>=jt)return jt;var yn=wt.charCodeAt($e),Tn;return!(Ze||this.switchU)||yn<=55295||yn>=57344||$e+1>=jt||(Tn=wt.charCodeAt($e+1))<56320||Tn>57343?$e+1:$e+2},_r.prototype.current=function($e){return $e===void 0&&($e=!1),this.at(this.pos,$e)},_r.prototype.lookahead=function($e){return $e===void 0&&($e=!1),this.at(this.nextIndex(this.pos,$e),$e)},_r.prototype.advance=function($e){$e===void 0&&($e=!1),this.pos=this.nextIndex(this.pos,$e)},_r.prototype.eat=function($e,Ze){return Ze===void 0&&(Ze=!1),this.current(Ze)===$e?(this.advance(Ze),!0):!1},_r.prototype.eatChars=function($e,Ze){Ze===void 0&&(Ze=!1);for(var wt=this.pos,jt=0,yn=$e;jt<yn.length;jt+=1){var Tn=yn[jt],rr=this.at(wt,Ze);if(rr===-1||rr!==Tn)return!1;wt=this.nextIndex(wt,Ze)}return this.pos=wt,!0},Ln.validateRegExpFlags=function(Pe){for(var $e=Pe.validFlags,Ze=Pe.flags,wt=!1,jt=!1,yn=0;yn<Ze.length;yn++){var Tn=Ze.charAt(yn);$e.indexOf(Tn)===-1&&this.raise(Pe.start,"Invalid regular expression flag"),Ze.indexOf(Tn,yn+1)>-1&&this.raise(Pe.start,"Duplicate regular expression flag"),Tn==="u"&&(wt=!0),Tn==="v"&&(jt=!0)}this.options.ecmaVersion>=15&&wt&&jt&&this.raise(Pe.start,"Invalid regular expression flag")};function yr(Pe){for(var $e in Pe)return!0;return!1}Ln.validateRegExpPattern=function(Pe){this.regexp_pattern(Pe),!Pe.switchN&&this.options.ecmaVersion>=9&&yr(Pe.groupNames)&&(Pe.switchN=!0,this.regexp_pattern(Pe))},Ln.regexp_pattern=function(Pe){Pe.pos=0,Pe.lastIntValue=0,Pe.lastStringValue="",Pe.lastAssertionIsQuantifiable=!1,Pe.numCapturingParens=0,Pe.maxBackReference=0,Pe.groupNames=Object.create(null),Pe.backReferenceNames.length=0,Pe.branchID=null,this.regexp_disjunction(Pe),Pe.pos!==Pe.source.length&&(Pe.eat(41)&&Pe.raise("Unmatched ')'"),(Pe.eat(93)||Pe.eat(125))&&Pe.raise("Lone quantifier brackets")),Pe.maxBackReference>Pe.numCapturingParens&&Pe.raise("Invalid escape");for(var $e=0,Ze=Pe.backReferenceNames;$e<Ze.length;$e+=1){var wt=Ze[$e];Pe.groupNames[wt]||Pe.raise("Invalid named capture referenced")}},Ln.regexp_disjunction=function(Pe){var $e=this.options.ecmaVersion>=16;for($e&&(Pe.branchID=new fr(Pe.branchID,null)),this.regexp_alternative(Pe);Pe.eat(124);)$e&&(Pe.branchID=Pe.branchID.sibling()),this.regexp_alternative(Pe);$e&&(Pe.branchID=Pe.branchID.parent),this.regexp_eatQuantifier(Pe,!0)&&Pe.raise("Nothing to repeat"),Pe.eat(123)&&Pe.raise("Lone quantifier brackets")},Ln.regexp_alternative=function(Pe){for(;Pe.pos<Pe.source.length&&this.regexp_eatTerm(Pe););},Ln.regexp_eatTerm=function(Pe){return this.regexp_eatAssertion(Pe)?(Pe.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(Pe)&&Pe.switchU&&Pe.raise("Invalid quantifier"),!0):(Pe.switchU?this.regexp_eatAtom(Pe):this.regexp_eatExtendedAtom(Pe))?(this.regexp_eatQuantifier(Pe),!0):!1},Ln.regexp_eatAssertion=function(Pe){var $e=Pe.pos;if(Pe.lastAssertionIsQuantifiable=!1,Pe.eat(94)||Pe.eat(36))return!0;if(Pe.eat(92)){if(Pe.eat(66)||Pe.eat(98))return!0;Pe.pos=$e}if(Pe.eat(40)&&Pe.eat(63)){var Ze=!1;if(this.options.ecmaVersion>=9&&(Ze=Pe.eat(60)),Pe.eat(61)||Pe.eat(33))return this.regexp_disjunction(Pe),Pe.eat(41)||Pe.raise("Unterminated group"),Pe.lastAssertionIsQuantifiable=!Ze,!0}return Pe.pos=$e,!1},Ln.regexp_eatQuantifier=function(Pe,$e){return $e===void 0&&($e=!1),this.regexp_eatQuantifierPrefix(Pe,$e)?(Pe.eat(63),!0):!1},Ln.regexp_eatQuantifierPrefix=function(Pe,$e){return Pe.eat(42)||Pe.eat(43)||Pe.eat(63)||this.regexp_eatBracedQuantifier(Pe,$e)},Ln.regexp_eatBracedQuantifier=function(Pe,$e){var Ze=Pe.pos;if(Pe.eat(123)){var wt=0,jt=-1;if(this.regexp_eatDecimalDigits(Pe)&&(wt=Pe.lastIntValue,Pe.eat(44)&&this.regexp_eatDecimalDigits(Pe)&&(jt=Pe.lastIntValue),Pe.eat(125)))return jt!==-1&&jt<wt&&!$e&&Pe.raise("numbers out of order in {} quantifier"),!0;Pe.switchU&&!$e&&Pe.raise("Incomplete quantifier"),Pe.pos=Ze}return!1},Ln.regexp_eatAtom=function(Pe){return this.regexp_eatPatternCharacters(Pe)||Pe.eat(46)||this.regexp_eatReverseSolidusAtomEscape(Pe)||this.regexp_eatCharacterClass(Pe)||this.regexp_eatUncapturingGroup(Pe)||this.regexp_eatCapturingGroup(Pe)},Ln.regexp_eatReverseSolidusAtomEscape=function(Pe){var $e=Pe.pos;if(Pe.eat(92)){if(this.regexp_eatAtomEscape(Pe))return!0;Pe.pos=$e}return!1},Ln.regexp_eatUncapturingGroup=function(Pe){var $e=Pe.pos;if(Pe.eat(40)){if(Pe.eat(63)){if(this.options.ecmaVersion>=16){var Ze=this.regexp_eatModifiers(Pe),wt=Pe.eat(45);if(Ze||wt){for(var jt=0;jt<Ze.length;jt++){var yn=Ze.charAt(jt);Ze.indexOf(yn,jt+1)>-1&&Pe.raise("Duplicate regular expression modifiers")}if(wt){var Tn=this.regexp_eatModifiers(Pe);!Ze&&!Tn&&Pe.current()===58&&Pe.raise("Invalid regular expression modifiers");for(var rr=0;rr<Tn.length;rr++){var ur=Tn.charAt(rr);(Tn.indexOf(ur,rr+1)>-1||Ze.indexOf(ur)>-1)&&Pe.raise("Duplicate regular expression modifiers")}}}}if(Pe.eat(58)){if(this.regexp_disjunction(Pe),Pe.eat(41))return!0;Pe.raise("Unterminated group")}}Pe.pos=$e}return!1},Ln.regexp_eatCapturingGroup=function(Pe){if(Pe.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(Pe):Pe.current()===63&&Pe.raise("Invalid group"),this.regexp_disjunction(Pe),Pe.eat(41))return Pe.numCapturingParens+=1,!0;Pe.raise("Unterminated group")}return!1},Ln.regexp_eatModifiers=function(Pe){for(var $e="",Ze=0;(Ze=Pe.current())!==-1&&Hr(Ze);)$e+=Je(Ze),Pe.advance();return $e};function Hr(Pe){return Pe===105||Pe===109||Pe===115}Ln.regexp_eatExtendedAtom=function(Pe){return Pe.eat(46)||this.regexp_eatReverseSolidusAtomEscape(Pe)||this.regexp_eatCharacterClass(Pe)||this.regexp_eatUncapturingGroup(Pe)||this.regexp_eatCapturingGroup(Pe)||this.regexp_eatInvalidBracedQuantifier(Pe)||this.regexp_eatExtendedPatternCharacter(Pe)},Ln.regexp_eatInvalidBracedQuantifier=function(Pe){return this.regexp_eatBracedQuantifier(Pe,!0)&&Pe.raise("Nothing to repeat"),!1},Ln.regexp_eatSyntaxCharacter=function(Pe){var $e=Pe.current();return Sr($e)?(Pe.lastIntValue=$e,Pe.advance(),!0):!1};function Sr(Pe){return Pe===36||Pe>=40&&Pe<=43||Pe===46||Pe===63||Pe>=91&&Pe<=94||Pe>=123&&Pe<=125}Ln.regexp_eatPatternCharacters=function(Pe){for(var $e=Pe.pos,Ze=0;(Ze=Pe.current())!==-1&&!Sr(Ze);)Pe.advance();return Pe.pos!==$e},Ln.regexp_eatExtendedPatternCharacter=function(Pe){var $e=Pe.current();return $e!==-1&&$e!==36&&!($e>=40&&$e<=43)&&$e!==46&&$e!==63&&$e!==91&&$e!==94&&$e!==124?(Pe.advance(),!0):!1},Ln.regexp_groupSpecifier=function(Pe){if(Pe.eat(63)){this.regexp_eatGroupName(Pe)||Pe.raise("Invalid group");var $e=this.options.ecmaVersion>=16,Ze=Pe.groupNames[Pe.lastStringValue];if(Ze)if($e)for(var wt=0,jt=Ze;wt<jt.length;wt+=1){var yn=jt[wt];yn.separatedFrom(Pe.branchID)||Pe.raise("Duplicate capture group name")}else Pe.raise("Duplicate capture group name");$e?(Ze||(Pe.groupNames[Pe.lastStringValue]=[])).push(Pe.branchID):Pe.groupNames[Pe.lastStringValue]=!0}},Ln.regexp_eatGroupName=function(Pe){if(Pe.lastStringValue="",Pe.eat(60)){if(this.regexp_eatRegExpIdentifierName(Pe)&&Pe.eat(62))return!0;Pe.raise("Invalid capture group name")}return!1},Ln.regexp_eatRegExpIdentifierName=function(Pe){if(Pe.lastStringValue="",this.regexp_eatRegExpIdentifierStart(Pe)){for(Pe.lastStringValue+=Je(Pe.lastIntValue);this.regexp_eatRegExpIdentifierPart(Pe);)Pe.lastStringValue+=Je(Pe.lastIntValue);return!0}return!1},Ln.regexp_eatRegExpIdentifierStart=function(Pe){var $e=Pe.pos,Ze=this.options.ecmaVersion>=11,wt=Pe.current(Ze);return Pe.advance(Ze),wt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(Pe,Ze)&&(wt=Pe.lastIntValue),Cr(wt)?(Pe.lastIntValue=wt,!0):(Pe.pos=$e,!1)};function Cr(Pe){return Re(Pe,!0)||Pe===36||Pe===95}Ln.regexp_eatRegExpIdentifierPart=function(Pe){var $e=Pe.pos,Ze=this.options.ecmaVersion>=11,wt=Pe.current(Ze);return Pe.advance(Ze),wt===92&&this.regexp_eatRegExpUnicodeEscapeSequence(Pe,Ze)&&(wt=Pe.lastIntValue),vr(wt)?(Pe.lastIntValue=wt,!0):(Pe.pos=$e,!1)};function vr(Pe){return De(Pe,!0)||Pe===36||Pe===95||Pe===8204||Pe===8205}Ln.regexp_eatAtomEscape=function(Pe){return this.regexp_eatBackReference(Pe)||this.regexp_eatCharacterClassEscape(Pe)||this.regexp_eatCharacterEscape(Pe)||Pe.switchN&&this.regexp_eatKGroupName(Pe)?!0:(Pe.switchU&&(Pe.current()===99&&Pe.raise("Invalid unicode escape"),Pe.raise("Invalid escape")),!1)},Ln.regexp_eatBackReference=function(Pe){var $e=Pe.pos;if(this.regexp_eatDecimalEscape(Pe)){var Ze=Pe.lastIntValue;if(Pe.switchU)return Ze>Pe.maxBackReference&&(Pe.maxBackReference=Ze),!0;if(Ze<=Pe.numCapturingParens)return!0;Pe.pos=$e}return!1},Ln.regexp_eatKGroupName=function(Pe){if(Pe.eat(107)){if(this.regexp_eatGroupName(Pe))return Pe.backReferenceNames.push(Pe.lastStringValue),!0;Pe.raise("Invalid named reference")}return!1},Ln.regexp_eatCharacterEscape=function(Pe){return this.regexp_eatControlEscape(Pe)||this.regexp_eatCControlLetter(Pe)||this.regexp_eatZero(Pe)||this.regexp_eatHexEscapeSequence(Pe)||this.regexp_eatRegExpUnicodeEscapeSequence(Pe,!1)||!Pe.switchU&&this.regexp_eatLegacyOctalEscapeSequence(Pe)||this.regexp_eatIdentityEscape(Pe)},Ln.regexp_eatCControlLetter=function(Pe){var $e=Pe.pos;if(Pe.eat(99)){if(this.regexp_eatControlLetter(Pe))return!0;Pe.pos=$e}return!1},Ln.regexp_eatZero=function(Pe){return Pe.current()===48&&!wi(Pe.lookahead())?(Pe.lastIntValue=0,Pe.advance(),!0):!1},Ln.regexp_eatControlEscape=function(Pe){var $e=Pe.current();return $e===116?(Pe.lastIntValue=9,Pe.advance(),!0):$e===110?(Pe.lastIntValue=10,Pe.advance(),!0):$e===118?(Pe.lastIntValue=11,Pe.advance(),!0):$e===102?(Pe.lastIntValue=12,Pe.advance(),!0):$e===114?(Pe.lastIntValue=13,Pe.advance(),!0):!1},Ln.regexp_eatControlLetter=function(Pe){var $e=Pe.current();return jr($e)?(Pe.lastIntValue=$e%32,Pe.advance(),!0):!1};function jr(Pe){return Pe>=65&&Pe<=90||Pe>=97&&Pe<=122}Ln.regexp_eatRegExpUnicodeEscapeSequence=function(Pe,$e){$e===void 0&&($e=!1);var Ze=Pe.pos,wt=$e||Pe.switchU;if(Pe.eat(117)){if(this.regexp_eatFixedHexDigits(Pe,4)){var jt=Pe.lastIntValue;if(wt&&jt>=55296&&jt<=56319){var yn=Pe.pos;if(Pe.eat(92)&&Pe.eat(117)&&this.regexp_eatFixedHexDigits(Pe,4)){var Tn=Pe.lastIntValue;if(Tn>=56320&&Tn<=57343)return Pe.lastIntValue=(jt-55296)*1024+(Tn-56320)+65536,!0}Pe.pos=yn,Pe.lastIntValue=jt}return!0}if(wt&&Pe.eat(123)&&this.regexp_eatHexDigits(Pe)&&Pe.eat(125)&&Rr(Pe.lastIntValue))return!0;wt&&Pe.raise("Invalid unicode escape"),Pe.pos=Ze}return!1};function Rr(Pe){return Pe>=0&&Pe<=1114111}Ln.regexp_eatIdentityEscape=function(Pe){if(Pe.switchU)return this.regexp_eatSyntaxCharacter(Pe)?!0:Pe.eat(47)?(Pe.lastIntValue=47,!0):!1;var $e=Pe.current();return $e!==99&&(!Pe.switchN||$e!==107)?(Pe.lastIntValue=$e,Pe.advance(),!0):!1},Ln.regexp_eatDecimalEscape=function(Pe){Pe.lastIntValue=0;var $e=Pe.current();if($e>=49&&$e<=57){do Pe.lastIntValue=10*Pe.lastIntValue+($e-48),Pe.advance();while(($e=Pe.current())>=48&&$e<=57);return!0}return!1};var Dr=0,Ur=1,Tr=2;Ln.regexp_eatCharacterClassEscape=function(Pe){var $e=Pe.current();if(Nr($e))return Pe.lastIntValue=-1,Pe.advance(),Ur;var Ze=!1;if(Pe.switchU&&this.options.ecmaVersion>=9&&((Ze=$e===80)||$e===112)){Pe.lastIntValue=-1,Pe.advance();var wt;if(Pe.eat(123)&&(wt=this.regexp_eatUnicodePropertyValueExpression(Pe))&&Pe.eat(125))return Ze&&wt===Tr&&Pe.raise("Invalid property name"),wt;Pe.raise("Invalid property name")}return Dr};function Nr(Pe){return Pe===100||Pe===68||Pe===115||Pe===83||Pe===119||Pe===87}Ln.regexp_eatUnicodePropertyValueExpression=function(Pe){var $e=Pe.pos;if(this.regexp_eatUnicodePropertyName(Pe)&&Pe.eat(61)){var Ze=Pe.lastStringValue;if(this.regexp_eatUnicodePropertyValue(Pe)){var wt=Pe.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(Pe,Ze,wt),Ur}}if(Pe.pos=$e,this.regexp_eatLoneUnicodePropertyNameOrValue(Pe)){var jt=Pe.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(Pe,jt)}return Dr},Ln.regexp_validateUnicodePropertyNameAndValue=function(Pe,$e,Ze){Ye(Pe.unicodeProperties.nonBinary,$e)||Pe.raise("Invalid property name"),Pe.unicodeProperties.nonBinary[$e].test(Ze)||Pe.raise("Invalid property value")},Ln.regexp_validateUnicodePropertyNameOrValue=function(Pe,$e){if(Pe.unicodeProperties.binary.test($e))return Ur;if(Pe.switchV&&Pe.unicodeProperties.binaryOfStrings.test($e))return Tr;Pe.raise("Invalid property name")},Ln.regexp_eatUnicodePropertyName=function(Pe){var $e=0;for(Pe.lastStringValue="";Lr($e=Pe.current());)Pe.lastStringValue+=Je($e),Pe.advance();return Pe.lastStringValue!==""};function Lr(Pe){return jr(Pe)||Pe===95}Ln.regexp_eatUnicodePropertyValue=function(Pe){var $e=0;for(Pe.lastStringValue="";ri($e=Pe.current());)Pe.lastStringValue+=Je($e),Pe.advance();return Pe.lastStringValue!==""};function ri(Pe){return Lr(Pe)||wi(Pe)}Ln.regexp_eatLoneUnicodePropertyNameOrValue=function(Pe){return this.regexp_eatUnicodePropertyValue(Pe)},Ln.regexp_eatCharacterClass=function(Pe){if(Pe.eat(91)){var $e=Pe.eat(94),Ze=this.regexp_classContents(Pe);return Pe.eat(93)||Pe.raise("Unterminated character class"),$e&&Ze===Tr&&Pe.raise("Negated character class may contain strings"),!0}return!1},Ln.regexp_classContents=function(Pe){return Pe.current()===93?Ur:Pe.switchV?this.regexp_classSetExpression(Pe):(this.regexp_nonEmptyClassRanges(Pe),Ur)},Ln.regexp_nonEmptyClassRanges=function(Pe){for(;this.regexp_eatClassAtom(Pe);){var $e=Pe.lastIntValue;if(Pe.eat(45)&&this.regexp_eatClassAtom(Pe)){var Ze=Pe.lastIntValue;Pe.switchU&&($e===-1||Ze===-1)&&Pe.raise("Invalid character class"),$e!==-1&&Ze!==-1&&$e>Ze&&Pe.raise("Range out of order in character class")}}},Ln.regexp_eatClassAtom=function(Pe){var $e=Pe.pos;if(Pe.eat(92)){if(this.regexp_eatClassEscape(Pe))return!0;if(Pe.switchU){var Ze=Pe.current();(Ze===99||Rs(Ze))&&Pe.raise("Invalid class escape"),Pe.raise("Invalid escape")}Pe.pos=$e}var wt=Pe.current();return wt!==93?(Pe.lastIntValue=wt,Pe.advance(),!0):!1},Ln.regexp_eatClassEscape=function(Pe){var $e=Pe.pos;if(Pe.eat(98))return Pe.lastIntValue=8,!0;if(Pe.switchU&&Pe.eat(45))return Pe.lastIntValue=45,!0;if(!Pe.switchU&&Pe.eat(99)){if(this.regexp_eatClassControlLetter(Pe))return!0;Pe.pos=$e}return this.regexp_eatCharacterClassEscape(Pe)||this.regexp_eatCharacterEscape(Pe)},Ln.regexp_classSetExpression=function(Pe){var $e=Ur,Ze;if(!this.regexp_eatClassSetRange(Pe))if(Ze=this.regexp_eatClassSetOperand(Pe)){Ze===Tr&&($e=Tr);for(var wt=Pe.pos;Pe.eatChars([38,38]);){if(Pe.current()!==38&&(Ze=this.regexp_eatClassSetOperand(Pe))){Ze!==Tr&&($e=Ur);continue}Pe.raise("Invalid character in character class")}if(wt!==Pe.pos)return $e;for(;Pe.eatChars([45,45]);)this.regexp_eatClassSetOperand(Pe)||Pe.raise("Invalid character in character class");if(wt!==Pe.pos)return $e}else Pe.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(Pe)){if(Ze=this.regexp_eatClassSetOperand(Pe),!Ze)return $e;Ze===Tr&&($e=Tr)}},Ln.regexp_eatClassSetRange=function(Pe){var $e=Pe.pos;if(this.regexp_eatClassSetCharacter(Pe)){var Ze=Pe.lastIntValue;if(Pe.eat(45)&&this.regexp_eatClassSetCharacter(Pe)){var wt=Pe.lastIntValue;return Ze!==-1&&wt!==-1&&Ze>wt&&Pe.raise("Range out of order in character class"),!0}Pe.pos=$e}return!1},Ln.regexp_eatClassSetOperand=function(Pe){return this.regexp_eatClassSetCharacter(Pe)?Ur:this.regexp_eatClassStringDisjunction(Pe)||this.regexp_eatNestedClass(Pe)},Ln.regexp_eatNestedClass=function(Pe){var $e=Pe.pos;if(Pe.eat(91)){var Ze=Pe.eat(94),wt=this.regexp_classContents(Pe);if(Pe.eat(93))return Ze&&wt===Tr&&Pe.raise("Negated character class may contain strings"),wt;Pe.pos=$e}if(Pe.eat(92)){var jt=this.regexp_eatCharacterClassEscape(Pe);if(jt)return jt;Pe.pos=$e}return null},Ln.regexp_eatClassStringDisjunction=function(Pe){var $e=Pe.pos;if(Pe.eatChars([92,113])){if(Pe.eat(123)){var Ze=this.regexp_classStringDisjunctionContents(Pe);if(Pe.eat(125))return Ze}else Pe.raise("Invalid escape");Pe.pos=$e}return null},Ln.regexp_classStringDisjunctionContents=function(Pe){for(var $e=this.regexp_classString(Pe);Pe.eat(124);)this.regexp_classString(Pe)===Tr&&($e=Tr);return $e},Ln.regexp_classString=function(Pe){for(var $e=0;this.regexp_eatClassSetCharacter(Pe);)$e++;return $e===1?Ur:Tr},Ln.regexp_eatClassSetCharacter=function(Pe){var $e=Pe.pos;if(Pe.eat(92))return this.regexp_eatCharacterEscape(Pe)||this.regexp_eatClassSetReservedPunctuator(Pe)?!0:Pe.eat(98)?(Pe.lastIntValue=8,!0):(Pe.pos=$e,!1);var Ze=Pe.current();return Ze<0||Ze===Pe.lookahead()&&Xr(Ze)||ei(Ze)?!1:(Pe.advance(),Pe.lastIntValue=Ze,!0)};function Xr(Pe){return Pe===33||Pe>=35&&Pe<=38||Pe>=42&&Pe<=44||Pe===46||Pe>=58&&Pe<=64||Pe===94||Pe===96||Pe===126}function ei(Pe){return Pe===40||Pe===41||Pe===45||Pe===47||Pe>=91&&Pe<=93||Pe>=123&&Pe<=125}Ln.regexp_eatClassSetReservedPunctuator=function(Pe){var $e=Pe.current();return vi($e)?(Pe.lastIntValue=$e,Pe.advance(),!0):!1};function vi(Pe){return Pe===33||Pe===35||Pe===37||Pe===38||Pe===44||Pe===45||Pe>=58&&Pe<=62||Pe===64||Pe===96||Pe===126}Ln.regexp_eatClassControlLetter=function(Pe){var $e=Pe.current();return wi($e)||$e===95?(Pe.lastIntValue=$e%32,Pe.advance(),!0):!1},Ln.regexp_eatHexEscapeSequence=function(Pe){var $e=Pe.pos;if(Pe.eat(120)){if(this.regexp_eatFixedHexDigits(Pe,2))return!0;Pe.switchU&&Pe.raise("Invalid escape"),Pe.pos=$e}return!1},Ln.regexp_eatDecimalDigits=function(Pe){var $e=Pe.pos,Ze=0;for(Pe.lastIntValue=0;wi(Ze=Pe.current());)Pe.lastIntValue=10*Pe.lastIntValue+(Ze-48),Pe.advance();return Pe.pos!==$e};function wi(Pe){return Pe>=48&&Pe<=57}Ln.regexp_eatHexDigits=function(Pe){var $e=Pe.pos,Ze=0;for(Pe.lastIntValue=0;Ui(Ze=Pe.current());)Pe.lastIntValue=16*Pe.lastIntValue+ws(Ze),Pe.advance();return Pe.pos!==$e};function Ui(Pe){return Pe>=48&&Pe<=57||Pe>=65&&Pe<=70||Pe>=97&&Pe<=102}function ws(Pe){return Pe>=65&&Pe<=70?10+(Pe-65):Pe>=97&&Pe<=102?10+(Pe-97):Pe-48}Ln.regexp_eatLegacyOctalEscapeSequence=function(Pe){if(this.regexp_eatOctalDigit(Pe)){var $e=Pe.lastIntValue;if(this.regexp_eatOctalDigit(Pe)){var Ze=Pe.lastIntValue;$e<=3&&this.regexp_eatOctalDigit(Pe)?Pe.lastIntValue=$e*64+Ze*8+Pe.lastIntValue:Pe.lastIntValue=$e*8+Ze}else Pe.lastIntValue=$e;return!0}return!1},Ln.regexp_eatOctalDigit=function(Pe){var $e=Pe.current();return Rs($e)?(Pe.lastIntValue=$e-48,Pe.advance(),!0):(Pe.lastIntValue=0,!1)};function Rs(Pe){return Pe>=48&&Pe<=55}Ln.regexp_eatFixedHexDigits=function(Pe,$e){var Ze=Pe.pos;Pe.lastIntValue=0;for(var wt=0;wt<$e;++wt){var jt=Pe.current();if(!Ui(jt))return Pe.pos=Ze,!1;Pe.lastIntValue=16*Pe.lastIntValue+ws(jt),Pe.advance()}return!0};var ps=function($e){this.type=$e.type,this.value=$e.value,this.start=$e.start,this.end=$e.end,$e.options.locations&&(this.loc=new Pt($e,$e.startLoc,$e.endLoc)),$e.options.ranges&&(this.range=[$e.start,$e.end])},Br=on.prototype;Br.next=function(Pe){!Pe&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new ps(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Br.getToken=function(){return this.next(),new ps(this)},typeof Symbol<"u"&&(Br[Symbol.iterator]=function(){var Pe=this;return{next:function(){var $e=Pe.getToken();return{done:$e.type===Ne.eof,value:$e}}}}),Br.nextToken=function(){var Pe=this.curContext();if((!Pe||!Pe.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(Ne.eof);if(Pe.override)return Pe.override(this);this.readToken(this.fullCharCodeAtPos())},Br.readToken=function(Pe){return Re(Pe,this.options.ecmaVersion>=6)||Pe===92?this.readWord():this.getTokenFromCode(Pe)},Br.fullCharCodeAtPos=function(){var Pe=this.input.charCodeAt(this.pos);if(Pe<=55295||Pe>=56320)return Pe;var $e=this.input.charCodeAt(this.pos+1);return $e<=56319||$e>=57344?Pe:(Pe<<10)+$e-56613888},Br.skipBlockComment=function(){var Pe=this.options.onComment&&this.curPosition(),$e=this.pos,Ze=this.input.indexOf("*/",this.pos+=2);if(Ze===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=Ze+2,this.options.locations)for(var wt=void 0,jt=$e;(wt=Ge(this.input,jt,this.pos))>-1;)++this.curLine,jt=this.lineStart=wt;this.options.onComment&&this.options.onComment(!0,this.input.slice($e+2,Ze),$e,this.pos,Pe,this.curPosition())},Br.skipLineComment=function(Pe){for(var $e=this.pos,Ze=this.options.onComment&&this.curPosition(),wt=this.input.charCodeAt(this.pos+=Pe);this.pos<this.input.length&&!je(wt);)wt=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice($e+Pe,this.pos),$e,this.pos,Ze,this.curPosition())},Br.skipSpace=function(){e:for(;this.pos<this.input.length;){var Pe=this.input.charCodeAt(this.pos);switch(Pe){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(Pe>8&&Pe<14||Pe>=5760&&Xe.test(String.fromCharCode(Pe)))++this.pos;else break e}}},Br.finishToken=function(Pe,$e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var Ze=this.type;this.type=Pe,this.value=$e,this.updateContext(Ze)},Br.readToken_dot=function(){var Pe=this.input.charCodeAt(this.pos+1);if(Pe>=48&&Pe<=57)return this.readNumber(!0);var $e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&Pe===46&&$e===46?(this.pos+=3,this.finishToken(Ne.ellipsis)):(++this.pos,this.finishToken(Ne.dot))},Br.readToken_slash=function(){var Pe=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):Pe===61?this.finishOp(Ne.assign,2):this.finishOp(Ne.slash,1)},Br.readToken_mult_modulo_exp=function(Pe){var $e=this.input.charCodeAt(this.pos+1),Ze=1,wt=Pe===42?Ne.star:Ne.modulo;return this.options.ecmaVersion>=7&&Pe===42&&$e===42&&(++Ze,wt=Ne.starstar,$e=this.input.charCodeAt(this.pos+2)),$e===61?this.finishOp(Ne.assign,Ze+1):this.finishOp(wt,Ze)},Br.readToken_pipe_amp=function(Pe){var $e=this.input.charCodeAt(this.pos+1);if($e===Pe){if(this.options.ecmaVersion>=12){var Ze=this.input.charCodeAt(this.pos+2);if(Ze===61)return this.finishOp(Ne.assign,3)}return this.finishOp(Pe===124?Ne.logicalOR:Ne.logicalAND,2)}return $e===61?this.finishOp(Ne.assign,2):this.finishOp(Pe===124?Ne.bitwiseOR:Ne.bitwiseAND,1)},Br.readToken_caret=function(){var Pe=this.input.charCodeAt(this.pos+1);return Pe===61?this.finishOp(Ne.assign,2):this.finishOp(Ne.bitwiseXOR,1)},Br.readToken_plus_min=function(Pe){var $e=this.input.charCodeAt(this.pos+1);return $e===Pe?$e===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||He.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(Ne.incDec,2):$e===61?this.finishOp(Ne.assign,2):this.finishOp(Ne.plusMin,1)},Br.readToken_lt_gt=function(Pe){var $e=this.input.charCodeAt(this.pos+1),Ze=1;return $e===Pe?(Ze=Pe===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+Ze)===61?this.finishOp(Ne.assign,Ze+1):this.finishOp(Ne.bitShift,Ze)):$e===33&&Pe===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):($e===61&&(Ze=2),this.finishOp(Ne.relational,Ze))},Br.readToken_eq_excl=function(Pe){var $e=this.input.charCodeAt(this.pos+1);return $e===61?this.finishOp(Ne.equality,this.input.charCodeAt(this.pos+2)===61?3:2):Pe===61&&$e===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Ne.arrow)):this.finishOp(Pe===61?Ne.eq:Ne.prefix,1)},Br.readToken_question=function(){var Pe=this.options.ecmaVersion;if(Pe>=11){var $e=this.input.charCodeAt(this.pos+1);if($e===46){var Ze=this.input.charCodeAt(this.pos+2);if(Ze<48||Ze>57)return this.finishOp(Ne.questionDot,2)}if($e===63){if(Pe>=12){var wt=this.input.charCodeAt(this.pos+2);if(wt===61)return this.finishOp(Ne.assign,3)}return this.finishOp(Ne.coalesce,2)}}return this.finishOp(Ne.question,1)},Br.readToken_numberSign=function(){var Pe=this.options.ecmaVersion,$e=35;if(Pe>=13&&(++this.pos,$e=this.fullCharCodeAtPos(),Re($e,!0)||$e===92))return this.finishToken(Ne.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Je($e)+"'")},Br.getTokenFromCode=function(Pe){switch(Pe){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Ne.parenL);case 41:return++this.pos,this.finishToken(Ne.parenR);case 59:return++this.pos,this.finishToken(Ne.semi);case 44:return++this.pos,this.finishToken(Ne.comma);case 91:return++this.pos,this.finishToken(Ne.bracketL);case 93:return++this.pos,this.finishToken(Ne.bracketR);case 123:return++this.pos,this.finishToken(Ne.braceL);case 125:return++this.pos,this.finishToken(Ne.braceR);case 58:return++this.pos,this.finishToken(Ne.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Ne.backQuote);case 48:var $e=this.input.charCodeAt(this.pos+1);if($e===120||$e===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if($e===111||$e===79)return this.readRadixNumber(8);if($e===98||$e===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(Pe);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(Pe);case 124:case 38:return this.readToken_pipe_amp(Pe);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(Pe);case 60:case 62:return this.readToken_lt_gt(Pe);case 61:case 33:return this.readToken_eq_excl(Pe);case 63:return this.readToken_question();case 126:return this.finishOp(Ne.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Je(Pe)+"'")},Br.finishOp=function(Pe,$e){var Ze=this.input.slice(this.pos,this.pos+$e);return this.pos+=$e,this.finishToken(Pe,Ze)},Br.readRegexp=function(){for(var Pe,$e,Ze=this.pos;;){this.pos>=this.input.length&&this.raise(Ze,"Unterminated regular expression");var wt=this.input.charAt(this.pos);if(He.test(wt)&&this.raise(Ze,"Unterminated regular expression"),Pe)Pe=!1;else{if(wt==="[")$e=!0;else if(wt==="]"&&$e)$e=!1;else if(wt==="/"&&!$e)break;Pe=wt==="\\"}++this.pos}var jt=this.input.slice(Ze,this.pos);++this.pos;var yn=this.pos,Tn=this.readWord1();this.containsEsc&&this.unexpected(yn);var rr=this.regexpState||(this.regexpState=new _r(this));rr.reset(Ze,jt,Tn),this.validateRegExpFlags(rr),this.validateRegExpPattern(rr);var ur=null;try{ur=new RegExp(jt,Tn)}catch{}return this.finishToken(Ne.regexp,{pattern:jt,flags:Tn,value:ur})},Br.readInt=function(Pe,$e,Ze){for(var wt=this.options.ecmaVersion>=12&&$e===void 0,jt=Ze&&this.input.charCodeAt(this.pos)===48,yn=this.pos,Tn=0,rr=0,ur=0,Ir=$e??1/0;ur<Ir;++ur,++this.pos){var wr=this.input.charCodeAt(this.pos),ui=void 0;if(wt&&wr===95){jt&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),rr===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),ur===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),rr=wr;continue}if(wr>=97?ui=wr-97+10:wr>=65?ui=wr-65+10:wr>=48&&wr<=57?ui=wr-48:ui=1/0,ui>=Pe)break;rr=wr,Tn=Tn*Pe+ui}return wt&&rr===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===yn||$e!=null&&this.pos-yn!==$e?null:Tn};function Hs(Pe,$e){return $e?parseInt(Pe,8):parseFloat(Pe.replace(/_/g,""))}function sa(Pe){return typeof BigInt!="function"?null:BigInt(Pe.replace(/_/g,""))}Br.readRadixNumber=function(Pe){var $e=this.pos;this.pos+=2;var Ze=this.readInt(Pe);return Ze==null&&this.raise(this.start+2,"Expected number in radix "+Pe),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(Ze=sa(this.input.slice($e,this.pos)),++this.pos):Re(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ne.num,Ze)},Br.readNumber=function(Pe){var $e=this.pos;!Pe&&this.readInt(10,void 0,!0)===null&&this.raise($e,"Invalid number");var Ze=this.pos-$e>=2&&this.input.charCodeAt($e)===48;Ze&&this.strict&&this.raise($e,"Invalid number");var wt=this.input.charCodeAt(this.pos);if(!Ze&&!Pe&&this.options.ecmaVersion>=11&&wt===110){var jt=sa(this.input.slice($e,this.pos));return++this.pos,Re(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Ne.num,jt)}Ze&&/[89]/.test(this.input.slice($e,this.pos))&&(Ze=!1),wt===46&&!Ze&&(++this.pos,this.readInt(10),wt=this.input.charCodeAt(this.pos)),(wt===69||wt===101)&&!Ze&&(wt=this.input.charCodeAt(++this.pos),(wt===43||wt===45)&&++this.pos,this.readInt(10)===null&&this.raise($e,"Invalid number")),Re(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var yn=Hs(this.input.slice($e,this.pos),Ze);return this.finishToken(Ne.num,yn)},Br.readCodePoint=function(){var Pe=this.input.charCodeAt(this.pos),$e;if(Pe===123){this.options.ecmaVersion<6&&this.unexpected();var Ze=++this.pos;$e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,$e>1114111&&this.invalidStringToken(Ze,"Code point out of bounds")}else $e=this.readHexChar(4);return $e},Br.readString=function(Pe){for(var $e="",Ze=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var wt=this.input.charCodeAt(this.pos);if(wt===Pe)break;wt===92?($e+=this.input.slice(Ze,this.pos),$e+=this.readEscapedChar(!1),Ze=this.pos):wt===8232||wt===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(je(wt)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return $e+=this.input.slice(Ze,this.pos++),this.finishToken(Ne.string,$e)};var aa={};Br.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(Pe){if(Pe===aa)this.readInvalidTemplateToken();else throw Pe}this.inTemplateElement=!1},Br.invalidStringToken=function(Pe,$e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw aa;this.raise(Pe,$e)},Br.readTmplToken=function(){for(var Pe="",$e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var Ze=this.input.charCodeAt(this.pos);if(Ze===96||Ze===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===Ne.template||this.type===Ne.invalidTemplate)?Ze===36?(this.pos+=2,this.finishToken(Ne.dollarBraceL)):(++this.pos,this.finishToken(Ne.backQuote)):(Pe+=this.input.slice($e,this.pos),this.finishToken(Ne.template,Pe));if(Ze===92)Pe+=this.input.slice($e,this.pos),Pe+=this.readEscapedChar(!0),$e=this.pos;else if(je(Ze)){switch(Pe+=this.input.slice($e,this.pos),++this.pos,Ze){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:Pe+=`
`;break;default:Pe+=String.fromCharCode(Ze);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),$e=this.pos}else++this.pos}},Br.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(Ne.invalidTemplate,this.input.slice(this.start,this.pos));case"\r":this.input[this.pos+1]===`
`&&++this.pos;case`
`:case"\u2028":case"\u2029":++this.curLine,this.lineStart=this.pos+1;break}this.raise(this.start,"Unterminated template")},Br.readEscapedChar=function(Pe){var $e=this.input.charCodeAt(++this.pos);switch(++this.pos,$e){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Je(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),Pe){var Ze=this.pos-1;this.invalidStringToken(Ze,"Invalid escape sequence in template string")}default:if($e>=48&&$e<=55){var wt=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],jt=parseInt(wt,8);return jt>255&&(wt=wt.slice(0,-1),jt=parseInt(wt,8)),this.pos+=wt.length-1,$e=this.input.charCodeAt(this.pos),(wt!=="0"||$e===56||$e===57)&&(this.strict||Pe)&&this.invalidStringToken(this.pos-1-wt.length,Pe?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(jt)}return je($e)?(this.options.locations&&(this.lineStart=this.pos,++this.curLine),""):String.fromCharCode($e)}},Br.readHexChar=function(Pe){var $e=this.pos,Ze=this.readInt(16,Pe);return Ze===null&&this.invalidStringToken($e,"Bad character escape sequence"),Ze},Br.readWord1=function(){this.containsEsc=!1;for(var Pe="",$e=!0,Ze=this.pos,wt=this.options.ecmaVersion>=6;this.pos<this.input.length;){var jt=this.fullCharCodeAtPos();if(De(jt,wt))this.pos+=jt<=65535?1:2;else if(jt===92){this.containsEsc=!0,Pe+=this.input.slice(Ze,this.pos);var yn=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var Tn=this.readCodePoint();($e?Re:De)(Tn,wt)||this.invalidStringToken(yn,"Invalid Unicode escape"),Pe+=Je(Tn),Ze=this.pos}else break;$e=!1}return Pe+this.input.slice(Ze,this.pos)},Br.readWord=function(){var Pe=this.readWord1(),$e=Ne.name;return this.keywords.test(Pe)&&($e=Fe[Pe]),this.finishToken($e,Pe)};var Ri="8.14.1";on.acorn={Parser:on,version:Ri,defaultOptions:Gt,Position:Kt,SourceLocation:Pt,getLineInfo:Yt,Node:Ei,TokenType:Ie,tokTypes:Ne,keywordTypes:Fe,TokContext:Gn,tokContexts:Yn,isIdentifierChar:De,isIdentifierStart:Re,Token:ps,isNewLine:je,lineBreak:He,lineBreakG:ze,nonASCIIwhitespace:Xe};function oa(Pe,$e){return on.parse(Pe,$e)}function Ba(Pe,$e,Ze){return on.parseExpressionAt(Pe,$e,Ze)}function Vs(Pe,$e){return on.tokenizer(Pe,$e)}me.Node=Ei,me.Parser=on,me.Position=Kt,me.SourceLocation=Pt,me.TokContext=Gn,me.Token=ps,me.TokenType=Ie,me.defaultOptions=Gt,me.getLineInfo=Yt,me.isIdentifierChar=De,me.isIdentifierStart=Re,me.isNewLine=je,me.keywordTypes=Fe,me.lineBreak=He,me.lineBreakG=ze,me.nonASCIIwhitespace=Xe,me.parse=oa,me.parseExpressionAt=Ba,me.tokContexts=Yn,me.tokTypes=Ne,me.tokenizer=Vs,me.version=Ri})}(acorn,acorn.exports)),acorn.exports}(function(fe){const K=xhtml,me=/^[\da-fA-F]+$/,ge=/^\d+$/,xe=new WeakMap;function ye(Ee){Ee=Ee.Parser.acorn||Ee;let be=xe.get(Ee);if(!be){const Ae=Ee.tokTypes,Se=Ee.TokContext,Ce=Ee.TokenType,Te=new Se("<tag",!1),Re=new Se("</tag",!1),De=new Se("<tag>...</tag>",!0,!0),Ie={tc_oTag:Te,tc_cTag:Re,tc_expr:De},Be={jsxName:new Ce("jsxName"),jsxText:new Ce("jsxText",{beforeExpr:!0}),jsxTagStart:new Ce("jsxTagStart",{startsExpr:!0}),jsxTagEnd:new Ce("jsxTagEnd")};Be.jsxTagStart.updateContext=function(){this.context.push(De),this.context.push(Te),this.exprAllowed=!1},Be.jsxTagEnd.updateContext=function(Le){let Oe=this.context.pop();Oe===Te&&Le===Ae.slash||Oe===Re?(this.context.pop(),this.exprAllowed=this.curContext()===De):this.exprAllowed=!0},be={tokContexts:Ie,tokTypes:Be},xe.set(Ee,be)}return be}function ve(Ee){if(!Ee)return Ee;if(Ee.type==="JSXIdentifier")return Ee.name;if(Ee.type==="JSXNamespacedName")return Ee.namespace.name+":"+Ee.name.name;if(Ee.type==="JSXMemberExpression")return ve(Ee.object)+"."+ve(Ee.property)}fe.exports=function(Ee){return Ee=Ee||{},function(be){return _e({allowNamespaces:Ee.allowNamespaces!==!1,allowNamespacedObjects:!!Ee.allowNamespacedObjects},be)}},Object.defineProperty(fe.exports,"tokTypes",{get:function(){return ye(requireAcorn()).tokTypes},configurable:!0,enumerable:!0});function _e(Ee,be){const Ae=be.acorn||requireAcorn(),Se=ye(Ae),Ce=Ae.tokTypes,Te=Se.tokTypes,Re=Ae.tokContexts,De=Se.tokContexts.tc_oTag,Ie=Se.tokContexts.tc_cTag,Be=Se.tokContexts.tc_expr,Le=Ae.isNewLine,Oe=Ae.isIdentifierStart,Fe=Ae.isIdentifierChar;return class extends be{static get acornJsx(){return Se}jsx_readToken(){let Ue="",Ne=this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated JSX contents");let He=this.input.charCodeAt(this.pos);switch(He){case 60:case 123:return this.pos===this.start?He===60&&this.exprAllowed?(++this.pos,this.finishToken(Te.jsxTagStart)):this.getTokenFromCode(He):(Ue+=this.input.slice(Ne,this.pos),this.finishToken(Te.jsxText,Ue));case 38:Ue+=this.input.slice(Ne,this.pos),Ue+=this.jsx_readEntity(),Ne=this.pos;break;case 62:case 125:this.raise(this.pos,"Unexpected token `"+this.input[this.pos]+"`. Did you mean `"+(He===62?"&gt;":"&rbrace;")+'` or `{"'+this.input[this.pos]+'"}`?');default:Le(He)?(Ue+=this.input.slice(Ne,this.pos),Ue+=this.jsx_readNewLine(!0),Ne=this.pos):++this.pos}}}jsx_readNewLine(Ue){let Ne=this.input.charCodeAt(this.pos),He;return++this.pos,Ne===13&&this.input.charCodeAt(this.pos)===10?(++this.pos,He=Ue?`
`:`\r
`):He=String.fromCharCode(Ne),this.options.locations&&(++this.curLine,this.lineStart=this.pos),He}jsx_readString(Ue){let Ne="",He=++this.pos;for(;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");let ze=this.input.charCodeAt(this.pos);if(ze===Ue)break;ze===38?(Ne+=this.input.slice(He,this.pos),Ne+=this.jsx_readEntity(),He=this.pos):Le(ze)?(Ne+=this.input.slice(He,this.pos),Ne+=this.jsx_readNewLine(!1),He=this.pos):++this.pos}return Ne+=this.input.slice(He,this.pos++),this.finishToken(Ce.string,Ne)}jsx_readEntity(){let Ue="",Ne=0,He,ze=this.input[this.pos];ze!=="&"&&this.raise(this.pos,"Entity must start with an ampersand");let je=++this.pos;for(;this.pos<this.input.length&&Ne++<10;){if(ze=this.input[this.pos++],ze===";"){Ue[0]==="#"?Ue[1]==="x"?(Ue=Ue.substr(2),me.test(Ue)&&(He=String.fromCharCode(parseInt(Ue,16)))):(Ue=Ue.substr(1),ge.test(Ue)&&(He=String.fromCharCode(parseInt(Ue,10)))):He=K[Ue];break}Ue+=ze}return He||(this.pos=je,"&")}jsx_readWord(){let Ue,Ne=this.pos;do Ue=this.input.charCodeAt(++this.pos);while(Fe(Ue)||Ue===45);return this.finishToken(Te.jsxName,this.input.slice(Ne,this.pos))}jsx_parseIdentifier(){let Ue=this.startNode();return this.type===Te.jsxName?Ue.name=this.value:this.type.keyword?Ue.name=this.type.keyword:this.unexpected(),this.next(),this.finishNode(Ue,"JSXIdentifier")}jsx_parseNamespacedName(){let Ue=this.start,Ne=this.startLoc,He=this.jsx_parseIdentifier();if(!Ee.allowNamespaces||!this.eat(Ce.colon))return He;var ze=this.startNodeAt(Ue,Ne);return ze.namespace=He,ze.name=this.jsx_parseIdentifier(),this.finishNode(ze,"JSXNamespacedName")}jsx_parseElementName(){if(this.type===Te.jsxTagEnd)return"";let Ue=this.start,Ne=this.startLoc,He=this.jsx_parseNamespacedName();for(this.type===Ce.dot&&He.type==="JSXNamespacedName"&&!Ee.allowNamespacedObjects&&this.unexpected();this.eat(Ce.dot);){let ze=this.startNodeAt(Ue,Ne);ze.object=He,ze.property=this.jsx_parseIdentifier(),He=this.finishNode(ze,"JSXMemberExpression")}return He}jsx_parseAttributeValue(){switch(this.type){case Ce.braceL:let Ue=this.jsx_parseExpressionContainer();return Ue.expression.type==="JSXEmptyExpression"&&this.raise(Ue.start,"JSX attributes must only be assigned a non-empty expression"),Ue;case Te.jsxTagStart:case Ce.string:return this.parseExprAtom();default:this.raise(this.start,"JSX value should be either an expression or a quoted JSX text")}}jsx_parseEmptyExpression(){let Ue=this.startNodeAt(this.lastTokEnd,this.lastTokEndLoc);return this.finishNodeAt(Ue,"JSXEmptyExpression",this.start,this.startLoc)}jsx_parseExpressionContainer(){let Ue=this.startNode();return this.next(),Ue.expression=this.type===Ce.braceR?this.jsx_parseEmptyExpression():this.parseExpression(),this.expect(Ce.braceR),this.finishNode(Ue,"JSXExpressionContainer")}jsx_parseAttribute(){let Ue=this.startNode();return this.eat(Ce.braceL)?(this.expect(Ce.ellipsis),Ue.argument=this.parseMaybeAssign(),this.expect(Ce.braceR),this.finishNode(Ue,"JSXSpreadAttribute")):(Ue.name=this.jsx_parseNamespacedName(),Ue.value=this.eat(Ce.eq)?this.jsx_parseAttributeValue():null,this.finishNode(Ue,"JSXAttribute"))}jsx_parseOpeningElementAt(Ue,Ne){let He=this.startNodeAt(Ue,Ne);He.attributes=[];let ze=this.jsx_parseElementName();for(ze&&(He.name=ze);this.type!==Ce.slash&&this.type!==Te.jsxTagEnd;)He.attributes.push(this.jsx_parseAttribute());return He.selfClosing=this.eat(Ce.slash),this.expect(Te.jsxTagEnd),this.finishNode(He,ze?"JSXOpeningElement":"JSXOpeningFragment")}jsx_parseClosingElementAt(Ue,Ne){let He=this.startNodeAt(Ue,Ne),ze=this.jsx_parseElementName();return ze&&(He.name=ze),this.expect(Te.jsxTagEnd),this.finishNode(He,ze?"JSXClosingElement":"JSXClosingFragment")}jsx_parseElementAt(Ue,Ne){let He=this.startNodeAt(Ue,Ne),ze=[],je=this.jsx_parseOpeningElementAt(Ue,Ne),Ge=null;if(!je.selfClosing){e:for(;;)switch(this.type){case Te.jsxTagStart:if(Ue=this.start,Ne=this.startLoc,this.next(),this.eat(Ce.slash)){Ge=this.jsx_parseClosingElementAt(Ue,Ne);break e}ze.push(this.jsx_parseElementAt(Ue,Ne));break;case Te.jsxText:ze.push(this.parseExprAtom());break;case Ce.braceL:ze.push(this.jsx_parseExpressionContainer());break;default:this.unexpected()}ve(Ge.name)!==ve(je.name)&&this.raise(Ge.start,"Expected corresponding JSX closing tag for <"+ve(je.name)+">")}let Xe=je.name?"Element":"Fragment";return He["opening"+Xe]=je,He["closing"+Xe]=Ge,He.children=ze,this.type===Ce.relational&&this.value==="<"&&this.raise(this.start,"Adjacent JSX elements must be wrapped in an enclosing tag"),this.finishNode(He,"JSX"+Xe)}jsx_parseText(){let Ue=this.parseLiteral(this.value);return Ue.type="JSXText",Ue}jsx_parseElement(){let Ue=this.start,Ne=this.startLoc;return this.next(),this.jsx_parseElementAt(Ue,Ne)}parseExprAtom(Ue){return this.type===Te.jsxText?this.jsx_parseText():this.type===Te.jsxTagStart?this.jsx_parseElement():super.parseExprAtom(Ue)}readToken(Ue){let Ne=this.curContext();if(Ne===Be)return this.jsx_readToken();if(Ne===De||Ne===Ie){if(Oe(Ue))return this.jsx_readWord();if(Ue==62)return++this.pos,this.finishToken(Te.jsxTagEnd);if((Ue===34||Ue===39)&&Ne==De)return this.jsx_readString(Ue)}return Ue===60&&this.exprAllowed&&this.input.charCodeAt(this.pos+1)!==33?(++this.pos,this.finishToken(Te.jsxTagStart)):super.readToken(Ue)}updateContext(Ue){if(this.type==Ce.braceL){var Ne=this.curContext();Ne==De?this.context.push(Re.b_expr):Ne==Be?this.context.push(Re.b_tmpl):super.updateContext(Ue),this.exprAllowed=!0}else if(this.type===Ce.slash&&Ue===Te.jsxTagStart)this.context.length-=2,this.context.push(Ie),this.exprAllowed=!1;else return super.updateContext(Ue)}}}})(acornJsx$1);var acornJsxExports=acornJsx$1.exports;const acornJsx=getDefaultExportFromCjs(acornJsxExports),{stringify:stringify$2}=JSON;if(!String.prototype.repeat)throw new Error("String.prototype.repeat is undefined, see https://github.com/davidbonnet/astring#installation");if(!String.prototype.endsWith)throw new Error("String.prototype.endsWith is undefined, see https://github.com/davidbonnet/astring#installation");const OPERATOR_PRECEDENCE={"||":2,"??":3,"&&":4,"|":5,"^":6,"&":7,"==":8,"!=":8,"===":8,"!==":8,"<":9,">":9,"<=":9,">=":9,in:9,instanceof:9,"<<":10,">>":10,">>>":10,"+":11,"-":11,"*":12,"%":12,"/":12,"**":13},NEEDS_PARENTHESES=17,EXPRESSIONS_PRECEDENCE={ArrayExpression:20,TaggedTemplateExpression:20,ThisExpression:20,Identifier:20,PrivateIdentifier:20,Literal:18,TemplateLiteral:20,Super:20,SequenceExpression:20,MemberExpression:19,ChainExpression:19,CallExpression:19,NewExpression:19,ArrowFunctionExpression:NEEDS_PARENTHESES,ClassExpression:NEEDS_PARENTHESES,FunctionExpression:NEEDS_PARENTHESES,ObjectExpression:NEEDS_PARENTHESES,UpdateExpression:16,UnaryExpression:15,AwaitExpression:15,BinaryExpression:14,LogicalExpression:13,ConditionalExpression:4,AssignmentExpression:3,YieldExpression:2,RestElement:1};function formatSequence(fe,K){const{generator:me}=fe;if(fe.write("("),K!=null&&K.length>0){me[K[0].type](K[0],fe);const{length:ge}=K;for(let xe=1;xe<ge;xe++){const ye=K[xe];fe.write(", "),me[ye.type](ye,fe)}}fe.write(")")}function expressionNeedsParenthesis(fe,K,me,ge){const xe=fe.expressionsPrecedence[K.type];if(xe===NEEDS_PARENTHESES)return!0;const ye=fe.expressionsPrecedence[me.type];return xe!==ye?!ge&&xe===15&&ye===14&&me.operator==="**"||xe<ye:xe!==13&&xe!==14?!1:K.operator==="**"&&me.operator==="**"?!ge:xe===13&&ye===13&&(K.operator==="??"||me.operator==="??")?!0:ge?OPERATOR_PRECEDENCE[K.operator]<=OPERATOR_PRECEDENCE[me.operator]:OPERATOR_PRECEDENCE[K.operator]<OPERATOR_PRECEDENCE[me.operator]}function formatExpression(fe,K,me,ge){const{generator:xe}=fe;expressionNeedsParenthesis(fe,K,me,ge)?(fe.write("("),xe[K.type](K,fe),fe.write(")")):xe[K.type](K,fe)}function reindent(fe,K,me,ge){const xe=K.split(`
`),ye=xe.length-1;if(fe.write(xe[0].trim()),ye>0){fe.write(ge);for(let ve=1;ve<ye;ve++)fe.write(me+xe[ve].trim()+ge);fe.write(me+xe[ye].trim())}}function formatComments(fe,K,me,ge){const{length:xe}=K;for(let ye=0;ye<xe;ye++){const ve=K[ye];fe.write(me),ve.type[0]==="L"?fe.write("// "+ve.value.trim()+`
`,ve):(fe.write("/*"),reindent(fe,ve.value,me,ge),fe.write("*/"+ge))}}function hasCallExpression(fe){let K=fe;for(;K!=null;){const{type:me}=K;if(me[0]==="C"&&me[1]==="a")return!0;if(me[0]==="M"&&me[1]==="e"&&me[2]==="m")K=K.object;else return!1}}function formatVariableDeclaration(fe,K){const{generator:me}=fe,{declarations:ge}=K;fe.write(K.kind+" ");const{length:xe}=ge;if(xe>0){me.VariableDeclarator(ge[0],fe);for(let ye=1;ye<xe;ye++)fe.write(", "),me.VariableDeclarator(ge[ye],fe)}}let ForInStatement,FunctionDeclaration,RestElement,BinaryExpression,ArrayExpression,BlockStatement;const GENERATOR={Program(fe,K){const me=K.indent.repeat(K.indentLevel),{lineEnd:ge,writeComments:xe}=K;xe&&fe.comments!=null&&formatComments(K,fe.comments,me,ge);const ye=fe.body,{length:ve}=ye;for(let _e=0;_e<ve;_e++){const Ee=ye[_e];xe&&Ee.comments!=null&&formatComments(K,Ee.comments,me,ge),K.write(me),this[Ee.type](Ee,K),K.write(ge)}xe&&fe.trailingComments!=null&&formatComments(K,fe.trailingComments,me,ge)},BlockStatement:BlockStatement=function(fe,K){const me=K.indent.repeat(K.indentLevel++),{lineEnd:ge,writeComments:xe}=K,ye=me+K.indent;K.write("{");const ve=fe.body;if(ve!=null&&ve.length>0){K.write(ge),xe&&fe.comments!=null&&formatComments(K,fe.comments,ye,ge);const{length:_e}=ve;for(let Ee=0;Ee<_e;Ee++){const be=ve[Ee];xe&&be.comments!=null&&formatComments(K,be.comments,ye,ge),K.write(ye),this[be.type](be,K),K.write(ge)}K.write(me)}else xe&&fe.comments!=null&&(K.write(ge),formatComments(K,fe.comments,ye,ge),K.write(me));xe&&fe.trailingComments!=null&&formatComments(K,fe.trailingComments,ye,ge),K.write("}"),K.indentLevel--},ClassBody:BlockStatement,StaticBlock(fe,K){K.write("static "),this.BlockStatement(fe,K)},EmptyStatement(fe,K){K.write(";")},ExpressionStatement(fe,K){const me=K.expressionsPrecedence[fe.expression.type];me===NEEDS_PARENTHESES||me===3&&fe.expression.left.type[0]==="O"?(K.write("("),this[fe.expression.type](fe.expression,K),K.write(")")):this[fe.expression.type](fe.expression,K),K.write(";")},IfStatement(fe,K){K.write("if ("),this[fe.test.type](fe.test,K),K.write(") "),this[fe.consequent.type](fe.consequent,K),fe.alternate!=null&&(K.write(" else "),this[fe.alternate.type](fe.alternate,K))},LabeledStatement(fe,K){this[fe.label.type](fe.label,K),K.write(": "),this[fe.body.type](fe.body,K)},BreakStatement(fe,K){K.write("break"),fe.label!=null&&(K.write(" "),this[fe.label.type](fe.label,K)),K.write(";")},ContinueStatement(fe,K){K.write("continue"),fe.label!=null&&(K.write(" "),this[fe.label.type](fe.label,K)),K.write(";")},WithStatement(fe,K){K.write("with ("),this[fe.object.type](fe.object,K),K.write(") "),this[fe.body.type](fe.body,K)},SwitchStatement(fe,K){const me=K.indent.repeat(K.indentLevel++),{lineEnd:ge,writeComments:xe}=K;K.indentLevel++;const ye=me+K.indent,ve=ye+K.indent;K.write("switch ("),this[fe.discriminant.type](fe.discriminant,K),K.write(") {"+ge);const{cases:_e}=fe,{length:Ee}=_e;for(let be=0;be<Ee;be++){const Ae=_e[be];xe&&Ae.comments!=null&&formatComments(K,Ae.comments,ye,ge),Ae.test?(K.write(ye+"case "),this[Ae.test.type](Ae.test,K),K.write(":"+ge)):K.write(ye+"default:"+ge);const{consequent:Se}=Ae,{length:Ce}=Se;for(let Te=0;Te<Ce;Te++){const Re=Se[Te];xe&&Re.comments!=null&&formatComments(K,Re.comments,ve,ge),K.write(ve),this[Re.type](Re,K),K.write(ge)}}K.indentLevel-=2,K.write(me+"}")},ReturnStatement(fe,K){K.write("return"),fe.argument&&(K.write(" "),this[fe.argument.type](fe.argument,K)),K.write(";")},ThrowStatement(fe,K){K.write("throw "),this[fe.argument.type](fe.argument,K),K.write(";")},TryStatement(fe,K){if(K.write("try "),this[fe.block.type](fe.block,K),fe.handler){const{handler:me}=fe;me.param==null?K.write(" catch "):(K.write(" catch ("),this[me.param.type](me.param,K),K.write(") ")),this[me.body.type](me.body,K)}fe.finalizer&&(K.write(" finally "),this[fe.finalizer.type](fe.finalizer,K))},WhileStatement(fe,K){K.write("while ("),this[fe.test.type](fe.test,K),K.write(") "),this[fe.body.type](fe.body,K)},DoWhileStatement(fe,K){K.write("do "),this[fe.body.type](fe.body,K),K.write(" while ("),this[fe.test.type](fe.test,K),K.write(");")},ForStatement(fe,K){if(K.write("for ("),fe.init!=null){const{init:me}=fe;me.type[0]==="V"?formatVariableDeclaration(K,me):this[me.type](me,K)}K.write("; "),fe.test&&this[fe.test.type](fe.test,K),K.write("; "),fe.update&&this[fe.update.type](fe.update,K),K.write(") "),this[fe.body.type](fe.body,K)},ForInStatement:ForInStatement=function(fe,K){K.write(`for ${fe.await?"await ":""}(`);const{left:me}=fe;me.type[0]==="V"?formatVariableDeclaration(K,me):this[me.type](me,K),K.write(fe.type[3]==="I"?" in ":" of "),this[fe.right.type](fe.right,K),K.write(") "),this[fe.body.type](fe.body,K)},ForOfStatement:ForInStatement,DebuggerStatement(fe,K){K.write("debugger;",fe)},FunctionDeclaration:FunctionDeclaration=function(fe,K){K.write((fe.async?"async ":"")+(fe.generator?"function* ":"function ")+(fe.id?fe.id.name:""),fe),formatSequence(K,fe.params),K.write(" "),this[fe.body.type](fe.body,K)},FunctionExpression:FunctionDeclaration,VariableDeclaration(fe,K){formatVariableDeclaration(K,fe),K.write(";")},VariableDeclarator(fe,K){this[fe.id.type](fe.id,K),fe.init!=null&&(K.write(" = "),this[fe.init.type](fe.init,K))},ClassDeclaration(fe,K){if(K.write("class "+(fe.id?`${fe.id.name} `:""),fe),fe.superClass){K.write("extends ");const{superClass:me}=fe,{type:ge}=me,xe=K.expressionsPrecedence[ge];(ge[0]!=="C"||ge[1]!=="l"||ge[5]!=="E")&&(xe===NEEDS_PARENTHESES||xe<K.expressionsPrecedence.ClassExpression)?(K.write("("),this[fe.superClass.type](me,K),K.write(")")):this[me.type](me,K),K.write(" ")}this.ClassBody(fe.body,K)},ImportDeclaration(fe,K){K.write("import ");const{specifiers:me,attributes:ge}=fe,{length:xe}=me;let ye=0;if(xe>0){for(;ye<xe;){ye>0&&K.write(", ");const ve=me[ye],_e=ve.type[6];if(_e==="D")K.write(ve.local.name,ve),ye++;else if(_e==="N")K.write("* as "+ve.local.name,ve),ye++;else break}if(ye<xe){for(K.write("{");;){const ve=me[ye],{name:_e}=ve.imported;if(K.write(_e,ve),_e!==ve.local.name&&K.write(" as "+ve.local.name),++ye<xe)K.write(", ");else break}K.write("}")}K.write(" from ")}if(this.Literal(fe.source,K),ge&&ge.length>0){K.write(" with { ");for(let ve=0;ve<ge.length;ve++)this.ImportAttribute(ge[ve],K),ve<ge.length-1&&K.write(", ");K.write(" }")}K.write(";")},ImportAttribute(fe,K){this.Identifier(fe.key,K),K.write(": "),this.Literal(fe.value,K)},ImportExpression(fe,K){K.write("import("),this[fe.source.type](fe.source,K),K.write(")")},ExportDefaultDeclaration(fe,K){K.write("export default "),this[fe.declaration.type](fe.declaration,K),K.expressionsPrecedence[fe.declaration.type]!=null&&fe.declaration.type[0]!=="F"&&K.write(";")},ExportNamedDeclaration(fe,K){if(K.write("export "),fe.declaration)this[fe.declaration.type](fe.declaration,K);else{K.write("{");const{specifiers:me}=fe,{length:ge}=me;if(ge>0)for(let xe=0;;){const ye=me[xe],{name:ve}=ye.local;if(K.write(ve,ye),ve!==ye.exported.name&&K.write(" as "+ye.exported.name),++xe<ge)K.write(", ");else break}if(K.write("}"),fe.source&&(K.write(" from "),this.Literal(fe.source,K)),fe.attributes&&fe.attributes.length>0){K.write(" with { ");for(let xe=0;xe<fe.attributes.length;xe++)this.ImportAttribute(fe.attributes[xe],K),xe<fe.attributes.length-1&&K.write(", ");K.write(" }")}K.write(";")}},ExportAllDeclaration(fe,K){if(fe.exported!=null?K.write("export * as "+fe.exported.name+" from "):K.write("export * from "),this.Literal(fe.source,K),fe.attributes&&fe.attributes.length>0){K.write(" with { ");for(let me=0;me<fe.attributes.length;me++)this.ImportAttribute(fe.attributes[me],K),me<fe.attributes.length-1&&K.write(", ");K.write(" }")}K.write(";")},MethodDefinition(fe,K){fe.static&&K.write("static ");const me=fe.kind[0];(me==="g"||me==="s")&&K.write(fe.kind+" "),fe.value.async&&K.write("async "),fe.value.generator&&K.write("*"),fe.computed?(K.write("["),this[fe.key.type](fe.key,K),K.write("]")):this[fe.key.type](fe.key,K),formatSequence(K,fe.value.params),K.write(" "),this[fe.value.body.type](fe.value.body,K)},ClassExpression(fe,K){this.ClassDeclaration(fe,K)},ArrowFunctionExpression(fe,K){K.write(fe.async?"async ":"",fe);const{params:me}=fe;me!=null&&(me.length===1&&me[0].type[0]==="I"?K.write(me[0].name,me[0]):formatSequence(K,fe.params)),K.write(" => "),fe.body.type[0]==="O"?(K.write("("),this.ObjectExpression(fe.body,K),K.write(")")):this[fe.body.type](fe.body,K)},ThisExpression(fe,K){K.write("this",fe)},Super(fe,K){K.write("super",fe)},RestElement:RestElement=function(fe,K){K.write("..."),this[fe.argument.type](fe.argument,K)},SpreadElement:RestElement,YieldExpression(fe,K){K.write(fe.delegate?"yield*":"yield"),fe.argument&&(K.write(" "),this[fe.argument.type](fe.argument,K))},AwaitExpression(fe,K){K.write("await ",fe),formatExpression(K,fe.argument,fe)},TemplateLiteral(fe,K){const{quasis:me,expressions:ge}=fe;K.write("`");const{length:xe}=ge;for(let ve=0;ve<xe;ve++){const _e=ge[ve],Ee=me[ve];K.write(Ee.value.raw,Ee),K.write("${"),this[_e.type](_e,K),K.write("}")}const ye=me[me.length-1];K.write(ye.value.raw,ye),K.write("`")},TemplateElement(fe,K){K.write(fe.value.raw,fe)},TaggedTemplateExpression(fe,K){formatExpression(K,fe.tag,fe),this[fe.quasi.type](fe.quasi,K)},ArrayExpression:ArrayExpression=function(fe,K){if(K.write("["),fe.elements.length>0){const{elements:me}=fe,{length:ge}=me;for(let xe=0;;){const ye=me[xe];if(ye!=null&&this[ye.type](ye,K),++xe<ge)K.write(", ");else{ye==null&&K.write(", ");break}}}K.write("]")},ArrayPattern:ArrayExpression,ObjectExpression(fe,K){const me=K.indent.repeat(K.indentLevel++),{lineEnd:ge,writeComments:xe}=K,ye=me+K.indent;if(K.write("{"),fe.properties.length>0){K.write(ge),xe&&fe.comments!=null&&formatComments(K,fe.comments,ye,ge);const ve=","+ge,{properties:_e}=fe,{length:Ee}=_e;for(let be=0;;){const Ae=_e[be];if(xe&&Ae.comments!=null&&formatComments(K,Ae.comments,ye,ge),K.write(ye),this[Ae.type](Ae,K),++be<Ee)K.write(ve);else break}K.write(ge),xe&&fe.trailingComments!=null&&formatComments(K,fe.trailingComments,ye,ge),K.write(me+"}")}else xe?fe.comments!=null?(K.write(ge),formatComments(K,fe.comments,ye,ge),fe.trailingComments!=null&&formatComments(K,fe.trailingComments,ye,ge),K.write(me+"}")):fe.trailingComments!=null?(K.write(ge),formatComments(K,fe.trailingComments,ye,ge),K.write(me+"}")):K.write("}"):K.write("}");K.indentLevel--},Property(fe,K){fe.method||fe.kind[0]!=="i"?this.MethodDefinition(fe,K):(fe.shorthand||(fe.computed?(K.write("["),this[fe.key.type](fe.key,K),K.write("]")):this[fe.key.type](fe.key,K),K.write(": ")),this[fe.value.type](fe.value,K))},PropertyDefinition(fe,K){if(fe.static&&K.write("static "),fe.computed&&K.write("["),this[fe.key.type](fe.key,K),fe.computed&&K.write("]"),fe.value==null){fe.key.type[0]!=="F"&&K.write(";");return}K.write(" = "),this[fe.value.type](fe.value,K),K.write(";")},ObjectPattern(fe,K){if(K.write("{"),fe.properties.length>0){const{properties:me}=fe,{length:ge}=me;for(let xe=0;this[me[xe].type](me[xe],K),++xe<ge;)K.write(", ")}K.write("}")},SequenceExpression(fe,K){formatSequence(K,fe.expressions)},UnaryExpression(fe,K){if(fe.prefix){const{operator:me,argument:ge,argument:{type:xe}}=fe;K.write(me);const ye=expressionNeedsParenthesis(K,ge,fe);!ye&&(me.length>1||xe[0]==="U"&&(xe[1]==="n"||xe[1]==="p")&&ge.prefix&&ge.operator[0]===me&&(me==="+"||me==="-"))&&K.write(" "),ye?(K.write(me.length>1?" (":"("),this[xe](ge,K),K.write(")")):this[xe](ge,K)}else this[fe.argument.type](fe.argument,K),K.write(fe.operator)},UpdateExpression(fe,K){fe.prefix?(K.write(fe.operator),this[fe.argument.type](fe.argument,K)):(this[fe.argument.type](fe.argument,K),K.write(fe.operator))},AssignmentExpression(fe,K){this[fe.left.type](fe.left,K),K.write(" "+fe.operator+" "),this[fe.right.type](fe.right,K)},AssignmentPattern(fe,K){this[fe.left.type](fe.left,K),K.write(" = "),this[fe.right.type](fe.right,K)},BinaryExpression:BinaryExpression=function(fe,K){const me=fe.operator==="in";me&&K.write("("),formatExpression(K,fe.left,fe,!1),K.write(" "+fe.operator+" "),formatExpression(K,fe.right,fe,!0),me&&K.write(")")},LogicalExpression:BinaryExpression,ConditionalExpression(fe,K){const{test:me}=fe,ge=K.expressionsPrecedence[me.type];ge===NEEDS_PARENTHESES||ge<=K.expressionsPrecedence.ConditionalExpression?(K.write("("),this[me.type](me,K),K.write(")")):this[me.type](me,K),K.write(" ? "),this[fe.consequent.type](fe.consequent,K),K.write(" : "),this[fe.alternate.type](fe.alternate,K)},NewExpression(fe,K){K.write("new ");const me=K.expressionsPrecedence[fe.callee.type];me===NEEDS_PARENTHESES||me<K.expressionsPrecedence.CallExpression||hasCallExpression(fe.callee)?(K.write("("),this[fe.callee.type](fe.callee,K),K.write(")")):this[fe.callee.type](fe.callee,K),formatSequence(K,fe.arguments)},CallExpression(fe,K){const me=K.expressionsPrecedence[fe.callee.type];me===NEEDS_PARENTHESES||me<K.expressionsPrecedence.CallExpression?(K.write("("),this[fe.callee.type](fe.callee,K),K.write(")")):this[fe.callee.type](fe.callee,K),fe.optional&&K.write("?."),formatSequence(K,fe.arguments)},ChainExpression(fe,K){this[fe.expression.type](fe.expression,K)},MemberExpression(fe,K){const me=K.expressionsPrecedence[fe.object.type];me===NEEDS_PARENTHESES||me<K.expressionsPrecedence.MemberExpression?(K.write("("),this[fe.object.type](fe.object,K),K.write(")")):this[fe.object.type](fe.object,K),fe.computed?(fe.optional&&K.write("?."),K.write("["),this[fe.property.type](fe.property,K),K.write("]")):(fe.optional?K.write("?."):K.write("."),this[fe.property.type](fe.property,K))},MetaProperty(fe,K){K.write(fe.meta.name+"."+fe.property.name,fe)},Identifier(fe,K){K.write(fe.name,fe)},PrivateIdentifier(fe,K){K.write(`#${fe.name}`,fe)},Literal(fe,K){fe.raw!=null?K.write(fe.raw,fe):fe.regex!=null?this.RegExpLiteral(fe,K):fe.bigint!=null?K.write(fe.bigint+"n",fe):K.write(stringify$2(fe.value),fe)},RegExpLiteral(fe,K){const{regex:me}=fe;K.write(`/${me.pattern}/${me.flags}`,fe)}},EMPTY_OBJECT={};class State{constructor(K){const me=K??EMPTY_OBJECT;this.output="",me.output!=null?(this.output=me.output,this.write=this.writeToStream):this.output="",this.generator=me.generator!=null?me.generator:GENERATOR,this.expressionsPrecedence=me.expressionsPrecedence!=null?me.expressionsPrecedence:EXPRESSIONS_PRECEDENCE,this.indent=me.indent!=null?me.indent:"  ",this.lineEnd=me.lineEnd!=null?me.lineEnd:`
`,this.indentLevel=me.startingIndentLevel!=null?me.startingIndentLevel:0,this.writeComments=me.comments?me.comments:!1,me.sourceMap!=null&&(this.write=me.output==null?this.writeAndMap:this.writeToStreamAndMap,this.sourceMap=me.sourceMap,this.line=1,this.column=0,this.lineEndSize=this.lineEnd.split(`
`).length-1,this.mapping={original:null,generated:this,name:void 0,source:me.sourceMap.file||me.sourceMap._file})}write(K){this.output+=K}writeToStream(K){this.output.write(K)}writeAndMap(K,me){this.output+=K,this.map(K,me)}writeToStreamAndMap(K,me){this.output.write(K),this.map(K,me)}map(K,me){if(me!=null){const{type:ye}=me;if(ye[0]==="L"&&ye[2]==="n"){this.column=0,this.line++;return}if(me.loc!=null){const{mapping:ve}=this;ve.original=me.loc.start,ve.name=me.name,this.sourceMap.addMapping(ve)}if(ye[0]==="T"&&ye[8]==="E"||ye[0]==="L"&&ye[1]==="i"&&typeof me.value=="string"){const{length:ve}=K;let{column:_e,line:Ee}=this;for(let be=0;be<ve;be++)K[be]===`
`?(_e=0,Ee++):_e++;this.column=_e,this.line=Ee;return}}const{length:ge}=K,{lineEnd:xe}=this;ge>0&&(this.lineEndSize>0&&(xe.length===1?K[ge-1]===xe:K.endsWith(xe))?(this.line+=this.lineEndSize,this.column=0):this.column+=ge)}toString(){return this.output}}function generate(fe,K){const me=new State(K);return me.generator[fe.type](fe,me),me.output}const emptyOptions$4={};function toJs(fe,K){const{SourceMapGenerator:me,filePath:ge,handlers:xe}=K||emptyOptions$4,ye=me?new me({file:ge||"<unknown>.js"}):void 0,ve=generate(fe,{comments:!0,generator:{...GENERATOR,...xe},sourceMap:ye||void 0}),_e=ye?ye.toJSON():void 0;return{value:ve,map:_e}}const jsx={JSXAttribute:jsxAttribute,JSXClosingElement:jsxClosingElement,JSXClosingFragment:jsxClosingFragment,JSXElement:jsxElement,JSXEmptyExpression:jsxEmptyExpression,JSXExpressionContainer:jsxExpressionContainer,JSXFragment:jsxFragment,JSXIdentifier:jsxIdentifier,JSXMemberExpression:jsxMemberExpression,JSXNamespacedName:jsxNamespacedName,JSXOpeningElement:jsxOpeningElement,JSXOpeningFragment:jsxOpeningFragment,JSXSpreadAttribute:jsxSpreadAttribute,JSXText:jsxText$1};function jsxAttribute(fe,K){this[fe.name.type](fe.name,K),fe.value!==null&&fe.value!==void 0&&(K.write("="),fe.value.type==="Literal"?K.write('"'+encodeJsx(String(fe.value.value)).replace(/"/g,"&quot;")+'"',fe):this[fe.value.type](fe.value,K))}function jsxClosingElement(fe,K){K.write("</"),this[fe.name.type](fe.name,K),K.write(">")}function jsxClosingFragment(fe,K){K.write("</>",fe)}function jsxElement(fe,K){let me=-1;if(this[fe.openingElement.type](fe.openingElement,K),fe.children)for(;++me<fe.children.length;){const ge=fe.children[me];if(ge.type==="JSXSpreadChild")throw new Error("JSX spread children are not supported");this[ge.type](ge,K)}fe.closingElement&&this[fe.closingElement.type](fe.closingElement,K)}function jsxEmptyExpression(){}function jsxExpressionContainer(fe,K){K.write("{"),this[fe.expression.type](fe.expression,K),K.write("}")}function jsxFragment(fe,K){let me=-1;if(this[fe.openingFragment.type](fe.openingFragment,K),fe.children)for(;++me<fe.children.length;){const ge=fe.children[me];if(ge.type==="JSXSpreadChild")throw new Error("JSX spread children are not supported");this[ge.type](ge,K)}this[fe.closingFragment.type](fe.closingFragment,K)}function jsxIdentifier(fe,K){K.write(fe.name,fe)}function jsxMemberExpression(fe,K){this[fe.object.type](fe.object,K),K.write("."),this[fe.property.type](fe.property,K)}function jsxNamespacedName(fe,K){this[fe.namespace.type](fe.namespace,K),K.write(":"),this[fe.name.type](fe.name,K)}function jsxOpeningElement(fe,K){let me=-1;if(K.write("<"),this[fe.name.type](fe.name,K),fe.attributes)for(;++me<fe.attributes.length;)K.write(" "),this[fe.attributes[me].type](fe.attributes[me],K);K.write(fe.selfClosing?" />":">")}function jsxOpeningFragment(fe,K){K.write("<>",fe)}function jsxSpreadAttribute(fe,K){K.write("{"),this.SpreadElement(fe,K),K.write("}")}function jsxText$1(fe,K){K.write(encodeJsx(fe.value).replace(/[<>{}]/g,replaceJsxChar),fe)}function encodeJsx(fe){return fe.replace(/&(?=[#a-z])/gi,"&amp;")}function replaceJsxChar(fe){return fe==="<"?"&lt;":fe===">"?"&gt;":fe==="{"?"&#123;":"&#125;"}function recmaJsx(){const fe=this.data(),K=fe.settings||(fe.settings={}),me=K.handlers||(K.handlers={});(K.plugins||(K.plugins=[])).push(acornJsx()),Object.assign(me,jsx)}function recmaStringify(fe){const K=this;this.compiler=me;function me(ge,xe){const ye={...K.data("settings"),...fe},ve=toJs(ge,{SourceMapGenerator:ye.SourceMapGenerator,filePath:xe.path||"unknown.js",handlers:ye.handlers});return xe.map=ve.map,ve.value}}function comment(fe,K){const me={type:"Block",value:fe.value};K.inherit(fe,me),K.comments.push(me);const ge={type:"JSXEmptyExpression",comments:[Object.assign({},me,{leading:!1,trailing:!0})]};K.patch(fe,ge);const xe={type:"JSXExpressionContainer",expression:ge};return K.patch(fe,xe),xe}function stringify$1(fe,K){const me={};return(fe[fe.length-1]===""?[...fe,""]:fe).join((me.padRight?" ":"")+","+(me.padLeft===!1?"":" ")).trim()}class Schema{constructor(K,me,ge){this.normal=me,this.property=K,ge&&(this.space=ge)}}Schema.prototype.normal={};Schema.prototype.property={};Schema.prototype.space=void 0;function merge(fe,K){const me={},ge={};for(const xe of fe)Object.assign(me,xe.property),Object.assign(ge,xe.normal);return new Schema(me,ge,K)}function normalize(fe){return fe.toLowerCase()}class Info{constructor(K,me){this.attribute=me,this.property=K}}Info.prototype.attribute="";Info.prototype.booleanish=!1;Info.prototype.boolean=!1;Info.prototype.commaOrSpaceSeparated=!1;Info.prototype.commaSeparated=!1;Info.prototype.defined=!1;Info.prototype.mustUseProperty=!1;Info.prototype.number=!1;Info.prototype.overloadedBoolean=!1;Info.prototype.property="";Info.prototype.spaceSeparated=!1;Info.prototype.space=void 0;let powers=0;const boolean=increment(),booleanish=increment(),overloadedBoolean=increment(),number=increment(),spaceSeparated=increment(),commaSeparated=increment(),commaOrSpaceSeparated=increment();function increment(){return 2**++powers}const types=Object.freeze(Object.defineProperty({__proto__:null,boolean,booleanish,commaOrSpaceSeparated,commaSeparated,number,overloadedBoolean,spaceSeparated},Symbol.toStringTag,{value:"Module"})),checks=Object.keys(types);class DefinedInfo extends Info{constructor(K,me,ge,xe){let ye=-1;if(super(K,me),mark$1(this,"space",xe),typeof ge=="number")for(;++ye<checks.length;){const ve=checks[ye];mark$1(this,checks[ye],(ge&types[ve])===types[ve])}}}DefinedInfo.prototype.defined=!0;function mark$1(fe,K,me){me&&(fe[K]=me)}function create$1(fe){const K={},me={};for(const[ge,xe]of Object.entries(fe.properties)){const ye=new DefinedInfo(ge,fe.transform(fe.attributes||{},ge),xe,fe.space);fe.mustUseProperty&&fe.mustUseProperty.includes(ge)&&(ye.mustUseProperty=!0),K[ge]=ye,me[normalize(ge)]=ge,me[normalize(ye.attribute)]=ge}return new Schema(K,me,fe.space)}const aria=create$1({properties:{ariaActiveDescendant:null,ariaAtomic:booleanish,ariaAutoComplete:null,ariaBusy:booleanish,ariaChecked:booleanish,ariaColCount:number,ariaColIndex:number,ariaColSpan:number,ariaControls:spaceSeparated,ariaCurrent:null,ariaDescribedBy:spaceSeparated,ariaDetails:null,ariaDisabled:booleanish,ariaDropEffect:spaceSeparated,ariaErrorMessage:null,ariaExpanded:booleanish,ariaFlowTo:spaceSeparated,ariaGrabbed:booleanish,ariaHasPopup:null,ariaHidden:booleanish,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:spaceSeparated,ariaLevel:number,ariaLive:null,ariaModal:booleanish,ariaMultiLine:booleanish,ariaMultiSelectable:booleanish,ariaOrientation:null,ariaOwns:spaceSeparated,ariaPlaceholder:null,ariaPosInSet:number,ariaPressed:booleanish,ariaReadOnly:booleanish,ariaRelevant:null,ariaRequired:booleanish,ariaRoleDescription:spaceSeparated,ariaRowCount:number,ariaRowIndex:number,ariaRowSpan:number,ariaSelected:booleanish,ariaSetSize:number,ariaSort:null,ariaValueMax:number,ariaValueMin:number,ariaValueNow:number,ariaValueText:null,role:null},transform(fe,K){return K==="role"?K:"aria-"+K.slice(4).toLowerCase()}});function caseSensitiveTransform(fe,K){return K in fe?fe[K]:K}function caseInsensitiveTransform(fe,K){return caseSensitiveTransform(fe,K.toLowerCase())}const html$4=create$1({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:commaSeparated,acceptCharset:spaceSeparated,accessKey:spaceSeparated,action:null,allow:null,allowFullScreen:boolean,allowPaymentRequest:boolean,allowUserMedia:boolean,alt:null,as:null,async:boolean,autoCapitalize:null,autoComplete:spaceSeparated,autoFocus:boolean,autoPlay:boolean,blocking:spaceSeparated,capture:null,charSet:null,checked:boolean,cite:null,className:spaceSeparated,cols:number,colSpan:null,content:null,contentEditable:booleanish,controls:boolean,controlsList:spaceSeparated,coords:number|commaSeparated,crossOrigin:null,data:null,dateTime:null,decoding:null,default:boolean,defer:boolean,dir:null,dirName:null,disabled:boolean,download:overloadedBoolean,draggable:booleanish,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:boolean,formTarget:null,headers:spaceSeparated,height:number,hidden:boolean,high:number,href:null,hrefLang:null,htmlFor:spaceSeparated,httpEquiv:spaceSeparated,id:null,imageSizes:null,imageSrcSet:null,inert:boolean,inputMode:null,integrity:null,is:null,isMap:boolean,itemId:null,itemProp:spaceSeparated,itemRef:spaceSeparated,itemScope:boolean,itemType:spaceSeparated,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:boolean,low:number,manifest:null,max:null,maxLength:number,media:null,method:null,min:null,minLength:number,multiple:boolean,muted:boolean,name:null,nonce:null,noModule:boolean,noValidate:boolean,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:boolean,optimum:number,pattern:null,ping:spaceSeparated,placeholder:null,playsInline:boolean,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:boolean,referrerPolicy:null,rel:spaceSeparated,required:boolean,reversed:boolean,rows:number,rowSpan:number,sandbox:spaceSeparated,scope:null,scoped:boolean,seamless:boolean,selected:boolean,shadowRootClonable:boolean,shadowRootDelegatesFocus:boolean,shadowRootMode:null,shape:null,size:number,sizes:null,slot:null,span:number,spellCheck:booleanish,src:null,srcDoc:null,srcLang:null,srcSet:null,start:number,step:null,style:null,tabIndex:number,target:null,title:null,translate:null,type:null,typeMustMatch:boolean,useMap:null,value:booleanish,width:number,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:spaceSeparated,axis:null,background:null,bgColor:null,border:number,borderColor:null,bottomMargin:number,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:boolean,declare:boolean,event:null,face:null,frame:null,frameBorder:null,hSpace:number,leftMargin:number,link:null,longDesc:null,lowSrc:null,marginHeight:number,marginWidth:number,noResize:boolean,noHref:boolean,noShade:boolean,noWrap:boolean,object:null,profile:null,prompt:null,rev:null,rightMargin:number,rules:null,scheme:null,scrolling:booleanish,standby:null,summary:null,text:null,topMargin:number,valueType:null,version:null,vAlign:null,vLink:null,vSpace:number,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:boolean,disableRemotePlayback:boolean,prefix:null,property:null,results:number,security:null,unselectable:null},space:"html",transform:caseInsensitiveTransform}),svg$1=create$1({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:commaOrSpaceSeparated,accentHeight:number,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:number,amplitude:number,arabicForm:null,ascent:number,attributeName:null,attributeType:null,azimuth:number,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:number,by:null,calcMode:null,capHeight:number,className:spaceSeparated,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:number,diffuseConstant:number,direction:null,display:null,dur:null,divisor:number,dominantBaseline:null,download:boolean,dx:null,dy:null,edgeMode:null,editable:null,elevation:number,enableBackground:null,end:null,event:null,exponent:number,externalResourcesRequired:null,fill:null,fillOpacity:number,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:commaSeparated,g2:commaSeparated,glyphName:commaSeparated,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:number,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:number,horizOriginX:number,horizOriginY:number,id:null,ideographic:number,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:number,k:number,k1:number,k2:number,k3:number,k4:number,kernelMatrix:commaOrSpaceSeparated,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:number,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:number,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:number,overlineThickness:number,paintOrder:null,panose1:null,path:null,pathLength:number,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:spaceSeparated,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:number,pointsAtY:number,pointsAtZ:number,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:commaOrSpaceSeparated,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:commaOrSpaceSeparated,rev:commaOrSpaceSeparated,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:commaOrSpaceSeparated,requiredFeatures:commaOrSpaceSeparated,requiredFonts:commaOrSpaceSeparated,requiredFormats:commaOrSpaceSeparated,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:number,specularExponent:number,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:number,strikethroughThickness:number,string:null,stroke:null,strokeDashArray:commaOrSpaceSeparated,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:number,strokeOpacity:number,strokeWidth:null,style:null,surfaceScale:number,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:commaOrSpaceSeparated,tabIndex:number,tableValues:null,target:null,targetX:number,targetY:number,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:commaOrSpaceSeparated,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:number,underlineThickness:number,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:number,values:null,vAlphabetic:number,vMathematical:number,vectorEffect:null,vHanging:number,vIdeographic:number,version:null,vertAdvY:number,vertOriginX:number,vertOriginY:number,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:number,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:caseSensitiveTransform}),xlink=create$1({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(fe,K){return"xlink:"+K.slice(5).toLowerCase()}}),xmlns=create$1({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:caseInsensitiveTransform}),xml=create$1({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(fe,K){return"xml:"+K.slice(3).toLowerCase()}}),hastToReact={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},cap$1=/[A-Z]/g,dash=/-[a-z]/g,valid=/^data[-\w.:]+$/i;function find(fe,K){const me=normalize(K);let ge=K,xe=Info;if(me in fe.normal)return fe.property[fe.normal[me]];if(me.length>4&&me.slice(0,4)==="data"&&valid.test(K)){if(K.charAt(4)==="-"){const ye=K.slice(5).replace(dash,camelcase);ge="data"+ye.charAt(0).toUpperCase()+ye.slice(1)}else{const ye=K.slice(4);if(!dash.test(ye)){let ve=ye.replace(cap$1,kebab);ve.charAt(0)!=="-"&&(ve="-"+ve),K="data"+ve}}xe=DefinedInfo}return new xe(ge,K)}function kebab(fe){return"-"+fe.toLowerCase()}function camelcase(fe){return fe.charAt(1).toUpperCase()}const html$3=merge([aria,html$4,xlink,xmlns,xml],"html"),svg=merge([aria,svg$1,xlink,xmlns,xml],"svg");function stringify(fe){return fe.join(" ").trim()}var cjs$1={},COMMENT_REGEX=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,NEWLINE_REGEX=/\n/g,WHITESPACE_REGEX=/^\s*/,PROPERTY_REGEX=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,COLON_REGEX=/^:\s*/,VALUE_REGEX=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,SEMICOLON_REGEX=/^[;\s]*/,TRIM_REGEX=/^\s+|\s+$/g,NEWLINE=`
`,FORWARD_SLASH="/",ASTERISK="*",EMPTY_STRING="",TYPE_COMMENT="comment",TYPE_DECLARATION="declaration",inlineStyleParser=function(fe,K){if(typeof fe!="string")throw new TypeError("First argument must be a string");if(!fe)return[];K=K||{};var me=1,ge=1;function xe(Re){var De=Re.match(NEWLINE_REGEX);De&&(me+=De.length);var Ie=Re.lastIndexOf(NEWLINE);ge=~Ie?Re.length-Ie:ge+Re.length}function ye(){var Re={line:me,column:ge};return function(De){return De.position=new ve(Re),be(),De}}function ve(Re){this.start=Re,this.end={line:me,column:ge},this.source=K.source}ve.prototype.content=fe;function _e(Re){var De=new Error(K.source+":"+me+":"+ge+": "+Re);if(De.reason=Re,De.filename=K.source,De.line=me,De.column=ge,De.source=fe,!K.silent)throw De}function Ee(Re){var De=Re.exec(fe);if(De){var Ie=De[0];return xe(Ie),fe=fe.slice(Ie.length),De}}function be(){Ee(WHITESPACE_REGEX)}function Ae(Re){var De;for(Re=Re||[];De=Se();)De!==!1&&Re.push(De);return Re}function Se(){var Re=ye();if(!(FORWARD_SLASH!=fe.charAt(0)||ASTERISK!=fe.charAt(1))){for(var De=2;EMPTY_STRING!=fe.charAt(De)&&(ASTERISK!=fe.charAt(De)||FORWARD_SLASH!=fe.charAt(De+1));)++De;if(De+=2,EMPTY_STRING===fe.charAt(De-1))return _e("End of comment missing");var Ie=fe.slice(2,De-2);return ge+=2,xe(Ie),fe=fe.slice(De),ge+=2,Re({type:TYPE_COMMENT,comment:Ie})}}function Ce(){var Re=ye(),De=Ee(PROPERTY_REGEX);if(De){if(Se(),!Ee(COLON_REGEX))return _e("property missing ':'");var Ie=Ee(VALUE_REGEX),Be=Re({type:TYPE_DECLARATION,property:trim(De[0].replace(COMMENT_REGEX,EMPTY_STRING)),value:Ie?trim(Ie[0].replace(COMMENT_REGEX,EMPTY_STRING)):EMPTY_STRING});return Ee(SEMICOLON_REGEX),Be}}function Te(){var Re=[];Ae(Re);for(var De;De=Ce();)De!==!1&&(Re.push(De),Ae(Re));return Re}return be(),Te()};function trim(fe){return fe?fe.replace(TRIM_REGEX,EMPTY_STRING):EMPTY_STRING}var __importDefault$1=commonjsGlobal&&commonjsGlobal.__importDefault||function(fe){return fe&&fe.__esModule?fe:{default:fe}};Object.defineProperty(cjs$1,"__esModule",{value:!0});cjs$1.default=StyleToObject;var inline_style_parser_1=__importDefault$1(inlineStyleParser);function StyleToObject(fe,K){var me=null;if(!fe||typeof fe!="string")return me;var ge=(0,inline_style_parser_1.default)(fe),xe=typeof K=="function";return ge.forEach(function(ye){if(ye.type==="declaration"){var ve=ye.property,_e=ye.value;xe?K(ve,_e,ye):_e&&(me=me||{},me[ve]=_e)}}),me}var utilities={};Object.defineProperty(utilities,"__esModule",{value:!0});utilities.camelCase=void 0;var CUSTOM_PROPERTY_REGEX=/^--[a-zA-Z0-9_-]+$/,HYPHEN_REGEX=/-([a-z])/g,NO_HYPHEN_REGEX=/^[^-]+$/,VENDOR_PREFIX_REGEX=/^-(webkit|moz|ms|o|khtml)-/,MS_VENDOR_PREFIX_REGEX=/^-(ms)-/,skipCamelCase=function(fe){return!fe||NO_HYPHEN_REGEX.test(fe)||CUSTOM_PROPERTY_REGEX.test(fe)},capitalize=function(fe,K){return K.toUpperCase()},trimHyphen=function(fe,K){return"".concat(K,"-")},camelCase=function(fe,K){return K===void 0&&(K={}),skipCamelCase(fe)?fe:(fe=fe.toLowerCase(),K.reactCompat?fe=fe.replace(MS_VENDOR_PREFIX_REGEX,trimHyphen):fe=fe.replace(VENDOR_PREFIX_REGEX,trimHyphen),fe.replace(HYPHEN_REGEX,capitalize))};utilities.camelCase=camelCase;var __importDefault=commonjsGlobal&&commonjsGlobal.__importDefault||function(fe){return fe&&fe.__esModule?fe:{default:fe}},style_to_object_1=__importDefault(cjs$1),utilities_1=utilities;function StyleToJS(fe,K){var me={};return!fe||typeof fe!="string"||(0,style_to_object_1.default)(fe,function(ge,xe){ge&&xe&&(me[(0,utilities_1.camelCase)(ge,K)]=xe)}),me}StyleToJS.default=StyleToJS;var cjs=StyleToJS;const styleToJs=getDefaultExportFromCjs(cjs),own$7={}.hasOwnProperty,cap=/[A-Z]/g,tableCellElement=new Set(["td","th"]);function element$1(fe,K){const me=K.schema;let ge=me;const xe=fe.properties||{};me.space==="html"&&fe.tagName.toLowerCase()==="svg"&&(ge=svg,K.schema=ge);const ye=K.all(fe),ve=[];let _e,Ee,be;for(_e in xe)if(own$7.call(xe,_e)){let Se=xe[_e];const Ce=find(ge,_e);let Te;if(Se==null||Se===!1||typeof Se=="number"&&Number.isNaN(Se)||!Se&&Ce.boolean)continue;if(_e=K.elementAttributeNameCase==="react"&&Ce.space?hastToReact[Ce.property]||Ce.property:Ce.attribute,Array.isArray(Se)&&(Se=Ce.commaSeparated?stringify$1(Se):stringify(Se)),_e==="style"){let Re=typeof Se=="object"?Se:parseStyle(String(Se),fe.tagName);K.stylePropertyNameCase==="css"&&(Re=transformStylesToCssCasing(Re));const De=[];let Ie;for(Ie in Re)own$7.call(Re,Ie)&&De.push({type:"Property",method:!1,shorthand:!1,computed:!1,key:name$1(Ie)?{type:"Identifier",name:Ie}:{type:"Literal",value:Ie},value:{type:"Literal",value:String(Re[Ie])},kind:"init"});be=De,Te={type:"JSXExpressionContainer",expression:{type:"ObjectExpression",properties:De}}}else if(Se===!0)Te=null;else if(K.tableCellAlignToStyle&&tableCellElement.has(fe.tagName)&&_e==="align"){Ee=String(Se);continue}else Te={type:"Literal",value:String(Se)};name$1(_e,{jsx:!0})?ve.push({type:"JSXAttribute",name:{type:"JSXIdentifier",name:_e},value:Te}):ve.push({type:"JSXSpreadAttribute",argument:{type:"ObjectExpression",properties:[{type:"Property",method:!1,shorthand:!1,computed:!1,key:{type:"Literal",value:String(_e)},value:Te||{type:"Literal",value:!0},kind:"init"}]}})}if(Ee!==void 0){be||(be=[],ve.push({type:"JSXAttribute",name:{type:"JSXIdentifier",name:"style"},value:{type:"JSXExpressionContainer",expression:{type:"ObjectExpression",properties:be}}}));const Se=K.stylePropertyNameCase==="css"?transformStyleToCssCasing("textAlign"):"textAlign";be.push({type:"Property",method:!1,shorthand:!1,computed:!1,key:name$1(Se)?{type:"Identifier",name:Se}:{type:"Literal",value:Se},value:{type:"Literal",value:Ee},kind:"init"})}K.schema=me;const Ae={type:"JSXElement",openingElement:{type:"JSXOpeningElement",attributes:ve,name:K.createJsxElementName(fe.tagName),selfClosing:ye.length===0},closingElement:ye.length>0?{type:"JSXClosingElement",name:K.createJsxElementName(fe.tagName)}:null,children:ye};return K.inherit(fe,Ae),Ae}function parseStyle(fe,K){try{return styleToJs(fe,{reactCompat:!0})}catch(me){const ge=me;throw new Error("Could not parse `style` attribute on `"+K+"`",{cause:ge})}}function transformStylesToCssCasing(fe){const K={};let me;for(me in fe)own$7.call(fe,me)&&(K[transformStyleToCssCasing(me)]=fe[me]);return K}function transformStyleToCssCasing(fe){let K=fe.replace(cap,toDash);return K.slice(0,3)==="ms-"&&(K="-"+K),K}function toDash(fe){return"-"+fe.toLowerCase()}const own$6={}.hasOwnProperty,emptyComments=[];function attachComments(fe,K){const me=K?[...K].sort(compare):emptyComments;me.length>0&&walk$1(fe,{comments:me,index:0})}function walk$1(fe,K){if(K.index===K.comments.length)return;const me=[],ge=[];let xe;for(xe in fe)if(own$6.call(fe,xe)){const ve=fe[xe];if(ve&&typeof ve=="object"&&xe!=="comments")if(Array.isArray(ve)){let _e=-1;for(;++_e<ve.length;)ve[_e]&&typeof ve[_e].type=="string"&&me.push(ve[_e])}else typeof ve.type=="string"&&me.push(ve)}me.sort(compare),ge.push(...slice(K,fe,!1,{leading:!0,trailing:!1}));let ye=-1;for(;++ye<me.length;)walk$1(me[ye],K);ge.push(...slice(K,fe,!0,{leading:!1,trailing:me.length>0})),ge.length>0&&(fe.comments=ge)}function slice(fe,K,me,ge){const xe=[];for(;fe.comments[fe.index]&&compare(fe.comments[fe.index],K,me)<1;)xe.push(Object.assign({},fe.comments[fe.index++],ge));return xe}function compare(fe,K,me){const ge=me?"end":"start";return fe.range&&K.range?fe.range[0]-K.range[me?1:0]:fe.loc&&fe.loc.start&&K.loc&&K.loc[ge]?fe.loc.start.line-K.loc[ge].line||fe.loc.start.column-K.loc[ge].column:"start"in fe&&ge in K?fe.start-K[ge]:Number.NaN}function mdxExpression$1(fe,K){const me=fe.data&&fe.data.estree,ge=me&&me.comments||[];let xe;me&&(K.comments.push(...ge),attachComments(me,me.comments),xe=me.body[0]&&me.body[0].type==="ExpressionStatement"&&me.body[0].expression||void 0),xe||(xe={type:"JSXEmptyExpression"},K.patch(fe,xe));const ye={type:"JSXExpressionContainer",expression:xe};return K.inherit(fe,ye),ye}function mdxJsxElement(fe,K){const me=K.schema;let ge=me;const xe=fe.attributes||[];let ye=-1;fe.name&&me.space==="html"&&fe.name.toLowerCase()==="svg"&&(ge=svg,K.schema=ge);const ve=K.all(fe),_e=[];for(;++ye<xe.length;){const be=xe[ye],Ae=be.value;let Se;if(be.type==="mdxJsxAttribute"){if(Ae==null)Se=null;else if(typeof Ae=="object"){const Te=Ae.data&&Ae.data.estree,Re=Te&&Te.comments||[];let De;Te&&(K.comments.push(...Re),attachComments(Te,Te.comments),De=Te.body[0]&&Te.body[0].type==="ExpressionStatement"&&Te.body[0].expression||void 0),Se={type:"JSXExpressionContainer",expression:De||{type:"JSXEmptyExpression"}},K.inherit(Ae,Se)}else Se={type:"Literal",value:String(Ae)};const Ce={type:"JSXAttribute",name:K.createJsxAttributeName(be.name),value:Se};K.inherit(be,Ce),_e.push(Ce)}else{const Ce=be.data&&be.data.estree,Te=Ce&&Ce.comments||[];let Re;Ce&&(K.comments.push(...Te),attachComments(Ce,Ce.comments),Re=Ce.body[0]&&Ce.body[0].type==="ExpressionStatement"&&Ce.body[0].expression&&Ce.body[0].expression.type==="ObjectExpression"&&Ce.body[0].expression.properties&&Ce.body[0].expression.properties[0]&&Ce.body[0].expression.properties[0].type==="SpreadElement"&&Ce.body[0].expression.properties[0].argument||void 0);const De={type:"JSXSpreadAttribute",argument:Re||{type:"ObjectExpression",properties:[]}};K.inherit(be,De),_e.push(De)}}K.schema=me;const Ee=fe.name?{type:"JSXElement",openingElement:{type:"JSXOpeningElement",attributes:_e,name:K.createJsxElementName(fe.name),selfClosing:ve.length===0},closingElement:ve.length>0?{type:"JSXClosingElement",name:K.createJsxElementName(fe.name)}:null,children:ve}:{type:"JSXFragment",openingFragment:{type:"JSXOpeningFragment"},closingFragment:{type:"JSXClosingFragment"},children:ve};return K.inherit(fe,Ee),Ee}function mdxjsEsm$1(fe,K){const me=fe.data&&fe.data.estree,ge=me&&me.comments||[];me&&(K.comments.push(...ge),attachComments(me,ge),K.esm.push(...me.body))}const re$1=/[ \t\n\f\r]/g;function whitespace(fe){return typeof fe=="object"?fe.type==="text"?empty$2(fe.value):!1:empty$2(fe)}function empty$2(fe){return fe.replace(re$1,"")===""}function root$3(fe,K){const me=K.all(fe),ge=[];let xe=-1,ye;for(;++xe<me.length;){const _e=me[xe];_e.type==="JSXExpressionContainer"&&_e.expression.type==="Literal"&&whitespace(String(_e.expression.value))?ye&&ye.push(_e):(ye&&ge.push(...ye),ge.push(_e),ye=[])}const ve={type:"JSXFragment",openingFragment:{type:"JSXOpeningFragment"},closingFragment:{type:"JSXClosingFragment"},children:ge};return K.inherit(fe,ve),ve}function text$5(fe,K){const me=String(fe.value||"");if(me){const ge={type:"Literal",value:me};K.inherit(fe,ge);const xe={type:"JSXExpressionContainer",expression:ge};return K.patch(fe,xe),xe}}const handlers$1={comment,doctype:ignore$1,element:element$1,mdxFlowExpression:mdxExpression$1,mdxJsxFlowElement:mdxJsxElement,mdxJsxTextElement:mdxJsxElement,mdxTextExpression:mdxExpression$1,mdxjsEsm:mdxjsEsm$1,root:root$3,text:text$5};function ignore$1(){}const pointEnd=point$1("end"),pointStart=point$1("start");function point$1(fe){return K;function K(me){const ge=me&&me.position&&me.position[fe]||{};if(typeof ge.line=="number"&&ge.line>0&&typeof ge.column=="number"&&ge.column>0)return{line:ge.line,column:ge.column,offset:typeof ge.offset=="number"&&ge.offset>-1?ge.offset:void 0}}}function position(fe){const K=pointStart(fe),me=pointEnd(fe);if(K&&me)return{start:K,end:me}}const own$5={}.hasOwnProperty;function zwitch(fe,K){const me=K||{};function ge(xe,...ye){let ve=ge.invalid;const _e=ge.handlers;if(xe&&own$5.call(xe,fe)){const Ee=String(xe[fe]);ve=own$5.call(_e,Ee)?_e[Ee]:ge.unknown}if(ve)return ve.call(this,xe,...ye)}return ge.handlers=me.handlers||{},ge.invalid=me.invalid,ge.unknown=me.unknown,ge}const own$4={}.hasOwnProperty,tableElements=new Set(["table","tbody","thead","tfoot","tr"]);function createState$1(fe){const K=zwitch("type",{invalid,unknown,handlers:{...handlers$1,...fe.handlers}});return{elementAttributeNameCase:fe.elementAttributeNameCase||"react",schema:fe.space==="svg"?svg:html$3,stylePropertyNameCase:fe.stylePropertyNameCase||"dom",tableCellAlignToStyle:fe.tableCellAlignToStyle!==!1,comments:[],esm:[],all:all$2,createJsxAttributeName,createJsxElementName,handle:me,inherit,patch:patch$1};function me(ge){return K(ge,this)}}function invalid(fe){throw new Error("Cannot handle value `"+fe+"`, expected node")}function unknown(fe){throw new Error("Cannot handle unknown node `"+fe.type+"`")}function all$2(fe){const K=fe.children||[];let me=-1;const ge=[],xe=this.schema.space==="html"&&fe.type==="element"&&tableElements.has(fe.tagName.toLowerCase());for(;++me<K.length;){const ye=K[me];if(xe&&ye.type==="text"&&ye.value===`
`)continue;const ve=this.handle(ye);Array.isArray(ve)?ge.push(...ve):ve&&ge.push(ve)}return ge}function inherit(fe,K){const me=fe.data;let ge,xe;if(patch$1(fe,K),me){for(xe in me)own$4.call(me,xe)&&xe!=="estree"&&(ge||(ge={}),ge[xe]=me[xe]);ge&&(K.data=ge)}}function patch$1(fe,K){const me=position(fe);me&&me.start.offset!==void 0&&me.end.offset!==void 0&&(K.start=me.start.offset,K.end=me.end.offset,K.loc={start:{line:me.start.line,column:me.start.column-1},end:{line:me.end.line,column:me.end.column-1}},K.range=[me.start.offset,me.end.offset])}function createJsxAttributeName(fe){const K=createJsxNameFromString(fe);if(K.type==="JSXMemberExpression")throw new Error("Member expressions in attribute names are not supported");return K}function createJsxElementName(fe){return createJsxNameFromString(fe)}function createJsxNameFromString(fe){if(fe.includes(".")){const K=fe.split(".");let me=K.shift(),ge={type:"JSXIdentifier",name:me};for(;me=K.shift();)ge={type:"JSXMemberExpression",object:ge,property:{type:"JSXIdentifier",name:me}};return ge}if(fe.includes(":")){const K=fe.split(":");return{type:"JSXNamespacedName",namespace:{type:"JSXIdentifier",name:K[0]},name:{type:"JSXIdentifier",name:K[1]}}}return{type:"JSXIdentifier",name:fe}}function toEstree(fe,K){const me=createState$1(K||{});let ge=me.handle(fe);const xe=me.esm;if(ge){ge.type!=="JSXFragment"&&ge.type!=="JSXElement"&&(ge={type:"JSXFragment",openingFragment:{type:"JSXOpeningFragment"},closingFragment:{type:"JSXClosingFragment"},children:[ge]},me.patch(fe,ge));const ve={type:"ExpressionStatement",expression:ge};me.patch(fe,ve),xe.push(ve)}const ye={type:"Program",body:xe,sourceType:"module",comments:me.comments};return me.patch(fe,ye),ye}function rehypeRecma(fe){return function(K){return toEstree(K,fe)}}function mdxExpressionFromMarkdown(){return{enter:{mdxFlowExpression:enterMdxFlowExpression,mdxTextExpression:enterMdxTextExpression},exit:{mdxFlowExpression:exitMdxExpression,mdxFlowExpressionChunk:exitMdxExpressionData,mdxTextExpression:exitMdxExpression,mdxTextExpressionChunk:exitMdxExpressionData}}}function mdxExpressionToMarkdown(){return{handlers:{mdxFlowExpression:handleMdxExpression,mdxTextExpression:handleMdxExpression},unsafe:[{character:"{",inConstruct:["phrasing"]},{atBreak:!0,character:"{"}]}}function enterMdxFlowExpression(fe){this.enter({type:"mdxFlowExpression",value:""},fe),this.buffer()}function enterMdxTextExpression(fe){this.enter({type:"mdxTextExpression",value:""},fe),this.buffer()}function exitMdxExpression(fe){const K=this.resume(),me=fe.estree,ge=this.stack[this.stack.length-1];ge.type==="mdxFlowExpression"||ge.type,this.exit(fe),ge.value=K,me&&(ge.data={estree:me})}function exitMdxExpressionData(fe){this.config.enter.data.call(this,fe),this.config.exit.data.call(this,fe)}function handleMdxExpression(fe,K,me){const ge=fe.value||"";return"{"+me.indentLines(ge,function(ye,ve,_e){return(ve===0||_e?"":"  ")+ye})+"}"}function ccount(fe,K){const me=String(fe);if(typeof K!="string")throw new TypeError("Expected character");let ge=0,xe=me.indexOf(K);for(;xe!==-1;)ge++,xe=me.indexOf(K,xe+K.length);return ge}const characterEntitiesLegacy=["AElig","AMP","Aacute","Acirc","Agrave","Aring","Atilde","Auml","COPY","Ccedil","ETH","Eacute","Ecirc","Egrave","Euml","GT","Iacute","Icirc","Igrave","Iuml","LT","Ntilde","Oacute","Ocirc","Ograve","Oslash","Otilde","Ouml","QUOT","REG","THORN","Uacute","Ucirc","Ugrave","Uuml","Yacute","aacute","acirc","acute","aelig","agrave","amp","aring","atilde","auml","brvbar","ccedil","cedil","cent","copy","curren","deg","divide","eacute","ecirc","egrave","eth","euml","frac12","frac14","frac34","gt","iacute","icirc","iexcl","igrave","iquest","iuml","laquo","lt","macr","micro","middot","nbsp","not","ntilde","oacute","ocirc","ograve","ordf","ordm","oslash","otilde","ouml","para","plusmn","pound","quot","raquo","reg","sect","shy","sup1","sup2","sup3","szlig","thorn","times","uacute","ucirc","ugrave","uml","uuml","yacute","yen","yuml"],characterReferenceInvalid={0:"�",128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};function isDecimal(fe){const K=typeof fe=="string"?fe.charCodeAt(0):fe;return K>=48&&K<=57}function isHexadecimal(fe){const K=typeof fe=="string"?fe.charCodeAt(0):fe;return K>=97&&K<=102||K>=65&&K<=70||K>=48&&K<=57}function isAlphabetical(fe){const K=typeof fe=="string"?fe.charCodeAt(0):fe;return K>=97&&K<=122||K>=65&&K<=90}function isAlphanumerical(fe){return isAlphabetical(fe)||isDecimal(fe)}const element=document.createElement("i");function decodeNamedCharacterReference(fe){const K="&"+fe+";";element.innerHTML=K;const me=element.textContent;return me.charCodeAt(me.length-1)===59&&fe!=="semi"||me===K?!1:me}const messages=["","Named character references must be terminated by a semicolon","Numeric character references must be terminated by a semicolon","Named character references cannot be empty","Numeric character references cannot be empty","Named character references must be known","Numeric character references cannot be disallowed","Numeric character references cannot be outside the permissible Unicode range"];function parseEntities(fe,K){const me=K||{},ge=typeof me.additional=="string"?me.additional.charCodeAt(0):me.additional,xe=[];let ye=0,ve=-1,_e="",Ee,be;me.position&&("start"in me.position||"indent"in me.position?(be=me.position.indent,Ee=me.position.start):Ee=me.position);let Ae=(Ee?Ee.line:0)||1,Se=(Ee?Ee.column:0)||1,Ce=Re(),Te;for(ye--;++ye<=fe.length;)if(Te===10&&(Se=(be?be[ve]:0)||1),Te=fe.charCodeAt(ye),Te===38){const Be=fe.charCodeAt(ye+1);if(Be===9||Be===10||Be===12||Be===32||Be===38||Be===60||Number.isNaN(Be)||ge&&Be===ge){_e+=String.fromCharCode(Te),Se++;continue}const Le=ye+1;let Oe=Le,Fe=Le,Ue;if(Be===35){Fe=++Oe;const Qe=fe.charCodeAt(Fe);Qe===88||Qe===120?(Ue="hexadecimal",Fe=++Oe):Ue="decimal"}else Ue="named";let Ne="",He="",ze="";const je=Ue==="named"?isAlphanumerical:Ue==="decimal"?isDecimal:isHexadecimal;for(Fe--;++Fe<=fe.length;){const Qe=fe.charCodeAt(Fe);if(!je(Qe))break;ze+=String.fromCharCode(Qe),Ue==="named"&&characterEntitiesLegacy.includes(ze)&&(Ne=ze,He=decodeNamedCharacterReference(ze))}let Ge=fe.charCodeAt(Fe)===59;if(Ge){Fe++;const Qe=Ue==="named"?decodeNamedCharacterReference(ze):!1;Qe&&(Ne=ze,He=Qe)}let Xe=1+Fe-Le,qe="";if(!(!Ge&&me.nonTerminated===!1))if(!ze)Ue!=="named"&&De(4,Xe);else if(Ue==="named"){if(Ge&&!He)De(5,1);else if(Ne!==ze&&(Fe=Oe+Ne.length,Xe=1+Fe-Oe,Ge=!1),!Ge){const Qe=Ne?1:3;if(me.attribute){const nt=fe.charCodeAt(Fe);nt===61?(De(Qe,Xe),He=""):isAlphanumerical(nt)?He="":De(Qe,Xe)}else De(Qe,Xe)}qe=He}else{Ge||De(2,Xe);let Qe=Number.parseInt(ze,Ue==="hexadecimal"?16:10);if(prohibited(Qe))De(7,Xe),qe="�";else if(Qe in characterReferenceInvalid)De(6,Xe),qe=characterReferenceInvalid[Qe];else{let nt="";disallowed(Qe)&&De(6,Xe),Qe>65535&&(Qe-=65536,nt+=String.fromCharCode(Qe>>>10|55296),Qe=56320|Qe&1023),qe=nt+String.fromCharCode(Qe)}}if(qe){Ie(),Ce=Re(),ye=Fe-1,Se+=Fe-Le+1,xe.push(qe);const Qe=Re();Qe.offset++,me.reference&&me.reference.call(me.referenceContext||void 0,qe,{start:Ce,end:Qe},fe.slice(Le-1,Fe)),Ce=Qe}else ze=fe.slice(Le-1,Fe),_e+=ze,Se+=ze.length,ye=Fe-1}else Te===10&&(Ae++,ve++,Se=0),Number.isNaN(Te)?Ie():(_e+=String.fromCharCode(Te),Se++);return xe.join("");function Re(){return{line:Ae,column:Se,offset:ye+((Ee?Ee.offset:0)||0)}}function De(Be,Le){let Oe;me.warning&&(Oe=Re(),Oe.column+=Le,Oe.offset+=Le,me.warning.call(me.warningContext||void 0,messages[Be],Oe,Be))}function Ie(){_e&&(xe.push(_e),me.text&&me.text.call(me.textContext||void 0,_e,{start:Ce,end:Re()}),_e="")}}function prohibited(fe){return fe>=55296&&fe<=57343||fe>1114111}function disallowed(fe){return fe>=1&&fe<=8||fe===11||fe>=13&&fe<=31||fe>=127&&fe<=159||fe>=64976&&fe<=65007||(fe&65535)===65535||(fe&65535)===65534}const defaultSubsetRegex=/["&'<>`]/g,surrogatePairsRegex=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,controlCharactersRegex=/[\x01-\t\v\f\x0E-\x1F\x7F\x81\x8D\x8F\x90\x9D\xA0-\uFFFF]/g,regexEscapeRegex=/[|\\{}()[\]^$+*?.]/g,subsetToRegexCache=new WeakMap;function core(fe,K){if(fe=fe.replace(K.subset?charactersToExpressionCached(K.subset):defaultSubsetRegex,ge),K.subset||K.escapeOnly)return fe;return fe.replace(surrogatePairsRegex,me).replace(controlCharactersRegex,ge);function me(xe,ye,ve){return K.format((xe.charCodeAt(0)-55296)*1024+xe.charCodeAt(1)-56320+65536,ve.charCodeAt(ye+2),K)}function ge(xe,ye,ve){return K.format(xe.charCodeAt(0),ve.charCodeAt(ye+1),K)}}function charactersToExpressionCached(fe){let K=subsetToRegexCache.get(fe);return K||(K=charactersToExpression(fe),subsetToRegexCache.set(fe,K)),K}function charactersToExpression(fe){const K=[];let me=-1;for(;++me<fe.length;)K.push(fe[me].replace(regexEscapeRegex,"\\$&"));return new RegExp("(?:"+K.join("|")+")","g")}function formatBasic(fe){return"&#x"+fe.toString(16).toUpperCase()+";"}function stringifyEntitiesLight(fe,K){return core(fe,Object.assign({format:formatBasic},K))}const indent$1="  ";function mdxJsxFromMarkdown(){return{canContainEols:["mdxJsxTextElement"],enter:{mdxJsxFlowTag:ge,mdxJsxFlowTagClosingMarker:xe,mdxJsxFlowTagAttribute:Se,mdxJsxFlowTagExpressionAttribute:Ce,mdxJsxFlowTagAttributeValueLiteral:fe,mdxJsxFlowTagAttributeValueExpression:fe,mdxJsxFlowTagSelfClosingMarker:ve,mdxJsxTextTag:ge,mdxJsxTextTagClosingMarker:xe,mdxJsxTextTagAttribute:Se,mdxJsxTextTagExpressionAttribute:Ce,mdxJsxTextTagAttributeValueLiteral:fe,mdxJsxTextTagAttributeValueExpression:fe,mdxJsxTextTagSelfClosingMarker:ve},exit:{mdxJsxFlowTagClosingMarker:_e,mdxJsxFlowTagNamePrimary:Ee,mdxJsxFlowTagNameMember:be,mdxJsxFlowTagNameLocal:Ae,mdxJsxFlowTagExpressionAttribute:Te,mdxJsxFlowTagExpressionAttributeValue:me,mdxJsxFlowTagAttributeNamePrimary:Re,mdxJsxFlowTagAttributeNameLocal:De,mdxJsxFlowTagAttributeValueLiteral:Ie,mdxJsxFlowTagAttributeValueLiteralValue:me,mdxJsxFlowTagAttributeValueExpression:Be,mdxJsxFlowTagAttributeValueExpressionValue:me,mdxJsxFlowTagSelfClosingMarker:Le,mdxJsxFlowTag:Oe,mdxJsxTextTagClosingMarker:_e,mdxJsxTextTagNamePrimary:Ee,mdxJsxTextTagNameMember:be,mdxJsxTextTagNameLocal:Ae,mdxJsxTextTagExpressionAttribute:Te,mdxJsxTextTagExpressionAttributeValue:me,mdxJsxTextTagAttributeNamePrimary:Re,mdxJsxTextTagAttributeNameLocal:De,mdxJsxTextTagAttributeValueLiteral:Ie,mdxJsxTextTagAttributeValueLiteralValue:me,mdxJsxTextTagAttributeValueExpression:Be,mdxJsxTextTagAttributeValueExpressionValue:me,mdxJsxTextTagSelfClosingMarker:Le,mdxJsxTextTag:Oe}};function fe(){this.buffer()}function K(He){return{line:He.line,column:He.column,offset:He.offset}}function me(He){this.config.enter.data.call(this,He),this.config.exit.data.call(this,He)}function ge(He){const ze={name:void 0,attributes:[],close:!1,selfClosing:!1,start:He.start,end:He.end};this.data.mdxJsxTagStack||(this.data.mdxJsxTagStack=[]),this.data.mdxJsxTag=ze,this.buffer()}function xe(He){if(this.data.mdxJsxTagStack.length===0)throw new VFileMessage("Unexpected closing slash `/` in tag, expected an open tag first",{start:He.start,end:He.end},"mdast-util-mdx-jsx:unexpected-closing-slash")}function ye(He){if(this.data.mdxJsxTag.close)throw new VFileMessage("Unexpected attribute in closing tag, expected the end of the tag",{start:He.start,end:He.end},"mdast-util-mdx-jsx:unexpected-attribute")}function ve(He){if(this.data.mdxJsxTag.close)throw new VFileMessage("Unexpected self-closing slash `/` in closing tag, expected the end of the tag",{start:He.start,end:He.end},"mdast-util-mdx-jsx:unexpected-self-closing-slash")}function _e(){const He=this.data.mdxJsxTag;He.close=!0}function Ee(He){const ze=this.data.mdxJsxTag;ze.name=this.sliceSerialize(He)}function be(He){const ze=this.data.mdxJsxTag;ze.name+="."+this.sliceSerialize(He)}function Ae(He){const ze=this.data.mdxJsxTag;ze.name+=":"+this.sliceSerialize(He)}function Se(He){const ze=this.data.mdxJsxTag;ye.call(this,He),ze.attributes.push({type:"mdxJsxAttribute",name:"",value:null,position:{start:K(He.start),end:void 0}})}function Ce(He){const ze=this.data.mdxJsxTag;ye.call(this,He),ze.attributes.push({type:"mdxJsxExpressionAttribute",value:"",position:{start:K(He.start),end:void 0}}),this.buffer()}function Te(He){const ze=this.data.mdxJsxTag,je=ze.attributes[ze.attributes.length-1];je.type;const Ge=He.estree;je.value=this.resume(),je.position,je.position.end=K(He.end),Ge&&(je.data={estree:Ge})}function Re(He){const ze=this.data.mdxJsxTag,je=ze.attributes[ze.attributes.length-1];je.type,je.name=this.sliceSerialize(He),je.position,je.position.end=K(He.end)}function De(He){const ze=this.data.mdxJsxTag,je=ze.attributes[ze.attributes.length-1];je.type,je.name+=":"+this.sliceSerialize(He),je.position,je.position.end=K(He.end)}function Ie(He){const ze=this.data.mdxJsxTag,je=ze.attributes[ze.attributes.length-1];je.value=parseEntities(this.resume(),{nonTerminated:!1}),je.position,je.position.end=K(He.end)}function Be(He){const ze=this.data.mdxJsxTag,je=ze.attributes[ze.attributes.length-1];je.type;const Ge={type:"mdxJsxAttributeValueExpression",value:this.resume()},Xe=He.estree;Xe&&(Ge.data={estree:Xe}),je.value=Ge,je.position,je.position.end=K(He.end)}function Le(){const He=this.data.mdxJsxTag;He.selfClosing=!0}function Oe(He){const ze=this.data.mdxJsxTag,je=this.data.mdxJsxTagStack,Ge=je[je.length-1];if(ze.close&&Ge.name!==ze.name)throw new VFileMessage("Unexpected closing tag `"+Ne(ze)+"`, expected corresponding closing tag for `"+Ne(Ge)+"` ("+stringifyPosition(Ge)+")",{start:He.start,end:He.end},"mdast-util-mdx-jsx:end-tag-mismatch");this.resume(),ze.close?je.pop():this.enter({type:He.type==="mdxJsxTextTag"?"mdxJsxTextElement":"mdxJsxFlowElement",name:ze.name||null,attributes:ze.attributes,children:[]},He,Fe),ze.selfClosing||ze.close?this.exit(He,Ue):je.push(ze)}function Fe(He,ze){const je=this.data.mdxJsxTagStack,Ge=je[je.length-1],Xe=He?" before the end of `"+He.type+"`":"",qe=He?{start:He.start,end:He.end}:void 0;throw new VFileMessage("Expected a closing tag for `"+Ne(Ge)+"` ("+stringifyPosition({start:ze.start,end:ze.end})+")"+Xe,qe,"mdast-util-mdx-jsx:end-tag-mismatch")}function Ue(He,ze){const je=this.data.mdxJsxTag;throw new VFileMessage("Expected the closing tag `"+Ne(je)+"` either after the end of `"+ze.type+"` ("+stringifyPosition(ze.end)+") or another opening tag after the start of `"+ze.type+"` ("+stringifyPosition(ze.start)+")",{start:He.start,end:He.end},"mdast-util-mdx-jsx:end-tag-mismatch")}function Ne(He){return"<"+(He.close?"/":"")+(He.name||"")+">"}}function mdxJsxToMarkdown(fe){const K=fe||{},me=K.quote||'"',ge=K.quoteSmart||!1,xe=K.tightSelfClosing||!1,ye=K.printWidth||Number.POSITIVE_INFINITY,ve=me==='"'?"'":'"';if(me!=='"'&&me!=="'")throw new Error("Cannot serialize attribute values with `"+me+"` for `options.quote`, expected `\"`, or `'`");return _e.peek=peekElement,{handlers:{mdxJsxFlowElement:_e,mdxJsxTextElement:_e},unsafe:[{character:"<",inConstruct:["phrasing"]},{atBreak:!0,character:"<"}],fences:!0,resourceLink:!0};function _e(Ee,be,Ae,Se){const Ce=Ee.type==="mdxJsxFlowElement",Te=Ee.name?!Ee.children||Ee.children.length===0:!1,Re=inferDepth(Ae),De=createIndent(Re),Ie=Ae.createTracker(Se),Be=Ae.createTracker(Se),Le=[],Oe=(Ce?De:"")+"<"+(Ee.name||""),Fe=Ae.enter(Ee.type);if(Ie.move(Oe),Be.move(Oe),Ee.attributes&&Ee.attributes.length>0){if(!Ee.name)throw new Error("Cannot serialize fragment w/ attributes");let je=-1;for(;++je<Ee.attributes.length;){const Ge=Ee.attributes[je];let Xe;if(Ge.type==="mdxJsxExpressionAttribute")Xe="{"+(Ge.value||"")+"}";else{if(!Ge.name)throw new Error("Cannot serialize attribute w/o name");const qe=Ge.value,Qe=Ge.name;let nt="";if(qe!=null)if(typeof qe=="object")nt="{"+(qe.value||"")+"}";else{const Nt=ge&&ccount(qe,me)>ccount(qe,ve)?ve:me;nt=Nt+stringifyEntitiesLight(qe,{subset:[Nt]})+Nt}Xe=Qe+(nt?"=":"")+nt}Le.push(Xe)}}let Ue=!1;const Ne=Le.join(" ");Ce&&(/\r?\n|\r/.test(Ne)||Ie.current().now.column+Ne.length+(Te?xe?2:3:1)>ye)&&(Ue=!0);let He=Ie,ze=Oe;if(Ue){He=Be;let je=-1;for(;++je<Le.length;)Le[je]=De+indent$1+Le[je];ze+=He.move(`
`+Le.join(`
`)+`
`+De)}else Ne&&(ze+=He.move(" "+Ne));return Te&&(ze+=He.move((xe||Ue?"":" ")+"/")),ze+=He.move(">"),Ee.children&&Ee.children.length>0&&(Ee.type==="mdxJsxTextElement"?ze+=He.move(Ae.containerPhrasing(Ee,{...He.current(),before:">",after:"<"})):(He.shift(2),ze+=He.move(`
`),ze+=He.move(containerFlow(Ee,Ae,He.current())),ze+=He.move(`
`))),Te||(ze+=He.move((Ce?De:"")+"</"+(Ee.name||"")+">")),Fe(),ze}}function containerFlow(fe,K,me){const ge=K.indexStack,xe=fe.children,ye=K.createTracker(me),ve=createIndent(inferDepth(K)),_e=[];let Ee=-1;for(ge.push(-1);++Ee<xe.length;){const be=xe[Ee];ge[ge.length-1]=Ee;const Ae={before:`
`,after:`
`,...ye.current()},Se=K.handle(be,fe,K,Ae),Ce=be.type==="mdxJsxFlowElement"?Se:K.indentLines(Se,function(Te,Re,De){return(De?"":ve)+Te});_e.push(ye.move(Ce)),be.type!=="list"&&(K.bulletLastUsed=void 0),Ee<xe.length-1&&_e.push(ye.move(`

`))}return ge.pop(),_e.join("")}function inferDepth(fe){let K=0,me=fe.stack.length;for(;--me>-1;){const ge=fe.stack[me];if(ge==="blockquote"||ge==="listItem")break;ge==="mdxJsxFlowElement"&&K++}return K}function createIndent(fe){return indent$1.repeat(fe)}function peekElement(){return"<"}function mdxjsEsmFromMarkdown(){return{enter:{mdxjsEsm:enterMdxjsEsm},exit:{mdxjsEsm:exitMdxjsEsm,mdxjsEsmData:exitMdxjsEsmData}}}function mdxjsEsmToMarkdown(){return{handlers:{mdxjsEsm:handleMdxjsEsm}}}function enterMdxjsEsm(fe){this.enter({type:"mdxjsEsm",value:""},fe),this.buffer()}function exitMdxjsEsm(fe){const K=this.resume(),me=this.stack[this.stack.length-1];me.type,this.exit(fe);const ge=fe.estree;me.value=K,ge&&(me.data={estree:ge})}function exitMdxjsEsmData(fe){this.config.enter.data.call(this,fe),this.config.exit.data.call(this,fe)}function handleMdxjsEsm(fe){return fe.value||""}function mdxFromMarkdown(){return[mdxExpressionFromMarkdown(),mdxJsxFromMarkdown(),mdxjsEsmFromMarkdown()]}function mdxToMarkdown(fe){return{extensions:[mdxExpressionToMarkdown(),mdxJsxToMarkdown(fe),mdxjsEsmToMarkdown()]}}var acornExports=requireAcorn();const asciiAlpha=regexCheck(/[A-Za-z]/),asciiAlphanumeric=regexCheck(/[\dA-Za-z]/),asciiAtext=regexCheck(/[#-'*+\--9=?A-Z^-~]/);function asciiControl(fe){return fe!==null&&(fe<32||fe===127)}const asciiDigit=regexCheck(/\d/),asciiHexDigit=regexCheck(/[\dA-Fa-f]/),asciiPunctuation=regexCheck(/[!-/:-@[-`{-~]/);function markdownLineEnding(fe){return fe!==null&&fe<-2}function markdownLineEndingOrSpace(fe){return fe!==null&&(fe<0||fe===32)}function markdownSpace(fe){return fe===-2||fe===-1||fe===32}const unicodePunctuation=regexCheck(new RegExp("\\p{P}|\\p{S}","u")),unicodeWhitespace=regexCheck(/\s/);function regexCheck(fe){return K;function K(me){return me!==null&&me>-1&&fe.test(String.fromCharCode(me))}}function factorySpace(fe,K,me,ge){const xe=ge?ge-1:Number.POSITIVE_INFINITY;let ye=0;return ve;function ve(Ee){return markdownSpace(Ee)?(fe.enter(me),_e(Ee)):K(Ee)}function _e(Ee){return markdownSpace(Ee)&&ye++<xe?(fe.consume(Ee),_e):(fe.exit(me),K(Ee))}}function color$3(fe){return fe}const own$3={}.hasOwnProperty,CONTINUE$2=Symbol("continue"),EXIT$2=Symbol("exit"),SKIP$2=Symbol("skip");function visit$2(fe,K){let me,ge;typeof K=="function"?me=K:K&&typeof K=="object"&&(K.enter&&(me=K.enter),K.leave&&(ge=K.leave)),xe(fe,void 0,void 0,[])();function xe(ye,ve,_e,Ee){return nodelike(ye)&&(be.displayName="node ("+ye.type+")"),be;function be(){const Ae=me?toResult$2(me(ye,ve,_e,Ee)):[];if(Ae[0]===EXIT$2)return Ae;if(Ae[0]!==SKIP$2){let Se;for(Se in ye)if(own$3.call(ye,Se)&&ye[Se]&&typeof ye[Se]=="object"&&Se!=="data"&&Se!=="position"){const Ce=Ee.concat(ye),Te=ye[Se];if(Array.isArray(Te)){const Re=Te;let De=0;for(;De>-1&&De<Re.length;){const Ie=Re[De];if(nodelike(Ie)){const Be=xe(Ie,Se,De,Ce)();if(Be[0]===EXIT$2)return Be;De=typeof Be[1]=="number"?Be[1]:De+1}else De++}}else if(nodelike(Te)){const Re=xe(Te,Se,void 0,Ce)();if(Re[0]===EXIT$2)return Re}}}return ge?toResult$2(ge(ye,ve,_e,Ee)):Ae}}}function toResult$2(fe){return Array.isArray(fe)?fe:typeof fe=="number"?[CONTINUE$2,fe]:[fe]}function nodelike(fe){return!!(fe&&typeof fe=="object"&&"type"in fe&&typeof fe.type=="string"&&fe.type.length>0)}function eventsToAcorn(fe,K){const me=K.prefix||"",ge=K.suffix||"",xe=Object.assign({},K.acornOptions),ye=[],ve=[],_e=xe.onComment,Ee=xe.onToken;let be=!1,Ae,Se;const Ce=Object.assign({},xe,{onComment:ye,preserveParens:!0});Ee&&(Ce.onToken=ve);const Te=collect(fe,K.tokenTypes),Re=Te.value,De=me+Re+ge,Ie=K.expression&&empty$1(Re);if(Ie&&!K.allowEmpty)throw new VFileMessage("Unexpected empty expression",{place:Le(0),ruleId:"unexpected-empty-expression",source:"micromark-extension-mdx-expression"});try{Ae=K.expression&&!Ie?K.acorn.parseExpressionAt(De,0,Ce):K.acorn.parse(De,Ce)}catch(Oe){const Fe=Oe,Ue=Le(Fe.pos);Fe.message=String(Fe.message).replace(/ \(\d+:\d+\)$/,""),Fe.pos=Ue.offset,Fe.loc={line:Ue.line,column:Ue.column-1},Se=Fe,be=Fe.raisedAt>=me.length+Re.length||Fe.message==="Unterminated comment"}if(Ae&&K.expression&&!Ie)if(empty$1(De.slice(Ae.end,De.length-ge.length)))Ae={type:"Program",start:0,end:me.length+Re.length,body:[{type:"ExpressionStatement",expression:Ae,start:0,end:me.length+Re.length}],sourceType:"module",comments:[]};else{const Oe=Le(Ae.end),Fe=new Error("Unexpected content after expression");Fe.pos=Oe.offset,Fe.loc={line:Oe.line,column:Oe.column-1},Se=Fe,Ae=void 0}if(Ae){if(Ae.comments=ye,visit$2(Ae,function(Oe,Fe,Ue,Ne){let He=Ne[Ne.length-1],ze=Fe;Oe.type==="ParenthesizedExpression"&&He&&ze&&(typeof Ue=="number"&&(He=He[ze],ze=Ue),He[ze]=Oe.expression),Be(Oe)}),Array.isArray(_e))_e.push(...ye);else if(typeof _e=="function")for(const Oe of ye)_e(Oe.type==="Block",Oe.value,Oe.start,Oe.end,Oe.loc.start,Oe.loc.end);for(const Oe of ve)Oe.end<=me.length||Oe.start-me.length>=Re.length||(Be(Oe),Array.isArray(Ee)?Ee.push(Oe):Ee(Oe))}return{estree:Ae,error:Se,swallow:be};function Be(Oe){const Fe=Le(Oe.start),Ue=Le(Oe.end);Oe.start=Fe.offset,Oe.end=Ue.offset,Oe.loc={start:{line:Fe.line,column:Fe.column-1,offset:Fe.offset},end:{line:Ue.line,column:Ue.column-1,offset:Ue.offset}},Oe.range=[Oe.start,Oe.end]}function Le(Oe){let Fe=Oe-me.length;Fe<0?Fe=0:Fe>Re.length&&(Fe=Re.length);let Ue=relativeToPoint(Te.stops,Fe);return Ue||(Ue={line:K.start.line,column:K.start.column,offset:K.start.offset}),Ue}}function empty$1(fe){return/^\s*$/.test(fe.replace(/\/\*[\s\S]*?\*\//g,"").replace(/\/\/[^\r\n]*(\r\n|\n|\r)/g,""))}function collect(fe,K){const me={value:"",stops:[]};let ge=-1;for(;++ge<fe.length;){const xe=fe[ge];if(xe[0]==="enter"){const ye=xe[1].type;if(ye==="lineEnding"||K.includes(ye)){const ve=xe[2].sliceStream(xe[1]);for(;ve.length>0&&ve[0]===-1;)ve.shift();const _e=serializeChunks$1(ve);me.stops.push([me.value.length,xe[1].start]),me.value+=_e,me.stops.push([me.value.length,xe[1].end])}}}return me}function relativeToPoint(fe,K){let me=0;for(;me<fe.length&&fe[me][0]<=K;)me+=1;if(me===0)return;const[ge,xe]=fe[me-1],ye=K-ge;return{line:xe.line,column:xe.column+ye,offset:xe.offset+ye}}function serializeChunks$1(fe){let K=-1;const me=[];let ge;for(;++K<fe.length;){const xe=fe[K];let ye;if(typeof xe=="string")ye=xe;else switch(xe){case-5:{ye="\r";break}case-4:{ye=`
`;break}case-3:{ye=`\r
`;break}case-2:{ye="	";break}case-1:{if(ge)continue;ye=" ";break}default:ye=String.fromCharCode(xe)}ge=xe===-2,me.push(ye)}return me.join("")}function positionFromEstree(fe){const K=fe||{},me=K.loc||{},ge=K.range||[void 0,void 0],xe=pointOrUndefined(me.start,ge[0]||K.start),ye=pointOrUndefined(me.end,ge[1]||K.end);if(xe&&ye)return{start:xe,end:ye}}function pointOrUndefined(fe,K){if(fe&&typeof fe=="object"){const me="line"in fe?numberOrUndefined(fe.line):void 0,ge="column"in fe?numberOrUndefined(fe.column):void 0;if(me&&ge!==void 0)return{line:me,column:ge+1,offset:numberOrUndefined(K)}}}function numberOrUndefined(fe){return typeof fe=="number"&&fe>-1?fe:void 0}const indentSize=2,trouble$2="https://github.com/micromark/micromark-extension-mdx-expression/tree/main/packages/micromark-extension-mdx-expression",unexpectedEndOfFileHash="#unexpected-end-of-file-in-expression-expected-a-corresponding-closing-brace-for-",unexpectedLazyHash="#unexpected-lazy-line-in-expression-in-container-expected-line-to-be-prefixed",nonSpreadHash="#unexpected-type-in-code-expected-an-object-spread-spread",spreadExtraHash="#unexpected-extra-content-in-spread-only-a-single-spread-is-supported",acornHash="#could-not-parse-expression-with-acorn";function factoryMdxExpression(fe,K,me,ge,xe,ye,ve,_e,Ee,be,Ae){const Se=this,Ce=this.events.length+3;let Te=0,Re,De;return Ie;function Ie(Fe){return fe.enter(me),fe.enter(ge),fe.consume(Fe),fe.exit(ge),Re=Se.now(),Be}function Be(Fe){if(Fe===null){if(De)throw De;const Ue=new VFileMessage("Unexpected end of file in expression, expected a corresponding closing brace for `{`",{place:Se.now(),ruleId:"unexpected-eof",source:"micromark-extension-mdx-expression"});throw Ue.url=trouble$2+unexpectedEndOfFileHash,Ue}if(markdownLineEnding(Fe))return fe.enter("lineEnding"),fe.consume(Fe),fe.exit("lineEnding"),Oe;if(Fe===125&&Te===0){const Ue=ye?mdxExpressionParse.call(Se,ye,ve,xe,Ce,Re,be||!1,Ee||!1):{type:"ok",estree:void 0};if(Ue.type==="ok"){fe.enter(ge),fe.consume(Fe),fe.exit(ge);const Ne=fe.exit(me);return _e&&Ue.estree&&Object.assign(Ne,{estree:Ue.estree}),K}return De=Ue.message,fe.enter(xe),fe.consume(Fe),Le}return fe.enter(xe),Le(Fe)}function Le(Fe){return Fe===125&&Te===0||Fe===null||markdownLineEnding(Fe)?(fe.exit(xe),Be(Fe)):(Fe===123&&!ye?Te+=1:Fe===125&&(Te-=1),fe.consume(Fe),Le)}function Oe(Fe){const Ue=Se.now();if(Ue.line!==Re.line&&!Ae&&Se.parser.lazy[Ue.line]){const Ne=new VFileMessage("Unexpected lazy line in expression in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",{place:Se.now(),ruleId:"unexpected-lazy",source:"micromark-extension-mdx-expression"});throw Ne.url=trouble$2+unexpectedLazyHash,Ne}return markdownSpace(Fe)?factorySpace(fe,Be,"linePrefix",indentSize+1)(Fe):Be(Fe)}}function mdxExpressionParse(fe,K,me,ge,xe,ye,ve){const _e=eventsToAcorn(this.events.slice(ge),{acorn:fe,tokenTypes:[me],acornOptions:K,start:xe,expression:!0,allowEmpty:ye,prefix:ve?"({":"",suffix:ve?"})":""}),Ee=_e.estree;if(ve&&Ee){const be=Ee.body[0];if(be.type!=="ExpressionStatement"||be.expression.type!=="ObjectExpression"){const Ae=positionFromEstree(be),Se=new VFileMessage("Unexpected `"+be.type+"` in code: expected an object spread (`{...spread}`)",{place:Ae.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw Se.url=trouble$2+nonSpreadHash,Se}if(be.expression.properties[1]){const Ae=positionFromEstree(be.expression.properties[1]),Se=new VFileMessage("Unexpected extra content in spread: only a single spread is supported",{place:Ae.start,ruleId:"spread-extra",source:"micromark-extension-mdx-expression"});throw Se.url=trouble$2+spreadExtraHash,Se}if(be.expression.properties[0]&&be.expression.properties[0].type!=="SpreadElement"){const Ae=positionFromEstree(be.expression.properties[0]),Se=new VFileMessage("Unexpected `"+be.expression.properties[0].type+"` in code: only spread elements are supported",{place:Ae.start,ruleId:"non-spread",source:"micromark-extension-mdx-expression"});throw Se.url=trouble$2+nonSpreadHash,Se}}if(_e.error){const be=new VFileMessage("Could not parse expression with acorn",{cause:_e.error,place:{line:_e.error.loc.line,column:_e.error.loc.column+1,offset:_e.error.pos},ruleId:"acorn",source:"micromark-extension-mdx-expression"});return be.url=trouble$2+acornHash,{type:"nok",message:be}}return{type:"ok",estree:Ee}}function mdxExpression(fe){const K=fe||{},me=K.addResult,ge=K.acorn,xe=K.spread;let ye=K.allowEmpty,ve;if(ye==null&&(ye=!0),ge){if(!ge.parseExpressionAt)throw new Error("Expected a proper `acorn` instance passed in as `options.acorn`");ve=Object.assign({ecmaVersion:2024,sourceType:"module"},K.acornOptions)}else if(K.acornOptions||K.addResult)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");return{flow:{123:{name:"mdxFlowExpression",tokenize:_e,concrete:!0}},text:{123:{name:"mdxTextExpression",tokenize:Ee}}};function _e(be,Ae,Se){const Ce=this;return Te;function Te(Be){return Re(Be)}function Re(Be){return factoryMdxExpression.call(Ce,be,De,"mdxFlowExpression","mdxFlowExpressionMarker","mdxFlowExpressionChunk",ge,ve,me,xe,ye)(Be)}function De(Be){return markdownSpace(Be)?factorySpace(be,Ie,"whitespace")(Be):Ie(Be)}function Ie(Be){const Le=Ce.parser.constructs.flow[60],Fe=(Array.isArray(Le)?Le:Le?[Le]:[]).find(function(Ue){return Ue.name==="mdxJsxFlowTag"});return Be===60&&Fe?be.attempt(Fe,Ie,Se)(Be):Be===null||markdownLineEnding(Be)?Ae(Be):Se(Be)}}function Ee(be,Ae){const Se=this;return Ce;function Ce(Te){return factoryMdxExpression.call(Se,be,Ae,"mdxTextExpression","mdxTextExpressionMarker","mdxTextExpressionChunk",ge,ve,me,xe,ye,!0)(Te)}}}const trouble$1="https://github.com/micromark/micromark-extension-mdx-jsx";function factoryTag(fe,K,me,ge,xe,ye,ve,_e,Ee,be,Ae,Se,Ce,Te,Re,De,Ie,Be,Le,Oe,Fe,Ue,Ne,He,ze,je,Ge,Xe,qe,Qe,nt,Nt){const Ye=this;let at,rt;return Ft;function Ft(Rt){return fe.enter(_e),fe.enter(Ee),fe.consume(Rt),fe.exit(Ee),Je}function Je(Rt){return markdownLineEndingOrSpace(Rt)?me(Rt):(at=Wt,nn(Rt))}function Wt(Rt){if(Rt===47)return fe.enter(be),fe.consume(Rt),fe.exit(be),at=Kt,nn;if(Rt===62)return ln(Rt);if(Rt!==null&&Rt>=0&&start(Rt))return fe.enter(Se),fe.enter(Ce),fe.consume(Rt),Pt;on(Rt,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(Rt===33?" (note: to create a comment in MDX, use `{/* text */}`)":""))}function Kt(Rt){if(Rt===62)return ln(Rt);if(Rt!==null&&Rt>=0&&start(Rt))return fe.enter(Se),fe.enter(Ce),fe.consume(Rt),Pt;on(Rt,"before name","a character that can start a name, such as a letter, `$`, or `_`"+(Rt===42||Rt===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function Pt(Rt){if(Rt!==null&&Rt>=0&&cont(Rt,{jsx:!0}))return fe.consume(Rt),Pt;if(Rt===46||Rt===47||Rt===58||Rt===62||Rt===123||markdownLineEndingOrSpace(Rt)||unicodeWhitespace(Rt))return fe.exit(Ce),at=Yt,nn(Rt);on(Rt,"in name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(Rt===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function Yt(Rt){if(Rt===46)return fe.enter(Te),fe.consume(Rt),fe.exit(Te),at=Gt,nn;if(Rt===58)return fe.enter(De),fe.consume(Rt),fe.exit(De),at=En,nn;if(Rt===47||Rt===62||Rt===123||Rt!==null&&Rt>=0&&start(Rt))return fe.exit(Se),kn(Rt);on(Rt,"after name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Gt(Rt){if(Rt!==null&&Rt>=0&&start(Rt))return fe.enter(Re),fe.consume(Rt),an;on(Rt,"before member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function an(Rt){if(Rt!==null&&Rt>=0&&cont(Rt,{jsx:!0}))return fe.consume(Rt),an;if(Rt===46||Rt===47||Rt===62||Rt===123||markdownLineEndingOrSpace(Rt)||unicodeWhitespace(Rt))return fe.exit(Re),at=pn,nn(Rt);on(Rt,"in member name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag"+(Rt===64?" (note: to create a link in MDX, use `[text](url)`)":""))}function pn(Rt){if(Rt===46)return fe.enter(Te),fe.consume(Rt),fe.exit(Te),at=Gt,nn;if(Rt===47||Rt===62||Rt===123||Rt!==null&&Rt>=0&&start(Rt))return fe.exit(Se),kn(Rt);on(Rt,"after member name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function En(Rt){if(Rt!==null&&Rt>=0&&start(Rt))return fe.enter(Ie),fe.consume(Rt),$n;on(Rt,"before local name","a character that can start a name, such as a letter, `$`, or `_`"+(Rt===43||Rt!==null&&Rt>46&&Rt<58?" (note: to create a link in MDX, use `[text](url)`)":""))}function $n(Rt){if(Rt!==null&&Rt>=0&&cont(Rt,{jsx:!0}))return fe.consume(Rt),$n;if(Rt===47||Rt===62||Rt===123||markdownLineEndingOrSpace(Rt)||unicodeWhitespace(Rt))return fe.exit(Ie),at=Un,nn(Rt);on(Rt,"in local name","a name character such as letters, digits, `$`, or `_`; whitespace before attributes; or the end of the tag")}function Un(Rt){if(Rt===47||Rt===62||Rt===123||Rt!==null&&Rt>=0&&start(Rt))return fe.exit(Se),kn(Rt);on(Rt,"after local name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function kn(Rt){if(Rt===47)return fe.enter(Ae),fe.consume(Rt),fe.exit(Ae),at=Dt,nn;if(Rt===62)return ln(Rt);if(Rt===123)return factoryMdxExpression.call(Ye,fe,bn,Be,Le,Oe,ge,xe,ye,!0,!1,ve)(Rt);if(Rt!==null&&Rt>=0&&start(Rt))return fe.enter(Fe),fe.enter(Ue),fe.enter(Ne),fe.consume(Rt),Mn;on(Rt,"before attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; whitespace before attributes; or the end of the tag")}function bn(Rt){return at=kn,nn(Rt)}function Mn(Rt){if(Rt!==null&&Rt>=0&&cont(Rt,{jsx:!0}))return fe.consume(Rt),Mn;if(Rt===47||Rt===58||Rt===61||Rt===62||Rt===123||markdownLineEndingOrSpace(Rt)||unicodeWhitespace(Rt))return fe.exit(Ne),at=zt,nn(Rt);on(Rt,"in attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function zt(Rt){if(Rt===58)return fe.enter(He),fe.consume(Rt),fe.exit(He),at=Dn,nn;if(Rt===61)return fe.exit(Ue),fe.enter(je),fe.consume(Rt),fe.exit(je),at=dn,nn;if(Rt===47||Rt===62||Rt===123||markdownLineEndingOrSpace(Rt)||unicodeWhitespace(Rt)||Rt!==null&&Rt>=0&&start(Rt))return fe.exit(Ue),fe.exit(Fe),at=kn,nn(Rt);on(Rt,"after attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function Dn(Rt){if(Rt!==null&&Rt>=0&&start(Rt))return fe.enter(ze),fe.consume(Rt),hn;on(Rt,"before local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function hn(Rt){if(Rt!==null&&Rt>=0&&cont(Rt,{jsx:!0}))return fe.consume(Rt),hn;if(Rt===47||Rt===61||Rt===62||Rt===123||markdownLineEndingOrSpace(Rt)||unicodeWhitespace(Rt))return fe.exit(ze),fe.exit(Ue),at=mn,nn(Rt);on(Rt,"in local attribute name","an attribute name character such as letters, digits, `$`, or `_`; `=` to initialize a value; whitespace before attributes; or the end of the tag")}function mn(Rt){if(Rt===61)return fe.enter(je),fe.consume(Rt),fe.exit(je),at=dn,nn;if(Rt===47||Rt===62||Rt===123||Rt!==null&&Rt>=0&&start(Rt))return fe.exit(Fe),kn(Rt);on(Rt,"after local attribute name","a character that can start an attribute name, such as a letter, `$`, or `_`; `=` to initialize a value; or the end of the tag")}function dn(Rt){if(Rt===34||Rt===39)return fe.enter(Ge),fe.enter(Xe),fe.consume(Rt),fe.exit(Xe),rt=Rt,Bn;if(Rt===123)return factoryMdxExpression.call(Ye,fe,Hn,Qe,nt,Nt,ge,xe,ye,!1,!1,ve)(Rt);on(Rt,"before attribute value","a character that can start an attribute value, such as `\"`, `'`, or `{`"+(Rt===60?" (note: to use an element or fragment as a prop value in MDX, use `{<element />}`)":""))}function Hn(Rt){return fe.exit(Fe),at=kn,nn(Rt)}function Bn(Rt){return Rt===null&&on(Rt,"in attribute value","a corresponding closing quote `"+String.fromCodePoint(rt)+"`"),Rt===rt?(fe.enter(Xe),fe.consume(Rt),fe.exit(Xe),fe.exit(Ge),fe.exit(Fe),rt=void 0,at=kn,nn):markdownLineEnding(Rt)?(at=Bn,nn(Rt)):(fe.enter(qe),kt(Rt))}function kt(Rt){return Rt===null||Rt===rt||markdownLineEnding(Rt)?(fe.exit(qe),Bn(Rt)):(fe.consume(Rt),kt)}function Dt(Rt){if(Rt===62)return ln(Rt);on(Rt,"after self-closing slash","`>` to end the tag"+(Rt===42||Rt===47?" (note: JS comments in JSX tags are not supported in MDX)":""))}function ln(Rt){return fe.enter(Ee),fe.consume(Rt),fe.exit(Ee),fe.exit(_e),K}function nn(Rt){return markdownLineEnding(Rt)?(fe.enter("lineEnding"),fe.consume(Rt),fe.exit("lineEnding"),Xt):markdownSpace(Rt)||unicodeWhitespace(Rt)?(fe.enter("esWhitespace"),gn(Rt)):at(Rt)}function gn(Rt){return markdownLineEnding(Rt)?(fe.exit("esWhitespace"),nn(Rt)):markdownSpace(Rt)||unicodeWhitespace(Rt)?(fe.consume(Rt),gn):(fe.exit("esWhitespace"),at(Rt))}function Xt(Rt){if(!ve&&Ye.parser.lazy[Ye.now().line]){const An=new VFileMessage("Unexpected lazy line in container, expected line to be prefixed with `>` when in a block quote, whitespace when in a list, etc",Ye.now(),"micromark-extension-mdx-jsx:unexpected-lazy");throw An.url=trouble$1+"#unexpected-lazy-line-in-container-expected-line-to-be",An}return nn(Rt)}function on(Rt,An,sr){const zn=new VFileMessage("Unexpected "+(Rt===null?"end of file":"character `"+(Rt===96?"` ` `":String.fromCodePoint(Rt))+"` ("+serializeCharCode(Rt)+")")+" "+An+", expected "+sr,Ye.now(),"micromark-extension-mdx-jsx:unexpected-"+(Rt===null?"eof":"character"));throw zn.url=trouble$1+(Rt===null?"#unexpected-end-of-file-at-expected-expect":"#unexpected-character-at-expected-expect"),zn}}function serializeCharCode(fe){return"U+"+fe.toString(16).toUpperCase().padStart(4,"0")}function jsxText(fe,K){return{name:"mdxJsxTextTag",tokenize:me};function me(ge,xe,ye){return factoryTag.call(this,ge,xe,ye,fe,K.acornOptions,K.addResult,!0,"mdxJsxTextTag","mdxJsxTextTagMarker","mdxJsxTextTagClosingMarker","mdxJsxTextTagSelfClosingMarker","mdxJsxTextTagName","mdxJsxTextTagNamePrimary","mdxJsxTextTagNameMemberMarker","mdxJsxTextTagNameMember","mdxJsxTextTagNamePrefixMarker","mdxJsxTextTagNameLocal","mdxJsxTextTagExpressionAttribute","mdxJsxTextTagExpressionAttributeMarker","mdxJsxTextTagExpressionAttributeValue","mdxJsxTextTagAttribute","mdxJsxTextTagAttributeName","mdxJsxTextTagAttributeNamePrimary","mdxJsxTextTagAttributeNamePrefixMarker","mdxJsxTextTagAttributeNameLocal","mdxJsxTextTagAttributeInitializerMarker","mdxJsxTextTagAttributeValueLiteral","mdxJsxTextTagAttributeValueLiteralMarker","mdxJsxTextTagAttributeValueLiteralValue","mdxJsxTextTagAttributeValueExpression","mdxJsxTextTagAttributeValueExpressionMarker","mdxJsxTextTagAttributeValueExpressionValue")}}function jsxFlow(fe,K){return{name:"mdxJsxFlowTag",tokenize:me,concrete:!0};function me(ge,xe,ye){const ve=this;return _e;function _e(Se){return Ee(Se)}function Ee(Se){return factoryTag.call(ve,ge,be,ye,fe,K.acornOptions,K.addResult,!1,"mdxJsxFlowTag","mdxJsxFlowTagMarker","mdxJsxFlowTagClosingMarker","mdxJsxFlowTagSelfClosingMarker","mdxJsxFlowTagName","mdxJsxFlowTagNamePrimary","mdxJsxFlowTagNameMemberMarker","mdxJsxFlowTagNameMember","mdxJsxFlowTagNamePrefixMarker","mdxJsxFlowTagNameLocal","mdxJsxFlowTagExpressionAttribute","mdxJsxFlowTagExpressionAttributeMarker","mdxJsxFlowTagExpressionAttributeValue","mdxJsxFlowTagAttribute","mdxJsxFlowTagAttributeName","mdxJsxFlowTagAttributeNamePrimary","mdxJsxFlowTagAttributeNamePrefixMarker","mdxJsxFlowTagAttributeNameLocal","mdxJsxFlowTagAttributeInitializerMarker","mdxJsxFlowTagAttributeValueLiteral","mdxJsxFlowTagAttributeValueLiteralMarker","mdxJsxFlowTagAttributeValueLiteralValue","mdxJsxFlowTagAttributeValueExpression","mdxJsxFlowTagAttributeValueExpressionMarker","mdxJsxFlowTagAttributeValueExpressionValue")(Se)}function be(Se){return markdownSpace(Se)?factorySpace(ge,Ae,"whitespace")(Se):Ae(Se)}function Ae(Se){const Ce=ve.parser.constructs.flow[123],Re=(Array.isArray(Ce)?Ce:Ce?[Ce]:[]).find(De=>De.name==="mdxFlowExpression");return Se===60?_e(Se):Se===123&&Re?ge.attempt(Re,Ae,ye)(Se):Se===null||markdownLineEnding(Se)?xe(Se):ye(Se)}}}function mdxJsx(fe){const K=fe||{},me=K.acorn;let ge;if(me){if(!me.parse||!me.parseExpressionAt)throw new Error("Expected a proper `acorn` instance passed in as `options.acorn`");ge=Object.assign({ecmaVersion:2024,sourceType:"module"},K.acornOptions,{locations:!0})}else if(K.acornOptions||K.addResult)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");return{flow:{60:jsxFlow(me||void 0,{acornOptions:ge,addResult:K.addResult||void 0})},text:{60:jsxText(me||void 0,{acornOptions:ge,addResult:K.addResult||void 0})}}}function mdxMd(){return{disable:{null:["autolink","codeIndented","htmlFlow","htmlText"]}}}function splice(fe,K,me,ge){const xe=fe.length;let ye=0,ve;if(K<0?K=-K>xe?0:xe+K:K=K>xe?xe:K,me=me>0?me:0,ge.length<1e4)ve=Array.from(ge),ve.unshift(K,me),fe.splice(...ve);else for(me&&fe.splice(K,me);ye<ge.length;)ve=ge.slice(ye,ye+1e4),ve.unshift(K,0),fe.splice(...ve),ye+=1e4,K+=1e4}function push(fe,K){return fe.length>0?(splice(fe,fe.length,0,K),fe):K}function classifyCharacter(fe){if(fe===null||markdownLineEndingOrSpace(fe)||unicodeWhitespace(fe))return 1;if(unicodePunctuation(fe))return 2}function resolveAll(fe,K,me){const ge=[];let xe=-1;for(;++xe<fe.length;){const ye=fe[xe].resolveAll;ye&&!ge.includes(ye)&&(K=ye(K,me),ge.push(ye))}return K}const attention={name:"attention",resolveAll:resolveAllAttention,tokenize:tokenizeAttention};function resolveAllAttention(fe,K){let me=-1,ge,xe,ye,ve,_e,Ee,be,Ae;for(;++me<fe.length;)if(fe[me][0]==="enter"&&fe[me][1].type==="attentionSequence"&&fe[me][1]._close){for(ge=me;ge--;)if(fe[ge][0]==="exit"&&fe[ge][1].type==="attentionSequence"&&fe[ge][1]._open&&K.sliceSerialize(fe[ge][1]).charCodeAt(0)===K.sliceSerialize(fe[me][1]).charCodeAt(0)){if((fe[ge][1]._close||fe[me][1]._open)&&(fe[me][1].end.offset-fe[me][1].start.offset)%3&&!((fe[ge][1].end.offset-fe[ge][1].start.offset+fe[me][1].end.offset-fe[me][1].start.offset)%3))continue;Ee=fe[ge][1].end.offset-fe[ge][1].start.offset>1&&fe[me][1].end.offset-fe[me][1].start.offset>1?2:1;const Se={...fe[ge][1].end},Ce={...fe[me][1].start};movePoint(Se,-Ee),movePoint(Ce,Ee),ve={type:Ee>1?"strongSequence":"emphasisSequence",start:Se,end:{...fe[ge][1].end}},_e={type:Ee>1?"strongSequence":"emphasisSequence",start:{...fe[me][1].start},end:Ce},ye={type:Ee>1?"strongText":"emphasisText",start:{...fe[ge][1].end},end:{...fe[me][1].start}},xe={type:Ee>1?"strong":"emphasis",start:{...ve.start},end:{..._e.end}},fe[ge][1].end={...ve.start},fe[me][1].start={..._e.end},be=[],fe[ge][1].end.offset-fe[ge][1].start.offset&&(be=push(be,[["enter",fe[ge][1],K],["exit",fe[ge][1],K]])),be=push(be,[["enter",xe,K],["enter",ve,K],["exit",ve,K],["enter",ye,K]]),be=push(be,resolveAll(K.parser.constructs.insideSpan.null,fe.slice(ge+1,me),K)),be=push(be,[["exit",ye,K],["enter",_e,K],["exit",_e,K],["exit",xe,K]]),fe[me][1].end.offset-fe[me][1].start.offset?(Ae=2,be=push(be,[["enter",fe[me][1],K],["exit",fe[me][1],K]])):Ae=0,splice(fe,ge-1,me-ge+3,be),me=ge+be.length-Ae-2;break}}for(me=-1;++me<fe.length;)fe[me][1].type==="attentionSequence"&&(fe[me][1].type="data");return fe}function tokenizeAttention(fe,K){const me=this.parser.constructs.attentionMarkers.null,ge=this.previous,xe=classifyCharacter(ge);let ye;return ve;function ve(Ee){return ye=Ee,fe.enter("attentionSequence"),_e(Ee)}function _e(Ee){if(Ee===ye)return fe.consume(Ee),_e;const be=fe.exit("attentionSequence"),Ae=classifyCharacter(Ee),Se=!Ae||Ae===2&&xe||me.includes(Ee),Ce=!xe||xe===2&&Ae||me.includes(ge);return be._open=!!(ye===42?Se:Se&&(xe||!Ce)),be._close=!!(ye===42?Ce:Ce&&(Ae||!Se)),K(Ee)}}function movePoint(fe,K){fe.column+=K,fe.offset+=K,fe._bufferIndex+=K}const autolink={name:"autolink",tokenize:tokenizeAutolink};function tokenizeAutolink(fe,K,me){let ge=0;return xe;function xe(Te){return fe.enter("autolink"),fe.enter("autolinkMarker"),fe.consume(Te),fe.exit("autolinkMarker"),fe.enter("autolinkProtocol"),ye}function ye(Te){return asciiAlpha(Te)?(fe.consume(Te),ve):Te===64?me(Te):be(Te)}function ve(Te){return Te===43||Te===45||Te===46||asciiAlphanumeric(Te)?(ge=1,_e(Te)):be(Te)}function _e(Te){return Te===58?(fe.consume(Te),ge=0,Ee):(Te===43||Te===45||Te===46||asciiAlphanumeric(Te))&&ge++<32?(fe.consume(Te),_e):(ge=0,be(Te))}function Ee(Te){return Te===62?(fe.exit("autolinkProtocol"),fe.enter("autolinkMarker"),fe.consume(Te),fe.exit("autolinkMarker"),fe.exit("autolink"),K):Te===null||Te===32||Te===60||asciiControl(Te)?me(Te):(fe.consume(Te),Ee)}function be(Te){return Te===64?(fe.consume(Te),Ae):asciiAtext(Te)?(fe.consume(Te),be):me(Te)}function Ae(Te){return asciiAlphanumeric(Te)?Se(Te):me(Te)}function Se(Te){return Te===46?(fe.consume(Te),ge=0,Ae):Te===62?(fe.exit("autolinkProtocol").type="autolinkEmail",fe.enter("autolinkMarker"),fe.consume(Te),fe.exit("autolinkMarker"),fe.exit("autolink"),K):Ce(Te)}function Ce(Te){if((Te===45||asciiAlphanumeric(Te))&&ge++<63){const Re=Te===45?Ce:Se;return fe.consume(Te),Re}return me(Te)}}const blankLine={partial:!0,tokenize:tokenizeBlankLine};function tokenizeBlankLine(fe,K,me){return ge;function ge(ye){return markdownSpace(ye)?factorySpace(fe,xe,"linePrefix")(ye):xe(ye)}function xe(ye){return ye===null||markdownLineEnding(ye)?K(ye):me(ye)}}const blockQuote={continuation:{tokenize:tokenizeBlockQuoteContinuation},exit:exit$1,name:"blockQuote",tokenize:tokenizeBlockQuoteStart};function tokenizeBlockQuoteStart(fe,K,me){const ge=this;return xe;function xe(ve){if(ve===62){const _e=ge.containerState;return _e.open||(fe.enter("blockQuote",{_container:!0}),_e.open=!0),fe.enter("blockQuotePrefix"),fe.enter("blockQuoteMarker"),fe.consume(ve),fe.exit("blockQuoteMarker"),ye}return me(ve)}function ye(ve){return markdownSpace(ve)?(fe.enter("blockQuotePrefixWhitespace"),fe.consume(ve),fe.exit("blockQuotePrefixWhitespace"),fe.exit("blockQuotePrefix"),K):(fe.exit("blockQuotePrefix"),K(ve))}}function tokenizeBlockQuoteContinuation(fe,K,me){const ge=this;return xe;function xe(ve){return markdownSpace(ve)?factorySpace(fe,ye,"linePrefix",ge.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ve):ye(ve)}function ye(ve){return fe.attempt(blockQuote,K,me)(ve)}}function exit$1(fe){fe.exit("blockQuote")}const characterEscape={name:"characterEscape",tokenize:tokenizeCharacterEscape};function tokenizeCharacterEscape(fe,K,me){return ge;function ge(ye){return fe.enter("characterEscape"),fe.enter("escapeMarker"),fe.consume(ye),fe.exit("escapeMarker"),xe}function xe(ye){return asciiPunctuation(ye)?(fe.enter("characterEscapeValue"),fe.consume(ye),fe.exit("characterEscapeValue"),fe.exit("characterEscape"),K):me(ye)}}const characterReference={name:"characterReference",tokenize:tokenizeCharacterReference};function tokenizeCharacterReference(fe,K,me){const ge=this;let xe=0,ye,ve;return _e;function _e(Se){return fe.enter("characterReference"),fe.enter("characterReferenceMarker"),fe.consume(Se),fe.exit("characterReferenceMarker"),Ee}function Ee(Se){return Se===35?(fe.enter("characterReferenceMarkerNumeric"),fe.consume(Se),fe.exit("characterReferenceMarkerNumeric"),be):(fe.enter("characterReferenceValue"),ye=31,ve=asciiAlphanumeric,Ae(Se))}function be(Se){return Se===88||Se===120?(fe.enter("characterReferenceMarkerHexadecimal"),fe.consume(Se),fe.exit("characterReferenceMarkerHexadecimal"),fe.enter("characterReferenceValue"),ye=6,ve=asciiHexDigit,Ae):(fe.enter("characterReferenceValue"),ye=7,ve=asciiDigit,Ae(Se))}function Ae(Se){if(Se===59&&xe){const Ce=fe.exit("characterReferenceValue");return ve===asciiAlphanumeric&&!decodeNamedCharacterReference(ge.sliceSerialize(Ce))?me(Se):(fe.enter("characterReferenceMarker"),fe.consume(Se),fe.exit("characterReferenceMarker"),fe.exit("characterReference"),K)}return ve(Se)&&xe++<ye?(fe.consume(Se),Ae):me(Se)}}const nonLazyContinuation={partial:!0,tokenize:tokenizeNonLazyContinuation},codeFenced={concrete:!0,name:"codeFenced",tokenize:tokenizeCodeFenced};function tokenizeCodeFenced(fe,K,me){const ge=this,xe={partial:!0,tokenize:Ue};let ye=0,ve=0,_e;return Ee;function Ee(Ne){return be(Ne)}function be(Ne){const He=ge.events[ge.events.length-1];return ye=He&&He[1].type==="linePrefix"?He[2].sliceSerialize(He[1],!0).length:0,_e=Ne,fe.enter("codeFenced"),fe.enter("codeFencedFence"),fe.enter("codeFencedFenceSequence"),Ae(Ne)}function Ae(Ne){return Ne===_e?(ve++,fe.consume(Ne),Ae):ve<3?me(Ne):(fe.exit("codeFencedFenceSequence"),markdownSpace(Ne)?factorySpace(fe,Se,"whitespace")(Ne):Se(Ne))}function Se(Ne){return Ne===null||markdownLineEnding(Ne)?(fe.exit("codeFencedFence"),ge.interrupt?K(Ne):fe.check(nonLazyContinuation,De,Fe)(Ne)):(fe.enter("codeFencedFenceInfo"),fe.enter("chunkString",{contentType:"string"}),Ce(Ne))}function Ce(Ne){return Ne===null||markdownLineEnding(Ne)?(fe.exit("chunkString"),fe.exit("codeFencedFenceInfo"),Se(Ne)):markdownSpace(Ne)?(fe.exit("chunkString"),fe.exit("codeFencedFenceInfo"),factorySpace(fe,Te,"whitespace")(Ne)):Ne===96&&Ne===_e?me(Ne):(fe.consume(Ne),Ce)}function Te(Ne){return Ne===null||markdownLineEnding(Ne)?Se(Ne):(fe.enter("codeFencedFenceMeta"),fe.enter("chunkString",{contentType:"string"}),Re(Ne))}function Re(Ne){return Ne===null||markdownLineEnding(Ne)?(fe.exit("chunkString"),fe.exit("codeFencedFenceMeta"),Se(Ne)):Ne===96&&Ne===_e?me(Ne):(fe.consume(Ne),Re)}function De(Ne){return fe.attempt(xe,Fe,Ie)(Ne)}function Ie(Ne){return fe.enter("lineEnding"),fe.consume(Ne),fe.exit("lineEnding"),Be}function Be(Ne){return ye>0&&markdownSpace(Ne)?factorySpace(fe,Le,"linePrefix",ye+1)(Ne):Le(Ne)}function Le(Ne){return Ne===null||markdownLineEnding(Ne)?fe.check(nonLazyContinuation,De,Fe)(Ne):(fe.enter("codeFlowValue"),Oe(Ne))}function Oe(Ne){return Ne===null||markdownLineEnding(Ne)?(fe.exit("codeFlowValue"),Le(Ne)):(fe.consume(Ne),Oe)}function Fe(Ne){return fe.exit("codeFenced"),K(Ne)}function Ue(Ne,He,ze){let je=0;return Ge;function Ge(Nt){return Ne.enter("lineEnding"),Ne.consume(Nt),Ne.exit("lineEnding"),Xe}function Xe(Nt){return Ne.enter("codeFencedFence"),markdownSpace(Nt)?factorySpace(Ne,qe,"linePrefix",ge.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Nt):qe(Nt)}function qe(Nt){return Nt===_e?(Ne.enter("codeFencedFenceSequence"),Qe(Nt)):ze(Nt)}function Qe(Nt){return Nt===_e?(je++,Ne.consume(Nt),Qe):je>=ve?(Ne.exit("codeFencedFenceSequence"),markdownSpace(Nt)?factorySpace(Ne,nt,"whitespace")(Nt):nt(Nt)):ze(Nt)}function nt(Nt){return Nt===null||markdownLineEnding(Nt)?(Ne.exit("codeFencedFence"),He(Nt)):ze(Nt)}}}function tokenizeNonLazyContinuation(fe,K,me){const ge=this;return xe;function xe(ve){return ve===null?me(ve):(fe.enter("lineEnding"),fe.consume(ve),fe.exit("lineEnding"),ye)}function ye(ve){return ge.parser.lazy[ge.now().line]?me(ve):K(ve)}}const codeIndented={name:"codeIndented",tokenize:tokenizeCodeIndented},furtherStart={partial:!0,tokenize:tokenizeFurtherStart};function tokenizeCodeIndented(fe,K,me){const ge=this;return xe;function xe(be){return fe.enter("codeIndented"),factorySpace(fe,ye,"linePrefix",5)(be)}function ye(be){const Ae=ge.events[ge.events.length-1];return Ae&&Ae[1].type==="linePrefix"&&Ae[2].sliceSerialize(Ae[1],!0).length>=4?ve(be):me(be)}function ve(be){return be===null?Ee(be):markdownLineEnding(be)?fe.attempt(furtherStart,ve,Ee)(be):(fe.enter("codeFlowValue"),_e(be))}function _e(be){return be===null||markdownLineEnding(be)?(fe.exit("codeFlowValue"),ve(be)):(fe.consume(be),_e)}function Ee(be){return fe.exit("codeIndented"),K(be)}}function tokenizeFurtherStart(fe,K,me){const ge=this;return xe;function xe(ve){return ge.parser.lazy[ge.now().line]?me(ve):markdownLineEnding(ve)?(fe.enter("lineEnding"),fe.consume(ve),fe.exit("lineEnding"),xe):factorySpace(fe,ye,"linePrefix",5)(ve)}function ye(ve){const _e=ge.events[ge.events.length-1];return _e&&_e[1].type==="linePrefix"&&_e[2].sliceSerialize(_e[1],!0).length>=4?K(ve):markdownLineEnding(ve)?xe(ve):me(ve)}}const codeText={name:"codeText",previous:previous$1,resolve:resolveCodeText,tokenize:tokenizeCodeText};function resolveCodeText(fe){let K=fe.length-4,me=3,ge,xe;if((fe[me][1].type==="lineEnding"||fe[me][1].type==="space")&&(fe[K][1].type==="lineEnding"||fe[K][1].type==="space")){for(ge=me;++ge<K;)if(fe[ge][1].type==="codeTextData"){fe[me][1].type="codeTextPadding",fe[K][1].type="codeTextPadding",me+=2,K-=2;break}}for(ge=me-1,K++;++ge<=K;)xe===void 0?ge!==K&&fe[ge][1].type!=="lineEnding"&&(xe=ge):(ge===K||fe[ge][1].type==="lineEnding")&&(fe[xe][1].type="codeTextData",ge!==xe+2&&(fe[xe][1].end=fe[ge-1][1].end,fe.splice(xe+2,ge-xe-2),K-=ge-xe-2,ge=xe+2),xe=void 0);return fe}function previous$1(fe){return fe!==96||this.events[this.events.length-1][1].type==="characterEscape"}function tokenizeCodeText(fe,K,me){let ge=0,xe,ye;return ve;function ve(Se){return fe.enter("codeText"),fe.enter("codeTextSequence"),_e(Se)}function _e(Se){return Se===96?(fe.consume(Se),ge++,_e):(fe.exit("codeTextSequence"),Ee(Se))}function Ee(Se){return Se===null?me(Se):Se===32?(fe.enter("space"),fe.consume(Se),fe.exit("space"),Ee):Se===96?(ye=fe.enter("codeTextSequence"),xe=0,Ae(Se)):markdownLineEnding(Se)?(fe.enter("lineEnding"),fe.consume(Se),fe.exit("lineEnding"),Ee):(fe.enter("codeTextData"),be(Se))}function be(Se){return Se===null||Se===32||Se===96||markdownLineEnding(Se)?(fe.exit("codeTextData"),Ee(Se)):(fe.consume(Se),be)}function Ae(Se){return Se===96?(fe.consume(Se),xe++,Ae):xe===ge?(fe.exit("codeTextSequence"),fe.exit("codeText"),K(Se)):(ye.type="codeTextData",be(Se))}}class SpliceBuffer{constructor(K){this.left=K?[...K]:[],this.right=[]}get(K){if(K<0||K>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+K+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return K<this.left.length?this.left[K]:this.right[this.right.length-K+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(K,me){const ge=me??Number.POSITIVE_INFINITY;return ge<this.left.length?this.left.slice(K,ge):K>this.left.length?this.right.slice(this.right.length-ge+this.left.length,this.right.length-K+this.left.length).reverse():this.left.slice(K).concat(this.right.slice(this.right.length-ge+this.left.length).reverse())}splice(K,me,ge){const xe=me||0;this.setCursor(Math.trunc(K));const ye=this.right.splice(this.right.length-xe,Number.POSITIVE_INFINITY);return ge&&chunkedPush(this.left,ge),ye.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(K){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(K)}pushMany(K){this.setCursor(Number.POSITIVE_INFINITY),chunkedPush(this.left,K)}unshift(K){this.setCursor(0),this.right.push(K)}unshiftMany(K){this.setCursor(0),chunkedPush(this.right,K.reverse())}setCursor(K){if(!(K===this.left.length||K>this.left.length&&this.right.length===0||K<0&&this.left.length===0))if(K<this.left.length){const me=this.left.splice(K,Number.POSITIVE_INFINITY);chunkedPush(this.right,me.reverse())}else{const me=this.right.splice(this.left.length+this.right.length-K,Number.POSITIVE_INFINITY);chunkedPush(this.left,me.reverse())}}}function chunkedPush(fe,K){let me=0;if(K.length<1e4)fe.push(...K);else for(;me<K.length;)fe.push(...K.slice(me,me+1e4)),me+=1e4}function subtokenize(fe){const K={};let me=-1,ge,xe,ye,ve,_e,Ee,be;const Ae=new SpliceBuffer(fe);for(;++me<Ae.length;){for(;me in K;)me=K[me];if(ge=Ae.get(me),me&&ge[1].type==="chunkFlow"&&Ae.get(me-1)[1].type==="listItemPrefix"&&(Ee=ge[1]._tokenizer.events,ye=0,ye<Ee.length&&Ee[ye][1].type==="lineEndingBlank"&&(ye+=2),ye<Ee.length&&Ee[ye][1].type==="content"))for(;++ye<Ee.length&&Ee[ye][1].type!=="content";)Ee[ye][1].type==="chunkText"&&(Ee[ye][1]._isInFirstContentOfListItem=!0,ye++);if(ge[0]==="enter")ge[1].contentType&&(Object.assign(K,subcontent(Ae,me)),me=K[me],be=!0);else if(ge[1]._container){for(ye=me,xe=void 0;ye--;)if(ve=Ae.get(ye),ve[1].type==="lineEnding"||ve[1].type==="lineEndingBlank")ve[0]==="enter"&&(xe&&(Ae.get(xe)[1].type="lineEndingBlank"),ve[1].type="lineEnding",xe=ye);else if(!(ve[1].type==="linePrefix"||ve[1].type==="listItemIndent"))break;xe&&(ge[1].end={...Ae.get(xe)[1].start},_e=Ae.slice(xe,me),_e.unshift(ge),Ae.splice(xe,me-xe+1,_e))}}return splice(fe,0,Number.POSITIVE_INFINITY,Ae.slice(0)),!be}function subcontent(fe,K){const me=fe.get(K)[1],ge=fe.get(K)[2];let xe=K-1;const ye=[];let ve=me._tokenizer;ve||(ve=ge.parser[me.contentType](me.start),me._contentTypeTextTrailing&&(ve._contentTypeTextTrailing=!0));const _e=ve.events,Ee=[],be={};let Ae,Se,Ce=-1,Te=me,Re=0,De=0;const Ie=[De];for(;Te;){for(;fe.get(++xe)[1]!==Te;);ye.push(xe),Te._tokenizer||(Ae=ge.sliceStream(Te),Te.next||Ae.push(null),Se&&ve.defineSkip(Te.start),Te._isInFirstContentOfListItem&&(ve._gfmTasklistFirstContentOfListItem=!0),ve.write(Ae),Te._isInFirstContentOfListItem&&(ve._gfmTasklistFirstContentOfListItem=void 0)),Se=Te,Te=Te.next}for(Te=me;++Ce<_e.length;)_e[Ce][0]==="exit"&&_e[Ce-1][0]==="enter"&&_e[Ce][1].type===_e[Ce-1][1].type&&_e[Ce][1].start.line!==_e[Ce][1].end.line&&(De=Ce+1,Ie.push(De),Te._tokenizer=void 0,Te.previous=void 0,Te=Te.next);for(ve.events=[],Te?(Te._tokenizer=void 0,Te.previous=void 0):Ie.pop(),Ce=Ie.length;Ce--;){const Be=_e.slice(Ie[Ce],Ie[Ce+1]),Le=ye.pop();Ee.push([Le,Le+Be.length-1]),fe.splice(Le,2,Be)}for(Ee.reverse(),Ce=-1;++Ce<Ee.length;)be[Re+Ee[Ce][0]]=Re+Ee[Ce][1],Re+=Ee[Ce][1]-Ee[Ce][0]-1;return be}const content$1={resolve:resolveContent,tokenize:tokenizeContent},continuationConstruct={partial:!0,tokenize:tokenizeContinuation};function resolveContent(fe){return subtokenize(fe),fe}function tokenizeContent(fe,K){let me;return ge;function ge(_e){return fe.enter("content"),me=fe.enter("chunkContent",{contentType:"content"}),xe(_e)}function xe(_e){return _e===null?ye(_e):markdownLineEnding(_e)?fe.check(continuationConstruct,ve,ye)(_e):(fe.consume(_e),xe)}function ye(_e){return fe.exit("chunkContent"),fe.exit("content"),K(_e)}function ve(_e){return fe.consume(_e),fe.exit("chunkContent"),me.next=fe.enter("chunkContent",{contentType:"content",previous:me}),me=me.next,xe}}function tokenizeContinuation(fe,K,me){const ge=this;return xe;function xe(ve){return fe.exit("chunkContent"),fe.enter("lineEnding"),fe.consume(ve),fe.exit("lineEnding"),factorySpace(fe,ye,"linePrefix")}function ye(ve){if(ve===null||markdownLineEnding(ve))return me(ve);const _e=ge.events[ge.events.length-1];return!ge.parser.constructs.disable.null.includes("codeIndented")&&_e&&_e[1].type==="linePrefix"&&_e[2].sliceSerialize(_e[1],!0).length>=4?K(ve):fe.interrupt(ge.parser.constructs.flow,me,K)(ve)}}function factoryDestination(fe,K,me,ge,xe,ye,ve,_e,Ee){const be=Ee||Number.POSITIVE_INFINITY;let Ae=0;return Se;function Se(Be){return Be===60?(fe.enter(ge),fe.enter(xe),fe.enter(ye),fe.consume(Be),fe.exit(ye),Ce):Be===null||Be===32||Be===41||asciiControl(Be)?me(Be):(fe.enter(ge),fe.enter(ve),fe.enter(_e),fe.enter("chunkString",{contentType:"string"}),De(Be))}function Ce(Be){return Be===62?(fe.enter(ye),fe.consume(Be),fe.exit(ye),fe.exit(xe),fe.exit(ge),K):(fe.enter(_e),fe.enter("chunkString",{contentType:"string"}),Te(Be))}function Te(Be){return Be===62?(fe.exit("chunkString"),fe.exit(_e),Ce(Be)):Be===null||Be===60||markdownLineEnding(Be)?me(Be):(fe.consume(Be),Be===92?Re:Te)}function Re(Be){return Be===60||Be===62||Be===92?(fe.consume(Be),Te):Te(Be)}function De(Be){return!Ae&&(Be===null||Be===41||markdownLineEndingOrSpace(Be))?(fe.exit("chunkString"),fe.exit(_e),fe.exit(ve),fe.exit(ge),K(Be)):Ae<be&&Be===40?(fe.consume(Be),Ae++,De):Be===41?(fe.consume(Be),Ae--,De):Be===null||Be===32||Be===40||asciiControl(Be)?me(Be):(fe.consume(Be),Be===92?Ie:De)}function Ie(Be){return Be===40||Be===41||Be===92?(fe.consume(Be),De):De(Be)}}function factoryLabel(fe,K,me,ge,xe,ye){const ve=this;let _e=0,Ee;return be;function be(Te){return fe.enter(ge),fe.enter(xe),fe.consume(Te),fe.exit(xe),fe.enter(ye),Ae}function Ae(Te){return _e>999||Te===null||Te===91||Te===93&&!Ee||Te===94&&!_e&&"_hiddenFootnoteSupport"in ve.parser.constructs?me(Te):Te===93?(fe.exit(ye),fe.enter(xe),fe.consume(Te),fe.exit(xe),fe.exit(ge),K):markdownLineEnding(Te)?(fe.enter("lineEnding"),fe.consume(Te),fe.exit("lineEnding"),Ae):(fe.enter("chunkString",{contentType:"string"}),Se(Te))}function Se(Te){return Te===null||Te===91||Te===93||markdownLineEnding(Te)||_e++>999?(fe.exit("chunkString"),Ae(Te)):(fe.consume(Te),Ee||(Ee=!markdownSpace(Te)),Te===92?Ce:Se)}function Ce(Te){return Te===91||Te===92||Te===93?(fe.consume(Te),_e++,Se):Se(Te)}}function factoryTitle(fe,K,me,ge,xe,ye){let ve;return _e;function _e(Ce){return Ce===34||Ce===39||Ce===40?(fe.enter(ge),fe.enter(xe),fe.consume(Ce),fe.exit(xe),ve=Ce===40?41:Ce,Ee):me(Ce)}function Ee(Ce){return Ce===ve?(fe.enter(xe),fe.consume(Ce),fe.exit(xe),fe.exit(ge),K):(fe.enter(ye),be(Ce))}function be(Ce){return Ce===ve?(fe.exit(ye),Ee(ve)):Ce===null?me(Ce):markdownLineEnding(Ce)?(fe.enter("lineEnding"),fe.consume(Ce),fe.exit("lineEnding"),factorySpace(fe,be,"linePrefix")):(fe.enter("chunkString",{contentType:"string"}),Ae(Ce))}function Ae(Ce){return Ce===ve||Ce===null||markdownLineEnding(Ce)?(fe.exit("chunkString"),be(Ce)):(fe.consume(Ce),Ce===92?Se:Ae)}function Se(Ce){return Ce===ve||Ce===92?(fe.consume(Ce),Ae):Ae(Ce)}}function factoryWhitespace(fe,K){let me;return ge;function ge(xe){return markdownLineEnding(xe)?(fe.enter("lineEnding"),fe.consume(xe),fe.exit("lineEnding"),me=!0,ge):markdownSpace(xe)?factorySpace(fe,ge,me?"linePrefix":"lineSuffix")(xe):K(xe)}}function normalizeIdentifier(fe){return fe.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const definition$1={name:"definition",tokenize:tokenizeDefinition},titleBefore={partial:!0,tokenize:tokenizeTitleBefore};function tokenizeDefinition(fe,K,me){const ge=this;let xe;return ye;function ye(Te){return fe.enter("definition"),ve(Te)}function ve(Te){return factoryLabel.call(ge,fe,_e,me,"definitionLabel","definitionLabelMarker","definitionLabelString")(Te)}function _e(Te){return xe=normalizeIdentifier(ge.sliceSerialize(ge.events[ge.events.length-1][1]).slice(1,-1)),Te===58?(fe.enter("definitionMarker"),fe.consume(Te),fe.exit("definitionMarker"),Ee):me(Te)}function Ee(Te){return markdownLineEndingOrSpace(Te)?factoryWhitespace(fe,be)(Te):be(Te)}function be(Te){return factoryDestination(fe,Ae,me,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(Te)}function Ae(Te){return fe.attempt(titleBefore,Se,Se)(Te)}function Se(Te){return markdownSpace(Te)?factorySpace(fe,Ce,"whitespace")(Te):Ce(Te)}function Ce(Te){return Te===null||markdownLineEnding(Te)?(fe.exit("definition"),ge.parser.defined.push(xe),K(Te)):me(Te)}}function tokenizeTitleBefore(fe,K,me){return ge;function ge(_e){return markdownLineEndingOrSpace(_e)?factoryWhitespace(fe,xe)(_e):me(_e)}function xe(_e){return factoryTitle(fe,ye,me,"definitionTitle","definitionTitleMarker","definitionTitleString")(_e)}function ye(_e){return markdownSpace(_e)?factorySpace(fe,ve,"whitespace")(_e):ve(_e)}function ve(_e){return _e===null||markdownLineEnding(_e)?K(_e):me(_e)}}const hardBreakEscape={name:"hardBreakEscape",tokenize:tokenizeHardBreakEscape};function tokenizeHardBreakEscape(fe,K,me){return ge;function ge(ye){return fe.enter("hardBreakEscape"),fe.consume(ye),xe}function xe(ye){return markdownLineEnding(ye)?(fe.exit("hardBreakEscape"),K(ye)):me(ye)}}const headingAtx={name:"headingAtx",resolve:resolveHeadingAtx,tokenize:tokenizeHeadingAtx};function resolveHeadingAtx(fe,K){let me=fe.length-2,ge=3,xe,ye;return fe[ge][1].type==="whitespace"&&(ge+=2),me-2>ge&&fe[me][1].type==="whitespace"&&(me-=2),fe[me][1].type==="atxHeadingSequence"&&(ge===me-1||me-4>ge&&fe[me-2][1].type==="whitespace")&&(me-=ge+1===me?2:4),me>ge&&(xe={type:"atxHeadingText",start:fe[ge][1].start,end:fe[me][1].end},ye={type:"chunkText",start:fe[ge][1].start,end:fe[me][1].end,contentType:"text"},splice(fe,ge,me-ge+1,[["enter",xe,K],["enter",ye,K],["exit",ye,K],["exit",xe,K]])),fe}function tokenizeHeadingAtx(fe,K,me){let ge=0;return xe;function xe(Ae){return fe.enter("atxHeading"),ye(Ae)}function ye(Ae){return fe.enter("atxHeadingSequence"),ve(Ae)}function ve(Ae){return Ae===35&&ge++<6?(fe.consume(Ae),ve):Ae===null||markdownLineEndingOrSpace(Ae)?(fe.exit("atxHeadingSequence"),_e(Ae)):me(Ae)}function _e(Ae){return Ae===35?(fe.enter("atxHeadingSequence"),Ee(Ae)):Ae===null||markdownLineEnding(Ae)?(fe.exit("atxHeading"),K(Ae)):markdownSpace(Ae)?factorySpace(fe,_e,"whitespace")(Ae):(fe.enter("atxHeadingText"),be(Ae))}function Ee(Ae){return Ae===35?(fe.consume(Ae),Ee):(fe.exit("atxHeadingSequence"),_e(Ae))}function be(Ae){return Ae===null||Ae===35||markdownLineEndingOrSpace(Ae)?(fe.exit("atxHeadingText"),_e(Ae)):(fe.consume(Ae),be)}}const htmlBlockNames=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],htmlRawNames=["pre","script","style","textarea"],htmlFlow={concrete:!0,name:"htmlFlow",resolveTo:resolveToHtmlFlow,tokenize:tokenizeHtmlFlow},blankLineBefore$1={partial:!0,tokenize:tokenizeBlankLineBefore},nonLazyContinuationStart={partial:!0,tokenize:tokenizeNonLazyContinuationStart};function resolveToHtmlFlow(fe){let K=fe.length;for(;K--&&!(fe[K][0]==="enter"&&fe[K][1].type==="htmlFlow"););return K>1&&fe[K-2][1].type==="linePrefix"&&(fe[K][1].start=fe[K-2][1].start,fe[K+1][1].start=fe[K-2][1].start,fe.splice(K-2,2)),fe}function tokenizeHtmlFlow(fe,K,me){const ge=this;let xe,ye,ve,_e,Ee;return be;function be(Pt){return Ae(Pt)}function Ae(Pt){return fe.enter("htmlFlow"),fe.enter("htmlFlowData"),fe.consume(Pt),Se}function Se(Pt){return Pt===33?(fe.consume(Pt),Ce):Pt===47?(fe.consume(Pt),ye=!0,De):Pt===63?(fe.consume(Pt),xe=3,ge.interrupt?K:Je):asciiAlpha(Pt)?(fe.consume(Pt),ve=String.fromCharCode(Pt),Ie):me(Pt)}function Ce(Pt){return Pt===45?(fe.consume(Pt),xe=2,Te):Pt===91?(fe.consume(Pt),xe=5,_e=0,Re):asciiAlpha(Pt)?(fe.consume(Pt),xe=4,ge.interrupt?K:Je):me(Pt)}function Te(Pt){return Pt===45?(fe.consume(Pt),ge.interrupt?K:Je):me(Pt)}function Re(Pt){const Yt="CDATA[";return Pt===Yt.charCodeAt(_e++)?(fe.consume(Pt),_e===Yt.length?ge.interrupt?K:qe:Re):me(Pt)}function De(Pt){return asciiAlpha(Pt)?(fe.consume(Pt),ve=String.fromCharCode(Pt),Ie):me(Pt)}function Ie(Pt){if(Pt===null||Pt===47||Pt===62||markdownLineEndingOrSpace(Pt)){const Yt=Pt===47,Gt=ve.toLowerCase();return!Yt&&!ye&&htmlRawNames.includes(Gt)?(xe=1,ge.interrupt?K(Pt):qe(Pt)):htmlBlockNames.includes(ve.toLowerCase())?(xe=6,Yt?(fe.consume(Pt),Be):ge.interrupt?K(Pt):qe(Pt)):(xe=7,ge.interrupt&&!ge.parser.lazy[ge.now().line]?me(Pt):ye?Le(Pt):Oe(Pt))}return Pt===45||asciiAlphanumeric(Pt)?(fe.consume(Pt),ve+=String.fromCharCode(Pt),Ie):me(Pt)}function Be(Pt){return Pt===62?(fe.consume(Pt),ge.interrupt?K:qe):me(Pt)}function Le(Pt){return markdownSpace(Pt)?(fe.consume(Pt),Le):Ge(Pt)}function Oe(Pt){return Pt===47?(fe.consume(Pt),Ge):Pt===58||Pt===95||asciiAlpha(Pt)?(fe.consume(Pt),Fe):markdownSpace(Pt)?(fe.consume(Pt),Oe):Ge(Pt)}function Fe(Pt){return Pt===45||Pt===46||Pt===58||Pt===95||asciiAlphanumeric(Pt)?(fe.consume(Pt),Fe):Ue(Pt)}function Ue(Pt){return Pt===61?(fe.consume(Pt),Ne):markdownSpace(Pt)?(fe.consume(Pt),Ue):Oe(Pt)}function Ne(Pt){return Pt===null||Pt===60||Pt===61||Pt===62||Pt===96?me(Pt):Pt===34||Pt===39?(fe.consume(Pt),Ee=Pt,He):markdownSpace(Pt)?(fe.consume(Pt),Ne):ze(Pt)}function He(Pt){return Pt===Ee?(fe.consume(Pt),Ee=null,je):Pt===null||markdownLineEnding(Pt)?me(Pt):(fe.consume(Pt),He)}function ze(Pt){return Pt===null||Pt===34||Pt===39||Pt===47||Pt===60||Pt===61||Pt===62||Pt===96||markdownLineEndingOrSpace(Pt)?Ue(Pt):(fe.consume(Pt),ze)}function je(Pt){return Pt===47||Pt===62||markdownSpace(Pt)?Oe(Pt):me(Pt)}function Ge(Pt){return Pt===62?(fe.consume(Pt),Xe):me(Pt)}function Xe(Pt){return Pt===null||markdownLineEnding(Pt)?qe(Pt):markdownSpace(Pt)?(fe.consume(Pt),Xe):me(Pt)}function qe(Pt){return Pt===45&&xe===2?(fe.consume(Pt),Ye):Pt===60&&xe===1?(fe.consume(Pt),at):Pt===62&&xe===4?(fe.consume(Pt),Wt):Pt===63&&xe===3?(fe.consume(Pt),Je):Pt===93&&xe===5?(fe.consume(Pt),Ft):markdownLineEnding(Pt)&&(xe===6||xe===7)?(fe.exit("htmlFlowData"),fe.check(blankLineBefore$1,Kt,Qe)(Pt)):Pt===null||markdownLineEnding(Pt)?(fe.exit("htmlFlowData"),Qe(Pt)):(fe.consume(Pt),qe)}function Qe(Pt){return fe.check(nonLazyContinuationStart,nt,Kt)(Pt)}function nt(Pt){return fe.enter("lineEnding"),fe.consume(Pt),fe.exit("lineEnding"),Nt}function Nt(Pt){return Pt===null||markdownLineEnding(Pt)?Qe(Pt):(fe.enter("htmlFlowData"),qe(Pt))}function Ye(Pt){return Pt===45?(fe.consume(Pt),Je):qe(Pt)}function at(Pt){return Pt===47?(fe.consume(Pt),ve="",rt):qe(Pt)}function rt(Pt){if(Pt===62){const Yt=ve.toLowerCase();return htmlRawNames.includes(Yt)?(fe.consume(Pt),Wt):qe(Pt)}return asciiAlpha(Pt)&&ve.length<8?(fe.consume(Pt),ve+=String.fromCharCode(Pt),rt):qe(Pt)}function Ft(Pt){return Pt===93?(fe.consume(Pt),Je):qe(Pt)}function Je(Pt){return Pt===62?(fe.consume(Pt),Wt):Pt===45&&xe===2?(fe.consume(Pt),Je):qe(Pt)}function Wt(Pt){return Pt===null||markdownLineEnding(Pt)?(fe.exit("htmlFlowData"),Kt(Pt)):(fe.consume(Pt),Wt)}function Kt(Pt){return fe.exit("htmlFlow"),K(Pt)}}function tokenizeNonLazyContinuationStart(fe,K,me){const ge=this;return xe;function xe(ve){return markdownLineEnding(ve)?(fe.enter("lineEnding"),fe.consume(ve),fe.exit("lineEnding"),ye):me(ve)}function ye(ve){return ge.parser.lazy[ge.now().line]?me(ve):K(ve)}}function tokenizeBlankLineBefore(fe,K,me){return ge;function ge(xe){return fe.enter("lineEnding"),fe.consume(xe),fe.exit("lineEnding"),fe.attempt(blankLine,K,me)}}const htmlText={name:"htmlText",tokenize:tokenizeHtmlText};function tokenizeHtmlText(fe,K,me){const ge=this;let xe,ye,ve;return _e;function _e(Je){return fe.enter("htmlText"),fe.enter("htmlTextData"),fe.consume(Je),Ee}function Ee(Je){return Je===33?(fe.consume(Je),be):Je===47?(fe.consume(Je),Ue):Je===63?(fe.consume(Je),Oe):asciiAlpha(Je)?(fe.consume(Je),ze):me(Je)}function be(Je){return Je===45?(fe.consume(Je),Ae):Je===91?(fe.consume(Je),ye=0,Re):asciiAlpha(Je)?(fe.consume(Je),Le):me(Je)}function Ae(Je){return Je===45?(fe.consume(Je),Te):me(Je)}function Se(Je){return Je===null?me(Je):Je===45?(fe.consume(Je),Ce):markdownLineEnding(Je)?(ve=Se,at(Je)):(fe.consume(Je),Se)}function Ce(Je){return Je===45?(fe.consume(Je),Te):Se(Je)}function Te(Je){return Je===62?Ye(Je):Je===45?Ce(Je):Se(Je)}function Re(Je){const Wt="CDATA[";return Je===Wt.charCodeAt(ye++)?(fe.consume(Je),ye===Wt.length?De:Re):me(Je)}function De(Je){return Je===null?me(Je):Je===93?(fe.consume(Je),Ie):markdownLineEnding(Je)?(ve=De,at(Je)):(fe.consume(Je),De)}function Ie(Je){return Je===93?(fe.consume(Je),Be):De(Je)}function Be(Je){return Je===62?Ye(Je):Je===93?(fe.consume(Je),Be):De(Je)}function Le(Je){return Je===null||Je===62?Ye(Je):markdownLineEnding(Je)?(ve=Le,at(Je)):(fe.consume(Je),Le)}function Oe(Je){return Je===null?me(Je):Je===63?(fe.consume(Je),Fe):markdownLineEnding(Je)?(ve=Oe,at(Je)):(fe.consume(Je),Oe)}function Fe(Je){return Je===62?Ye(Je):Oe(Je)}function Ue(Je){return asciiAlpha(Je)?(fe.consume(Je),Ne):me(Je)}function Ne(Je){return Je===45||asciiAlphanumeric(Je)?(fe.consume(Je),Ne):He(Je)}function He(Je){return markdownLineEnding(Je)?(ve=He,at(Je)):markdownSpace(Je)?(fe.consume(Je),He):Ye(Je)}function ze(Je){return Je===45||asciiAlphanumeric(Je)?(fe.consume(Je),ze):Je===47||Je===62||markdownLineEndingOrSpace(Je)?je(Je):me(Je)}function je(Je){return Je===47?(fe.consume(Je),Ye):Je===58||Je===95||asciiAlpha(Je)?(fe.consume(Je),Ge):markdownLineEnding(Je)?(ve=je,at(Je)):markdownSpace(Je)?(fe.consume(Je),je):Ye(Je)}function Ge(Je){return Je===45||Je===46||Je===58||Je===95||asciiAlphanumeric(Je)?(fe.consume(Je),Ge):Xe(Je)}function Xe(Je){return Je===61?(fe.consume(Je),qe):markdownLineEnding(Je)?(ve=Xe,at(Je)):markdownSpace(Je)?(fe.consume(Je),Xe):je(Je)}function qe(Je){return Je===null||Je===60||Je===61||Je===62||Je===96?me(Je):Je===34||Je===39?(fe.consume(Je),xe=Je,Qe):markdownLineEnding(Je)?(ve=qe,at(Je)):markdownSpace(Je)?(fe.consume(Je),qe):(fe.consume(Je),nt)}function Qe(Je){return Je===xe?(fe.consume(Je),xe=void 0,Nt):Je===null?me(Je):markdownLineEnding(Je)?(ve=Qe,at(Je)):(fe.consume(Je),Qe)}function nt(Je){return Je===null||Je===34||Je===39||Je===60||Je===61||Je===96?me(Je):Je===47||Je===62||markdownLineEndingOrSpace(Je)?je(Je):(fe.consume(Je),nt)}function Nt(Je){return Je===47||Je===62||markdownLineEndingOrSpace(Je)?je(Je):me(Je)}function Ye(Je){return Je===62?(fe.consume(Je),fe.exit("htmlTextData"),fe.exit("htmlText"),K):me(Je)}function at(Je){return fe.exit("htmlTextData"),fe.enter("lineEnding"),fe.consume(Je),fe.exit("lineEnding"),rt}function rt(Je){return markdownSpace(Je)?factorySpace(fe,Ft,"linePrefix",ge.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Je):Ft(Je)}function Ft(Je){return fe.enter("htmlTextData"),ve(Je)}}const labelEnd={name:"labelEnd",resolveAll:resolveAllLabelEnd,resolveTo:resolveToLabelEnd,tokenize:tokenizeLabelEnd},resourceConstruct={tokenize:tokenizeResource},referenceFullConstruct={tokenize:tokenizeReferenceFull},referenceCollapsedConstruct={tokenize:tokenizeReferenceCollapsed};function resolveAllLabelEnd(fe){let K=-1;const me=[];for(;++K<fe.length;){const ge=fe[K][1];if(me.push(fe[K]),ge.type==="labelImage"||ge.type==="labelLink"||ge.type==="labelEnd"){const xe=ge.type==="labelImage"?4:2;ge.type="data",K+=xe}}return fe.length!==me.length&&splice(fe,0,fe.length,me),fe}function resolveToLabelEnd(fe,K){let me=fe.length,ge=0,xe,ye,ve,_e;for(;me--;)if(xe=fe[me][1],ye){if(xe.type==="link"||xe.type==="labelLink"&&xe._inactive)break;fe[me][0]==="enter"&&xe.type==="labelLink"&&(xe._inactive=!0)}else if(ve){if(fe[me][0]==="enter"&&(xe.type==="labelImage"||xe.type==="labelLink")&&!xe._balanced&&(ye=me,xe.type!=="labelLink")){ge=2;break}}else xe.type==="labelEnd"&&(ve=me);const Ee={type:fe[ye][1].type==="labelLink"?"link":"image",start:{...fe[ye][1].start},end:{...fe[fe.length-1][1].end}},be={type:"label",start:{...fe[ye][1].start},end:{...fe[ve][1].end}},Ae={type:"labelText",start:{...fe[ye+ge+2][1].end},end:{...fe[ve-2][1].start}};return _e=[["enter",Ee,K],["enter",be,K]],_e=push(_e,fe.slice(ye+1,ye+ge+3)),_e=push(_e,[["enter",Ae,K]]),_e=push(_e,resolveAll(K.parser.constructs.insideSpan.null,fe.slice(ye+ge+4,ve-3),K)),_e=push(_e,[["exit",Ae,K],fe[ve-2],fe[ve-1],["exit",be,K]]),_e=push(_e,fe.slice(ve+1)),_e=push(_e,[["exit",Ee,K]]),splice(fe,ye,fe.length,_e),fe}function tokenizeLabelEnd(fe,K,me){const ge=this;let xe=ge.events.length,ye,ve;for(;xe--;)if((ge.events[xe][1].type==="labelImage"||ge.events[xe][1].type==="labelLink")&&!ge.events[xe][1]._balanced){ye=ge.events[xe][1];break}return _e;function _e(Ce){return ye?ye._inactive?Se(Ce):(ve=ge.parser.defined.includes(normalizeIdentifier(ge.sliceSerialize({start:ye.end,end:ge.now()}))),fe.enter("labelEnd"),fe.enter("labelMarker"),fe.consume(Ce),fe.exit("labelMarker"),fe.exit("labelEnd"),Ee):me(Ce)}function Ee(Ce){return Ce===40?fe.attempt(resourceConstruct,Ae,ve?Ae:Se)(Ce):Ce===91?fe.attempt(referenceFullConstruct,Ae,ve?be:Se)(Ce):ve?Ae(Ce):Se(Ce)}function be(Ce){return fe.attempt(referenceCollapsedConstruct,Ae,Se)(Ce)}function Ae(Ce){return K(Ce)}function Se(Ce){return ye._balanced=!0,me(Ce)}}function tokenizeResource(fe,K,me){return ge;function ge(Se){return fe.enter("resource"),fe.enter("resourceMarker"),fe.consume(Se),fe.exit("resourceMarker"),xe}function xe(Se){return markdownLineEndingOrSpace(Se)?factoryWhitespace(fe,ye)(Se):ye(Se)}function ye(Se){return Se===41?Ae(Se):factoryDestination(fe,ve,_e,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(Se)}function ve(Se){return markdownLineEndingOrSpace(Se)?factoryWhitespace(fe,Ee)(Se):Ae(Se)}function _e(Se){return me(Se)}function Ee(Se){return Se===34||Se===39||Se===40?factoryTitle(fe,be,me,"resourceTitle","resourceTitleMarker","resourceTitleString")(Se):Ae(Se)}function be(Se){return markdownLineEndingOrSpace(Se)?factoryWhitespace(fe,Ae)(Se):Ae(Se)}function Ae(Se){return Se===41?(fe.enter("resourceMarker"),fe.consume(Se),fe.exit("resourceMarker"),fe.exit("resource"),K):me(Se)}}function tokenizeReferenceFull(fe,K,me){const ge=this;return xe;function xe(_e){return factoryLabel.call(ge,fe,ye,ve,"reference","referenceMarker","referenceString")(_e)}function ye(_e){return ge.parser.defined.includes(normalizeIdentifier(ge.sliceSerialize(ge.events[ge.events.length-1][1]).slice(1,-1)))?K(_e):me(_e)}function ve(_e){return me(_e)}}function tokenizeReferenceCollapsed(fe,K,me){return ge;function ge(ye){return fe.enter("reference"),fe.enter("referenceMarker"),fe.consume(ye),fe.exit("referenceMarker"),xe}function xe(ye){return ye===93?(fe.enter("referenceMarker"),fe.consume(ye),fe.exit("referenceMarker"),fe.exit("reference"),K):me(ye)}}const labelStartImage={name:"labelStartImage",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartImage};function tokenizeLabelStartImage(fe,K,me){const ge=this;return xe;function xe(_e){return fe.enter("labelImage"),fe.enter("labelImageMarker"),fe.consume(_e),fe.exit("labelImageMarker"),ye}function ye(_e){return _e===91?(fe.enter("labelMarker"),fe.consume(_e),fe.exit("labelMarker"),fe.exit("labelImage"),ve):me(_e)}function ve(_e){return _e===94&&"_hiddenFootnoteSupport"in ge.parser.constructs?me(_e):K(_e)}}const labelStartLink={name:"labelStartLink",resolveAll:labelEnd.resolveAll,tokenize:tokenizeLabelStartLink};function tokenizeLabelStartLink(fe,K,me){const ge=this;return xe;function xe(ve){return fe.enter("labelLink"),fe.enter("labelMarker"),fe.consume(ve),fe.exit("labelMarker"),fe.exit("labelLink"),ye}function ye(ve){return ve===94&&"_hiddenFootnoteSupport"in ge.parser.constructs?me(ve):K(ve)}}const lineEnding={name:"lineEnding",tokenize:tokenizeLineEnding};function tokenizeLineEnding(fe,K){return me;function me(ge){return fe.enter("lineEnding"),fe.consume(ge),fe.exit("lineEnding"),factorySpace(fe,K,"linePrefix")}}const thematicBreak$2={name:"thematicBreak",tokenize:tokenizeThematicBreak};function tokenizeThematicBreak(fe,K,me){let ge=0,xe;return ye;function ye(be){return fe.enter("thematicBreak"),ve(be)}function ve(be){return xe=be,_e(be)}function _e(be){return be===xe?(fe.enter("thematicBreakSequence"),Ee(be)):ge>=3&&(be===null||markdownLineEnding(be))?(fe.exit("thematicBreak"),K(be)):me(be)}function Ee(be){return be===xe?(fe.consume(be),ge++,Ee):(fe.exit("thematicBreakSequence"),markdownSpace(be)?factorySpace(fe,_e,"whitespace")(be):_e(be))}}const list$2={continuation:{tokenize:tokenizeListContinuation},exit:tokenizeListEnd,name:"list",tokenize:tokenizeListStart},listItemPrefixWhitespaceConstruct={partial:!0,tokenize:tokenizeListItemPrefixWhitespace},indentConstruct={partial:!0,tokenize:tokenizeIndent$1};function tokenizeListStart(fe,K,me){const ge=this,xe=ge.events[ge.events.length-1];let ye=xe&&xe[1].type==="linePrefix"?xe[2].sliceSerialize(xe[1],!0).length:0,ve=0;return _e;function _e(Te){const Re=ge.containerState.type||(Te===42||Te===43||Te===45?"listUnordered":"listOrdered");if(Re==="listUnordered"?!ge.containerState.marker||Te===ge.containerState.marker:asciiDigit(Te)){if(ge.containerState.type||(ge.containerState.type=Re,fe.enter(Re,{_container:!0})),Re==="listUnordered")return fe.enter("listItemPrefix"),Te===42||Te===45?fe.check(thematicBreak$2,me,be)(Te):be(Te);if(!ge.interrupt||Te===49)return fe.enter("listItemPrefix"),fe.enter("listItemValue"),Ee(Te)}return me(Te)}function Ee(Te){return asciiDigit(Te)&&++ve<10?(fe.consume(Te),Ee):(!ge.interrupt||ve<2)&&(ge.containerState.marker?Te===ge.containerState.marker:Te===41||Te===46)?(fe.exit("listItemValue"),be(Te)):me(Te)}function be(Te){return fe.enter("listItemMarker"),fe.consume(Te),fe.exit("listItemMarker"),ge.containerState.marker=ge.containerState.marker||Te,fe.check(blankLine,ge.interrupt?me:Ae,fe.attempt(listItemPrefixWhitespaceConstruct,Ce,Se))}function Ae(Te){return ge.containerState.initialBlankLine=!0,ye++,Ce(Te)}function Se(Te){return markdownSpace(Te)?(fe.enter("listItemPrefixWhitespace"),fe.consume(Te),fe.exit("listItemPrefixWhitespace"),Ce):me(Te)}function Ce(Te){return ge.containerState.size=ye+ge.sliceSerialize(fe.exit("listItemPrefix"),!0).length,K(Te)}}function tokenizeListContinuation(fe,K,me){const ge=this;return ge.containerState._closeFlow=void 0,fe.check(blankLine,xe,ye);function xe(_e){return ge.containerState.furtherBlankLines=ge.containerState.furtherBlankLines||ge.containerState.initialBlankLine,factorySpace(fe,K,"listItemIndent",ge.containerState.size+1)(_e)}function ye(_e){return ge.containerState.furtherBlankLines||!markdownSpace(_e)?(ge.containerState.furtherBlankLines=void 0,ge.containerState.initialBlankLine=void 0,ve(_e)):(ge.containerState.furtherBlankLines=void 0,ge.containerState.initialBlankLine=void 0,fe.attempt(indentConstruct,K,ve)(_e))}function ve(_e){return ge.containerState._closeFlow=!0,ge.interrupt=void 0,factorySpace(fe,fe.attempt(list$2,K,me),"linePrefix",ge.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(_e)}}function tokenizeIndent$1(fe,K,me){const ge=this;return factorySpace(fe,xe,"listItemIndent",ge.containerState.size+1);function xe(ye){const ve=ge.events[ge.events.length-1];return ve&&ve[1].type==="listItemIndent"&&ve[2].sliceSerialize(ve[1],!0).length===ge.containerState.size?K(ye):me(ye)}}function tokenizeListEnd(fe){fe.exit(this.containerState.type)}function tokenizeListItemPrefixWhitespace(fe,K,me){const ge=this;return factorySpace(fe,xe,"listItemPrefixWhitespace",ge.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function xe(ye){const ve=ge.events[ge.events.length-1];return!markdownSpace(ye)&&ve&&ve[1].type==="listItemPrefixWhitespace"?K(ye):me(ye)}}const setextUnderline={name:"setextUnderline",resolveTo:resolveToSetextUnderline,tokenize:tokenizeSetextUnderline};function resolveToSetextUnderline(fe,K){let me=fe.length,ge,xe,ye;for(;me--;)if(fe[me][0]==="enter"){if(fe[me][1].type==="content"){ge=me;break}fe[me][1].type==="paragraph"&&(xe=me)}else fe[me][1].type==="content"&&fe.splice(me,1),!ye&&fe[me][1].type==="definition"&&(ye=me);const ve={type:"setextHeading",start:{...fe[ge][1].start},end:{...fe[fe.length-1][1].end}};return fe[xe][1].type="setextHeadingText",ye?(fe.splice(xe,0,["enter",ve,K]),fe.splice(ye+1,0,["exit",fe[ge][1],K]),fe[ge][1].end={...fe[ye][1].end}):fe[ge][1]=ve,fe.push(["exit",ve,K]),fe}function tokenizeSetextUnderline(fe,K,me){const ge=this;let xe;return ye;function ye(be){let Ae=ge.events.length,Se;for(;Ae--;)if(ge.events[Ae][1].type!=="lineEnding"&&ge.events[Ae][1].type!=="linePrefix"&&ge.events[Ae][1].type!=="content"){Se=ge.events[Ae][1].type==="paragraph";break}return!ge.parser.lazy[ge.now().line]&&(ge.interrupt||Se)?(fe.enter("setextHeadingLine"),xe=be,ve(be)):me(be)}function ve(be){return fe.enter("setextHeadingLineSequence"),_e(be)}function _e(be){return be===xe?(fe.consume(be),_e):(fe.exit("setextHeadingLineSequence"),markdownSpace(be)?factorySpace(fe,Ee,"lineSuffix")(be):Ee(be))}function Ee(be){return be===null||markdownLineEnding(be)?(fe.exit("setextHeadingLine"),K(be)):me(be)}}const blankLineBefore={tokenize:tokenizeNextBlank,partial:!0},trouble="https://github.com/micromark/micromark-extension-mdxjs-esm",allowedAcornTypes=new Set(["ExportAllDeclaration","ExportDefaultDeclaration","ExportNamedDeclaration","ImportDeclaration"]);function mdxjsEsm(fe){const K={tokenize:xe,concrete:!0};if(!fe||!fe.acorn||!fe.acorn.parse)throw new Error("Expected an `acorn` instance passed in as `options.acorn`");const me=fe.acorn,ge=Object.assign({ecmaVersion:2024,sourceType:"module"},fe.acornOptions,{locations:!0});return{flow:{101:K,105:K}};function xe(ye,ve,_e){const Ee=this,be=Ee.parser.definedModuleSpecifiers||(Ee.parser.definedModuleSpecifiers=[]),Ae=this.events.length+1;let Se="";return Ee.interrupt?_e:Ce;function Ce(Le){return Ee.now().column>1?_e(Le):(ye.enter("mdxjsEsm"),ye.enter("mdxjsEsmData"),ye.consume(Le),Se+=String.fromCharCode(Le),Te)}function Te(Le){return asciiAlpha(Le)?(ye.consume(Le),Se+=String.fromCharCode(Le),Te):(Se==="import"||Se==="export")&&Le===32?(ye.consume(Le),Re):_e(Le)}function Re(Le){return Le===null||markdownLineEnding(Le)?(ye.exit("mdxjsEsmData"),De(Le)):(ye.consume(Le),Re)}function De(Le){return Le===null?Be(Le):markdownLineEnding(Le)?ye.check(blankLineBefore,Be,Ie)(Le):(ye.enter("mdxjsEsmData"),Re(Le))}function Ie(Le){return ye.enter("lineEnding"),ye.consume(Le),ye.exit("lineEnding"),De}function Be(Le){const Oe=eventsToAcorn(Ee.events.slice(Ae),{acorn:me,acornOptions:ge,tokenTypes:["mdxjsEsmData"],prefix:be.length>0?"var "+be.join(",")+`
`:""});if(Oe.error){if(Le!==null&&Oe.swallow)return Ie(Le);const Ue=new VFileMessage("Could not parse import/exports with acorn",{cause:Oe.error,place:{line:Oe.error.loc.line,column:Oe.error.loc.column+1,offset:Oe.error.pos},ruleId:"acorn",source:"micromark-extension-mdxjs-esm"});throw Ue.url=trouble+"#could-not-parse-importexports-with-acorn",Ue}be.length>0&&Oe.estree.body.shift();let Fe=-1;for(;++Fe<Oe.estree.body.length;){const Ue=Oe.estree.body[Fe];if(!allowedAcornTypes.has(Ue.type)){const Ne=new VFileMessage("Unexpected `"+Ue.type+"` in code: only import/exports are supported",{place:positionFromEstree(Ue),ruleId:"non-esm",source:"micromark-extension-mdxjs-esm"});throw Ne.url=trouble+"#unexpected-type-in-code-only-importexports-are-supported",Ne}if(Ue.type==="ImportDeclaration"&&!Ee.interrupt){let Ne=-1;for(;++Ne<Ue.specifiers.length;){const He=Ue.specifiers[Ne];be.push(He.local.name)}}}return Object.assign(ye.exit("mdxjsEsm"),fe.addResult?{estree:Oe.estree}:void 0),ve(Le)}}}function tokenizeNextBlank(fe,K,me){return ge;function ge(xe){return fe.enter("lineEndingBlank"),fe.consume(xe),fe.exit("lineEndingBlank"),fe.attempt(blankLine,K,me)}}const hasOwnProperty={}.hasOwnProperty;function combineExtensions(fe){const K={};let me=-1;for(;++me<fe.length;)syntaxExtension(K,fe[me]);return K}function syntaxExtension(fe,K){let me;for(me in K){const xe=(hasOwnProperty.call(fe,me)?fe[me]:void 0)||(fe[me]={}),ye=K[me];let ve;if(ye)for(ve in ye){hasOwnProperty.call(xe,ve)||(xe[ve]=[]);const _e=ye[ve];constructs(xe[ve],Array.isArray(_e)?_e:_e?[_e]:[])}}}function constructs(fe,K){let me=-1;const ge=[];for(;++me<K.length;)(K[me].add==="after"?fe:ge).push(K[me]);splice(fe,0,0,ge)}function mdxjs(fe){const K=Object.assign({acorn:acornExports.Parser.extend(acornJsx()),acornOptions:{ecmaVersion:2024,sourceType:"module"},addResult:!0},fe);return combineExtensions([mdxjsEsm(K),mdxExpression(K),mdxJsx(K),mdxMd()])}const emptyOptions$3={};function remarkMdx(fe){const K=this,me=fe||emptyOptions$3,ge=K.data(),xe=ge.micromarkExtensions||(ge.micromarkExtensions=[]),ye=ge.fromMarkdownExtensions||(ge.fromMarkdownExtensions=[]),ve=ge.toMarkdownExtensions||(ge.toMarkdownExtensions=[]);xe.push(mdxjs(me)),ye.push(mdxFromMarkdown()),ve.push(mdxToMarkdown(me))}const emptyOptions$2={};function toString$2(fe,K){const me=emptyOptions$2,ge=typeof me.includeImageAlt=="boolean"?me.includeImageAlt:!0,xe=typeof me.includeHtml=="boolean"?me.includeHtml:!0;return one$1(fe,ge,xe)}function one$1(fe,K,me){if(node(fe)){if("value"in fe)return fe.type==="html"&&!me?"":fe.value;if(K&&"alt"in fe&&fe.alt)return fe.alt;if("children"in fe)return all$1(fe.children,K,me)}return Array.isArray(fe)?all$1(fe,K,me):""}function all$1(fe,K,me){const ge=[];let xe=-1;for(;++xe<fe.length;)ge[xe]=one$1(fe[xe],K,me);return ge.join("")}function node(fe){return!!(fe&&typeof fe=="object")}function decodeNumericCharacterReference(fe,K){const me=Number.parseInt(fe,K);return me<9||me===11||me>13&&me<32||me>126&&me<160||me>55295&&me<57344||me>64975&&me<65008||(me&65535)===65535||(me&65535)===65534||me>1114111?"�":String.fromCodePoint(me)}function normalizeUri(fe){const K=[];let me=-1,ge=0,xe=0;for(;++me<fe.length;){const ye=fe.charCodeAt(me);let ve="";if(ye===37&&asciiAlphanumeric(fe.charCodeAt(me+1))&&asciiAlphanumeric(fe.charCodeAt(me+2)))xe=2;else if(ye<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(ye))||(ve=String.fromCharCode(ye));else if(ye>55295&&ye<57344){const _e=fe.charCodeAt(me+1);ye<56320&&_e>56319&&_e<57344?(ve=String.fromCharCode(ye,_e),xe=1):ve="�"}else ve=String.fromCharCode(ye);ve&&(K.push(fe.slice(ge,me),encodeURIComponent(ve)),ge=me+xe+1,ve=""),xe&&(me+=xe,xe=0)}return K.join("")+fe.slice(ge)}const content={tokenize:initializeContent};function initializeContent(fe){const K=fe.attempt(this.parser.constructs.contentInitial,ge,xe);let me;return K;function ge(_e){if(_e===null){fe.consume(_e);return}return fe.enter("lineEnding"),fe.consume(_e),fe.exit("lineEnding"),factorySpace(fe,K,"linePrefix")}function xe(_e){return fe.enter("paragraph"),ye(_e)}function ye(_e){const Ee=fe.enter("chunkText",{contentType:"text",previous:me});return me&&(me.next=Ee),me=Ee,ve(_e)}function ve(_e){if(_e===null){fe.exit("chunkText"),fe.exit("paragraph"),fe.consume(_e);return}return markdownLineEnding(_e)?(fe.consume(_e),fe.exit("chunkText"),ye):(fe.consume(_e),ve)}}const document$2={tokenize:initializeDocument},containerConstruct={tokenize:tokenizeContainer};function initializeDocument(fe){const K=this,me=[];let ge=0,xe,ye,ve;return _e;function _e(Oe){if(ge<me.length){const Fe=me[ge];return K.containerState=Fe[1],fe.attempt(Fe[0].continuation,Ee,be)(Oe)}return be(Oe)}function Ee(Oe){if(ge++,K.containerState._closeFlow){K.containerState._closeFlow=void 0,xe&&Le();const Fe=K.events.length;let Ue=Fe,Ne;for(;Ue--;)if(K.events[Ue][0]==="exit"&&K.events[Ue][1].type==="chunkFlow"){Ne=K.events[Ue][1].end;break}Be(ge);let He=Fe;for(;He<K.events.length;)K.events[He][1].end={...Ne},He++;return splice(K.events,Ue+1,0,K.events.slice(Fe)),K.events.length=He,be(Oe)}return _e(Oe)}function be(Oe){if(ge===me.length){if(!xe)return Ce(Oe);if(xe.currentConstruct&&xe.currentConstruct.concrete)return Re(Oe);K.interrupt=!!(xe.currentConstruct&&!xe._gfmTableDynamicInterruptHack)}return K.containerState={},fe.check(containerConstruct,Ae,Se)(Oe)}function Ae(Oe){return xe&&Le(),Be(ge),Ce(Oe)}function Se(Oe){return K.parser.lazy[K.now().line]=ge!==me.length,ve=K.now().offset,Re(Oe)}function Ce(Oe){return K.containerState={},fe.attempt(containerConstruct,Te,Re)(Oe)}function Te(Oe){return ge++,me.push([K.currentConstruct,K.containerState]),Ce(Oe)}function Re(Oe){if(Oe===null){xe&&Le(),Be(0),fe.consume(Oe);return}return xe=xe||K.parser.flow(K.now()),fe.enter("chunkFlow",{_tokenizer:xe,contentType:"flow",previous:ye}),De(Oe)}function De(Oe){if(Oe===null){Ie(fe.exit("chunkFlow"),!0),Be(0),fe.consume(Oe);return}return markdownLineEnding(Oe)?(fe.consume(Oe),Ie(fe.exit("chunkFlow")),ge=0,K.interrupt=void 0,_e):(fe.consume(Oe),De)}function Ie(Oe,Fe){const Ue=K.sliceStream(Oe);if(Fe&&Ue.push(null),Oe.previous=ye,ye&&(ye.next=Oe),ye=Oe,xe.defineSkip(Oe.start),xe.write(Ue),K.parser.lazy[Oe.start.line]){let Ne=xe.events.length;for(;Ne--;)if(xe.events[Ne][1].start.offset<ve&&(!xe.events[Ne][1].end||xe.events[Ne][1].end.offset>ve))return;const He=K.events.length;let ze=He,je,Ge;for(;ze--;)if(K.events[ze][0]==="exit"&&K.events[ze][1].type==="chunkFlow"){if(je){Ge=K.events[ze][1].end;break}je=!0}for(Be(ge),Ne=He;Ne<K.events.length;)K.events[Ne][1].end={...Ge},Ne++;splice(K.events,ze+1,0,K.events.slice(He)),K.events.length=Ne}}function Be(Oe){let Fe=me.length;for(;Fe-- >Oe;){const Ue=me[Fe];K.containerState=Ue[1],Ue[0].exit.call(K,fe)}me.length=Oe}function Le(){xe.write([null]),ye=void 0,xe=void 0,K.containerState._closeFlow=void 0}}function tokenizeContainer(fe,K,me){return factorySpace(fe,fe.attempt(this.parser.constructs.document,K,me),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}const flow$1={tokenize:initializeFlow};function initializeFlow(fe){const K=this,me=fe.attempt(blankLine,ge,fe.attempt(this.parser.constructs.flowInitial,xe,factorySpace(fe,fe.attempt(this.parser.constructs.flow,xe,fe.attempt(content$1,xe)),"linePrefix")));return me;function ge(ye){if(ye===null){fe.consume(ye);return}return fe.enter("lineEndingBlank"),fe.consume(ye),fe.exit("lineEndingBlank"),K.currentConstruct=void 0,me}function xe(ye){if(ye===null){fe.consume(ye);return}return fe.enter("lineEnding"),fe.consume(ye),fe.exit("lineEnding"),K.currentConstruct=void 0,me}}const resolver={resolveAll:createResolver()},string$1=initializeFactory("string"),text$4=initializeFactory("text");function initializeFactory(fe){return{resolveAll:createResolver(fe==="text"?resolveAllLineSuffixes:void 0),tokenize:K};function K(me){const ge=this,xe=this.parser.constructs[fe],ye=me.attempt(xe,ve,_e);return ve;function ve(Ae){return be(Ae)?ye(Ae):_e(Ae)}function _e(Ae){if(Ae===null){me.consume(Ae);return}return me.enter("data"),me.consume(Ae),Ee}function Ee(Ae){return be(Ae)?(me.exit("data"),ye(Ae)):(me.consume(Ae),Ee)}function be(Ae){if(Ae===null)return!0;const Se=xe[Ae];let Ce=-1;if(Se)for(;++Ce<Se.length;){const Te=Se[Ce];if(!Te.previous||Te.previous.call(ge,ge.previous))return!0}return!1}}}function createResolver(fe){return K;function K(me,ge){let xe=-1,ye;for(;++xe<=me.length;)ye===void 0?me[xe]&&me[xe][1].type==="data"&&(ye=xe,xe++):(!me[xe]||me[xe][1].type!=="data")&&(xe!==ye+2&&(me[ye][1].end=me[xe-1][1].end,me.splice(ye+2,xe-ye-2),xe=ye+2),ye=void 0);return fe?fe(me,ge):me}}function resolveAllLineSuffixes(fe,K){let me=0;for(;++me<=fe.length;)if((me===fe.length||fe[me][1].type==="lineEnding")&&fe[me-1][1].type==="data"){const ge=fe[me-1][1],xe=K.sliceStream(ge);let ye=xe.length,ve=-1,_e=0,Ee;for(;ye--;){const be=xe[ye];if(typeof be=="string"){for(ve=be.length;be.charCodeAt(ve-1)===32;)_e++,ve--;if(ve)break;ve=-1}else if(be===-2)Ee=!0,_e++;else if(be!==-1){ye++;break}}if(K._contentTypeTextTrailing&&me===fe.length&&(_e=0),_e){const be={type:me===fe.length||Ee||_e<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:ye?ve:ge.start._bufferIndex+ve,_index:ge.start._index+ye,line:ge.end.line,column:ge.end.column-_e,offset:ge.end.offset-_e},end:{...ge.end}};ge.end={...be.start},ge.start.offset===ge.end.offset?Object.assign(ge,be):(fe.splice(me,0,["enter",be,K],["exit",be,K]),me+=2)}me++}return fe}const document$1={42:list$2,43:list$2,45:list$2,48:list$2,49:list$2,50:list$2,51:list$2,52:list$2,53:list$2,54:list$2,55:list$2,56:list$2,57:list$2,62:blockQuote},contentInitial={91:definition$1},flowInitial={[-2]:codeIndented,[-1]:codeIndented,32:codeIndented},flow={35:headingAtx,42:thematicBreak$2,45:[setextUnderline,thematicBreak$2],60:htmlFlow,61:setextUnderline,95:thematicBreak$2,96:codeFenced,126:codeFenced},string={38:characterReference,92:characterEscape},text$3={[-5]:lineEnding,[-4]:lineEnding,[-3]:lineEnding,33:labelStartImage,38:characterReference,42:attention,60:[autolink,htmlText],91:labelStartLink,92:[hardBreakEscape,characterEscape],93:labelEnd,95:attention,96:codeText},insideSpan={null:[attention,resolver]},attentionMarkers={null:[42,95]},disable={null:[]},defaultConstructs=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers,contentInitial,disable,document:document$1,flow,flowInitial,insideSpan,string,text:text$3},Symbol.toStringTag,{value:"Module"}));function createTokenizer(fe,K,me){let ge={_bufferIndex:-1,_index:0,line:me&&me.line||1,column:me&&me.column||1,offset:me&&me.offset||0};const xe={},ye=[];let ve=[],_e=[];const Ee={attempt:He(Ue),check:He(Ne),consume:Le,enter:Oe,exit:Fe,interrupt:He(Ne,{interrupt:!0})},be={code:null,containerState:{},defineSkip:De,events:[],now:Re,parser:fe,previous:null,sliceSerialize:Ce,sliceStream:Te,write:Se};let Ae=K.tokenize.call(be,Ee);return K.resolveAll&&ye.push(K),be;function Se(Xe){return ve=push(ve,Xe),Ie(),ve[ve.length-1]!==null?[]:(ze(K,0),be.events=resolveAll(ye,be.events,be),be.events)}function Ce(Xe,qe){return serializeChunks(Te(Xe),qe)}function Te(Xe){return sliceChunks(ve,Xe)}function Re(){const{_bufferIndex:Xe,_index:qe,line:Qe,column:nt,offset:Nt}=ge;return{_bufferIndex:Xe,_index:qe,line:Qe,column:nt,offset:Nt}}function De(Xe){xe[Xe.line]=Xe.column,Ge()}function Ie(){let Xe;for(;ge._index<ve.length;){const qe=ve[ge._index];if(typeof qe=="string")for(Xe=ge._index,ge._bufferIndex<0&&(ge._bufferIndex=0);ge._index===Xe&&ge._bufferIndex<qe.length;)Be(qe.charCodeAt(ge._bufferIndex));else Be(qe)}}function Be(Xe){Ae=Ae(Xe)}function Le(Xe){markdownLineEnding(Xe)?(ge.line++,ge.column=1,ge.offset+=Xe===-3?2:1,Ge()):Xe!==-1&&(ge.column++,ge.offset++),ge._bufferIndex<0?ge._index++:(ge._bufferIndex++,ge._bufferIndex===ve[ge._index].length&&(ge._bufferIndex=-1,ge._index++)),be.previous=Xe}function Oe(Xe,qe){const Qe=qe||{};return Qe.type=Xe,Qe.start=Re(),be.events.push(["enter",Qe,be]),_e.push(Qe),Qe}function Fe(Xe){const qe=_e.pop();return qe.end=Re(),be.events.push(["exit",qe,be]),qe}function Ue(Xe,qe){ze(Xe,qe.from)}function Ne(Xe,qe){qe.restore()}function He(Xe,qe){return Qe;function Qe(nt,Nt,Ye){let at,rt,Ft,Je;return Array.isArray(nt)?Kt(nt):"tokenize"in nt?Kt([nt]):Wt(nt);function Wt(an){return pn;function pn(En){const $n=En!==null&&an[En],Un=En!==null&&an.null,kn=[...Array.isArray($n)?$n:$n?[$n]:[],...Array.isArray(Un)?Un:Un?[Un]:[]];return Kt(kn)(En)}}function Kt(an){return at=an,rt=0,an.length===0?Ye:Pt(an[rt])}function Pt(an){return pn;function pn(En){return Je=je(),Ft=an,an.partial||(be.currentConstruct=an),an.name&&be.parser.constructs.disable.null.includes(an.name)?Gt():an.tokenize.call(qe?Object.assign(Object.create(be),qe):be,Ee,Yt,Gt)(En)}}function Yt(an){return Xe(Ft,Je),Nt}function Gt(an){return Je.restore(),++rt<at.length?Pt(at[rt]):Ye}}}function ze(Xe,qe){Xe.resolveAll&&!ye.includes(Xe)&&ye.push(Xe),Xe.resolve&&splice(be.events,qe,be.events.length-qe,Xe.resolve(be.events.slice(qe),be)),Xe.resolveTo&&(be.events=Xe.resolveTo(be.events,be))}function je(){const Xe=Re(),qe=be.previous,Qe=be.currentConstruct,nt=be.events.length,Nt=Array.from(_e);return{from:nt,restore:Ye};function Ye(){ge=Xe,be.previous=qe,be.currentConstruct=Qe,be.events.length=nt,_e=Nt,Ge()}}function Ge(){ge.line in xe&&ge.column<2&&(ge.column=xe[ge.line],ge.offset+=xe[ge.line]-1)}}function sliceChunks(fe,K){const me=K.start._index,ge=K.start._bufferIndex,xe=K.end._index,ye=K.end._bufferIndex;let ve;if(me===xe)ve=[fe[me].slice(ge,ye)];else{if(ve=fe.slice(me,xe),ge>-1){const _e=ve[0];typeof _e=="string"?ve[0]=_e.slice(ge):ve.shift()}ye>0&&ve.push(fe[xe].slice(0,ye))}return ve}function serializeChunks(fe,K){let me=-1;const ge=[];let xe;for(;++me<fe.length;){const ye=fe[me];let ve;if(typeof ye=="string")ve=ye;else switch(ye){case-5:{ve="\r";break}case-4:{ve=`
`;break}case-3:{ve=`\r
`;break}case-2:{ve=K?" ":"	";break}case-1:{if(!K&&xe)continue;ve=" ";break}default:ve=String.fromCharCode(ye)}xe=ye===-2,ge.push(ve)}return ge.join("")}function parse(fe){const ge={constructs:combineExtensions([defaultConstructs,...(fe||{}).extensions||[]]),content:xe(content),defined:[],document:xe(document$2),flow:xe(flow$1),lazy:{},string:xe(string$1),text:xe(text$4)};return ge;function xe(ye){return ve;function ve(_e){return createTokenizer(ge,ye,_e)}}}function postprocess(fe){for(;!subtokenize(fe););return fe}const search=/[\0\t\n\r]/g;function preprocess(){let fe=1,K="",me=!0,ge;return xe;function xe(ye,ve,_e){const Ee=[];let be,Ae,Se,Ce,Te;for(ye=K+(typeof ye=="string"?ye.toString():new TextDecoder(ve||void 0).decode(ye)),Se=0,K="",me&&(ye.charCodeAt(0)===65279&&Se++,me=void 0);Se<ye.length;){if(search.lastIndex=Se,be=search.exec(ye),Ce=be&&be.index!==void 0?be.index:ye.length,Te=ye.charCodeAt(Ce),!be){K=ye.slice(Se);break}if(Te===10&&Se===Ce&&ge)Ee.push(-3),ge=void 0;else switch(ge&&(Ee.push(-5),ge=void 0),Se<Ce&&(Ee.push(ye.slice(Se,Ce)),fe+=Ce-Se),Te){case 0:{Ee.push(65533),fe++;break}case 9:{for(Ae=Math.ceil(fe/4)*4,Ee.push(-2);fe++<Ae;)Ee.push(-1);break}case 10:{Ee.push(-4),fe=1;break}default:ge=!0,fe=1}Se=Ce+1}return _e&&(ge&&Ee.push(-5),K&&Ee.push(K),Ee.push(null)),Ee}}const characterEscapeOrReference=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function decodeString(fe){return fe.replace(characterEscapeOrReference,decode$1)}function decode$1(fe,K,me){if(K)return K;if(me.charCodeAt(0)===35){const xe=me.charCodeAt(1),ye=xe===120||xe===88;return decodeNumericCharacterReference(me.slice(ye?2:1),ye?16:10)}return decodeNamedCharacterReference(me)||fe}const own$2={}.hasOwnProperty;function fromMarkdown(fe,K,me){return typeof K!="string"&&(me=K,K=void 0),compiler(me)(postprocess(parse(me).document().write(preprocess()(fe,K,!0))))}function compiler(fe){const K={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:ye(Hn),autolinkProtocol:je,autolinkEmail:je,atxHeading:ye(Dn),blockQuote:ye(Un),characterEscape:je,characterReference:je,codeFenced:ye(kn),codeFencedFenceInfo:ve,codeFencedFenceMeta:ve,codeIndented:ye(kn,ve),codeText:ye(bn,ve),codeTextData:je,data:je,codeFlowValue:je,definition:ye(Mn),definitionDestinationString:ve,definitionLabelString:ve,definitionTitleString:ve,emphasis:ye(zt),hardBreakEscape:ye(hn),hardBreakTrailing:ye(hn),htmlFlow:ye(mn,ve),htmlFlowData:je,htmlText:ye(mn,ve),htmlTextData:je,image:ye(dn),label:ve,link:ye(Hn),listItem:ye(kt),listItemValue:Ce,listOrdered:ye(Bn,Se),listUnordered:ye(Bn),paragraph:ye(Dt),reference:Pt,referenceString:ve,resourceDestinationString:ve,resourceTitleString:ve,setextHeading:ye(Dn),strong:ye(ln),thematicBreak:ye(gn)},exit:{atxHeading:Ee(),atxHeadingSequence:Ue,autolink:Ee(),autolinkEmail:$n,autolinkProtocol:En,blockQuote:Ee(),characterEscapeValue:Ge,characterReferenceMarkerHexadecimal:Gt,characterReferenceMarkerNumeric:Gt,characterReferenceValue:an,characterReference:pn,codeFenced:Ee(Ie),codeFencedFence:De,codeFencedFenceInfo:Te,codeFencedFenceMeta:Re,codeFlowValue:Ge,codeIndented:Ee(Be),codeText:Ee(Nt),codeTextData:Ge,data:Ge,definition:Ee(),definitionDestinationString:Fe,definitionLabelString:Le,definitionTitleString:Oe,emphasis:Ee(),hardBreakEscape:Ee(qe),hardBreakTrailing:Ee(qe),htmlFlow:Ee(Qe),htmlFlowData:Ge,htmlText:Ee(nt),htmlTextData:Ge,image:Ee(at),label:Ft,labelText:rt,lineEnding:Xe,link:Ee(Ye),listItem:Ee(),listOrdered:Ee(),listUnordered:Ee(),paragraph:Ee(),referenceString:Yt,resourceDestinationString:Je,resourceTitleString:Wt,resource:Kt,setextHeading:Ee(ze),setextHeadingLineSequence:He,setextHeadingText:Ne,strong:Ee(),thematicBreak:Ee()}};configure(K,(fe||{}).mdastExtensions||[]);const me={};return ge;function ge(Xt){let on={type:"root",children:[]};const Rt={stack:[on],tokenStack:[],config:K,enter:_e,exit:be,buffer:ve,resume:Ae,data:me},An=[];let sr=-1;for(;++sr<Xt.length;)if(Xt[sr][1].type==="listOrdered"||Xt[sr][1].type==="listUnordered")if(Xt[sr][0]==="enter")An.push(sr);else{const zn=An.pop();sr=xe(Xt,zn,sr)}for(sr=-1;++sr<Xt.length;){const zn=K[Xt[sr][0]];own$2.call(zn,Xt[sr][1].type)&&zn[Xt[sr][1].type].call(Object.assign({sliceSerialize:Xt[sr][2].sliceSerialize},Rt),Xt[sr][1])}if(Rt.tokenStack.length>0){const zn=Rt.tokenStack[Rt.tokenStack.length-1];(zn[1]||defaultOnError).call(Rt,void 0,zn[0])}for(on.position={start:point(Xt.length>0?Xt[0][1].start:{line:1,column:1,offset:0}),end:point(Xt.length>0?Xt[Xt.length-2][1].end:{line:1,column:1,offset:0})},sr=-1;++sr<K.transforms.length;)on=K.transforms[sr](on)||on;return on}function xe(Xt,on,Rt){let An=on-1,sr=-1,zn=!1,In,er,Kn,lr;for(;++An<=Rt;){const gr=Xt[An];switch(gr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{gr[0]==="enter"?sr++:sr--,lr=void 0;break}case"lineEndingBlank":{gr[0]==="enter"&&(In&&!lr&&!sr&&!Kn&&(Kn=An),lr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:lr=void 0}if(!sr&&gr[0]==="enter"&&gr[1].type==="listItemPrefix"||sr===-1&&gr[0]==="exit"&&(gr[1].type==="listUnordered"||gr[1].type==="listOrdered")){if(In){let hr=An;for(er=void 0;hr--;){const Er=Xt[hr];if(Er[1].type==="lineEnding"||Er[1].type==="lineEndingBlank"){if(Er[0]==="exit")continue;er&&(Xt[er][1].type="lineEndingBlank",zn=!0),Er[1].type="lineEnding",er=hr}else if(!(Er[1].type==="linePrefix"||Er[1].type==="blockQuotePrefix"||Er[1].type==="blockQuotePrefixWhitespace"||Er[1].type==="blockQuoteMarker"||Er[1].type==="listItemIndent"))break}Kn&&(!er||Kn<er)&&(In._spread=!0),In.end=Object.assign({},er?Xt[er][1].start:gr[1].end),Xt.splice(er||An,0,["exit",In,gr[2]]),An++,Rt++}if(gr[1].type==="listItemPrefix"){const hr={type:"listItem",_spread:!1,start:Object.assign({},gr[1].start),end:void 0};In=hr,Xt.splice(An,0,["enter",hr,gr[2]]),An++,Rt++,Kn=void 0,lr=!0}}}return Xt[on][1]._spread=zn,Rt}function ye(Xt,on){return Rt;function Rt(An){_e.call(this,Xt(An),An),on&&on.call(this,An)}}function ve(){this.stack.push({type:"fragment",children:[]})}function _e(Xt,on,Rt){this.stack[this.stack.length-1].children.push(Xt),this.stack.push(Xt),this.tokenStack.push([on,Rt||void 0]),Xt.position={start:point(on.start),end:void 0}}function Ee(Xt){return on;function on(Rt){Xt&&Xt.call(this,Rt),be.call(this,Rt)}}function be(Xt,on){const Rt=this.stack.pop(),An=this.tokenStack.pop();if(An)An[0].type!==Xt.type&&(on?on.call(this,Xt,An[0]):(An[1]||defaultOnError).call(this,Xt,An[0]));else throw new Error("Cannot close `"+Xt.type+"` ("+stringifyPosition({start:Xt.start,end:Xt.end})+"): it’s not open");Rt.position.end=point(Xt.end)}function Ae(){return toString$2(this.stack.pop())}function Se(){this.data.expectingFirstListItemValue=!0}function Ce(Xt){if(this.data.expectingFirstListItemValue){const on=this.stack[this.stack.length-2];on.start=Number.parseInt(this.sliceSerialize(Xt),10),this.data.expectingFirstListItemValue=void 0}}function Te(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.lang=Xt}function Re(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.meta=Xt}function De(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function Ie(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.value=Xt.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function Be(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.value=Xt.replace(/(\r?\n|\r)$/g,"")}function Le(Xt){const on=this.resume(),Rt=this.stack[this.stack.length-1];Rt.label=on,Rt.identifier=normalizeIdentifier(this.sliceSerialize(Xt)).toLowerCase()}function Oe(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.title=Xt}function Fe(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.url=Xt}function Ue(Xt){const on=this.stack[this.stack.length-1];if(!on.depth){const Rt=this.sliceSerialize(Xt).length;on.depth=Rt}}function Ne(){this.data.setextHeadingSlurpLineEnding=!0}function He(Xt){const on=this.stack[this.stack.length-1];on.depth=this.sliceSerialize(Xt).codePointAt(0)===61?1:2}function ze(){this.data.setextHeadingSlurpLineEnding=void 0}function je(Xt){const Rt=this.stack[this.stack.length-1].children;let An=Rt[Rt.length-1];(!An||An.type!=="text")&&(An=nn(),An.position={start:point(Xt.start),end:void 0},Rt.push(An)),this.stack.push(An)}function Ge(Xt){const on=this.stack.pop();on.value+=this.sliceSerialize(Xt),on.position.end=point(Xt.end)}function Xe(Xt){const on=this.stack[this.stack.length-1];if(this.data.atHardBreak){const Rt=on.children[on.children.length-1];Rt.position.end=point(Xt.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&K.canContainEols.includes(on.type)&&(je.call(this,Xt),Ge.call(this,Xt))}function qe(){this.data.atHardBreak=!0}function Qe(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.value=Xt}function nt(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.value=Xt}function Nt(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.value=Xt}function Ye(){const Xt=this.stack[this.stack.length-1];if(this.data.inReference){const on=this.data.referenceType||"shortcut";Xt.type+="Reference",Xt.referenceType=on,delete Xt.url,delete Xt.title}else delete Xt.identifier,delete Xt.label;this.data.referenceType=void 0}function at(){const Xt=this.stack[this.stack.length-1];if(this.data.inReference){const on=this.data.referenceType||"shortcut";Xt.type+="Reference",Xt.referenceType=on,delete Xt.url,delete Xt.title}else delete Xt.identifier,delete Xt.label;this.data.referenceType=void 0}function rt(Xt){const on=this.sliceSerialize(Xt),Rt=this.stack[this.stack.length-2];Rt.label=decodeString(on),Rt.identifier=normalizeIdentifier(on).toLowerCase()}function Ft(){const Xt=this.stack[this.stack.length-1],on=this.resume(),Rt=this.stack[this.stack.length-1];if(this.data.inReference=!0,Rt.type==="link"){const An=Xt.children;Rt.children=An}else Rt.alt=on}function Je(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.url=Xt}function Wt(){const Xt=this.resume(),on=this.stack[this.stack.length-1];on.title=Xt}function Kt(){this.data.inReference=void 0}function Pt(){this.data.referenceType="collapsed"}function Yt(Xt){const on=this.resume(),Rt=this.stack[this.stack.length-1];Rt.label=on,Rt.identifier=normalizeIdentifier(this.sliceSerialize(Xt)).toLowerCase(),this.data.referenceType="full"}function Gt(Xt){this.data.characterReferenceType=Xt.type}function an(Xt){const on=this.sliceSerialize(Xt),Rt=this.data.characterReferenceType;let An;Rt?(An=decodeNumericCharacterReference(on,Rt==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):An=decodeNamedCharacterReference(on);const sr=this.stack[this.stack.length-1];sr.value+=An}function pn(Xt){const on=this.stack.pop();on.position.end=point(Xt.end)}function En(Xt){Ge.call(this,Xt);const on=this.stack[this.stack.length-1];on.url=this.sliceSerialize(Xt)}function $n(Xt){Ge.call(this,Xt);const on=this.stack[this.stack.length-1];on.url="mailto:"+this.sliceSerialize(Xt)}function Un(){return{type:"blockquote",children:[]}}function kn(){return{type:"code",lang:null,meta:null,value:""}}function bn(){return{type:"inlineCode",value:""}}function Mn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function zt(){return{type:"emphasis",children:[]}}function Dn(){return{type:"heading",depth:0,children:[]}}function hn(){return{type:"break"}}function mn(){return{type:"html",value:""}}function dn(){return{type:"image",title:null,url:"",alt:null}}function Hn(){return{type:"link",title:null,url:"",children:[]}}function Bn(Xt){return{type:"list",ordered:Xt.type==="listOrdered",start:null,spread:Xt._spread,children:[]}}function kt(Xt){return{type:"listItem",spread:Xt._spread,checked:null,children:[]}}function Dt(){return{type:"paragraph",children:[]}}function ln(){return{type:"strong",children:[]}}function nn(){return{type:"text",value:""}}function gn(){return{type:"thematicBreak"}}}function point(fe){return{line:fe.line,column:fe.column,offset:fe.offset}}function configure(fe,K){let me=-1;for(;++me<K.length;){const ge=K[me];Array.isArray(ge)?configure(fe,ge):extension(fe,ge)}}function extension(fe,K){let me;for(me in K)if(own$2.call(K,me))switch(me){case"canContainEols":{const ge=K[me];ge&&fe[me].push(...ge);break}case"transforms":{const ge=K[me];ge&&fe[me].push(...ge);break}case"enter":case"exit":{const ge=K[me];ge&&Object.assign(fe[me],ge);break}}}function defaultOnError(fe,K){throw fe?new Error("Cannot close `"+fe.type+"` ("+stringifyPosition({start:fe.start,end:fe.end})+"): a different token (`"+K.type+"`, "+stringifyPosition({start:K.start,end:K.end})+") is open"):new Error("Cannot close document, a token (`"+K.type+"`, "+stringifyPosition({start:K.start,end:K.end})+") is still open")}function remarkParse(fe){const K=this;K.parser=me;function me(ge){return fromMarkdown(ge,{...K.data("settings"),...fe,extensions:K.data("micromarkExtensions")||[],mdastExtensions:K.data("fromMarkdownExtensions")||[]})}}function blockquote$1(fe,K){const me={type:"element",tagName:"blockquote",properties:{},children:fe.wrap(fe.all(K),!0)};return fe.patch(K,me),fe.applyData(K,me)}function hardBreak$1(fe,K){const me={type:"element",tagName:"br",properties:{},children:[]};return fe.patch(K,me),[fe.applyData(K,me),{type:"text",value:`
`}]}function code$2(fe,K){const me=K.value?K.value+`
`:"",ge={};K.lang&&(ge.className=["language-"+K.lang]);let xe={type:"element",tagName:"code",properties:ge,children:[{type:"text",value:me}]};return K.meta&&(xe.data={meta:K.meta}),fe.patch(K,xe),xe=fe.applyData(K,xe),xe={type:"element",tagName:"pre",properties:{},children:[xe]},fe.patch(K,xe),xe}function strikethrough(fe,K){const me={type:"element",tagName:"del",properties:{},children:fe.all(K)};return fe.patch(K,me),fe.applyData(K,me)}function emphasis$1(fe,K){const me={type:"element",tagName:"em",properties:{},children:fe.all(K)};return fe.patch(K,me),fe.applyData(K,me)}function footnoteReference$1(fe,K){const me=typeof fe.options.clobberPrefix=="string"?fe.options.clobberPrefix:"user-content-",ge=String(K.identifier).toUpperCase(),xe=normalizeUri(ge.toLowerCase()),ye=fe.footnoteOrder.indexOf(ge);let ve,_e=fe.footnoteCounts.get(ge);_e===void 0?(_e=0,fe.footnoteOrder.push(ge),ve=fe.footnoteOrder.length):ve=ye+1,_e+=1,fe.footnoteCounts.set(ge,_e);const Ee={type:"element",tagName:"a",properties:{href:"#"+me+"fn-"+xe,id:me+"fnref-"+xe+(_e>1?"-"+_e:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(ve)}]};fe.patch(K,Ee);const be={type:"element",tagName:"sup",properties:{},children:[Ee]};return fe.patch(K,be),fe.applyData(K,be)}function heading$1(fe,K){const me={type:"element",tagName:"h"+K.depth,properties:{},children:fe.all(K)};return fe.patch(K,me),fe.applyData(K,me)}function html$2(fe,K){if(fe.options.allowDangerousHtml){const me={type:"raw",value:K.value};return fe.patch(K,me),fe.applyData(K,me)}}function revert(fe,K){const me=K.referenceType;let ge="]";if(me==="collapsed"?ge+="[]":me==="full"&&(ge+="["+(K.label||K.identifier)+"]"),K.type==="imageReference")return[{type:"text",value:"!["+K.alt+ge}];const xe=fe.all(K),ye=xe[0];ye&&ye.type==="text"?ye.value="["+ye.value:xe.unshift({type:"text",value:"["});const ve=xe[xe.length-1];return ve&&ve.type==="text"?ve.value+=ge:xe.push({type:"text",value:ge}),xe}function imageReference$1(fe,K){const me=String(K.identifier).toUpperCase(),ge=fe.definitionById.get(me);if(!ge)return revert(fe,K);const xe={src:normalizeUri(ge.url||""),alt:K.alt};ge.title!==null&&ge.title!==void 0&&(xe.title=ge.title);const ye={type:"element",tagName:"img",properties:xe,children:[]};return fe.patch(K,ye),fe.applyData(K,ye)}function image$1(fe,K){const me={src:normalizeUri(K.url)};K.alt!==null&&K.alt!==void 0&&(me.alt=K.alt),K.title!==null&&K.title!==void 0&&(me.title=K.title);const ge={type:"element",tagName:"img",properties:me,children:[]};return fe.patch(K,ge),fe.applyData(K,ge)}function inlineCode$1(fe,K){const me={type:"text",value:K.value.replace(/\r?\n|\r/g," ")};fe.patch(K,me);const ge={type:"element",tagName:"code",properties:{},children:[me]};return fe.patch(K,ge),fe.applyData(K,ge)}function linkReference$1(fe,K){const me=String(K.identifier).toUpperCase(),ge=fe.definitionById.get(me);if(!ge)return revert(fe,K);const xe={href:normalizeUri(ge.url||"")};ge.title!==null&&ge.title!==void 0&&(xe.title=ge.title);const ye={type:"element",tagName:"a",properties:xe,children:fe.all(K)};return fe.patch(K,ye),fe.applyData(K,ye)}function link$1(fe,K){const me={href:normalizeUri(K.url)};K.title!==null&&K.title!==void 0&&(me.title=K.title);const ge={type:"element",tagName:"a",properties:me,children:fe.all(K)};return fe.patch(K,ge),fe.applyData(K,ge)}function listItem$1(fe,K,me){const ge=fe.all(K),xe=me?listLoose(me):listItemLoose(K),ye={},ve=[];if(typeof K.checked=="boolean"){const Ae=ge[0];let Se;Ae&&Ae.type==="element"&&Ae.tagName==="p"?Se=Ae:(Se={type:"element",tagName:"p",properties:{},children:[]},ge.unshift(Se)),Se.children.length>0&&Se.children.unshift({type:"text",value:" "}),Se.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:K.checked,disabled:!0},children:[]}),ye.className=["task-list-item"]}let _e=-1;for(;++_e<ge.length;){const Ae=ge[_e];(xe||_e!==0||Ae.type!=="element"||Ae.tagName!=="p")&&ve.push({type:"text",value:`
`}),Ae.type==="element"&&Ae.tagName==="p"&&!xe?ve.push(...Ae.children):ve.push(Ae)}const Ee=ge[ge.length-1];Ee&&(xe||Ee.type!=="element"||Ee.tagName!=="p")&&ve.push({type:"text",value:`
`});const be={type:"element",tagName:"li",properties:ye,children:ve};return fe.patch(K,be),fe.applyData(K,be)}function listLoose(fe){let K=!1;if(fe.type==="list"){K=fe.spread||!1;const me=fe.children;let ge=-1;for(;!K&&++ge<me.length;)K=listItemLoose(me[ge])}return K}function listItemLoose(fe){const K=fe.spread;return K??fe.children.length>1}function list$1(fe,K){const me={},ge=fe.all(K);let xe=-1;for(typeof K.start=="number"&&K.start!==1&&(me.start=K.start);++xe<ge.length;){const ve=ge[xe];if(ve.type==="element"&&ve.tagName==="li"&&ve.properties&&Array.isArray(ve.properties.className)&&ve.properties.className.includes("task-list-item")){me.className=["contains-task-list"];break}}const ye={type:"element",tagName:K.ordered?"ol":"ul",properties:me,children:fe.wrap(ge,!0)};return fe.patch(K,ye),fe.applyData(K,ye)}function paragraph$1(fe,K){const me={type:"element",tagName:"p",properties:{},children:fe.all(K)};return fe.patch(K,me),fe.applyData(K,me)}function root$2(fe,K){const me={type:"root",children:fe.wrap(fe.all(K))};return fe.patch(K,me),fe.applyData(K,me)}function strong$1(fe,K){const me={type:"element",tagName:"strong",properties:{},children:fe.all(K)};return fe.patch(K,me),fe.applyData(K,me)}function table(fe,K){const me=fe.all(K),ge=me.shift(),xe=[];if(ge){const ve={type:"element",tagName:"thead",properties:{},children:fe.wrap([ge],!0)};fe.patch(K.children[0],ve),xe.push(ve)}if(me.length>0){const ve={type:"element",tagName:"tbody",properties:{},children:fe.wrap(me,!0)},_e=pointStart(K.children[1]),Ee=pointEnd(K.children[K.children.length-1]);_e&&Ee&&(ve.position={start:_e,end:Ee}),xe.push(ve)}const ye={type:"element",tagName:"table",properties:{},children:fe.wrap(xe,!0)};return fe.patch(K,ye),fe.applyData(K,ye)}function tableRow$1(fe,K,me){const ge=me?me.children:void 0,ye=(ge?ge.indexOf(K):1)===0?"th":"td",ve=me&&me.type==="table"?me.align:void 0,_e=ve?ve.length:K.children.length;let Ee=-1;const be=[];for(;++Ee<_e;){const Se=K.children[Ee],Ce={},Te=ve?ve[Ee]:void 0;Te&&(Ce.align=Te);let Re={type:"element",tagName:ye,properties:Ce,children:[]};Se&&(Re.children=fe.all(Se),fe.patch(Se,Re),Re=fe.applyData(Se,Re)),be.push(Re)}const Ae={type:"element",tagName:"tr",properties:{},children:fe.wrap(be,!0)};return fe.patch(K,Ae),fe.applyData(K,Ae)}function tableCell(fe,K){const me={type:"element",tagName:"td",properties:{},children:fe.all(K)};return fe.patch(K,me),fe.applyData(K,me)}const tab=9,space=32;function trimLines(fe){const K=String(fe),me=/\r?\n|\r/g;let ge=me.exec(K),xe=0;const ye=[];for(;ge;)ye.push(trimLine(K.slice(xe,ge.index),xe>0,!0),ge[0]),xe=ge.index+ge[0].length,ge=me.exec(K);return ye.push(trimLine(K.slice(xe),xe>0,!1)),ye.join("")}function trimLine(fe,K,me){let ge=0,xe=fe.length;if(K){let ye=fe.codePointAt(ge);for(;ye===tab||ye===space;)ge++,ye=fe.codePointAt(ge)}if(me){let ye=fe.codePointAt(xe-1);for(;ye===tab||ye===space;)xe--,ye=fe.codePointAt(xe-1)}return xe>ge?fe.slice(ge,xe):""}function text$2(fe,K){const me={type:"text",value:trimLines(String(K.value))};return fe.patch(K,me),fe.applyData(K,me)}function thematicBreak$1(fe,K){const me={type:"element",tagName:"hr",properties:{},children:[]};return fe.patch(K,me),fe.applyData(K,me)}const handlers={blockquote:blockquote$1,break:hardBreak$1,code:code$2,delete:strikethrough,emphasis:emphasis$1,footnoteReference:footnoteReference$1,heading:heading$1,html:html$2,imageReference:imageReference$1,image:image$1,inlineCode:inlineCode$1,linkReference:linkReference$1,link:link$1,listItem:listItem$1,list:list$1,paragraph:paragraph$1,root:root$2,strong:strong$1,table,tableCell,tableRow:tableRow$1,text:text$2,thematicBreak:thematicBreak$1,toml:ignore,yaml:ignore,definition:ignore,footnoteDefinition:ignore};function ignore(){}const VOID=-1,PRIMITIVE=0,ARRAY=1,OBJECT=2,DATE=3,REGEXP=4,MAP=5,SET=6,ERROR=7,BIGINT=8,env=typeof self=="object"?self:globalThis,deserializer=(fe,K)=>{const me=(xe,ye)=>(fe.set(ye,xe),xe),ge=xe=>{if(fe.has(xe))return fe.get(xe);const[ye,ve]=K[xe];switch(ye){case PRIMITIVE:case VOID:return me(ve,xe);case ARRAY:{const _e=me([],xe);for(const Ee of ve)_e.push(ge(Ee));return _e}case OBJECT:{const _e=me({},xe);for(const[Ee,be]of ve)_e[ge(Ee)]=ge(be);return _e}case DATE:return me(new Date(ve),xe);case REGEXP:{const{source:_e,flags:Ee}=ve;return me(new RegExp(_e,Ee),xe)}case MAP:{const _e=me(new Map,xe);for(const[Ee,be]of ve)_e.set(ge(Ee),ge(be));return _e}case SET:{const _e=me(new Set,xe);for(const Ee of ve)_e.add(ge(Ee));return _e}case ERROR:{const{name:_e,message:Ee}=ve;return me(new env[_e](Ee),xe)}case BIGINT:return me(BigInt(ve),xe);case"BigInt":return me(Object(BigInt(ve)),xe);case"ArrayBuffer":return me(new Uint8Array(ve).buffer,ve);case"DataView":{const{buffer:_e}=new Uint8Array(ve);return me(new DataView(_e),ve)}}return me(new env[ye](ve),xe)};return ge},deserialize=fe=>deserializer(new Map,fe)(0),EMPTY="",{toString:toString$1}={},{keys}=Object,typeOf=fe=>{const K=typeof fe;if(K!=="object"||!fe)return[PRIMITIVE,K];const me=toString$1.call(fe).slice(8,-1);switch(me){case"Array":return[ARRAY,EMPTY];case"Object":return[OBJECT,EMPTY];case"Date":return[DATE,EMPTY];case"RegExp":return[REGEXP,EMPTY];case"Map":return[MAP,EMPTY];case"Set":return[SET,EMPTY];case"DataView":return[ARRAY,me]}return me.includes("Array")?[ARRAY,me]:me.includes("Error")?[ERROR,me]:[OBJECT,me]},shouldSkip=([fe,K])=>fe===PRIMITIVE&&(K==="function"||K==="symbol"),serializer=(fe,K,me,ge)=>{const xe=(ve,_e)=>{const Ee=ge.push(ve)-1;return me.set(_e,Ee),Ee},ye=ve=>{if(me.has(ve))return me.get(ve);let[_e,Ee]=typeOf(ve);switch(_e){case PRIMITIVE:{let Ae=ve;switch(Ee){case"bigint":_e=BIGINT,Ae=ve.toString();break;case"function":case"symbol":if(fe)throw new TypeError("unable to serialize "+Ee);Ae=null;break;case"undefined":return xe([VOID],ve)}return xe([_e,Ae],ve)}case ARRAY:{if(Ee){let Ce=ve;return Ee==="DataView"?Ce=new Uint8Array(ve.buffer):Ee==="ArrayBuffer"&&(Ce=new Uint8Array(ve)),xe([Ee,[...Ce]],ve)}const Ae=[],Se=xe([_e,Ae],ve);for(const Ce of ve)Ae.push(ye(Ce));return Se}case OBJECT:{if(Ee)switch(Ee){case"BigInt":return xe([Ee,ve.toString()],ve);case"Boolean":case"Number":case"String":return xe([Ee,ve.valueOf()],ve)}if(K&&"toJSON"in ve)return ye(ve.toJSON());const Ae=[],Se=xe([_e,Ae],ve);for(const Ce of keys(ve))(fe||!shouldSkip(typeOf(ve[Ce])))&&Ae.push([ye(Ce),ye(ve[Ce])]);return Se}case DATE:return xe([_e,ve.toISOString()],ve);case REGEXP:{const{source:Ae,flags:Se}=ve;return xe([_e,{source:Ae,flags:Se}],ve)}case MAP:{const Ae=[],Se=xe([_e,Ae],ve);for(const[Ce,Te]of ve)(fe||!(shouldSkip(typeOf(Ce))||shouldSkip(typeOf(Te))))&&Ae.push([ye(Ce),ye(Te)]);return Se}case SET:{const Ae=[],Se=xe([_e,Ae],ve);for(const Ce of ve)(fe||!shouldSkip(typeOf(Ce)))&&Ae.push(ye(Ce));return Se}}const{message:be}=ve;return xe([_e,{name:Ee,message:be}],ve)};return ye},serialize$1=(fe,{json:K,lossy:me}={})=>{const ge=[];return serializer(!(K||me),!!K,new Map,ge)(fe),ge},structuredClone$1=typeof structuredClone=="function"?(fe,K)=>K&&("json"in K||"lossy"in K)?deserialize(serialize$1(fe,K)):structuredClone(fe):(fe,K)=>deserialize(serialize$1(fe,K));function defaultFootnoteBackContent(fe,K){const me=[{type:"text",value:"↩"}];return K>1&&me.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(K)}]}),me}function defaultFootnoteBackLabel(fe,K){return"Back to reference "+(fe+1)+(K>1?"-"+K:"")}function footer(fe){const K=typeof fe.options.clobberPrefix=="string"?fe.options.clobberPrefix:"user-content-",me=fe.options.footnoteBackContent||defaultFootnoteBackContent,ge=fe.options.footnoteBackLabel||defaultFootnoteBackLabel,xe=fe.options.footnoteLabel||"Footnotes",ye=fe.options.footnoteLabelTagName||"h2",ve=fe.options.footnoteLabelProperties||{className:["sr-only"]},_e=[];let Ee=-1;for(;++Ee<fe.footnoteOrder.length;){const be=fe.footnoteById.get(fe.footnoteOrder[Ee]);if(!be)continue;const Ae=fe.all(be),Se=String(be.identifier).toUpperCase(),Ce=normalizeUri(Se.toLowerCase());let Te=0;const Re=[],De=fe.footnoteCounts.get(Se);for(;De!==void 0&&++Te<=De;){Re.length>0&&Re.push({type:"text",value:" "});let Le=typeof me=="string"?me:me(Ee,Te);typeof Le=="string"&&(Le={type:"text",value:Le}),Re.push({type:"element",tagName:"a",properties:{href:"#"+K+"fnref-"+Ce+(Te>1?"-"+Te:""),dataFootnoteBackref:"",ariaLabel:typeof ge=="string"?ge:ge(Ee,Te),className:["data-footnote-backref"]},children:Array.isArray(Le)?Le:[Le]})}const Ie=Ae[Ae.length-1];if(Ie&&Ie.type==="element"&&Ie.tagName==="p"){const Le=Ie.children[Ie.children.length-1];Le&&Le.type==="text"?Le.value+=" ":Ie.children.push({type:"text",value:" "}),Ie.children.push(...Re)}else Ae.push(...Re);const Be={type:"element",tagName:"li",properties:{id:K+"fn-"+Ce},children:fe.wrap(Ae,!0)};fe.patch(be,Be),_e.push(Be)}if(_e.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:ye,properties:{...structuredClone$1(ve),id:"footnote-label"},children:[{type:"text",value:xe}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:fe.wrap(_e,!0)},{type:"text",value:`
`}]}}const convert$1=function(fe){if(fe==null)return ok;if(typeof fe=="function")return castFactory$1(fe);if(typeof fe=="object")return Array.isArray(fe)?anyFactory(fe):propsFactory(fe);if(typeof fe=="string")return typeFactory$1(fe);throw new Error("Expected function, string, or object as test")};function anyFactory(fe){const K=[];let me=-1;for(;++me<fe.length;)K[me]=convert$1(fe[me]);return castFactory$1(ge);function ge(...xe){let ye=-1;for(;++ye<K.length;)if(K[ye].apply(this,xe))return!0;return!1}}function propsFactory(fe){const K=fe;return castFactory$1(me);function me(ge){const xe=ge;let ye;for(ye in fe)if(xe[ye]!==K[ye])return!1;return!0}}function typeFactory$1(fe){return castFactory$1(K);function K(me){return me&&me.type===fe}}function castFactory$1(fe){return K;function K(me,ge,xe){return!!(looksLikeANode(me)&&fe.call(this,me,typeof ge=="number"?ge:void 0,xe||void 0))}}function ok(){return!0}function looksLikeANode(fe){return fe!==null&&typeof fe=="object"&&"type"in fe}function color$2(fe){return fe}const empty=[],CONTINUE$1=!0,EXIT$1=!1,SKIP$1="skip";function visitParents$1(fe,K,me,ge){let xe;typeof K=="function"&&typeof me!="function"?(ge=me,me=K):xe=K;const ye=convert$1(xe),ve=ge?-1:1;_e(fe,void 0,[])();function _e(Ee,be,Ae){const Se=Ee&&typeof Ee=="object"?Ee:{};if(typeof Se.type=="string"){const Te=typeof Se.tagName=="string"?Se.tagName:typeof Se.name=="string"?Se.name:void 0;Object.defineProperty(Ce,"name",{value:"node ("+(Ee.type+(Te?"<"+Te+">":""))+")"})}return Ce;function Ce(){let Te=empty,Re,De,Ie;if((!K||ye(Ee,be,Ae[Ae.length-1]||void 0))&&(Te=toResult$1(me(Ee,Ae)),Te[0]===EXIT$1))return Te;if("children"in Ee&&Ee.children){const Be=Ee;if(Be.children&&Te[0]!==SKIP$1)for(De=(ge?Be.children.length:-1)+ve,Ie=Ae.concat(Be);De>-1&&De<Be.children.length;){const Le=Be.children[De];if(Re=_e(Le,De,Ie)(),Re[0]===EXIT$1)return Re;De=typeof Re[1]=="number"?Re[1]:De+ve}}return Te}}}function toResult$1(fe){return Array.isArray(fe)?fe:typeof fe=="number"?[CONTINUE$1,fe]:fe==null?empty:[fe]}function visit$1(fe,K,me,ge){let xe,ye,ve;typeof K=="function"&&typeof me!="function"?(ye=void 0,ve=K,xe=me):(ye=K,ve=me,xe=ge),visitParents$1(fe,ye,_e,xe);function _e(Ee,be){const Ae=be[be.length-1],Se=Ae?Ae.children.indexOf(Ee):void 0;return ve(Ee,Se,Ae)}}const own$1={}.hasOwnProperty,emptyOptions$1={};function createState(fe,K){const me=K||emptyOptions$1,ge=new Map,xe=new Map,ye=new Map,ve={...handlers,...me.handlers},_e={all:be,applyData,definitionById:ge,footnoteById:xe,footnoteCounts:ye,footnoteOrder:[],handlers:ve,one:Ee,options:me,patch,wrap:wrap$1};return visit$1(fe,function(Ae){if(Ae.type==="definition"||Ae.type==="footnoteDefinition"){const Se=Ae.type==="definition"?ge:xe,Ce=String(Ae.identifier).toUpperCase();Se.has(Ce)||Se.set(Ce,Ae)}}),_e;function Ee(Ae,Se){const Ce=Ae.type,Te=_e.handlers[Ce];if(own$1.call(_e.handlers,Ce)&&Te)return Te(_e,Ae,Se);if(_e.options.passThrough&&_e.options.passThrough.includes(Ce)){if("children"in Ae){const{children:De,...Ie}=Ae,Be=structuredClone$1(Ie);return Be.children=_e.all(Ae),Be}return structuredClone$1(Ae)}return(_e.options.unknownHandler||defaultUnknownHandler)(_e,Ae,Se)}function be(Ae){const Se=[];if("children"in Ae){const Ce=Ae.children;let Te=-1;for(;++Te<Ce.length;){const Re=_e.one(Ce[Te],Ae);if(Re){if(Te&&Ce[Te-1].type==="break"&&(!Array.isArray(Re)&&Re.type==="text"&&(Re.value=trimMarkdownSpaceStart(Re.value)),!Array.isArray(Re)&&Re.type==="element")){const De=Re.children[0];De&&De.type==="text"&&(De.value=trimMarkdownSpaceStart(De.value))}Array.isArray(Re)?Se.push(...Re):Se.push(Re)}}}return Se}}function patch(fe,K){fe.position&&(K.position=position(fe))}function applyData(fe,K){let me=K;if(fe&&fe.data){const ge=fe.data.hName,xe=fe.data.hChildren,ye=fe.data.hProperties;if(typeof ge=="string")if(me.type==="element")me.tagName=ge;else{const ve="children"in me?me.children:[me];me={type:"element",tagName:ge,properties:{},children:ve}}me.type==="element"&&ye&&Object.assign(me.properties,structuredClone$1(ye)),"children"in me&&me.children&&xe!==null&&xe!==void 0&&(me.children=xe)}return me}function defaultUnknownHandler(fe,K){const me=K.data||{},ge="value"in K&&!(own$1.call(me,"hProperties")||own$1.call(me,"hChildren"))?{type:"text",value:K.value}:{type:"element",tagName:"div",properties:{},children:fe.all(K)};return fe.patch(K,ge),fe.applyData(K,ge)}function wrap$1(fe,K){const me=[];let ge=-1;for(K&&me.push({type:"text",value:`
`});++ge<fe.length;)ge&&me.push({type:"text",value:`
`}),me.push(fe[ge]);return K&&fe.length>0&&me.push({type:"text",value:`
`}),me}function trimMarkdownSpaceStart(fe){let K=0,me=fe.charCodeAt(K);for(;me===9||me===32;)K++,me=fe.charCodeAt(K);return fe.slice(K)}function toHast(fe,K){const me=createState(fe,K),ge=me.one(fe,void 0),xe=footer(me),ye=Array.isArray(ge)?{type:"root",children:ge}:ge||{type:"root",children:[]};return xe&&ye.children.push({type:"text",value:`
`},xe),ye}function remarkRehype(fe,K){return fe&&"run"in fe?async function(me,ge){const xe=toHast(me,{file:ge,...K});await fe.run(xe,ge)}:function(me,ge){return toHast(me,{file:ge,...fe||K})}}function bail(fe){if(fe)throw fe}var hasOwn=Object.prototype.hasOwnProperty,toStr=Object.prototype.toString,defineProperty=Object.defineProperty,gOPD=Object.getOwnPropertyDescriptor,isArray=function(K){return typeof Array.isArray=="function"?Array.isArray(K):toStr.call(K)==="[object Array]"},isPlainObject$2=function(K){if(!K||toStr.call(K)!=="[object Object]")return!1;var me=hasOwn.call(K,"constructor"),ge=K.constructor&&K.constructor.prototype&&hasOwn.call(K.constructor.prototype,"isPrototypeOf");if(K.constructor&&!me&&!ge)return!1;var xe;for(xe in K);return typeof xe>"u"||hasOwn.call(K,xe)},setProperty=function(K,me){defineProperty&&me.name==="__proto__"?defineProperty(K,me.name,{enumerable:!0,configurable:!0,value:me.newValue,writable:!0}):K[me.name]=me.newValue},getProperty=function(K,me){if(me==="__proto__")if(hasOwn.call(K,me)){if(gOPD)return gOPD(K,me).value}else return;return K[me]},extend$1=function fe(){var K,me,ge,xe,ye,ve,_e=arguments[0],Ee=1,be=arguments.length,Ae=!1;for(typeof _e=="boolean"&&(Ae=_e,_e=arguments[1]||{},Ee=2),(_e==null||typeof _e!="object"&&typeof _e!="function")&&(_e={});Ee<be;++Ee)if(K=arguments[Ee],K!=null)for(me in K)ge=getProperty(_e,me),xe=getProperty(K,me),_e!==xe&&(Ae&&xe&&(isPlainObject$2(xe)||(ye=isArray(xe)))?(ye?(ye=!1,ve=ge&&isArray(ge)?ge:[]):ve=ge&&isPlainObject$2(ge)?ge:{},setProperty(_e,{name:me,newValue:fe(Ae,ve,xe)})):typeof xe<"u"&&setProperty(_e,{name:me,newValue:xe}));return _e};const extend$2=getDefaultExportFromCjs(extend$1);function isPlainObject$1(fe){if(typeof fe!="object"||fe===null)return!1;const K=Object.getPrototypeOf(fe);return(K===null||K===Object.prototype||Object.getPrototypeOf(K)===null)&&!(Symbol.toStringTag in fe)&&!(Symbol.iterator in fe)}function trough(){const fe=[],K={run:me,use:ge};return K;function me(...xe){let ye=-1;const ve=xe.pop();if(typeof ve!="function")throw new TypeError("Expected function as last argument, not "+ve);_e(null,...xe);function _e(Ee,...be){const Ae=fe[++ye];let Se=-1;if(Ee){ve(Ee);return}for(;++Se<xe.length;)(be[Se]===null||be[Se]===void 0)&&(be[Se]=xe[Se]);xe=be,Ae?wrap(Ae,_e)(...be):ve(null,...be)}}function ge(xe){if(typeof xe!="function")throw new TypeError("Expected `middelware` to be a function, not "+xe);return fe.push(xe),K}}function wrap(fe,K){let me;return ge;function ge(...ve){const _e=fe.length>ve.length;let Ee;_e&&ve.push(xe);try{Ee=fe.apply(this,ve)}catch(be){const Ae=be;if(_e&&me)throw Ae;return xe(Ae)}_e||(Ee&&Ee.then&&typeof Ee.then=="function"?Ee.then(ye,xe):Ee instanceof Error?xe(Ee):ye(Ee))}function xe(ve,..._e){me||(me=!0,K(ve,..._e))}function ye(ve){xe(null,ve)}}const CallableInstance=function(fe){const ge=this.constructor.prototype,xe=ge[fe],ye=function(){return xe.apply(ye,arguments)};return Object.setPrototypeOf(ye,ge),ye},own={}.hasOwnProperty;class Processor extends CallableInstance{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=trough()}copy(){const K=new Processor;let me=-1;for(;++me<this.attachers.length;){const ge=this.attachers[me];K.use(...ge)}return K.data(extend$2(!0,{},this.namespace)),K}data(K,me){return typeof K=="string"?arguments.length===2?(assertUnfrozen("data",this.frozen),this.namespace[K]=me,this):own.call(this.namespace,K)&&this.namespace[K]||void 0:K?(assertUnfrozen("data",this.frozen),this.namespace=K,this):this.namespace}freeze(){if(this.frozen)return this;const K=this;for(;++this.freezeIndex<this.attachers.length;){const[me,...ge]=this.attachers[this.freezeIndex];if(ge[0]===!1)continue;ge[0]===!0&&(ge[0]=void 0);const xe=me.call(K,...ge);typeof xe=="function"&&this.transformers.use(xe)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(K){this.freeze();const me=vfile(K),ge=this.parser||this.Parser;return assertParser("parse",ge),ge(String(me),me)}process(K,me){const ge=this;return this.freeze(),assertParser("process",this.parser||this.Parser),assertCompiler("process",this.compiler||this.Compiler),me?xe(void 0,me):new Promise(xe);function xe(ye,ve){const _e=vfile(K),Ee=ge.parse(_e);ge.run(Ee,_e,function(Ae,Se,Ce){if(Ae||!Se||!Ce)return be(Ae);const Te=Se,Re=ge.stringify(Te,Ce);looksLikeAValue(Re)?Ce.value=Re:Ce.result=Re,be(Ae,Ce)});function be(Ae,Se){Ae||!Se?ve(Ae):ye?ye(Se):me(void 0,Se)}}}processSync(K){let me=!1,ge;return this.freeze(),assertParser("processSync",this.parser||this.Parser),assertCompiler("processSync",this.compiler||this.Compiler),this.process(K,xe),assertDone("processSync","process",me),ge;function xe(ye,ve){me=!0,bail(ye),ge=ve}}run(K,me,ge){assertNode(K),this.freeze();const xe=this.transformers;return!ge&&typeof me=="function"&&(ge=me,me=void 0),ge?ye(void 0,ge):new Promise(ye);function ye(ve,_e){const Ee=vfile(me);xe.run(K,Ee,be);function be(Ae,Se,Ce){const Te=Se||K;Ae?_e(Ae):ve?ve(Te):ge(void 0,Te,Ce)}}}runSync(K,me){let ge=!1,xe;return this.run(K,me,ye),assertDone("runSync","run",ge),xe;function ye(ve,_e){bail(ve),xe=_e,ge=!0}}stringify(K,me){this.freeze();const ge=vfile(me),xe=this.compiler||this.Compiler;return assertCompiler("stringify",xe),assertNode(K),xe(K,ge)}use(K,...me){const ge=this.attachers,xe=this.namespace;if(assertUnfrozen("use",this.frozen),K!=null)if(typeof K=="function")Ee(K,me);else if(typeof K=="object")Array.isArray(K)?_e(K):ve(K);else throw new TypeError("Expected usable value, not `"+K+"`");return this;function ye(be){if(typeof be=="function")Ee(be,[]);else if(typeof be=="object")if(Array.isArray(be)){const[Ae,...Se]=be;Ee(Ae,Se)}else ve(be);else throw new TypeError("Expected usable value, not `"+be+"`")}function ve(be){if(!("plugins"in be)&&!("settings"in be))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");_e(be.plugins),be.settings&&(xe.settings=extend$2(!0,xe.settings,be.settings))}function _e(be){let Ae=-1;if(be!=null)if(Array.isArray(be))for(;++Ae<be.length;){const Se=be[Ae];ye(Se)}else throw new TypeError("Expected a list of plugins, not `"+be+"`")}function Ee(be,Ae){let Se=-1,Ce=-1;for(;++Se<ge.length;)if(ge[Se][0]===be){Ce=Se;break}if(Ce===-1)ge.push([be,...Ae]);else if(Ae.length>0){let[Te,...Re]=Ae;const De=ge[Ce][1];isPlainObject$1(De)&&isPlainObject$1(Te)&&(Te=extend$2(!0,De,Te)),ge[Ce]=[be,Te,...Re]}}}}const unified=new Processor().freeze();function assertParser(fe,K){if(typeof K!="function")throw new TypeError("Cannot `"+fe+"` without `parser`")}function assertCompiler(fe,K){if(typeof K!="function")throw new TypeError("Cannot `"+fe+"` without `compiler`")}function assertUnfrozen(fe,K){if(K)throw new Error("Cannot call `"+fe+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function assertNode(fe){if(!isPlainObject$1(fe)||typeof fe.type!="string")throw new TypeError("Expected node, got `"+fe+"`")}function assertDone(fe,K,me){if(!me)throw new Error("`"+fe+"` finished async. Use `"+K+"` instead")}function vfile(fe){return looksLikeAVFile(fe)?fe:new VFile(fe)}function looksLikeAVFile(fe){return!!(fe&&typeof fe=="object"&&"message"in fe&&"messages"in fe)}function looksLikeAValue(fe){return typeof fe=="string"||isUint8Array(fe)}function isUint8Array(fe){return!!(fe&&typeof fe=="object"&&"byteLength"in fe&&"byteOffset"in fe)}function create(fe,K){const me=["start","end","loc","range"];let ge=-1;for(;++ge<me.length;){const xe=me[ge];xe in fe&&(K[xe]=fe[xe])}}function specifiersToDeclarations(fe,K){let me=-1;const ge=[],xe=[];let ye;for(;++me<fe.length;){const ve=fe[me];ve.type==="ImportNamespaceSpecifier"?ye=ve:xe.push(ve)}if(ye){const ve={type:"VariableDeclarator",id:ye.local,init:K};create(ye,ve),ge.push(ve)}return ge.push({type:"VariableDeclarator",id:{type:"ObjectPattern",properties:xe.map(function(ve){let _e=ve.type==="ImportSpecifier"?ve.imported:ve.type==="ExportSpecifier"?ve.exported:{type:"Identifier",name:"default"},Ee=ve.local;ve.type==="ExportSpecifier"&&(Ee=_e,_e=ve.local),Ee.type;const be={type:"Property",kind:"init",shorthand:_e.type==="Identifier"&&Ee.type==="Identifier"&&_e.name===Ee.name,method:!1,computed:!1,key:_e,value:Ee};return create(ve,be),be})},init:ye?{type:"Identifier",name:ye.local.name}:K}),ge}function toIdOrMemberExpression(fe){let K=-1,me;for(;++K<fe.length;){const ge=fe[K],xe=typeof ge=="string"&&name$1(ge)?{type:"Identifier",name:ge}:{type:"Literal",value:ge};me=me?{type:"MemberExpression",object:me,property:xe,computed:xe.type==="Literal",optional:!1}:xe}return me.type,me}function toJsxIdOrMemberExpression(fe){let K=-1,me;for(;++K<fe.length;){const ge=fe[K];typeof ge=="string"&&name$1(ge,{jsx:!0});const xe={type:"JSXIdentifier",name:ge};me=me?{type:"JSXMemberExpression",object:me,property:xe}:xe}return me}function recmaBuildJsxTransform(fe){const{outputFormat:K}=fe||{};return function(me){if(me.comments&&(me.comments=me.comments.filter(function(ge){return!ge.data?._mdxIsPragmaComment})),K==="function-body"){let ge=0;for(;ge<me.body.length;){const ye=me.body[ge];if("directive"in ye&&ye.directive)ge++;else break}const xe=me.body[ge];xe&&xe.type==="ImportDeclaration"&&typeof xe.source.value=="string"&&/\/jsx-(dev-)?runtime$/.test(xe.source.value)&&(me.body[ge]={type:"VariableDeclaration",kind:"const",declarations:specifiersToDeclarations(xe.specifiers,toIdOrMemberExpression(["arguments",0]))})}}}function createVisitors(){const fe=[{block:!1,defined:[]}];return{enter:K,exit:me,scopes:fe};function K(ye){if(ye.type==="ArrowFunctionExpression"){fe.push({block:!1,defined:[]});for(const ve of ye.params)xe(ve,!1)}else if(ye.type==="BlockStatement"||ye.type==="DoWhileStatement"||ye.type==="ForInStatement"||ye.type==="ForOfStatement"||ye.type==="ForStatement"||ye.type==="WhileStatement")fe.push({block:!0,defined:[]});else if(ye.type==="CatchClause")fe.push({block:!0,defined:[]}),ye.param&&xe(ye.param,!0);else if(ye.type==="ClassDeclaration")ge(ye.id.name,!1);else if(ye.type==="FunctionDeclaration"){ge(ye.id.name,!1),fe.push({block:!1,defined:[]});for(const ve of ye.params)xe(ve,!1)}else if(ye.type==="FunctionExpression"){ye.id&&ge(ye.id.name,!1),fe.push({block:!1,defined:[]});for(const ve of ye.params)xe(ve,!1)}else if(ye.type==="ImportDeclaration")for(const ve of ye.specifiers)ge(ve.local.name,!1);else if(ye.type==="VariableDeclaration")for(const ve of ye.declarations)xe(ve.id,ye.kind!=="var")}function me(ye){if(ye.type==="ArrowFunctionExpression"||ye.type==="FunctionDeclaration"||ye.type==="FunctionExpression"){const ve=fe.pop();ve.block}else if(ye.type==="BlockStatement"||ye.type==="CatchClause"||ye.type==="DoWhileStatement"||ye.type==="ForInStatement"||ye.type==="ForOfStatement"||ye.type==="ForStatement"||ye.type==="WhileStatement"){const ve=fe.pop();ve.block}}function ge(ye,ve){let _e=fe.length,Ee;for(;_e--&&(Ee=fe[_e],!(ve||!Ee.block)););Ee.defined.push(ye)}function xe(ye,ve){if(ye.type==="ArrayPattern")for(const _e of ye.elements)_e&&xe(_e,ve);else if(ye.type==="AssignmentPattern")xe(ye.left,ve);else if(ye.type==="Identifier")ge(ye.name,ve);else if(ye.type==="ObjectPattern")for(const _e of ye.properties)_e.type==="Property"?xe(_e.value,ve):(_e.type,xe(_e,ve));else ye.type,xe(ye.argument,ve)}}class WalkerBase{constructor(){this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:K=>this.replacement=K}}replace(K,me,ge,xe){K&&me&&(ge!=null?K[me][ge]=xe:K[me]=xe)}remove(K,me,ge){K&&me&&(ge!=null?K[me].splice(ge,1):delete K[me])}}class SyncWalker extends WalkerBase{constructor(K,me){super(),this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.context={skip:()=>this.should_skip=!0,remove:()=>this.should_remove=!0,replace:ge=>this.replacement=ge},this.enter=K,this.leave=me}visit(K,me,ge,xe){if(K){if(this.enter){const ve=this.should_skip,_e=this.should_remove,Ee=this.replacement;this.should_skip=!1,this.should_remove=!1,this.replacement=null,this.enter.call(this.context,K,me,ge,xe),this.replacement&&(K=this.replacement,this.replace(me,ge,xe,K)),this.should_remove&&this.remove(me,ge,xe);const be=this.should_skip,Ae=this.should_remove;if(this.should_skip=ve,this.should_remove=_e,this.replacement=Ee,be)return K;if(Ae)return null}let ye;for(ye in K){const ve=K[ye];if(ve&&typeof ve=="object")if(Array.isArray(ve)){const _e=ve;for(let Ee=0;Ee<_e.length;Ee+=1){const be=_e[Ee];isNode(be)&&(this.visit(be,K,ye,Ee)||Ee--)}}else isNode(ve)&&this.visit(ve,K,ye,null)}if(this.leave){const ve=this.replacement,_e=this.should_remove;this.replacement=null,this.should_remove=!1,this.leave.call(this.context,K,me,ge,xe),this.replacement&&(K=this.replacement,this.replace(me,ge,xe,K)),this.should_remove&&this.remove(me,ge,xe);const Ee=this.should_remove;if(this.replacement=ve,this.should_remove=_e,Ee)return null}}return K}}function isNode(fe){return fe!==null&&typeof fe=="object"&&"type"in fe&&typeof fe.type=="string"}function walk(fe,{enter:K,leave:me}){return new SyncWalker(K,me).visit(fe,null)}function declarationToExpression(fe){return fe.type==="FunctionDeclaration"?{...fe,type:"FunctionExpression"}:(fe.type,{...fe,type:"ClassExpression"})}function isDeclaration(fe){return fe.type==="FunctionDeclaration"||fe.type==="ClassDeclaration"||fe.type==="VariableDeclaration"}function recmaDocument(fe){const K=fe.baseUrl||void 0,me=typeof K=="object"?K.href:K,ge=fe.outputFormat||"program",xe=fe.pragma===void 0?"React.createElement":fe.pragma,ye=fe.pragmaFrag===void 0?"React.Fragment":fe.pragmaFrag,ve=fe.pragmaImportSource||"react",_e=fe.jsxImportSource||"react",Ee=fe.jsxRuntime||"automatic";return function(Ae,Se){const Ce=[],Te=[];let Re=0,De,Ie,Be;if(Ee==="classic"&&ye&&injectPragma(Ae,"@jsxFrag",ye),Ee==="classic"&&xe&&injectPragma(Ae,"@jsx",xe),Ee==="automatic"&&_e&&injectPragma(Ae,"@jsxImportSource",_e),injectPragma(Ae,"@jsxRuntime",Ee),Ee==="classic"&&ve){if(!xe)throw new Error("Missing `pragma` in classic runtime with `pragmaImportSource`");Ue({type:"ImportDeclaration",specifiers:[{type:"ImportDefaultSpecifier",local:{type:"Identifier",name:xe.split(".")[0]}}],source:{type:"Literal",value:ve}})}for(Be of Ae.body)if(Be.type==="ExportDefaultDeclaration")De&&Se.fail("Unexpected duplicate layout, expected a single layout (previous: "+stringifyPosition(positionFromEstree(De))+")",{ancestors:[Ae,Be],place:positionFromEstree(Be),ruleId:"duplicate-layout",source:"recma-document"}),De=Be,Te.push({type:"VariableDeclaration",kind:"const",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"MDXLayout"},init:isDeclaration(Be.declaration)?declarationToExpression(Be.declaration):Be.declaration}]});else if(Be.type==="ExportNamedDeclaration"&&Be.source){const Ne=Be.source;Be.specifiers=Be.specifiers.filter(function(He){if(He.exported.type==="Identifier"&&He.exported.name==="default"){De&&Se.fail("Unexpected duplicate layout, expected a single layout (previous: "+stringifyPosition(positionFromEstree(De))+")",{ancestors:[Ae,Be,He],place:positionFromEstree(Be),ruleId:"duplicate-layout",source:"recma-document"}),De=He;const ze=[];if(He.local.type==="Identifier"&&He.local.name==="default")ze.push({type:"ImportDefaultSpecifier",local:{type:"Identifier",name:"MDXLayout"}});else{const Xe={type:"ImportSpecifier",imported:He.local,local:{type:"Identifier",name:"MDXLayout"}};create(He.local,Xe),ze.push(Xe)}const je={type:"Literal",value:Ne.value};create(Ne,je);const Ge={type:"ImportDeclaration",specifiers:ze,source:je};return create(He,Ge),Ue(Ge),!1}return!0}),Be.specifiers.length>0&&Fe(Be)}else Be.type==="ExportNamedDeclaration"||Be.type==="ExportAllDeclaration"?Fe(Be):Be.type==="ImportDeclaration"?Ue(Be):Be.type==="ExpressionStatement"&&(Be.expression.type==="JSXElement"||Be.expression.type==="JSXFragment")?(Ie=!0,Te.push(...be(Be.expression,ge,!!De))):Te.push(Be);Ie||Te.push(...be(void 0,ge,!!De)),Ce.push(["MDXContent","default"]),ge==="function-body"&&Te.push({type:"ReturnStatement",argument:{type:"ObjectExpression",properties:[...Array.from({length:Re}).map(function(Ne,He){return{type:"SpreadElement",argument:{type:"Identifier",name:"_exportAll"+(He+1)}}}),...Ce.map(function(Ne){return{type:"Property",kind:"init",method:!1,computed:!1,shorthand:typeof Ne=="string",key:{type:"Identifier",name:typeof Ne=="string"?Ne:Ne[1]},value:{type:"Identifier",name:typeof Ne=="string"?Ne:Ne[0]}}})]}}),Ae.body=Te;let Le=!1,Oe=!1;(me||ge==="function-body")&&walk(Ae,{enter(Ne){if((Ne.type==="ExportAllDeclaration"||Ne.type==="ExportNamedDeclaration"||Ne.type==="ImportDeclaration")&&Ne.source){let He=Ne.source.value;try{new URL(He)}catch{(He.startsWith("/")||He.startsWith("./")||He.startsWith("../"))&&(He=new URL(He,me).href)}const ze={type:"Literal",value:He};create(Ne.source,ze),Ne.source=ze;return}if(Ne.type==="ImportExpression"){Oe=!0;const He={type:"CallExpression",callee:{type:"Identifier",name:"_resolveDynamicMdxSpecifier"},arguments:[Ne.source],optional:!1};Ne.source=He;return}if(Ne.type==="MemberExpression"&&"object"in Ne&&Ne.object.type==="MetaProperty"&&Ne.property.type==="Identifier"&&Ne.object.meta.name==="import"&&Ne.object.property.name==="meta"&&Ne.property.name==="url"){Le=!0;const He={type:"Identifier",name:"_importMetaUrl"};create(Ne,He),this.replace(He)}}}),Oe&&(me||(Le=!0),Ae.body.push(resolveDynamicMdxSpecifier(me?{type:"Literal",value:me}:{type:"Identifier",name:"_importMetaUrl"}))),Le&&Ae.body.unshift(...createImportMetaUrlVariable());function Fe(Ne){if(Ne.type==="ExportNamedDeclaration"){if(Ne.declaration){const He=createVisitors();walk(Ne,{enter(ze){He.enter(ze),(ze.type==="ArrowFunctionExpression"||ze.type==="FunctionDeclaration"||ze.type==="FunctionExpression")&&(this.skip(),He.exit(ze))},leave:He.exit}),Ce.push(...He.scopes[0].defined)}for(Be of Ne.specifiers)Be.exported.type==="Identifier"?Ce.push(Be.exported.name):(Be.exported.value,Ce.push(Be.exported.value))}Ue(Ne)}function Ue(Ne){let He,ze;if(ge==="function-body")if(Ne.type==="ImportDeclaration"||Ne.type==="ExportAllDeclaration"||Ne.type==="ExportNamedDeclaration"&&Ne.source){Ne.source;const je={type:"ImportExpression",source:Ne.source};create(Ne,je),ze={type:"AwaitExpression",argument:je},(Ne.type==="ImportDeclaration"||Ne.type==="ExportNamedDeclaration")&&Ne.specifiers.length===0?He={type:"ExpressionStatement",expression:ze}:He={type:"VariableDeclaration",kind:"const",declarations:Ne.type==="ExportAllDeclaration"?[{type:"VariableDeclarator",id:{type:"Identifier",name:"_exportAll"+ ++Re},init:ze}]:specifiersToDeclarations(Ne.specifiers,ze)}}else if(Ne.declaration)He=Ne.declaration;else{const je=[];for(const Ge of Ne.specifiers)Ge.exported.type==="Identifier"&&Ge.local.type==="Identifier"&&Ge.local.name!==Ge.exported.name&&je.push({type:"VariableDeclarator",id:Ge.exported,init:Ge.local});je.length>0&&(He={type:"VariableDeclaration",kind:"const",declarations:je})}else He=Ne;He&&Te.push(He)}};function be(Ae,Se,Ce){let Re={type:"JSXElement",openingElement:{type:"JSXOpeningElement",name:{type:"JSXIdentifier",name:"MDXLayout"},attributes:[{type:"JSXSpreadAttribute",argument:{type:"Identifier",name:"props"}}],selfClosing:!1},closingElement:{type:"JSXClosingElement",name:{type:"JSXIdentifier",name:"MDXLayout"}},children:[{type:"JSXElement",openingElement:{type:"JSXOpeningElement",name:{type:"JSXIdentifier",name:"_createMdxContent"},attributes:[{type:"JSXSpreadAttribute",argument:{type:"Identifier",name:"props"}}],selfClosing:!0},closingElement:null,children:[]}]};Ce||(Re={type:"ConditionalExpression",test:{type:"Identifier",name:"MDXLayout"},consequent:Re,alternate:{type:"CallExpression",callee:{type:"Identifier",name:"_createMdxContent"},arguments:[{type:"Identifier",name:"props"}],optional:!1}});let De=Ae||{type:"Identifier",name:"undefined"};De.type==="JSXFragment"&&De.children.length===1&&De.children[0].type==="JSXElement"&&(De=De.children[0]);let Ie=!1;walk(De,{enter(Le){if(Le.type==="ArrowFunctionExpression"||Le.type==="FunctionDeclaration"||Le.type==="FunctionExpression")return this.skip();(Le.type==="AwaitExpression"||Le.type==="ForOfStatement"&&Le.await)&&(Ie=!0)}});const Be={type:"FunctionDeclaration",id:{type:"Identifier",name:"MDXContent"},params:[{type:"AssignmentPattern",left:{type:"Identifier",name:"props"},right:{type:"ObjectExpression",properties:[]}}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:Re}]}};return[{type:"FunctionDeclaration",async:Ie,id:{type:"Identifier",name:"_createMdxContent"},params:[{type:"Identifier",name:"props"}],body:{type:"BlockStatement",body:[{type:"ReturnStatement",argument:De}]}},Se==="program"?{type:"ExportDefaultDeclaration",declaration:Be}:Be]}}function injectPragma(fe,K,me){fe.comments?.unshift({type:"Block",value:K+" "+me,data:{_mdxIsPragmaComment:!0}})}function resolveDynamicMdxSpecifier(fe){return{type:"FunctionDeclaration",id:{type:"Identifier",name:"_resolveDynamicMdxSpecifier"},generator:!1,async:!1,params:[{type:"Identifier",name:"d"}],body:{type:"BlockStatement",body:[{type:"IfStatement",test:{type:"BinaryExpression",left:{type:"UnaryExpression",operator:"typeof",prefix:!0,argument:{type:"Identifier",name:"d"}},operator:"!==",right:{type:"Literal",value:"string"}},consequent:{type:"ReturnStatement",argument:{type:"Identifier",name:"d"}},alternate:null},{type:"TryStatement",block:{type:"BlockStatement",body:[{type:"ExpressionStatement",expression:{type:"NewExpression",callee:{type:"Identifier",name:"URL"},arguments:[{type:"Identifier",name:"d"}]}},{type:"ReturnStatement",argument:{type:"Identifier",name:"d"}}]},handler:{type:"CatchClause",param:null,body:{type:"BlockStatement",body:[]}},finalizer:null},{type:"IfStatement",test:{type:"LogicalExpression",left:{type:"LogicalExpression",left:{type:"CallExpression",callee:toIdOrMemberExpression(["d","startsWith"]),arguments:[{type:"Literal",value:"/"}],optional:!1},operator:"||",right:{type:"CallExpression",callee:toIdOrMemberExpression(["d","startsWith"]),arguments:[{type:"Literal",value:"./"}],optional:!1}},operator:"||",right:{type:"CallExpression",callee:toIdOrMemberExpression(["d","startsWith"]),arguments:[{type:"Literal",value:"../"}],optional:!1}},consequent:{type:"ReturnStatement",argument:{type:"MemberExpression",object:{type:"NewExpression",callee:{type:"Identifier",name:"URL"},arguments:[{type:"Identifier",name:"d"},fe]},property:{type:"Identifier",name:"href"},computed:!1,optional:!1}},alternate:null},{type:"ReturnStatement",argument:{type:"Identifier",name:"d"}}]}}}function createImportMetaUrlVariable(){return[{type:"VariableDeclaration",declarations:[{type:"VariableDeclarator",id:{type:"Identifier",name:"_importMetaUrl"},init:toIdOrMemberExpression(["arguments",0,"baseUrl"])}],kind:"const"},{type:"IfStatement",test:{type:"UnaryExpression",operator:"!",prefix:!0,argument:{type:"Identifier",name:"_importMetaUrl"}},consequent:{type:"ThrowStatement",argument:{type:"NewExpression",callee:{type:"Identifier",name:"Error"},arguments:[{type:"Literal",value:"Unexpected missing `options.baseUrl` needed to support `export … from`, `import`, or `import.meta.url` when generating `function-body`"}]}},alternate:null}]}function toBinaryAddition(fe){let K=-1,me;for(;++K<fe.length;){const ge=fe[K];me=me?{type:"BinaryExpression",left:me,operator:"+",right:ge}:ge}return me}function recmaJsxRewrite(fe){const{development:K,outputFormat:me,providerImportSource:ge}=fe;return function(xe,ye){const ve=createVisitors(),_e=[];let Ee=!1,be=!1;if(walk(xe,{enter(Ae){ve.enter(Ae),(Ae.type==="FunctionDeclaration"||Ae.type==="FunctionExpression"||Ae.type==="ArrowFunctionExpression")&&(_e.push({components:[],idToInvalidComponentName:new Map,node:Ae,objects:[],references:{},tags:[]}),isNamedFunction(Ae,"MDXContent")&&!inScope(ve.scopes,"MDXLayout")&&_e[0].components.push("MDXLayout"));const Se=_e[0];if(!(!Se||!isNamedFunction(Se.node,"_createMdxContent")&&!ge)&&Ae.type==="JSXElement"){let Ce=Ae.openingElement.name;if(Ce.type==="JSXMemberExpression"){const Te=[];for(;Ce.type==="JSXMemberExpression";)Te.unshift(Ce.property.name),Ce=Ce.object;Te.unshift(Ce.name);const Re=Te.join("."),De=Ce.name,Ie=inScope(ve.scopes,De);!Object.hasOwn(Se.references,Re)&&(!Ie||_e.length===1&&_e[0].node.type==="FunctionDeclaration"&&isNamedFunction(_e[0].node,"_createMdxContent"))&&(Se.references[Re]={component:!0,node:Ae}),!Se.objects.includes(De)&&!Ie&&Se.objects.push(De)}else if(Ce.type!=="JSXNamespacedName"){if(name$1(Ce.name)&&!/^[a-z]/.test(Ce.name)){const Te=Ce.name;inScope(ve.scopes,Te)||(Te!=="MDXLayout"&&!Object.hasOwn(Se.references,Te)&&(Se.references[Te]={component:!0,node:Ae}),Se.components.includes(Te)||Se.components.push(Te))}else if(!(Ae.data&&Ae.data._mdxExplicitJsx)){const Te=Ce.name;Se.tags.includes(Te)||Se.tags.push(Te);let Re=["_components",Te];if(name$1(Te)===!1){let De=Se.idToInvalidComponentName.get(Te);De===void 0&&(De=`_component${Se.idToInvalidComponentName.size}`,Se.idToInvalidComponentName.set(Te,De)),Re=[De]}Ae.openingElement.name=toJsxIdOrMemberExpression(Re),Ae.closingElement&&(Ae.closingElement.name=toJsxIdOrMemberExpression(Re))}}}},leave(Ae){ve.exit(Ae);const Se=[],Ce=[],Te=[],Re=[];if(Ae.type==="FunctionDeclaration"||Ae.type==="FunctionExpression"||Ae.type==="ArrowFunctionExpression"){const De=_e[_e.length-1];let Ie;for(Ie of De.tags.sort())Se.push({type:"Property",kind:"init",key:name$1(Ie)?{type:"Identifier",name:Ie}:{type:"Literal",value:Ie},value:{type:"Literal",value:Ie},method:!1,shorthand:!1,computed:!1});Ce.push(...De.components);for(Ie of De.objects)Ce.includes(Ie)||Ce.push(Ie);Ce.sort();const Be=[];if(Se.length>0||Ce.length>0||De.idToInvalidComponentName.size>0){if(ge&&(Ee=!0,Te.push({type:"CallExpression",callee:{type:"Identifier",name:"_provideComponents"},arguments:[],optional:!1})),(isNamedFunction(De.node,"MDXContent")||isNamedFunction(De.node,"_createMdxContent"))&&Te.push(toIdOrMemberExpression(["props","components"])),Se.length>0||Te.length>1)for(const He of Te)Se.push({type:"SpreadElement",argument:He});let Ue=Se.length>0?{type:"ObjectExpression",properties:Se}:{type:"LogicalExpression",operator:"||",left:Te[0],right:{type:"ObjectExpression",properties:[]}},Ne;if(Ce.length>0&&(Ne={type:"ObjectPattern",properties:Ce.map(function(He){return{type:"Property",kind:"init",key:{type:"Identifier",name:He==="MDXLayout"?"wrapper":He},value:{type:"Identifier",name:He},method:!1,shorthand:He!=="MDXLayout",computed:!1}})}),De.tags.length>0&&(Re.push({type:"VariableDeclarator",id:{type:"Identifier",name:"_components"},init:Ue}),Ue={type:"Identifier",name:"_components"}),isNamedFunction(De.node,"_createMdxContent"))for(const[He,ze]of[...De.idToInvalidComponentName].sort(function([je],[Ge]){return je.localeCompare(Ge)}))Re.push({type:"VariableDeclarator",id:{type:"Identifier",name:ze},init:{type:"MemberExpression",object:{type:"Identifier",name:"_components"},property:{type:"Literal",value:He},computed:!0,optional:!1}});Ne&&Re.push({type:"VariableDeclarator",id:Ne,init:Ue}),Re.length>0&&Be.push({type:"VariableDeclaration",kind:"const",declarations:Re})}let Le;for(Le in De.references)if(Object.hasOwn(De.references,Le)){const Ue=Le.split(".");let Ne=0;for(;++Ne<Ue.length;){const He=Ue.slice(0,Ne).join(".");Object.hasOwn(De.references,He)||(De.references[He]={component:!1,node:De.references[Le].node})}}const Oe=Object.keys(De.references).sort();let Fe=-1;for(;++Fe<Oe.length;){const Ue=Oe[Fe],Ne=De.references[Ue],He=stringifyPosition(positionFromEstree(Ne.node)),ze=[{type:"Literal",value:Ue},{type:"Literal",value:Ne.component}];be=!0,K&&He&&ze.push({type:"Literal",value:He}),Be.push({type:"IfStatement",test:{type:"UnaryExpression",operator:"!",prefix:!0,argument:toIdOrMemberExpression(Ue.split("."))},consequent:{type:"ExpressionStatement",expression:{type:"CallExpression",callee:{type:"Identifier",name:"_missingMdxReference"},arguments:ze,optional:!1}},alternate:void 0})}Be.length>0&&(Ae.body.type!=="BlockStatement"&&(Ae.body={type:"BlockStatement",body:[{type:"ReturnStatement",argument:Ae.body}]}),Ae.body.body.unshift(...Be)),_e.pop()}}}),Ee&&ge&&xe.body.unshift(createImportProvider(ge,me)),be){const Ae=[{type:"Literal",value:"Expected "},{type:"ConditionalExpression",test:{type:"Identifier",name:"component"},consequent:{type:"Literal",value:"component"},alternate:{type:"Literal",value:"object"}},{type:"Literal",value:" `"},{type:"Identifier",name:"id"},{type:"Literal",value:"` to be defined: you likely forgot to import, pass, or provide it."}],Se=[{type:"Identifier",name:"id"},{type:"Identifier",name:"component"}];K&&(Ae.push({type:"ConditionalExpression",test:{type:"Identifier",name:"place"},consequent:toBinaryAddition([{type:"Literal",value:"\nIt’s referenced in your code at `"},{type:"Identifier",name:"place"},{type:"Literal",value:(ye.path?"` in `"+ye.path:"")+"`"}]),alternate:{type:"Literal",value:""}}),Se.push({type:"Identifier",name:"place"})),xe.body.push({type:"FunctionDeclaration",id:{type:"Identifier",name:"_missingMdxReference"},generator:!1,async:!1,params:Se,body:{type:"BlockStatement",body:[{type:"ThrowStatement",argument:{type:"NewExpression",callee:{type:"Identifier",name:"Error"},arguments:[toBinaryAddition(Ae)]}}]}})}me==="function-body"&&xe.body.unshift({type:"ExpressionStatement",expression:{type:"Literal",value:"use strict"},directive:"use strict"})}}function createImportProvider(fe,K){const me=[{type:"ImportSpecifier",imported:{type:"Identifier",name:"useMDXComponents"},local:{type:"Identifier",name:"_provideComponents"}}];return K==="function-body"?{type:"VariableDeclaration",kind:"const",declarations:specifiersToDeclarations(me,toIdOrMemberExpression(["arguments",0]))}:{type:"ImportDeclaration",specifiers:me,source:{type:"Literal",value:fe}}}function isNamedFunction(fe,K){return!!(fe&&"id"in fe&&fe.id&&fe.id.name===K)}function inScope(fe,K){let me=fe.length;for(;me--;)if(fe[me].defined.includes(K))return!0;return!1}function rehypeRemoveRaw(){return function(fe){visit$1(fe,"raw",function(K,me,ge){if(ge&&typeof me=="number")return ge.children.splice(me,1),me})}}const js=/\s+/g,html$1=/[\t\n\v\f\r ]+/g;function collapseWhiteSpace(fe,K){K?typeof K=="string"&&(K={style:K}):K={};const me=K.preserveLineEndings?replaceLineEnding:replaceSpace;return String(fe).replace(K.style==="html"?html$1:js,K.trim?trimFactory(me):me)}function replaceLineEnding(fe){const K=/\r?\n|\r/.exec(fe);return K?K[0]:" "}function replaceSpace(){return" "}function trimFactory(fe){return K;function K(me,ge,xe){return ge===0||ge+me.length===xe.length?"":fe(me)}}function remarkMarkAndUnravel(){return function(fe){visit$1(fe,function(K,me,ge){let xe=-1,ye=!0,ve=!1;if(ge&&typeof me=="number"&&K.type==="paragraph"){const _e=K.children;for(;++xe<_e.length;){const Ee=_e[xe];if(Ee.type==="mdxJsxTextElement"||Ee.type==="mdxTextExpression")ve=!0;else if(!(Ee.type==="text"&&collapseWhiteSpace(Ee.value,{style:"html",trim:!0})==="")){ye=!1;break}}if(ye&&ve){xe=-1;const Ee=[];for(;++xe<_e.length;){const be=_e[xe];be.type==="mdxJsxTextElement"&&(be.type="mdxJsxFlowElement"),be.type==="mdxTextExpression"&&(be.type="mdxFlowExpression"),be.type==="text"&&/^[\t\r\n ]+$/.test(String(be.value))||Ee.push(be)}return ge.children.splice(me,1,...Ee),me}}if(K.type==="mdxJsxFlowElement"||K.type==="mdxJsxTextElement"){const _e=K.data||(K.data={});_e._mdxExplicitJsx=!0}(K.type==="mdxFlowExpression"||K.type==="mdxTextExpression"||K.type==="mdxjsEsm")&&K.data&&K.data.estree&&walk(K.data.estree,{enter(_e){if(_e.type==="JSXElement"){const Ee=_e.data||(_e.data={});Ee._mdxExplicitJsx=!0}}})})}}const nodeTypes=["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"];let warned=!1;function createProcessor(fe){const K=fe||{};K.format,(K.jsxRuntime==="classic"||K.pragma||K.pragmaFrag||K.pragmaImportSource)&&!warned&&(warned=!0,console.warn("Unexpected deprecated option `jsxRuntime: 'classic'`, `pragma`, `pragmaFrag`, or `pragmaImportSource`; see <https://mdxjs.com/migrating/v3/> on how to migrate"));const me=unified().use(remarkParse);K.format!=="md"&&me.use(remarkMdx);const ge=K.remarkRehypeOptions||{};return me.use(remarkMarkAndUnravel).use(K.remarkPlugins||[]).use(remarkRehype,{...ge,allowDangerousHtml:!0,passThrough:[...ge.passThrough||[],...nodeTypes]}).use(K.rehypePlugins||[]),K.format==="md"&&me.use(rehypeRemoveRaw),me.use(rehypeRecma,K).use(recmaDocument,K).use(recmaJsxRewrite,K),K.jsx||me.use(recmaJsx$1,K).use(recmaBuildJsxTransform,K),me.use(recmaJsx).use(recmaStringify,K).use(K.recmaPlugins||[]),me}function compile(fe,K){const{file:me,options:ge}=resolveFileAndOptions(fe,K);return createProcessor(ge).process(me)}function resolveEvaluateOptions(fe){const{Fragment:K,baseUrl:me,development:ge,jsx:xe,jsxDEV:ye,jsxs:ve,useMDXComponents:_e,...Ee}=fe||{};if(!K)throw new Error("Expected `Fragment` given to `evaluate`");if(ge){if(!ye)throw new Error("Expected `jsxDEV` given to `evaluate`")}else{if(!xe)throw new Error("Expected `jsx` given to `evaluate`");if(!ve)throw new Error("Expected `jsxs` given to `evaluate`")}return{compiletime:{...Ee,development:ge,outputFormat:"function-body",providerImportSource:_e?"#":void 0},runtime:{Fragment:K,baseUrl:me,jsx:xe,jsxDEV:ye,jsxs:ve,useMDXComponents:_e}}}const AsyncFunction=Object.getPrototypeOf(run).constructor;async function run(fe,K){return new AsyncFunction(String(fe))(K)}async function evaluate(fe,K){const{compiletime:me,runtime:ge}=resolveEvaluateOptions(K);return run(await compile(fe,me),ge)}function escapeStringRegexp(fe){if(typeof fe!="string")throw new TypeError("Expected a string");return fe.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function findAndReplace(fe,K,me){const xe=convert$1((me||{}).ignore||[]),ye=toPairs(K);let ve=-1;for(;++ve<ye.length;)visitParents$1(fe,"text",_e);function _e(be,Ae){let Se=-1,Ce;for(;++Se<Ae.length;){const Te=Ae[Se],Re=Ce?Ce.children:void 0;if(xe(Te,Re?Re.indexOf(Te):void 0,Ce))return;Ce=Te}if(Ce)return Ee(be,Ae)}function Ee(be,Ae){const Se=Ae[Ae.length-1],Ce=ye[ve][0],Te=ye[ve][1];let Re=0;const Ie=Se.children.indexOf(be);let Be=!1,Le=[];Ce.lastIndex=0;let Oe=Ce.exec(be.value);for(;Oe;){const Fe=Oe.index,Ue={index:Oe.index,input:Oe.input,stack:[...Ae,be]};let Ne=Te(...Oe,Ue);if(typeof Ne=="string"&&(Ne=Ne.length>0?{type:"text",value:Ne}:void 0),Ne===!1?Ce.lastIndex=Fe+1:(Re!==Fe&&Le.push({type:"text",value:be.value.slice(Re,Fe)}),Array.isArray(Ne)?Le.push(...Ne):Ne&&Le.push(Ne),Re=Fe+Oe[0].length,Be=!0),!Ce.global)break;Oe=Ce.exec(be.value)}return Be?(Re<be.value.length&&Le.push({type:"text",value:be.value.slice(Re)}),Se.children.splice(Ie,1,...Le)):Le=[be],Ie+Le.length}}function toPairs(fe){const K=[];if(!Array.isArray(fe))throw new TypeError("Expected find and replace tuple or list of tuples");const me=!fe[0]||Array.isArray(fe[0])?fe:[fe];let ge=-1;for(;++ge<me.length;){const xe=me[ge];K.push([toExpression(xe[0]),toFunction(xe[1])])}return K}function toExpression(fe){return typeof fe=="string"?new RegExp(escapeStringRegexp(fe),"g"):fe}function toFunction(fe){return typeof fe=="function"?fe:function(){return fe}}const inConstruct="phrasing",notInConstruct=["autolink","link","image","label"];function gfmAutolinkLiteralFromMarkdown(){return{transforms:[transformGfmAutolinkLiterals],enter:{literalAutolink:enterLiteralAutolink,literalAutolinkEmail:enterLiteralAutolinkValue,literalAutolinkHttp:enterLiteralAutolinkValue,literalAutolinkWww:enterLiteralAutolinkValue},exit:{literalAutolink:exitLiteralAutolink,literalAutolinkEmail:exitLiteralAutolinkEmail,literalAutolinkHttp:exitLiteralAutolinkHttp,literalAutolinkWww:exitLiteralAutolinkWww}}}function gfmAutolinkLiteralToMarkdown(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct,notInConstruct},{character:":",before:"[ps]",after:"\\/",inConstruct,notInConstruct}]}}function enterLiteralAutolink(fe){this.enter({type:"link",title:null,url:"",children:[]},fe)}function enterLiteralAutolinkValue(fe){this.config.enter.autolinkProtocol.call(this,fe)}function exitLiteralAutolinkHttp(fe){this.config.exit.autolinkProtocol.call(this,fe)}function exitLiteralAutolinkWww(fe){this.config.exit.data.call(this,fe);const K=this.stack[this.stack.length-1];K.type,K.url="http://"+this.sliceSerialize(fe)}function exitLiteralAutolinkEmail(fe){this.config.exit.autolinkEmail.call(this,fe)}function exitLiteralAutolink(fe){this.exit(fe)}function transformGfmAutolinkLiterals(fe){findAndReplace(fe,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,findUrl],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),findEmail]],{ignore:["link","linkReference"]})}function findUrl(fe,K,me,ge,xe){let ye="";if(!previous(xe)||(/^w/i.test(K)&&(me=K+me,K="",ye="http://"),!isCorrectDomain(me)))return!1;const ve=splitUrl(me+ge);if(!ve[0])return!1;const _e={type:"link",title:null,url:ye+K+ve[0],children:[{type:"text",value:K+ve[0]}]};return ve[1]?[_e,{type:"text",value:ve[1]}]:_e}function findEmail(fe,K,me,ge){return!previous(ge,!0)||/[-\d_]$/.test(me)?!1:{type:"link",title:null,url:"mailto:"+K+"@"+me,children:[{type:"text",value:K+"@"+me}]}}function isCorrectDomain(fe){const K=fe.split(".");return!(K.length<2||K[K.length-1]&&(/_/.test(K[K.length-1])||!/[a-zA-Z\d]/.test(K[K.length-1]))||K[K.length-2]&&(/_/.test(K[K.length-2])||!/[a-zA-Z\d]/.test(K[K.length-2])))}function splitUrl(fe){const K=/[!"&'),.:;<>?\]}]+$/.exec(fe);if(!K)return[fe,void 0];fe=fe.slice(0,K.index);let me=K[0],ge=me.indexOf(")");const xe=ccount(fe,"(");let ye=ccount(fe,")");for(;ge!==-1&&xe>ye;)fe+=me.slice(0,ge+1),me=me.slice(ge+1),ge=me.indexOf(")"),ye++;return[fe,me]}function previous(fe,K){const me=fe.input.charCodeAt(fe.index-1);return(fe.index===0||unicodeWhitespace(me)||unicodePunctuation(me))&&(!K||me!==47)}footnoteReference.peek=footnoteReferencePeek;function enterFootnoteCallString(){this.buffer()}function enterFootnoteCall(fe){this.enter({type:"footnoteReference",identifier:"",label:""},fe)}function enterFootnoteDefinitionLabelString(){this.buffer()}function enterFootnoteDefinition(fe){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},fe)}function exitFootnoteCallString(fe){const K=this.resume(),me=this.stack[this.stack.length-1];me.type,me.identifier=normalizeIdentifier(this.sliceSerialize(fe)).toLowerCase(),me.label=K}function exitFootnoteCall(fe){this.exit(fe)}function exitFootnoteDefinitionLabelString(fe){const K=this.resume(),me=this.stack[this.stack.length-1];me.type,me.identifier=normalizeIdentifier(this.sliceSerialize(fe)).toLowerCase(),me.label=K}function exitFootnoteDefinition(fe){this.exit(fe)}function footnoteReferencePeek(){return"["}function footnoteReference(fe,K,me,ge){const xe=me.createTracker(ge);let ye=xe.move("[^");const ve=me.enter("footnoteReference"),_e=me.enter("reference");return ye+=xe.move(me.safe(me.associationId(fe),{after:"]",before:ye})),_e(),ve(),ye+=xe.move("]"),ye}function gfmFootnoteFromMarkdown(){return{enter:{gfmFootnoteCallString:enterFootnoteCallString,gfmFootnoteCall:enterFootnoteCall,gfmFootnoteDefinitionLabelString:enterFootnoteDefinitionLabelString,gfmFootnoteDefinition:enterFootnoteDefinition},exit:{gfmFootnoteCallString:exitFootnoteCallString,gfmFootnoteCall:exitFootnoteCall,gfmFootnoteDefinitionLabelString:exitFootnoteDefinitionLabelString,gfmFootnoteDefinition:exitFootnoteDefinition}}}function gfmFootnoteToMarkdown(fe){let K=!1;return fe&&fe.firstLineBlank&&(K=!0),{handlers:{footnoteDefinition:me,footnoteReference},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function me(ge,xe,ye,ve){const _e=ye.createTracker(ve);let Ee=_e.move("[^");const be=ye.enter("footnoteDefinition"),Ae=ye.enter("label");return Ee+=_e.move(ye.safe(ye.associationId(ge),{before:Ee,after:"]"})),Ae(),Ee+=_e.move("]:"),ge.children&&ge.children.length>0&&(_e.shift(4),Ee+=_e.move((K?`
`:" ")+ye.indentLines(ye.containerFlow(ge,_e.current()),K?mapAll:mapExceptFirst))),be(),Ee}}function mapExceptFirst(fe,K,me){return K===0?fe:mapAll(fe,K,me)}function mapAll(fe,K,me){return(me?"":"    ")+fe}const constructsWithoutStrikethrough=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];handleDelete.peek=peekDelete;function gfmStrikethroughFromMarkdown(){return{canContainEols:["delete"],enter:{strikethrough:enterStrikethrough},exit:{strikethrough:exitStrikethrough}}}function gfmStrikethroughToMarkdown(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:constructsWithoutStrikethrough}],handlers:{delete:handleDelete}}}function enterStrikethrough(fe){this.enter({type:"delete",children:[]},fe)}function exitStrikethrough(fe){this.exit(fe)}function handleDelete(fe,K,me,ge){const xe=me.createTracker(ge),ye=me.enter("strikethrough");let ve=xe.move("~~");return ve+=me.containerPhrasing(fe,{...xe.current(),before:ve,after:"~"}),ve+=xe.move("~~"),ye(),ve}function peekDelete(){return"~"}function defaultStringLength(fe){return fe.length}function markdownTable(fe,K){const me=K||{},ge=(me.align||[]).concat(),xe=me.stringLength||defaultStringLength,ye=[],ve=[],_e=[],Ee=[];let be=0,Ae=-1;for(;++Ae<fe.length;){const De=[],Ie=[];let Be=-1;for(fe[Ae].length>be&&(be=fe[Ae].length);++Be<fe[Ae].length;){const Le=serialize(fe[Ae][Be]);if(me.alignDelimiters!==!1){const Oe=xe(Le);Ie[Be]=Oe,(Ee[Be]===void 0||Oe>Ee[Be])&&(Ee[Be]=Oe)}De.push(Le)}ve[Ae]=De,_e[Ae]=Ie}let Se=-1;if(typeof ge=="object"&&"length"in ge)for(;++Se<be;)ye[Se]=toAlignment(ge[Se]);else{const De=toAlignment(ge);for(;++Se<be;)ye[Se]=De}Se=-1;const Ce=[],Te=[];for(;++Se<be;){const De=ye[Se];let Ie="",Be="";De===99?(Ie=":",Be=":"):De===108?Ie=":":De===114&&(Be=":");let Le=me.alignDelimiters===!1?1:Math.max(1,Ee[Se]-Ie.length-Be.length);const Oe=Ie+"-".repeat(Le)+Be;me.alignDelimiters!==!1&&(Le=Ie.length+Le+Be.length,Le>Ee[Se]&&(Ee[Se]=Le),Te[Se]=Le),Ce[Se]=Oe}ve.splice(1,0,Ce),_e.splice(1,0,Te),Ae=-1;const Re=[];for(;++Ae<ve.length;){const De=ve[Ae],Ie=_e[Ae];Se=-1;const Be=[];for(;++Se<be;){const Le=De[Se]||"";let Oe="",Fe="";if(me.alignDelimiters!==!1){const Ue=Ee[Se]-(Ie[Se]||0),Ne=ye[Se];Ne===114?Oe=" ".repeat(Ue):Ne===99?Ue%2?(Oe=" ".repeat(Ue/2+.5),Fe=" ".repeat(Ue/2-.5)):(Oe=" ".repeat(Ue/2),Fe=Oe):Fe=" ".repeat(Ue)}me.delimiterStart!==!1&&!Se&&Be.push("|"),me.padding!==!1&&!(me.alignDelimiters===!1&&Le==="")&&(me.delimiterStart!==!1||Se)&&Be.push(" "),me.alignDelimiters!==!1&&Be.push(Oe),Be.push(Le),me.alignDelimiters!==!1&&Be.push(Fe),me.padding!==!1&&Be.push(" "),(me.delimiterEnd!==!1||Se!==be-1)&&Be.push("|")}Re.push(me.delimiterEnd===!1?Be.join("").replace(/ +$/,""):Be.join(""))}return Re.join(`
`)}function serialize(fe){return fe==null?"":String(fe)}function toAlignment(fe){const K=typeof fe=="string"?fe.codePointAt(0):0;return K===67||K===99?99:K===76||K===108?108:K===82||K===114?114:0}function blockquote(fe,K,me,ge){const xe=me.enter("blockquote"),ye=me.createTracker(ge);ye.move("> "),ye.shift(2);const ve=me.indentLines(me.containerFlow(fe,ye.current()),map$1);return xe(),ve}function map$1(fe,K,me){return">"+(me?"":" ")+fe}function patternInScope(fe,K){return listInScope(fe,K.inConstruct,!0)&&!listInScope(fe,K.notInConstruct,!1)}function listInScope(fe,K,me){if(typeof K=="string"&&(K=[K]),!K||K.length===0)return me;let ge=-1;for(;++ge<K.length;)if(fe.includes(K[ge]))return!0;return!1}function hardBreak(fe,K,me,ge){let xe=-1;for(;++xe<me.unsafe.length;)if(me.unsafe[xe].character===`
`&&patternInScope(me.stack,me.unsafe[xe]))return/[ \t]/.test(ge.before)?"":" ";return`\\
`}function longestStreak(fe,K){const me=String(fe);let ge=me.indexOf(K),xe=ge,ye=0,ve=0;if(typeof K!="string")throw new TypeError("Expected substring");for(;ge!==-1;)ge===xe?++ye>ve&&(ve=ye):ye=1,xe=ge+K.length,ge=me.indexOf(K,xe);return ve}function formatCodeAsIndented(fe,K){return!!(K.options.fences===!1&&fe.value&&!fe.lang&&/[^ \r\n]/.test(fe.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(fe.value))}function checkFence(fe){const K=fe.options.fence||"`";if(K!=="`"&&K!=="~")throw new Error("Cannot serialize code with `"+K+"` for `options.fence`, expected `` ` `` or `~`");return K}function code$1(fe,K,me,ge){const xe=checkFence(me),ye=fe.value||"",ve=xe==="`"?"GraveAccent":"Tilde";if(formatCodeAsIndented(fe,me)){const Se=me.enter("codeIndented"),Ce=me.indentLines(ye,map);return Se(),Ce}const _e=me.createTracker(ge),Ee=xe.repeat(Math.max(longestStreak(ye,xe)+1,3)),be=me.enter("codeFenced");let Ae=_e.move(Ee);if(fe.lang){const Se=me.enter(`codeFencedLang${ve}`);Ae+=_e.move(me.safe(fe.lang,{before:Ae,after:" ",encode:["`"],..._e.current()})),Se()}if(fe.lang&&fe.meta){const Se=me.enter(`codeFencedMeta${ve}`);Ae+=_e.move(" "),Ae+=_e.move(me.safe(fe.meta,{before:Ae,after:`
`,encode:["`"],..._e.current()})),Se()}return Ae+=_e.move(`
`),ye&&(Ae+=_e.move(ye+`
`)),Ae+=_e.move(Ee),be(),Ae}function map(fe,K,me){return(me?"":"    ")+fe}function checkQuote(fe){const K=fe.options.quote||'"';if(K!=='"'&&K!=="'")throw new Error("Cannot serialize title with `"+K+"` for `options.quote`, expected `\"`, or `'`");return K}function definition(fe,K,me,ge){const xe=checkQuote(me),ye=xe==='"'?"Quote":"Apostrophe",ve=me.enter("definition");let _e=me.enter("label");const Ee=me.createTracker(ge);let be=Ee.move("[");return be+=Ee.move(me.safe(me.associationId(fe),{before:be,after:"]",...Ee.current()})),be+=Ee.move("]: "),_e(),!fe.url||/[\0- \u007F]/.test(fe.url)?(_e=me.enter("destinationLiteral"),be+=Ee.move("<"),be+=Ee.move(me.safe(fe.url,{before:be,after:">",...Ee.current()})),be+=Ee.move(">")):(_e=me.enter("destinationRaw"),be+=Ee.move(me.safe(fe.url,{before:be,after:fe.title?" ":`
`,...Ee.current()}))),_e(),fe.title&&(_e=me.enter(`title${ye}`),be+=Ee.move(" "+xe),be+=Ee.move(me.safe(fe.title,{before:be,after:xe,...Ee.current()})),be+=Ee.move(xe),_e()),ve(),be}function checkEmphasis(fe){const K=fe.options.emphasis||"*";if(K!=="*"&&K!=="_")throw new Error("Cannot serialize emphasis with `"+K+"` for `options.emphasis`, expected `*`, or `_`");return K}function encodeCharacterReference(fe){return"&#x"+fe.toString(16).toUpperCase()+";"}function encodeInfo(fe,K,me){const ge=classifyCharacter(fe),xe=classifyCharacter(K);return ge===void 0?xe===void 0?me==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:xe===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:ge===1?xe===void 0?{inside:!1,outside:!1}:xe===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:xe===void 0?{inside:!1,outside:!1}:xe===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}emphasis.peek=emphasisPeek;function emphasis(fe,K,me,ge){const xe=checkEmphasis(me),ye=me.enter("emphasis"),ve=me.createTracker(ge),_e=ve.move(xe);let Ee=ve.move(me.containerPhrasing(fe,{after:xe,before:_e,...ve.current()}));const be=Ee.charCodeAt(0),Ae=encodeInfo(ge.before.charCodeAt(ge.before.length-1),be,xe);Ae.inside&&(Ee=encodeCharacterReference(be)+Ee.slice(1));const Se=Ee.charCodeAt(Ee.length-1),Ce=encodeInfo(ge.after.charCodeAt(0),Se,xe);Ce.inside&&(Ee=Ee.slice(0,-1)+encodeCharacterReference(Se));const Te=ve.move(xe);return ye(),me.attentionEncodeSurroundingInfo={after:Ce.outside,before:Ae.outside},_e+Ee+Te}function emphasisPeek(fe,K,me){return me.options.emphasis||"*"}function formatHeadingAsSetext(fe,K){let me=!1;return visit$1(fe,function(ge){if("value"in ge&&/\r?\n|\r/.test(ge.value)||ge.type==="break")return me=!0,EXIT$1}),!!((!fe.depth||fe.depth<3)&&toString$2(fe)&&(K.options.setext||me))}function heading(fe,K,me,ge){const xe=Math.max(Math.min(6,fe.depth||1),1),ye=me.createTracker(ge);if(formatHeadingAsSetext(fe,me)){const Ae=me.enter("headingSetext"),Se=me.enter("phrasing"),Ce=me.containerPhrasing(fe,{...ye.current(),before:`
`,after:`
`});return Se(),Ae(),Ce+`
`+(xe===1?"=":"-").repeat(Ce.length-(Math.max(Ce.lastIndexOf("\r"),Ce.lastIndexOf(`
`))+1))}const ve="#".repeat(xe),_e=me.enter("headingAtx"),Ee=me.enter("phrasing");ye.move(ve+" ");let be=me.containerPhrasing(fe,{before:"# ",after:`
`,...ye.current()});return/^[\t ]/.test(be)&&(be=encodeCharacterReference(be.charCodeAt(0))+be.slice(1)),be=be?ve+" "+be:ve,me.options.closeAtx&&(be+=" "+ve),Ee(),_e(),be}html.peek=htmlPeek;function html(fe){return fe.value||""}function htmlPeek(){return"<"}image.peek=imagePeek;function image(fe,K,me,ge){const xe=checkQuote(me),ye=xe==='"'?"Quote":"Apostrophe",ve=me.enter("image");let _e=me.enter("label");const Ee=me.createTracker(ge);let be=Ee.move("![");return be+=Ee.move(me.safe(fe.alt,{before:be,after:"]",...Ee.current()})),be+=Ee.move("]("),_e(),!fe.url&&fe.title||/[\0- \u007F]/.test(fe.url)?(_e=me.enter("destinationLiteral"),be+=Ee.move("<"),be+=Ee.move(me.safe(fe.url,{before:be,after:">",...Ee.current()})),be+=Ee.move(">")):(_e=me.enter("destinationRaw"),be+=Ee.move(me.safe(fe.url,{before:be,after:fe.title?" ":")",...Ee.current()}))),_e(),fe.title&&(_e=me.enter(`title${ye}`),be+=Ee.move(" "+xe),be+=Ee.move(me.safe(fe.title,{before:be,after:xe,...Ee.current()})),be+=Ee.move(xe),_e()),be+=Ee.move(")"),ve(),be}function imagePeek(){return"!"}imageReference.peek=imageReferencePeek;function imageReference(fe,K,me,ge){const xe=fe.referenceType,ye=me.enter("imageReference");let ve=me.enter("label");const _e=me.createTracker(ge);let Ee=_e.move("![");const be=me.safe(fe.alt,{before:Ee,after:"]",..._e.current()});Ee+=_e.move(be+"]["),ve();const Ae=me.stack;me.stack=[],ve=me.enter("reference");const Se=me.safe(me.associationId(fe),{before:Ee,after:"]",..._e.current()});return ve(),me.stack=Ae,ye(),xe==="full"||!be||be!==Se?Ee+=_e.move(Se+"]"):xe==="shortcut"?Ee=Ee.slice(0,-1):Ee+=_e.move("]"),Ee}function imageReferencePeek(){return"!"}inlineCode.peek=inlineCodePeek;function inlineCode(fe,K,me){let ge=fe.value||"",xe="`",ye=-1;for(;new RegExp("(^|[^`])"+xe+"([^`]|$)").test(ge);)xe+="`";for(/[^ \r\n]/.test(ge)&&(/^[ \r\n]/.test(ge)&&/[ \r\n]$/.test(ge)||/^`|`$/.test(ge))&&(ge=" "+ge+" ");++ye<me.unsafe.length;){const ve=me.unsafe[ye],_e=me.compilePattern(ve);let Ee;if(ve.atBreak)for(;Ee=_e.exec(ge);){let be=Ee.index;ge.charCodeAt(be)===10&&ge.charCodeAt(be-1)===13&&be--,ge=ge.slice(0,be)+" "+ge.slice(Ee.index+1)}}return xe+ge+xe}function inlineCodePeek(){return"`"}function formatLinkAsAutolink(fe,K){const me=toString$2(fe);return!!(!K.options.resourceLink&&fe.url&&!fe.title&&fe.children&&fe.children.length===1&&fe.children[0].type==="text"&&(me===fe.url||"mailto:"+me===fe.url)&&/^[a-z][a-z+.-]+:/i.test(fe.url)&&!/[\0- <>\u007F]/.test(fe.url))}link.peek=linkPeek;function link(fe,K,me,ge){const xe=checkQuote(me),ye=xe==='"'?"Quote":"Apostrophe",ve=me.createTracker(ge);let _e,Ee;if(formatLinkAsAutolink(fe,me)){const Ae=me.stack;me.stack=[],_e=me.enter("autolink");let Se=ve.move("<");return Se+=ve.move(me.containerPhrasing(fe,{before:Se,after:">",...ve.current()})),Se+=ve.move(">"),_e(),me.stack=Ae,Se}_e=me.enter("link"),Ee=me.enter("label");let be=ve.move("[");return be+=ve.move(me.containerPhrasing(fe,{before:be,after:"](",...ve.current()})),be+=ve.move("]("),Ee(),!fe.url&&fe.title||/[\0- \u007F]/.test(fe.url)?(Ee=me.enter("destinationLiteral"),be+=ve.move("<"),be+=ve.move(me.safe(fe.url,{before:be,after:">",...ve.current()})),be+=ve.move(">")):(Ee=me.enter("destinationRaw"),be+=ve.move(me.safe(fe.url,{before:be,after:fe.title?" ":")",...ve.current()}))),Ee(),fe.title&&(Ee=me.enter(`title${ye}`),be+=ve.move(" "+xe),be+=ve.move(me.safe(fe.title,{before:be,after:xe,...ve.current()})),be+=ve.move(xe),Ee()),be+=ve.move(")"),_e(),be}function linkPeek(fe,K,me){return formatLinkAsAutolink(fe,me)?"<":"["}linkReference.peek=linkReferencePeek;function linkReference(fe,K,me,ge){const xe=fe.referenceType,ye=me.enter("linkReference");let ve=me.enter("label");const _e=me.createTracker(ge);let Ee=_e.move("[");const be=me.containerPhrasing(fe,{before:Ee,after:"]",..._e.current()});Ee+=_e.move(be+"]["),ve();const Ae=me.stack;me.stack=[],ve=me.enter("reference");const Se=me.safe(me.associationId(fe),{before:Ee,after:"]",..._e.current()});return ve(),me.stack=Ae,ye(),xe==="full"||!be||be!==Se?Ee+=_e.move(Se+"]"):xe==="shortcut"?Ee=Ee.slice(0,-1):Ee+=_e.move("]"),Ee}function linkReferencePeek(){return"["}function checkBullet(fe){const K=fe.options.bullet||"*";if(K!=="*"&&K!=="+"&&K!=="-")throw new Error("Cannot serialize items with `"+K+"` for `options.bullet`, expected `*`, `+`, or `-`");return K}function checkBulletOther(fe){const K=checkBullet(fe),me=fe.options.bulletOther;if(!me)return K==="*"?"-":"*";if(me!=="*"&&me!=="+"&&me!=="-")throw new Error("Cannot serialize items with `"+me+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(me===K)throw new Error("Expected `bullet` (`"+K+"`) and `bulletOther` (`"+me+"`) to be different");return me}function checkBulletOrdered(fe){const K=fe.options.bulletOrdered||".";if(K!=="."&&K!==")")throw new Error("Cannot serialize items with `"+K+"` for `options.bulletOrdered`, expected `.` or `)`");return K}function checkRule(fe){const K=fe.options.rule||"*";if(K!=="*"&&K!=="-"&&K!=="_")throw new Error("Cannot serialize rules with `"+K+"` for `options.rule`, expected `*`, `-`, or `_`");return K}function list(fe,K,me,ge){const xe=me.enter("list"),ye=me.bulletCurrent;let ve=fe.ordered?checkBulletOrdered(me):checkBullet(me);const _e=fe.ordered?ve==="."?")":".":checkBulletOther(me);let Ee=K&&me.bulletLastUsed?ve===me.bulletLastUsed:!1;if(!fe.ordered){const Ae=fe.children?fe.children[0]:void 0;if((ve==="*"||ve==="-")&&Ae&&(!Ae.children||!Ae.children[0])&&me.stack[me.stack.length-1]==="list"&&me.stack[me.stack.length-2]==="listItem"&&me.stack[me.stack.length-3]==="list"&&me.stack[me.stack.length-4]==="listItem"&&me.indexStack[me.indexStack.length-1]===0&&me.indexStack[me.indexStack.length-2]===0&&me.indexStack[me.indexStack.length-3]===0&&(Ee=!0),checkRule(me)===ve&&Ae){let Se=-1;for(;++Se<fe.children.length;){const Ce=fe.children[Se];if(Ce&&Ce.type==="listItem"&&Ce.children&&Ce.children[0]&&Ce.children[0].type==="thematicBreak"){Ee=!0;break}}}}Ee&&(ve=_e),me.bulletCurrent=ve;const be=me.containerFlow(fe,ge);return me.bulletLastUsed=ve,me.bulletCurrent=ye,xe(),be}function checkListItemIndent(fe){const K=fe.options.listItemIndent||"one";if(K!=="tab"&&K!=="one"&&K!=="mixed")throw new Error("Cannot serialize items with `"+K+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return K}function listItem(fe,K,me,ge){const xe=checkListItemIndent(me);let ye=me.bulletCurrent||checkBullet(me);K&&K.type==="list"&&K.ordered&&(ye=(typeof K.start=="number"&&K.start>-1?K.start:1)+(me.options.incrementListMarker===!1?0:K.children.indexOf(fe))+ye);let ve=ye.length+1;(xe==="tab"||xe==="mixed"&&(K&&K.type==="list"&&K.spread||fe.spread))&&(ve=Math.ceil(ve/4)*4);const _e=me.createTracker(ge);_e.move(ye+" ".repeat(ve-ye.length)),_e.shift(ve);const Ee=me.enter("listItem"),be=me.indentLines(me.containerFlow(fe,_e.current()),Ae);return Ee(),be;function Ae(Se,Ce,Te){return Ce?(Te?"":" ".repeat(ve))+Se:(Te?ye:ye+" ".repeat(ve-ye.length))+Se}}function paragraph(fe,K,me,ge){const xe=me.enter("paragraph"),ye=me.enter("phrasing"),ve=me.containerPhrasing(fe,ge);return ye(),xe(),ve}const phrasing=convert$1(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function root$1(fe,K,me,ge){return(fe.children.some(function(ve){return phrasing(ve)})?me.containerPhrasing:me.containerFlow).call(me,fe,ge)}function checkStrong(fe){const K=fe.options.strong||"*";if(K!=="*"&&K!=="_")throw new Error("Cannot serialize strong with `"+K+"` for `options.strong`, expected `*`, or `_`");return K}strong.peek=strongPeek;function strong(fe,K,me,ge){const xe=checkStrong(me),ye=me.enter("strong"),ve=me.createTracker(ge),_e=ve.move(xe+xe);let Ee=ve.move(me.containerPhrasing(fe,{after:xe,before:_e,...ve.current()}));const be=Ee.charCodeAt(0),Ae=encodeInfo(ge.before.charCodeAt(ge.before.length-1),be,xe);Ae.inside&&(Ee=encodeCharacterReference(be)+Ee.slice(1));const Se=Ee.charCodeAt(Ee.length-1),Ce=encodeInfo(ge.after.charCodeAt(0),Se,xe);Ce.inside&&(Ee=Ee.slice(0,-1)+encodeCharacterReference(Se));const Te=ve.move(xe+xe);return ye(),me.attentionEncodeSurroundingInfo={after:Ce.outside,before:Ae.outside},_e+Ee+Te}function strongPeek(fe,K,me){return me.options.strong||"*"}function text$1(fe,K,me,ge){return me.safe(fe.value,ge)}function checkRuleRepetition(fe){const K=fe.options.ruleRepetition||3;if(K<3)throw new Error("Cannot serialize rules with repetition `"+K+"` for `options.ruleRepetition`, expected `3` or more");return K}function thematicBreak(fe,K,me){const ge=(checkRule(me)+(me.options.ruleSpaces?" ":"")).repeat(checkRuleRepetition(me));return me.options.ruleSpaces?ge.slice(0,-1):ge}const handle={blockquote,break:hardBreak,code:code$1,definition,emphasis,hardBreak,heading,html,image,imageReference,inlineCode,link,linkReference,list,listItem,paragraph,root:root$1,strong,text:text$1,thematicBreak};function gfmTableFromMarkdown(){return{enter:{table:enterTable,tableData:enterCell,tableHeader:enterCell,tableRow:enterRow},exit:{codeText:exitCodeText,table:exitTable,tableData:exit,tableHeader:exit,tableRow:exit}}}function enterTable(fe){const K=fe._align;this.enter({type:"table",align:K.map(function(me){return me==="none"?null:me}),children:[]},fe),this.data.inTable=!0}function exitTable(fe){this.exit(fe),this.data.inTable=void 0}function enterRow(fe){this.enter({type:"tableRow",children:[]},fe)}function exit(fe){this.exit(fe)}function enterCell(fe){this.enter({type:"tableCell",children:[]},fe)}function exitCodeText(fe){let K=this.resume();this.data.inTable&&(K=K.replace(/\\([\\|])/g,replace));const me=this.stack[this.stack.length-1];me.type,me.value=K,this.exit(fe)}function replace(fe,K){return K==="|"?K:fe}function gfmTableToMarkdown(fe){const K=fe||{},me=K.tableCellPadding,ge=K.tablePipeAlign,xe=K.stringLength,ye=me?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:Ce,table:ve,tableCell:Ee,tableRow:_e}};function ve(Te,Re,De,Ie){return be(Ae(Te,De,Ie),Te.align)}function _e(Te,Re,De,Ie){const Be=Se(Te,De,Ie),Le=be([Be]);return Le.slice(0,Le.indexOf(`
`))}function Ee(Te,Re,De,Ie){const Be=De.enter("tableCell"),Le=De.enter("phrasing"),Oe=De.containerPhrasing(Te,{...Ie,before:ye,after:ye});return Le(),Be(),Oe}function be(Te,Re){return markdownTable(Te,{align:Re,alignDelimiters:ge,padding:me,stringLength:xe})}function Ae(Te,Re,De){const Ie=Te.children;let Be=-1;const Le=[],Oe=Re.enter("table");for(;++Be<Ie.length;)Le[Be]=Se(Ie[Be],Re,De);return Oe(),Le}function Se(Te,Re,De){const Ie=Te.children;let Be=-1;const Le=[],Oe=Re.enter("tableRow");for(;++Be<Ie.length;)Le[Be]=Ee(Ie[Be],Te,Re,De);return Oe(),Le}function Ce(Te,Re,De){let Ie=handle.inlineCode(Te,Re,De);return De.stack.includes("tableCell")&&(Ie=Ie.replace(/\|/g,"\\$&")),Ie}}function gfmTaskListItemFromMarkdown(){return{exit:{taskListCheckValueChecked:exitCheck,taskListCheckValueUnchecked:exitCheck,paragraph:exitParagraphWithTaskListItem}}}function gfmTaskListItemToMarkdown(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:listItemWithTaskListItem}}}function exitCheck(fe){const K=this.stack[this.stack.length-2];K.type,K.checked=fe.type==="taskListCheckValueChecked"}function exitParagraphWithTaskListItem(fe){const K=this.stack[this.stack.length-2];if(K&&K.type==="listItem"&&typeof K.checked=="boolean"){const me=this.stack[this.stack.length-1];me.type;const ge=me.children[0];if(ge&&ge.type==="text"){const xe=K.children;let ye=-1,ve;for(;++ye<xe.length;){const _e=xe[ye];if(_e.type==="paragraph"){ve=_e;break}}ve===me&&(ge.value=ge.value.slice(1),ge.value.length===0?me.children.shift():me.position&&ge.position&&typeof ge.position.start.offset=="number"&&(ge.position.start.column++,ge.position.start.offset++,me.position.start=Object.assign({},ge.position.start)))}}this.exit(fe)}function listItemWithTaskListItem(fe,K,me,ge){const xe=fe.children[0],ye=typeof fe.checked=="boolean"&&xe&&xe.type==="paragraph",ve="["+(fe.checked?"x":" ")+"] ",_e=me.createTracker(ge);ye&&_e.move(ve);let Ee=handle.listItem(fe,K,me,{...ge,..._e.current()});return ye&&(Ee=Ee.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,be)),Ee;function be(Ae){return Ae+ve}}function gfmFromMarkdown(){return[gfmAutolinkLiteralFromMarkdown(),gfmFootnoteFromMarkdown(),gfmStrikethroughFromMarkdown(),gfmTableFromMarkdown(),gfmTaskListItemFromMarkdown()]}function gfmToMarkdown(fe){return{extensions:[gfmAutolinkLiteralToMarkdown(),gfmFootnoteToMarkdown(fe),gfmStrikethroughToMarkdown(),gfmTableToMarkdown(fe),gfmTaskListItemToMarkdown()]}}const wwwPrefix={tokenize:tokenizeWwwPrefix,partial:!0},domain={tokenize:tokenizeDomain,partial:!0},path={tokenize:tokenizePath,partial:!0},trail={tokenize:tokenizeTrail,partial:!0},emailDomainDotTrail={tokenize:tokenizeEmailDomainDotTrail,partial:!0},wwwAutolink={name:"wwwAutolink",tokenize:tokenizeWwwAutolink,previous:previousWww},protocolAutolink={name:"protocolAutolink",tokenize:tokenizeProtocolAutolink,previous:previousProtocol},emailAutolink={name:"emailAutolink",tokenize:tokenizeEmailAutolink,previous:previousEmail},text={};function gfmAutolinkLiteral(){return{text}}let code=48;for(;code<123;)text[code]=emailAutolink,code++,code===58?code=65:code===91&&(code=97);text[43]=emailAutolink;text[45]=emailAutolink;text[46]=emailAutolink;text[95]=emailAutolink;text[72]=[emailAutolink,protocolAutolink];text[104]=[emailAutolink,protocolAutolink];text[87]=[emailAutolink,wwwAutolink];text[119]=[emailAutolink,wwwAutolink];function tokenizeEmailAutolink(fe,K,me){const ge=this;let xe,ye;return ve;function ve(Se){return!gfmAtext(Se)||!previousEmail.call(ge,ge.previous)||previousUnbalanced(ge.events)?me(Se):(fe.enter("literalAutolink"),fe.enter("literalAutolinkEmail"),_e(Se))}function _e(Se){return gfmAtext(Se)?(fe.consume(Se),_e):Se===64?(fe.consume(Se),Ee):me(Se)}function Ee(Se){return Se===46?fe.check(emailDomainDotTrail,Ae,be)(Se):Se===45||Se===95||asciiAlphanumeric(Se)?(ye=!0,fe.consume(Se),Ee):Ae(Se)}function be(Se){return fe.consume(Se),xe=!0,Ee}function Ae(Se){return ye&&xe&&asciiAlpha(ge.previous)?(fe.exit("literalAutolinkEmail"),fe.exit("literalAutolink"),K(Se)):me(Se)}}function tokenizeWwwAutolink(fe,K,me){const ge=this;return xe;function xe(ve){return ve!==87&&ve!==119||!previousWww.call(ge,ge.previous)||previousUnbalanced(ge.events)?me(ve):(fe.enter("literalAutolink"),fe.enter("literalAutolinkWww"),fe.check(wwwPrefix,fe.attempt(domain,fe.attempt(path,ye),me),me)(ve))}function ye(ve){return fe.exit("literalAutolinkWww"),fe.exit("literalAutolink"),K(ve)}}function tokenizeProtocolAutolink(fe,K,me){const ge=this;let xe="",ye=!1;return ve;function ve(Se){return(Se===72||Se===104)&&previousProtocol.call(ge,ge.previous)&&!previousUnbalanced(ge.events)?(fe.enter("literalAutolink"),fe.enter("literalAutolinkHttp"),xe+=String.fromCodePoint(Se),fe.consume(Se),_e):me(Se)}function _e(Se){if(asciiAlpha(Se)&&xe.length<5)return xe+=String.fromCodePoint(Se),fe.consume(Se),_e;if(Se===58){const Ce=xe.toLowerCase();if(Ce==="http"||Ce==="https")return fe.consume(Se),Ee}return me(Se)}function Ee(Se){return Se===47?(fe.consume(Se),ye?be:(ye=!0,Ee)):me(Se)}function be(Se){return Se===null||asciiControl(Se)||markdownLineEndingOrSpace(Se)||unicodeWhitespace(Se)||unicodePunctuation(Se)?me(Se):fe.attempt(domain,fe.attempt(path,Ae),me)(Se)}function Ae(Se){return fe.exit("literalAutolinkHttp"),fe.exit("literalAutolink"),K(Se)}}function tokenizeWwwPrefix(fe,K,me){let ge=0;return xe;function xe(ve){return(ve===87||ve===119)&&ge<3?(ge++,fe.consume(ve),xe):ve===46&&ge===3?(fe.consume(ve),ye):me(ve)}function ye(ve){return ve===null?me(ve):K(ve)}}function tokenizeDomain(fe,K,me){let ge,xe,ye;return ve;function ve(be){return be===46||be===95?fe.check(trail,Ee,_e)(be):be===null||markdownLineEndingOrSpace(be)||unicodeWhitespace(be)||be!==45&&unicodePunctuation(be)?Ee(be):(ye=!0,fe.consume(be),ve)}function _e(be){return be===95?ge=!0:(xe=ge,ge=void 0),fe.consume(be),ve}function Ee(be){return xe||ge||!ye?me(be):K(be)}}function tokenizePath(fe,K){let me=0,ge=0;return xe;function xe(ve){return ve===40?(me++,fe.consume(ve),xe):ve===41&&ge<me?ye(ve):ve===33||ve===34||ve===38||ve===39||ve===41||ve===42||ve===44||ve===46||ve===58||ve===59||ve===60||ve===63||ve===93||ve===95||ve===126?fe.check(trail,K,ye)(ve):ve===null||markdownLineEndingOrSpace(ve)||unicodeWhitespace(ve)?K(ve):(fe.consume(ve),xe)}function ye(ve){return ve===41&&ge++,fe.consume(ve),xe}}function tokenizeTrail(fe,K,me){return ge;function ge(_e){return _e===33||_e===34||_e===39||_e===41||_e===42||_e===44||_e===46||_e===58||_e===59||_e===63||_e===95||_e===126?(fe.consume(_e),ge):_e===38?(fe.consume(_e),ye):_e===93?(fe.consume(_e),xe):_e===60||_e===null||markdownLineEndingOrSpace(_e)||unicodeWhitespace(_e)?K(_e):me(_e)}function xe(_e){return _e===null||_e===40||_e===91||markdownLineEndingOrSpace(_e)||unicodeWhitespace(_e)?K(_e):ge(_e)}function ye(_e){return asciiAlpha(_e)?ve(_e):me(_e)}function ve(_e){return _e===59?(fe.consume(_e),ge):asciiAlpha(_e)?(fe.consume(_e),ve):me(_e)}}function tokenizeEmailDomainDotTrail(fe,K,me){return ge;function ge(ye){return fe.consume(ye),xe}function xe(ye){return asciiAlphanumeric(ye)?me(ye):K(ye)}}function previousWww(fe){return fe===null||fe===40||fe===42||fe===95||fe===91||fe===93||fe===126||markdownLineEndingOrSpace(fe)}function previousProtocol(fe){return!asciiAlpha(fe)}function previousEmail(fe){return!(fe===47||gfmAtext(fe))}function gfmAtext(fe){return fe===43||fe===45||fe===46||fe===95||asciiAlphanumeric(fe)}function previousUnbalanced(fe){let K=fe.length,me=!1;for(;K--;){const ge=fe[K][1];if((ge.type==="labelLink"||ge.type==="labelImage")&&!ge._balanced){me=!0;break}if(ge._gfmAutolinkLiteralWalkedInto){me=!1;break}}return fe.length>0&&!me&&(fe[fe.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),me}const indent={tokenize:tokenizeIndent,partial:!0};function gfmFootnote(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:tokenizeDefinitionStart,continuation:{tokenize:tokenizeDefinitionContinuation},exit:gfmFootnoteDefinitionEnd}},text:{91:{name:"gfmFootnoteCall",tokenize:tokenizeGfmFootnoteCall},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:tokenizePotentialGfmFootnoteCall,resolveTo:resolveToPotentialGfmFootnoteCall}}}}function tokenizePotentialGfmFootnoteCall(fe,K,me){const ge=this;let xe=ge.events.length;const ye=ge.parser.gfmFootnotes||(ge.parser.gfmFootnotes=[]);let ve;for(;xe--;){const Ee=ge.events[xe][1];if(Ee.type==="labelImage"){ve=Ee;break}if(Ee.type==="gfmFootnoteCall"||Ee.type==="labelLink"||Ee.type==="label"||Ee.type==="image"||Ee.type==="link")break}return _e;function _e(Ee){if(!ve||!ve._balanced)return me(Ee);const be=normalizeIdentifier(ge.sliceSerialize({start:ve.end,end:ge.now()}));return be.codePointAt(0)!==94||!ye.includes(be.slice(1))?me(Ee):(fe.enter("gfmFootnoteCallLabelMarker"),fe.consume(Ee),fe.exit("gfmFootnoteCallLabelMarker"),K(Ee))}}function resolveToPotentialGfmFootnoteCall(fe,K){let me=fe.length;for(;me--;)if(fe[me][1].type==="labelImage"&&fe[me][0]==="enter"){fe[me][1];break}fe[me+1][1].type="data",fe[me+3][1].type="gfmFootnoteCallLabelMarker";const ge={type:"gfmFootnoteCall",start:Object.assign({},fe[me+3][1].start),end:Object.assign({},fe[fe.length-1][1].end)},xe={type:"gfmFootnoteCallMarker",start:Object.assign({},fe[me+3][1].end),end:Object.assign({},fe[me+3][1].end)};xe.end.column++,xe.end.offset++,xe.end._bufferIndex++;const ye={type:"gfmFootnoteCallString",start:Object.assign({},xe.end),end:Object.assign({},fe[fe.length-1][1].start)},ve={type:"chunkString",contentType:"string",start:Object.assign({},ye.start),end:Object.assign({},ye.end)},_e=[fe[me+1],fe[me+2],["enter",ge,K],fe[me+3],fe[me+4],["enter",xe,K],["exit",xe,K],["enter",ye,K],["enter",ve,K],["exit",ve,K],["exit",ye,K],fe[fe.length-2],fe[fe.length-1],["exit",ge,K]];return fe.splice(me,fe.length-me+1,..._e),fe}function tokenizeGfmFootnoteCall(fe,K,me){const ge=this,xe=ge.parser.gfmFootnotes||(ge.parser.gfmFootnotes=[]);let ye=0,ve;return _e;function _e(Se){return fe.enter("gfmFootnoteCall"),fe.enter("gfmFootnoteCallLabelMarker"),fe.consume(Se),fe.exit("gfmFootnoteCallLabelMarker"),Ee}function Ee(Se){return Se!==94?me(Se):(fe.enter("gfmFootnoteCallMarker"),fe.consume(Se),fe.exit("gfmFootnoteCallMarker"),fe.enter("gfmFootnoteCallString"),fe.enter("chunkString").contentType="string",be)}function be(Se){if(ye>999||Se===93&&!ve||Se===null||Se===91||markdownLineEndingOrSpace(Se))return me(Se);if(Se===93){fe.exit("chunkString");const Ce=fe.exit("gfmFootnoteCallString");return xe.includes(normalizeIdentifier(ge.sliceSerialize(Ce)))?(fe.enter("gfmFootnoteCallLabelMarker"),fe.consume(Se),fe.exit("gfmFootnoteCallLabelMarker"),fe.exit("gfmFootnoteCall"),K):me(Se)}return markdownLineEndingOrSpace(Se)||(ve=!0),ye++,fe.consume(Se),Se===92?Ae:be}function Ae(Se){return Se===91||Se===92||Se===93?(fe.consume(Se),ye++,be):be(Se)}}function tokenizeDefinitionStart(fe,K,me){const ge=this,xe=ge.parser.gfmFootnotes||(ge.parser.gfmFootnotes=[]);let ye,ve=0,_e;return Ee;function Ee(Re){return fe.enter("gfmFootnoteDefinition")._container=!0,fe.enter("gfmFootnoteDefinitionLabel"),fe.enter("gfmFootnoteDefinitionLabelMarker"),fe.consume(Re),fe.exit("gfmFootnoteDefinitionLabelMarker"),be}function be(Re){return Re===94?(fe.enter("gfmFootnoteDefinitionMarker"),fe.consume(Re),fe.exit("gfmFootnoteDefinitionMarker"),fe.enter("gfmFootnoteDefinitionLabelString"),fe.enter("chunkString").contentType="string",Ae):me(Re)}function Ae(Re){if(ve>999||Re===93&&!_e||Re===null||Re===91||markdownLineEndingOrSpace(Re))return me(Re);if(Re===93){fe.exit("chunkString");const De=fe.exit("gfmFootnoteDefinitionLabelString");return ye=normalizeIdentifier(ge.sliceSerialize(De)),fe.enter("gfmFootnoteDefinitionLabelMarker"),fe.consume(Re),fe.exit("gfmFootnoteDefinitionLabelMarker"),fe.exit("gfmFootnoteDefinitionLabel"),Ce}return markdownLineEndingOrSpace(Re)||(_e=!0),ve++,fe.consume(Re),Re===92?Se:Ae}function Se(Re){return Re===91||Re===92||Re===93?(fe.consume(Re),ve++,Ae):Ae(Re)}function Ce(Re){return Re===58?(fe.enter("definitionMarker"),fe.consume(Re),fe.exit("definitionMarker"),xe.includes(ye)||xe.push(ye),factorySpace(fe,Te,"gfmFootnoteDefinitionWhitespace")):me(Re)}function Te(Re){return K(Re)}}function tokenizeDefinitionContinuation(fe,K,me){return fe.check(blankLine,K,fe.attempt(indent,K,me))}function gfmFootnoteDefinitionEnd(fe){fe.exit("gfmFootnoteDefinition")}function tokenizeIndent(fe,K,me){const ge=this;return factorySpace(fe,xe,"gfmFootnoteDefinitionIndent",5);function xe(ye){const ve=ge.events[ge.events.length-1];return ve&&ve[1].type==="gfmFootnoteDefinitionIndent"&&ve[2].sliceSerialize(ve[1],!0).length===4?K(ye):me(ye)}}function gfmStrikethrough(fe){let me=(fe||{}).singleTilde;const ge={name:"strikethrough",tokenize:ye,resolveAll:xe};return me==null&&(me=!0),{text:{126:ge},insideSpan:{null:[ge]},attentionMarkers:{null:[126]}};function xe(ve,_e){let Ee=-1;for(;++Ee<ve.length;)if(ve[Ee][0]==="enter"&&ve[Ee][1].type==="strikethroughSequenceTemporary"&&ve[Ee][1]._close){let be=Ee;for(;be--;)if(ve[be][0]==="exit"&&ve[be][1].type==="strikethroughSequenceTemporary"&&ve[be][1]._open&&ve[Ee][1].end.offset-ve[Ee][1].start.offset===ve[be][1].end.offset-ve[be][1].start.offset){ve[Ee][1].type="strikethroughSequence",ve[be][1].type="strikethroughSequence";const Ae={type:"strikethrough",start:Object.assign({},ve[be][1].start),end:Object.assign({},ve[Ee][1].end)},Se={type:"strikethroughText",start:Object.assign({},ve[be][1].end),end:Object.assign({},ve[Ee][1].start)},Ce=[["enter",Ae,_e],["enter",ve[be][1],_e],["exit",ve[be][1],_e],["enter",Se,_e]],Te=_e.parser.constructs.insideSpan.null;Te&&splice(Ce,Ce.length,0,resolveAll(Te,ve.slice(be+1,Ee),_e)),splice(Ce,Ce.length,0,[["exit",Se,_e],["enter",ve[Ee][1],_e],["exit",ve[Ee][1],_e],["exit",Ae,_e]]),splice(ve,be-1,Ee-be+3,Ce),Ee=be+Ce.length-2;break}}for(Ee=-1;++Ee<ve.length;)ve[Ee][1].type==="strikethroughSequenceTemporary"&&(ve[Ee][1].type="data");return ve}function ye(ve,_e,Ee){const be=this.previous,Ae=this.events;let Se=0;return Ce;function Ce(Re){return be===126&&Ae[Ae.length-1][1].type!=="characterEscape"?Ee(Re):(ve.enter("strikethroughSequenceTemporary"),Te(Re))}function Te(Re){const De=classifyCharacter(be);if(Re===126)return Se>1?Ee(Re):(ve.consume(Re),Se++,Te);if(Se<2&&!me)return Ee(Re);const Ie=ve.exit("strikethroughSequenceTemporary"),Be=classifyCharacter(Re);return Ie._open=!Be||Be===2&&!!De,Ie._close=!De||De===2&&!!Be,_e(Re)}}}class EditMap{constructor(){this.map=[]}add(K,me,ge){addImplementation(this,K,me,ge)}consume(K){if(this.map.sort(function(ye,ve){return ye[0]-ve[0]}),this.map.length===0)return;let me=this.map.length;const ge=[];for(;me>0;)me-=1,ge.push(K.slice(this.map[me][0]+this.map[me][1]),this.map[me][2]),K.length=this.map[me][0];ge.push(K.slice()),K.length=0;let xe=ge.pop();for(;xe;){for(const ye of xe)K.push(ye);xe=ge.pop()}this.map.length=0}}function addImplementation(fe,K,me,ge){let xe=0;if(!(me===0&&ge.length===0)){for(;xe<fe.map.length;){if(fe.map[xe][0]===K){fe.map[xe][1]+=me,fe.map[xe][2].push(...ge);return}xe+=1}fe.map.push([K,me,ge])}}function gfmTableAlign(fe,K){let me=!1;const ge=[];for(;K<fe.length;){const xe=fe[K];if(me){if(xe[0]==="enter")xe[1].type==="tableContent"&&ge.push(fe[K+1][1].type==="tableDelimiterMarker"?"left":"none");else if(xe[1].type==="tableContent"){if(fe[K-1][1].type==="tableDelimiterMarker"){const ye=ge.length-1;ge[ye]=ge[ye]==="left"?"center":"right"}}else if(xe[1].type==="tableDelimiterRow")break}else xe[0]==="enter"&&xe[1].type==="tableDelimiterRow"&&(me=!0);K+=1}return ge}function gfmTable(){return{flow:{null:{name:"table",tokenize:tokenizeTable,resolveAll:resolveTable}}}}function tokenizeTable(fe,K,me){const ge=this;let xe=0,ye=0,ve;return _e;function _e(Ge){let Xe=ge.events.length-1;for(;Xe>-1;){const nt=ge.events[Xe][1].type;if(nt==="lineEnding"||nt==="linePrefix")Xe--;else break}const qe=Xe>-1?ge.events[Xe][1].type:null,Qe=qe==="tableHead"||qe==="tableRow"?Ne:Ee;return Qe===Ne&&ge.parser.lazy[ge.now().line]?me(Ge):Qe(Ge)}function Ee(Ge){return fe.enter("tableHead"),fe.enter("tableRow"),be(Ge)}function be(Ge){return Ge===124||(ve=!0,ye+=1),Ae(Ge)}function Ae(Ge){return Ge===null?me(Ge):markdownLineEnding(Ge)?ye>1?(ye=0,ge.interrupt=!0,fe.exit("tableRow"),fe.enter("lineEnding"),fe.consume(Ge),fe.exit("lineEnding"),Te):me(Ge):markdownSpace(Ge)?factorySpace(fe,Ae,"whitespace")(Ge):(ye+=1,ve&&(ve=!1,xe+=1),Ge===124?(fe.enter("tableCellDivider"),fe.consume(Ge),fe.exit("tableCellDivider"),ve=!0,Ae):(fe.enter("data"),Se(Ge)))}function Se(Ge){return Ge===null||Ge===124||markdownLineEndingOrSpace(Ge)?(fe.exit("data"),Ae(Ge)):(fe.consume(Ge),Ge===92?Ce:Se)}function Ce(Ge){return Ge===92||Ge===124?(fe.consume(Ge),Se):Se(Ge)}function Te(Ge){return ge.interrupt=!1,ge.parser.lazy[ge.now().line]?me(Ge):(fe.enter("tableDelimiterRow"),ve=!1,markdownSpace(Ge)?factorySpace(fe,Re,"linePrefix",ge.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ge):Re(Ge))}function Re(Ge){return Ge===45||Ge===58?Ie(Ge):Ge===124?(ve=!0,fe.enter("tableCellDivider"),fe.consume(Ge),fe.exit("tableCellDivider"),De):Ue(Ge)}function De(Ge){return markdownSpace(Ge)?factorySpace(fe,Ie,"whitespace")(Ge):Ie(Ge)}function Ie(Ge){return Ge===58?(ye+=1,ve=!0,fe.enter("tableDelimiterMarker"),fe.consume(Ge),fe.exit("tableDelimiterMarker"),Be):Ge===45?(ye+=1,Be(Ge)):Ge===null||markdownLineEnding(Ge)?Fe(Ge):Ue(Ge)}function Be(Ge){return Ge===45?(fe.enter("tableDelimiterFiller"),Le(Ge)):Ue(Ge)}function Le(Ge){return Ge===45?(fe.consume(Ge),Le):Ge===58?(ve=!0,fe.exit("tableDelimiterFiller"),fe.enter("tableDelimiterMarker"),fe.consume(Ge),fe.exit("tableDelimiterMarker"),Oe):(fe.exit("tableDelimiterFiller"),Oe(Ge))}function Oe(Ge){return markdownSpace(Ge)?factorySpace(fe,Fe,"whitespace")(Ge):Fe(Ge)}function Fe(Ge){return Ge===124?Re(Ge):Ge===null||markdownLineEnding(Ge)?!ve||xe!==ye?Ue(Ge):(fe.exit("tableDelimiterRow"),fe.exit("tableHead"),K(Ge)):Ue(Ge)}function Ue(Ge){return me(Ge)}function Ne(Ge){return fe.enter("tableRow"),He(Ge)}function He(Ge){return Ge===124?(fe.enter("tableCellDivider"),fe.consume(Ge),fe.exit("tableCellDivider"),He):Ge===null||markdownLineEnding(Ge)?(fe.exit("tableRow"),K(Ge)):markdownSpace(Ge)?factorySpace(fe,He,"whitespace")(Ge):(fe.enter("data"),ze(Ge))}function ze(Ge){return Ge===null||Ge===124||markdownLineEndingOrSpace(Ge)?(fe.exit("data"),He(Ge)):(fe.consume(Ge),Ge===92?je:ze)}function je(Ge){return Ge===92||Ge===124?(fe.consume(Ge),ze):ze(Ge)}}function resolveTable(fe,K){let me=-1,ge=!0,xe=0,ye=[0,0,0,0],ve=[0,0,0,0],_e=!1,Ee=0,be,Ae,Se;const Ce=new EditMap;for(;++me<fe.length;){const Te=fe[me],Re=Te[1];Te[0]==="enter"?Re.type==="tableHead"?(_e=!1,Ee!==0&&(flushTableEnd(Ce,K,Ee,be,Ae),Ae=void 0,Ee=0),be={type:"table",start:Object.assign({},Re.start),end:Object.assign({},Re.end)},Ce.add(me,0,[["enter",be,K]])):Re.type==="tableRow"||Re.type==="tableDelimiterRow"?(ge=!0,Se=void 0,ye=[0,0,0,0],ve=[0,me+1,0,0],_e&&(_e=!1,Ae={type:"tableBody",start:Object.assign({},Re.start),end:Object.assign({},Re.end)},Ce.add(me,0,[["enter",Ae,K]])),xe=Re.type==="tableDelimiterRow"?2:Ae?3:1):xe&&(Re.type==="data"||Re.type==="tableDelimiterMarker"||Re.type==="tableDelimiterFiller")?(ge=!1,ve[2]===0&&(ye[1]!==0&&(ve[0]=ve[1],Se=flushCell(Ce,K,ye,xe,void 0,Se),ye=[0,0,0,0]),ve[2]=me)):Re.type==="tableCellDivider"&&(ge?ge=!1:(ye[1]!==0&&(ve[0]=ve[1],Se=flushCell(Ce,K,ye,xe,void 0,Se)),ye=ve,ve=[ye[1],me,0,0])):Re.type==="tableHead"?(_e=!0,Ee=me):Re.type==="tableRow"||Re.type==="tableDelimiterRow"?(Ee=me,ye[1]!==0?(ve[0]=ve[1],Se=flushCell(Ce,K,ye,xe,me,Se)):ve[1]!==0&&(Se=flushCell(Ce,K,ve,xe,me,Se)),xe=0):xe&&(Re.type==="data"||Re.type==="tableDelimiterMarker"||Re.type==="tableDelimiterFiller")&&(ve[3]=me)}for(Ee!==0&&flushTableEnd(Ce,K,Ee,be,Ae),Ce.consume(K.events),me=-1;++me<K.events.length;){const Te=K.events[me];Te[0]==="enter"&&Te[1].type==="table"&&(Te[1]._align=gfmTableAlign(K.events,me))}return fe}function flushCell(fe,K,me,ge,xe,ye){const ve=ge===1?"tableHeader":ge===2?"tableDelimiter":"tableData",_e="tableContent";me[0]!==0&&(ye.end=Object.assign({},getPoint(K.events,me[0])),fe.add(me[0],0,[["exit",ye,K]]));const Ee=getPoint(K.events,me[1]);if(ye={type:ve,start:Object.assign({},Ee),end:Object.assign({},Ee)},fe.add(me[1],0,[["enter",ye,K]]),me[2]!==0){const be=getPoint(K.events,me[2]),Ae=getPoint(K.events,me[3]),Se={type:_e,start:Object.assign({},be),end:Object.assign({},Ae)};if(fe.add(me[2],0,[["enter",Se,K]]),ge!==2){const Ce=K.events[me[2]],Te=K.events[me[3]];if(Ce[1].end=Object.assign({},Te[1].end),Ce[1].type="chunkText",Ce[1].contentType="text",me[3]>me[2]+1){const Re=me[2]+1,De=me[3]-me[2]-1;fe.add(Re,De,[])}}fe.add(me[3]+1,0,[["exit",Se,K]])}return xe!==void 0&&(ye.end=Object.assign({},getPoint(K.events,xe)),fe.add(xe,0,[["exit",ye,K]]),ye=void 0),ye}function flushTableEnd(fe,K,me,ge,xe){const ye=[],ve=getPoint(K.events,me);xe&&(xe.end=Object.assign({},ve),ye.push(["exit",xe,K])),ge.end=Object.assign({},ve),ye.push(["exit",ge,K]),fe.add(me+1,0,ye)}function getPoint(fe,K){const me=fe[K],ge=me[0]==="enter"?"start":"end";return me[1][ge]}const tasklistCheck={name:"tasklistCheck",tokenize:tokenizeTasklistCheck};function gfmTaskListItem(){return{text:{91:tasklistCheck}}}function tokenizeTasklistCheck(fe,K,me){const ge=this;return xe;function xe(Ee){return ge.previous!==null||!ge._gfmTasklistFirstContentOfListItem?me(Ee):(fe.enter("taskListCheck"),fe.enter("taskListCheckMarker"),fe.consume(Ee),fe.exit("taskListCheckMarker"),ye)}function ye(Ee){return markdownLineEndingOrSpace(Ee)?(fe.enter("taskListCheckValueUnchecked"),fe.consume(Ee),fe.exit("taskListCheckValueUnchecked"),ve):Ee===88||Ee===120?(fe.enter("taskListCheckValueChecked"),fe.consume(Ee),fe.exit("taskListCheckValueChecked"),ve):me(Ee)}function ve(Ee){return Ee===93?(fe.enter("taskListCheckMarker"),fe.consume(Ee),fe.exit("taskListCheckMarker"),fe.exit("taskListCheck"),_e):me(Ee)}function _e(Ee){return markdownLineEnding(Ee)?K(Ee):markdownSpace(Ee)?fe.check({tokenize:spaceThenNonSpace},K,me)(Ee):me(Ee)}}function spaceThenNonSpace(fe,K,me){return factorySpace(fe,ge,"whitespace");function ge(xe){return xe===null?me(xe):K(xe)}}function gfm(fe){return combineExtensions([gfmAutolinkLiteral(),gfmFootnote(),gfmStrikethrough(fe),gfmTable(),gfmTaskListItem()])}const emptyOptions={};function remarkGfm(fe){const K=this,me=fe||emptyOptions,ge=K.data(),xe=ge.micromarkExtensions||(ge.micromarkExtensions=[]),ye=ge.fromMarkdownExtensions||(ge.fromMarkdownExtensions=[]),ve=ge.toMarkdownExtensions||(ge.toMarkdownExtensions=[]);xe.push(gfm(me)),ye.push(gfmFromMarkdown()),ve.push(gfmToMarkdown(me))}const convert=function(fe){return typeFactory(fe)};function typeFactory(fe){return castFactory(K);function K(me){return me&&me.type===fe}}function castFactory(fe){return K;function K(me,...ge){return!!(me&&typeof me=="object"&&"type"in me&&fe.call(this,me,...ge))}}function color$1(fe){return fe}const CONTINUE=!0,EXIT=!1,SKIP="skip",visitParents=function(fe,K,me,ge){const xe=convert(K),ye=1;ve(fe,void 0,[])();function ve(_e,Ee,be){const Ae=_e&&typeof _e=="object"?_e:{};if(typeof Ae.type=="string"){const Ce=typeof Ae.tagName=="string"?Ae.tagName:typeof Ae.name=="string"?Ae.name:void 0;Object.defineProperty(Se,"name",{value:"node ("+(_e.type+(Ce?"<"+Ce+">":""))+")"})}return Se;function Se(){let Ce=[],Te,Re,De;if(xe(_e,Ee,be[be.length-1]||null)&&(Ce=toResult(me(_e,be)),Ce[0]===EXIT))return Ce;if(_e.children&&Ce[0]!==SKIP)for(Re=-1+ye,De=be.concat(_e);Re>-1&&Re<_e.children.length;){if(Te=ve(_e.children[Re],Re,De)(),Te[0]===EXIT)return Te;Re=typeof Te[1]=="number"?Te[1]:Re+ye}return Ce}}};function toResult(fe){return Array.isArray(fe)?fe:typeof fe=="number"?[CONTINUE,fe]:[fe]}const visit=function(fe,K,me,ge){visitParents(fe,K,xe);function xe(ye,ve){const _e=ve[ve.length-1];return me(ye,_e?_e.children.indexOf(ye):null,_e)}};function toString(fe){return"children"in fe?all(fe):"value"in fe?fe.value:""}function one(fe){return fe.type==="text"?fe.value:"children"in fe?all(fe):""}function all(fe){let K=-1;const me=[];for(;++K<fe.children.length;)me[K]=one(fe.children[K]);return me.join("")}function define(fe,K,me){fe.prototype=K.prototype=me,me.constructor=fe}function extend(fe,K){var me=Object.create(fe.prototype);for(var ge in K)me[ge]=K[ge];return me}function Color(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define(Color,color,{copy(fe){return Object.assign(new this.constructor,this,fe)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(fe){var K,me;return fe=(fe+"").trim().toLowerCase(),(K=reHex.exec(fe))?(me=K[1].length,K=parseInt(K[1],16),me===6?rgbn(K):me===3?new Rgb(K>>8&15|K>>4&240,K>>4&15|K&240,(K&15)<<4|K&15,1):me===8?rgba(K>>24&255,K>>16&255,K>>8&255,(K&255)/255):me===4?rgba(K>>12&15|K>>8&240,K>>8&15|K>>4&240,K>>4&15|K&240,((K&15)<<4|K&15)/255):null):(K=reRgbInteger.exec(fe))?new Rgb(K[1],K[2],K[3],1):(K=reRgbPercent.exec(fe))?new Rgb(K[1]*255/100,K[2]*255/100,K[3]*255/100,1):(K=reRgbaInteger.exec(fe))?rgba(K[1],K[2],K[3],K[4]):(K=reRgbaPercent.exec(fe))?rgba(K[1]*255/100,K[2]*255/100,K[3]*255/100,K[4]):(K=reHslPercent.exec(fe))?hsla(K[1],K[2]/100,K[3]/100,1):(K=reHslaPercent.exec(fe))?hsla(K[1],K[2]/100,K[3]/100,K[4]):named.hasOwnProperty(fe)?rgbn(named[fe]):fe==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(fe){return new Rgb(fe>>16&255,fe>>8&255,fe&255,1)}function rgba(fe,K,me,ge){return ge<=0&&(fe=K=me=NaN),new Rgb(fe,K,me,ge)}function rgbConvert(fe){return fe instanceof Color||(fe=color(fe)),fe?(fe=fe.rgb(),new Rgb(fe.r,fe.g,fe.b,fe.opacity)):new Rgb}function rgb(fe,K,me,ge){return arguments.length===1?rgbConvert(fe):new Rgb(fe,K,me,ge??1)}function Rgb(fe,K,me,ge){this.r=+fe,this.g=+K,this.b=+me,this.opacity=+ge}define(Rgb,rgb,extend(Color,{brighter(fe){return fe=fe==null?brighter:Math.pow(brighter,fe),new Rgb(this.r*fe,this.g*fe,this.b*fe,this.opacity)},darker(fe){return fe=fe==null?darker:Math.pow(darker,fe),new Rgb(this.r*fe,this.g*fe,this.b*fe,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const fe=clampa(this.opacity);return`${fe===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${fe===1?")":`, ${fe})`}`}function clampa(fe){return isNaN(fe)?1:Math.max(0,Math.min(1,fe))}function clampi(fe){return Math.max(0,Math.min(255,Math.round(fe)||0))}function hex(fe){return fe=clampi(fe),(fe<16?"0":"")+fe.toString(16)}function hsla(fe,K,me,ge){return ge<=0?fe=K=me=NaN:me<=0||me>=1?fe=K=NaN:K<=0&&(fe=NaN),new Hsl(fe,K,me,ge)}function hslConvert(fe){if(fe instanceof Hsl)return new Hsl(fe.h,fe.s,fe.l,fe.opacity);if(fe instanceof Color||(fe=color(fe)),!fe)return new Hsl;if(fe instanceof Hsl)return fe;fe=fe.rgb();var K=fe.r/255,me=fe.g/255,ge=fe.b/255,xe=Math.min(K,me,ge),ye=Math.max(K,me,ge),ve=NaN,_e=ye-xe,Ee=(ye+xe)/2;return _e?(K===ye?ve=(me-ge)/_e+(me<ge)*6:me===ye?ve=(ge-K)/_e+2:ve=(K-me)/_e+4,_e/=Ee<.5?ye+xe:2-ye-xe,ve*=60):_e=Ee>0&&Ee<1?0:ve,new Hsl(ve,_e,Ee,fe.opacity)}function hsl(fe,K,me,ge){return arguments.length===1?hslConvert(fe):new Hsl(fe,K,me,ge??1)}function Hsl(fe,K,me,ge){this.h=+fe,this.s=+K,this.l=+me,this.opacity=+ge}define(Hsl,hsl,extend(Color,{brighter(fe){return fe=fe==null?brighter:Math.pow(brighter,fe),new Hsl(this.h,this.s,this.l*fe,this.opacity)},darker(fe){return fe=fe==null?darker:Math.pow(darker,fe),new Hsl(this.h,this.s,this.l*fe,this.opacity)},rgb(){var fe=this.h%360+(this.h<0)*360,K=isNaN(fe)||isNaN(this.s)?0:this.s,me=this.l,ge=me+(me<.5?me:1-me)*K,xe=2*me-ge;return new Rgb(hsl2rgb(fe>=240?fe-240:fe+120,xe,ge),hsl2rgb(fe,xe,ge),hsl2rgb(fe<120?fe+240:fe-120,xe,ge),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const fe=clampa(this.opacity);return`${fe===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${fe===1?")":`, ${fe})`}`}}));function clamph(fe){return fe=(fe||0)%360,fe<0?fe+360:fe}function clampt(fe){return Math.max(0,Math.min(1,fe||0))}function hsl2rgb(fe,K,me){return(fe<60?K+(me-K)*fe/60:fe<180?me:fe<240?K+(me-K)*(240-fe)/60:K)*255}function plugin(fe){return fe===void 0&&(fe={customClassName:"gfm-color-chip"}),function(K){visit(K,"element",function(me){if(me.tagName==="code"&&me.properties){var ge=toString(me),xe=color(ge);xe&&me.children.push({type:"element",tagName:"span",properties:{className:[fe.customClassName],style:"background-color: "+xe.formatHex()+";"},children:[]})}})}}function rehypeCodeblock(){return fe=>{visit$1(fe,"element",(K,me,ge)=>{K.tagName==="code"&&ge&&ge.type==="element"&&ge.tagName==="pre"&&(K.properties={block:!0,...K.properties})})}}function MdxText(fe){return jsxRuntimeExports.jsx(Text,{...fe})}function MdxAnchor(fe){return jsxRuntimeExports.jsx(Anchor,{...fe})}function MdxTitle(fe,K){return jsxRuntimeExports.jsx(Title,{order:K,...fe})}function MdxList(fe,K,me){return fe.className=="contains-task-list"?jsxRuntimeExports.jsx(List,{type:me,...fe,listStyleType:"none",children:K}):jsxRuntimeExports.jsx(List,{type:me,...fe,children:K})}function MdxListItem(fe,K){return jsxRuntimeExports.jsx(List.Item,{...fe,children:K})}function MdxCode(fe,K){return jsxRuntimeExports.jsx(Code,{...fe,children:K})}function MdxBlockquote(fe){return jsxRuntimeExports.jsx(Blockquote,{...fe})}function MdxCite(fe){return jsxRuntimeExports.jsx("cite",{style:{display:"block",fontSize:"0.875rem",marginTop:"0.625rem",color:"#909296",overflow:"hidden",textOverflow:"ellipsis"},...fe})}function MdxTable(fe){return jsxRuntimeExports.jsx(Table,{...fe,highlightOnHover:!0,withColumnBorders:!0})}function MdxImage(fe){return jsxRuntimeExports.jsx(Image$1,{maw:240,mx:"auto",radius:"md",...fe})}const components={p:fe=>MdxText(fe),a:fe=>MdxAnchor(fe),h1:fe=>MdxTitle(fe,1),h2:fe=>MdxTitle(fe,2),h3:fe=>MdxTitle(fe,3),h4:fe=>MdxTitle(fe,4),h5:fe=>MdxTitle(fe,5),h6:fe=>MdxTitle(fe,6),ul:fe=>MdxList(fe,fe.children??"","unordered"),ol:fe=>MdxList(fe,fe.children??"","ordered"),li:fe=>MdxListItem(fe,fe.children??""),code:fe=>MdxCode(fe,fe.children??""),pre:fe=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:fe.children}),blockquote:fe=>MdxBlockquote(fe),Cite:fe=>MdxCite(fe),table:fe=>MdxTable(fe),img:fe=>MdxImage(fe),"*":()=>jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})};async function parseMarkdown(fe){const{default:K}=await evaluate(fe,{...runtime,...provider,development:!1,remarkPlugins:[remarkGfm],rehypePlugins:[rehypeCodeblock,plugin]});return K}function Markdown(fe){const[K,me]=reactExports.useState(null);return reactExports.useEffect(()=>{try{parseMarkdown(fe.children??"").then(ge=>{me(jsxRuntimeExports.jsx(ge,{components}))})}catch{me(jsxRuntimeExports.jsx(Title,{order:2,children:"Error Parsing Markdown..."}))}},[fe.children]),K}const ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(K){super(K),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(K){return{didCatch:!0,error:K}}resetErrorBoundary(){const{error:K}=this.state;if(K!==null){for(var me,ge,xe=arguments.length,ye=new Array(xe),ve=0;ve<xe;ve++)ye[ve]=arguments[ve];(me=(ge=this.props).onReset)===null||me===void 0||me.call(ge,{args:ye,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(K,me){var ge,xe;(ge=(xe=this.props).onError)===null||ge===void 0||ge.call(xe,K,me)}componentDidUpdate(K,me){const{didCatch:ge}=this.state,{resetKeys:xe}=this.props;if(ge&&me.error!==null&&hasArrayChanged(K.resetKeys,xe)){var ye,ve;(ye=(ve=this.props).onReset)===null||ye===void 0||ye.call(ve,{next:xe,prev:K.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:K,fallbackRender:me,FallbackComponent:ge,fallback:xe}=this.props,{didCatch:ye,error:ve}=this.state;let _e=K;if(ye){const Ee={error:ve,resetErrorBoundary:this.resetErrorBoundary};if(typeof me=="function")_e=me(Ee);else if(ge)_e=reactExports.createElement(ge,Ee);else if(xe!==void 0)_e=xe;else throw ve}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:ye,error:ve,resetErrorBoundary:this.resetErrorBoundary}},_e)}}function hasArrayChanged(){let fe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return fe.length!==K.length||fe.some((me,ge)=>!Object.is(me,K[ge]))}function MarkdownComponent({props:{visible:fe,_markdown:K}}){return fe?jsxRuntimeExports.jsx(Box,{pb:"xs",px:"sm",style:{maxWidth:"95%"},children:jsxRuntimeExports.jsx(ErrorBoundary,{fallback:jsxRuntimeExports.jsx(Text,{ta:"center",children:"Markdown Failed to Render"}),children:jsxRuntimeExports.jsx(Markdown,{children:K})})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}var folderWrapper="_3o7djo0",folderLabel="_3o7djo1",folderToggleIcon="_3o7djo2";const PlotWithAspect=React$4.memo(function({jsonStr:K,aspectRatio:me,staticPlot:ge}){if(K==="")return jsxRuntimeExports.jsx("div",{});const xe=JSON.parse(K);xe.layout.uirevision="true";const{ref:ye,width:ve}=useElementSize();xe.layout.width=ve,xe.layout.height=ve*me,ge&&(xe.config===void 0&&(xe.config={}),xe.config.displayModeBar=!1,xe.layout.dragmode=!1,xe.layout.hovermode=!1,xe.layout.clickmode="none");const _e=React$4.useRef(null);return React$4.useEffect(()=>{Plotly.react(_e.current,xe.data,xe.layout,xe.config)},[xe]),jsxRuntimeExports.jsxs(Paper,{ref:ye,className:folderWrapper,withBorder:!0,style:{position:"relative"},children:[jsxRuntimeExports.jsx("div",{ref:_e}),ge?jsxRuntimeExports.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:1e3}}):null]})});function PlotlyComponent({props:{visible:fe,_plotly_json_str:K,aspect:me}}){if(!fe)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const[ge,{open:xe,close:ye}]=useDisclosure(!1);return jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Tooltip.Floating,{zIndex:100,label:"Click to expand",children:jsxRuntimeExports.jsx(Box,{style:{cursor:"pointer",flexShrink:0,position:"relative"},onClick:xe,children:jsxRuntimeExports.jsx(PlotWithAspect,{jsonStr:K,aspectRatio:me,staticPlot:!0})})}),jsxRuntimeExports.jsx(Modal,{opened:ge,onClose:ye,size:"xl",keepMounted:!0,children:jsxRuntimeExports.jsx(PlotWithAspect,{jsonStr:K,aspectRatio:me,staticPlot:!1})})]})}function TabGroupComponent({props:{_tab_labels:fe,_tab_icons_html:K,_tab_container_ids:me,visible:ge}}){const{GuiContainer:xe}=reactExports.useContext(GuiComponentContext);return ge?jsxRuntimeExports.jsxs(Tabs,{radius:"xs",defaultValue:"0",style:{marginTop:"-0.55em"},children:[jsxRuntimeExports.jsx(Tabs.List,{children:fe.map((ye,ve)=>jsxRuntimeExports.jsx(Tabs.Tab,{value:ve.toString(),styles:{tabSection:{marginRight:"0.5em"},tab:{padding:"0.75em"}},leftSection:K[ve]===null?void 0:jsxRuntimeExports.jsx("div",{className:htmlIconWrapper,dangerouslySetInnerHTML:{__html:K[ve]}}),children:ye},ve))}),me.map((ye,ve)=>jsxRuntimeExports.jsx(Tabs.Panel,{value:ve.toString(),children:jsxRuntimeExports.jsx(xe,{containerUuid:ye})},ye))]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var defaultAttributes={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const createReactComponent=(fe,K,me,ge)=>{const xe=reactExports.forwardRef(({color:ye="currentColor",size:ve=24,stroke:_e=2,title:Ee,className:be,children:Ae,...Se},Ce)=>reactExports.createElement("svg",{ref:Ce,...defaultAttributes[fe],width:ve,height:ve,className:["tabler-icon",`tabler-icon-${K}`,be].join(" "),...fe==="filled"?{fill:ye}:{strokeWidth:_e,stroke:ye},...Se},[Ee&&reactExports.createElement("title",{key:"svg-title"},Ee),...ge.map(([Te,Re])=>reactExports.createElement(Te,Re)),...Array.isArray(Ae)?Ae:[Ae]]));return xe.displayName=`${me}`,xe};/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconAdjustments=createReactComponent("outline","adjustments","IconAdjustments",[["path",{d:"M4 10a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M6 4v4",key:"svg-1"}],["path",{d:"M6 12v8",key:"svg-2"}],["path",{d:"M10 16a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-3"}],["path",{d:"M12 4v10",key:"svg-4"}],["path",{d:"M12 18v2",key:"svg-5"}],["path",{d:"M16 7a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-6"}],["path",{d:"M18 4v1",key:"svg-7"}],["path",{d:"M18 9v11",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconArrowBack=createReactComponent("outline","arrow-back","IconArrowBack",[["path",{d:"M9 11l-4 4l4 4m-4 -4h11a4 4 0 0 0 0 -8h-1",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconBrandGithub=createReactComponent("outline","brand-github","IconBrandGithub",[["path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconCaretDown=createReactComponent("outline","caret-down","IconCaretDown",[["path",{d:"M6 10l6 6l6 -6h-12",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconCaretRight=createReactComponent("outline","caret-right","IconCaretRight",[["path",{d:"M10 18l6 -6l-6 -6v12",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconCheck=createReactComponent("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconChevronDown=createReactComponent("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconChevronLeft=createReactComponent("outline","chevron-left","IconChevronLeft",[["path",{d:"M15 6l-6 6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconChevronRight=createReactComponent("outline","chevron-right","IconChevronRight",[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconChevronUp=createReactComponent("outline","chevron-up","IconChevronUp",[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconCloudCheck=createReactComponent("outline","cloud-check","IconCloudCheck",[["path",{d:"M11 18.004h-4.343c-2.572 -.004 -4.657 -2.011 -4.657 -4.487c0 -2.475 2.085 -4.482 4.657 -4.482c.393 -1.762 1.794 -3.2 3.675 -3.773c1.88 -.572 3.956 -.193 5.444 1c1.488 1.19 2.162 3.007 1.77 4.769h.99c1.388 0 2.585 .82 3.138 2.007",key:"svg-0"}],["path",{d:"M15 19l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconCopy=createReactComponent("outline","copy","IconCopy",[["path",{d:"M7 7m0 2.667a2.667 2.667 0 0 1 2.667 -2.667h8.666a2.667 2.667 0 0 1 2.667 2.667v8.666a2.667 2.667 0 0 1 -2.667 2.667h-8.666a2.667 2.667 0 0 1 -2.667 -2.667z",key:"svg-0"}],["path",{d:"M4.012 16.737a2.005 2.005 0 0 1 -1.012 -1.737v-10c0 -1.1 .9 -2 2 -2h10c.75 0 1.158 .385 1.5 1",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconDeviceFloppy=createReactComponent("outline","device-floppy","IconDeviceFloppy",[["path",{d:"M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2",key:"svg-0"}],["path",{d:"M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-1"}],["path",{d:"M14 4l0 4l-6 0l0 -4",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconDownload=createReactComponent("outline","download","IconDownload",[["path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2",key:"svg-0"}],["path",{d:"M7 11l5 5l5 -5",key:"svg-1"}],["path",{d:"M12 4l0 12",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconEyeOff=createReactComponent("outline","eye-off","IconEyeOff",[["path",{d:"M10.585 10.587a2 2 0 0 0 2.829 2.828",key:"svg-0"}],["path",{d:"M16.681 16.673a8.717 8.717 0 0 1 -4.681 1.327c-3.6 0 -6.6 -2 -9 -6c1.272 -2.12 2.712 -3.678 4.32 -4.674m2.86 -1.146a9.055 9.055 0 0 1 1.82 -.18c3.6 0 6.6 2 9 6c-.666 1.11 -1.379 2.067 -2.138 2.87",key:"svg-1"}],["path",{d:"M3 3l18 18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconEye=createReactComponent("outline","eye","IconEye",[["path",{d:"M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0",key:"svg-0"}],["path",{d:"M21 12c-2.4 4 -5.4 6 -9 6c-3.6 0 -6.6 -2 -9 -6c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconFileDescription=createReactComponent("outline","file-description","IconFileDescription",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M9 17h6",key:"svg-2"}],["path",{d:"M9 13h6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconHomeMove=createReactComponent("outline","home-move","IconHomeMove",[["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2",key:"svg-0"}],["path",{d:"M19 12h2l-9 -9l-9 9h2v7a2 2 0 0 0 2 2h5.5",key:"svg-1"}],["path",{d:"M16 19h6",key:"svg-2"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconKeyboard=createReactComponent("outline","keyboard","IconKeyboard",[["path",{d:"M2 6m0 2a2 2 0 0 1 2 -2h16a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-16a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M6 10l0 .01",key:"svg-1"}],["path",{d:"M10 10l0 .01",key:"svg-2"}],["path",{d:"M14 10l0 .01",key:"svg-3"}],["path",{d:"M18 10l0 .01",key:"svg-4"}],["path",{d:"M6 14l0 .01",key:"svg-5"}],["path",{d:"M18 14l0 .01",key:"svg-6"}],["path",{d:"M10 14l4 .01",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconPencil=createReactComponent("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconPhoto=createReactComponent("outline","photo","IconPhoto",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconPlugConnectedX=createReactComponent("outline","plug-connected-x","IconPlugConnectedX",[["path",{d:"M20 16l-4 4",key:"svg-0"}],["path",{d:"M7 12l5 5l-1.5 1.5a3.536 3.536 0 1 1 -5 -5l1.5 -1.5z",key:"svg-1"}],["path",{d:"M17 12l-5 -5l1.5 -1.5a3.536 3.536 0 1 1 5 5l-1.5 1.5z",key:"svg-2"}],["path",{d:"M3 21l2.5 -2.5",key:"svg-3"}],["path",{d:"M18.5 5.5l2.5 -2.5",key:"svg-4"}],["path",{d:"M10 11l-2 2",key:"svg-5"}],["path",{d:"M13 14l-2 2",key:"svg-6"}],["path",{d:"M16 16l4 4",key:"svg-7"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconQrcodeOff=createReactComponent("outline","qrcode-off","IconQrcodeOff",[["path",{d:"M8 4h1a1 1 0 0 1 1 1v1m-.297 3.711a1 1 0 0 1 -.703 .289h-4a1 1 0 0 1 -1 -1v-4c0 -.275 .11 -.524 .29 -.705",key:"svg-0"}],["path",{d:"M7 17v.01",key:"svg-1"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M7 7v.01",key:"svg-3"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M17 7v.01",key:"svg-5"}],["path",{d:"M20 14v.01",key:"svg-6"}],["path",{d:"M14 14v3",key:"svg-7"}],["path",{d:"M14 20h3",key:"svg-8"}],["path",{d:"M3 3l18 18",key:"svg-9"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconQrcode=createReactComponent("outline","qrcode","IconQrcode",[["path",{d:"M4 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M7 17l0 .01",key:"svg-1"}],["path",{d:"M14 4m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M7 7l0 .01",key:"svg-3"}],["path",{d:"M4 14m0 1a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v4a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-4"}],["path",{d:"M17 7l0 .01",key:"svg-5"}],["path",{d:"M14 14l3 0",key:"svg-6"}],["path",{d:"M20 14l0 .01",key:"svg-7"}],["path",{d:"M14 14l0 3",key:"svg-8"}],["path",{d:"M14 20l3 0",key:"svg-9"}],["path",{d:"M17 17l3 0",key:"svg-10"}],["path",{d:"M20 17l0 3",key:"svg-11"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconShare=createReactComponent("outline","share","IconShare",[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconX=createReactComponent("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconPlayerPauseFilled=createReactComponent("filled","player-pause-filled","IconPlayerPauseFilled",[["path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-0"}],["path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.31.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IconPlayerPlayFilled=createReactComponent("filled","player-play-filled","IconPlayerPlayFilled",[["path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",key:"svg-0"}]]);function FolderComponent({uuid:fe,props:{label:K,visible:me,expand_by_default:ge}}){const xe=reactExports.useContext(ViewerContext),[ye,{toggle:ve}]=useDisclosure(ge),_e=xe.useGui(Se=>Se.guiUuidSetFromContainerUuid[fe]),Ee=reactExports.useContext(GuiComponentContext),be=_e===void 0||Object.keys(_e).length===0,Ae=ye?IconChevronUp:IconChevronDown;return me?jsxRuntimeExports.jsxs(Paper,{withBorder:!0,className:folderWrapper,children:[jsxRuntimeExports.jsxs(Paper,{className:folderLabel,style:{cursor:be?void 0:"pointer"},onClick:ve,children:[K,jsxRuntimeExports.jsx(Ae,{className:folderToggleIcon,style:{display:be?"none":void 0}})]}),jsxRuntimeExports.jsx(Collapse,{in:ye&&!be,pt:"0.2em",children:jsxRuntimeExports.jsx(GuiComponentContext.Provider,{value:{...Ee,folderDepth:Ee.folderDepth+1},children:jsxRuntimeExports.jsx(Ee.GuiContainer,{containerUuid:fe})})}),jsxRuntimeExports.jsx(Collapse,{in:!(ye&&!be),children:jsxRuntimeExports.jsx(Box,{p:"xs"})})]}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}const[SliderProvider,useSliderContext]=createSafeContext("SliderProvider was not found in tree"),SliderRoot=reactExports.forwardRef(({size:fe,variant:K,...me},ge)=>{const{getStyles:xe}=useSliderContext();return jsxRuntimeExports.jsx(Box,{tabIndex:-1,variant:K,size:fe,ref:ge,...xe("root"),...me})});SliderRoot.displayName="@mantine/core/SliderRoot";const Thumb=reactExports.forwardRef(({max:fe,min:K,value:me,position:ge,label:xe,dragging:ye,draggingThisThumb:ve,onMouseDown:_e,onKeyDownCapture:Ee,labelTransitionProps:be,labelAlwaysOn:Ae,thumbLabel:Se,onFocus:Ce,onBlur:Te,showLabelOnHover:Re,isHovered:De,children:Ie=null,disabled:Be},Le)=>{const{getStyles:Oe}=useSliderContext(),[Fe,Ue]=reactExports.useState(!1),Ne=Ae||ye||Fe||Re&&De;return jsxRuntimeExports.jsxs(Box,{tabIndex:0,role:"slider","aria-label":Se,"aria-valuemax":fe,"aria-valuemin":K,"aria-valuenow":me,ref:Le,__vars:{"--slider-thumb-offset":`${ge}%`},...Oe("thumb",{focusable:!0,style:{...ve?{zIndex:1e3}:{}}}),mod:{dragging:ye,disabled:Be},onFocus:()=>{Ue(!0),typeof Ce=="function"&&Ce()},onBlur:()=>{Ue(!1),typeof Te=="function"&&Te()},onTouchStart:_e,onMouseDown:_e,onKeyDownCapture:Ee,onClick:He=>He.stopPropagation(),children:[Ie,jsxRuntimeExports.jsx(Transition$1,{mounted:xe!=null&&!!Ne,transition:"fade",duration:0,...be,children:He=>jsxRuntimeExports.jsx("div",{...Oe("label",{style:{...He}}),children:xe})})]})});Thumb.displayName="@mantine/core/SliderThumb";function getPosition({value:fe,min:K,max:me}){const ge=(fe-K)/(me-K)*100;return Math.min(Math.max(ge,0),100)}function Marks({marks:fe,min:K,max:me,disabled:ge,value:xe,offset:ye,inverted:ve}){const{getStyles:_e}=useSliderContext();if(!fe)return null;const Ee=fe.map((be,Ae)=>reactExports.createElement(Box,{..._e("markWrapper"),__vars:{"--mark-offset":`${getPosition({value:be.value,min:K,max:me})}%`},key:Ae},jsxRuntimeExports.jsx(Box,{..._e("mark"),mod:{filled:!1,disabled:ge}}),be.label&&jsxRuntimeExports.jsx("div",{..._e("markLabel"),children:be.label})));return jsxRuntimeExports.jsx("div",{children:Ee})}Marks.displayName="@mantine/core/SliderMarks";function Track({children:fe,disabled:K,marksOffset:me,inverted:ge,containerProps:xe,...ye}){const{getStyles:ve}=useSliderContext();return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx(Box,{...ve("trackContainer"),mod:{disabled:K},...xe,children:jsxRuntimeExports.jsxs(Box,{...ve("track"),mod:{inverted:ge,disabled:K},children:[fe,jsxRuntimeExports.jsx(Marks,{...ye,offset:me,disabled:K,inverted:ge})]})})})}Track.displayName="@mantine/core/SliderTrack";function getChangeValue({value:fe,containerWidth:K,min:me,max:ge,step:xe,precision:ye}){const _e=(K?Math.min(Math.max(fe,0),K)/K:fe)*(ge-me),Ee=(_e!==0?Math.round(_e/xe)*xe:0)+me,be=Math.max(Ee,me);return ye!==void 0?Number(be.toFixed(ye)):be}function getPrecision(fe){if(!fe)return 0;const K=fe.toString().split(".");return K.length>1?K[1].length:0}const root="_root_1nr0a_1",label="_label_1nr0a_33",thumb="_thumb_1nr0a_54",trackContainer="_trackContainer_1nr0a_102",track="_track_1nr0a_102",bar="_bar_1nr0a_141",markWrapper="_markWrapper_1nr0a_167",mark="_mark_1nr0a_167",markLabel="_markLabel_1nr0a_208",classes={root,label,thumb,trackContainer,track,bar,markWrapper,mark,markLabel},defaultProps={radius:"xl",min:0,max:100,step:1,fixedEndpoints:!0,marks:[],label:fe=>fe,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:fe=>fe},varsResolver=(fe,{size:K,color:me,thumbSize:ge,radius:xe})=>({root:{"--slider-size":getSize(K,"slider-size"),"--slider-color":me?getThemeColor(me,fe):void 0,"--slider-radius":xe===void 0?void 0:getRadius(xe),"--slider-thumb-size":ge!==void 0?rem(ge):"calc(var(--slider-size) * 2)"}}),MultiSlider=factory((fe,K)=>{const me=useProps("MultiSlider",defaultProps,fe),{classNames:ge,styles:xe,value:ye,onChange:ve,onChangeEnd:_e,size:Ee,min:be,max:Ae,step:Se,fixedEndpoints:Ce,minRange:Te,precision:Re,defaultValue:De,name:Ie,marks:Be,label:Le,labelTransitionProps:Oe,labelAlwaysOn:Fe,thumbLabel:Ue,showLabelOnHover:Ne,thumbChildren:He,disabled:ze,unstyled:je,scale:Ge,inverted:Xe,className:qe,style:Qe,vars:nt,...Nt}=me,Ye=useStyles({name:"MultiSlider",props:me,classes,classNames:ge,className:qe,styles:xe,style:Qe,vars:nt,varsResolver,unstyled:je}),{dir:at}=useDirection(),[rt,Ft]=reactExports.useState(!1),[Je,Wt]=useUncontrolled({value:ye===void 0?ye:ye.map(Dn=>clamp$5(Dn,be,Ae)),defaultValue:De===void 0?De:De.map(Dn=>clamp$5(Dn,be,Ae)),finalValue:[clamp$5(0,be,Ae)],onChange:ve}),Kt=reactExports.useRef(Je),Pt=reactExports.useRef(),Yt=reactExports.useRef([]),Gt=reactExports.useRef(-1),an=Je.map(Dn=>getPosition({value:Dn,min:be,max:Ae})),pn=Re??getPrecision(Se);Kt.current=Je;const En=(Dn,hn,mn)=>{const dn=[...Kt.current];dn[hn]=Dn;const Hn=Te||Se;hn<dn.length-1&&(Dn>dn[hn+1]-(Hn-1e-9)&&(dn[hn]=Math.max(be,dn[hn+1]-Hn)),Dn>(Ae-(Hn-1e-9)||be)&&(dn[hn]=Kt.current[hn])),hn>0&&Dn<dn[hn-1]+Hn&&(dn[hn]=Math.min(Ae,dn[hn-1]+Hn)),Ce&&(hn===0||hn==dn.length-1)&&(dn[hn]=Kt.current[hn]),Wt(dn),Kt.current=dn,mn&&_e?.(Kt.current)},$n=reactExports.useCallback(({x:Dn})=>{if(!ze){const hn=getChangeValue({value:Dn,min:be,max:Ae,step:Se,precision:pn});En(hn,Gt.current,!1)}},[ze,be,Ae,Se,pn,Wt]),{ref:Un,active:kn}=useMove($n,{onScrubEnd:()=>_e?.(Kt.current)},at);function bn(Dn){return"TouchEvent"in window&&Dn instanceof window.TouchEvent?Dn.touches[0].clientX:Dn.clientX}const Mn=Dn=>{Un.current.focus();const hn=Un.current.getBoundingClientRect(),mn=bn(Dn.nativeEvent),dn=getChangeValue({value:mn-hn.left,max:Ae,min:be,step:Se,containerWidth:hn.width}),Hn=Je.map(Bn=>Math.abs(Bn-dn)).indexOf(Math.min(...Je.map(Bn=>Math.abs(Bn-dn))));Gt.current=Hn},zt=Dn=>{if(!ze){const hn=Gt.current;switch(Dn.key){case"ArrowUp":{Dn.preventDefault(),Yt.current[hn].focus(),En(Math.min(Math.max(Kt.current[hn]+Se,be),Ae),hn,!0);break}case"ArrowRight":{Dn.preventDefault(),Yt.current[hn]?.focus(),En(Math.min(Math.max(at==="rtl"?Kt.current[hn]-Se:Kt.current[hn]+Se,be),Ae),hn,!0);break}case"ArrowDown":{Dn.preventDefault(),Yt.current[hn]?.focus(),En(Math.min(Math.max(Kt.current[hn]-Se,be),Ae),hn,!0);break}case"ArrowLeft":{Dn.preventDefault(),Yt.current[hn]?.focus(),En(Math.min(Math.max(at==="rtl"?Kt.current[hn]+Se:Kt.current[hn]-Se,be),Ae),hn,!0);break}case"Home":{Dn.preventDefault(),Yt.current[hn]?.focus(),En(be,hn,!0);break}case"End":{Dn.preventDefault(),Yt.current[hn]?.focus(),En(Ae,hn,!0);break}}}};return jsxRuntimeExports.jsx(SliderProvider,{value:{getStyles:Ye},children:jsxRuntimeExports.jsxs(SliderRoot,{...Nt,ref:useMergedRef(K,Pt),onKeyDownCapture:zt,onMouseDownCapture:()=>Pt.current?.focus(),size:Ee,disabled:ze,children:[jsxRuntimeExports.jsx(Track,{inverted:Xe,offset:0,filled:0,value:0,marks:Be,min:be,max:Ae,disabled:ze,containerProps:{ref:Un,onMouseEnter:Ne?()=>Ft(!0):void 0,onMouseLeave:Ne?()=>Ft(!1):void 0,onTouchStartCapture:Mn,onTouchEndCapture:()=>{Gt.current=-1},onMouseDownCapture:Mn,onMouseUpCapture:()=>{Gt.current=-1}},children:Je.map((Dn,hn)=>jsxRuntimeExports.jsx(Thumb,{max:Ae,min:be,value:Ge(Dn),position:an[hn],dragging:kn,draggingThisThumb:kn&&Gt.current===hn,label:typeof Le=="function"?Le(Ge(Dn)):Le,ref:mn=>{Yt.current[hn]=mn},labelTransitionProps:Oe,labelAlwaysOn:Fe,thumbLabel:Ue,showLabelOnHover:Ne,isHovered:rt,disabled:ze,children:He},hn))}),Je.map((Dn,hn)=>jsxRuntimeExports.jsx("input",{type:"hidden",name:`${Ie}[]`,value:Dn},hn))]})})});MultiSlider.classes=classes;MultiSlider.displayName="MultiSlider";function MultiSliderComponent({uuid:fe,value:K,props:{label:me,hint:ge,visible:xe,disabled:ye,min:ve,max:_e,precision:Ee,step:be,_marks:Ae,fixed_endpoints:Se,min_range:Ce}}){const{setValue:Te}=React$4.useContext(GuiComponentContext);if(!xe)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const Re=Be=>Te(fe,Be),De=useMantineColorScheme().colorScheme,Ie=jsxRuntimeExports.jsx(Box,{mt:"0.2em",mb:"0.4em",children:jsxRuntimeExports.jsx(MultiSlider,{id:fe,className:Ae===null?sliderDefaultMarks:void 0,size:"xs",radius:"xs",styles:Be=>({thumb:{height:"0.75rem",width:"0.5rem"},trackContainer:{zIndex:3,position:"relative"},markLabel:{transform:"translate(-50%, 0.03rem)",fontSize:"0.6rem",textAlign:"center"},mark:{transform:"scale(1.85)"},markFilled:{background:ye?De==="dark"?Be.colors.dark[3]:Be.colors.gray[4]:Be.primaryColor}}),pt:"0.2em",pb:"0.4em",min:ve,max:_e,step:be??void 0,fixedEndpoints:Se,precision:Ee,minRange:Ce??void 0,marks:Ae===null?[{value:ve,label:`${ve.toFixed(6).replace(/\.?0+$/,"")}`},{value:_e,label:`${_e.toFixed(6).replace(/\.?0+$/,"")}`}]:Ae,value:K,onChange:Re})});return jsxRuntimeExports.jsx(ViserInputComponent,{uuid:fe,hint:ge,label:me,children:Ie})}function UploadButtonComponent({uuid:fe,props:{disabled:K,mime_type:me,color:ge,_icon_html:xe,label:ye}}){const ve=reactExports.useContext(ViewerContext),_e=React$4.useRef(null),{isUploading:Ee,upload:be}=useFileUpload({viewer:ve,componentUuid:fe});return jsxRuntimeExports.jsxs(Box,{mx:"xs",mb:"0.5em",children:[jsxRuntimeExports.jsx("input",{type:"file",style:{display:"none"},id:`file_upload_${fe}`,name:"file",accept:me,ref:_e,onChange:Ae=>{const Se=Ae.target;Se.files&&be(Se.files[0])}}),jsxRuntimeExports.jsx(Button,{id:fe,fullWidth:!0,color:ge??void 0,onClick:()=>{_e.current!==null&&(_e.current.value=_e.current.defaultValue,_e.current.click())},style:{height:"2.125em"},disabled:K||Ee,size:"sm",leftSection:xe===null?void 0:jsxRuntimeExports.jsx("div",{className:htmlIconWrapper,dangerouslySetInnerHTML:{__html:xe}}),children:ye})]})}function useFileUpload({viewer:fe,componentUuid:K}){const me=fe.useGui(Ee=>Ee.updateUploadState),ge=fe.useGui(Ee=>Ee.uploadsInProgress[K]),xe=ge?.totalBytes,ye=React$4.useMemo(()=>{if(xe===void 0)return"";let Ee=xe;const be=["B","K","M","G","T","P"];let Ae=0;for(;Ee>=100&&Ae<be.length-1;)Ee/=1024,Ae+=1;return`${Ee.toFixed(1)}${be[Ae]}`},[xe]);React$4.useEffect(()=>{if(ge===void 0)return;const{notificationId:Ee,filename:be}=ge;if(ge.uploadedBytes===0)notifications.show({id:Ee,title:`Uploading ${be} (${ye})`,message:jsxRuntimeExports.jsx(Progress,{size:"sm",value:0}),autoClose:!1,withCloseButton:!1,loading:!0});else{const Ae=ge.uploadedBytes/ge.totalBytes,Se=Ae===1;notifications.update({id:Ee,title:`Uploading ${be} (${ye})`,message:Se?"File uploaded successfully.":jsxRuntimeExports.jsx(Progress,{size:"sm",transitionDuration:10,value:100*Ae}),autoClose:Se,withCloseButton:Se,loading:!Se,icon:Se?jsxRuntimeExports.jsx(IconCheck,{}):void 0})}},[ge,ye]);const ve=ge!==void 0&&ge.uploadedBytes<ge.totalBytes;async function _e(Ee){const Ae=Math.ceil(Ee.size/524288),Se=v4(),Ce="upload-"+Se;me({componentId:K,uploadedBytes:0,totalBytes:Ee.size,filename:Ee.name,notificationId:Ce}),fe.sendMessageRef.current({type:"FileTransferStartUpload",source_component_uuid:K,transfer_uuid:Se,filename:Ee.name,mime_type:Ee.type,size_bytes:Ee.size,part_count:Ae});for(let Te=0;Te<Ae;Te++){const Re=Te*524288,De=(Te+1)*524288,Be=await Ee.slice(Re,De).arrayBuffer();fe.sendMessageRef.current({type:"FileTransferPart",source_component_uuid:K,transfer_uuid:Se,part:Te,content:new Uint8Array(Be)})}}return{isUploading:ve,upload:_e}}function ProgressBarComponent({value:fe,props:{visible:K,color:me,animated:ge}}){return K?jsxRuntimeExports.jsx(Box,{pb:"xs",px:"xs",children:jsxRuntimeExports.jsx(Progress,{radius:"xs",color:me??void 0,value:fe,animated:ge,transitionDuration:0})}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function ImageComponent({props:fe}){if(!fe.visible)return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{});const[K,me]=reactExports.useState(null);return reactExports.useEffect(()=>{if(fe._data===null)me(null);else{const ge=URL.createObjectURL(new Blob([fe._data],{type:fe.media_type}));return me(ge),()=>{URL.revokeObjectURL(ge)}}},[fe._data,fe.media_type]),K===null?null:jsxRuntimeExports.jsxs(Box,{px:"xs",children:[fe.label===null?null:jsxRuntimeExports.jsx(Text,{fz:"sm",display:"block",children:fe.label}),jsxRuntimeExports.jsx("img",{src:K,style:{maxWidth:"100%",height:"auto"}})]})}function HtmlComponent({props:fe}){return fe.visible?jsxRuntimeExports.jsx("div",{dangerouslySetInnerHTML:{__html:fe.content}}):jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function GeneratedGuiContainer({containerUuid:fe}){const me=React$4.useContext(ViewerContext).useGui(ye=>ye.updateGuiProps),ge=useThrottledMessageSender(50);function xe(ye,ve){me(ye,{value:ve}),ge({type:"GuiUpdateMessage",uuid:ye,updates:{value:ve}})}return jsxRuntimeExports.jsx(GuiComponentContext.Provider,{value:{folderDepth:0,GuiContainer,messageSender:ge,setValue:xe},children:jsxRuntimeExports.jsx(GuiContainer,{containerUuid:fe})})}function GuiContainer({containerUuid:fe}){const K=React$4.useContext(ViewerContext),me=K.useGui(_e=>_e.guiUuidSetFromContainerUuid[fe])??{},ge=[...Object.keys(me)],xe=K.useGui(_e=>_e.guiOrderFromUuid);if(me===void 0)return null;let ye=ge.map(_e=>({uuid:_e,order:xe[_e]}));return ye=ye.sort((_e,Ee)=>_e.order-Ee.order),jsxRuntimeExports.jsx(Box,{pt:"xs",children:ye.map(_e=>jsxRuntimeExports.jsx(GeneratedInput,{guiUuid:_e.uuid},_e.uuid))})}function GeneratedInput(fe){const me=React$4.useContext(ViewerContext).useGui(ge=>ge.guiConfigFromUuid[fe.guiUuid]);if(me===void 0)return console.error("Tried to render non-existent component",fe.guiUuid),null;switch(me.type){case"GuiFolderMessage":return jsxRuntimeExports.jsx(FolderComponent,{...me});case"GuiTabGroupMessage":return jsxRuntimeExports.jsx(TabGroupComponent,{...me});case"GuiMarkdownMessage":return jsxRuntimeExports.jsx(MarkdownComponent,{...me});case"GuiHtmlMessage":return jsxRuntimeExports.jsx(HtmlComponent,{...me});case"GuiPlotlyMessage":return jsxRuntimeExports.jsx(PlotlyComponent,{...me});case"GuiImageMessage":return jsxRuntimeExports.jsx(ImageComponent,{...me});case"GuiButtonMessage":return jsxRuntimeExports.jsx(ButtonComponent,{...me});case"GuiUploadButtonMessage":return jsxRuntimeExports.jsx(UploadButtonComponent,{...me});case"GuiSliderMessage":return jsxRuntimeExports.jsx(SliderComponent,{...me});case"GuiMultiSliderMessage":return jsxRuntimeExports.jsx(MultiSliderComponent,{...me});case"GuiNumberMessage":return jsxRuntimeExports.jsx(NumberInputComponent,{...me});case"GuiTextMessage":return jsxRuntimeExports.jsx(TextInputComponent,{...me});case"GuiCheckboxMessage":return jsxRuntimeExports.jsx(CheckboxComponent,{...me});case"GuiVector2Message":return jsxRuntimeExports.jsx(Vector2Component,{...me});case"GuiVector3Message":return jsxRuntimeExports.jsx(Vector3Component,{...me});case"GuiDropdownMessage":return jsxRuntimeExports.jsx(DropdownComponent,{...me});case"GuiRgbMessage":return jsxRuntimeExports.jsx(RgbComponent,{...me});case"GuiRgbaMessage":return jsxRuntimeExports.jsx(RgbaComponent,{...me});case"GuiButtonGroupMessage":return jsxRuntimeExports.jsx(ButtonGroupComponent,{...me});case"GuiProgressBarMessage":return jsxRuntimeExports.jsx(ProgressBarComponent,{...me});default:assertNeverType(me)}}function assertNeverType(fe){throw new Error("Unexpected object: "+fe.type)}const Line=reactExports.forwardRef(function({points:K,color:me=16777215,vertexColors:ge,linewidth:xe,lineWidth:ye,segments:ve,dashed:_e,...Ee},be){const Ae=useThree(De=>De.size),Se=reactExports.useMemo(()=>ve?new LineSegments2:new Line2,[ve]),[Ce]=reactExports.useState(()=>new LineMaterial),Te=3,Re=reactExports.useMemo(()=>{const De=ve?new LineSegmentsGeometry:new LineGeometry;if(De.setPositions(K),ge){const Ie=new Float32Array(ge).map(Be=>Be/255);me=16777215,De.setColors(Ie,Te)}return De},[K,ve,ge,Te]);return reactExports.useLayoutEffect(()=>{Se.computeLineDistances()},[K,Se]),reactExports.useLayoutEffect(()=>{_e?Ce.defines.USE_DASH="":delete Ce.defines.USE_DASH,Ce.needsUpdate=!0},[_e,Ce]),reactExports.useEffect(()=>()=>{Re.dispose(),Ce.dispose()},[Re]),jsxRuntimeExports.jsxs("primitive",{object:Se,ref:be,...Ee,children:[jsxRuntimeExports.jsx("primitive",{object:Re,attach:"geometry"}),jsxRuntimeExports.jsx("primitive",{object:Ce,attach:"material",color:me,vertexColors:!!ge,resolution:[Ae.width,Ae.height],linewidth:xe??ye??1,dashed:_e,transparent:!1,...Ee})]})}),shadowArgs={"shadow-camera-near":.001,"shadow-camera-far":500,"shadow-bias":-1e-5,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-radius":4},inverseProjectionMatrix=new Matrix4;class CSMFrustum{constructor(K){K=K||{},this.zNear=K.webGL===!0?-1:0,this.vertices={near:[new Vector3,new Vector3,new Vector3,new Vector3],far:[new Vector3,new Vector3,new Vector3,new Vector3]},K.projectionMatrix!==void 0&&this.setFromProjectionMatrix(K.projectionMatrix,K.maxFar||1e4)}setFromProjectionMatrix(K,me){const ge=this.zNear,xe=K.elements[2*4+3]===0;return inverseProjectionMatrix.copy(K).invert(),this.vertices.near[0].set(1,1,ge),this.vertices.near[1].set(1,-1,ge),this.vertices.near[2].set(-1,-1,ge),this.vertices.near[3].set(-1,1,ge),this.vertices.near.forEach(function(ye){ye.applyMatrix4(inverseProjectionMatrix)}),this.vertices.far[0].set(1,1,1),this.vertices.far[1].set(1,-1,1),this.vertices.far[2].set(-1,-1,1),this.vertices.far[3].set(-1,1,1),this.vertices.far.forEach(function(ye){ye.applyMatrix4(inverseProjectionMatrix);const ve=Math.abs(ye.z);xe?ye.z*=Math.min(me/ve,1):ye.multiplyScalar(Math.min(me/ve,1))}),this.vertices}split(K,me){for(;K.length>me.length;)me.push(new CSMFrustum);me.length=K.length;for(let ge=0;ge<K.length;ge++){const xe=me[ge];if(ge===0)for(let ye=0;ye<4;ye++)xe.vertices.near[ye].copy(this.vertices.near[ye]);else for(let ye=0;ye<4;ye++)xe.vertices.near[ye].lerpVectors(this.vertices.near[ye],this.vertices.far[ye],K[ge-1]);if(ge===K.length-1)for(let ye=0;ye<4;ye++)xe.vertices.far[ye].copy(this.vertices.far[ye]);else for(let ye=0;ye<4;ye++)xe.vertices.far[ye].lerpVectors(this.vertices.near[ye],this.vertices.far[ye],K[ge])}}toSpace(K,me){for(let ge=0;ge<4;ge++)me.vertices.near[ge].copy(this.vertices.near[ge]).applyMatrix4(K),me.vertices.far[ge].copy(this.vertices.far[ge]).applyMatrix4(K)}}const CSMShader={lights_fragment_begin:`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );

vec3 geometryClearcoatNormal = vec3( 0.0 );

#ifdef USE_CLEARCOAT

	geometryClearcoatNormal = clearcoatNormal;

#endif

#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		// Iridescence F0 approximation
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif

IncidentLight directLight;

#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )

	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {

		pointLight = pointLights[ i ];

		getPointLightInfo( pointLight, geometryPosition, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;

		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )

	SpotLight spotLight;
 	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;

	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {

		spotLight = spotLights[ i ];

		getSpotLightInfo( spotLight, geometryPosition, directLight );

  		// spot lights are ordered [shadows with maps, shadows without maps, maps without shadows, none]
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;

		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && defined( USE_CSM ) && defined( CSM_CASCADES )

	DirectionalLight directionalLight;
	float linearDepth = (vViewPosition.z) / (shadowFar - cameraNear);
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif

	#if defined( USE_SHADOWMAP ) && defined( CSM_FADE )
		vec2 cascade;
		float cascadeCenter;
		float closestEdge;
		float margin;
		float csmx;
		float csmy;

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];
			getDirectionalLightInfo( directionalLight, directLight );

			#if ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
				// NOTE: Depth gets larger away from the camera.
				// cascade.x is closer, cascade.y is further
				cascade = CSM_cascades[ i ];
				cascadeCenter = ( cascade.x + cascade.y ) / 2.0;
				closestEdge = linearDepth < cascadeCenter ? cascade.x : cascade.y;
				margin = 0.25 * pow( closestEdge, 2.0 );
				csmx = cascade.x - margin / 2.0;
				csmy = cascade.y + margin / 2.0;
				if( linearDepth >= csmx && ( linearDepth < csmy || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 ) ) {

					float dist = min( linearDepth - csmx, csmy - linearDepth );
					float ratio = clamp( dist / margin, 0.0, 1.0 );

					vec3 prevColor = directLight.color;
					directionalLightShadow = directionalLightShadows[ i ];
					directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;

					bool shouldFadeLastCascade = UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth > cascadeCenter;
					directLight.color = mix( prevColor, directLight.color, shouldFadeLastCascade ? ratio : 1.0 );

					ReflectedLight prevLight = reflectedLight;
					RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

					bool shouldBlend = UNROLLED_LOOP_INDEX != CSM_CASCADES - 1 || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1 && linearDepth < cascadeCenter;
					float blendRatio = shouldBlend ? ratio : 1.0;

					reflectedLight.directDiffuse = mix( prevLight.directDiffuse, reflectedLight.directDiffuse, blendRatio );
					reflectedLight.directSpecular = mix( prevLight.directSpecular, reflectedLight.directSpecular, blendRatio );
					reflectedLight.indirectDiffuse = mix( prevLight.indirectDiffuse, reflectedLight.indirectDiffuse, blendRatio );
					reflectedLight.indirectSpecular = mix( prevLight.indirectSpecular, reflectedLight.indirectSpecular, blendRatio );

				}
			#endif

		}
		#pragma unroll_loop_end
	#elif defined (USE_SHADOWMAP)

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];
			getDirectionalLightInfo( directionalLight, directLight );

			#if ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )

				directionalLightShadow = directionalLightShadows[ i ];
				if(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y) directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;

				if(linearDepth >= CSM_cascades[UNROLLED_LOOP_INDEX].x && (linearDepth < CSM_cascades[UNROLLED_LOOP_INDEX].y || UNROLLED_LOOP_INDEX == CSM_CASCADES - 1)) RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

			#endif

		}
		#pragma unroll_loop_end

	#elif ( NUM_DIR_LIGHT_SHADOWS > 0 )
		// note: no loop here - all CSM lights are in fact one light only
		getDirectionalLightInfo( directionalLights[0], directLight );
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	#endif

	#if ( NUM_DIR_LIGHTS > NUM_DIR_LIGHT_SHADOWS)
		// compute the lights not casting shadows (if any)

		#pragma unroll_loop_start
		for ( int i = NUM_DIR_LIGHT_SHADOWS; i < NUM_DIR_LIGHTS; i ++ ) {

			directionalLight = directionalLights[ i ];

			getDirectionalLightInfo( directionalLight, directLight );

			RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

		}
		#pragma unroll_loop_end

	#endif

#endif


#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct ) && !defined( USE_CSM ) && !defined( CSM_CASCADES )

	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {

		directionalLight = directionalLights[ i ];

		getDirectionalLightInfo( directionalLight, directLight );

		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif

		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )

	RectAreaLight rectAreaLight;

	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {

		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );

	}
	#pragma unroll_loop_end

#endif

#if defined( RE_IndirectDiffuse )

	vec3 iblIrradiance = vec3( 0.0 );

	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );

	#if defined( USE_LIGHT_PROBES )

		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );

	#endif

	#if ( NUM_HEMI_LIGHTS > 0 )

		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {

			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );

		}
		#pragma unroll_loop_end

	#endif

#endif

#if defined( RE_IndirectSpecular )

	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );

#endif
`,lights_pars_begin:`
#if defined( USE_CSM ) && defined( CSM_CASCADES )
uniform vec2 CSM_cascades[CSM_CASCADES];
uniform float cameraNear;
uniform float shadowFar;
#endif
	`+ShaderChunk.lights_pars_begin},_cameraToLightMatrix=new Matrix4,_lightSpaceFrustum=new CSMFrustum({webGL:!0}),_center=new Vector3,_bbox=new Box3,_uniformArray=[],_logArray=[],_lightOrientationMatrix=new Matrix4,_lightOrientationMatrixInverse=new Matrix4,_up=new Vector3(0,1,0);class CSM{constructor(K){this.camera=K.camera,this.parent=K.parent,this.cascades=K.cascades||3,this.maxFar=K.maxFar||1e5,this.mode=K.mode||"practical",this.shadowMapSize=K.shadowMapSize||2048,this.shadowBias=K.shadowBias||1e-6,this.lightDirection=K.lightDirection||new Vector3(1,-1,1).normalize(),this.lightIntensity=K.lightIntensity||3,this.lightNear=K.lightNear||1,this.lightFar=K.lightFar||2e3,this.lightMargin=K.lightMargin||200,this.customSplitsCallback=K.customSplitsCallback,this.fade=!1,this.mainFrustum=new CSMFrustum({webGL:!0}),this.frustums=[],this.breaks=[],this.lights=[],this.shaders=new Map,this._createLights(),this.updateFrustums(),this._injectInclude()}_createLights(){for(let K=0;K<this.cascades;K++){const me=new DirectionalLight(16777215,this.lightIntensity);me.castShadow=!0,me.shadow.mapSize.width=this.shadowMapSize,me.shadow.mapSize.height=this.shadowMapSize,me.shadow.camera.near=this.lightNear,me.shadow.camera.far=this.lightFar,me.shadow.bias=this.shadowBias,this.parent.add(me),this.parent.add(me.target),this.lights.push(me)}}_initCascades(){const K=this.camera;K.updateProjectionMatrix(),this.mainFrustum.setFromProjectionMatrix(K.projectionMatrix,this.maxFar),this.mainFrustum.split(this.breaks,this.frustums)}_updateShadowBounds(){const K=this.frustums;for(let me=0;me<K.length;me++){const xe=this.lights[me].shadow.camera,ye=this.frustums[me],ve=ye.vertices.near,_e=ye.vertices.far,Ee=_e[0];let be;Ee.distanceTo(_e[2])>Ee.distanceTo(ve[2])?be=_e[2]:be=ve[2];let Ae=Ee.distanceTo(be);if(this.fade){const Se=this.camera,Ce=Math.max(Se.far,this.maxFar),Te=ye.vertices.far[0].z/(Ce-Se.near),Re=.25*Math.pow(Te,2)*(Ce-Se.near);Ae+=Re}xe.left=-Ae/2,xe.right=Ae/2,xe.top=Ae/2,xe.bottom=-Ae/2,xe.updateProjectionMatrix()}}_getBreaks(){const K=this.camera,me=Math.min(K.far,this.maxFar);switch(this.breaks.length=0,this.mode){case"uniform":ge(this.cascades,K.near,me,this.breaks);break;case"logarithmic":xe(this.cascades,K.near,me,this.breaks);break;case"practical":ye(this.cascades,K.near,me,.5,this.breaks);break;case"custom":this.customSplitsCallback===void 0&&console.error("CSM: Custom split scheme callback not defined."),this.customSplitsCallback(this.cascades,K.near,me,this.breaks);break}function ge(ve,_e,Ee,be){for(let Ae=1;Ae<ve;Ae++)be.push((_e+(Ee-_e)*Ae/ve)/Ee);be.push(1)}function xe(ve,_e,Ee,be){for(let Ae=1;Ae<ve;Ae++)be.push(_e*(Ee/_e)**(Ae/ve)/Ee);be.push(1)}function ye(ve,_e,Ee,be,Ae){_uniformArray.length=0,_logArray.length=0,xe(ve,_e,Ee,_logArray),ge(ve,_e,Ee,_uniformArray);for(let Se=1;Se<ve;Se++)Ae.push(MathUtils.lerp(_uniformArray[Se-1],_logArray[Se-1],be));Ae.push(1)}}update(){const K=this.camera,me=this.frustums;_lightOrientationMatrix.lookAt(new Vector3,this.lightDirection,_up),_lightOrientationMatrixInverse.copy(_lightOrientationMatrix).invert();for(let ge=0;ge<me.length;ge++){const xe=this.lights[ge],ye=xe.shadow.camera,ve=(ye.right-ye.left)/this.shadowMapSize,_e=(ye.top-ye.bottom)/this.shadowMapSize;_cameraToLightMatrix.multiplyMatrices(_lightOrientationMatrixInverse,K.matrixWorld),me[ge].toSpace(_cameraToLightMatrix,_lightSpaceFrustum);const Ee=_lightSpaceFrustum.vertices.near,be=_lightSpaceFrustum.vertices.far;_bbox.makeEmpty();for(let Ae=0;Ae<4;Ae++)_bbox.expandByPoint(Ee[Ae]),_bbox.expandByPoint(be[Ae]);_bbox.getCenter(_center),_center.z=_bbox.max.z+this.lightMargin,_center.x=Math.floor(_center.x/ve)*ve,_center.y=Math.floor(_center.y/_e)*_e,_center.applyMatrix4(_lightOrientationMatrix),xe.position.copy(_center),xe.target.position.copy(_center),xe.target.position.x+=this.lightDirection.x,xe.target.position.y+=this.lightDirection.y,xe.target.position.z+=this.lightDirection.z}}_injectInclude(){ShaderChunk.lights_fragment_begin=CSMShader.lights_fragment_begin,ShaderChunk.lights_pars_begin=CSMShader.lights_pars_begin}setupMaterial(K){K.defines=K.defines||{},K.defines.USE_CSM=1,K.defines.CSM_CASCADES=this.cascades,this.fade&&(K.defines.CSM_FADE="");const me=[],ge=this,xe=this.shaders;K.onBeforeCompile=function(ye){const ve=Math.min(ge.camera.far,ge.maxFar);ge._getExtendedBreaks(me),ye.uniforms.CSM_cascades={value:me},ye.uniforms.cameraNear={value:ge.camera.near},ye.uniforms.shadowFar={value:ve},xe.set(K,ye)},xe.set(K,null)}_updateUniforms(){const K=Math.min(this.camera.far,this.maxFar);this.shaders.forEach(function(ge,xe){if(ge!==null){const ye=ge.uniforms;this._getExtendedBreaks(ye.CSM_cascades.value),ye.cameraNear.value=this.camera.near,ye.shadowFar.value=K}!this.fade&&"CSM_FADE"in xe.defines?(delete xe.defines.CSM_FADE,xe.needsUpdate=!0):this.fade&&!("CSM_FADE"in xe.defines)&&(xe.defines.CSM_FADE="",xe.needsUpdate=!0)},this)}_getExtendedBreaks(K){for(;K.length<this.breaks.length;)K.push(new Vector2);K.length=this.breaks.length;for(let me=0;me<this.cascades;me++){const ge=this.breaks[me],xe=this.breaks[me-1]||0;K[me].x=xe,K[me].y=ge}}updateFrustums(){this._getBreaks(),this._initCascades(),this._updateShadowBounds(),this._updateUniforms()}remove(){for(let K=0;K<this.lights.length;K++)this.parent.remove(this.lights[K].target),this.parent.remove(this.lights[K])}dispose(){const K=this.shaders;K.forEach(function(me,ge){delete ge.onBeforeCompile,delete ge.defines.USE_CSM,delete ge.defines.CSM_CASCADES,delete ge.defines.CSM_FADE,me!==null&&(delete me.uniforms.CSM_cascades,delete me.uniforms.cameraNear,delete me.uniforms.shadowFar),ge.needsUpdate=!0}),K.clear()}}let originalLightsFragmentBegin="",originalLightsParsBegin="",activeCSMInstances=0;class CSMProxy{instance;args;constructor(K){this.args=K,activeCSMInstances===0&&(originalLightsFragmentBegin=ShaderChunk.lights_fragment_begin,originalLightsParsBegin=ShaderChunk.lights_pars_begin)}attach(){this.instance||(this.instance=new CSM(this.args),activeCSMInstances++)}dispose(){this.instance&&(this.instance.remove(),this.instance.dispose(),this.instance=void 0,activeCSMInstances--,activeCSMInstances===0&&(ShaderChunk.lights_fragment_begin=originalLightsFragmentBegin,ShaderChunk.lights_pars_begin=originalLightsParsBegin))}}function updateMaterialsInScene(fe){fe.traverse(K=>{const me=K;me.isMesh&&me.material&&(Array.isArray(me.material)?me.material.forEach(ge=>{ge.needsUpdate=!0}):me.material.needsUpdate=!0)})}function CsmDirectionalLight({maxFar:fe=30,shadowMapSize:K=1024,lightIntensity:me=.25,cascades:ge=3,fade:xe=!0,position:ye=[0,0,0],shadowBias:ve=-1e-5,lightFar:_e=2e3,lightMargin:Ee=200,lightNear:be=1e-4,mode:Ae="practical",color:Se=16777215,castShadow:Ce=!0}){return Ce?jsxRuntimeExports.jsx(ShadowCsmLight,{maxFar:fe,shadowMapSize:K,lightIntensity:me/ge,cascades:ge,fade:xe,position:ye,shadowBias:ve,lightFar:_e,lightMargin:Ee,lightNear:be,mode:Ae,color:Se},"csm-shadow"):jsxRuntimeExports.jsx("directionalLight",{intensity:me,position:ye,color:Se!==void 0?new Color$1(Se):void 0})}function ShadowCsmLight({maxFar:fe,shadowMapSize:K,lightIntensity:me,cascades:ge,fade:xe,position:ye=[0,-1,0],shadowBias:ve,lightFar:_e,lightMargin:Ee,lightNear:be,mode:Ae,color:Se}){const Ce=useThree(Ne=>Ne.camera),{scene:Te}=useThree(),Re=reactExports.useMemo(()=>{let Ne=Te;for(;Ne;){if(Ne instanceof Scene)return Ne;Ne=Ne.parent}throw new Error("Could not find scene object in r3f context!")},[Te]),De=reactExports.useMemo(()=>new Vector3(-ye[0],-ye[1],-ye[2]).normalize(),[ye]),Ie=reactExports.useRef(null),Be=reactExports.useMemo(()=>new Vector3,[]),Le=reactExports.useMemo(()=>new Vector3(0,0,0),[]),Oe=reactExports.useMemo(()=>new Vector3,[]),Fe=reactExports.useMemo(()=>new CSMProxy({camera:Ce,cascades:ge,lightDirection:De.clone(),lightFar:_e,lightIntensity:me,lightMargin:Ee,lightNear:be,maxFar:fe,mode:Ae,parent:Re,shadowBias:ve,shadowMapSize:K}),[Ce,Re,ge,De,_e,me,Ee,be,fe,Ae,ve,K]),Ue=reactExports.useMemo(()=>new Color$1(Se),[Se]);return reactExports.useEffect(()=>{Fe.instance&&(Fe.instance.lights.forEach(Ne=>{Ne.color=Ue}),Fe.instance.fade=xe??!1)},[Fe,Ue,xe]),useFrame(()=>{!Fe.instance||!Ie.current||(Ie.current.getWorldPosition(Be),Oe.subVectors(Le,Be).normalize(),Fe.instance.lightDirection.copy(Oe),Fe.instance.update())}),reactExports.useEffect(()=>(updateMaterialsInScene(Re),()=>{requestAnimationFrame(()=>{updateMaterialsInScene(Re)})}),[Re]),reactExports.useEffect(()=>(Fe.attach(),Fe.instance&&Fe.instance.lights.forEach(Ne=>{Ne.color=Ue}),()=>{Fe.dispose()}),[Fe,Ue]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("group",{position:ye,ref:Ie})})}const BasicMesh=React$4.forwardRef(function(K,me){const ge=React$4.useMemo(()=>createStandardMaterial(K.props),[K.props.material,K.props.color,K.props.wireframe,K.props.opacity,K.props.flat_shading,K.props.side]),xe=React$4.useMemo(()=>{const ye=new BufferGeometry;return ye.setAttribute("position",new BufferAttribute(new Float32Array(K.props.vertices.buffer.slice(K.props.vertices.byteOffset,K.props.vertices.byteOffset+K.props.vertices.byteLength)),3)),ye.setIndex(new BufferAttribute(new Uint32Array(K.props.faces.buffer.slice(K.props.faces.byteOffset,K.props.faces.byteOffset+K.props.faces.byteLength)),1)),ye.computeVertexNormals(),ye.computeBoundingSphere(),ye},[K.props.vertices.buffer,K.props.faces.buffer]);return React$4.useEffect(()=>()=>{ge&&ge.dispose(),xe&&xe.dispose()},[ge,xe]),jsxRuntimeExports.jsx("mesh",{ref:me,geometry:xe,material:ge,castShadow:K.props.cast_shadow,receiveShadow:K.props.receive_shadow,children:jsxRuntimeExports.jsx(OutlinesIfHovered,{alwaysMounted:!0})})}),SkinnedMesh=React$4.forwardRef(function(K,me){const ge=React$4.useContext(ViewerContext),xe=React$4.useMemo(()=>createStandardMaterial({material:"standard",color:[128,128,128],wireframe:!1,opacity:null,flat_shading:!1,side:"front"}),[]),ye=React$4.useRef(),{geometry:ve,skeleton:_e}=React$4.useMemo(()=>{const Ee=new BufferGeometry;Ee.setAttribute("position",new BufferAttribute(new Float32Array(K.props.vertices.buffer.slice(K.props.vertices.byteOffset,K.props.vertices.byteOffset+K.props.vertices.byteLength)),3)),Ee.setIndex(new BufferAttribute(new Uint32Array(K.props.faces.buffer.slice(K.props.faces.byteOffset,K.props.faces.byteOffset+K.props.faces.byteLength)),1)),Ee.computeVertexNormals(),Ee.computeBoundingSphere();const be=new Float32Array(K.props.bone_wxyzs.buffer.slice(K.props.bone_wxyzs.byteOffset,K.props.bone_wxyzs.byteOffset+K.props.bone_wxyzs.byteLength)),Ae=new Float32Array(K.props.bone_positions.buffer.slice(K.props.bone_positions.byteOffset,K.props.bone_positions.byteOffset+K.props.bone_positions.byteLength)),Se=[];ye.current=Se;for(let De=0;De<Ae.length/3;De++)Se.push(new Bone);const Ce=[],Te=new Quaternion;Se.forEach((De,Ie)=>{Te.set(be[Ie*4+1],be[Ie*4+2],be[Ie*4+3],be[Ie*4+0]);const Be=new Matrix4;Be.makeRotationFromQuaternion(Te),Be.setPosition(Ae[Ie*3+0],Ae[Ie*3+1],Ae[Ie*3+2]),Be.invert(),Ce.push(Be),De.setRotationFromQuaternion(Te),De.position.set(Ae[Ie*3+0],Ae[Ie*3+1],Ae[Ie*3+2])});const Re=new Skeleton(Se,Ce);return Ee.setAttribute("skinIndex",new BufferAttribute(new Uint16Array(K.props.skin_indices.buffer.slice(K.props.skin_indices.byteOffset,K.props.skin_indices.byteOffset+K.props.skin_indices.byteLength)),4)),Ee.setAttribute("skinWeight",new BufferAttribute(new Float32Array(K.props.skin_weights.buffer.slice(K.props.skin_weights.byteOffset,K.props.skin_weights.byteOffset+K.props.skin_weights.byteLength)),4)),Re.init(),{geometry:Ee,skeleton:Re}},[K.props.vertices.buffer,K.props.faces.buffer,K.props.skin_indices.buffer,K.props.skin_weights?.buffer,K.props.bone_wxyzs.buffer,K.props.bone_positions.buffer]);return React$4.useEffect(()=>{const Ee=be=>{const Ae=new DataTexture(Uint8Array.from(be===3?[0,128,255]:[0,64,128,192,255]),be,1,RedFormat);return Ae.needsUpdate=!0,Ae};if((K.props.material==="toon3"||K.props.material==="toon5")&&!(xe instanceof MeshToonMaterial)){const be=new MeshToonMaterial({gradientMap:Ee(K.props.material==="toon3"?3:5)});be.color.setHex(rgbToInt$1(K.props.color)),me&&typeof me!="function"&&me.current&&(me.current.material=be,xe.dispose())}else if(K.props.material==="standard"&&!(xe instanceof MeshStandardMaterial)){const be=new MeshStandardMaterial;be.color.setHex(rgbToInt$1(K.props.color)),me&&typeof me!="function"&&me.current&&(me.current.material=be,xe.dispose())}else"color"in xe&&xe.color instanceof Color$1&&xe.color.setHex(rgbToInt$1(K.props.color)),"wireframe"in xe&&(xe.wireframe=K.props.wireframe),"opacity"in xe&&(xe.opacity=K.props.opacity??1,xe.transparent=K.props.opacity!==null),"flatShading"in xe&&(xe.flatShading=K.props.flat_shading&&!K.props.wireframe,xe.needsUpdate=!0),"side"in xe&&(xe.side={front:FrontSide,back:BackSide,double:DoubleSide}[K.props.side]),xe instanceof MeshToonMaterial&&(K.props.material==="toon3"?xe.gradientMap=Ee(3):K.props.material==="toon5"&&(xe.gradientMap=Ee(5)),xe.needsUpdate=!0)},[xe,me,K.props.material,K.props.color,K.props.wireframe,K.props.opacity,K.props.flat_shading,K.props.side]),React$4.useEffect(()=>()=>{_e&&_e.dispose(),ve&&ve.dispose(),xe&&xe.dispose();const Ee=ge.skinnedMeshState.current[K.name];Ee.initialized=!1},[_e,ve,xe,K.name,ge.skinnedMeshState]),useFrame(()=>{const Ee=ge.nodeRefFromName.current[K.name];if(Ee===void 0)return;const be=ge.skinnedMeshState.current[K.name],Ae=ye.current;_e!==void 0&&Ae!==void 0&&(be.initialized||(Ae.forEach(Se=>{Ee.add(Se)}),be.initialized=!0),Ae.forEach((Se,Ce)=>{const Te=be.poses[Ce].wxyz,Re=be.poses[Ce].position;Se.quaternion.set(Te[1],Te[2],Te[3],Te[0]),Se.position.set(Re[0],Re[1],Re[2])}))}),jsxRuntimeExports.jsx("skinnedMesh",{ref:me,geometry:ve,material:xe,skeleton:_e,castShadow:K.props.cast_shadow,receiveShadow:K.props.receive_shadow,frustumCulled:!1,children:jsxRuntimeExports.jsx(OutlinesIfHovered,{alwaysMounted:!0})})});function E(fe,K,me){me[0]=fe[0]>K[0]?K[0]:fe[0],me[1]=fe[1]<K[1]?K[1]:fe[1],me[2]=fe[2]>K[2]?K[2]:fe[2],me[3]=fe[3]<K[3]?K[3]:fe[3],me[4]=fe[4]>K[4]?K[4]:fe[4],me[5]=fe[5]<K[5]?K[5]:fe[5]}function Z$1(fe,K,me){let ge=!1;const xe=fe[0]>K[0]?K[0]:fe[0],ye=fe[1]<K[1]?K[1]:fe[1],ve=fe[2]>K[2]?K[2]:fe[2],_e=fe[3]<K[3]?K[3]:fe[3],Ee=fe[4]>K[4]?K[4]:fe[4],be=fe[5]<K[5]?K[5]:fe[5];return me[0]>xe&&(me[0]=xe,ge=!0),me[1]<ye&&(me[1]=ye,ge=!0),me[2]>ve&&(me[2]=ve,ge=!0),me[3]<_e&&(me[3]=_e,ge=!0),me[4]>Ee&&(me[4]=Ee,ge=!0),me[5]<be&&(me[5]=be,ge=!0),ge}function g$1(fe,K){return!(K[0]>fe[0]||K[1]<fe[1]||K[2]>fe[2]||K[3]<fe[3]||K[4]>fe[4]||K[5]<fe[5])}function v$1(fe,K){let me=!1;return K[0]>fe[0]&&(K[0]=fe[0],me=!0),K[1]<fe[1]&&(K[1]=fe[1],me=!0),K[2]>fe[2]&&(K[2]=fe[2],me=!0),K[3]<fe[3]&&(K[3]=fe[3],me=!0),K[4]>fe[4]&&(K[4]=fe[4],me=!0),K[5]<fe[5]&&(K[5]=fe[5],me=!0),me}function w$2(fe,K){fe[0]-=K,fe[1]+=K,fe[2]-=K,fe[3]+=K,fe[4]-=K,fe[5]+=K}function S$2(fe){const K=fe[1]-fe[0],me=fe[3]-fe[2],ge=fe[5]-fe[4];return 2*(K*me+me*ge+ge*K)}function _$1(fe,K){const me=fe[0]>K[0]?K[0]:fe[0],ge=fe[1]<K[1]?K[1]:fe[1],xe=fe[2]>K[2]?K[2]:fe[2],ye=fe[3]<K[3]?K[3]:fe[3],ve=fe[4]>K[4]?K[4]:fe[4],_e=fe[5]<K[5]?K[5]:fe[5],Ee=ge-me,be=ye-xe,Ae=_e-ve;return 2*(Ee*be+be*Ae+Ae*Ee)}function H$1(fe){const K=fe[1]-fe[0],me=fe[3]-fe[2],ge=fe[5]-fe[4];return K>me?K>ge?0:2:me>ge?1:2}function D$1(fe,K){const me=fe[0]-K[0],ge=K[0]-fe[1];let xe=me>ge?me:ge;xe<0&&(xe=0);const ye=fe[2]-K[1],ve=K[1]-fe[3];let _e=ye>ve?ye:ve;_e<0&&(_e=0);const Ee=fe[4]-K[2],be=K[2]-fe[5];let Ae=Ee>be?Ee:be;return Ae<0&&(Ae=0),xe*xe+_e*_e+Ae*Ae}function Y$1(fe,K){let me,ge,xe,ye,ve,_e;const Ee=fe[0]-K[0],be=K[0]-fe[1];Ee>be?(me=Ee,ge=be):(me=be,ge=Ee),me<0&&(me=0);const Ae=fe[2]-K[1],Se=K[1]-fe[3];Ae>Se?(xe=Ae,ye=Se):(xe=Se,ye=Ae),xe<0&&(xe=0);const Ce=fe[4]-K[2],Te=K[2]-fe[5];return Ce>Te?(ve=Ce,_e=Te):(ve=Te,_e=Ce),ve<0&&(ve=0),{min:me*me+xe*xe+ve*ve,max:ge*ge+ye*ye+_e*_e}}let G$1=class{constructor(){this.array=[]}clear(){this.array=[]}push(K){const me=this.array,ge=K.inheritedCost,xe=me.length>6?me.length-6:0;let ye;for(ye=me.length-1;ye>=xe&&!(ge<=me[ye].inheritedCost);ye--);ye>me.length-7&&me.splice(ye+1,0,K)}pop(){return this.array.pop()}},$$1=class{constructor(K=!1){this.root=null,this._sortedList=new G$1,this.count=0,this.highPrecision=K,this._typeArray=K?Float64Array:Float32Array}createFromArray(K,me,ge,xe=0){const ye=me.length,ve=this._typeArray;ve!==(me[0].BYTES_PER_ELEMENT===4?Float32Array:Float64Array)&&console.warn("Different precision.");const _e=new ve(6);let Ee,be;this.root=Ae(0,ye,null);function Ae(Re,De,Ie){if(De===1){const Fe=me[Re];xe>0&&w$2(Fe,xe);const Ue={box:Fe,object:K[Re],parent:Ie};return ge&&ge(Ue),Ue}const Be=Se(Re,De);Ce();let Le=Te(Re,De);(Le===Re||Le===Re+De)&&(Le=Re+(De>>1));const Oe={box:Be,parent:Ie};return Oe.left=Ae(Re,Le-Re,Oe),Oe.right=Ae(Le,De-Le+Re,Oe),Oe}function Se(Re,De){const Ie=new ve(6),Be=Re+De;Ie[0]=1/0,Ie[1]=-1/0,Ie[2]=1/0,Ie[3]=-1/0,Ie[4]=1/0,Ie[5]=-1/0,_e[0]=1/0,_e[1]=-1/0,_e[2]=1/0,_e[3]=-1/0,_e[4]=1/0,_e[5]=-1/0;for(let Le=Re;Le<Be;Le++){const Oe=me[Le],Fe=Oe[0],Ue=Oe[1],Ne=Oe[2],He=Oe[3],ze=Oe[4],je=Oe[5];Ie[0]>Fe&&(Ie[0]=Fe),Ie[1]<Ue&&(Ie[1]=Ue),Ie[2]>Ne&&(Ie[2]=Ne),Ie[3]<He&&(Ie[3]=He),Ie[4]>ze&&(Ie[4]=ze),Ie[5]<je&&(Ie[5]=je);const Ge=(Ue+Fe)*.5,Xe=(He+Ne)*.5,qe=(je+ze)*.5;_e[0]>Ge&&(_e[0]=Ge),_e[1]<Ge&&(_e[1]=Ge),_e[2]>Xe&&(_e[2]=Xe),_e[3]<Xe&&(_e[3]=Xe),_e[4]>qe&&(_e[4]=qe),_e[5]<qe&&(_e[5]=qe)}return Ie[0]-=xe,Ie[1]+=xe,Ie[2]-=xe,Ie[3]+=xe,Ie[4]-=xe,Ie[5]+=xe,Ie}function Ce(){Ee=H$1(_e)*2,be=(_e[Ee]+_e[Ee+1])*.5}function Te(Re,De){let Ie=Re,Be=Re+De-1;for(;Ie<=Be;){const Le=me[Ie];if((Le[Ee+1]+Le[Ee])*.5>=be)for(;;){const Oe=me[Be];if((Oe[Ee+1]+Oe[Ee])*.5<be){const Fe=K[Ie];K[Ie]=K[Be],K[Be]=Fe;const Ue=me[Ie];me[Ie]=me[Be],me[Be]=Ue,Be--;break}if(Be--,Be<=Ie)return Ie}Ie++}return Ie}}insert(K,me,ge){ge>0&&w$2(me,ge);const xe=this.createLeafNode(K,me);return this.root===null?this.root=xe:this.insertLeaf(xe),this.count++,xe}insertRange(K,me,ge,xe){console.warn("Method not optimized yet. It just calls 'insert' N times.");const ye=K.length,ve=ge>0?ge:ge?null:0;for(let _e=0;_e<ye;_e++){const Ee=this.insert(K[_e],me[_e],ve??ge[_e]);xe&&xe(Ee)}}move(K,me){if(!K.parent||g$1(K.box,K.parent.box)){me>0&&w$2(K.box,me);return}me>0&&w$2(K.box,me);const ge=this.delete(K);this.insertLeaf(K,ge),this.count++}delete(K){const me=K.parent;if(me===null)return this.root=null,null;const ge=me.parent,xe=me.left===K?me.right:me.left;return xe.parent=ge,K.parent=null,ge===null?(this.root=xe,me):(ge.left===me?ge.left=xe:ge.right=xe,this.refit(ge),this.count--,me)}clear(){this.root=null}insertLeaf(K,me){const ge=this.findBestSibling(K.box),xe=ge.parent;me===void 0?me=this.createInternalNode(xe,ge,K):(me.parent=xe,me.left=ge,me.right=K),ge.parent=me,K.parent=me,xe===null?this.root=me:xe.left===ge?xe.left=me:xe.right=me,this.refitAndRotate(K,ge)}createLeafNode(K,me){return{box:me,object:K,parent:null}}createInternalNode(K,me,ge){return{parent:K,left:me,right:ge,box:new this._typeArray(6)}}findBestSibling(K){const me=this.root;let ge=me,xe=_$1(K,me.box);const ye=S$2(K);if(me.object!==void 0)return me;const ve=this._sortedList;ve.clear();let _e={node:me,inheritedCost:xe-S$2(me.box)};do{const{node:Ee,inheritedCost:be}=_e;if(ye+be>=xe)break;const Ae=Ee.left,Se=Ee.right,Ce=_$1(K,Ae.box)+be,Te=Ce-S$2(Ae.box),Re=_$1(K,Se.box)+be,De=Re-S$2(Se.box);if(Ce>Re?xe>Re&&(ge=Se,xe=Re):xe>Ce&&(ge=Ae,xe=Ce),De>Te){if(ye+Te>=xe||(Ae.object===void 0&&ve.push({node:Ae,inheritedCost:Te}),ye+De>=xe))continue;Se.object===void 0&&ve.push({node:Se,inheritedCost:De})}else{if(ye+De>=xe||(Se.object===void 0&&ve.push({node:Se,inheritedCost:De}),ye+Te>=xe))continue;Ae.object===void 0&&ve.push({node:Ae,inheritedCost:Te})}}while(_e=ve.pop());return ge}refit(K){for(E(K.left.box,K.right.box,K.box);K=K.parent;)if(!Z$1(K.left.box,K.right.box,K.box))return}refitAndRotate(K,me){const ge=K.box;K=K.parent;const xe=K.box;for(E(ge,me.box,xe);K=K.parent;){const ye=K.box;if(!v$1(ge,ye))return;const ve=K.left,_e=K.right,Ee=ve.box,be=_e.box;let Ae=null,Se=null,Ce=0;if(_e.object===void 0){const Te=_e.left,Re=_e.right,De=S$2(_e.box),Ie=De-_$1(Ee,Te.box),Be=De-_$1(Ee,Re.box);Ie>Be?Ie>0&&(Ae=ve,Se=Re,Ce=Ie):Be>0&&(Ae=ve,Se=Te,Ce=Be)}if(ve.object===void 0){const Te=ve.left,Re=ve.right,De=S$2(ve.box),Ie=De-_$1(be,Te.box),Be=De-_$1(be,Re.box);Ie>Be?Ie>Ce&&(Ae=_e,Se=Re):Be>Ce&&(Ae=_e,Se=Te)}Ae!==null&&this.swap(Ae,Se)}}swap(K,me){const ge=K.parent,xe=me.parent,ye=xe.box;ge.left===K?ge.left=me:ge.right=me,xe.left===me?xe.left=K:xe.right=K,K.parent=xe,me.parent=ge,E(xe.left.box,xe.right.box,ye)}};const X$2=0,U$1=1;let V$1=class{constructor(K,me){this.coordinateSystem=me,this.array=K?new Float64Array(24):new Float32Array(24)}setFromProjectionMatrix(K){if(this.updatePlane(0,K[3]+K[0],K[7]+K[4],K[11]+K[8],K[15]+K[12]),this.updatePlane(1,K[3]-K[0],K[7]-K[4],K[11]-K[8],K[15]-K[12]),this.updatePlane(2,K[3]-K[1],K[7]-K[5],K[11]-K[9],K[15]-K[13]),this.updatePlane(3,K[3]+K[1],K[7]+K[5],K[11]+K[9],K[15]+K[13]),this.updatePlane(4,K[3]-K[2],K[7]-K[6],K[11]-K[10],K[15]-K[14]),this.coordinateSystem===X$2)this.updatePlane(5,K[3]+K[2],K[7]+K[6],K[11]+K[10],K[15]+K[14]);else if(this.coordinateSystem===U$1)this.updatePlane(5,K[2],K[6],K[10],K[14]);else throw new Error("Invalid coordinate system: "+this.coordinateSystem);return this}updatePlane(K,me,ge,xe,ye){const ve=this.array,_e=K*4,Ee=Math.sqrt(me*me+ge*ge+xe*xe);ve[_e+0]=me/Ee,ve[_e+1]=ge/Ee,ve[_e+2]=xe/Ee,ve[_e+3]=ye/Ee}intersectsBoxMask(K,me){const ge=this.array;let xe,ye,ve,_e,Ee,be;for(let Ae=0;Ae<6;Ae++){if(!(me&32>>Ae))continue;const Se=Ae*4,Ce=ge[Se+0],Te=ge[Se+1],Re=ge[Se+2],De=ge[Se+3];if(Ce>0?(xe=K[1],_e=K[0]):(xe=K[0],_e=K[1]),Te>0?(ye=K[3],Ee=K[2]):(ye=K[2],Ee=K[3]),Re>0?(ve=K[5],be=K[4]):(ve=K[4],be=K[5]),Ce*xe+Te*ye+Re*ve<-De)return-1;Ce*_e+Te*Ee+Re*be>-De&&(me^=32>>Ae)}return me}isIntersected(K,me){const ge=this.array;for(let xe=0;xe<6;xe++){if(!(me&32>>xe))continue;const ye=xe*4,ve=ge[ye+0],_e=ge[ye+1],Ee=ge[ye+2],be=ge[ye+3],Ae=ve>0?K[1]:K[0],Se=_e>0?K[3]:K[2],Ce=Ee>0?K[5]:K[4];if(ve*Ae+_e*Se+Ee*Ce<-be)return!1}return!0}isIntersectedMargin(K,me,ge){if(me===0)return!0;const xe=this.array;for(let ye=0;ye<6;ye++){if(!(me&32>>ye))continue;const ve=ye*4,_e=xe[ve+0],Ee=xe[ve+1],be=xe[ve+2],Ae=xe[ve+3],Se=_e>0?K[1]-ge:K[0]+ge,Ce=Ee>0?K[3]-ge:K[2]+ge,Te=be>0?K[5]-ge:K[4]+ge;if(_e*Se+Ee*Ce+be*Te<-Ae)return!1}return!0}};function q$1(fe,K,me,ge,xe,ye){let ve=ge[0],_e=K[0],Ee=me[0],be=(fe[ve]-_e)*Ee,Ae=(fe[ve^1]-_e)*Ee,Se=be>0?be:0,Ce=Ae<1/0?Ae:1/0;return ve=ge[1],_e=K[1],Ee=me[1],be=(fe[ve+2]-_e)*Ee,be>Ce||(Ae=(fe[ve^3]-_e)*Ee,Se>Ae)||(Se=be>Se?be:Se,Ce=Ae<Ce?Ae:Ce,ve=ge[2],_e=K[2],Ee=me[2],be=(fe[ve+4]-_e)*Ee,be>Ce)||(Ae=(fe[ve^5]-_e)*Ee,Se>Ae)?!1:(Se=be>Se?be:Se,Ce=Ae<Ce?Ae:Ce,Se<=ye&&Ce>=xe)}function O$1(fe,K){return fe[1]>=K[0]&&K[1]>=fe[0]&&fe[3]>=K[2]&&K[3]>=fe[2]&&fe[5]>=K[4]&&K[5]>=fe[4]}function W$1(fe,K,me){return D$1(me,fe)<=K*K}class k{constructor(K,me=X$2){this._sign=new Uint8Array(3),this.builder=K;const ge=K.highPrecision;this.frustum=new V$1(ge,me),this._dirInv=ge?new Float64Array(3):new Float32Array(3)}get root(){return this.builder.root}createFromArray(K,me,ge,xe){K?.length>0&&this.builder.createFromArray(K,me,ge,xe)}insert(K,me,ge){return this.builder.insert(K,me,ge)}insertRange(K,me,ge,xe){K?.length>0&&this.builder.insertRange(K,me,ge,xe)}move(K,me){this.builder.move(K,me)}delete(K){return this.builder.delete(K)}clear(){this.builder.clear()}traverse(K){if(this.root===null)return;me(this.root,0);function me(ge,xe){if(ge.object!==void 0){K(ge,xe);return}K(ge,xe)||(me(ge.left,xe+1),me(ge.right,xe+1))}}intersectsRay(K,me,ge,xe=0,ye=1/0){if(this.root===null)return!1;const ve=this._dirInv,_e=this._sign;return ve[0]=1/K[0],ve[1]=1/K[1],ve[2]=1/K[2],_e[0]=ve[0]<0?1:0,_e[1]=ve[1]<0?1:0,_e[2]=ve[2]<0?1:0,Ee(this.root);function Ee(be){return q$1(be.box,me,ve,_e,xe,ye)?be.object!==void 0?ge(be.object):Ee(be.left)||Ee(be.right):!1}}intersectsBox(K,me){if(this.root===null)return!1;return ge(this.root);function ge(xe){return O$1(K,xe.box)?xe.object!==void 0?me(xe.object):ge(xe.left)||ge(xe.right):!1}}intersectsSphere(K,me,ge){if(this.root===null)return!1;return xe(this.root);function xe(ye){return W$1(K,me,ye.box)?ye.object!==void 0?ge(ye.object):xe(ye.left)||xe(ye.right):!1}}isNodeIntersected(K,me){const ge=K.box;let xe;for(;xe=K.parent;){const ve=xe.left===K?xe.right:xe.left;if(ye(ve))return!0;K=xe}return!1;function ye(ve){return O$1(ge,ve.box)?ve.object!==void 0?me(ve.object):ye(ve.left)||ye(ve.right):!1}}rayIntersections(K,me,ge,xe=0,ye=1/0){if(this.root===null)return;const ve=this._dirInv,_e=this._sign;ve[0]=1/K[0],ve[1]=1/K[1],ve[2]=1/K[2],_e[0]=ve[0]<0?1:0,_e[1]=ve[1]<0?1:0,_e[2]=ve[2]<0?1:0,Ee(this.root);function Ee(be){if(q$1(be.box,me,ve,_e,xe,ye)){if(be.object!==void 0){ge(be.object);return}Ee(be.left),Ee(be.right)}}}frustumCulling(K,me){if(this.root===null)return;const ge=this.frustum.setFromProjectionMatrix(K);xe(this.root,63);function xe(ve,_e){if(ve.object!==void 0){ge.isIntersected(ve.box,_e)&&me(ve,ge,_e);return}if(_e=ge.intersectsBoxMask(ve.box,_e),!(_e<0)){if(_e===0){ye(ve.left),ye(ve.right);return}xe(ve.left,_e),xe(ve.right,_e)}}function ye(ve){if(ve.object!==void 0){me(ve,ge,0);return}ye(ve.left),ye(ve.right)}}frustumCullingLOD(K,me,ge,xe){if(this.root===null)return;const ye=this.frustum.setFromProjectionMatrix(K);ve(this.root,63,null);function ve(be,Ae,Se){const Ce=be.box;if(Se===null&&(Se=Ee(Ce)),be.object!==void 0){ye.isIntersected(Ce,Ae)&&xe(be,Se,ye,Ae);return}if(Ae=ye.intersectsBoxMask(Ce,Ae),!(Ae<0)){if(Ae===0){_e(be.left,Se),_e(be.right,Se);return}ve(be.left,Ae,Se),ve(be.right,Ae,Se)}}function _e(be,Ae){if(Ae===null&&(Ae=Ee(be.box)),be.object!==void 0){xe(be,Ae,ye,0);return}_e(be.left,Ae),_e(be.right,Ae)}function Ee(be){const{min:Ae,max:Se}=Y$1(be,me);for(let Ce=ge.length-1;Ce>0;Ce--)if(Se>=ge[Ce])return Ae>=ge[Ce]?Ce:null;return 0}}closestPointToPoint(K,me){if(this.root===null)return;let ge=1/0;return xe(this.root),Math.sqrt(ge);function xe(ye){if(ye.object!==void 0){if(me){const Ee=me(ye.object)??D$1(ye.box,K);Ee<ge&&(ge=Ee)}else ge=D$1(ye.box,K);return}const ve=D$1(ye.left.box,K),_e=D$1(ye.right.box,K);ve<_e?ve<ge&&(xe(ye.left),_e<ge&&xe(ye.right)):_e<ge&&(xe(ye.right),ve<ge&&xe(ye.left))}}}function m$1(fe,K){return K[0]=fe.x,K[1]=fe.y,K[2]=fe.z,K}function B$1(fe,K){const me=fe.min,ge=fe.max;return K[0]=me.x,K[1]=ge.x,K[2]=me.y,K[3]=ge.y,K[4]=me.z,K[5]=ge.z,K}class St{constructor(K,me,ge){this.isInstanceEntity=!0,this.position=new Vector3,this.scale=new Vector3(1,1,1),this.id=me,this.owner=K;const xe=this.quaternion=new Quaternion;if(ge){const ye=this.rotation=new Euler;ye._onChange(()=>xe.setFromEuler(ye,!1)),xe._onChange(()=>ye.setFromQuaternion(xe,void 0,!1))}}get visible(){return this.owner.getVisibilityAt(this.id)}set visible(K){this.owner.setVisibilityAt(this.id,K)}get active(){return this.owner.getActiveAt(this.id)}set active(K){this.owner.setActiveAt(this.id,K)}get color(){return this.owner.getColorAt(this.id)}set color(K){this.owner.setColorAt(this.id,K)}get opacity(){return this.owner.getOpacityAt(this.id)}set opacity(K){this.owner.setOpacityAt(this.id,K)}get morph(){return this.owner.getMorphAt(this.id)}set morph(K){this.owner.setMorphAt(this.id,K)}get matrix(){return this.owner.getMatrixAt(this.id)}get matrixWorld(){return this.matrix.premultiply(this.owner.matrixWorld)}updateMatrix(){var K;const me=this.owner,ge=this.position,xe=this.quaternion,ye=this.scale,ve=me.matricesTexture._data,_e=this.id,Ee=_e*16,be=xe._x,Ae=xe._y,Se=xe._z,Ce=xe._w,Te=be+be,Re=Ae+Ae,De=Se+Se,Ie=be*Te,Be=be*Re,Le=be*De,Oe=Ae*Re,Fe=Ae*De,Ue=Se*De,Ne=Ce*Te,He=Ce*Re,ze=Ce*De,je=ye.x,Ge=ye.y,Xe=ye.z;ve[Ee+0]=(1-(Oe+Ue))*je,ve[Ee+1]=(Be+ze)*je,ve[Ee+2]=(Le-He)*je,ve[Ee+3]=0,ve[Ee+4]=(Be-ze)*Ge,ve[Ee+5]=(1-(Ie+Ue))*Ge,ve[Ee+6]=(Fe+Ne)*Ge,ve[Ee+7]=0,ve[Ee+8]=(Le+He)*Xe,ve[Ee+9]=(Fe-Ne)*Xe,ve[Ee+10]=(1-(Ie+Oe))*Xe,ve[Ee+11]=0,ve[Ee+12]=ge.x,ve[Ee+13]=ge.y,ve[Ee+14]=ge.z,ve[Ee+15]=1,me.matricesTexture.enqueueUpdate(_e),(K=me.bvh)==null||K.move(_e)}updateMatrixPosition(){var K;const me=this.owner,ge=this.position,xe=me.matricesTexture._data,ye=this.id,ve=ye*16;xe[ve+12]=ge.x,xe[ve+13]=ge.y,xe[ve+14]=ge.z,me.matricesTexture.enqueueUpdate(ye),(K=me.bvh)==null||K.move(ye)}getUniform(K,me){return this.owner.getUniformAt(this.id,K,me)}updateBones(K=!0,me){this.owner.setBonesAt(this.id,K,me)}setUniform(K,me){this.owner.setUniformAt(this.id,K,me)}copyTo(K){K.position.copy(this.position),K.scale.copy(this.scale),K.quaternion.copy(this.quaternion),this.rotation&&K.rotation.copy(this.rotation)}applyMatrix4(K){return this.matrix.premultiply(K).decompose(this.position,this.quaternion,this.scale),this}applyQuaternion(K){return this.quaternion.premultiply(K),this}rotateOnAxis(K,me){return X$1.setFromAxisAngle(K,me),this.quaternion.multiply(X$1),this}rotateOnWorldAxis(K,me){return X$1.setFromAxisAngle(K,me),this.quaternion.premultiply(X$1),this}rotateX(K){return this.rotateOnAxis(xt,K)}rotateY(K){return this.rotateOnAxis(mt,K)}rotateZ(K){return this.rotateOnAxis(_t,K)}translateOnAxis(K,me){return ft.copy(K).applyQuaternion(this.quaternion),this.position.add(ft.multiplyScalar(me)),this}translateX(K){return this.translateOnAxis(xt,K)}translateY(K){return this.translateOnAxis(mt,K)}translateZ(K){return this.translateOnAxis(_t,K)}}const X$1=new Quaternion,ft=new Vector3,xt=new Vector3(1,0,0),mt=new Vector3(0,1,0),_t=new Vector3(0,0,1);class Zt{constructor(K,me=0,ge=!1,xe=!0){this.nodesMap=new Map,this.LODsMap=new Map,this._geoBoundingSphere=null,this._sphereTarget=null,this.target=K,this.accurateCulling=xe,this._margin=me;const ye=K._geometry;if(ye.boundingBox||ye.computeBoundingBox(),this.geoBoundingBox=ye.boundingBox,ge){ye.boundingSphere||ye.computeBoundingSphere();const ve=ye.boundingSphere.center;ve.x===0&&ve.y===0&&ve.z===0?(this._geoBoundingSphere=ye.boundingSphere,this._sphereTarget={centerX:0,centerY:0,centerZ:0,maxScale:0}):(console.warn('"getBoxFromSphere" is ignored because geometry is not centered.'),ge=!1)}this.bvh=new k(new $$1,X$2),this._origin=new Float32Array(3),this._dir=new Float32Array(3),this._cameraPos=new Float32Array(3),this._getBoxFromSphere=ge}create(){const K=this.target.instancesCount,me=this.target._instancesArrayCount,ge=new Array(K),xe=new Uint32Array(K);let ye=0;this.clear();for(let ve=0;ve<me;ve++)this.target.getActiveAt(ve)&&(ge[ye]=this.getBox(ve,new Float32Array(6)),xe[ye]=ve,ye++);this.bvh.createFromArray(xe,ge,ve=>{this.nodesMap.set(ve.object,ve)},this._margin)}insert(K){const me=this.bvh.insert(K,this.getBox(K,new Float32Array(6)),this._margin);this.nodesMap.set(K,me)}insertRange(K){const me=K.length,ge=new Array(me);for(let xe=0;xe<me;xe++)ge[xe]=this.getBox(K[xe],new Float32Array(6));this.bvh.insertRange(K,ge,this._margin,xe=>{this.nodesMap.set(xe.object,xe)})}move(K){const me=this.nodesMap.get(K);me&&(this.getBox(K,me.box),this.bvh.move(me,this._margin))}delete(K){const me=this.nodesMap.get(K);me&&(this.bvh.delete(me),this.nodesMap.delete(K))}clear(){this.bvh.clear(),this.nodesMap=new Map}frustumCulling(K,me){this._margin>0&&this.accurateCulling?this.bvh.frustumCulling(K.elements,(ge,xe,ye)=>{xe.isIntersectedMargin(ge.box,ye,this._margin)&&me(ge)}):this.bvh.frustumCulling(K.elements,me)}frustumCullingLOD(K,me,ge,xe){this.LODsMap.has(ge)||this.LODsMap.set(ge,new Float32Array(ge.length));const ye=this.LODsMap.get(ge);for(let _e=0;_e<ge.length;_e++)ye[_e]=ge[_e].distance;const ve=this._cameraPos;ve[0]=me.x,ve[1]=me.y,ve[2]=me.z,this._margin>0&&this.accurateCulling?this.bvh.frustumCullingLOD(K.elements,ve,ye,(_e,Ee,be,Ae)=>{be.isIntersectedMargin(_e.box,Ae,this._margin)&&xe(_e,Ee)}):this.bvh.frustumCullingLOD(K.elements,ve,ye,xe)}raycast(K,me){const ge=K.ray,xe=this._origin,ye=this._dir;m$1(ge.origin,xe),m$1(ge.direction,ye),this.bvh.rayIntersections(ye,xe,me,K.near,K.far)}intersectBox(K,me){this._boxArray||(this._boxArray=new Float32Array(6));const ge=this._boxArray;return B$1(K,ge),this.bvh.intersectsBox(ge,me)}getBox(K,me){if(this._getBoxFromSphere){const ge=this.target.matricesTexture._data,{centerX:xe,centerY:ye,centerZ:ve,maxScale:_e}=this.getSphereFromMatrix_centeredGeometry(K,ge,this._sphereTarget),Ee=this._geoBoundingSphere.radius*_e;me[0]=xe-Ee,me[1]=xe+Ee,me[2]=ye-Ee,me[3]=ye+Ee,me[4]=ve-Ee,me[5]=ve+Ee}else gt$1.copy(this.geoBoundingBox).applyMatrix4(this.target.getMatrixAt(K)),B$1(gt$1,me);return me}getSphereFromMatrix_centeredGeometry(K,me,ge){const xe=K*16,ye=me[xe+0],ve=me[xe+1],_e=me[xe+2],Ee=me[xe+4],be=me[xe+5],Ae=me[xe+6],Se=me[xe+8],Ce=me[xe+9],Te=me[xe+10],Re=ye*ye+ve*ve+_e*_e,De=Ee*Ee+be*be+Ae*Ae,Ie=Se*Se+Ce*Ce+Te*Te;return ge.maxScale=Math.sqrt(Math.max(Re,De,Ie)),ge.centerX=me[xe+12],ge.centerY=me[xe+13],ge.centerZ=me[xe+14],ge}}const gt$1=new Box3;class Qt extends GLBufferAttribute{constructor(K,me,ge,xe,ye,ve=1){const _e=K.createBuffer();super(_e,me,ge,xe,ye.length/ge),this.isGLInstancedBufferAttribute=!0,this._needsUpdate=!1,this.isInstancedBufferAttribute=!0,this.meshPerAttribute=ve,this.array=ye,this._cacheArray=ye,K.bindBuffer(K.ARRAY_BUFFER,_e),K.bufferData(K.ARRAY_BUFFER,ye,K.DYNAMIC_DRAW)}update(K,me){if(!this._needsUpdate||me===0)return;const ge=K.getContext();ge.bindBuffer(ge.ARRAY_BUFFER,this.buffer),this.array===this._cacheArray?ge.bufferSubData(ge.ARRAY_BUFFER,0,this.array,0,me):(ge.bufferData(ge.ARRAY_BUFFER,this.array,ge.DYNAMIC_DRAW),this._cacheArray=this.array),this._needsUpdate=!1}clone(){return this}}function Mt(fe,K){return Math.max(K,Math.ceil(Math.sqrt(fe/K))*K)}function Jt(fe,K,me,ge){K===3&&(console.warn('"channels" cannot be 3. Set to 4. More info: https://github.com/mrdoob/three.js/pull/23228'),K=4);const xe=Mt(ge,me),ye=new fe(xe*xe*K),ve=fe.name.includes("Float"),_e=fe.name.includes("Uint"),Ee=ve?FloatType:_e?UnsignedIntType:IntType;let be;switch(K){case 1:be=ve?RedFormat:RedIntegerFormat;break;case 2:be=ve?RGFormat:RGIntegerFormat;break;case 4:be=ve?RGBAFormat:RGBAIntegerFormat;break}return{array:ye,size:xe,type:Ee,format:be}}let Q$1=class extends DataTexture{constructor(K,me,ge,xe,ye,ve){const{array:_e,format:Ee,size:be,type:Ae}=Jt(K,me,ge,xe);super(_e,be,be,Ee,Ae),this.partialUpdate=!0,this.maxUpdateCalls=1/0,this._utils=null,this._needsUpdate=!1,this._lastWidth=null,this._data=_e,this._channels=me,this._pixelsPerInstance=ge,this._stride=ge*me,this._rowToUpdate=new Array(be),this._uniformMap=ye,this._fetchUniformsInFragmentShader=ve,this.needsUpdate=!0}resize(K){const me=Mt(K,this._pixelsPerInstance);if(me===this.image.width)return;const ge=this._data,xe=this._channels;this._rowToUpdate.length=me;const ye=ge.constructor,ve=new ye(me*me*xe),_e=Math.min(ge.length,ve.length);ve.set(new ye(ge.buffer,0,_e)),this.dispose(),this.image={data:ve,height:me,width:me},this._data=ve}enqueueUpdate(K){if(this._needsUpdate=!0,!this.partialUpdate)return;const me=this.image.width/this._pixelsPerInstance,ge=Math.floor(K/me);this._rowToUpdate[ge]=!0}update(K){const me=K.properties.get(this),ge=this.version>0&&me.__version!==this.version,xe=this._lastWidth!==null&&this._lastWidth!==this.image.width;if(!this._needsUpdate||!me.__webglTexture||ge||xe){this._lastWidth=this.image.width,this._needsUpdate=!1;return}if(this._needsUpdate=!1,!this.partialUpdate){this.needsUpdate=!0;return}const ye=this.getUpdateRowsInfo();ye.length!==0&&(ye.length>this.maxUpdateCalls?this.needsUpdate=!0:this.updateRows(me,K,ye),this._rowToUpdate.fill(!1))}getUpdateRowsInfo(){const K=this._rowToUpdate,me=[];for(let ge=0,xe=K.length;ge<xe;ge++)if(K[ge]){const ye=ge;for(;ge<xe&&K[ge];ge++);me.push({row:ye,count:ge-ye})}return me}updateRows(K,me,ge){const xe=me.state,ye=me.getContext();this._utils||(this._utils=new WebGLUtils(ye,me.extensions));const ve=this._utils.convert(this.format),_e=this._utils.convert(this.type),{data:Ee,width:be}=this.image,Ae=this._channels;xe.bindTexture(ye.TEXTURE_2D,K.__webglTexture);const Se=ColorManagement.getPrimaries(ColorManagement.workingColorSpace),Ce=this.colorSpace===NoColorSpace?null:ColorManagement.getPrimaries(this.colorSpace),Te=this.colorSpace===NoColorSpace||Se===Ce?ye.NONE:ye.BROWSER_DEFAULT_WEBGL;ye.pixelStorei(ye.UNPACK_FLIP_Y_WEBGL,this.flipY),ye.pixelStorei(ye.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),ye.pixelStorei(ye.UNPACK_ALIGNMENT,this.unpackAlignment),ye.pixelStorei(ye.UNPACK_COLORSPACE_CONVERSION_WEBGL,Te);for(const{count:Re,row:De}of ge)ye.texSubImage2D(ye.TEXTURE_2D,0,0,De,be,Re,ve,_e,Ee,De*be*Ae);this.onUpdate&&this.onUpdate()}setUniformAt(K,me,ge){const{offset:xe,size:ye}=this._uniformMap.get(me),ve=this._stride;ye===1?this._data[K*ve+xe]=ge:ge.toArray(this._data,K*ve+xe)}getUniformAt(K,me,ge){const{offset:xe,size:ye}=this._uniformMap.get(me),ve=this._stride;return ye===1?this._data[K*ve+xe]:ge.fromArray(this._data,K*ve+xe)}getUniformsGLSL(K,me,ge){const xe=this.getUniformsVertexGLSL(K,me,ge),ye=this.getUniformsFragmentGLSL(K,me,ge);return{vertex:xe,fragment:ye}}getUniformsVertexGLSL(K,me,ge){if(this._fetchUniformsInFragmentShader)return`
        flat varying ${ge} ez_v${me}; 
        void main() {
          ez_v${me} = ${me};`;const xe=this.texelsFetchGLSL(K,me),ye=this.getFromTexelsGLSL(),{assignVarying:ve,declareVarying:_e}=this.getVarying();return`
      uniform highp sampler2D ${K};  
      ${_e}
      void main() {
        ${xe}
        ${ye}
        ${ve}`}getUniformsFragmentGLSL(K,me,ge){if(!this._fetchUniformsInFragmentShader){const{declareVarying:ve,getVarying:_e}=this.getVarying();return`
      ${ve}
      void main() {
        ${_e}`}const xe=this.texelsFetchGLSL(K,`ez_v${me}`),ye=this.getFromTexelsGLSL();return`
      uniform highp sampler2D ${K};  
      flat varying ${ge} ez_v${me};
      void main() {
        ${xe}
        ${ye}`}texelsFetchGLSL(K,me){const ge=this._pixelsPerInstance;let xe=`
      int size = textureSize(${K}, 0).x;
      int j = int(${me}) * ${ge};
      int x = j % size;
      int y = j / size;
    `;for(let ye=0;ye<ge;ye++)xe+=`vec4 ez_texel${ye} = texelFetch(${K}, ivec2(x + ${ye}, y), 0);
`;return xe}getFromTexelsGLSL(){const K=this._uniformMap;let me="";for(const[ge,{type:xe,offset:ye,size:ve}]of K){const _e=Math.floor(ye/this._channels);if(xe==="mat3")me+=`mat3 ${ge} = mat3(ez_texel${_e}.rgb, vec3(ez_texel${_e}.a, ez_texel${_e+1}.rg), vec3(ez_texel${_e+1}.ba, ez_texel${_e+2}.r));
`;else if(xe==="mat4")me+=`mat4 ${ge} = mat4(ez_texel${_e}, ez_texel${_e+1}, ez_texel${_e+2}, ez_texel${_e+3});
`;else{const Ee=this.getUniformComponents(ye,ve);me+=`${xe} ${ge} = ez_texel${_e}.${Ee};
`}}return me}getVarying(){const K=this._uniformMap;let me="",ge="",xe="";for(const[ye,{type:ve}]of K)me+=`flat varying ${ve} ez_v${ye};
`,ge+=`ez_v${ye} = ${ye};
`,xe+=`${ve} ${ye} = ez_v${ye};
`;return{declareVarying:me,assignVarying:ge,getVarying:xe}}getUniformComponents(K,me){const ge=K%this._channels;let xe="";for(let ye=0;ye<me;ye++)xe+=te[ge+ye];return xe}copy(K){return super.copy(K),this.partialUpdate=K.partialUpdate,this.maxUpdateCalls=K.maxUpdateCalls,this._channels=K._channels,this._pixelsPerInstance=K._pixelsPerInstance,this._stride=K._stride,this._rowToUpdate=K._rowToUpdate,this._uniformMap=K._uniformMap,this._fetchUniformsInFragmentShader=K._fetchUniformsInFragmentShader,this}};const te=["r","g","b","a"];let d$1=class ju extends Mesh{constructor(K,me,ge={},xe){if(!K)throw new Error('"geometry" is mandatory.');if(!me)throw new Error('"material" is mandatory.');const{allowsEuler:ye,renderer:ve,createEntities:_e}=ge;super(K,null),this.type="InstancedMesh2",this.isInstancedMesh2=!0,this.instancesCount=0,this.instances=null,this.instanceIndex=null,this.colorsTexture=null,this.morphTexture=null,this.boneTexture=null,this.uniformsTexture=null,this.boundingBox=null,this.boundingSphere=null,this.bvh=null,this.customSort=null,this.raycastOnlyFrustum=!1,this.LODinfo=null,this.autoUpdate=!0,this.bindMode=AttachedBindMode,this.bindMatrix=null,this.bindMatrixInverse=null,this.skeleton=null,this.onFrustumEnter=null,this._renderer=null,this._instancesArrayCount=0,this._count=0,this._perObjectFrustumCulled=!0,this._sortObjects=!1,this._indexArrayNeedsUpdate=!1,this._useOpacity=!1,this._currentMaterial=null,this._customProgramCacheKeyBase=null,this._onBeforeCompileBase=null,this._propertiesGetBase=null,this._propertiesGetMap=new WeakMap,this._properties=new WeakMap,this._freeIds=[],this.isInstancedMesh=!0,this.instanceMatrix=new InstancedBufferAttribute(new Float32Array(0),16),this.instanceColor=null,this._customProgramCacheKey=()=>`ezInstancedMesh2_${this.id}_${!!this.colorsTexture}_${this._useOpacity}_${!!this.boneTexture}_${!!this.uniformsTexture}_${this._customProgramCacheKeyBase.call(this._currentMaterial)}`,this._onBeforeCompile=(be,Ae)=>{if(this._onBeforeCompileBase&&this._onBeforeCompileBase.call(this._currentMaterial,be,Ae),be.instancing=!1,be.defines||(be.defines={}),be.defines.USE_INSTANCING_INDIRECT="",be.uniforms.matricesTexture={value:this.matricesTexture},this.uniformsTexture){be.uniforms.uniformsTexture={value:this.uniformsTexture};const{vertex:Se,fragment:Ce}=this.uniformsTexture.getUniformsGLSL("uniformsTexture","instanceIndex","uint");be.vertexShader=be.vertexShader.replace("void main() {",Se),be.fragmentShader=be.fragmentShader.replace("void main() {",Ce)}this.colorsTexture&&be.fragmentShader.includes("#include <color_pars_fragment>")&&(be.defines.USE_INSTANCING_COLOR_INDIRECT="",be.uniforms.colorsTexture={value:this.colorsTexture},be.vertexShader=be.vertexShader.replace("<color_vertex>","<instanced_color_vertex>"),be.vertexColors&&(be.defines.USE_VERTEX_COLOR=""),this._useOpacity?be.defines.USE_COLOR_ALPHA="":be.defines.USE_COLOR=""),this.boneTexture&&(be.defines.USE_SKINNING="",be.defines.USE_INSTANCING_SKINNING="",be.uniforms.bindMatrix={value:this.bindMatrix},be.uniforms.bindMatrixInverse={value:this.bindMatrixInverse},be.uniforms.bonesPerInstance={value:this.skeleton.bones.length},be.uniforms.boneTexture={value:this.boneTexture})};const Ee=ge.capacity>0?ge.capacity:ee;this._renderer=ve,this._capacity=Ee,this._parentLOD=xe,this._geometry=K,this.material=me,this._allowsEuler=ye??!1,this._tempInstance=new St(this,-1,ye),this.availabilityArray=xe?.availabilityArray??new Array(Ee*2),this._createEntities=_e,this.initIndexAttribute(),this.initMatricesTexture()}get capacity(){return this._capacity}get count(){return this._count}get perObjectFrustumCulled(){return this._perObjectFrustumCulled}set perObjectFrustumCulled(K){this._perObjectFrustumCulled=K,this._indexArrayNeedsUpdate=!0}get sortObjects(){return this._sortObjects}set sortObjects(K){this._sortObjects=K,this._indexArrayNeedsUpdate=!0}get geometry(){return this._geometry}set geometry(K){this._geometry=K,this.patchGeometry(K)}static createFrom(K,me={}){const ge=new ju(K.geometry,K.material,me);return K.isSkinnedMesh&&ge.initSkeleton(K.skeleton),ge}onBeforeShadow(K,me,ge,xe,ye,ve,_e){var Ee,be,Ae;this.patchMaterial(K,ve),!(!this.instanceIndex||_e&&!this.isFirstGroup(_e.materialIndex))&&(this.autoUpdate&&this.performFrustumCulling(xe,ge),this.matricesTexture.update(K),(Ee=this.colorsTexture)==null||Ee.update(K),(be=this.uniformsTexture)==null||be.update(K),(Ae=this.boneTexture)==null||Ae.update(K))}onBeforeRender(K,me,ge,xe,ye,ve){var _e,Ee,be;if(this.patchMaterial(K,ye),!this.instanceIndex){this._renderer=K;return}ve&&!this.isFirstGroup(ve.materialIndex)||(this.autoUpdate&&this.performFrustumCulling(ge),this.matricesTexture.update(K),(_e=this.colorsTexture)==null||_e.update(K),(Ee=this.uniformsTexture)==null||Ee.update(K),(be=this.boneTexture)==null||be.update(K))}onAfterShadow(K,me,ge,xe,ye,ve,_e){this.unpatchMaterial(K,ve)}onAfterRender(K,me,ge,xe,ye,ve){this.unpatchMaterial(K,ye),!(this.instanceIndex||ve&&!this.isLastGroup(ve.materialIndex))&&this.initIndexAttribute()}isFirstGroup(K){const me=this.material;for(let ge=0;ge<=K;ge++)if(me[ge].visible)return ge===K}isLastGroup(K){const me=this.material;for(let ge=me.length-1;ge>=K;ge--)if(me[ge].visible)return ge===K}initIndexAttribute(){if(!this._renderer){this._count=0;return}const K=this._renderer.getContext(),me=this._capacity,ge=new Uint32Array(me);for(let xe=0;xe<me;xe++)ge[xe]=xe;this.instanceIndex=new Qt(K,K.UNSIGNED_INT,1,4,ge),this._geometry.setAttribute("instanceIndex",this.instanceIndex)}initMatricesTexture(){this._parentLOD||(this.matricesTexture=new Q$1(Float32Array,4,4,this._capacity))}initColorsTexture(){this._parentLOD||(this.colorsTexture=new Q$1(Float32Array,4,1,this._capacity),this.colorsTexture.colorSpace=ColorManagement.workingColorSpace,this.colorsTexture._data.fill(1),this.materialsNeedsUpdate())}materialsNeedsUpdate(){if(this.material.isMaterial){this.material.needsUpdate=!0;return}for(const K of this.material)K.needsUpdate=!0}patchGeometry(K){const me=K.getAttribute("instanceIndex");if(me){if(me===this.instanceIndex)return;console.warn("The geometry has been cloned because it was already used."),K=K.clone(),K.deleteAttribute("instanceIndex")}this.instanceIndex&&K.setAttribute("instanceIndex",this.instanceIndex)}patchMaterial(K,me){this._currentMaterial=me,this._customProgramCacheKeyBase=me.customProgramCacheKey,this._onBeforeCompileBase=me.onBeforeCompile,me.customProgramCacheKey=this._customProgramCacheKey,me.onBeforeCompile=this._onBeforeCompile;const ge=K.properties;if(!this._properties.has(me)){const xe={};this._properties.set(me,xe);const ye=this._propertiesGetBase=ge.get;this._propertiesGetMap.set(me,ve=>ve===me?xe:ye(ve))}ge.get=this._propertiesGetMap.get(me)}unpatchMaterial(K,me){this._currentMaterial=null,K.properties.get=this._propertiesGetBase,me.onBeforeCompile=this._onBeforeCompileBase,me.customProgramCacheKey=this._customProgramCacheKeyBase,this._onBeforeCompileBase=null,this._customProgramCacheKeyBase=null}computeBVH(K={}){this.bvh||(this.bvh=new Zt(this,K.margin,K.getBBoxFromBSphere,K.accurateCulling)),this.bvh.clear(),this.bvh.create()}disposeBVH(){this.bvh=null}setMatrixAt(K,me){var ge;if(me.toArray(this.matricesTexture._data,K*16),this.instances){const xe=this.instances[K];me.decompose(xe.position,xe.quaternion,xe.scale)}this.matricesTexture.enqueueUpdate(K),(ge=this.bvh)==null||ge.move(K)}getMatrixAt(K,me=ie){return me.fromArray(this.matricesTexture._data,K*16)}getPositionAt(K,me=se){const ge=K*16,xe=this.matricesTexture._data;return me.x=xe[ge+12],me.y=xe[ge+13],me.z=xe[ge+14],me}getPositionAndMaxScaleOnAxisAt(K,me){const ge=K*16,xe=this.matricesTexture._data,ye=xe[ge+0],ve=xe[ge+1],_e=xe[ge+2],Ee=ye*ye+ve*ve+_e*_e,be=xe[ge+4],Ae=xe[ge+5],Se=xe[ge+6],Ce=be*be+Ae*Ae+Se*Se,Te=xe[ge+8],Re=xe[ge+9],De=xe[ge+10],Ie=Te*Te+Re*Re+De*De;return me.x=xe[ge+12],me.y=xe[ge+13],me.z=xe[ge+14],Math.sqrt(Math.max(Ee,Ce,Ie))}applyMatrixAtToSphere(K,me,ge,xe){const ye=K*16,ve=this.matricesTexture._data,_e=ve[ye+0],Ee=ve[ye+1],be=ve[ye+2],Ae=ve[ye+3],Se=ve[ye+4],Ce=ve[ye+5],Te=ve[ye+6],Re=ve[ye+7],De=ve[ye+8],Ie=ve[ye+9],Be=ve[ye+10],Le=ve[ye+11],Oe=ve[ye+12],Fe=ve[ye+13],Ue=ve[ye+14],Ne=ve[ye+15],He=me.center,ze=ge.x,je=ge.y,Ge=ge.z,Xe=1/(Ae*ze+Re*je+Le*Ge+Ne);He.x=(_e*ze+Se*je+De*Ge+Oe)*Xe,He.y=(Ee*ze+Ce*je+Ie*Ge+Fe)*Xe,He.z=(be*ze+Te*je+Be*Ge+Ue)*Xe;const qe=_e*_e+Ee*Ee+be*be,Qe=Se*Se+Ce*Ce+Te*Te,nt=De*De+Ie*Ie+Be*Be;me.radius=xe*Math.sqrt(Math.max(qe,Qe,nt))}setVisibilityAt(K,me){this.availabilityArray[K*2]=me,this._indexArrayNeedsUpdate=!0}getVisibilityAt(K){return this.availabilityArray[K*2]}setActiveAt(K,me){this.availabilityArray[K*2+1]=me,this._indexArrayNeedsUpdate=!0}getActiveAt(K){return this.availabilityArray[K*2+1]}getActiveAndVisibilityAt(K){const me=K*2,ge=this.availabilityArray;return ge[me]&&ge[me+1]}setActiveAndVisibilityAt(K,me){const ge=K*2,xe=this.availabilityArray;xe[ge]=me,xe[ge+1]=me,this._indexArrayNeedsUpdate=!0}setColorAt(K,me){this.colorsTexture===null&&this.initColorsTexture(),me.isColor?me.toArray(this.colorsTexture._data,K*4):bt.set(me).toArray(this.colorsTexture._data,K*4),this.colorsTexture.enqueueUpdate(K)}getColorAt(K,me=bt){return me.fromArray(this.colorsTexture._data,K*4)}setOpacityAt(K,me){this._useOpacity||(this.colorsTexture===null?this.initColorsTexture():this.materialsNeedsUpdate(),this._useOpacity=!0),this.colorsTexture._data[K*4+3]=me,this.colorsTexture.enqueueUpdate(K)}getOpacityAt(K){return this.colorsTexture._data[K*4+3]}copyTo(K,me){this.getMatrixAt(K,me.matrix).decompose(me.position,me.quaternion,me.scale)}computeBoundingBox(){const K=this._geometry,me=this._instancesArrayCount;this.boundingBox===null&&(this.boundingBox=new Box3),K.boundingBox===null&&K.computeBoundingBox();const ge=K.boundingBox,xe=this.boundingBox;xe.makeEmpty();for(let ye=0;ye<me;ye++)this.getActiveAt(ye)&&(yt.copy(ge).applyMatrix4(this.getMatrixAt(ye)),xe.union(yt))}computeBoundingSphere(){const K=this._geometry,me=this._instancesArrayCount;this.boundingSphere===null&&(this.boundingSphere=new Sphere),K.boundingSphere===null&&K.computeBoundingSphere();const ge=K.boundingSphere,xe=this.boundingSphere;xe.makeEmpty();for(let ye=0;ye<me;ye++)this.getActiveAt(ye)&&(At$1.copy(ge).applyMatrix4(this.getMatrixAt(ye)),xe.union(At$1))}clone(K){const me={capacity:this._capacity,renderer:this._renderer,allowsEuler:this._allowsEuler,createEntities:this._createEntities};return new this.constructor(this.geometry,this.material,me).copy(this,K)}copy(K,me){return super.copy(K,me),this.instancesCount=K.instancesCount,this._instancesArrayCount=K._instancesArrayCount,this._count=K._capacity,this._capacity=K._capacity,K.boundingBox!==null&&(this.boundingBox=K.boundingBox.clone()),K.boundingSphere!==null&&(this.boundingSphere=K.boundingSphere.clone()),this.matricesTexture=K.matricesTexture.clone(),this.matricesTexture.image.data=this.matricesTexture.image.data.slice(),K.colorsTexture!==null&&(this.colorsTexture=K.colorsTexture.clone(),this.colorsTexture.image.data=this.colorsTexture.image.data.slice()),K.uniformsTexture!==null&&(this.uniformsTexture=K.uniformsTexture.clone(),this.uniformsTexture.image.data=this.uniformsTexture.image.data.slice()),K.morphTexture!==null&&(this.morphTexture=K.morphTexture.clone(),this.morphTexture.image.data=this.morphTexture.image.data.slice()),K.boneTexture!==null&&(this.boneTexture=K.boneTexture.clone(),this.boneTexture.image.data=this.boneTexture.image.data.slice()),this}dispose(){var K,me,ge,xe;this.dispatchEvent({type:"dispose"}),this.matricesTexture.dispose(),(K=this.colorsTexture)==null||K.dispose(),(me=this.morphTexture)==null||me.dispose(),(ge=this.boneTexture)==null||ge.dispose(),(xe=this.uniformsTexture)==null||xe.dispose()}updateMatrixWorld(K){super.updateMatrixWorld(K),this.bindMatrixInverse&&(this.bindMode===AttachedBindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===DetachedBindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("Unrecognized bindMode: "+this.bindMode))}};const ee=1e3,yt=new Box3,At$1=new Sphere,ie=new Matrix4,bt=new Color$1,se=new Vector3;d$1.prototype.resizeBuffers=function(fe){var K;const me=this._capacity;this._capacity=fe;const ge=Math.min(fe,me);if(this.instanceIndex){const xe=new Uint32Array(fe);xe.set(new Uint32Array(this.instanceIndex.array.buffer,0,ge)),this.instanceIndex.array=xe}if(this.LODinfo){for(const xe of this.LODinfo.objects)if(xe._capacity=fe,xe.instanceIndex){const ye=new Uint32Array(fe);ye.set(new Uint32Array(xe.instanceIndex.array.buffer,0,ge)),xe.instanceIndex.array=ye}}if(this.availabilityArray.length=fe*2,this.matricesTexture.resize(fe),this.colorsTexture&&(this.colorsTexture.resize(fe),fe>me&&this.colorsTexture._data.fill(1,me*4)),this.morphTexture){const xe=this.morphTexture.image.data,ye=xe.length/me;this.morphTexture.dispose(),this.morphTexture=new DataTexture(new Float32Array(ye*fe),ye,fe,RedFormat,FloatType),this.morphTexture.image.data.set(xe)}return(K=this.uniformsTexture)==null||K.resize(fe),this};d$1.prototype.setInstancesArrayCount=function(fe){if(fe<this._instancesArrayCount){const me=this.bvh;if(me)for(let ge=this._instancesArrayCount-1;ge>=fe;ge--)this.getActiveAt(ge)&&me.delete(ge);this._instancesArrayCount=fe;return}if(fe>this._capacity){let me=this._capacity+(this._capacity>>1)+512;for(;me<fe;)me+=(me>>1)+512;this.resizeBuffers(me)}const K=this._instancesArrayCount;this._instancesArrayCount=fe,this._createEntities&&this.createEntities(K)};function Ut(fe,K){return fe.depth-K.depth}function Ot(fe,K){return K.depth-fe.depth}function ne(fe,K){return fe.distance-K.distance}class re{constructor(){this.array=[],this.pool=[]}push(K,me){const ge=this.pool,xe=this.array,ye=xe.length;ye>=ge.length&&ge.push({depth:null,index:null,depthSort:null});const ve=ge[ye];ve.depth=K,ve.index=me,xe.push(ve)}reset(){this.array.length=0}}const J$1=new Frustum,S$1=new re,B=new Matrix4,z=new Matrix4,it=new Vector3,P$1=new Vector3,R$1=new Vector3,oe=new Vector3,w$1=new Sphere;d$1.prototype.performFrustumCulling=function(fe,K=fe){if(!this._parentLOD&&this.instancesCount===0){this._count=0;return}const me=this.LODinfo,ge=fe!==K;let xe;if(me){xe=ge?me.shadowRender??me.render:me.render;for(const ye of me.objects)ye._count=0}xe?.levels.length>0?this.frustumCullingLOD(xe,fe,K):this._parentLOD||this.frustumCulling(fe),this.instanceIndex.update(this._renderer,this._count)};d$1.prototype.frustumCulling=function(fe){var K;const me=this._sortObjects,ge=this._perObjectFrustumCulled,xe=this.instanceIndex.array;if(this.instanceIndex._needsUpdate=!0,!ge&&!me){this.updateIndexArray();return}if(me&&(z.copy(this.matrixWorld).invert(),P$1.setFromMatrixPosition(fe.matrixWorld).applyMatrix4(z),it.set(0,0,-1).transformDirection(fe.matrixWorld).transformDirection(z)),ge?(B.multiplyMatrices(fe.projectionMatrix,fe.matrixWorldInverse).multiply(this.matrixWorld),this.bvh?this.BVHCulling(fe):this.linearCulling(fe)):this.updateRenderList(),me){const ye=this.customSort;ye===null?S$1.array.sort((K=this.material)!=null&&K.transparent?Ot:Ut):ye(S$1.array);const ve=S$1.array,_e=ve.length;for(let Ee=0;Ee<_e;Ee++)xe[Ee]=ve[Ee].index;this._count=_e,S$1.reset()}};d$1.prototype.updateIndexArray=function(){if(!this._indexArrayNeedsUpdate)return;const fe=this.instanceIndex.array,K=this._instancesArrayCount;let me=0;for(let ge=0;ge<K;ge++)this.getActiveAndVisibilityAt(ge)&&(fe[me++]=ge);this._count=me,this._indexArrayNeedsUpdate=!1};d$1.prototype.updateRenderList=function(){const fe=this._instancesArrayCount;for(let K=0;K<fe;K++)if(this.getActiveAndVisibilityAt(K)){const me=this.getPositionAt(K).sub(P$1).dot(it);S$1.push(me,K)}};d$1.prototype.BVHCulling=function(fe){const K=this.instanceIndex.array,me=this._instancesArrayCount,ge=this._sortObjects,xe=this.onFrustumEnter;let ye=0;this.bvh.frustumCulling(B,ve=>{const _e=ve.object;if(_e<me&&this.getVisibilityAt(_e)&&(!xe||xe(_e,fe)))if(ge){const Ee=this.getPositionAt(_e).sub(P$1).dot(it);S$1.push(Ee,_e)}else K[ye++]=_e}),this._count=ye};d$1.prototype.linearCulling=function(fe){const K=this.instanceIndex.array;this.geometry.boundingSphere||this.geometry.computeBoundingSphere();const me=this._geometry.boundingSphere,ge=me.radius,xe=me.center,ye=this._instancesArrayCount,ve=xe.x===0&&xe.y===0&&xe.z===0,_e=this._sortObjects,Ee=this.onFrustumEnter;let be=0;J$1.setFromProjectionMatrix(B);for(let Ae=0;Ae<ye;Ae++)if(this.getActiveAndVisibilityAt(Ae)){if(ve){const Se=this.getPositionAndMaxScaleOnAxisAt(Ae,w$1.center);w$1.radius=ge*Se}else this.applyMatrixAtToSphere(Ae,w$1,xe,ge);if(J$1.intersectsSphere(w$1)&&(!Ee||Ee(Ae,fe)))if(_e){const Se=oe.subVectors(w$1.center,P$1).dot(it);S$1.push(Se,Ae)}else K[be++]=Ae}this._count=be};d$1.prototype.frustumCullingLOD=function(fe,K,me){var ge,xe;const{count:ye,levels:ve}=fe,_e=K===me&&this._sortObjects;for(let be=0;be<ve.length;be++)ye[be]=0,ve[be].object.instanceIndex&&(ve[be].object.instanceIndex._needsUpdate=!0);B.multiplyMatrices(K.projectionMatrix,K.matrixWorldInverse).multiply(this.matrixWorld),z.copy(this.matrixWorld).invert(),P$1.setFromMatrixPosition(K.matrixWorld).applyMatrix4(z),R$1.setFromMatrixPosition(me.matrixWorld).applyMatrix4(z);const Ee=fe.levels.map(be=>be.object.instanceIndex.array);if(this.bvh?this.BVHCullingLOD(fe,Ee,_e,K,me):this.linearCullingLOD(fe,Ee,_e,K,me),_e){const be=this.customSort,Ae=S$1.array;let Se=0,Ce=ve[1].distance;be===null?Ae.sort((ge=ve[0].object.material)!=null&&ge.transparent?Ot:Ut):be(Ae);for(let Te=0,Re=Ae.length;Te<Re;Te++){const De=Ae[Te];De.depth>Ce&&(Se++,Ce=((xe=ve[Se+1])==null?void 0:xe.distance)??1/0),Ee[Se][ye[Se]++]=De.index}S$1.reset()}for(let be=0;be<ve.length;be++){const Ae=ve[be].object;Ae._count=ye[be]}};d$1.prototype.BVHCullingLOD=function(fe,K,me,ge,xe){const{count:ye,levels:ve}=fe,_e=this._instancesArrayCount,Ee=this.onFrustumEnter;me?this.bvh.frustumCulling(B,be=>{const Ae=be.object;if(Ae<_e&&this.getVisibilityAt(Ae)&&(!Ee||Ee(Ae,ge,xe))){const Se=this.getPositionAt(Ae).distanceToSquared(R$1);S$1.push(Se,Ae)}}):this.bvh.frustumCullingLOD(B,R$1,ve,(be,Ae)=>{const Se=be.object;if(Se<_e&&this.getVisibilityAt(Se)){if(Ae===null){const Ce=this.getPositionAt(Se).distanceToSquared(R$1);Ae=this.getObjectLODIndexForDistance(ve,Ce)}(!Ee||Ee(Se,ge,xe,Ae))&&(K[Ae][ye[Ae]++]=Se)}})};d$1.prototype.linearCullingLOD=function(fe,K,me,ge,xe){const{count:ye,levels:ve}=fe;this.geometry.boundingSphere||this.geometry.computeBoundingSphere();const _e=this._geometry.boundingSphere,Ee=_e.radius,be=_e.center,Ae=this._instancesArrayCount,Se=be.x===0&&be.y===0&&be.z===0,Ce=this.onFrustumEnter;J$1.setFromProjectionMatrix(B);for(let Te=0;Te<Ae;Te++)if(this.getActiveAndVisibilityAt(Te)){if(Se){const Re=this.getPositionAndMaxScaleOnAxisAt(Te,w$1.center);w$1.radius=Ee*Re}else this.applyMatrixAtToSphere(Te,w$1,be,Ee);if(J$1.intersectsSphere(w$1))if(me){if(!Ce||Ce(Te,ge,xe))continue;const Re=w$1.center.distanceToSquared(R$1);S$1.push(Re,Te)}else{const Re=w$1.center.distanceToSquared(R$1),De=this.getObjectLODIndexForDistance(ve,Re);(!Ce||Ce(Te,ge,xe,De))&&(K[De][ye[De]++]=Te)}}};d$1.prototype.clearInstance=function(fe,K){var me;return fe.id=K,fe.position.set(0,0,0),fe.scale.set(1,1,1),fe.quaternion.set(0,0,0,1),(me=fe.rotation)==null||me.set(0,0,0),fe};d$1.prototype.updateInstances=function(fe){const K=this._instancesArrayCount,me=this.instances,ge=this._tempInstance;for(let xe=0;xe<K;xe++){if(!this.getActiveAt(xe))continue;const ye=me?me[xe]:this.clearInstance(ge,xe);fe(ye,xe),ye.updateMatrix()}return this};d$1.prototype.updateInstancesPosition=function(fe){const K=this._instancesArrayCount,me=this.instances,ge=this._tempInstance;for(let xe=0;xe<K;xe++){if(!this.getActiveAt(xe))continue;const ye=me?me[xe]:this.clearInstance(ge,xe);fe(ye,xe),ye.updateMatrixPosition()}return this};d$1.prototype.createEntities=function(fe){const K=this._instancesArrayCount;if(!this.instances)this.instances=new Array(K);else if(this.instances.length<K)this.instances.length=K;else return this;const me=this.instances;for(let ge=fe;ge<K;ge++)me[ge]||(me[ge]=new St(this,ge,this._allowsEuler));return this};d$1.prototype.addInstances=function(fe,K){const me=this._freeIds;if(me.length>0){let ye=-1;const ve=Math.min(me.length,fe),_e=me.length-ve;for(let Ee=me.length-1;Ee>=_e;Ee--){const be=me[Ee];be>ye&&(ye=be),this.addInstance(be,K)}me.length-=ve,fe-=ve,this._instancesArrayCount=Math.max(ye+1,this._instancesArrayCount)}const ge=this._instancesArrayCount,xe=ge+fe;this.setInstancesArrayCount(xe);for(let ye=ge;ye<xe;ye++)this.addInstance(ye,K);return this};d$1.prototype.addInstance=function(fe,K){var me;this.instancesCount++,this.setActiveAndVisibilityAt(fe,!0);const ge=this.instances?this.instances[fe]:this.clearInstance(this._tempInstance,fe);K(ge,fe),ge.updateMatrix(),(me=this.bvh)==null||me.insert(fe)};d$1.prototype.removeInstances=function(...fe){const K=this._freeIds,me=this.bvh;for(const ge of fe)ge<this._instancesArrayCount&&this.getActiveAt(ge)&&(this.setActiveAt(ge,!1),K.push(ge),me?.delete(ge),this.instancesCount--);for(let ge=this._instancesArrayCount-1;ge>=0&&!this.getActiveAt(ge);ge--)this._instancesArrayCount--;return this};d$1.prototype.clearInstances=function(){var fe;return this.instancesCount=0,this._instancesArrayCount=0,this._freeIds.length=0,(fe=this.bvh)==null||fe.clear(),this};d$1.prototype.getObjectLODIndexForDistance=function(fe,K){for(let me=fe.length-1;me>0;me--){const ge=fe[me],xe=ge.distance-ge.distance*ge.hysteresis;if(K>=xe)return me}return 0};d$1.prototype.setFirstLODDistance=function(fe=0,K=0){if(this._parentLOD)throw new Error("Cannot create LOD for this InstancedMesh2.");return this.LODinfo||(this.LODinfo={render:null,shadowRender:null,objects:[this]}),this.LODinfo.render||(this.LODinfo.render={levels:[{distance:fe,hysteresis:K,object:this}],count:[0]}),this};d$1.prototype.addLOD=function(fe,K,me=0,ge=0){var xe;if(this._parentLOD)throw new Error("Cannot create LOD for this InstancedMesh2.");if(!((xe=this.LODinfo)!=null&&xe.render)&&me===0)throw new Error('Cannot set distance to 0 for the first LOD. Use "setFirstLODDistance" before use "addLOD".');return this.setFirstLODDistance(0,ge),this.addLevel(this.LODinfo.render,fe,K,me,ge),this};d$1.prototype.addShadowLOD=function(fe,K=0,me=0){if(this._parentLOD)throw new Error("Cannot create LOD for this InstancedMesh2.");this.LODinfo||(this.LODinfo={render:null,shadowRender:null,objects:[this]}),this.LODinfo.shadowRender||(this.LODinfo.shadowRender={levels:[],count:[]});const ge=this.addLevel(this.LODinfo.shadowRender,fe,null,K,me);return ge.castShadow=!0,this.castShadow=!0,this};d$1.prototype.addLevel=function(fe,K,me,ge,xe){const ye=this.LODinfo.objects,ve=fe.levels;let _e,Ee;ge=ge**2;const be=ye.findIndex(Ae=>Ae.geometry===K);if(be===-1){const Ae={capacity:this._capacity,renderer:this._renderer};Ee=new d$1(K,me??new ShaderMaterial,Ae,this),Ee.frustumCulled=!1,this.patchLevel(Ee),ye.push(Ee),this.add(Ee)}else Ee=ye[be],me&&(Ee.material=me);for(_e=0;_e<ve.length&&!(ge<ve[_e].distance);_e++);return ve.splice(_e,0,{distance:ge,hysteresis:xe,object:Ee}),fe.count.push(0),Ee};d$1.prototype.patchLevel=function(fe){Object.defineProperty(fe,"matricesTexture",{get(){return this._parentLOD.matricesTexture}}),Object.defineProperty(fe,"colorsTexture",{get(){return this._parentLOD.colorsTexture}}),Object.defineProperty(fe,"uniformsTexture",{get(){return this._parentLOD.uniformsTexture}}),Object.defineProperty(fe,"morphTexture",{get(){return this._parentLOD.morphTexture}}),Object.defineProperty(fe,"boneTexture",{get(){return this._parentLOD.boneTexture}}),Object.defineProperty(fe,"skeleton",{get(){return this._parentLOD.skeleton}}),Object.defineProperty(fe,"bindMatrixInverse",{get(){return this._parentLOD.bindMatrixInverse}}),Object.defineProperty(fe,"bindMatrix",{get(){return this._parentLOD.bindMatrix}})};const ae=new Mesh;d$1.prototype.getMorphAt=function(fe,K=ae){const me=K.morphTargetInfluences,ge=this.morphTexture.source.data.data,xe=me.length+1,ye=fe*xe+1;for(let ve=0;ve<me.length;ve++)me[ve]=ge[ye+ve];return K};d$1.prototype.setMorphAt=function(fe,K){const me=K.morphTargetInfluences,ge=me.length+1;this.morphTexture===null&&!this._parentLOD&&(this.morphTexture=new DataTexture(new Float32Array(ge*this._capacity),ge,this._capacity,RedFormat,FloatType));const xe=this.morphTexture.source.data.data;let ye=0;for(const Ee of me)ye+=Ee;const ve=this._geometry.morphTargetsRelative?1:1-ye,_e=ge*fe;xe[_e]=ve,xe.set(me,_e+1),this.morphTexture.needsUpdate=!0};const st=[],tt$1=new Mesh,ce=new Ray,vt=new Vector3,It=new Vector3,Tt=new Matrix4,Ct$1=new Sphere;d$1.prototype.raycast=function(fe,K){if(this._parentLOD||!this.material||this.instancesCount===0||!this.instanceIndex)return;const me=this.raycastOnlyFrustum&&this._perObjectFrustumCulled&&!this.bvh;tt$1.geometry=this._geometry,tt$1.material=this.material;const ge=fe.ray,xe=fe.near,ye=fe.far;Tt.copy(this.matrixWorld).invert(),It.setFromMatrixScale(this.matrixWorld),vt.copy(fe.ray.direction).multiply(It);const ve=vt.length();if(fe.ray=ce.copy(fe.ray).applyMatrix4(Tt),fe.near/=ve,fe.far/=ve,this.bvh)this.bvh.raycast(fe,_e=>this.checkObjectIntersection(fe,_e,K));else{if(this.boundingSphere===null&&this.computeBoundingSphere(),Ct$1.copy(this.boundingSphere),!fe.ray.intersectsSphere(Ct$1))return;const _e=this.instanceIndex.array,Ee=me?this._count:this._instancesArrayCount;for(let be=0;be<Ee;be++)this.checkObjectIntersection(fe,_e[be],K)}K.sort(ne),fe.ray=ge,fe.near=xe,fe.far=ye};d$1.prototype.checkObjectIntersection=function(fe,K,me){if(!(K>this._instancesArrayCount||!this.getActiveAndVisibilityAt(K))){this.getMatrixAt(K,tt$1.matrixWorld),tt$1.raycast(fe,st);for(const ge of st)ge.instanceId=K,ge.object=this,me.push(ge);st.length=0}};d$1.prototype.initSkeleton=function(fe,K=!0){if(fe&&this.skeleton!==fe&&!this._parentLOD){const me=fe.bones;if(this.skeleton=fe,this.bindMatrix=new Matrix4,this.bindMatrixInverse=new Matrix4,this.boneTexture=new Q$1(Float32Array,4,4*me.length,this._capacity),K)for(const ge of me)ge.matrixAutoUpdate=!1,ge.matrixWorldAutoUpdate=!1;this.materialsNeedsUpdate()}};d$1.prototype.setBonesAt=function(fe,K=!0,me){const ge=this.skeleton;if(!ge)throw new Error('"setBonesAt" cannot be called before "initSkeleton"');const xe=ge.bones,ye=ge.boneInverses;for(let ve=0,_e=xe.length;ve<_e;ve++){const Ee=xe[ve];K&&(me!=null&&me.has(Ee.name)||Ee.updateMatrix(),Ee.matrixWorld.multiplyMatrices(Ee.parent.matrixWorld,Ee.matrix)),this.multiplyBoneMatricesAt(fe,ve,Ee.matrixWorld,ye[ve])}this.boneTexture.enqueueUpdate(fe)};d$1.prototype.multiplyBoneMatricesAt=function(fe,K,me,ge){const xe=(fe*this.skeleton.bones.length+K)*16,ye=me.elements,ve=ge.elements,_e=this.boneTexture._data,Ee=ye[0],be=ye[4],Ae=ye[8],Se=ye[12],Ce=ye[1],Te=ye[5],Re=ye[9],De=ye[13],Ie=ye[2],Be=ye[6],Le=ye[10],Oe=ye[14],Fe=ye[3],Ue=ye[7],Ne=ye[11],He=ye[15],ze=ve[0],je=ve[4],Ge=ve[8],Xe=ve[12],qe=ve[1],Qe=ve[5],nt=ve[9],Nt=ve[13],Ye=ve[2],at=ve[6],rt=ve[10],Ft=ve[14],Je=ve[3],Wt=ve[7],Kt=ve[11],Pt=ve[15];_e[xe+0]=Ee*ze+be*qe+Ae*Ye+Se*Je,_e[xe+4]=Ee*je+be*Qe+Ae*at+Se*Wt,_e[xe+8]=Ee*Ge+be*nt+Ae*rt+Se*Kt,_e[xe+12]=Ee*Xe+be*Nt+Ae*Ft+Se*Pt,_e[xe+1]=Ce*ze+Te*qe+Re*Ye+De*Je,_e[xe+5]=Ce*je+Te*Qe+Re*at+De*Wt,_e[xe+9]=Ce*Ge+Te*nt+Re*rt+De*Kt,_e[xe+13]=Ce*Xe+Te*Nt+Re*Ft+De*Pt,_e[xe+2]=Ie*ze+Be*qe+Le*Ye+Oe*Je,_e[xe+6]=Ie*je+Be*Qe+Le*at+Oe*Wt,_e[xe+10]=Ie*Ge+Be*nt+Le*rt+Oe*Kt,_e[xe+14]=Ie*Xe+Be*Nt+Le*Ft+Oe*Pt,_e[xe+3]=Fe*ze+Ue*qe+Ne*Ye+He*Je,_e[xe+7]=Fe*je+Ue*Qe+Ne*at+He*Wt,_e[xe+11]=Fe*Ge+Ue*nt+Ne*rt+He*Kt,_e[xe+15]=Fe*Xe+Ue*Nt+Ne*Ft+He*Pt};d$1.prototype.getUniformAt=function(fe,K,me){if(!this.uniformsTexture)throw new Error(`Before get/set uniform, it's necessary to use "initUniformsPerInstance".`);return this.uniformsTexture.getUniformAt(fe,K,me)};d$1.prototype.setUniformAt=function(fe,K,me){if(!this.uniformsTexture)throw new Error(`Before get/set uniform, it's necessary to use "initUniformsPerInstance".`);this.uniformsTexture.setUniformAt(fe,K,me),this.uniformsTexture.enqueueUpdate(fe)};d$1.prototype.initUniformsPerInstance=function(fe){if(!this._parentLOD){const{channels:K,pixelsPerInstance:me,uniformMap:ge,fetchInFragmentShader:xe}=this.getUniformSchemaResult(fe);this.uniformsTexture=new Q$1(Float32Array,K,me,this._capacity,ge,xe),this.materialsNeedsUpdate()}};d$1.prototype.getUniformSchemaResult=function(fe){let K=0;const me=new Map,ge=[],xe=fe.vertex??{},ye=fe.fragment??{};let ve=!0;for(const be in xe){const Ae=xe[be],Se=this.getUniformSize(Ae);K+=Se,ge.push({name:be,type:Ae,size:Se}),ve=!1}for(const be in ye)if(!xe[be]){const Ae=ye[be],Se=this.getUniformSize(Ae);K+=Se,ge.push({name:be,type:Ae,size:Se})}ge.sort((be,Ae)=>Ae.size-be.size);const _e=[];for(const{name:be,size:Ae,type:Se}of ge){const Ce=this.getUniformOffset(Ae,_e);me.set(be,{offset:Ce,size:Ae,type:Se})}const Ee=Math.ceil(K/4);return{channels:Math.min(K,4),pixelsPerInstance:Ee,uniformMap:me,fetchInFragmentShader:ve}};d$1.prototype.getUniformOffset=function(fe,K){if(fe<4){for(let ge=0;ge<K.length;ge++)if(K[ge]+fe<=4){const xe=ge*4+K[ge];return K[ge]+=fe,xe}}const me=K.length*4;for(;fe>0;fe-=4)K.push(fe);return me};d$1.prototype.getUniformSize=function(fe){switch(fe){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;case"mat3":return 9;case"mat4":return 16;default:throw new Error(`Invalid uniform type: ${fe}`)}};const he=`
#ifdef USE_INSTANCING_INDIRECT
  attribute uint instanceIndex;
  uniform highp sampler2D matricesTexture;  

  mat4 getInstancedMatrix() {
    int size = textureSize( matricesTexture, 0 ).x;
    int j = int( instanceIndex ) * 4;
    int x = j % size;
    int y = j / size;
    vec4 v1 = texelFetch( matricesTexture, ivec2( x, y ), 0 );
    vec4 v2 = texelFetch( matricesTexture, ivec2( x + 1, y ), 0 );
    vec4 v3 = texelFetch( matricesTexture, ivec2( x + 2, y ), 0 );
    vec4 v4 = texelFetch( matricesTexture, ivec2( x + 3, y ), 0 );
    return mat4( v1, v2, v3, v4 );
  }
#endif
`,ue=`
#ifdef USE_INSTANCING_COLOR_INDIRECT
  uniform highp sampler2D colorsTexture;

  #ifdef USE_COLOR_ALPHA
    vec4 getColorTexture() {
      int size = textureSize( colorsTexture, 0 ).x;
      int j = int( instanceIndex );
      int x = j % size;
      int y = j / size;
      return texelFetch( colorsTexture, ivec2( x, y ), 0 );
    }
  #else
    vec3 getColorTexture() {
      int size = textureSize( colorsTexture, 0 ).x;
      int j = int( instanceIndex );
      int x = j % size;
      int y = j / size;
      return texelFetch( colorsTexture, ivec2( x, y ), 0 ).rgb;
    }
  #endif
#endif
`,le=`
#ifdef USE_INSTANCING_INDIRECT
  mat4 instanceMatrix = getInstancedMatrix();

  #ifdef USE_INSTANCING_COLOR_INDIRECT
    vColor *= getColorTexture();
  #endif
#endif
`,de=`
#ifdef USE_INSTANCING_COLOR_INDIRECT
  #ifdef USE_VERTEX_COLOR
    vColor = color;
  #else
    #ifdef USE_COLOR_ALPHA
      vColor = vec4( 1.0 );
    #else
      vColor = vec3( 1.0 );
    #endif
  #endif
#endif
`,pe=`
#ifdef USE_SKINNING
  uniform mat4 bindMatrix;
  uniform mat4 bindMatrixInverse;
  uniform highp sampler2D boneTexture;

  #ifdef USE_INSTANCING_SKINNING
    uniform int bonesPerInstance;
  #endif

  mat4 getBoneMatrix( const in float i ) {
    int size = textureSize( boneTexture, 0 ).x;

    #ifdef USE_INSTANCING_SKINNING
      int j = ( bonesPerInstance * int( instanceIndex ) + int( i ) ) * 4;
    #else
      int j = int( i ) * 4;
    #endif

    int x = j % size;
    int y = j / size;
    vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
    vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
    vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
    vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
    return mat4( v1, v2, v3, v4 );
  }
#endif
`;ShaderChunk.instanced_pars_vertex=he;ShaderChunk.instanced_color_pars_vertex=ue;ShaderChunk.instanced_vertex=le;ShaderChunk.instanced_color_vertex=de;function ht$1(fe){return fe.replace("#ifdef USE_INSTANCING","#if defined USE_INSTANCING || defined USE_INSTANCING_INDIRECT")}ShaderChunk.project_vertex=ht$1(ShaderChunk.project_vertex);ShaderChunk.worldpos_vertex=ht$1(ShaderChunk.worldpos_vertex);ShaderChunk.defaultnormal_vertex=ht$1(ShaderChunk.defaultnormal_vertex);ShaderChunk.batching_pars_vertex=ShaderChunk.batching_pars_vertex.concat(`
#include <instanced_pars_vertex>`);ShaderChunk.color_pars_vertex=ShaderChunk.color_pars_vertex.concat(`
#include <instanced_color_pars_vertex>`);ShaderChunk.batching_vertex=ShaderChunk.batching_vertex.concat(`
#include <instanced_vertex>`);ShaderChunk.skinning_pars_vertex=pe;ShaderChunk.morphinstance_vertex=ShaderChunk.morphinstance_vertex.replaceAll("gl_InstanceID","instanceIndex");(function(){var fe="B9h79tEBBBENQ9gEUEU9gEUB9gBB9gVUUUUUEU9gDUUEU9gLUUUUEU9gVUUUUUB9gLUUUUB9gIUUUEU9gD99UE99I8ayDILEVLEVLOOOOORRVBWWBEdddLVE9wEIIVIEBEOWEUEC+g/KEKR/QIhO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9fw9u9j9v9kw9WwvTw949C919m9mwvBE8f9tw79o9v9wT9fw9u9j9v9kw9WwvTw949C919m9mwv9C9v919u9kBDe9tw79o9v9wT9fw9u9j9v9kw9WwvTw949Wwv79p9v9uBIy9tw79o9v9wT9fw9u9j9v9kw69u9kw949C919m9mwvBL8e9tw79o9v9wT9fw9u9j9v9kw69u9kw949C919m9mwv9C9v919u9kBV8a9tw79o9v9wT9fw9u9j9v9kw69u9kw949Wwv79p9v9uBOe9tw79o9v9wT9fw9u9j9v9kw69u9kw949Twg91w9u9jwBRA9tw79o9v9wT9fw9u9j9v9kw69u9kw949Twg91w9u9jw9C9v919u9kBWl9tw79o9v9wT9fw9u9j9v9kws9p2Twv9P9jTBdk9tw79o9v9wT9fw9u9j9v9kws9p2Twv9R919hTBQl9tw79o9v9wT9fw9u9j9v9kws9p2Twvt949wBKe9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94j9h9j9owBpA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94j9h9j9ow9TTv9p9wBSA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94swT9j9o9Sw9t9h9wBZL79iv9rBhdWEBCEKDxcQ+1tyDBK/hKEyU8jJJJJBCJO9rGV8kJJJJBCBHODNALCEFAE0MBABCBrB+Q+KJJBC+gEv86BBAVCJDFCBCJDZ+TJJJB8aDNAItMBAVCJDFADALZmJJJB8aKABAEFHRABCEFHWAVALFCBCBCJDAL9rALCfE0eZ+TJJJB8aAVAVCJDFALZmJJJBHdCJ/ABAL9uHEDNDNALtMBAEC/wfBgGECJDAECJD6eHQCBHKINAKAI9PMEAdCJLFCBCJDZ+TJJJB8aAQAIAK9rAKAQFAI6eGXCSFGECL4CIFCD4HMADAKAL2FHpDNDNDNDNDNAEC9wgGStMBCBHZCEHhApHoAWHaXEKDNAXtMBCBHaCEHhApHcINAdAaFrBBHxAcHECBHOINAdCJLFAOFAErBBGqAx9rGxCETAxCkTCk91CR4786BBAEALFHEAqHxAOCEFGOAX9HMBKARAW9rAM6MIAWCBAMZ+TJJJBGEtMIAEAMFHWAcCEFHcAaCEFGaAL6HhAaAL9HMBXVKKARAW9rAM6MOAWCBAMZ+TJJJB8aCEHEINAWGxAMFHWALAEGOsMLDNARAW9rAM6MBAOCEFHEAWCBAMZ+TJJJB8aAxMEKKCBHWAOAL6MOXIKINDNAXtMBAdAZFrBBHxCBHEAoHOINAdCJLFAEFAOrBBGqAx9rGxCETAxCkTCk91CR4786BBAOALFHOAqHxAECEFGEAX9HMBKKARAa9rAM6MEARAaCBAMZ+TJJJBGlAMFGW9rCk6MDCBHkAdCJLFHcINAdCJLFAkFHyCWH8aCZHaCEHqINDNDNAqCE9HMBCUHOAyrBBMECBHODNINAOGECSsMEAECEFHOAcAEFCEFrBBtMBKKCUCBAECS6eHOXEKAqCETC/+fffEgHOCUAqTCU7CfEgHxCBHEINAOAxAcAEFrBB9NFHOAECEFGECZ9HMBKKAOAaAOAa6GEeHaAqA8aAEeH8aAqCETGqCW6MBKDNDNDNDNA8aCUFpDIEBKAlAkCO4FGEAErBBCDCIA8aCLseAkCI4COgTv86BBA8aCW9HMEAWAy8pBB83BBAWCWFAyCWF8pBB83BBAWCZFHWXDKAlAkCO4FGEAErBBCEAkCI4COgTv86BBKDNCWA8a9tGeMBINAWCB86BBAWCEFHWXBKKCUA8aTCU7HqCBH3AcH5INA5HEAeHxCBHOINAErBBGaAqAaAqCfEgGy6eAOCfEgA8aTvHOAECEFHEAxCUFGxMBKAWAO86BBA5AeFH5AWCEFHWA3AeFG3CZ6MBKCBHEINDNAcAEFrBBGOAy6MBAWAO86BBAWCEFHWKAECEFGECZ9HMBKKDNAkCZFGkAS9PMBAcCZFHcARAW9rCl0MEKKAkAS6MEAWtMEAoCEFHoAZCEFGZAL6HhAWHaAZALsMIXBKKCBHWAhCEgtMEXLKCBHWAhCEgMIKAdApAXCUFAL2FALZmJJJB8aAXAKFHKAWMBKCBHOXDKCBHOARAW9rCAALALCA6e6MEDNALC8f0MBAWCBCAAL9rGEZ+TJJJBAEFHWKAWAdCJDFALZmJJJBALFAB9rHOXEKCBHOKAVCJOF8kJJJJBAOK9HEEUAECAAECA0eABCJ/ABAE9uC/wfBgGDCJDADCJD6eGDFCUFAD9uAE2ADCL4CIFCD4ADv2FCEFKMBCBABbD+Q+KJJBK/YSE3U8jJJJJBC/AE9rGL8kJJJJBCBHVDNAICI9uGOChFAE0MBABCBYDn+KJJBGVC/gEv86BBALC/ABFCfECJEZ+TJJJB8aALCuFGR9CU83IBALC8wFGW9CU83IBALCYFGd9CU83IBALCAFGQ9CU83IBALCkFGK9CU83IBALCZFGX9CU83IBAL9CU83IWAL9CU83IBABAEFC9wFHMABCEFGpAOFHEDNAItMBCMCSAVCB9KGSeHZAVCE9IHhCBHoCBHaCBHcCBHxCBHqINDNAEAM9NMBCBHVXIKAqCUFHVADAcCDTFGOYDBHlAOCWFYDBHkAOCLFYDBHyCBH8aDNDNINALC/ABFAVCSgCITFGOYDLHeDNDNDNAOYDBGOAl9HMBAeAysMEKDNAOAy9HMBAeAk9HMBA8aCEFH8aXEKAOAk9HMEAeAl9HMEA8aCDFH8aKA8aC870MDAxCUFHVADA8aCIgCX2GOC+Y1JJBFYDBAcFCDTFYDBHeADAOCn1JJBFYDBAcFCDTFYDBHkADAOC+Q1JJBFYDBAcFCDTFYDBHlCBHODNINDNALAVCSgCDTFYDBAe9HMBAOHyXDKCUHyAVCUFHVAOCEFGOCZ9HMBKKAyCB9KAyAZ9IgGVCU7AeAosGOgH3DNDNDNDNDNAyCBCSAOeAVeGVCS9HMBAhMBAeAeAaAeCEFAasGVeGaCEFsMECMCSAVeHVKApAVA8aCDTC/wEgv86BBAVCS9HMEAeAa9rGVCETAVC8f917HVINAEAVCfB0CRTAVCfBgv86BBAECEFHEAVCJE6HOAVCR4HVAOtMBKAeHaXDKCpHVApA8aCDTCpv86BBAeHaKAVtMBAVAZ9IMEKALAxCDTFAebDBAxCEFCSgHxKAoA3FHoALC/ABFAqCITFGVAkbDLAVAebDBALC/ABFAqCEFCSgGVCITFGOAebDLAOAlbDBAVCEFHOXIKAVCUFHVA8aCLFG8aC/AB9HMBKKDNADCEAkAosCETAyAoseCX2GVC+Q1JJBFYDBAcFCDTFYDBGltADAVCn1JJBFYDBAcFCDTFYDBG8aCEsgADAVC+Y1JJBFYDBAcFCDTFYDBGyCDsgAoCB9HgASgG5CE9HMBAR9CU83IBAW9CU83IBAd9CU83IBAQ9CU83IBAK9CU83IBAX9CU83IBAL9CU83IWAL9CU83IBCBHoKCBHeAxCUFGVHODNINDNALAOCSgCDTFYDBA8a9HMBAeHkXDKCUHkAOCUFHOAeCEFGeCZ9HMBKKCBHODNINDNALAVCSgCDTFYDBAy9HMBAOHeXDKCUHeAVCUFHVAOCEFGOCZ9HMBKKAoAlAosG8eFH3DNDNAkCM0MBAkCEFHkXEKCBCSA8aA3sGVeHkA3AVFH3KDNDNAeCM0MBAeCEFHeXEKCBCSAyA3sGVeHeA3AVFH3KC9+CUA8eeH8fAeAkCLTvHOCBHVDNDNDNINAVCJ1JJBFrBBAOCfEgsMEAVCEFGVCZ9HMBXDKKAlAo9HAVCM0vA5vMBApAVC/wEv86BBXEKApA8f86BBAEAO86BBAECEFHEKDNA8eMBAlAa9rGVCETAVC8f917HVINAEAVCfB0GOCRTAVCfBgv86BBAVCR4HVAECEFHEAOMBKAlHaKDNAkCS9HMBA8aAa9rGVCETAVC8f917HVINAEAVCfB0GOCRTAVCfBgv86BBAVCR4HVAECEFHEAOMBKA8aHaKDNAeCS9HMBAyAa9rGVCETAVC8f917HVINAEAVCfB0GOCRTAVCfBgv86BBAVCR4HVAECEFHEAOMBKAyHaKALAxCDTFAlbDBAxCEFCSgHVDNDNAkpZBEEEEEEEEEEEEEEBEKALAVCDTFA8abDBAxCDFCSgHVKDNDNAepZBEEEEEEEEEEEEEEBEKALAVCDTFAybDBAVCEFCSgHVKALC/ABFAqCITFGOAlbDLAOA8abDBALC/ABFAqCEFCSgCITFGOA8abDLAOAybDBALC/ABFAqCDFCSgCITFGOAybDLAOAlbDBAqCIFHOAVHxA3HoKApCEFHpAOCSgHqAcCIFGcAI6MBKKCBHVAEAM0MBCBHVINAEAVFAVCJ1JJBFrBB86BBAVCEFGVCZ9HMBKAEAB9rAVFHVKALC/AEF8kJJJJBAVKzEEUCBHDDNINADCEFGDC8f0MECEADTAE6MBKKADCRFCfEgCR9uCI2CDFABCI9u2ChFKMBCBABbDn+KJJBK+cDEWU8jJJJJBCZ9rHLCBHVDNAICVFAE0MBCBHOABCBrBn+KJJBC/QEv86BBAL9CB83IWABCEFHRABAEFC98FHWDNAItMBCBHdINDNARAW6MBCBSKADAdCDTFYDBGQALCWFAOAQALCWFAOCDTFYDB9rGEAEC8f91GEFAE7C507GOCDTFGKYDB9rGEC8e91C9+gAECDT7AOvHEINARAECfB0GVCRTAECfBgv86BBAECR4HEARCEFHRAVMBKAKAQbDBAdCEFGdAI9HMBKKCBHVARAW0MBARCBbBBARAB9rCLFHVKAVKbEEUCBHDDNINADCEFGDC8f0MECEADTAE6MBKKADCWFCfEgCR9uAB2CVFK+DVLI99DUI99LUDNAEtMBCUADCETCUFTCU7+yHVDNDNCUAICUFTCU7+yGOjBBBzmGR+LjBBB9P9dtMBAR+oHWXEKCJJJJ94HWKCBHICBHdINALCLFiDBGRjBBBBjBBJzALiDBGQ+LAR+LmALCWFiDBGK+LmGR+VARjBBBB9beGRnHXAQARnHRALCXFiDBHQDNDNAKjBBBB9gtMBAXHKXEKjBBJzAR+L+TGKAK+MAXjBBBB9geHKjBBJzAX+L+TGXAX+MARjBBBB9geHRKDNDNAQjBBJ+/AQjBBJ+/9geGXjBBJzAXjBBJz9feAVnjBBBzjBBB+/AQjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHMXEKCJJJJ94HMKDNDNAKjBBJ+/AKjBBJ+/9geGQjBBJzAQjBBJz9feAOnjBBBzjBBB+/AKjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHpXEKCJJJJ94HpKDNDNARjBBJ+/ARjBBJ+/9geGQjBBJzAQjBBJz9feAOnjBBBzjBBB+/ARjBBBB9gemGR+LjBBB9P9dtMBAR+oHSXEKCJJJJ94HSKDNDNADCL9HMBABAdFGZAS86BBAZCIFAM86BBAZCDFAW86BBAZCEFAp86BBXEKABAIFGZAS87EBAZCOFAM87EBAZCLFAW87EBAZCDFAp87EBKALCZFHLAICWFHIAdCLFHdAECUFGEMBKKK/KLLD99EUD99EUDNAEtMBDNDNCUAICUFTCU7+yGVjBBBzmGO+LjBBB9P9dtMBAO+oHIXEKCJJJJ94HIKAIC/8fIgHRINABCOFCICDALCLFiDB+LALiDB+L9eGIALCWFiDB+LALAICDTFiDB+L9eeGIALCXFiDB+LALAICDTFiDB+L9eeGIARv87EBDNDNALAICEFCIgCDTFiDBj/zL+1znjBBJ+/jBBJzALAICDTFiDBjBBBB9deGOnGWjBBJ+/AWjBBJ+/9geGdjBBJzAdjBBJz9feAVnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHQXEKCJJJJ94HQKABAQ87EBDNDNAOALAICDFCIgCDTFiDBj/zL+1znnGWjBBJ+/AWjBBJ+/9geGdjBBJzAdjBBJz9feAVnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHQXEKCJJJJ94HQKABCDFAQ87EBDNDNAOALAICUFCIgCDTFiDBj/zL+1znnGOjBBJ+/AOjBBJ+/9geGWjBBJzAWjBBJz9feAVnjBBBzjBBB+/AOjBBBB9gemGO+LjBBB9P9dtMBAO+oHIXEKCJJJJ94HIKABCLFAI87EBABCWFHBALCZFHLAECUFGEMBKKK+7DDWUE998jJJJJBCZ9rGV8kJJJJBDNAEtMBADCL6MBCEAI9rHOADCD4GDCEADCE0eHRADCDTHWCBHdINC+cUHDALHIARHQINAIiDBAVCXFZ+XJJJB8aAVYDXGKADADAK9IeHDAICLFHIAQCUFGQMBKAOADFGICkTHKCBHDCBAI9rHXARHIINDNDNALADFiDBGMAXZ+WJJJBjBBBzjBBB+/AMjBBBB9gemGM+LjBBB9P9dtMBAM+oHQXEKCJJJJ94HQKABADFAQCfffRgAKvbDBADCLFHDAICUFGIMBKABAWFHBALAWFHLAdCEFGdAE9HMBKKAVCZF8kJJJJBK/tKDcUI998jJJJJBC+QD9rGV8kJJJJBAVC+oEFCBC/kBZ+TJJJB8aCBHODNADtMBCBHOAItMBDNABAE9HMBAVCUADCDTGOADCffffI0eCBYD1+KJJBhJJJJBBGEbD+oEAVCEbD1DAEABAOZmJJJB8aKAVC+YEFCWFCBbDBAV9CB83I+YEAVC+YEFAEADAIAVC+oEFZ+NJJJBCUAICDTGRAICffffI0eGWCBYD1+KJJBhJJJJBBHOAVC+oEFAVYD1DGdCDTFAObDBAVAdCEFGQbD1DAOAVYD+YEGKARZmJJJBHXAVC+oEFAQCDTFADCI9uGMCBYD1+KJJBhJJJJBBGObDBAVAdCDFGRbD1DAOCBAMZ+TJJJBHpAVC+oEFARCDTFAWCBYD1+KJJBhJJJJBBGSbDBAVAdCIFGQbD1DAXHOASHRINARALiDBALAOYDBGWCWAWCW6eCDTFC/EBFiDBmuDBAOCLFHOARCLFHRAICUFGIMBKAVC+oEFAQCDTFCUAMCDTADCffff970eCBYD1+KJJBhJJJJBBGQbDBAVAdCLFbD1DDNADCI6MBAMCEAMCE0eHIAEHOAQHRINARASAOYDBCDTFiDBASAOCLFYDBCDTFiDBmASAOCWFYDBCDTFiDBmuDBAOCXFHOARCLFHRAICUFGIMBKKAVC/MBFHZAVYD+cEHhAVYD+gEHoAVHOCBHWCBHRCBHaCEHcINAOHxCIHqAEARCI2GlCDTFGOCWFYDBHkAOYDBHDABAaCX2FGICLFAOCLFYDBGdbDBAIADbDBAICWFAkbDBApARFCE86BBAZAkbDWAZAdbDLAZADbDBAQARCDTFCBbDBDNAWtMBCIHqAxHIINDNAIYDBGOADsMBAOAdsMBAOAksMBAZAqCDTFAObDBAqCEFHqKAICLFHIAWCUFGWMBKKAaCEFHaAXADCDTFGOAOYDBCUFbDBAXAdCDTFGOAOYDBCUFbDBAXAkCDTFGOAOYDBCUFbDBCBHWINAoAhAEAWAlFCDTFYDBCDTGIFYDBCDTFGkHOAKAIFGdYDBGDHIDNADtMBDNINAOYDBARsMEAOCLFHOAICUFGItMDXBKKAOADCDTAkFC98FYDBbDBAdAdYDBCUFbDBKAWCEFGWCI9HMBKDNDNDNAqtMBCUHRjBBBBHyCBHOINASAZAOCDTFYDBCDTGIFGWiDBH8aAWALCBAOCEFGdAOCS0eCDTFiDBALAXAIFYDBGOCWAOCW6eCDTFC/EBFiDBmGeuDBDNAKAIFYDBGWtMBAeA8a+THeAoAhAIFYDBCDTFHOAWCDTHIINAQAOYDBGWCDTFGDAeADiDBmG8auDBA8aAyAyA8a9dGDeHyAWARADeHRAOCLFHOAIC98FGIMBKKAdHOAdAq9HMBKARCU9HMEKAcAM9PMEINDNApAcFrBBMBAcHRXDKAMAcCEFGc9HMBXDKKAqCZAqCZ6eHWAZHOAxHZARCU9HMEKKAVYD1DHOKAOCDTAVC+oEFFC98FHRDNINAOtMEARYDBCBYD+E+KJJBh+BJJJBBARC98FHRAOCUFHOXBKKAVC+QDF8kJJJJBK/uLEVUCUAICDTGVAICffffI0eGOCBYD1+KJJBhJJJJBBHRALALYD9gGWCDTFARbDBALAWCEFbD9gABARbDBAOCBYD1+KJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDLCUADCDTADCffffI0eCBYD1+KJJBhJJJJBBHRALALYD9gGOCDTFARbDBALAOCEFbD9gABARbDWABYDBCBAVZ+TJJJB8aADCI9uHWDNADtMBABYDBHOAEHLADHRINAOALYDBCDTFGVAVYDBCEFbDBALCLFHLARCUFGRMBKKDNAItMBABYDBHLABYDLHRCBHVAIHOINARAVbDBARCLFHRALYDBAVFHVALCLFHLAOCUFGOMBKKDNADCI6MBAWCEAWCE0eHdABYDLHRABYDWHVCBHLINAECWFYDBHOAECLFYDBHDARAEYDBCDTFGWAWYDBGWCEFbDBAVAWCDTFALbDBARADCDTFGDADYDBGDCEFbDBAVADCDTFALbDBARAOCDTFGOAOYDBGOCEFbDBAVAOCDTFALbDBAECXFHEAdALCEFGL9HMBKKDNAItMBABYDLHEABYDBHLINAEAEYDBALYDB9rbDBALCLFHLAECLFHEAICUFGIMBKKKqBABAEADAIC+01JJBZ+MJJJBKqBABAEADAIC+c+JJJBZ+MJJJBK9dEEUABCfEAICDTZ+TJJJBHLCBHIDNADtMBINDNALAEYDBCDTFGBYDBCU9HMBABAIbDBAICEFHIKAECLFHEADCUFGDMBKKAIK9TEIUCBCBYD+M+KJJBGEABCIFC98gFGBbD+M+KJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABK9TEIUCBCBYD+M+KJJBGEABCIFC98gFGBbD+M+KJJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK9+EIUzBHEDNDNCBYD+M+KJJBGDAECZTGI9NMBCUHEADAI9rCffIFCZ4NBCUsMEKADHEKCBABAE9rCIFC98gCBYD+M+KJJBFGDbD+M+KJJBDNADzBCZTGE9NMBADAE9rCffIFCZ4NB8aKKXBABAEZ+YJJJBK+BEEIUDNAB+8GDCl4GICfEgGLCfEsMBDNALMBDNABjBBBB9cMBAECBbDBABSKABjBBJ9fnAEZ+XJJJBHBAEAEYDBCNFbDBABSKAEAICfEgC+CUFbDBADCfff+D94gCJJJ/4Iv++HBKABK+gEBDNDNAECJE9IMBABjBBBUnHBDNAECfE9PMBAEC+BUFHEXDKABjBBBUnHBAECPDAECPD6eC+C9+FHEXEKAEC+BU9KMBABjBBJXnHBDNAEC+b9+9NMBAEC/mBFHEXEKABjBBJXnHBAEC+299AEC+2990eC/MEFHEKABAEClTCJJJ/8IF++nKK+eDDBCJWK+EDB4+H9W9n94+p+Gw+J9o+YE9pBBBBBBEBBBDBBBEBBBDBBBBBBBDBBBBBBBEBBBBBBB+L29Hz/69+9Kz/n/76z/RG97z/Z/O9Xz8j/b85z/+/U9Yz/B/K9hz+2/z9dz9E+L9Mz59a8kz+R/t3z+a+Zyz79ohz/J4++8++y+d9v8+BBBB9S+49+z8r+Hbz9m9m/m8+l/Z/O8+/8+pg89Q/X+j878r+Hq8++m+b/E87BBBBBBJzBBJzBBJz+e/v/n8++y+dSz9I/h/68+XD/r8+/H0838+/w+nOzBBBB+wv9o8+UF888+9I/h/68+9C9g/l89/N/M9M89/d8kO8+BBBBF+8Tz9M836zs+2azl/Zpzz818ez9E+LXz/u98f8+819e/68+BC+EQKXEBBBDBBBAwBB",K=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var me,ge=WebAssembly.instantiate(xe(fe),{}).then(function(Ce){me=Ce.instance,me.exports.__wasm_call_ctors(),me.exports.meshopt_encodeVertexVersion(0),me.exports.meshopt_encodeIndexVersion(1)});function xe(Ce){for(var Te=new Uint8Array(Ce.length),Re=0;Re<Ce.length;++Re){var De=Ce.charCodeAt(Re);Te[Re]=De>96?De-71:De>64?De-65:De>47?De+4:De>46?63:62}for(var Ie=0,Re=0;Re<Ce.length;++Re)Te[Ie++]=Te[Re]<60?K[Te[Re]]:(Te[Re]-60)*64+Te[++Re];return Te.buffer.slice(0,Ie)}function ye(Ce){if(!Ce)throw new Error("Assertion failed")}function ve(Ce){return new Uint8Array(Ce.buffer,Ce.byteOffset,Ce.byteLength)}function _e(Ce,Te,Re){var De=me.exports.sbrk,Ie=De(Ce.length*4),Be=De(Te*4),Le=new Uint8Array(me.exports.memory.buffer),Oe=ve(Ce);Le.set(Oe,Ie),Re&&Re(Ie,Ie,Ce.length,Te);var Fe=me.exports.meshopt_optimizeVertexFetchRemap(Be,Ie,Ce.length,Te);Le=new Uint8Array(me.exports.memory.buffer);var Ue=new Uint32Array(Te);new Uint8Array(Ue.buffer).set(Le.subarray(Be,Be+Te*4)),Oe.set(Le.subarray(Ie,Ie+Ce.length*4)),De(Ie-De(0));for(var Ne=0;Ne<Ce.length;++Ne)Ce[Ne]=Ue[Ce[Ne]];return[Ue,Fe]}function Ee(Ce,Te,Re,De,Ie){var Be=me.exports.sbrk,Le=Be(Te),Oe=Be(De*Ie),Fe=new Uint8Array(me.exports.memory.buffer);Fe.set(ve(Re),Oe);var Ue=Ce(Le,Te,Oe,De,Ie),Ne=new Uint8Array(Ue);return Ne.set(Fe.subarray(Le,Le+Ue)),Be(Le-Be(0)),Ne}function be(Ce){for(var Te=0,Re=0;Re<Ce.length;++Re){var De=Ce[Re];Te=Te<De?De:Te}return Te}function Ae(Ce,Te){if(ye(Te==2||Te==4),Te==4)return new Uint32Array(Ce.buffer,Ce.byteOffset,Ce.byteLength/4);var Re=new Uint16Array(Ce.buffer,Ce.byteOffset,Ce.byteLength/2);return new Uint32Array(Re)}function Se(Ce,Te,Re,De,Ie,Be){var Le=me.exports.sbrk,Oe=Le(Re*De),Fe=Le(Re*Be),Ue=new Uint8Array(me.exports.memory.buffer);Ue.set(ve(Te),Fe),Ce(Oe,Re,De,Ie,Fe);var Ne=new Uint8Array(Re*De);return Ne.set(Ue.subarray(Oe,Oe+Re*De)),Le(Oe-Le(0)),Ne}return{ready:ge,supported:!0,reorderMesh:function(Ce,Te,Re){var De=Te?Re?me.exports.meshopt_optimizeVertexCacheStrip:me.exports.meshopt_optimizeVertexCache:void 0;return _e(Ce,be(Ce)+1,De)},encodeVertexBuffer:function(Ce,Te,Re){ye(Re>0&&Re<=256),ye(Re%4==0);var De=me.exports.meshopt_encodeVertexBufferBound(Te,Re);return Ee(me.exports.meshopt_encodeVertexBuffer,De,Ce,Te,Re)},encodeIndexBuffer:function(Ce,Te,Re){ye(Re==2||Re==4),ye(Te%3==0);var De=Ae(Ce,Re),Ie=me.exports.meshopt_encodeIndexBufferBound(Te,be(De)+1);return Ee(me.exports.meshopt_encodeIndexBuffer,Ie,De,Te,4)},encodeIndexSequence:function(Ce,Te,Re){ye(Re==2||Re==4);var De=Ae(Ce,Re),Ie=me.exports.meshopt_encodeIndexSequenceBound(Te,be(De)+1);return Ee(me.exports.meshopt_encodeIndexSequence,Ie,De,Te,4)},encodeGltfBuffer:function(Ce,Te,Re,De){var Ie={ATTRIBUTES:this.encodeVertexBuffer,TRIANGLES:this.encodeIndexBuffer,INDICES:this.encodeIndexSequence};return ye(Ie[De]),Ie[De](Ce,Te,Re)},encodeFilterOct:function(Ce,Te,Re,De){return ye(Re==4||Re==8),ye(De>=1&&De<=16),Se(me.exports.meshopt_encodeFilterOct,Ce,Te,Re,De,16)},encodeFilterQuat:function(Ce,Te,Re,De){return ye(Re==8),ye(De>=4&&De<=16),Se(me.exports.meshopt_encodeFilterQuat,Ce,Te,Re,De,16)},encodeFilterExp:function(Ce,Te,Re,De){return ye(Re>0&&Re%4==0),ye(De>=1&&De<=24),Se(me.exports.meshopt_encodeFilterExp,Ce,Te,Re,De,Re)}}})();(function(){var fe="B9h79tEBBBE8fV9gBB9gVUUUUUEU9gIUUUB9gEUEU9gIUUUEUIKQBEEEDDDILLVIEBEOWEUEC+Q/IEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBEy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBDe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBIl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBLk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBOL79iv9rBRQ+p8yQDBK/3SEZU8jJJJJBCJ/EB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rADZ1JJJBHWCJ/ABAD9uHOAICEFHLDNADtMBAOC/wfBgGOCJDAOCJD6eHdCBHQINAQAE9PMEAdAEAQ9rAQAdFAE6eGKCSFGOCL4CIFCD4HXDNDNDNDNAOC9wgGMtMBCBHpCEHSAWCJDFHZALHhINARAh9rAX6MIDNARAhAXFGL9rCk6MBCZHOINAWCJ/CBFAOGIFGOC9wFHoDNDNDNDNDNAhAIC9wFGaCO4FrBBAaCI4COg4CIgpLBEDIBKAo9CB83IBAoCWF9CB83IBXIKAoALrBLALrBBGaCO4GcAcCIsGce86BBAOCgFALCLFAcFGorBBAaCL4CIgGcAcCIsGce86BBAOCvFAoAcFGorBBAaCD4CIgGcAcCIsGce86BBAOC7FAoAcFGorBBAaCIgGaAaCIsGae86BBAOCTFAoAaFGarBBALrBEGoCO4GcAcCIsGce86BBAOC91FAaAcFGarBBAoCL4CIgGcAcCIsGce86BBAOC4FAaAcFGarBBAoCD4CIgGcAcCIsGce86BBAOC93FAaAcFGarBBAoCIgGoAoCIsGoe86BBAOC94FAaAoFGarBBALrBDGoCO4GcAcCIsGce86BBAOC95FAaAcFGarBBAoCL4CIgGcAcCIsGce86BBAOC96FAaAcFGarBBAoCD4CIgGcAcCIsGce86BBAOC97FAaAcFGarBBAoCIgGoAoCIsGoe86BBAOC98FAaAoFGorBBALrBIGLCO4GaAaCIsGae86BBAOC99FAoAaFGorBBALCL4CIgGaAaCIsGae86BBAOC9+FAoAaFGorBBALCD4CIgGaAaCIsGae86BBAOCUFAoAaFGOrBBALCIgGLALCIsGLe86BBAOALFHLXDKAoALrBWALrBBGaCL4GcAcCSsGce86BBAOCgFALCWFAcFGorBBAaCSgGaAaCSsGae86BBAOCvFAoAaFGorBBALrBEGaCL4GcAcCSsGce86BBAOC7FAoAcFGorBBAaCSgGaAaCSsGae86BBAOCTFAoAaFGorBBALrBDGaCL4GcAcCSsGce86BBAOC91FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC4FAoAaFGorBBALrBIGaCL4GcAcCSsGce86BBAOC93FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC94FAoAaFGorBBALrBLGaCL4GcAcCSsGce86BBAOC95FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC96FAoAaFGorBBALrBVGaCL4GcAcCSsGce86BBAOC97FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC98FAoAaFGorBBALrBOGaCL4GcAcCSsGce86BBAOC99FAoAcFGorBBAaCSgGaAaCSsGae86BBAOC9+FAoAaFGorBBALrBRGLCL4GaAaCSsGae86BBAOCUFAoAaFGOrBBALCSgGLALCSsGLe86BBAOALFHLXEKAoAL8pBB83BBAoCWFALCWF8pBB83BBALCZFHLKDNAIAM9PMBAICZFHOARAL9rCl0MEKKAIAM6MIALtMIDNAKtMBAWApFrBBHoCBHOAZHIINAIAWCJ/CBFAOFrBBGaCE4CBAaCEg9r7AoFGo86BBAIADFHIAOCEFGOAK9HMBKKAZCEFHZApCEFGpAD6HSALHhApAD9HMEXVKKCBHLASCEgMDXIKALAXAD2FHcDNAKtMBCBHhCEHSAWCJDFHMINARAL9rAX6MIALtMDALAXFHLAWAhFrBBHoCBHOAMHIINAIAWCJ/CBFAOFrBBGaCE4CBAaCEg9r7AoFGo86BBAIADFHIAOCEFGOAK9HMBKAMCEFHMAhCEFGhAD6HSAhAD9HMBKAcHLXIKCBHOCEHSINARAL9rAX6MDALtMEALAXFHLAOCEFGOAD6HSADAO9HMBKAcHLXDKCBHLASCEgtMEKC9+HOXIKABAQAD2FAWCJDFAKAD2Z1JJJB8aAWAWCJDFAKCUFAD2FADZ1JJJB8aAKAQFHQALMBKC9+HOXEKCBC99ARAL9rADCAADCA0eseHOKAVCJ/EBF8kJJJJBAOK/YZEhU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJEZ+JJJJB8aAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHODNAEtMBCMCSAdCEseHKCBHXCBHMCBHdCBHICBHLINDNAOAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFALARCL4CU7FCSgCITFGpYDLHSApYDBHZDNARCSgGpAK9PMBAVAIARCU7FCSgCDTFYDBAXApeHRAptHpDNDNADCD9HMBABAdCETFGhAZ87EBAhCDFAS87EBAhCLFAR87EBXEKABAdCDTFGhAZbDBAhCLFASbDBAhCWFARbDBKAXApFHXAVC/ABFALCITFGhARbDBAhASbDLAVAICDTFARbDBAVC/ABFALCEFCSgGLCITFGhAZbDBAhARbDLAIApFHIALCEFHLXDKDNDNApCSsMBAMApFApC987FCEFHMXEKAOCEFHRAO8sBBGpCfEgHhDNDNApCU9MMBARHOXEKAOCVFHOAhCfBgHhCRHpDNINAR8sBBGoCfBgApTAhvHhAoCU9KMEARCEFHRApCRFGpC8j9HMBXDKKARCEFHOKAhCE4CBAhCEg9r7AMFHMKDNDNADCD9HMBABAdCETFGRAZ87EBARCDFAS87EBARCLFAM87EBXEKABAdCDTFGRAZbDBARCLFASbDBARCWFAMbDBKAVC/ABFALCITFGRAMbDBARASbDLAVAICDTFAMbDBAVC/ABFALCEFCSgGLCITFGRAZbDBARAMbDLAICEFHIALCEFHLXEKDNARCPE0MBAXCEFGoAVAIAQARCSgFrBBGpCL49rCSgCDTFYDBApCZ6GheHRAVAIAp9rCSgCDTFYDBAoAhFGSApCSgGoeHpAotHoDNDNADCD9HMBABAdCETFGZAX87EBAZCDFAR87EBAZCLFAp87EBXEKABAdCDTFGZAXbDBAZCLFARbDBAZCWFApbDBKAVAICDTFAXbDBAVC/ABFALCITFGZARbDBAZAXbDLAVAICEFGICSgCDTFARbDBAVC/ABFALCEFCSgCITFGZApbDBAZARbDLAVAIAhFCSgGICDTFApbDBAVC/ABFALCDFCSgGLCITFGRAXbDBARApbDLALCEFHLAIAoFHIASAoFHXXEKAXCBAOrBBGZeGaARC/+EsGRFHSAZCSgHcAZCL4HxDNDNAZCS0MBASCEFHoXEKASHoAVAIAx9rCSgCDTFYDBHSKDNDNAcMBAoCEFHXXEKAoHXAVAIAZ9rCSgCDTFYDBHoKDNDNARtMBAOCEFHRXEKAOCDFHRAO8sBEGhCfEgHpDNAhCU9KMBAOCOFHaApCfBgHpCRHODNINAR8sBBGhCfBgAOTApvHpAhCU9KMEARCEFHRAOCRFGOC8j9HMBKAaHRXEKARCEFHRKApCE4CBApCEg9r7AMFGMHaKDNDNAxCSsMBARHpXEKARCEFHpAR8sBBGOCfEgHhDNAOCU9KMBARCVFHSAhCfBgHhCRHODNINAp8sBBGRCfBgAOTAhvHhARCU9KMEApCEFHpAOCRFGOC8j9HMBKASHpXEKApCEFHpKAhCE4CBAhCEg9r7AMFGMHSKDNDNAcCSsMBApHOXEKApCEFHOAp8sBBGRCfEgHhDNARCU9KMBApCVFHoAhCfBgHhCRHRDNINAO8sBBGpCfBgARTAhvHhApCU9KMEAOCEFHOARCRFGRC8j9HMBKAoHOXEKAOCEFHOKAhCE4CBAhCEg9r7AMFGMHoKDNDNADCD9HMBABAdCETFGRAa87EBARCDFAS87EBARCLFAo87EBXEKABAdCDTFGRAabDBARCLFASbDBARCWFAobDBKAVC/ABFALCITFGRASbDBARAabDLAVAICDTFAabDBAVC/ABFALCEFCSgCITFGRAobDBARASbDLAVAICEFGICSgCDTFASbDBAVC/ABFALCDFCSgCITFGRAabDBARAobDLAVAIAZCZ6AxCSsvFGICSgCDTFAobDBAIActAcCSsvFHIALCIFHLKAWCEFHWALCSgHLAICSgHIAdCIFGdAE6MBKKCBC99AOAQseHOKAVC/AEF8kJJJJBAOK+LLEVU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHRAIALFC98FHWDNAEtMBDNADCDsMBCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCDTFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGLbDBAOALbDBAdCEFGdAE9HMBXDKKCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCETFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGL87EBAOALbDBAdCEFGdAE9HMBKKCBC99ARAWseHOKAOK+lVOEUE99DUD99EUD99DNDNADCL9HMBAEtMEINDNDNABCDFGD8sBB+yAB8sBBGI+yGL+L+TABCEFGV8sBBGO+yGR+L+TGWjBB/+9CAWAWnjBBBBAWAWjBBBB9gGdeGQ+MGKAQAICB9IeALmGWAWnAKAQAOCB9IeARmGQAQnmm+R+VGLnjBBBzjBBB+/AdemGR+LjBBB9P9dtMBAR+oHIXEKCJJJJ94HIKADAI86BBDNDNAQALnjBBBzjBBB+/AQjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHDXEKCJJJJ94HDKAVAD86BBDNDNAWALnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKABAD86BBABCLFHBAECUFGEMBXDKKAEtMBINDNDNABCLFGD8uEB+yAB8uEBGI+yGL+L+TABCDFGV8uEBGO+yGR+L+TGWjB/+fsAWAWnjBBBBAWAWjBBBB9gGdeGQ+MGKAQAICB9IeALmGWAWnAKAQAOCB9IeARmGQAQnmm+R+VGLnjBBBzjBBB+/AdemGR+LjBBB9P9dtMBAR+oHIXEKCJJJJ94HIKADAI87EBDNDNAQALnjBBBzjBBB+/AQjBBBB9gemGQ+LjBBB9P9dtMBAQ+oHDXEKCJJJJ94HDKAVAD87EBDNDNAWALnjBBBzjBBB+/AWjBBBB9gemGW+LjBBB9P9dtMBAW+oHDXEKCJJJJ94HDKABAD87EBABCWFHBAECUFGEMBKKK/SILIUI99IUE99DNAEtMBCBHIABHLINDNDNj/zL81zALCOF8uEBGVCIv+y+VGOAL8uEB+ynGRjB/+fsnjBBBzjBBB+/ARjBBBB9gemGW+LjBBB9P9dtMBAW+oHdXEKCJJJJ94HdKALCLF8uEBHQALCDF8uEBHKABAVCEFCIgAIvCETFAd87EBDNDNAOAK+ynGWjB/+fsnjBBBzjBBB+/AWjBBBB9gemGX+LjBBB9P9dtMBAX+oHKXEKCJJJJ94HKKABAVCDFCIgAIvCETFAK87EBDNDNAOAQ+ynGOjB/+fsnjBBBzjBBB+/AOjBBBB9gemGX+LjBBB9P9dtMBAX+oHQXEKCJJJJ94HQKABAVCUFCIgAIvCETFAQ87EBDNDNjBBJzARARn+TAWAWn+TAOAOn+TGRjBBBBARjBBBB9ge+RjB/+fsnjBBBzmGR+LjBBB9P9dtMBAR+oHQXEKCJJJJ94HQKABAVCIgAIvCETFAQ87EBALCWFHLAICLFHIAECUFGEMBKKK9MBDNADCD4AE2GEtMBINABABYDBGDCWTCW91+yADCE91CJJJ/8IFCJJJ98g++nuDBABCLFHBAECUFGEMBKKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABKKKEBCJWKLZ9kBB",K="B9h79tEBBBEkL9gBB9gVUUUUUEU9gIUUUB9gEUEUIKQBBEBEEDDDILVE9wEEEVIEBEOWEUEC+Q/aEKR/LEdO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BB8a9tw79o9v9wT9f9kw9j9v9kw9WwvTw949C919m9mwvBDy9tw79o9v9wT9f9kw9j9v9kw69u9kw949C919m9mwvBLe9tw79o9v9wT9f9kw9j9v9kw69u9kw949Twg91w9u9jwBVl9tw79o9v9wT9f9kw9j9v9kws9p2Twv9P9jTBOk9tw79o9v9wT9f9kw9j9v9kws9p2Twv9R919hTBRl9tw79o9v9wT9f9kw9j9v9kws9p2Twvt949wBWL79iv9rBdQ/T9TQLBZIK9+EVU8jJJJJBCZ9rHBCBHEINCBHDCBHIINABCWFADFAICJUAEAD4CEgGLe86BBAIALFHIADCEFGDCW9HMBKAEC+Q+YJJBFAI86BBAECITC+Q1JJBFAB8pIW83IBAECEFGECJD9HMBKK/H8jLhUD97EUO978jJJJJBCJ/KB9rGV8kJJJJBC9+HODNADCEFAL0MBCUHOAIrBBC+gE9HMBAVAIALFGRAD9rAD/8QBBCJ/ABAD9uHOAICEFHLDNADtMBAOC/wfBgGOCJDAOCJD6eHWCBHdINAdAE9PMEAWAEAd9rAdAWFAE6eGQCSFGOC9wgGKCI2HXAKCETHMAOCL4CIFCD4HpABAdAD2FHSCBHZDNINCEHhALHoCBHaDNINARAo9rAp6MIAVCJ/CBFAaAK2FHcAoApFHLCBHIDNAKC/AB6MBARAL9rC/gB6MBCBHOINAcAOFHIDNDNDNDNDNAoAOCO4FrBBGxCIgpLBEDIBKAIPXBBBBBBBBBBBBBBBBPKLBXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAIALPBBBPKLBALCZFHLKDNDNDNDNDNAxCD4CIgpLBEDIBKAIPXBBBBBBBBBBBBBBBBPKLZXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLZALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLZALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAIALPBBBPKLZALCZFHLKDNDNDNDNDNAxCL4CIgpLBEDIBKAIPXBBBBBBBBBBBBBBBBPKLAXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLAALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLAALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAIALPBBBPKLAALCZFHLKDNDNDNDNDNAxCO4pLBEDIBKAIPXBBBBBBBBBBBBBBBBPKL8wXIKAIALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBAxC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKL8wALCLFAyPqBFAxC+Q+YJJBFrBBFHLXDKAIALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBAxC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGxCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKL8wALCWFAyPqBFAxC+Q+YJJBFrBBFHLXEKAIALPBBBPKL8wALCZFHLKAOC/ABFHIAOCJEFAK0MEAIHOARAL9rC/fB0MBKKDNDNAIAK9PMBAICI4HOINARAL9rCk6MDAcAIFHxDNDNDNDNDNAoAICO4FrBBAOCOg4CIgpLBEDIBKAxPXBBBBBBBBBBBBBBBBPKLBXIKAxALPBBLALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlGqCDP+MEAqPMBZEhDoIaLcVxOqRlPXIIIIIIIIIIIIIIIIP9OGlPXIIIIIIIIIIIIIIIIP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCLFAyPqBFAkC+Q+YJJBFrBBFHLXDKAxALPBBWALPBBBGqCLP+MEAqPMBZEhDoIaLcVxOqRlPXSSSSSSSSSSSSSSSSP9OGlPXSSSSSSSSSSSSSSSSP8jGqP5B9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBAkC+Q+YJJBFPBBBGyAyPMBBBBBBBBBBBBBBBBAqP5E9CJf/8/4/w/g/AB9+9Cu1+nGkCITC+Q1JJBFPBIBP9uPMBEDILVORZhoacxqlPpAlAqP9SPKLBALCWFAyPqBFAkC+Q+YJJBFrBBFHLXEKAxALPBBBPKLBALCZFHLKAOCDFHOAICZFGIAK6MBKKALtMBAaCI6HhALHoAaCEFGOHaAOCLsMDXEKKCBHLAhCEgMDKDNAKtMBAVCJDFAZFHIAVAZFPBDBHyCBHxINAIAVCJ/CBFAxFGOPBLBGlCEP9tAlPXEEEEEEEEEEEEEEEEGqP9OP9hP9RGlAOAKFPBLBG8aCEP9tA8aAqP9OP9hP9RG8aPMBZEhDoIaLcVxOqRlGeAOAMFPBLBG3CEP9tA3AqP9OP9hP9RG3AOAXFPBLBG5CEP9tA5AqP9OP9hP9RG5PMBZEhDoIaLcVxOqRlG8ePMBEZhDIoaLVcxORqlGqAqPMBEDIBEDIBEDIBEDIAyP9uGyP9aDBBAIADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFGOAyAeA8ePMWdkyQK8aeXM35pS8e8fGqAqPMBEDIBEDIBEDIBEDIP9uGyP9aDBBAOADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFGOAyAlA8aPMWkdyQ8aKeX3M5p8eS8fGlA3A5PMWkdyQ8aKeX3M5p8eS8fG8aPMBEZhDIoaLVcxORqlGqAqPMBEDIBEDIBEDIBEDIP9uGyP9aDBBAOADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFGOAyAlA8aPMWdkyQK8aeXM35pS8e8fGqAqPMBEDIBEDIBEDIBEDIP9uGyP9aDBBAOADFGOAyAqAqPMLVORLVORLVORLVORP9uGyP9aDBBAOADFGOAyAqAqPMWdQKWdQKWdQKWdQKP9uGyP9aDBBAOADFGOAyAqAqPMXMpSXMpSXMpSXMpSP9uGyP9aDBBAOADFHIAxCZFGxAK6MBKKAZCLFGZAD6MBKASAVCJDFAQAD2/8QBBAVAVCJDFAQCUFAD2FAD/8QBBAQAdFHdC9+HOALMEXIKKC9+HOXEKCBC99ARAL9rADCAADCA0eseHOKAVCJ/KBF8kJJJJBAOKWBZ+BJJJBK/UZEhU8jJJJJBC/AE9rGV8kJJJJBC9+HODNAECI9uGRChFAL0MBCUHOAIrBBGWC/wEgC/gE9HMBAWCSgGdCE0MBAVC/ABFCfECJE/8KBAVCuF9CU83IBAVC8wF9CU83IBAVCYF9CU83IBAVCAF9CU83IBAVCkF9CU83IBAVCZF9CU83IBAV9CU83IWAV9CU83IBAIALFC9wFHQAICEFGWARFHODNAEtMBCMCSAdCEseHKCBHXCBHMCBHdCBHICBHLINDNAOAQ9NMBC9+HOXIKDNDNAWrBBGRC/vE0MBAVC/ABFALARCL4CU7FCSgCITFGpYDLHSApYDBHZDNARCSgGpAK9PMBAVAIARCU7FCSgCDTFYDBAXApeHRAptHpDNDNADCD9HMBABAdCETFGhAZ87EBAhCDFAS87EBAhCLFAR87EBXEKABAdCDTFGhAZbDBAhCLFASbDBAhCWFARbDBKAXApFHXAVC/ABFALCITFGhARbDBAhASbDLAVAICDTFARbDBAVC/ABFALCEFCSgGLCITFGhAZbDBAhARbDLAIApFHIALCEFHLXDKDNDNApCSsMBAMApFApC987FCEFHMXEKAOCEFHRAO8sBBGpCfEgHhDNDNApCU9MMBARHOXEKAOCVFHOAhCfBgHhCRHpDNINAR8sBBGoCfBgApTAhvHhAoCU9KMEARCEFHRApCRFGpC8j9HMBXDKKARCEFHOKAhCE4CBAhCEg9r7AMFHMKDNDNADCD9HMBABAdCETFGRAZ87EBARCDFAS87EBARCLFAM87EBXEKABAdCDTFGRAZbDBARCLFASbDBARCWFAMbDBKAVC/ABFALCITFGRAMbDBARASbDLAVAICDTFAMbDBAVC/ABFALCEFCSgGLCITFGRAZbDBARAMbDLAICEFHIALCEFHLXEKDNARCPE0MBAXCEFGoAVAIAQARCSgFrBBGpCL49rCSgCDTFYDBApCZ6GheHRAVAIAp9rCSgCDTFYDBAoAhFGSApCSgGoeHpAotHoDNDNADCD9HMBABAdCETFGZAX87EBAZCDFAR87EBAZCLFAp87EBXEKABAdCDTFGZAXbDBAZCLFARbDBAZCWFApbDBKAVAICDTFAXbDBAVC/ABFALCITFGZARbDBAZAXbDLAVAICEFGICSgCDTFARbDBAVC/ABFALCEFCSgCITFGZApbDBAZARbDLAVAIAhFCSgGICDTFApbDBAVC/ABFALCDFCSgGLCITFGRAXbDBARApbDLALCEFHLAIAoFHIASAoFHXXEKAXCBAOrBBGZeGaARC/+EsGRFHSAZCSgHcAZCL4HxDNDNAZCS0MBASCEFHoXEKASHoAVAIAx9rCSgCDTFYDBHSKDNDNAcMBAoCEFHXXEKAoHXAVAIAZ9rCSgCDTFYDBHoKDNDNARtMBAOCEFHRXEKAOCDFHRAO8sBEGhCfEgHpDNAhCU9KMBAOCOFHaApCfBgHpCRHODNINAR8sBBGhCfBgAOTApvHpAhCU9KMEARCEFHRAOCRFGOC8j9HMBKAaHRXEKARCEFHRKApCE4CBApCEg9r7AMFGMHaKDNDNAxCSsMBARHpXEKARCEFHpAR8sBBGOCfEgHhDNAOCU9KMBARCVFHSAhCfBgHhCRHODNINAp8sBBGRCfBgAOTAhvHhARCU9KMEApCEFHpAOCRFGOC8j9HMBKASHpXEKApCEFHpKAhCE4CBAhCEg9r7AMFGMHSKDNDNAcCSsMBApHOXEKApCEFHOAp8sBBGRCfEgHhDNARCU9KMBApCVFHoAhCfBgHhCRHRDNINAO8sBBGpCfBgARTAhvHhApCU9KMEAOCEFHOARCRFGRC8j9HMBKAoHOXEKAOCEFHOKAhCE4CBAhCEg9r7AMFGMHoKDNDNADCD9HMBABAdCETFGRAa87EBARCDFAS87EBARCLFAo87EBXEKABAdCDTFGRAabDBARCLFASbDBARCWFAobDBKAVC/ABFALCITFGRASbDBARAabDLAVAICDTFAabDBAVC/ABFALCEFCSgCITFGRAobDBARASbDLAVAICEFGICSgCDTFASbDBAVC/ABFALCDFCSgCITFGRAabDBARAobDLAVAIAZCZ6AxCSsvFGICSgCDTFAobDBAIActAcCSsvFHIALCIFHLKAWCEFHWALCSgHLAICSgHIAdCIFGdAE6MBKKCBC99AOAQseHOKAVC/AEF8kJJJJBAOK+LLEVU8jJJJJBCZ9rHVC9+HODNAECVFAL0MBCUHOAIrBBC/+EgC/QE9HMBAV9CB83IWAICEFHRAIALFC98FHWDNAEtMBDNADCDsMBCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCDTFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGLbDBAOALbDBAdCEFGdAE9HMBXDKKCBHdINDNARAW6MBC9+SKARCEFHOAR8sBBGLCfEgHIDNDNALCU9MMBAOHRXEKARCVFHRAICfBgHICRHLDNINAO8sBBGDCfBgALTAIvHIADCU9KMEAOCEFHOALCRFGLC8j9HMBXDKKAOCEFHRKABAdCETFAICD4CBAICE4CEg9r7AVCWFAICEgCDTvGOYDBFGL87EBAOALbDBAdCEFGdAE9HMBKKCBC99ARAWseHOKAOK+epLIUO97EUE978jJJJJBCA9rHIDNDNADCL9HMBDNAEC98gGLtMBCBHVABHDINADADPBBBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdPXBBBBBBBBBBBBBBBBP+2EGQARPXBBBJBBBJBBBJBBBJGKP9OP9RP/kEGRPXBB/+9CBB/+9CBB/+9CBB/+9CARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEPXBBN0BBN0BBN0BBN0GQP/kEPXfBBBfBBBfBBBfBBBP9OAOPXBBBfBBBfBBBfBBBfP9OP9QARAWP/mEAQP/kECWP+rEPXBfBBBfBBBfBBBfBBP9OP9QAdAWP/mEAQP/kECZP+rEPXBBfBBBfBBBfBBBfBP9OP9QPKBBADCZFHDAVCLFGVAL6MBKKALAE9PMEAIAECIgGVCDTGDvCBCZAD9r/8KBAIABALCDTFGLAD/8QBBDNAVtMBAIAIPBLBGOCkP+rECkP+sEP/6EGRAOCWP+rECkP+sEP/6EARP/gEAOCZP+rECkP+sEP/6EGWP/gEP/kEP/lEGdPXBBBBBBBBBBBBBBBBP+2EGQARPXBBBJBBBJBBBJBBBJGKP9OP9RP/kEGRPXBB/+9CBB/+9CBB/+9CBB/+9CARARP/mEAdAdP/mEAWAQAWAKP9OP9RP/kEGRARP/mEP/kEP/kEP/jEP/nEGWP/mEPXBBN0BBN0BBN0BBN0GQP/kEPXfBBBfBBBfBBBfBBBP9OAOPXBBBfBBBfBBBfBBBfP9OP9QARAWP/mEAQP/kECWP+rEPXBfBBBfBBBfBBBfBBP9OP9QAdAWP/mEAQP/kECZP+rEPXBBfBBBfBBBfBBBfBP9OP9QPKLBKALAIAD/8QBBSKDNAEC98gGXtMBCBHVABHDINADCZFGLALPBBBGOPXBBBBBBffBBBBBBffGKP9OADPBBBGdAOPMLVORXMpScxql358e8fPXfUBBfUBBfUBBfUBBP9OP/6EAdAOPMBEDIWdQKZhoaky8aeGOCZP+sEP/6EGRP/gEAOCZP+rECZP+sEP/6EGWP/gEP/kEP/lEGOPXB/+fsB/+fsB/+fsB/+fsAWAOPXBBBBBBBBBBBBBBBBP+2EGQAWPXBBBJBBBJBBBJBBBJGMP9OP9RP/kEGWAWP/mEAOAOP/mEARAQARAMP9OP9RP/kEGOAOP/mEP/kEP/kEP/jEP/nEGRP/mEPXBBN0BBN0BBN0BBN0GQP/kECZP+rEAWARP/mEAQP/kEPXffBBffBBffBBffBBP9OP9QGWAOARP/mEAQP/kEPXffBBffBBffBBffBBP9OGOPMWdkyQK8aeXM35pS8e8fP9QPKBBADAdAKP9OAWAOPMBEZhDIoaLVcxORqlP9QPKBBADCAFHDAVCLFGVAX6MBKKAXAE9PMBAIAECIgGVCITGDFCBCAAD9r/8KBAIABAXCITFGLAD/8QBBDNAVtMBAIAIPBLZGOPXBBBBBBffBBBBBBffGKP9OAIPBLBGdAOPMLVORXMpScxql358e8fPXfUBBfUBBfUBBfUBBP9OP/6EAdAOPMBEDIWdQKZhoaky8aeGOCZP+sEP/6EGRP/gEAOCZP+rECZP+sEP/6EGWP/gEP/kEP/lEGOPXB/+fsB/+fsB/+fsB/+fsAWAOPXBBBBBBBBBBBBBBBBP+2EGQAWPXBBBJBBBJBBBJBBBJGMP9OP9RP/kEGWAWP/mEAOAOP/mEARAQARAMP9OP9RP/kEGOAOP/mEP/kEP/kEP/jEP/nEGRP/mEPXBBN0BBN0BBN0BBN0GQP/kECZP+rEAWARP/mEAQP/kEPXffBBffBBffBBffBBP9OP9QGWAOARP/mEAQP/kEPXffBBffBBffBBffBBP9OGOPMWdkyQK8aeXM35pS8e8fP9QPKLZAIAdAKP9OAWAOPMBEZhDIoaLVcxORqlP9QPKLBKALAIAD/8QBBKK/4WLLUE97EUV978jJJJJBC8w9rHIDNAEC98gGLtMBCBHVABHOINAIAOPBBBGRAOCZFGWPBBBGdPMLVORXMpScxql358e8fGQCZP+sEGKCLP+rEPKLBAOPXBBJzBBJzBBJzBBJzPX/zL81z/zL81z/zL81z/zL81zAKPXIBBBIBBBIBBBIBBBP9QP/6EP/nEGKARAdPMBEDIWdQKZhoaky8aeGRCZP+rECZP+sEP/6EP/mEGdAdP/mEAKARCZP+sEP/6EP/mEGXAXP/mEAKAQCZP+rECZP+sEP/6EP/mEGQAQP/mEP/kEP/kEP/lEPXBBBBBBBBBBBBBBBBP+4EP/jEPXB/+fsB/+fsB/+fsB/+fsGKP/mEPXBBN0BBN0BBN0BBN0GRP/kEPXffBBffBBffBBffBBGMP9OAXAKP/mEARP/kECZP+rEP9QGXAQAKP/mEARP/kECZP+rEAdAKP/mEARP/kEAMP9OP9QGKPMBEZhDIoaLVcxORqlGRP5BAIPBLBPeB+t+J83IBAOCWFARP5EAIPBLBPeE+t+J83IBAWAXAKPMWdkyQK8aeXM35pS8e8fGKP5BAIPBLBPeD+t+J83IBAOCkFAKP5EAIPBLBPeI+t+J83IBAOCAFHOAVCLFGVAL6MBKKDNALAE9PMBAIAECIgGVCITGOFCBCAAO9r/8KBAIABALCITFGWAO/8QBBDNAVtMBAIAIPBLBGRAIPBLZGdPMLVORXMpScxql358e8fGQCZP+sEGKCLP+rEPKLAAIPXBBJzBBJzBBJzBBJzPX/zL81z/zL81z/zL81z/zL81zAKPXIBBBIBBBIBBBIBBBP9QP/6EP/nEGKARAdPMBEDIWdQKZhoaky8aeGRCZP+rECZP+sEP/6EP/mEGdAdP/mEAKARCZP+sEP/6EP/mEGXAXP/mEAKAQCZP+rECZP+sEP/6EP/mEGQAQP/mEP/kEP/kEP/lEPXBBBBBBBBBBBBBBBBP+4EP/jEPXB/+fsB/+fsB/+fsB/+fsGKP/mEPXBBN0BBN0BBN0BBN0GRP/kEPXffBBffBBffBBffBBGMP9OAXAKP/mEARP/kECZP+rEP9QGXAQAKP/mEARP/kECZP+rEAdAKP/mEARP/kEAMP9OP9QGKPMBEZhDIoaLVcxORqlGRP5BAIPBLAPeB+t+J83IBAIARP5EAIPBLAPeE+t+J83IWAIAXAKPMWdkyQK8aeXM35pS8e8fGKP5BAIPBLAPeD+t+J83IZAIAKP5EAIPBLAPeI+t+J83IkKAWAIAO/8QBBKK+pDDIUE978jJJJJBC/AB9rHIDNADCD4AE2GLC98gGVtMBCBHDABHEINAEAEPBBBGOCWP+rECWP+sEP/6EAOCEP+sEPXBBJzBBJzBBJzBBJzP+uEPXBBJfBBJfBBJfBBJfP9OP/mEPKBBAECZFHEADCLFGDAV6MBKKDNAVAL9PMBAIALCIgGDCDTGEvCBC/ABAE9r/8KBAIABAVCDTFGVAE/8QBBDNADtMBAIAIPBLBGOCWP+rECWP+sEP/6EAOCEP+sEPXBBJzBBJzBBJzBBJzP+uEPXBBJfBBJfBBJfBBJfP9OP/mEPKLBKAVAIAE/8QBBKK9TEIUCBCBYDJ1JJBGEABCIFC98gFGBbDJ1JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIKKKEBCJWKLZ9tBB",me=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),ge=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var xe=fe;WebAssembly.validate(me)&&(xe=K);var ye,ve=WebAssembly.instantiate(_e(xe),{}).then(function(Se){ye=Se.instance,ye.exports.__wasm_call_ctors()});function _e(Se){for(var Ce=new Uint8Array(Se.length),Te=0;Te<Se.length;++Te){var Re=Se.charCodeAt(Te);Ce[Te]=Re>96?Re-71:Re>64?Re-65:Re>47?Re+4:Re>46?63:62}for(var De=0,Te=0;Te<Se.length;++Te)Ce[De++]=Ce[Te]<60?ge[Ce[Te]]:(Ce[Te]-60)*64+Ce[++Te];return Ce.buffer.slice(0,De)}function Ee(Se,Ce,Te,Re,De,Ie){var Be=ye.exports.sbrk,Le=Te+3&-4,Oe=Be(Le*Re),Fe=Be(De.length),Ue=new Uint8Array(ye.exports.memory.buffer);Ue.set(De,Fe);var Ne=Se(Oe,Te,Re,Fe,De.length);if(Ne==0&&Ie&&Ie(Oe,Le,Re),Ce.set(Ue.subarray(Oe,Oe+Te*Re)),Be(Oe-Be(0)),Ne!=0)throw new Error("Malformed buffer data: "+Ne)}var be={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},Ae={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:ve,supported:!0,decodeVertexBuffer:function(Se,Ce,Te,Re,De){Ee(ye.exports.meshopt_decodeVertexBuffer,Se,Ce,Te,Re,ye.exports[be[De]])},decodeIndexBuffer:function(Se,Ce,Te,Re){Ee(ye.exports.meshopt_decodeIndexBuffer,Se,Ce,Te,Re)},decodeIndexSequence:function(Se,Ce,Te,Re){Ee(ye.exports.meshopt_decodeIndexSequence,Se,Ce,Te,Re)},decodeGltfBuffer:function(Se,Ce,Te,Re,De,Ie){Ee(ye.exports[Ae[De]],Se,Ce,Te,Re,ye.exports[be[Ie]])}}})();var MeshoptSimplifier=function(){var fe="B9h79tEBBBECd9gEUEU9gEUB9gBB9gQUUUUUUU99UUEU9gVUUUUUB9gLUUUUE999gIUUUE999gLUUUUEU9gIUUUEUIMXDILVORBWWBEWLVE9wEIIVIEBEOWEUECJ/JEKR7OO9tw9t9vv95DBh9f9f939h79t9f9j9h229f9jT9vv7BBZ9tw79o9v9wT9f79p9t9w29p9m95BEx9tw79o9v9wT9f79p9t9w29p9m959T9j9h2wBLA9tw79o9v9wT9f9v9wT9p9t9p96w9WwvTw94swT9j9o9Sw9t9h9wBVL79iv9rBOdWEBCEKDdQQ+stXDBK/48yIkUp99hU8jJJJJBCJ/BB9rGQ8kJJJJBAQCkFCBC/kBZ1JJJB8aCUALCDTGKALCffffI0eGXCBYD/s1JJBhJJJJBBHMAQCkFAQYD94GpCDTFAMbDBAQAMbDWAQApCEFbD94AXCBYD/s1JJBhJJJJBBHSAQCkFAQYD94GpCDTFASbDBAQASbDXAQApCEFbD94CUADCITADCffffE0eCBYD/s1JJBhJJJJBBHZAQCkFAQYD94GpCDTFAZbDBAQAZbDZAQApCEFbD94AQCWFAEADALCBZ+CJJJBAXCBYD/s1JJBhJJJJBBHhAQCkFAQYD94GpCDTFAhbDBAQApCEFbD94AXCBYD/s1JJBhJJJJBBHoAQCkFAQYD94GpCDTFAobDBAQApCEFbD94ALCD4ALFHaCEHcINAcGpCETHcApAa6MBKCBHxCUApCDTGaApCffffI0eCBYD/s1JJBhJJJJBBHcAQCkFAQYD94GqCDTFAcbDBAQAqCEFbD94AcCfEAaZ1JJJBHlDNALtMBAVCD4HkApCUFHqINAIAxAk2CDTFGyYDLGpCh4Ap7C+f+B+dd2AyYDBGpCh4Ap7C/d/o+b8j27AyYDWGpCh4Ap7C+3f/n8n27HaCBHpDNDNINAlAaAqgGaCDTFG8aYDBGcCUsMEAIAcAk2CDTFAyCXZ+LJJJBtMDApCEFGpAaFHaApAq9NMBXDKKA8aAxbDBAxHcKAhAxCDTFAcbDBAxCEFGxAL9HMBKCBHpAoHcINAcApbDBAcCLFHcALApCEFGp9HMBKCBHpAhHcAoHaINDNApAcYDBGqsMBAaAoAqCDTFGqYDBbDBAqApbDBKAcCLFHcAaCLFHaALApCEFGp9HMBKKCBHaALCBYD/s1JJBhJJJJBBHyAQCkFAQYD94GpCDTFAybDBAQApCEFbD94AXCBYD/s1JJBhJJJJBBHpAQCkFAQYD94GcCDTFApbDBAQAcCEFbD94AXCBYD/s1JJBhJJJJBBHcAQCkFAQYD94GqCDTFAcbDBAQAqCEFbD94ApCfEAKZ1JJJBHeAcCfEAKZ1JJJBH3DNALtMBAZCWFH5INDNAMAaCDTGpFYDBG8etMBAZASApFYDBCITFH8fA3ApFHAAeApFHxCBHkINDNDNA8fAkCITFYDBGlAa9HMBAxAabDBAAAabDBXEKDNAMAlCDTGKFYDBGHtMBAZASAKFYDBCITGpFYDBAasMEAHCUFH8aA5ApFHcCBHpINA8aApsMEApCEFHpAcYDBHqAcCWFHcAqAa9HMBKApAH6MEKA3AKFGpAaAlApYDBCUsebDBAxAlAaAxYDBCUsebDBKAkCEFGkA8e9HMBKKAaCEFGaAL9HMBKAhHcAoHaA3HqAeHkCBHpINDNDNApAcYDBG8a9HMBDNApAaYDBG8a9HMBAkYDBH8aDNAqYDBGlCU9HMBA8aCU9HMBAyApFCB86BBXIKAyApFHxDNApAlsMBApA8asMBAxCE86BBXIKAxCL86BBXDKDNApAoA8aCDTGlFYDB9HMBDNAqYDBGxCUsMBApAxsMBAkYDBGKCUsMBApAKsMBA3AlFYDBG8eCUsMBA8eA8asMBAeAlFYDBGlCUsMBAlA8asMBDNAhAxCDTFYDBAhAlCDTFYDB9HMBAhAKCDTFYDBAhA8eCDTFYDB9HMBAyApFCD86BBXLKAyApFCL86BBXIKAyApFCL86BBXDKAyApFCL86BBXEKAyApFAyA8aFrBB86BBKAcCLFHcAaCLFHaAqCLFHqAkCLFHkALApCEFGp9HMBKAWCEgtMBAyHpALHcINDNAprBBCE9HMBApCL86BBKApCEFHpAcCUFGcMBKKCBHkCUALCX2ALC/V+q/V+qE0eCBYD/s1JJBhJJJJBBHMAQCkFAQYD94GpCDTFAMbDBAQApCEFbD94AMAIALAVZ+DJJJB8aCUALC8s2GcALC/d/o/F8u0eCBYD/s1JJBhJJJJBBHpAQCkFAQYD94GaCDTFApbDBAQAaCEFbD94ApCBAcZ1JJJBHZDNADtMBAEHcINDNAMAcCLFYDBG8aCX2FGpiDBAMAcYDBGlCX2FGaiDBGG+TG8jAMAcCWFYDBGxCX2FGqCLFiDBAaCLFiDBG8k+TG8lnAqiDBAG+TG8mApCLFiDBA8k+TG8nn+TGYAYnA8nAqCWFiDBAaCWFiDBG8p+TGinA8lApCWFiDBA8p+TG8nn+TG8lA8lnA8nA8mnAiA8jn+TG8jA8jnmm+RG8mjBBBB9etMBAYA8m+VHYA8jA8m+VH8jA8lA8m+VH8lKAZAhAlCDTFYDBC8s2FGpA8lA8m+RG8mA8lnnG8nApiDBmuDBApA8jA8mA8jnG8rnGiApiDLmuDLApAYA8mAYnG8snGrApiDWmuDWApA8rA8lnG8rApiDXmuDXApA8sA8lnG8uApiDZmuDZApA8sA8jnG8sApiDcmuDcApA8lA8mAYA8pnA8lAGnA8kA8jnmm+MG8knGGnG8lApiDkmuDkApA8jAGnG8jApiD3muD3ApAYAGnGYApiDAmuDAApAGA8knGGApiD8kmuD8kApA8mApiDYmuDYAZAhA8aCDTFYDBC8s2FGpA8nApiDBmuDBApAiApiDLmuDLApArApiDWmuDWApA8rApiDXmuDXApA8uApiDZmuDZApA8sApiDcmuDcApA8lApiDkmuDkApA8jApiD3muD3ApAYApiDAmuDAApAGApiD8kmuD8kApA8mApiDYmuDYAZAhAxCDTFYDBC8s2FGpA8nApiDBmuDBApAiApiDLmuDLApArApiDWmuDWApA8rApiDXmuDXApA8uApiDZmuDZApA8sApiDcmuDcApA8lApiDkmuDkApA8jApiD3muD3ApAYApiDAmuDAApAGApiD8kmuD8kApA8mApiDYmuDYAcCXFHcAkCIFGkAD6MBKCBH8aAEHxINCBHcINAyAEAcC+81JJBFYDBGlA8aFCDTFYDBGaFrBBHpDNDNAyAxAcFYDBGqFrBBGkC99FCfEgCPE0MBApCEsMBApCD9HMEKDNAkCUFCfEgCE0MBAeAqCDTFYDBAa9HMEKDNApCUFCfEgCE0MBA3AaCDTFYDBAq9HMEKDNAkCV2ApFC+g1JJBFrBBtMBAhAaCDTFYDBAhAqCDTFYDB0MEKjBBACjBBJzApCEseH8mAkCEsHKAEAlCDTC+81JJBFYDBA8aFCDTFYDBHlDNAMAaCX2FGpCWFiDBAMAqCX2FGkCWFiDBG8k+TG8lA8lnApiDBAkiDBG8p+TG8jA8jnApCLFiDBAkCLFiDBG8n+TGYAYnmm+RGGjBBBB9etMBA8lAG+VH8lAYAG+VHYA8jAG+VH8jKjBBACA8mAKeH8sDNAMAlCX2FGpiDWA8k+TG8mA8lA8mA8lnApiDBA8p+TGrA8jnAYApiDLA8n+TG8rnmmGin+TG8mA8mnArA8jAin+TG8lA8lnA8rAYAin+TG8jA8jnmm+RGYjBBBB9etMBA8mAY+VH8mA8jAY+VH8jA8lAY+VH8lKAZAhAqCDTFYDBC8s2FGpA8lA8sAGnGYA8lnnGiApiDBmuDBApA8jAYA8jnG8snGrApiDLmuDLApA8mAYA8mnGGnG8rApiDWmuDWApA8sA8lnG8sApiDXmuDXApAGA8lnG8uApiDZmuDZApAGA8jnG8vApiDcmuDcApA8lAYA8mA8knA8lA8pnA8nA8jnmm+MG8knGGnG8lApiDkmuDkApA8jAGnG8jApiD3muD3ApA8mAGnG8mApiDAmuDAApAGA8knGGApiD8kmuD8kApAYApiDYmuDYAZAhAaCDTFYDBC8s2FGpAiApiDBmuDBApArApiDLmuDLApA8rApiDWmuDWApA8sApiDXmuDXApA8uApiDZmuDZApA8vApiDcmuDcApA8lApiDkmuDkApA8jApiD3muD3ApA8mApiDAmuDAApAGApiD8kmuD8kApAYApiDYmuDYKAcCLFGcCX9HMBKAxCXFHxA8aCIFG8aAD6MBKKDNABAEsMBABAEADCDTZ+HJJJB8aKCUADCX2ADC/V+q/V+qE0eCBYD/s1JJBhJJJJBBHAAQCkFAQYD94GpCDTFAAbDBAQApCEFbD94CUADCDTADCffffI0eCBYD/s1JJBhJJJJBBH5AQCkFAQYD94GpCDTFA5bDBAQApCEFbD94AXCBYD/s1JJBhJJJJBBHIAQCkFAQYD94GpCDTFAIbDBAQApCEFbD94ALCBYD/s1JJBhJJJJBBH8wAQCkFAQYD94GpCDTFA8wbDBAQApCEFbD94jBBBBHrDNADAO9NMBARARnH8sAACWFH8xAQYDZH8yAQYDXH8zAQYDWH80jBBBBHrINAQCWFABADGSALAhZ+CJJJBCBHHABHxCBHKINCBHpINDNAhAxApFYDBGaCDTGEFYDBGkAhABApC+81JJBFYDBAKFCDTFYDBGcCDTFYDBG8asMBAyAcFrBBGlCV2AyAaFrBBGqFC/Q1JJBFrBBGDAqCV2AlFG8eC/Q1JJBFrBBG8fvCfEgtMBDNA8eC+g1JJBFrBBtMBA8aAk0MEKDNAqAl9HMBAqCUFCfEgCE0MBAeAEFYDBAc9HMEKAAAHCX2FGqAcAaA8fCfEgGkebDLAqAaAcAkebDBAqADA8fgCfEgCB9HbDWAHCEFHHKApCLFGpCX9HMBKAxCXFHxAKCIFGKAS6MBKDNDNAHtMBAAHcAHH8aINAcCWFGljBBBBjBBJzAZAhAcYDBGaCDTFYDBC8s2FGpiDYG8l+VA8ljBBBB9beApiDWAMAcCLFGEYDBGqCX2FGkCWFiDBG8lnApiDZAkiDBG8jnApiDAmG8mA8mmmA8lnApiDLAkCLFiDBG8mnApiDcA8lnApiD3mG8lA8lmmA8mnApiDBA8jnApiDXA8mnApiDkmG8lA8lmmA8jnApiD8kmmm+LnGYjBBBBjBBJzAZAhAqAaAlYDBGkeGlCDTFYDBC8s2FGpiDYG8l+VA8ljBBBB9beApiDWAMAaAqAkeGxCX2FGkCWFiDBG8lnApiDZAkiDBG8jnApiDAmG8mA8mmmA8lnApiDLAkCLFiDBG8mnApiDcA8lnApiD3mG8lA8lmmA8mnApiDBA8jnApiDXA8mnApiDkmG8lA8lmmA8jnApiD8kmmm+LnG8lAYA8l9fGpeuDBAEAqAxApebDBAcAaAlApebDBAcCXFHcA8aCUFG8aMBKAQCJEFCBCJ/ABZ1JJJB8aA8xHpAHHcINAQCJEFApYDBCo4C/8zgFGaAaYDBCEFbDBApCXFHpAcCUFGcMBKCBHpCBHcINAQCJEFApFGaYDBHqAaAcbDBAqAcFHcApCLFGpCJ/AB9HMBKCBHpA8xHcINAQCJEFAcYDBCo4C/8zgFGaAaYDBGaCEFbDBA5AaCDTFApbDBAcCXFHcAHApCEFGp9HMBKASAO9rGaCI9uH81DNALtMBCBHpAIHcINAcApbDBAcCLFHcALApCEFGp9HMBKKCBHbA8wCBALZ1JJJBH83AaCo9uHuA81CE4H85CBH86CBHKDNINAAA5AKCDTFYDBCX2FGxiDWG8jA8s9eMEA86A819PMEjffUUH8lDNA85AH9PMBAAA5A85CDTFYDBCX2FiDWjBB/AznH8lKDNA8jA8l9etMBA86Au0MDKDNA83AhAxYDLG87CDTG88FYDBGaFG89rBBA83AhAxYDBGECDTG8+FYDBGzFGNrBBvMBDNA80AzCDTGpFYDBGqtMBA8yA8zApFYDBCITFHpAMAaCX2FG8eCWFHDA8eCLFHXAMAzCX2FG8fCWFHVA8fCLFHWCBHcCEHlDNINDNAIApYDBCDTFYDBGkAasMBAIApCLFYDBCDTFYDBG8aAasMBAMA8aCX2FG8aiDBAMAkCX2FGkiDBG8m+TG8lAWiDBAkCLFiDBGY+TGGnA8fiDBA8m+TG8kA8aCLFiDBAY+TG8jn+TA8lAXiDBAY+TG8pnA8eiDBA8m+TG8nA8jn+TnA8jAViDBAkCWFiDBGY+TGinAGA8aCWFiDBAY+TG8mn+TA8jADiDBAY+TGYnA8pA8mn+TnA8mA8knAiA8ln+TA8mA8nnAYA8ln+TnmmjBBBB9dMDKApCWFHpAcCEFGcAq6HlAqAc9HMBKKAlCEgtMBA85CEFH85XEKAxCWFHqAZAaC8s2FGpAZAzC8s2FGciDBApiDBmuDBApAciDLApiDLmuDLApAciDWApiDWmuDWApAciDXApiDXmuDXApAciDZApiDZmuDZApAciDcApiDcmuDcApAciDkApiDkmuDkApAciD3ApiD3muD3ApAciDAApiDAmuDAApAciD8kApiD8kmuD8kApAciDYApiDYmuDYDNDNDNDNAyAEFGcrBBC9+FpDEBDKAEHpINAIApCDTGpFAabDBAoApFYDBGpAE9HMBXIKKAoA88FYDBHpAoA8+FYDBHEAIA8+FA87bDBApH87KAIAECDTFA87bDBKANCE86BBA89CE86BBAqiDBG8lArArA8l9deHrAbCEFHbCECDAcrBBCEseA86FH86KAKCEFGKAH9HMBKKAbtMBDNALtMBCBHcAeHpINDNApYDBGaCUsMBDNAcAIAaCDTGqFYDBGa9HMBAeAqFYDBHaKApAabDBKApCLFHpALAcCEFGc9HMBKCBHcA3HpINDNApYDBGaCUsMBDNAcAIAaCDTGqFYDBGa9HMBA3AqFYDBHaKApAabDBKApCLFHpALAcCEFGc9HMBKKCBHDABHpCBHkINDNAIApYDBCDTFYDBGcAIApCLFYDBCDTFYDBGasMBAcAIApCWFYDBCDTFYDBGqsMBAaAqsMBABADCDTFG8aAcbDBA8aCLFAabDBA8aCWFAqbDBADCIFHDKApCXFHpAkCIFGkAS9PMDXBKKASHDXDKADAO0MBKKDNAdtMBAdAr+RuDBKAQYD94GpCDTAQCkFFC98FHhDNINAptMEAhYDBCBYD/w1JJBh+BJJJBBAhC98FHhApCUFHpXBKKAQCJ/BBF8kJJJJBADK/PLEOUABYDBCBAICDTZ1JJJB8aADCI9uHVDNADtMBABYDBHODNALtMBAEHRADHWINAOALARYDBCDTFYDBCDTFGdAdYDBCEFbDBARCLFHRAWCUFGWMBXDKKAEHRADHWINAOARYDBCDTFGdAdYDBCEFbDBARCLFHRAWCUFGWMBKKDNAItMBABYDBHRABYDLHWCBHdAIHOINAWAdbDBAWCLFHWARYDBAdFHdARCLFHRAOCUFGOMBKKDNADCI6MBAVCEAVCE0eHQABYDLHVABYDWHRINAECWFYDBHWAECLFYDBHdAEYDBHODNALtMBALAWCDTFYDBHWALAdCDTFYDBHdALAOCDTFYDBHOKARAVAOCDTFGDYDBCITFAdbDBARADYDBCITFAWbDLADADYDBCEFbDBARAVAdCDTFGDYDBCITFAWbDBARADYDBCITFAObDLADADYDBCEFbDBARAVAWCDTFGWYDBCITFAObDBARAWYDBCITFAdbDLAWAWYDBCEFbDBAECXFHEAQCUFGQMBKKDNAItMBABYDLHRABYDBHWINARARYDBAWYDB9rbDBAWCLFHWARCLFHRAICUFGIMBKKK+3LDOUV998jJJJJBCA9rGLCZFCWFCBYD11JJBbDBALCB8pDJ1JJB83IZALCWFCBYDn1JJBbDBALCB8pD+M1JJB83IBDNADtMBAICD4HVDNABtMBAVCDTHOCBHRAEHWINABARCX2FGIAEARAV2CDTFGdiDBuDBAIAdiDLuDLAIAdiDWuDWCBHIINALCZFAIFGdAWAIFiDBGQAdiDBGKAKAQ9eeuDBALAIFGdAQAdiDBGKAKAQ9deuDBAICLFGICX9HMBKAWAOFHWARCEFGRAD9HMBXDKKAVCDTHRCBHWINCBHIINALCZFAIFGdAEAIFiDBGQAdiDBGKAKAQ9eeuDBALAIFGdAQAdiDBGKAKAQ9deuDBAICLFGICX9HMBKAEARFHEAWCEFGWAD9HMBKKALiDBALiDZGK+TjBBBB+XGQALiDLALiDcGX+TGMAMAQ9deGQALiDWALiDkGM+TGpApAQ9deHpDNABtMBADtMBjBBBBjBBJzAp+VApjBBBB9beHQINABAQABiDBAK+TnuDBABCLFGIAQAIiDBAX+TnuDBABCWFGIAQAIiDBAM+TnuDBABCXFHBADCUFGDMBKKApK+qDIDUI99DUCBHI8jJJJJBCA9rGLCZFCWFCBYD11JJBbDBALCB8pDJ1JJB83IZALCWFCBYDn1JJBbDBALCB8pD+M1JJB83IBDNDNAEMBjBBJfHVjBBJfHOjBBJfHRXEKADCD4CDTHWINCBHDINALCZFADFGdABADFiDBGOAdiDBGRARAO9eeuDBALADFGdAOAdiDBGRARAO9deuDBADCLFGDCX9HMBKABAWFHBAICEFGIAE9HMBKALiDWALiDk+THRALiDLALiDc+THOALiDBALiDZ+THVKAVjBBBB+XGVAOAOAV9deGOARARAO9deK9dEEUABCfEAICDTZ1JJJBHLCBHIDNADtMBINDNALAEYDBCDTFGBYDBCU9HMBABAIbDBAICEFHIKAECLFHEADCUFGDMBKKAIK9TEIUCBCBYD/01JJBGEABCIFC98gFGBbD/01JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK/lEEEUDNDNAEABvCIgtMBABHIXEKDNDNADCZ9PMBABHIXEKABHIINAIAEYDBbDBAICLFAECLFYDBbDBAICWFAECWFYDBbDBAICXFAECXFYDBbDBAICZFHIAECZFHEADC9wFGDCS0MBKKADCL6MBINAIAEYDBbDBAECLFHEAICLFHIADC98FGDCI0MBKKDNADtMBINAIAErBB86BBAICEFHIAECEFHEADCUFGDMBKKABK/AEEDUDNDNABCIgtMBABHIXEKAECfEgC+B+C+EW2HLDNDNADCZ9PMBABHIXEKABHIINAIALbDBAICXFALbDBAICWFALbDBAICLFALbDBAICZFHIADC9wFGDCS0MBKKADCL6MBINAIALbDBAICLFHIADC98FGDCI0MBKKDNADtMBINAIAE86BBAICEFHIADCUFGDMBKKABK9TEIUCBCBYD/01JJBGEABCIFC98gFGBbD/01JJBDNDNABzBCZTGD9NMBCUHIABAD9rCffIFCZ4NBCUsMEKAEHIKAIK9+EIUzBHEDNDNCBYD/01JJBGDAECZTGI9NMBCUHEADAI9rCffIFCZ4NBCUsMEKADHEKCBABAE9rCIFC98gCBYD/01JJBFGDbD/01JJBDNADzBCZTGE9NMBADAE9rCffIFCZ4NB8aKK6EIUCBHIDNADtMBDNINABrBBGLAErBBGV9HMEAECEFHEABCEFHBADCUFGDMBXDKKALAV9rHIKAIKK+CEDBCJWK9pffUUffUUffUUffUfffUfffUfBBBBBBBBEEEBEEBEBBEEEBEBBBBBEBEBBBBBEBBBDBBBBBBBBBBBBBBBEEEEEBEBBBBBEBBBBBEEBBBBBBC/sWKXEBBBDBBBJ9kBB",K=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if(typeof WebAssembly!="object")return{supported:!1};var me,ge=WebAssembly.instantiate(xe(fe),{}).then(function(Ce){me=Ce.instance,me.exports.__wasm_call_ctors()});function xe(Ce){for(var Te=new Uint8Array(Ce.length),Re=0;Re<Ce.length;++Re){var De=Ce.charCodeAt(Re);Te[Re]=De>96?De-71:De>64?De-65:De>47?De+4:De>46?63:62}for(var Ie=0,Re=0;Re<Ce.length;++Re)Te[Ie++]=Te[Re]<60?K[Te[Re]]:(Te[Re]-60)*64+Te[++Re];return Te.buffer.slice(0,Ie)}function ye(Ce){if(!Ce)throw new Error("Assertion failed")}function ve(Ce){return new Uint8Array(Ce.buffer,Ce.byteOffset,Ce.byteLength)}function _e(Ce,Te){var Re=me.exports.sbrk,De=Re(Ce.length*4),Ie=Re(Te*4),Be=new Uint8Array(me.exports.memory.buffer),Le=ve(Ce);Be.set(Le,De);var Oe=me.exports.meshopt_optimizeVertexFetchRemap(Ie,De,Ce.length,Te);Be=new Uint8Array(me.exports.memory.buffer);var Fe=new Uint32Array(Te);new Uint8Array(Fe.buffer).set(Be.subarray(Ie,Ie+Te*4)),Le.set(Be.subarray(De,De+Ce.length*4)),Re(De-Re(0));for(var Ue=0;Ue<Ce.length;++Ue)Ce[Ue]=Fe[Ce[Ue]];return[Fe,Oe]}function Ee(Ce){for(var Te=0,Re=0;Re<Ce.length;++Re){var De=Ce[Re];Te=Te<De?De:Te}return Te}function be(Ce,Te,Re,De,Ie,Be,Le,Oe,Fe){var Ue=me.exports.sbrk,Ne=Ue(4),He=Ue(Re*4),ze=Ue(Ie*Be),je=Ue(Re*4),Ge=new Uint8Array(me.exports.memory.buffer);Ge.set(ve(De),ze),Ge.set(ve(Te),je);var Xe=Ce(He,je,Re,ze,Ie,Be,Le,Oe,Fe,Ne);Ge=new Uint8Array(me.exports.memory.buffer);var qe=new Uint32Array(Xe);ve(qe).set(Ge.subarray(He,He+Xe*4));var Qe=new Float32Array(1);return ve(Qe).set(Ge.subarray(Ne,Ne+4)),Ue(Ne-Ue(0)),[qe,Qe[0]]}function Ae(Ce,Te,Re,De){var Ie=me.exports.sbrk,Be=Ie(Re*De),Le=new Uint8Array(me.exports.memory.buffer);Le.set(ve(Te),Be);var Oe=Ce(Be,Re,De);return Ie(Be-Ie(0)),Oe}var Se={LockBorder:1};return{ready:ge,supported:!0,compactMesh:function(Ce){ye(Ce instanceof Uint32Array||Ce instanceof Int32Array||Ce instanceof Uint16Array||Ce instanceof Int16Array),ye(Ce.length%3==0);var Te=Ce.BYTES_PER_ELEMENT==4?Ce:new Uint32Array(Ce);return _e(Te,Ee(Ce)+1)},simplify:function(Ce,Te,Re,De,Ie,Be){ye(Ce instanceof Uint32Array||Ce instanceof Int32Array||Ce instanceof Uint16Array||Ce instanceof Int16Array),ye(Ce.length%3==0),ye(Te instanceof Float32Array),ye(Te.length%Re==0),ye(Re>=3),ye(De%3==0);for(var Le=0,Oe=0;Oe<(Be?Be.length:0);++Oe)Le|=Se[Be[Oe]];var Fe=Ce.BYTES_PER_ELEMENT==4?Ce:new Uint32Array(Ce),Ue=be(me.exports.meshopt_simplify,Fe,Ce.length,Te,Te.length,Re*4,De,Ie,Le);return Ue[0]=Ce instanceof Uint32Array?Ue[0]:new Ce.constructor(Ue[0]),Ue},getScale:function(Ce,Te){return ye(Ce instanceof Float32Array),ye(Ce.length%Te==0),Ae(me.exports.meshopt_simplifyScale,Ce,Ce.length,Te*4)}}}();extend$3({InstancedMesh2:d$1});const BatchedMeshBase=React$4.forwardRef(function(K,me){const ge=reactExports.useRef(null);React$4.useImperativeHandle(me,()=>ge.current,[]);const[xe,ye]=React$4.useState([]),ve=reactExports.useMemo(()=>new Vector3,[]),_e=reactExports.useMemo(()=>new Quaternion,[]),Ee=reactExports.useMemo(()=>new Vector3(1,1,1),[]);reactExports.useEffect(()=>{const Se=ge.current;if(Se)return K.lod!=="off"&&be(),()=>{xe.forEach(Ce=>Ce.dispose()),Se&&Se.disposeBVH()}},[K.geometry,K.lod]),reactExports.useEffect(()=>{const Se=ge.current;if(!Se)return;const Ce=K.batched_positions.byteLength/(3*Float32Array.BYTES_PER_ELEMENT);Se.instancesCount!==Ce&&(Se.capacity<Ce&&Se.resizeBuffers(Ce),Se.clearInstances(),Se.addInstances(Ce,()=>{}),Se.computeBVH());const Te=new DataView(K.batched_positions.buffer,K.batched_positions.byteOffset,K.batched_positions.byteLength),Re=new DataView(K.batched_wxyzs.buffer,K.batched_wxyzs.byteOffset,K.batched_wxyzs.byteLength);Se.updateInstances((De,Ie)=>{const Be=Ie*3*4,Le=Ie*4*4;ve.set(Te.getFloat32(Be,!0),Te.getFloat32(Be+4,!0),Te.getFloat32(Be+8,!0)),_e.set(Re.getFloat32(Le+4,!0),Re.getFloat32(Le+8,!0),Re.getFloat32(Le+12,!0),Re.getFloat32(Le,!0)),De.position.copy(ve),De.quaternion.copy(_e),De.scale.copy(Ee)})},[K.batched_positions,K.batched_wxyzs]),reactExports.useEffect(()=>{const Se=ge.current;Se&&(Se.castShadow=K.cast_shadow,Se.receiveShadow=K.receive_shadow,Se.LODinfo&&Se.LODinfo.objects&&Se.LODinfo.objects.forEach(Ce=>{Ce.castShadow=K.cast_shadow,Ce.receiveShadow=K.receive_shadow}))},[K.cast_shadow,K.receive_shadow]);const be=React$4.useCallback(()=>{const Se=ge.current;if(!Se||!K.geometry)return;xe.forEach(De=>De.dispose()),ye([]);let Ce=[],Te=[];if(K.lod==="auto"){const De=K.geometry;De.computeBoundingSphere();const Ie=De.boundingSphere.radius,Be=De.attributes.position.count;Be>1e4?Ce=[.2,.05,.01]:Be>2e3?Ce=[.4,.1,.03]:Be>500?Ce=[.6,.2,.05]:Ce=[.85,.4,.1];const Le=Math.sqrt(Ie+1e-5);Te=[1,2,3].map(Fe=>Fe*Le)}else K.lod!=="off"&&(Ce=K.lod.map(De=>De[1]),Te=K.lod.map(De=>De[0]));const Re=[];Ce.forEach((De,Ie)=>{const Be=Math.floor(K.geometry.index.array.length*De/3)*3,Le=K.geometry.clone(),Oe=MeshoptSimplifier.simplify(new Uint32Array(Le.index.array),new Float32Array(Le.attributes.position.array),3,Be,.01,["LockBorder"])[0];Le.index.array.set(Oe),Le.index.needsUpdate=!0,Le.setDrawRange(0,Oe.length);const Fe=Array.isArray(K.material)?K.material.map(Ue=>Ue.clone()):K.material.clone();Se.addLOD(Le,Fe,Te[Ie]),Re.push(Le)}),ye(Re)},[K.lod,K.geometry]),[Ae]=React$4.useState(()=>({capacity:1}));return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("instancedMesh2",{ref:ge,args:[K.geometry,K.material,Ae],castShadow:K.cast_shadow,receiveShadow:K.receive_shadow,scale:K.scale}),K.clickable&&K.geometry&&jsxRuntimeExports.jsx(BatchedMeshHoverOutlines,{geometry:K.geometry,batched_positions:K.batched_positions,batched_wxyzs:K.batched_wxyzs})]})}),BatchedMesh=React$4.forwardRef(function(K,me){const xe=React$4.useContext(ViewerContext).useSceneTree(_e=>_e.nodeFromName[K.name]?.clickable)??!1,ye=reactExports.useMemo(()=>{const _e=createStandardMaterial({material:K.props.material,color:K.props.color,wireframe:K.props.wireframe,opacity:K.props.opacity,flat_shading:K.props.flat_shading,side:K.props.side});return K.props.opacity!==null&&K.props.opacity<1&&(_e.transparent=!0),_e},[K.props.material,K.props.color,K.props.wireframe,K.props.opacity,K.props.flat_shading,K.props.side]),ve=reactExports.useMemo(()=>{const _e=new BufferGeometry;return _e.setAttribute("position",new BufferAttribute(new Float32Array(K.props.vertices.buffer.slice(K.props.vertices.byteOffset,K.props.vertices.byteOffset+K.props.vertices.byteLength)),3)),_e.setIndex(new BufferAttribute(new Uint32Array(K.props.faces.buffer.slice(K.props.faces.byteOffset,K.props.faces.byteOffset+K.props.faces.byteLength)),1)),_e.computeVertexNormals(),_e.computeBoundingSphere(),_e},[K.props.vertices.buffer,K.props.faces.buffer]);return jsxRuntimeExports.jsx(BatchedMeshBase,{ref:me,geometry:ve,material:ye,batched_positions:K.props.batched_positions,batched_wxyzs:K.props.batched_wxyzs,lod:K.props.lod,cast_shadow:K.props.cast_shadow,receive_shadow:K.props.receive_shadow,clickable:xe})});function mergeGeometries(fe,K=!1){const me=fe[0].index!==null,ge=new Set(Object.keys(fe[0].attributes)),xe=new Set(Object.keys(fe[0].morphAttributes)),ye={},ve={},_e=fe[0].morphTargetsRelative,Ee=new BufferGeometry;let be=0;for(let Ae=0;Ae<fe.length;++Ae){const Se=fe[Ae];let Ce=0;if(me!==(Se.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ae+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const Te in Se.attributes){if(!ge.has(Te))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ae+'. All geometries must have compatible attributes; make sure "'+Te+'" attribute exists among all geometries, or in none of them.'),null;ye[Te]===void 0&&(ye[Te]=[]),ye[Te].push(Se.attributes[Te]),Ce++}if(Ce!==ge.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ae+". Make sure all geometries have the same number of attributes."),null;if(_e!==Se.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ae+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const Te in Se.morphAttributes){if(!xe.has(Te))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ae+".  .morphAttributes must be consistent throughout all geometries."),null;ve[Te]===void 0&&(ve[Te]=[]),ve[Te].push(Se.morphAttributes[Te])}if(K){let Te;if(me)Te=Se.index.count;else if(Se.attributes.position!==void 0)Te=Se.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+Ae+". The geometry must have either an index or a position attribute"),null;Ee.addGroup(be,Te,Ae),be+=Te}}if(me){let Ae=0;const Se=[];for(let Ce=0;Ce<fe.length;++Ce){const Te=fe[Ce].index;for(let Re=0;Re<Te.count;++Re)Se.push(Te.getX(Re)+Ae);Ae+=fe[Ce].attributes.position.count}Ee.setIndex(Se)}for(const Ae in ye){const Se=mergeAttributes(ye[Ae]);if(!Se)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+Ae+" attribute."),null;Ee.setAttribute(Ae,Se)}for(const Ae in ve){const Se=ve[Ae][0].length;if(Se===0)break;Ee.morphAttributes=Ee.morphAttributes||{},Ee.morphAttributes[Ae]=[];for(let Ce=0;Ce<Se;++Ce){const Te=[];for(let De=0;De<ve[Ae].length;++De)Te.push(ve[Ae][De][Ce]);const Re=mergeAttributes(Te);if(!Re)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+Ae+" morphAttribute."),null;Ee.morphAttributes[Ae].push(Re)}}return Ee}function mergeAttributes(fe){let K,me,ge,xe=-1,ye=0;for(let be=0;be<fe.length;++be){const Ae=fe[be];if(K===void 0&&(K=Ae.array.constructor),K!==Ae.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(me===void 0&&(me=Ae.itemSize),me!==Ae.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(ge===void 0&&(ge=Ae.normalized),ge!==Ae.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(xe===-1&&(xe=Ae.gpuType),xe!==Ae.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;ye+=Ae.count*me}const ve=new K(ye),_e=new BufferAttribute(ve,me,ge);let Ee=0;for(let be=0;be<fe.length;++be){const Ae=fe[be];if(Ae.isInterleavedBufferAttribute){const Se=Ee/me;for(let Ce=0,Te=Ae.count;Ce<Te;Ce++)for(let Re=0;Re<me;Re++){const De=Ae.getComponent(Ce,Re);_e.setComponent(Ce+Se,Re,De)}}else ve.set(Ae.array,Ee);Ee+=Ae.count*me}return xe!==void 0&&(_e.gpuType=xe),_e}function toTrianglesDrawMode(fe,K){if(K===TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),fe;if(K===TriangleFanDrawMode||K===TriangleStripDrawMode){let me=fe.getIndex();if(me===null){const ve=[],_e=fe.getAttribute("position");if(_e!==void 0){for(let Ee=0;Ee<_e.count;Ee++)ve.push(Ee);fe.setIndex(ve),me=fe.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),fe}const ge=me.count-2,xe=[];if(K===TriangleFanDrawMode)for(let ve=1;ve<=ge;ve++)xe.push(me.getX(0)),xe.push(me.getX(ve)),xe.push(me.getX(ve+1));else for(let ve=0;ve<ge;ve++)ve%2===0?(xe.push(me.getX(ve)),xe.push(me.getX(ve+1)),xe.push(me.getX(ve+2))):(xe.push(me.getX(ve+2)),xe.push(me.getX(ve+1)),xe.push(me.getX(ve)));xe.length/3!==ge&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const ye=fe.clone();return ye.setIndex(xe),ye.clearGroups(),ye}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",K),fe}class GLTFLoader extends Loader{constructor(K){super(K),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(me){return new GLTFMaterialsClearcoatExtension(me)}),this.register(function(me){return new GLTFMaterialsDispersionExtension(me)}),this.register(function(me){return new GLTFTextureBasisUExtension(me)}),this.register(function(me){return new GLTFTextureWebPExtension(me)}),this.register(function(me){return new GLTFTextureAVIFExtension(me)}),this.register(function(me){return new GLTFMaterialsSheenExtension(me)}),this.register(function(me){return new GLTFMaterialsTransmissionExtension(me)}),this.register(function(me){return new GLTFMaterialsVolumeExtension(me)}),this.register(function(me){return new GLTFMaterialsIorExtension(me)}),this.register(function(me){return new GLTFMaterialsEmissiveStrengthExtension(me)}),this.register(function(me){return new GLTFMaterialsSpecularExtension(me)}),this.register(function(me){return new GLTFMaterialsIridescenceExtension(me)}),this.register(function(me){return new GLTFMaterialsAnisotropyExtension(me)}),this.register(function(me){return new GLTFMaterialsBumpExtension(me)}),this.register(function(me){return new GLTFLightsExtension(me)}),this.register(function(me){return new GLTFMeshoptCompression(me)}),this.register(function(me){return new GLTFMeshGpuInstancing(me)})}load(K,me,ge,xe){const ye=this;let ve;if(this.resourcePath!=="")ve=this.resourcePath;else if(this.path!==""){const be=LoaderUtils.extractUrlBase(K);ve=LoaderUtils.resolveURL(be,this.path)}else ve=LoaderUtils.extractUrlBase(K);this.manager.itemStart(K);const _e=function(be){xe?xe(be):console.error(be),ye.manager.itemError(K),ye.manager.itemEnd(K)},Ee=new FileLoader(this.manager);Ee.setPath(this.path),Ee.setResponseType("arraybuffer"),Ee.setRequestHeader(this.requestHeader),Ee.setWithCredentials(this.withCredentials),Ee.load(K,function(be){try{ye.parse(be,ve,function(Ae){me(Ae),ye.manager.itemEnd(K)},_e)}catch(Ae){_e(Ae)}},ge,_e)}setDRACOLoader(K){return this.dracoLoader=K,this}setKTX2Loader(K){return this.ktx2Loader=K,this}setMeshoptDecoder(K){return this.meshoptDecoder=K,this}register(K){return this.pluginCallbacks.indexOf(K)===-1&&this.pluginCallbacks.push(K),this}unregister(K){return this.pluginCallbacks.indexOf(K)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(K),1),this}parse(K,me,ge,xe){let ye;const ve={},_e={},Ee=new TextDecoder;if(typeof K=="string")ye=JSON.parse(K);else if(K instanceof ArrayBuffer)if(Ee.decode(new Uint8Array(K,0,4))===BINARY_EXTENSION_HEADER_MAGIC){try{ve[EXTENSIONS.KHR_BINARY_GLTF]=new GLTFBinaryExtension(K)}catch(Se){xe&&xe(Se);return}ye=JSON.parse(ve[EXTENSIONS.KHR_BINARY_GLTF].content)}else ye=JSON.parse(Ee.decode(K));else ye=K;if(ye.asset===void 0||ye.asset.version[0]<2){xe&&xe(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const be=new GLTFParser(ye,{path:me||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});be.fileLoader.setRequestHeader(this.requestHeader);for(let Ae=0;Ae<this.pluginCallbacks.length;Ae++){const Se=this.pluginCallbacks[Ae](be);Se.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),_e[Se.name]=Se,ve[Se.name]=!0}if(ye.extensionsUsed)for(let Ae=0;Ae<ye.extensionsUsed.length;++Ae){const Se=ye.extensionsUsed[Ae],Ce=ye.extensionsRequired||[];switch(Se){case EXTENSIONS.KHR_MATERIALS_UNLIT:ve[Se]=new GLTFMaterialsUnlitExtension;break;case EXTENSIONS.KHR_DRACO_MESH_COMPRESSION:ve[Se]=new GLTFDracoMeshCompressionExtension(ye,this.dracoLoader);break;case EXTENSIONS.KHR_TEXTURE_TRANSFORM:ve[Se]=new GLTFTextureTransformExtension;break;case EXTENSIONS.KHR_MESH_QUANTIZATION:ve[Se]=new GLTFMeshQuantizationExtension;break;default:Ce.indexOf(Se)>=0&&_e[Se]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+Se+'".')}}be.setExtensions(ve),be.setPlugins(_e),be.parse(ge,xe)}parseAsync(K,me){const ge=this;return new Promise(function(xe,ye){ge.parse(K,me,xe,ye)})}}function GLTFRegistry(){let fe={};return{get:function(K){return fe[K]},add:function(K,me){fe[K]=me},remove:function(K){delete fe[K]},removeAll:function(){fe={}}}}const EXTENSIONS={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class GLTFLightsExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const K=this.parser,me=this.parser.json.nodes||[];for(let ge=0,xe=me.length;ge<xe;ge++){const ye=me[ge];ye.extensions&&ye.extensions[this.name]&&ye.extensions[this.name].light!==void 0&&K._addNodeRef(this.cache,ye.extensions[this.name].light)}}_loadLight(K){const me=this.parser,ge="light:"+K;let xe=me.cache.get(ge);if(xe)return xe;const ye=me.json,Ee=((ye.extensions&&ye.extensions[this.name]||{}).lights||[])[K];let be;const Ae=new Color$1(16777215);Ee.color!==void 0&&Ae.setRGB(Ee.color[0],Ee.color[1],Ee.color[2],LinearSRGBColorSpace);const Se=Ee.range!==void 0?Ee.range:0;switch(Ee.type){case"directional":be=new DirectionalLight(Ae),be.target.position.set(0,0,-1),be.add(be.target);break;case"point":be=new PointLight(Ae),be.distance=Se;break;case"spot":be=new SpotLight(Ae),be.distance=Se,Ee.spot=Ee.spot||{},Ee.spot.innerConeAngle=Ee.spot.innerConeAngle!==void 0?Ee.spot.innerConeAngle:0,Ee.spot.outerConeAngle=Ee.spot.outerConeAngle!==void 0?Ee.spot.outerConeAngle:Math.PI/4,be.angle=Ee.spot.outerConeAngle,be.penumbra=1-Ee.spot.innerConeAngle/Ee.spot.outerConeAngle,be.target.position.set(0,0,-1),be.add(be.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+Ee.type)}return be.position.set(0,0,0),assignExtrasToUserData(be,Ee),Ee.intensity!==void 0&&(be.intensity=Ee.intensity),be.name=me.createUniqueName(Ee.name||"light_"+K),xe=Promise.resolve(be),me.cache.add(ge,xe),xe}getDependency(K,me){if(K==="light")return this._loadLight(me)}createNodeAttachment(K){const me=this,ge=this.parser,ye=ge.json.nodes[K],_e=(ye.extensions&&ye.extensions[this.name]||{}).light;return _e===void 0?null:this._loadLight(_e).then(function(Ee){return ge._getNodeRef(me.cache,_e,Ee)})}}class GLTFMaterialsUnlitExtension{constructor(){this.name=EXTENSIONS.KHR_MATERIALS_UNLIT}getMaterialType(){return MeshBasicMaterial}extendParams(K,me,ge){const xe=[];K.color=new Color$1(1,1,1),K.opacity=1;const ye=me.pbrMetallicRoughness;if(ye){if(Array.isArray(ye.baseColorFactor)){const ve=ye.baseColorFactor;K.color.setRGB(ve[0],ve[1],ve[2],LinearSRGBColorSpace),K.opacity=ve[3]}ye.baseColorTexture!==void 0&&xe.push(ge.assignTexture(K,"map",ye.baseColorTexture,SRGBColorSpace))}return Promise.all(xe)}}class GLTFMaterialsEmissiveStrengthExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(K,me){const xe=this.parser.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=xe.extensions[this.name].emissiveStrength;return ye!==void 0&&(me.emissiveIntensity=ye),Promise.resolve()}}class GLTFMaterialsClearcoatExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_CLEARCOAT}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const ge=this.parser,xe=ge.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=[],ve=xe.extensions[this.name];if(ve.clearcoatFactor!==void 0&&(me.clearcoat=ve.clearcoatFactor),ve.clearcoatTexture!==void 0&&ye.push(ge.assignTexture(me,"clearcoatMap",ve.clearcoatTexture)),ve.clearcoatRoughnessFactor!==void 0&&(me.clearcoatRoughness=ve.clearcoatRoughnessFactor),ve.clearcoatRoughnessTexture!==void 0&&ye.push(ge.assignTexture(me,"clearcoatRoughnessMap",ve.clearcoatRoughnessTexture)),ve.clearcoatNormalTexture!==void 0&&(ye.push(ge.assignTexture(me,"clearcoatNormalMap",ve.clearcoatNormalTexture)),ve.clearcoatNormalTexture.scale!==void 0)){const _e=ve.clearcoatNormalTexture.scale;me.clearcoatNormalScale=new Vector2(_e,_e)}return Promise.all(ye)}}class GLTFMaterialsDispersionExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_DISPERSION}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const xe=this.parser.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=xe.extensions[this.name];return me.dispersion=ye.dispersion!==void 0?ye.dispersion:0,Promise.resolve()}}class GLTFMaterialsIridescenceExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_IRIDESCENCE}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const ge=this.parser,xe=ge.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=[],ve=xe.extensions[this.name];return ve.iridescenceFactor!==void 0&&(me.iridescence=ve.iridescenceFactor),ve.iridescenceTexture!==void 0&&ye.push(ge.assignTexture(me,"iridescenceMap",ve.iridescenceTexture)),ve.iridescenceIor!==void 0&&(me.iridescenceIOR=ve.iridescenceIor),me.iridescenceThicknessRange===void 0&&(me.iridescenceThicknessRange=[100,400]),ve.iridescenceThicknessMinimum!==void 0&&(me.iridescenceThicknessRange[0]=ve.iridescenceThicknessMinimum),ve.iridescenceThicknessMaximum!==void 0&&(me.iridescenceThicknessRange[1]=ve.iridescenceThicknessMaximum),ve.iridescenceThicknessTexture!==void 0&&ye.push(ge.assignTexture(me,"iridescenceThicknessMap",ve.iridescenceThicknessTexture)),Promise.all(ye)}}class GLTFMaterialsSheenExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_SHEEN}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const ge=this.parser,xe=ge.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=[];me.sheenColor=new Color$1(0,0,0),me.sheenRoughness=0,me.sheen=1;const ve=xe.extensions[this.name];if(ve.sheenColorFactor!==void 0){const _e=ve.sheenColorFactor;me.sheenColor.setRGB(_e[0],_e[1],_e[2],LinearSRGBColorSpace)}return ve.sheenRoughnessFactor!==void 0&&(me.sheenRoughness=ve.sheenRoughnessFactor),ve.sheenColorTexture!==void 0&&ye.push(ge.assignTexture(me,"sheenColorMap",ve.sheenColorTexture,SRGBColorSpace)),ve.sheenRoughnessTexture!==void 0&&ye.push(ge.assignTexture(me,"sheenRoughnessMap",ve.sheenRoughnessTexture)),Promise.all(ye)}}class GLTFMaterialsTransmissionExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_TRANSMISSION}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const ge=this.parser,xe=ge.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=[],ve=xe.extensions[this.name];return ve.transmissionFactor!==void 0&&(me.transmission=ve.transmissionFactor),ve.transmissionTexture!==void 0&&ye.push(ge.assignTexture(me,"transmissionMap",ve.transmissionTexture)),Promise.all(ye)}}class GLTFMaterialsVolumeExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_VOLUME}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const ge=this.parser,xe=ge.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=[],ve=xe.extensions[this.name];me.thickness=ve.thicknessFactor!==void 0?ve.thicknessFactor:0,ve.thicknessTexture!==void 0&&ye.push(ge.assignTexture(me,"thicknessMap",ve.thicknessTexture)),me.attenuationDistance=ve.attenuationDistance||1/0;const _e=ve.attenuationColor||[1,1,1];return me.attenuationColor=new Color$1().setRGB(_e[0],_e[1],_e[2],LinearSRGBColorSpace),Promise.all(ye)}}class GLTFMaterialsIorExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_IOR}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const xe=this.parser.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=xe.extensions[this.name];return me.ior=ye.ior!==void 0?ye.ior:1.5,Promise.resolve()}}class GLTFMaterialsSpecularExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_SPECULAR}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const ge=this.parser,xe=ge.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=[],ve=xe.extensions[this.name];me.specularIntensity=ve.specularFactor!==void 0?ve.specularFactor:1,ve.specularTexture!==void 0&&ye.push(ge.assignTexture(me,"specularIntensityMap",ve.specularTexture));const _e=ve.specularColorFactor||[1,1,1];return me.specularColor=new Color$1().setRGB(_e[0],_e[1],_e[2],LinearSRGBColorSpace),ve.specularColorTexture!==void 0&&ye.push(ge.assignTexture(me,"specularColorMap",ve.specularColorTexture,SRGBColorSpace)),Promise.all(ye)}}class GLTFMaterialsBumpExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.EXT_MATERIALS_BUMP}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const ge=this.parser,xe=ge.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=[],ve=xe.extensions[this.name];return me.bumpScale=ve.bumpFactor!==void 0?ve.bumpFactor:1,ve.bumpTexture!==void 0&&ye.push(ge.assignTexture(me,"bumpMap",ve.bumpTexture)),Promise.all(ye)}}class GLTFMaterialsAnisotropyExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_MATERIALS_ANISOTROPY}getMaterialType(K){const ge=this.parser.json.materials[K];return!ge.extensions||!ge.extensions[this.name]?null:MeshPhysicalMaterial}extendMaterialParams(K,me){const ge=this.parser,xe=ge.json.materials[K];if(!xe.extensions||!xe.extensions[this.name])return Promise.resolve();const ye=[],ve=xe.extensions[this.name];return ve.anisotropyStrength!==void 0&&(me.anisotropy=ve.anisotropyStrength),ve.anisotropyRotation!==void 0&&(me.anisotropyRotation=ve.anisotropyRotation),ve.anisotropyTexture!==void 0&&ye.push(ge.assignTexture(me,"anisotropyMap",ve.anisotropyTexture)),Promise.all(ye)}}class GLTFTextureBasisUExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.KHR_TEXTURE_BASISU}loadTexture(K){const me=this.parser,ge=me.json,xe=ge.textures[K];if(!xe.extensions||!xe.extensions[this.name])return null;const ye=xe.extensions[this.name],ve=me.options.ktx2Loader;if(!ve){if(ge.extensionsRequired&&ge.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return me.loadTextureImage(K,ye.source,ve)}}class GLTFTextureWebPExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(K){const me=this.name,ge=this.parser,xe=ge.json,ye=xe.textures[K];if(!ye.extensions||!ye.extensions[me])return null;const ve=ye.extensions[me],_e=xe.images[ve.source];let Ee=ge.textureLoader;if(_e.uri){const be=ge.options.manager.getHandler(_e.uri);be!==null&&(Ee=be)}return this.detectSupport().then(function(be){if(be)return ge.loadTextureImage(K,ve.source,Ee);if(xe.extensionsRequired&&xe.extensionsRequired.indexOf(me)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return ge.loadTexture(K)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(K){const me=new Image;me.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",me.onload=me.onerror=function(){K(me.height===1)}})),this.isSupported}}class GLTFTextureAVIFExtension{constructor(K){this.parser=K,this.name=EXTENSIONS.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(K){const me=this.name,ge=this.parser,xe=ge.json,ye=xe.textures[K];if(!ye.extensions||!ye.extensions[me])return null;const ve=ye.extensions[me],_e=xe.images[ve.source];let Ee=ge.textureLoader;if(_e.uri){const be=ge.options.manager.getHandler(_e.uri);be!==null&&(Ee=be)}return this.detectSupport().then(function(be){if(be)return ge.loadTextureImage(K,ve.source,Ee);if(xe.extensionsRequired&&xe.extensionsRequired.indexOf(me)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return ge.loadTexture(K)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(K){const me=new Image;me.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",me.onload=me.onerror=function(){K(me.height===1)}})),this.isSupported}}class GLTFMeshoptCompression{constructor(K){this.name=EXTENSIONS.EXT_MESHOPT_COMPRESSION,this.parser=K}loadBufferView(K){const me=this.parser.json,ge=me.bufferViews[K];if(ge.extensions&&ge.extensions[this.name]){const xe=ge.extensions[this.name],ye=this.parser.getDependency("buffer",xe.buffer),ve=this.parser.options.meshoptDecoder;if(!ve||!ve.supported){if(me.extensionsRequired&&me.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return ye.then(function(_e){const Ee=xe.byteOffset||0,be=xe.byteLength||0,Ae=xe.count,Se=xe.byteStride,Ce=new Uint8Array(_e,Ee,be);return ve.decodeGltfBufferAsync?ve.decodeGltfBufferAsync(Ae,Se,Ce,xe.mode,xe.filter).then(function(Te){return Te.buffer}):ve.ready.then(function(){const Te=new ArrayBuffer(Ae*Se);return ve.decodeGltfBuffer(new Uint8Array(Te),Ae,Se,Ce,xe.mode,xe.filter),Te})})}else return null}}class GLTFMeshGpuInstancing{constructor(K){this.name=EXTENSIONS.EXT_MESH_GPU_INSTANCING,this.parser=K}createNodeMesh(K){const me=this.parser.json,ge=me.nodes[K];if(!ge.extensions||!ge.extensions[this.name]||ge.mesh===void 0)return null;const xe=me.meshes[ge.mesh];for(const be of xe.primitives)if(be.mode!==WEBGL_CONSTANTS.TRIANGLES&&be.mode!==WEBGL_CONSTANTS.TRIANGLE_STRIP&&be.mode!==WEBGL_CONSTANTS.TRIANGLE_FAN&&be.mode!==void 0)return null;const ve=ge.extensions[this.name].attributes,_e=[],Ee={};for(const be in ve)_e.push(this.parser.getDependency("accessor",ve[be]).then(Ae=>(Ee[be]=Ae,Ee[be])));return _e.length<1?null:(_e.push(this.parser.createNodeMesh(K)),Promise.all(_e).then(be=>{const Ae=be.pop(),Se=Ae.isGroup?Ae.children:[Ae],Ce=be[0].count,Te=[];for(const Re of Se){const De=new Matrix4,Ie=new Vector3,Be=new Quaternion,Le=new Vector3(1,1,1),Oe=new InstancedMesh(Re.geometry,Re.material,Ce);for(let Fe=0;Fe<Ce;Fe++)Ee.TRANSLATION&&Ie.fromBufferAttribute(Ee.TRANSLATION,Fe),Ee.ROTATION&&Be.fromBufferAttribute(Ee.ROTATION,Fe),Ee.SCALE&&Le.fromBufferAttribute(Ee.SCALE,Fe),Oe.setMatrixAt(Fe,De.compose(Ie,Be,Le));for(const Fe in Ee)if(Fe==="_COLOR_0"){const Ue=Ee[Fe];Oe.instanceColor=new InstancedBufferAttribute(Ue.array,Ue.itemSize,Ue.normalized)}else Fe!=="TRANSLATION"&&Fe!=="ROTATION"&&Fe!=="SCALE"&&Re.geometry.setAttribute(Fe,Ee[Fe]);Object3D.prototype.copy.call(Oe,Re),this.parser.assignFinalMaterial(Oe),Te.push(Oe)}return Ae.isGroup?(Ae.clear(),Ae.add(...Te),Ae):Te[0]}))}}const BINARY_EXTENSION_HEADER_MAGIC="glTF",BINARY_EXTENSION_HEADER_LENGTH=12,BINARY_EXTENSION_CHUNK_TYPES={JSON:1313821514,BIN:5130562};class GLTFBinaryExtension{constructor(K){this.name=EXTENSIONS.KHR_BINARY_GLTF,this.content=null,this.body=null;const me=new DataView(K,0,BINARY_EXTENSION_HEADER_LENGTH),ge=new TextDecoder;if(this.header={magic:ge.decode(new Uint8Array(K.slice(0,4))),version:me.getUint32(4,!0),length:me.getUint32(8,!0)},this.header.magic!==BINARY_EXTENSION_HEADER_MAGIC)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const xe=this.header.length-BINARY_EXTENSION_HEADER_LENGTH,ye=new DataView(K,BINARY_EXTENSION_HEADER_LENGTH);let ve=0;for(;ve<xe;){const _e=ye.getUint32(ve,!0);ve+=4;const Ee=ye.getUint32(ve,!0);if(ve+=4,Ee===BINARY_EXTENSION_CHUNK_TYPES.JSON){const be=new Uint8Array(K,BINARY_EXTENSION_HEADER_LENGTH+ve,_e);this.content=ge.decode(be)}else if(Ee===BINARY_EXTENSION_CHUNK_TYPES.BIN){const be=BINARY_EXTENSION_HEADER_LENGTH+ve;this.body=K.slice(be,be+_e)}ve+=_e}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class GLTFDracoMeshCompressionExtension{constructor(K,me){if(!me)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=EXTENSIONS.KHR_DRACO_MESH_COMPRESSION,this.json=K,this.dracoLoader=me,this.dracoLoader.preload()}decodePrimitive(K,me){const ge=this.json,xe=this.dracoLoader,ye=K.extensions[this.name].bufferView,ve=K.extensions[this.name].attributes,_e={},Ee={},be={};for(const Ae in ve){const Se=ATTRIBUTES[Ae]||Ae.toLowerCase();_e[Se]=ve[Ae]}for(const Ae in K.attributes){const Se=ATTRIBUTES[Ae]||Ae.toLowerCase();if(ve[Ae]!==void 0){const Ce=ge.accessors[K.attributes[Ae]],Te=WEBGL_COMPONENT_TYPES[Ce.componentType];be[Se]=Te.name,Ee[Se]=Ce.normalized===!0}}return me.getDependency("bufferView",ye).then(function(Ae){return new Promise(function(Se,Ce){xe.decodeDracoFile(Ae,function(Te){for(const Re in Te.attributes){const De=Te.attributes[Re],Ie=Ee[Re];Ie!==void 0&&(De.normalized=Ie)}Se(Te)},_e,be,LinearSRGBColorSpace,Ce)})})}}class GLTFTextureTransformExtension{constructor(){this.name=EXTENSIONS.KHR_TEXTURE_TRANSFORM}extendTexture(K,me){return(me.texCoord===void 0||me.texCoord===K.channel)&&me.offset===void 0&&me.rotation===void 0&&me.scale===void 0||(K=K.clone(),me.texCoord!==void 0&&(K.channel=me.texCoord),me.offset!==void 0&&K.offset.fromArray(me.offset),me.rotation!==void 0&&(K.rotation=me.rotation),me.scale!==void 0&&K.repeat.fromArray(me.scale),K.needsUpdate=!0),K}}class GLTFMeshQuantizationExtension{constructor(){this.name=EXTENSIONS.KHR_MESH_QUANTIZATION}}class GLTFCubicSplineInterpolant extends Interpolant{constructor(K,me,ge,xe){super(K,me,ge,xe)}copySampleValue_(K){const me=this.resultBuffer,ge=this.sampleValues,xe=this.valueSize,ye=K*xe*3+xe;for(let ve=0;ve!==xe;ve++)me[ve]=ge[ye+ve];return me}interpolate_(K,me,ge,xe){const ye=this.resultBuffer,ve=this.sampleValues,_e=this.valueSize,Ee=_e*2,be=_e*3,Ae=xe-me,Se=(ge-me)/Ae,Ce=Se*Se,Te=Ce*Se,Re=K*be,De=Re-be,Ie=-2*Te+3*Ce,Be=Te-Ce,Le=1-Ie,Oe=Be-Ce+Se;for(let Fe=0;Fe!==_e;Fe++){const Ue=ve[De+Fe+_e],Ne=ve[De+Fe+Ee]*Ae,He=ve[Re+Fe+_e],ze=ve[Re+Fe]*Ae;ye[Fe]=Le*Ue+Oe*Ne+Ie*He+Be*ze}return ye}}const _q=new Quaternion;class GLTFCubicSplineQuaternionInterpolant extends GLTFCubicSplineInterpolant{interpolate_(K,me,ge,xe){const ye=super.interpolate_(K,me,ge,xe);return _q.fromArray(ye).normalize().toArray(ye),ye}}const WEBGL_CONSTANTS={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},WEBGL_COMPONENT_TYPES={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},WEBGL_FILTERS={9728:NearestFilter,9729:LinearFilter,9984:NearestMipmapNearestFilter,9985:LinearMipmapNearestFilter,9986:NearestMipmapLinearFilter,9987:LinearMipmapLinearFilter},WEBGL_WRAPPINGS={33071:ClampToEdgeWrapping,33648:MirroredRepeatWrapping,10497:RepeatWrapping},WEBGL_TYPE_SIZES={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ATTRIBUTES={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},PATH_PROPERTIES={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},INTERPOLATION={CUBICSPLINE:void 0,LINEAR:InterpolateLinear,STEP:InterpolateDiscrete},ALPHA_MODES={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function createDefaultMaterial(fe){return fe.DefaultMaterial===void 0&&(fe.DefaultMaterial=new MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:FrontSide})),fe.DefaultMaterial}function addUnknownExtensionsToUserData(fe,K,me){for(const ge in me.extensions)fe[ge]===void 0&&(K.userData.gltfExtensions=K.userData.gltfExtensions||{},K.userData.gltfExtensions[ge]=me.extensions[ge])}function assignExtrasToUserData(fe,K){K.extras!==void 0&&(typeof K.extras=="object"?Object.assign(fe.userData,K.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+K.extras))}function addMorphTargets(fe,K,me){let ge=!1,xe=!1,ye=!1;for(let be=0,Ae=K.length;be<Ae;be++){const Se=K[be];if(Se.POSITION!==void 0&&(ge=!0),Se.NORMAL!==void 0&&(xe=!0),Se.COLOR_0!==void 0&&(ye=!0),ge&&xe&&ye)break}if(!ge&&!xe&&!ye)return Promise.resolve(fe);const ve=[],_e=[],Ee=[];for(let be=0,Ae=K.length;be<Ae;be++){const Se=K[be];if(ge){const Ce=Se.POSITION!==void 0?me.getDependency("accessor",Se.POSITION):fe.attributes.position;ve.push(Ce)}if(xe){const Ce=Se.NORMAL!==void 0?me.getDependency("accessor",Se.NORMAL):fe.attributes.normal;_e.push(Ce)}if(ye){const Ce=Se.COLOR_0!==void 0?me.getDependency("accessor",Se.COLOR_0):fe.attributes.color;Ee.push(Ce)}}return Promise.all([Promise.all(ve),Promise.all(_e),Promise.all(Ee)]).then(function(be){const Ae=be[0],Se=be[1],Ce=be[2];return ge&&(fe.morphAttributes.position=Ae),xe&&(fe.morphAttributes.normal=Se),ye&&(fe.morphAttributes.color=Ce),fe.morphTargetsRelative=!0,fe})}function updateMorphTargets(fe,K){if(fe.updateMorphTargets(),K.weights!==void 0)for(let me=0,ge=K.weights.length;me<ge;me++)fe.morphTargetInfluences[me]=K.weights[me];if(K.extras&&Array.isArray(K.extras.targetNames)){const me=K.extras.targetNames;if(fe.morphTargetInfluences.length===me.length){fe.morphTargetDictionary={};for(let ge=0,xe=me.length;ge<xe;ge++)fe.morphTargetDictionary[me[ge]]=ge}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function createPrimitiveKey(fe){let K;const me=fe.extensions&&fe.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION];if(me?K="draco:"+me.bufferView+":"+me.indices+":"+createAttributesKey(me.attributes):K=fe.indices+":"+createAttributesKey(fe.attributes)+":"+fe.mode,fe.targets!==void 0)for(let ge=0,xe=fe.targets.length;ge<xe;ge++)K+=":"+createAttributesKey(fe.targets[ge]);return K}function createAttributesKey(fe){let K="";const me=Object.keys(fe).sort();for(let ge=0,xe=me.length;ge<xe;ge++)K+=me[ge]+":"+fe[me[ge]]+";";return K}function getNormalizedComponentScale(fe){switch(fe){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function getImageURIMimeType(fe){return fe.search(/\.jpe?g($|\?)/i)>0||fe.search(/^data\:image\/jpeg/)===0?"image/jpeg":fe.search(/\.webp($|\?)/i)>0||fe.search(/^data\:image\/webp/)===0?"image/webp":fe.search(/\.ktx2($|\?)/i)>0||fe.search(/^data\:image\/ktx2/)===0?"image/ktx2":"image/png"}const _identityMatrix=new Matrix4;class GLTFParser{constructor(K={},me={}){this.json=K,this.extensions={},this.plugins={},this.options=me,this.cache=new GLTFRegistry,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let ge=!1,xe=-1,ye=!1,ve=-1;if(typeof navigator<"u"){const _e=navigator.userAgent;ge=/^((?!chrome|android).)*safari/i.test(_e)===!0;const Ee=_e.match(/Version\/(\d+)/);xe=ge&&Ee?parseInt(Ee[1],10):-1,ye=_e.indexOf("Firefox")>-1,ve=ye?_e.match(/Firefox\/([0-9]+)\./)[1]:-1}typeof createImageBitmap>"u"||ge&&xe<17||ye&&ve<98?this.textureLoader=new TextureLoader(this.options.manager):this.textureLoader=new ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(K){this.extensions=K}setPlugins(K){this.plugins=K}parse(K,me){const ge=this,xe=this.json,ye=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(ve){return ve._markDefs&&ve._markDefs()}),Promise.all(this._invokeAll(function(ve){return ve.beforeRoot&&ve.beforeRoot()})).then(function(){return Promise.all([ge.getDependencies("scene"),ge.getDependencies("animation"),ge.getDependencies("camera")])}).then(function(ve){const _e={scene:ve[0][xe.scene||0],scenes:ve[0],animations:ve[1],cameras:ve[2],asset:xe.asset,parser:ge,userData:{}};return addUnknownExtensionsToUserData(ye,_e,xe),assignExtrasToUserData(_e,xe),Promise.all(ge._invokeAll(function(Ee){return Ee.afterRoot&&Ee.afterRoot(_e)})).then(function(){for(const Ee of _e.scenes)Ee.updateMatrixWorld();K(_e)})}).catch(me)}_markDefs(){const K=this.json.nodes||[],me=this.json.skins||[],ge=this.json.meshes||[];for(let xe=0,ye=me.length;xe<ye;xe++){const ve=me[xe].joints;for(let _e=0,Ee=ve.length;_e<Ee;_e++)K[ve[_e]].isBone=!0}for(let xe=0,ye=K.length;xe<ye;xe++){const ve=K[xe];ve.mesh!==void 0&&(this._addNodeRef(this.meshCache,ve.mesh),ve.skin!==void 0&&(ge[ve.mesh].isSkinnedMesh=!0)),ve.camera!==void 0&&this._addNodeRef(this.cameraCache,ve.camera)}}_addNodeRef(K,me){me!==void 0&&(K.refs[me]===void 0&&(K.refs[me]=K.uses[me]=0),K.refs[me]++)}_getNodeRef(K,me,ge){if(K.refs[me]<=1)return ge;const xe=ge.clone(),ye=(ve,_e)=>{const Ee=this.associations.get(ve);Ee!=null&&this.associations.set(_e,Ee);for(const[be,Ae]of ve.children.entries())ye(Ae,_e.children[be])};return ye(ge,xe),xe.name+="_instance_"+K.uses[me]++,xe}_invokeOne(K){const me=Object.values(this.plugins);me.push(this);for(let ge=0;ge<me.length;ge++){const xe=K(me[ge]);if(xe)return xe}return null}_invokeAll(K){const me=Object.values(this.plugins);me.unshift(this);const ge=[];for(let xe=0;xe<me.length;xe++){const ye=K(me[xe]);ye&&ge.push(ye)}return ge}getDependency(K,me){const ge=K+":"+me;let xe=this.cache.get(ge);if(!xe){switch(K){case"scene":xe=this.loadScene(me);break;case"node":xe=this._invokeOne(function(ye){return ye.loadNode&&ye.loadNode(me)});break;case"mesh":xe=this._invokeOne(function(ye){return ye.loadMesh&&ye.loadMesh(me)});break;case"accessor":xe=this.loadAccessor(me);break;case"bufferView":xe=this._invokeOne(function(ye){return ye.loadBufferView&&ye.loadBufferView(me)});break;case"buffer":xe=this.loadBuffer(me);break;case"material":xe=this._invokeOne(function(ye){return ye.loadMaterial&&ye.loadMaterial(me)});break;case"texture":xe=this._invokeOne(function(ye){return ye.loadTexture&&ye.loadTexture(me)});break;case"skin":xe=this.loadSkin(me);break;case"animation":xe=this._invokeOne(function(ye){return ye.loadAnimation&&ye.loadAnimation(me)});break;case"camera":xe=this.loadCamera(me);break;default:if(xe=this._invokeOne(function(ye){return ye!=this&&ye.getDependency&&ye.getDependency(K,me)}),!xe)throw new Error("Unknown type: "+K);break}this.cache.add(ge,xe)}return xe}getDependencies(K){let me=this.cache.get(K);if(!me){const ge=this,xe=this.json[K+(K==="mesh"?"es":"s")]||[];me=Promise.all(xe.map(function(ye,ve){return ge.getDependency(K,ve)})),this.cache.add(K,me)}return me}loadBuffer(K){const me=this.json.buffers[K],ge=this.fileLoader;if(me.type&&me.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+me.type+" buffer type is not supported.");if(me.uri===void 0&&K===0)return Promise.resolve(this.extensions[EXTENSIONS.KHR_BINARY_GLTF].body);const xe=this.options;return new Promise(function(ye,ve){ge.load(LoaderUtils.resolveURL(me.uri,xe.path),ye,void 0,function(){ve(new Error('THREE.GLTFLoader: Failed to load buffer "'+me.uri+'".'))})})}loadBufferView(K){const me=this.json.bufferViews[K];return this.getDependency("buffer",me.buffer).then(function(ge){const xe=me.byteLength||0,ye=me.byteOffset||0;return ge.slice(ye,ye+xe)})}loadAccessor(K){const me=this,ge=this.json,xe=this.json.accessors[K];if(xe.bufferView===void 0&&xe.sparse===void 0){const ve=WEBGL_TYPE_SIZES[xe.type],_e=WEBGL_COMPONENT_TYPES[xe.componentType],Ee=xe.normalized===!0,be=new _e(xe.count*ve);return Promise.resolve(new BufferAttribute(be,ve,Ee))}const ye=[];return xe.bufferView!==void 0?ye.push(this.getDependency("bufferView",xe.bufferView)):ye.push(null),xe.sparse!==void 0&&(ye.push(this.getDependency("bufferView",xe.sparse.indices.bufferView)),ye.push(this.getDependency("bufferView",xe.sparse.values.bufferView))),Promise.all(ye).then(function(ve){const _e=ve[0],Ee=WEBGL_TYPE_SIZES[xe.type],be=WEBGL_COMPONENT_TYPES[xe.componentType],Ae=be.BYTES_PER_ELEMENT,Se=Ae*Ee,Ce=xe.byteOffset||0,Te=xe.bufferView!==void 0?ge.bufferViews[xe.bufferView].byteStride:void 0,Re=xe.normalized===!0;let De,Ie;if(Te&&Te!==Se){const Be=Math.floor(Ce/Te),Le="InterleavedBuffer:"+xe.bufferView+":"+xe.componentType+":"+Be+":"+xe.count;let Oe=me.cache.get(Le);Oe||(De=new be(_e,Be*Te,xe.count*Te/Ae),Oe=new InterleavedBuffer(De,Te/Ae),me.cache.add(Le,Oe)),Ie=new InterleavedBufferAttribute(Oe,Ee,Ce%Te/Ae,Re)}else _e===null?De=new be(xe.count*Ee):De=new be(_e,Ce,xe.count*Ee),Ie=new BufferAttribute(De,Ee,Re);if(xe.sparse!==void 0){const Be=WEBGL_TYPE_SIZES.SCALAR,Le=WEBGL_COMPONENT_TYPES[xe.sparse.indices.componentType],Oe=xe.sparse.indices.byteOffset||0,Fe=xe.sparse.values.byteOffset||0,Ue=new Le(ve[1],Oe,xe.sparse.count*Be),Ne=new be(ve[2],Fe,xe.sparse.count*Ee);_e!==null&&(Ie=new BufferAttribute(Ie.array.slice(),Ie.itemSize,Ie.normalized)),Ie.normalized=!1;for(let He=0,ze=Ue.length;He<ze;He++){const je=Ue[He];if(Ie.setX(je,Ne[He*Ee]),Ee>=2&&Ie.setY(je,Ne[He*Ee+1]),Ee>=3&&Ie.setZ(je,Ne[He*Ee+2]),Ee>=4&&Ie.setW(je,Ne[He*Ee+3]),Ee>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}Ie.normalized=Re}return Ie})}loadTexture(K){const me=this.json,ge=this.options,ye=me.textures[K].source,ve=me.images[ye];let _e=this.textureLoader;if(ve.uri){const Ee=ge.manager.getHandler(ve.uri);Ee!==null&&(_e=Ee)}return this.loadTextureImage(K,ye,_e)}loadTextureImage(K,me,ge){const xe=this,ye=this.json,ve=ye.textures[K],_e=ye.images[me],Ee=(_e.uri||_e.bufferView)+":"+ve.sampler;if(this.textureCache[Ee])return this.textureCache[Ee];const be=this.loadImageSource(me,ge).then(function(Ae){Ae.flipY=!1,Ae.name=ve.name||_e.name||"",Ae.name===""&&typeof _e.uri=="string"&&_e.uri.startsWith("data:image/")===!1&&(Ae.name=_e.uri);const Ce=(ye.samplers||{})[ve.sampler]||{};return Ae.magFilter=WEBGL_FILTERS[Ce.magFilter]||LinearFilter,Ae.minFilter=WEBGL_FILTERS[Ce.minFilter]||LinearMipmapLinearFilter,Ae.wrapS=WEBGL_WRAPPINGS[Ce.wrapS]||RepeatWrapping,Ae.wrapT=WEBGL_WRAPPINGS[Ce.wrapT]||RepeatWrapping,Ae.generateMipmaps=!Ae.isCompressedTexture&&Ae.minFilter!==NearestFilter&&Ae.minFilter!==LinearFilter,xe.associations.set(Ae,{textures:K}),Ae}).catch(function(){return null});return this.textureCache[Ee]=be,be}loadImageSource(K,me){const ge=this,xe=this.json,ye=this.options;if(this.sourceCache[K]!==void 0)return this.sourceCache[K].then(Se=>Se.clone());const ve=xe.images[K],_e=self.URL||self.webkitURL;let Ee=ve.uri||"",be=!1;if(ve.bufferView!==void 0)Ee=ge.getDependency("bufferView",ve.bufferView).then(function(Se){be=!0;const Ce=new Blob([Se],{type:ve.mimeType});return Ee=_e.createObjectURL(Ce),Ee});else if(ve.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+K+" is missing URI and bufferView");const Ae=Promise.resolve(Ee).then(function(Se){return new Promise(function(Ce,Te){let Re=Ce;me.isImageBitmapLoader===!0&&(Re=function(De){const Ie=new Texture(De);Ie.needsUpdate=!0,Ce(Ie)}),me.load(LoaderUtils.resolveURL(Se,ye.path),Re,void 0,Te)})}).then(function(Se){return be===!0&&_e.revokeObjectURL(Ee),assignExtrasToUserData(Se,ve),Se.userData.mimeType=ve.mimeType||getImageURIMimeType(ve.uri),Se}).catch(function(Se){throw console.error("THREE.GLTFLoader: Couldn't load texture",Ee),Se});return this.sourceCache[K]=Ae,Ae}assignTexture(K,me,ge,xe){const ye=this;return this.getDependency("texture",ge.index).then(function(ve){if(!ve)return null;if(ge.texCoord!==void 0&&ge.texCoord>0&&(ve=ve.clone(),ve.channel=ge.texCoord),ye.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]){const _e=ge.extensions!==void 0?ge.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM]:void 0;if(_e){const Ee=ye.associations.get(ve);ve=ye.extensions[EXTENSIONS.KHR_TEXTURE_TRANSFORM].extendTexture(ve,_e),ye.associations.set(ve,Ee)}}return xe!==void 0&&(ve.colorSpace=xe),K[me]=ve,ve})}assignFinalMaterial(K){const me=K.geometry;let ge=K.material;const xe=me.attributes.tangent===void 0,ye=me.attributes.color!==void 0,ve=me.attributes.normal===void 0;if(K.isPoints){const _e="PointsMaterial:"+ge.uuid;let Ee=this.cache.get(_e);Ee||(Ee=new PointsMaterial,Material.prototype.copy.call(Ee,ge),Ee.color.copy(ge.color),Ee.map=ge.map,Ee.sizeAttenuation=!1,this.cache.add(_e,Ee)),ge=Ee}else if(K.isLine){const _e="LineBasicMaterial:"+ge.uuid;let Ee=this.cache.get(_e);Ee||(Ee=new LineBasicMaterial,Material.prototype.copy.call(Ee,ge),Ee.color.copy(ge.color),Ee.map=ge.map,this.cache.add(_e,Ee)),ge=Ee}if(xe||ye||ve){let _e="ClonedMaterial:"+ge.uuid+":";xe&&(_e+="derivative-tangents:"),ye&&(_e+="vertex-colors:"),ve&&(_e+="flat-shading:");let Ee=this.cache.get(_e);Ee||(Ee=ge.clone(),ye&&(Ee.vertexColors=!0),ve&&(Ee.flatShading=!0),xe&&(Ee.normalScale&&(Ee.normalScale.y*=-1),Ee.clearcoatNormalScale&&(Ee.clearcoatNormalScale.y*=-1)),this.cache.add(_e,Ee),this.associations.set(Ee,this.associations.get(ge))),ge=Ee}K.material=ge}getMaterialType(){return MeshStandardMaterial}loadMaterial(K){const me=this,ge=this.json,xe=this.extensions,ye=ge.materials[K];let ve;const _e={},Ee=ye.extensions||{},be=[];if(Ee[EXTENSIONS.KHR_MATERIALS_UNLIT]){const Se=xe[EXTENSIONS.KHR_MATERIALS_UNLIT];ve=Se.getMaterialType(),be.push(Se.extendParams(_e,ye,me))}else{const Se=ye.pbrMetallicRoughness||{};if(_e.color=new Color$1(1,1,1),_e.opacity=1,Array.isArray(Se.baseColorFactor)){const Ce=Se.baseColorFactor;_e.color.setRGB(Ce[0],Ce[1],Ce[2],LinearSRGBColorSpace),_e.opacity=Ce[3]}Se.baseColorTexture!==void 0&&be.push(me.assignTexture(_e,"map",Se.baseColorTexture,SRGBColorSpace)),_e.metalness=Se.metallicFactor!==void 0?Se.metallicFactor:1,_e.roughness=Se.roughnessFactor!==void 0?Se.roughnessFactor:1,Se.metallicRoughnessTexture!==void 0&&(be.push(me.assignTexture(_e,"metalnessMap",Se.metallicRoughnessTexture)),be.push(me.assignTexture(_e,"roughnessMap",Se.metallicRoughnessTexture))),ve=this._invokeOne(function(Ce){return Ce.getMaterialType&&Ce.getMaterialType(K)}),be.push(Promise.all(this._invokeAll(function(Ce){return Ce.extendMaterialParams&&Ce.extendMaterialParams(K,_e)})))}ye.doubleSided===!0&&(_e.side=DoubleSide);const Ae=ye.alphaMode||ALPHA_MODES.OPAQUE;if(Ae===ALPHA_MODES.BLEND?(_e.transparent=!0,_e.depthWrite=!1):(_e.transparent=!1,Ae===ALPHA_MODES.MASK&&(_e.alphaTest=ye.alphaCutoff!==void 0?ye.alphaCutoff:.5)),ye.normalTexture!==void 0&&ve!==MeshBasicMaterial&&(be.push(me.assignTexture(_e,"normalMap",ye.normalTexture)),_e.normalScale=new Vector2(1,1),ye.normalTexture.scale!==void 0)){const Se=ye.normalTexture.scale;_e.normalScale.set(Se,Se)}if(ye.occlusionTexture!==void 0&&ve!==MeshBasicMaterial&&(be.push(me.assignTexture(_e,"aoMap",ye.occlusionTexture)),ye.occlusionTexture.strength!==void 0&&(_e.aoMapIntensity=ye.occlusionTexture.strength)),ye.emissiveFactor!==void 0&&ve!==MeshBasicMaterial){const Se=ye.emissiveFactor;_e.emissive=new Color$1().setRGB(Se[0],Se[1],Se[2],LinearSRGBColorSpace)}return ye.emissiveTexture!==void 0&&ve!==MeshBasicMaterial&&be.push(me.assignTexture(_e,"emissiveMap",ye.emissiveTexture,SRGBColorSpace)),Promise.all(be).then(function(){const Se=new ve(_e);return ye.name&&(Se.name=ye.name),assignExtrasToUserData(Se,ye),me.associations.set(Se,{materials:K}),ye.extensions&&addUnknownExtensionsToUserData(xe,Se,ye),Se})}createUniqueName(K){const me=PropertyBinding.sanitizeNodeName(K||"");return me in this.nodeNamesUsed?me+"_"+ ++this.nodeNamesUsed[me]:(this.nodeNamesUsed[me]=0,me)}loadGeometries(K){const me=this,ge=this.extensions,xe=this.primitiveCache;function ye(_e){return ge[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(_e,me).then(function(Ee){return addPrimitiveAttributes(Ee,_e,me)})}const ve=[];for(let _e=0,Ee=K.length;_e<Ee;_e++){const be=K[_e],Ae=createPrimitiveKey(be),Se=xe[Ae];if(Se)ve.push(Se.promise);else{let Ce;be.extensions&&be.extensions[EXTENSIONS.KHR_DRACO_MESH_COMPRESSION]?Ce=ye(be):Ce=addPrimitiveAttributes(new BufferGeometry,be,me),xe[Ae]={primitive:be,promise:Ce},ve.push(Ce)}}return Promise.all(ve)}loadMesh(K){const me=this,ge=this.json,xe=this.extensions,ye=ge.meshes[K],ve=ye.primitives,_e=[];for(let Ee=0,be=ve.length;Ee<be;Ee++){const Ae=ve[Ee].material===void 0?createDefaultMaterial(this.cache):this.getDependency("material",ve[Ee].material);_e.push(Ae)}return _e.push(me.loadGeometries(ve)),Promise.all(_e).then(function(Ee){const be=Ee.slice(0,Ee.length-1),Ae=Ee[Ee.length-1],Se=[];for(let Te=0,Re=Ae.length;Te<Re;Te++){const De=Ae[Te],Ie=ve[Te];let Be;const Le=be[Te];if(Ie.mode===WEBGL_CONSTANTS.TRIANGLES||Ie.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP||Ie.mode===WEBGL_CONSTANTS.TRIANGLE_FAN||Ie.mode===void 0)Be=ye.isSkinnedMesh===!0?new SkinnedMesh$1(De,Le):new Mesh(De,Le),Be.isSkinnedMesh===!0&&Be.normalizeSkinWeights(),Ie.mode===WEBGL_CONSTANTS.TRIANGLE_STRIP?Be.geometry=toTrianglesDrawMode(Be.geometry,TriangleStripDrawMode):Ie.mode===WEBGL_CONSTANTS.TRIANGLE_FAN&&(Be.geometry=toTrianglesDrawMode(Be.geometry,TriangleFanDrawMode));else if(Ie.mode===WEBGL_CONSTANTS.LINES)Be=new LineSegments(De,Le);else if(Ie.mode===WEBGL_CONSTANTS.LINE_STRIP)Be=new Line$2(De,Le);else if(Ie.mode===WEBGL_CONSTANTS.LINE_LOOP)Be=new LineLoop(De,Le);else if(Ie.mode===WEBGL_CONSTANTS.POINTS)Be=new Points(De,Le);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+Ie.mode);Object.keys(Be.geometry.morphAttributes).length>0&&updateMorphTargets(Be,ye),Be.name=me.createUniqueName(ye.name||"mesh_"+K),assignExtrasToUserData(Be,ye),Ie.extensions&&addUnknownExtensionsToUserData(xe,Be,Ie),me.assignFinalMaterial(Be),Se.push(Be)}for(let Te=0,Re=Se.length;Te<Re;Te++)me.associations.set(Se[Te],{meshes:K,primitives:Te});if(Se.length===1)return ye.extensions&&addUnknownExtensionsToUserData(xe,Se[0],ye),Se[0];const Ce=new Group;ye.extensions&&addUnknownExtensionsToUserData(xe,Ce,ye),me.associations.set(Ce,{meshes:K});for(let Te=0,Re=Se.length;Te<Re;Te++)Ce.add(Se[Te]);return Ce})}loadCamera(K){let me;const ge=this.json.cameras[K],xe=ge[ge.type];if(!xe){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return ge.type==="perspective"?me=new PerspectiveCamera(MathUtils.radToDeg(xe.yfov),xe.aspectRatio||1,xe.znear||1,xe.zfar||2e6):ge.type==="orthographic"&&(me=new OrthographicCamera(-xe.xmag,xe.xmag,xe.ymag,-xe.ymag,xe.znear,xe.zfar)),ge.name&&(me.name=this.createUniqueName(ge.name)),assignExtrasToUserData(me,ge),Promise.resolve(me)}loadSkin(K){const me=this.json.skins[K],ge=[];for(let xe=0,ye=me.joints.length;xe<ye;xe++)ge.push(this._loadNodeShallow(me.joints[xe]));return me.inverseBindMatrices!==void 0?ge.push(this.getDependency("accessor",me.inverseBindMatrices)):ge.push(null),Promise.all(ge).then(function(xe){const ye=xe.pop(),ve=xe,_e=[],Ee=[];for(let be=0,Ae=ve.length;be<Ae;be++){const Se=ve[be];if(Se){_e.push(Se);const Ce=new Matrix4;ye!==null&&Ce.fromArray(ye.array,be*16),Ee.push(Ce)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',me.joints[be])}return new Skeleton(_e,Ee)})}loadAnimation(K){const me=this.json,ge=this,xe=me.animations[K],ye=xe.name?xe.name:"animation_"+K,ve=[],_e=[],Ee=[],be=[],Ae=[];for(let Se=0,Ce=xe.channels.length;Se<Ce;Se++){const Te=xe.channels[Se],Re=xe.samplers[Te.sampler],De=Te.target,Ie=De.node,Be=xe.parameters!==void 0?xe.parameters[Re.input]:Re.input,Le=xe.parameters!==void 0?xe.parameters[Re.output]:Re.output;De.node!==void 0&&(ve.push(this.getDependency("node",Ie)),_e.push(this.getDependency("accessor",Be)),Ee.push(this.getDependency("accessor",Le)),be.push(Re),Ae.push(De))}return Promise.all([Promise.all(ve),Promise.all(_e),Promise.all(Ee),Promise.all(be),Promise.all(Ae)]).then(function(Se){const Ce=Se[0],Te=Se[1],Re=Se[2],De=Se[3],Ie=Se[4],Be=[];for(let Le=0,Oe=Ce.length;Le<Oe;Le++){const Fe=Ce[Le],Ue=Te[Le],Ne=Re[Le],He=De[Le],ze=Ie[Le];if(Fe===void 0)continue;Fe.updateMatrix&&Fe.updateMatrix();const je=ge._createAnimationTracks(Fe,Ue,Ne,He,ze);if(je)for(let Ge=0;Ge<je.length;Ge++)Be.push(je[Ge])}return new AnimationClip(ye,void 0,Be)})}createNodeMesh(K){const me=this.json,ge=this,xe=me.nodes[K];return xe.mesh===void 0?null:ge.getDependency("mesh",xe.mesh).then(function(ye){const ve=ge._getNodeRef(ge.meshCache,xe.mesh,ye);return xe.weights!==void 0&&ve.traverse(function(_e){if(_e.isMesh)for(let Ee=0,be=xe.weights.length;Ee<be;Ee++)_e.morphTargetInfluences[Ee]=xe.weights[Ee]}),ve})}loadNode(K){const me=this.json,ge=this,xe=me.nodes[K],ye=ge._loadNodeShallow(K),ve=[],_e=xe.children||[];for(let be=0,Ae=_e.length;be<Ae;be++)ve.push(ge.getDependency("node",_e[be]));const Ee=xe.skin===void 0?Promise.resolve(null):ge.getDependency("skin",xe.skin);return Promise.all([ye,Promise.all(ve),Ee]).then(function(be){const Ae=be[0],Se=be[1],Ce=be[2];Ce!==null&&Ae.traverse(function(Te){Te.isSkinnedMesh&&Te.bind(Ce,_identityMatrix)});for(let Te=0,Re=Se.length;Te<Re;Te++)Ae.add(Se[Te]);return Ae})}_loadNodeShallow(K){const me=this.json,ge=this.extensions,xe=this;if(this.nodeCache[K]!==void 0)return this.nodeCache[K];const ye=me.nodes[K],ve=ye.name?xe.createUniqueName(ye.name):"",_e=[],Ee=xe._invokeOne(function(be){return be.createNodeMesh&&be.createNodeMesh(K)});return Ee&&_e.push(Ee),ye.camera!==void 0&&_e.push(xe.getDependency("camera",ye.camera).then(function(be){return xe._getNodeRef(xe.cameraCache,ye.camera,be)})),xe._invokeAll(function(be){return be.createNodeAttachment&&be.createNodeAttachment(K)}).forEach(function(be){_e.push(be)}),this.nodeCache[K]=Promise.all(_e).then(function(be){let Ae;if(ye.isBone===!0?Ae=new Bone:be.length>1?Ae=new Group:be.length===1?Ae=be[0]:Ae=new Object3D,Ae!==be[0])for(let Se=0,Ce=be.length;Se<Ce;Se++)Ae.add(be[Se]);if(ye.name&&(Ae.userData.name=ye.name,Ae.name=ve),assignExtrasToUserData(Ae,ye),ye.extensions&&addUnknownExtensionsToUserData(ge,Ae,ye),ye.matrix!==void 0){const Se=new Matrix4;Se.fromArray(ye.matrix),Ae.applyMatrix4(Se)}else ye.translation!==void 0&&Ae.position.fromArray(ye.translation),ye.rotation!==void 0&&Ae.quaternion.fromArray(ye.rotation),ye.scale!==void 0&&Ae.scale.fromArray(ye.scale);return xe.associations.has(Ae)||xe.associations.set(Ae,{}),xe.associations.get(Ae).nodes=K,Ae}),this.nodeCache[K]}loadScene(K){const me=this.extensions,ge=this.json.scenes[K],xe=this,ye=new Group;ge.name&&(ye.name=xe.createUniqueName(ge.name)),assignExtrasToUserData(ye,ge),ge.extensions&&addUnknownExtensionsToUserData(me,ye,ge);const ve=ge.nodes||[],_e=[];for(let Ee=0,be=ve.length;Ee<be;Ee++)_e.push(xe.getDependency("node",ve[Ee]));return Promise.all(_e).then(function(Ee){for(let Ae=0,Se=Ee.length;Ae<Se;Ae++)ye.add(Ee[Ae]);const be=Ae=>{const Se=new Map;for(const[Ce,Te]of xe.associations)(Ce instanceof Material||Ce instanceof Texture)&&Se.set(Ce,Te);return Ae.traverse(Ce=>{const Te=xe.associations.get(Ce);Te!=null&&Se.set(Ce,Te)}),Se};return xe.associations=be(ye),ye})}_createAnimationTracks(K,me,ge,xe,ye){const ve=[],_e=K.name?K.name:K.uuid,Ee=[];PATH_PROPERTIES[ye.path]===PATH_PROPERTIES.weights?K.traverse(function(Ce){Ce.morphTargetInfluences&&Ee.push(Ce.name?Ce.name:Ce.uuid)}):Ee.push(_e);let be;switch(PATH_PROPERTIES[ye.path]){case PATH_PROPERTIES.weights:be=NumberKeyframeTrack;break;case PATH_PROPERTIES.rotation:be=QuaternionKeyframeTrack;break;case PATH_PROPERTIES.position:case PATH_PROPERTIES.scale:be=VectorKeyframeTrack;break;default:switch(ge.itemSize){case 1:be=NumberKeyframeTrack;break;case 2:case 3:default:be=VectorKeyframeTrack;break}break}const Ae=xe.interpolation!==void 0?INTERPOLATION[xe.interpolation]:InterpolateLinear,Se=this._getArrayFromAccessor(ge);for(let Ce=0,Te=Ee.length;Ce<Te;Ce++){const Re=new be(Ee[Ce]+"."+PATH_PROPERTIES[ye.path],me.array,Se,Ae);xe.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(Re),ve.push(Re)}return ve}_getArrayFromAccessor(K){let me=K.array;if(K.normalized){const ge=getNormalizedComponentScale(me.constructor),xe=new Float32Array(me.length);for(let ye=0,ve=me.length;ye<ve;ye++)xe[ye]=me[ye]*ge;me=xe}return me}_createCubicSplineTrackInterpolant(K){K.createInterpolant=function(ge){const xe=this instanceof QuaternionKeyframeTrack?GLTFCubicSplineQuaternionInterpolant:GLTFCubicSplineInterpolant;return new xe(this.times,this.values,this.getValueSize()/3,ge)},K.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function computeBounds(fe,K,me){const ge=K.attributes,xe=new Box3;if(ge.POSITION!==void 0){const _e=me.json.accessors[ge.POSITION],Ee=_e.min,be=_e.max;if(Ee!==void 0&&be!==void 0){if(xe.set(new Vector3(Ee[0],Ee[1],Ee[2]),new Vector3(be[0],be[1],be[2])),_e.normalized){const Ae=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[_e.componentType]);xe.min.multiplyScalar(Ae),xe.max.multiplyScalar(Ae)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const ye=K.targets;if(ye!==void 0){const _e=new Vector3,Ee=new Vector3;for(let be=0,Ae=ye.length;be<Ae;be++){const Se=ye[be];if(Se.POSITION!==void 0){const Ce=me.json.accessors[Se.POSITION],Te=Ce.min,Re=Ce.max;if(Te!==void 0&&Re!==void 0){if(Ee.setX(Math.max(Math.abs(Te[0]),Math.abs(Re[0]))),Ee.setY(Math.max(Math.abs(Te[1]),Math.abs(Re[1]))),Ee.setZ(Math.max(Math.abs(Te[2]),Math.abs(Re[2]))),Ce.normalized){const De=getNormalizedComponentScale(WEBGL_COMPONENT_TYPES[Ce.componentType]);Ee.multiplyScalar(De)}_e.max(Ee)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}xe.expandByVector(_e)}fe.boundingBox=xe;const ve=new Sphere;xe.getCenter(ve.center),ve.radius=xe.min.distanceTo(xe.max)/2,fe.boundingSphere=ve}function addPrimitiveAttributes(fe,K,me){const ge=K.attributes,xe=[];function ye(ve,_e){return me.getDependency("accessor",ve).then(function(Ee){fe.setAttribute(_e,Ee)})}for(const ve in ge){const _e=ATTRIBUTES[ve]||ve.toLowerCase();_e in fe.attributes||xe.push(ye(ge[ve],_e))}if(K.indices!==void 0&&!fe.index){const ve=me.getDependency("accessor",K.indices).then(function(_e){fe.setIndex(_e)});xe.push(ve)}return ColorManagement.workingColorSpace!==LinearSRGBColorSpace&&"COLOR_0"in ge&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${ColorManagement.workingColorSpace}" not supported.`),assignExtrasToUserData(fe,K),computeBounds(fe,K,me),Promise.all(xe).then(function(){return K.targets!==void 0?addMorphTargets(fe,K.targets,me):fe})}const _taskCache=new WeakMap;class DRACOLoader extends Loader{constructor(K){super(K),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(K){return this.decoderPath=K,this}setDecoderConfig(K){return this.decoderConfig=K,this}setWorkerLimit(K){return this.workerLimit=K,this}load(K,me,ge,xe){const ye=new FileLoader(this.manager);ye.setPath(this.path),ye.setResponseType("arraybuffer"),ye.setRequestHeader(this.requestHeader),ye.setWithCredentials(this.withCredentials),ye.load(K,ve=>{this.parse(ve,me,xe)},ge,xe)}parse(K,me,ge=()=>{}){this.decodeDracoFile(K,me,null,null,SRGBColorSpace,ge).catch(ge)}decodeDracoFile(K,me,ge,xe,ye=LinearSRGBColorSpace,ve=()=>{}){const _e={attributeIDs:ge||this.defaultAttributeIDs,attributeTypes:xe||this.defaultAttributeTypes,useUniqueIDs:!!ge,vertexColorSpace:ye};return this.decodeGeometry(K,_e).then(me).catch(ve)}decodeGeometry(K,me){const ge=JSON.stringify(me);if(_taskCache.has(K)){const Ee=_taskCache.get(K);if(Ee.key===ge)return Ee.promise;if(K.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let xe;const ye=this.workerNextTaskID++,ve=K.byteLength,_e=this._getWorker(ye,ve).then(Ee=>(xe=Ee,new Promise((be,Ae)=>{xe._callbacks[ye]={resolve:be,reject:Ae},xe.postMessage({type:"decode",id:ye,taskConfig:me,buffer:K},[K])}))).then(Ee=>this._createGeometry(Ee.geometry));return _e.catch(()=>!0).then(()=>{xe&&ye&&this._releaseTask(xe,ye)}),_taskCache.set(K,{key:ge,promise:_e}),_e}_createGeometry(K){const me=new BufferGeometry;K.index&&me.setIndex(new BufferAttribute(K.index.array,1));for(let ge=0;ge<K.attributes.length;ge++){const xe=K.attributes[ge],ye=xe.name,ve=xe.array,_e=xe.itemSize,Ee=new BufferAttribute(ve,_e);ye==="color"&&(this._assignVertexColorSpace(Ee,xe.vertexColorSpace),Ee.normalized=!(ve instanceof Float32Array)),me.setAttribute(ye,Ee)}return me}_assignVertexColorSpace(K,me){if(me!==SRGBColorSpace)return;const ge=new Color$1;for(let xe=0,ye=K.count;xe<ye;xe++)ge.fromBufferAttribute(K,xe),ColorManagement.toWorkingColorSpace(ge,SRGBColorSpace),K.setXYZ(xe,ge.r,ge.g,ge.b)}_loadLibrary(K,me){const ge=new FileLoader(this.manager);return ge.setPath(this.decoderPath),ge.setResponseType(me),ge.setWithCredentials(this.withCredentials),new Promise((xe,ye)=>{ge.load(K,xe,void 0,ye)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const K=typeof WebAssembly!="object"||this.decoderConfig.type==="js",me=[];return K?me.push(this._loadLibrary("draco_decoder.js","text")):(me.push(this._loadLibrary("draco_wasm_wrapper.js","text")),me.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(me).then(ge=>{const xe=ge[0];K||(this.decoderConfig.wasmBinary=ge[1]);const ye=DRACOWorker.toString(),ve=["/* draco decoder */",xe,"","/* worker */",ye.substring(ye.indexOf("{")+1,ye.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([ve]))}),this.decoderPending}_getWorker(K,me){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const xe=new Worker(this.workerSourceURL);xe._callbacks={},xe._taskCosts={},xe._taskLoad=0,xe.postMessage({type:"init",decoderConfig:this.decoderConfig}),xe.onmessage=function(ye){const ve=ye.data;switch(ve.type){case"decode":xe._callbacks[ve.id].resolve(ve);break;case"error":xe._callbacks[ve.id].reject(ve);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+ve.type+'"')}},this.workerPool.push(xe)}else this.workerPool.sort(function(xe,ye){return xe._taskLoad>ye._taskLoad?-1:1});const ge=this.workerPool[this.workerPool.length-1];return ge._taskCosts[K]=me,ge._taskLoad+=me,ge})}_releaseTask(K,me){K._taskLoad-=K._taskCosts[me],delete K._callbacks[me],delete K._taskCosts[me]}debug(){console.log("Task load: ",this.workerPool.map(K=>K._taskLoad))}dispose(){for(let K=0;K<this.workerPool.length;++K)this.workerPool[K].terminate();return this.workerPool.length=0,this.workerSourceURL!==""&&URL.revokeObjectURL(this.workerSourceURL),this}}function DRACOWorker(){let fe,K;onmessage=function(ve){const _e=ve.data;switch(_e.type){case"init":fe=_e.decoderConfig,K=new Promise(function(Ae){fe.onModuleLoaded=function(Se){Ae({draco:Se})},DracoDecoderModule(fe)});break;case"decode":const Ee=_e.buffer,be=_e.taskConfig;K.then(Ae=>{const Se=Ae.draco,Ce=new Se.Decoder;try{const Te=me(Se,Ce,new Int8Array(Ee),be),Re=Te.attributes.map(De=>De.array.buffer);Te.index&&Re.push(Te.index.array.buffer),self.postMessage({type:"decode",id:_e.id,geometry:Te},Re)}catch(Te){console.error(Te),self.postMessage({type:"error",id:_e.id,error:Te.message})}finally{Se.destroy(Ce)}});break}};function me(ve,_e,Ee,be){const Ae=be.attributeIDs,Se=be.attributeTypes;let Ce,Te;const Re=_e.GetEncodedGeometryType(Ee);if(Re===ve.TRIANGULAR_MESH)Ce=new ve.Mesh,Te=_e.DecodeArrayToMesh(Ee,Ee.byteLength,Ce);else if(Re===ve.POINT_CLOUD)Ce=new ve.PointCloud,Te=_e.DecodeArrayToPointCloud(Ee,Ee.byteLength,Ce);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!Te.ok()||Ce.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+Te.error_msg());const De={index:null,attributes:[]};for(const Ie in Ae){const Be=self[Se[Ie]];let Le,Oe;if(be.useUniqueIDs)Oe=Ae[Ie],Le=_e.GetAttributeByUniqueId(Ce,Oe);else{if(Oe=_e.GetAttributeId(Ce,ve[Ae[Ie]]),Oe===-1)continue;Le=_e.GetAttribute(Ce,Oe)}const Fe=xe(ve,_e,Ce,Ie,Be,Le);Ie==="color"&&(Fe.vertexColorSpace=be.vertexColorSpace),De.attributes.push(Fe)}return Re===ve.TRIANGULAR_MESH&&(De.index=ge(ve,_e,Ce)),ve.destroy(Ce),De}function ge(ve,_e,Ee){const Ae=Ee.num_faces()*3,Se=Ae*4,Ce=ve._malloc(Se);_e.GetTrianglesUInt32Array(Ee,Se,Ce);const Te=new Uint32Array(ve.HEAPF32.buffer,Ce,Ae).slice();return ve._free(Ce),{array:Te,itemSize:1}}function xe(ve,_e,Ee,be,Ae,Se){const Ce=Se.num_components(),Re=Ee.num_points()*Ce,De=Re*Ae.BYTES_PER_ELEMENT,Ie=ye(ve,Ae),Be=ve._malloc(De);_e.GetAttributeDataArrayForAllPoints(Ee,Se,Ie,De,Be);const Le=new Ae(ve.HEAPF32.buffer,Be,Re).slice();return ve._free(Be),{name:be,array:Le,itemSize:Ce}}function ye(ve,_e){switch(_e){case Float32Array:return ve.DT_FLOAT32;case Int8Array:return ve.DT_INT8;case Int16Array:return ve.DT_INT16;case Int32Array:return ve.DT_INT32;case Uint8Array:return ve.DT_UINT8;case Uint16Array:return ve.DT_UINT16;case Uint32Array:return ve.DT_UINT32}}}const dracoLoader=new DRACOLoader;dracoLoader.setDecoderPath("https://www.gstatic.com/draco/v1/decoders/");function disposeNode(fe){fe instanceof Mesh&&(fe.geometry&&fe.geometry.dispose(),fe.material&&(Array.isArray(fe.material)?fe.material.forEach(K=>{disposeMaterial(K)}):disposeMaterial(fe.material)))}function useGlbLoader(fe){const[K,me]=React$4.useState(),[ge,xe]=React$4.useState([]),ye=React$4.useRef(null);return React$4.useEffect(()=>{if(!fe||fe.length===0){me(void 0),xe([]),ye.current&&ye.current.stopAllAction(),ye.current=null;return}let ve;const _e=new GLTFLoader;return _e.setDRACOLoader(dracoLoader),_e.parse(new Uint8Array(fe).buffer,"",Ee=>{ve=Ee,Ee.animations&&Ee.animations.length?(ye.current=new AnimationMixer(Ee.scene),Ee.animations.forEach(Ae=>{ye.current.clipAction(Ae).play()})):ye.current=null;const be=[];Ee.scene.traverse(Ae=>{Ae instanceof Mesh&&(Ae.geometry.computeVertexNormals(),Ae.geometry.computeBoundingSphere(),Ae.material&&(Array.isArray(Ae.material)?Ae.material.forEach(Se=>{Se.side=DoubleSide,Se.needsUpdate=!0}):(Ae.material.side=DoubleSide,Ae.material.needsUpdate=!0)),be.push(Ae))}),xe(be),me(Ee)},Ee=>{console.error("Error loading GLB:",Ee),me(void 0),xe([]),ye.current&&ye.current.stopAllAction(),ye.current=null}),()=>{ye.current&&ye.current.stopAllAction(),ve&&ve.scene.traverse(disposeNode),me(void 0),xe([])}},[fe]),{gltf:K,meshes:ge,mixerRef:ye}}const SingleGlbAsset=React$4.forwardRef(function(K,me){const{gltf:ge,meshes:xe,mixerRef:ye}=useGlbLoader(K.props.glb_data);React$4.useEffect(()=>{ge&&ge.scene.traverse(Te=>{Te instanceof Mesh&&(Te.castShadow=K.props.cast_shadow,Te.receiveShadow=K.props.receive_shadow)})},[ge,K.props.cast_shadow,K.props.receive_shadow]),useFrame((Te,Re)=>{ye.current?.update(Re)});const ve=useThree(Te=>Te.gl),_e=React$4.useMemo(()=>ve.getDrawingBufferSize(new Vector2),[ve]),Ee=React$4.useMemo(()=>{const Te=new OutlinesMaterial({side:BackSide});return Te.thickness=10,Te.color=new Color$1(16514816),Te.opacity=.8,Te.size=_e,Te.transparent=!0,Te.screenspace=!0,Te.toneMapped=!0,Te},[_e]),be=React$4.useRef(null),Ae=React$4.useContext(HoverableContext),Se=React$4.useContext(ViewerContext);useFrame(()=>{be.current!==null&&(be.current.visible=Ae.current.isHovered)});const Ce=Se.useSceneTree(Te=>Te.nodeFromName[K.name]?.clickable)??!1;return ge?jsxRuntimeExports.jsxs("group",{ref:me,children:[jsxRuntimeExports.jsx("primitive",{object:ge.scene,scale:K.props.scale}),Ce?jsxRuntimeExports.jsx("group",{ref:be,visible:!1,children:xe.map((Te,Re)=>jsxRuntimeExports.jsx("mesh",{geometry:Te.geometry,material:Ee},Re))}):null]}):null}),BatchedGlbAsset=React$4.forwardRef(function(K,me){const xe=React$4.useContext(ViewerContext).useSceneTree(Ee=>Ee.nodeFromName[K.name]?.clickable)??!1,{gltf:ye}=useGlbLoader(K.props.glb_data),{geometry:ve,material:_e}=reactExports.useMemo(()=>{if(!ye)return{geometry:null,material:null};const Ee=[],be=[];ye.scene.traverse(Ce=>{Ce instanceof Mesh&&Ce.parent&&(Ce.geometry.applyMatrix4(Ce.matrixWorld),Ee.push(Ce.geometry),be.push(Ce.material))});const Ae=Ee.length===1?Ee[0].clone():mergeGeometries(Ee,!0),Se=be.length===1?be[0]:be;return{geometry:Ae,material:Se}},[ye]);return!ve||!_e?null:jsxRuntimeExports.jsx("group",{ref:me,children:jsxRuntimeExports.jsx(BatchedMeshBase,{geometry:ve,material:_e,batched_positions:K.props.batched_positions,batched_wxyzs:K.props.batched_wxyzs,lod:K.props.lod,cast_shadow:K.props.cast_shadow,receive_shadow:K.props.receive_shadow,scale:K.props.scale,clickable:xe})})});function rgbToInt(fe){return fe[0]<<16|fe[1]<<8|fe[2]}function SceneNodeThreeChildren(fe){const K=React$4.useContext(ViewerContext),[me,ge]=React$4.useState(K.useSceneTree.getState().nodeFromName[fe.name]?.children??[]);return React$4.useEffect(()=>{let xe=!1;return K.useSceneTree.subscribe(ye=>{if(xe)return;const ve=ye.nodeFromName[fe.name]?.children;ve===void 0||ve===me||ve.length===0&&me.length===0||(xe=!0,setTimeout(()=>{xe=!1;const _e=K.useSceneTree.getState().nodeFromName[fe.name];if(_e!==void 0){const Ee=_e.children;ge(Ee)}},ve.length<=16?10:ve.length<=128?50:200))})},[]),createPortal(jsxRuntimeExports.jsxs("group",{children:[me&&me.map(xe=>jsxRuntimeExports.jsx(SceneNodeThreeObject,{name:xe,parent:fe.parent},xe)),jsxRuntimeExports.jsx(SceneNodeLabel,{name:fe.name})]}),fe.parent)}function SceneNodeLabel(fe){return React$4.useContext(ViewerContext).useSceneTree(ge=>ge.labelVisibleFromName[fe.name])?jsxRuntimeExports.jsx(Html,{children:jsxRuntimeExports.jsx("span",{style:{backgroundColor:"rgba(240, 240, 240, 0.9)",borderRadius:"0.2rem",userSelect:"none",padding:"0.1em 0.2em"},children:fe.name})}):null}function useObjectFactory(fe){const K=React$4.useContext(ViewerContext),me=x$3();if(fe===void 0)return{makeObject:()=>null};switch(fe.type){case"FrameMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(CoordinateFrame,{ref:ge,showAxes:fe.props.show_axes,axesLength:fe.props.axes_length,axesRadius:fe.props.axes_radius,originRadius:fe.props.origin_radius,originColor:rgbToInt(fe.props.origin_color)})};case"BatchedAxesMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(InstancedAxes,{ref:ge,batched_wxyzs:fe.props.batched_wxyzs,batched_positions:fe.props.batched_positions,axes_length:fe.props.axes_length,axes_radius:fe.props.axes_radius}),computeClickInstanceIndexFromInstanceId:ge=>Math.floor(ge/3)};case"GridMessage":{const ge=new Quaternion().setFromEuler(fe.props.plane=="xz"?new Euler(0,0,0):fe.props.plane=="xy"?new Euler(Math.PI/2,0,0):fe.props.plane=="yx"?new Euler(0,Math.PI/2,Math.PI/2):fe.props.plane=="yz"?new Euler(0,0,Math.PI/2):fe.props.plane=="zx"?new Euler(0,Math.PI/2,0):new Euler(-Math.PI/2,0,-Math.PI/2)),xe=new Quaternion().setFromEuler(new Euler(-Math.PI/2,0,0)).premultiply(ge);let ye;return fe.props.shadow_opacity>0?ye=jsxRuntimeExports.jsxs("mesh",{receiveShadow:!0,position:[0,0,-.01],quaternion:xe,children:[jsxRuntimeExports.jsx("planeGeometry",{args:[fe.props.width,fe.props.height]}),jsxRuntimeExports.jsx("shadowMaterial",{opacity:fe.props.shadow_opacity,color:0,depthWrite:!1})]}):ye=jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{}),{makeObject:ve=>jsxRuntimeExports.jsxs("group",{ref:ve,children:[jsxRuntimeExports.jsx(Grid,{args:[fe.props.width,fe.props.height,fe.props.width_segments,fe.props.height_segments],side:DoubleSide,cellColor:rgbToInt(fe.props.cell_color),cellThickness:fe.props.cell_thickness,cellSize:fe.props.cell_size,sectionColor:rgbToInt(fe.props.section_color),sectionThickness:fe.props.section_thickness,sectionSize:fe.props.section_size,quaternion:ge}),ye]})}}case"PointCloudMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(PointCloud,{ref:ge,...fe})};case"SkinnedMeshMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(SkinnedMesh,{ref:ge,...fe})};case"MeshMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(BasicMesh,{ref:ge,...fe})};case"BatchedMeshesMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(BatchedMesh,{ref:ge,...fe}),computeClickInstanceIndexFromInstanceId:fe.type==="BatchedMeshesMessage"?ge=>ge:void 0};case"CameraFrustumMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(CameraFrustum,{ref:ge,...fe})};case"TransformControlsMessage":{const ge=fe.name,xe=makeThrottledMessageSender(K,50);return{makeObject:ye=>jsxRuntimeExports.jsx("group",{onClick:ve=>ve.stopPropagation(),children:jsxRuntimeExports.jsx(PivotControls,{ref:ye,scale:fe.props.scale,lineWidth:fe.props.line_width,fixed:fe.props.fixed,activeAxes:fe.props.active_axes,disableAxes:fe.props.disable_axes,disableSliders:fe.props.disable_sliders,disableRotations:fe.props.disable_rotations,disableScaling:!0,translationLimits:fe.props.translation_limits,rotationLimits:fe.props.rotation_limits,depthTest:fe.props.depth_test,opacity:fe.props.opacity,onDrag:ve=>{const _e=K.nodeAttributesFromName.current;_e[fe.name]===void 0&&(_e[fe.name]={});const Ee=new Quaternion;Ee.setFromRotationMatrix(ve);const be=new Vector3().setFromMatrixPosition(ve),Ae=_e[fe.name];Ae.wxyz=[Ee.w,Ee.x,Ee.y,Ee.z],Ae.position=be.toArray(),xe({type:"TransformControlsUpdateMessage",name:ge,wxyz:Ae.wxyz,position:Ae.position})}})}),unmountWhenInvisible:!0}}case"LabelMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("group",{ref:ge,children:jsxRuntimeExports.jsx(Html,{children:jsxRuntimeExports.jsx("div",{style:{width:"10em",fontSize:"0.8em",transform:"translateX(0.1em) translateY(0.5em)"},children:jsxRuntimeExports.jsx("span",{style:{background:"#fff",border:"1px solid #777",borderRadius:"0.2em",color:"#333",padding:"0.2em"},children:fe.props.text})})})}),unmountWhenInvisible:!0};case"Gui3DMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("group",{ref:ge,children:jsxRuntimeExports.jsx(Html,{children:jsxRuntimeExports.jsx(me,{children:jsxRuntimeExports.jsx(Paper,{style:{width:"18em",fontSize:"0.875em",marginLeft:"0.5em",marginTop:"0.5em"},shadow:"0 0 0.8em 0 rgba(0,0,0,0.1)",pb:"0.25em",onPointerDown:xe=>{xe.stopPropagation()},children:jsxRuntimeExports.jsx(GeneratedGuiContainer,{containerUuid:fe.props.container_uuid})})})})}),unmountWhenInvisible:!0};case"ImageMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(ViserImage,{ref:ge,...fe})};case"GlbMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(SingleGlbAsset,{ref:ge,...fe})};case"BatchedGlbMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(BatchedGlbAsset,{ref:ge,...fe}),computeClickInstanceIndexFromInstanceId:ge=>ge};case"LineSegmentsMessage":return{makeObject:ge=>{const xe=new Float32Array(fe.props.points.buffer.slice(fe.props.points.byteOffset,fe.props.points.byteOffset+fe.props.points.byteLength)),ye=new Uint8Array(fe.props.colors.buffer.slice(fe.props.colors.byteOffset,fe.props.colors.byteOffset+fe.props.colors.byteLength));return jsxRuntimeExports.jsx("group",{ref:ge,children:jsxRuntimeExports.jsx(Line,{points:xe,lineWidth:fe.props.line_width,vertexColors:ye,segments:!0})})}};case"CatmullRomSplineMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("group",{ref:ge,children:jsxRuntimeExports.jsx(CatmullRomLine,{points:fe.props.positions,closed:fe.props.closed,curveType:fe.props.curve_type,tension:fe.props.tension,lineWidth:fe.props.line_width,color:rgbToInt(fe.props.color),segments:fe.props.segments??void 0})})};case"CubicBezierSplineMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("group",{ref:ge,children:[...Array(fe.props.positions.length-1).keys()].map(xe=>jsxRuntimeExports.jsx(CubicBezierLine,{start:fe.props.positions[xe],end:fe.props.positions[xe+1],midA:fe.props.control_points[2*xe],midB:fe.props.control_points[2*xe+1],lineWidth:fe.props.line_width,color:rgbToInt(fe.props.color),segments:fe.props.segments??void 0},xe))})};case"GaussianSplatsMessage":return{makeObject:ge=>jsxRuntimeExports.jsx(SplatObject,{ref:ge,buffer:new Uint32Array(fe.props.buffer.buffer.slice(fe.props.buffer.byteOffset,fe.props.buffer.byteOffset+fe.props.buffer.byteLength))})};case"DirectionalLightMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("group",{ref:ge,children:jsxRuntimeExports.jsx(CsmDirectionalLight,{lightIntensity:fe.props.intensity,color:rgbToInt(fe.props.color),castShadow:fe.props.cast_shadow})}),unmountWhenInvisible:!0};case"AmbientLightMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("ambientLight",{ref:ge,intensity:fe.props.intensity,color:rgbToInt(fe.props.color)})};case"HemisphereLightMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("hemisphereLight",{ref:ge,intensity:fe.props.intensity,color:rgbToInt(fe.props.sky_color),groundColor:rgbToInt(fe.props.ground_color)})};case"PointLightMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("pointLight",{ref:ge,intensity:fe.props.intensity,color:rgbToInt(fe.props.color),distance:fe.props.distance,decay:fe.props.decay,castShadow:fe.props.cast_shadow,...shadowArgs})};case"RectAreaLightMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("rectAreaLight",{ref:ge,intensity:fe.props.intensity,color:rgbToInt(fe.props.color),width:fe.props.width,height:fe.props.height})};case"SpotLightMessage":return{makeObject:ge=>jsxRuntimeExports.jsx("spotLight",{ref:ge,intensity:fe.props.intensity,color:rgbToInt(fe.props.color),distance:fe.props.distance,angle:fe.props.angle,penumbra:fe.props.penumbra,decay:fe.props.decay,castShadow:fe.props.cast_shadow,...shadowArgs})};default:return console.log("Received message did not match any known types:",fe),{makeObject:()=>null}}}function SceneNodeThreeObject(fe){const K=React$4.useContext(ViewerContext),me=K.useSceneTree(Be=>Be.nodeFromName[fe.name]?.message),{makeObject:ge,unmountWhenInvisible:xe,computeClickInstanceIndexFromInstanceId:ye}=useObjectFactory(me),[ve,_e]=React$4.useState(!1),Ee=K.useSceneTree(Be=>Be.nodeFromName[fe.name]?.clickable)??!1,[be,Ae]=React$4.useState(null);React$4.useEffect(()=>{be!==null&&(K.nodeRefFromName.current[fe.name]=be)},[be]);const Se=React$4.useMemo(()=>{if(ge===void 0)return null;const Be=K.nodeAttributesFromName.current;return fe.name in Be||(Be[fe.name]={}),Be[fe.name].poseUpdateState="needsUpdate",ge(Ae)},[ge]),Ce=be===null?null:jsxRuntimeExports.jsx(SceneNodeThreeChildren,{name:fe.name,parent:be});function Te(){const Be=K.nodeAttributesFromName.current[fe.name];if(((Be?.overrideVisibility===void 0?Be?.visibility:Be.overrideVisibility)??!0)===!1)return!1;if(fe.parent===null)return!0;let Oe=fe.parent.visible;return Oe&&fe.parent.traverseAncestors(Fe=>{Oe=Oe&&Fe.visible}),Oe}React$4.useEffect(()=>{const Be=K.nodeAttributesFromName.current[fe.name];Be!==void 0&&(Be.poseUpdateState="needsUpdate")}),useFrame(()=>{const Be=K.nodeAttributesFromName.current[fe.name];if(xe){const Oe=Te();Oe&&ve&&(be!==null&&(be.visible=!1),_e(!1)),!Oe&&!ve&&_e(!0)}if(be===null||Be===void 0)return;const Le=(Be?.overrideVisibility===void 0?Be?.visibility:Be.overrideVisibility)??!0;if(be.visible=Le,Be.poseUpdateState=="needsUpdate"){Be.poseUpdateState="updated";const Oe=Be.wxyz??[1,0,0,0];be.quaternion.set(Oe[1],Oe[2],Oe[3],Oe[0]);const Fe=Be.position??[0,0,0];be.position.set(Fe[0],Fe[1],Fe[2]),be.matrixAutoUpdate||be.updateMatrix(),be.matrixWorldAutoUpdate||be.updateMatrixWorld()}},-1e3);const Re=useThrottledMessageSender(50),De=React$4.useRef({isHovered:!1,instanceId:null,clickable:!1});De.current.clickable=Ee,!Ee&&De.current.isHovered&&(De.current.isHovered=!1,K.hoveredElementsCount.current--,K.hoveredElementsCount.current===0&&(document.body.style.cursor="auto"));const Ie=React$4.useRef({dragging:!1,startClientX:0,startClientY:0});return Se===void 0||ve?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("group",{onPointerDown:Ee?Be=>{if(!Te())return;Be.stopPropagation();const Le=Ie.current,Oe=K.canvasRef.current.getBoundingClientRect();Le.startClientX=Be.clientX-Oe.left,Le.startClientY=Be.clientY-Oe.top,Le.dragging=!1}:void 0,onPointerMove:Ee?Be=>{if(!Te())return;Be.stopPropagation();const Le=Ie.current,Oe=K.canvasRef.current.getBoundingClientRect(),Fe=Be.clientX-Oe.left-Le.startClientX,Ue=Be.clientY-Oe.top-Le.startClientY;Math.abs(Fe)<=3&&Math.abs(Ue)<=3||(Le.dragging=!0)}:void 0,onPointerUp:Ee?Be=>{if(!Te()||(Be.stopPropagation(),Ie.current.dragging))return;const Oe=rayToViserCoords(K,Be.ray),Fe=K.canvasRef.current.getBoundingClientRect(),Ue=opencvXyFromPointerXy(K,[Be.clientX-Fe.left,Be.clientY-Fe.top]);Re({type:"SceneNodeClickMessage",name:fe.name,instance_index:ye===void 0?null:ye(Be.instanceId),ray_origin:[Oe.origin.x,Oe.origin.y,Oe.origin.z],ray_direction:[Oe.direction.x,Oe.direction.y,Oe.direction.z],screen_pos:[Ue.x,Ue.y]})}:void 0,onPointerOver:Ee?Be=>{Te()&&(Be.stopPropagation(),De.current.isHovered=!0,De.current.instanceId=Be.instanceId??null,K.hoveredElementsCount.current++,K.hoveredElementsCount.current===1&&(document.body.style.cursor="pointer"))}:void 0,onPointerOut:Ee?()=>{Te()&&(De.current.isHovered=!1,De.current.instanceId=null,K.hoveredElementsCount.current--,K.hoveredElementsCount.current===0&&(document.body.style.cursor="auto"))}:void 0,children:jsxRuntimeExports.jsx(HoverableContext.Provider,{value:De,children:Se})}),Ce]})}var lib={},ErrorCorrectLevel={L:1,M:0,Q:3,H:2},mode$1={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},mode=mode$1;function QR8bitByte(fe){this.mode=mode.MODE_8BIT_BYTE,this.data=fe}QR8bitByte.prototype={getLength:function(fe){return this.data.length},write:function(fe){for(var K=0;K<this.data.length;K++)fe.put(this.data.charCodeAt(K),8)}};var _8BitByte=QR8bitByte,ECL=ErrorCorrectLevel;function QRRSBlock(fe,K){this.totalCount=fe,this.dataCount=K}QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];QRRSBlock.getRSBlocks=function(fe,K){var me=QRRSBlock.getRsBlockTable(fe,K);if(me==null)throw new Error("bad rs block @ typeNumber:"+fe+"/errorCorrectLevel:"+K);for(var ge=me.length/3,xe=new Array,ye=0;ye<ge;ye++)for(var ve=me[ye*3+0],_e=me[ye*3+1],Ee=me[ye*3+2],be=0;be<ve;be++)xe.push(new QRRSBlock(_e,Ee));return xe};QRRSBlock.getRsBlockTable=function(fe,K){switch(K){case ECL.L:return QRRSBlock.RS_BLOCK_TABLE[(fe-1)*4+0];case ECL.M:return QRRSBlock.RS_BLOCK_TABLE[(fe-1)*4+1];case ECL.Q:return QRRSBlock.RS_BLOCK_TABLE[(fe-1)*4+2];case ECL.H:return QRRSBlock.RS_BLOCK_TABLE[(fe-1)*4+3];default:return}};var RSBlock$1=QRRSBlock;function QRBitBuffer(){this.buffer=new Array,this.length=0}QRBitBuffer.prototype={get:function(fe){var K=Math.floor(fe/8);return(this.buffer[K]>>>7-fe%8&1)==1},put:function(fe,K){for(var me=0;me<K;me++)this.putBit((fe>>>K-me-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(fe){var K=Math.floor(this.length/8);this.buffer.length<=K&&this.buffer.push(0),fe&&(this.buffer[K]|=128>>>this.length%8),this.length++}};var BitBuffer$1=QRBitBuffer,QRMath={glog:function(fe){if(fe<1)throw new Error("glog("+fe+")");return QRMath.LOG_TABLE[fe]},gexp:function(fe){for(;fe<0;)fe+=255;for(;fe>=256;)fe-=255;return QRMath.EXP_TABLE[fe]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)};for(var i$2=0;i$2<8;i$2++)QRMath.EXP_TABLE[i$2]=1<<i$2;for(var i$2=8;i$2<256;i$2++)QRMath.EXP_TABLE[i$2]=QRMath.EXP_TABLE[i$2-4]^QRMath.EXP_TABLE[i$2-5]^QRMath.EXP_TABLE[i$2-6]^QRMath.EXP_TABLE[i$2-8];for(var i$2=0;i$2<255;i$2++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i$2]]=i$2;var math$2=QRMath,math$1=math$2;function QRPolynomial(fe,K){if(fe.length==null)throw new Error(fe.length+"/"+K);for(var me=0;me<fe.length&&fe[me]==0;)me++;this.num=new Array(fe.length-me+K);for(var ge=0;ge<fe.length-me;ge++)this.num[ge]=fe[ge+me]}QRPolynomial.prototype={get:function(fe){return this.num[fe]},getLength:function(){return this.num.length},multiply:function(fe){for(var K=new Array(this.getLength()+fe.getLength()-1),me=0;me<this.getLength();me++)for(var ge=0;ge<fe.getLength();ge++)K[me+ge]^=math$1.gexp(math$1.glog(this.get(me))+math$1.glog(fe.get(ge)));return new QRPolynomial(K,0)},mod:function(fe){if(this.getLength()-fe.getLength()<0)return this;for(var K=math$1.glog(this.get(0))-math$1.glog(fe.get(0)),me=new Array(this.getLength()),ge=0;ge<this.getLength();ge++)me[ge]=this.get(ge);for(var ge=0;ge<fe.getLength();ge++)me[ge]^=math$1.gexp(math$1.glog(fe.get(ge))+K);return new QRPolynomial(me,0).mod(fe)}};var Polynomial$2=QRPolynomial,Mode=mode$1,Polynomial$1=Polynomial$2,math=math$2,QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(fe){for(var K=fe<<10;QRUtil.getBCHDigit(K)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)K^=QRUtil.G15<<QRUtil.getBCHDigit(K)-QRUtil.getBCHDigit(QRUtil.G15);return(fe<<10|K)^QRUtil.G15_MASK},getBCHTypeNumber:function(fe){for(var K=fe<<12;QRUtil.getBCHDigit(K)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)K^=QRUtil.G18<<QRUtil.getBCHDigit(K)-QRUtil.getBCHDigit(QRUtil.G18);return fe<<12|K},getBCHDigit:function(fe){for(var K=0;fe!=0;)K++,fe>>>=1;return K},getPatternPosition:function(fe){return QRUtil.PATTERN_POSITION_TABLE[fe-1]},getMask:function(fe,K,me){switch(fe){case QRMaskPattern.PATTERN000:return(K+me)%2==0;case QRMaskPattern.PATTERN001:return K%2==0;case QRMaskPattern.PATTERN010:return me%3==0;case QRMaskPattern.PATTERN011:return(K+me)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(K/2)+Math.floor(me/3))%2==0;case QRMaskPattern.PATTERN101:return K*me%2+K*me%3==0;case QRMaskPattern.PATTERN110:return(K*me%2+K*me%3)%2==0;case QRMaskPattern.PATTERN111:return(K*me%3+(K+me)%2)%2==0;default:throw new Error("bad maskPattern:"+fe)}},getErrorCorrectPolynomial:function(fe){for(var K=new Polynomial$1([1],0),me=0;me<fe;me++)K=K.multiply(new Polynomial$1([1,math.gexp(me)],0));return K},getLengthInBits:function(fe,K){if(1<=K&&K<10)switch(fe){case Mode.MODE_NUMBER:return 10;case Mode.MODE_ALPHA_NUM:return 9;case Mode.MODE_8BIT_BYTE:return 8;case Mode.MODE_KANJI:return 8;default:throw new Error("mode:"+fe)}else if(K<27)switch(fe){case Mode.MODE_NUMBER:return 12;case Mode.MODE_ALPHA_NUM:return 11;case Mode.MODE_8BIT_BYTE:return 16;case Mode.MODE_KANJI:return 10;default:throw new Error("mode:"+fe)}else if(K<41)switch(fe){case Mode.MODE_NUMBER:return 14;case Mode.MODE_ALPHA_NUM:return 13;case Mode.MODE_8BIT_BYTE:return 16;case Mode.MODE_KANJI:return 12;default:throw new Error("mode:"+fe)}else throw new Error("type:"+K)},getLostPoint:function(fe){for(var K=fe.getModuleCount(),me=0,ge=0;ge<K;ge++)for(var xe=0;xe<K;xe++){for(var ye=0,ve=fe.isDark(ge,xe),_e=-1;_e<=1;_e++)if(!(ge+_e<0||K<=ge+_e))for(var Ee=-1;Ee<=1;Ee++)xe+Ee<0||K<=xe+Ee||_e==0&&Ee==0||ve==fe.isDark(ge+_e,xe+Ee)&&ye++;ye>5&&(me+=3+ye-5)}for(var ge=0;ge<K-1;ge++)for(var xe=0;xe<K-1;xe++){var be=0;fe.isDark(ge,xe)&&be++,fe.isDark(ge+1,xe)&&be++,fe.isDark(ge,xe+1)&&be++,fe.isDark(ge+1,xe+1)&&be++,(be==0||be==4)&&(me+=3)}for(var ge=0;ge<K;ge++)for(var xe=0;xe<K-6;xe++)fe.isDark(ge,xe)&&!fe.isDark(ge,xe+1)&&fe.isDark(ge,xe+2)&&fe.isDark(ge,xe+3)&&fe.isDark(ge,xe+4)&&!fe.isDark(ge,xe+5)&&fe.isDark(ge,xe+6)&&(me+=40);for(var xe=0;xe<K;xe++)for(var ge=0;ge<K-6;ge++)fe.isDark(ge,xe)&&!fe.isDark(ge+1,xe)&&fe.isDark(ge+2,xe)&&fe.isDark(ge+3,xe)&&fe.isDark(ge+4,xe)&&!fe.isDark(ge+5,xe)&&fe.isDark(ge+6,xe)&&(me+=40);for(var Ae=0,xe=0;xe<K;xe++)for(var ge=0;ge<K;ge++)fe.isDark(ge,xe)&&Ae++;var Se=Math.abs(100*Ae/K/K-50)/5;return me+=Se*10,me}},util$1=QRUtil,BitByte=_8BitByte,RSBlock=RSBlock$1,BitBuffer=BitBuffer$1,util=util$1,Polynomial=Polynomial$2;function QRCode$1(fe,K){this.typeNumber=fe,this.errorCorrectLevel=K,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}var proto=QRCode$1.prototype;proto.addData=function(fe){var K=new BitByte(fe);this.dataList.push(K),this.dataCache=null};proto.isDark=function(fe,K){if(fe<0||this.moduleCount<=fe||K<0||this.moduleCount<=K)throw new Error(fe+","+K);return this.modules[fe][K]};proto.getModuleCount=function(){return this.moduleCount};proto.make=function(){if(this.typeNumber<1){var fe=1;for(fe=1;fe<40;fe++){for(var K=RSBlock.getRSBlocks(fe,this.errorCorrectLevel),me=new BitBuffer,ge=0,xe=0;xe<K.length;xe++)ge+=K[xe].dataCount;for(var xe=0;xe<this.dataList.length;xe++){var ye=this.dataList[xe];me.put(ye.mode,4),me.put(ye.getLength(),util.getLengthInBits(ye.mode,fe)),ye.write(me)}if(me.getLengthInBits()<=ge*8)break}this.typeNumber=fe}this.makeImpl(!1,this.getBestMaskPattern())};proto.makeImpl=function(fe,K){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var me=0;me<this.moduleCount;me++){this.modules[me]=new Array(this.moduleCount);for(var ge=0;ge<this.moduleCount;ge++)this.modules[me][ge]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(fe,K),this.typeNumber>=7&&this.setupTypeNumber(fe),this.dataCache==null&&(this.dataCache=QRCode$1.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,K)};proto.setupPositionProbePattern=function(fe,K){for(var me=-1;me<=7;me++)if(!(fe+me<=-1||this.moduleCount<=fe+me))for(var ge=-1;ge<=7;ge++)K+ge<=-1||this.moduleCount<=K+ge||(0<=me&&me<=6&&(ge==0||ge==6)||0<=ge&&ge<=6&&(me==0||me==6)||2<=me&&me<=4&&2<=ge&&ge<=4?this.modules[fe+me][K+ge]=!0:this.modules[fe+me][K+ge]=!1)};proto.getBestMaskPattern=function(){for(var fe=0,K=0,me=0;me<8;me++){this.makeImpl(!0,me);var ge=util.getLostPoint(this);(me==0||fe>ge)&&(fe=ge,K=me)}return K};proto.createMovieClip=function(fe,K,me){var ge=fe.createEmptyMovieClip(K,me),xe=1;this.make();for(var ye=0;ye<this.modules.length;ye++)for(var ve=ye*xe,_e=0;_e<this.modules[ye].length;_e++){var Ee=_e*xe,be=this.modules[ye][_e];be&&(ge.beginFill(0,100),ge.moveTo(Ee,ve),ge.lineTo(Ee+xe,ve),ge.lineTo(Ee+xe,ve+xe),ge.lineTo(Ee,ve+xe),ge.endFill())}return ge};proto.setupTimingPattern=function(){for(var fe=8;fe<this.moduleCount-8;fe++)this.modules[fe][6]==null&&(this.modules[fe][6]=fe%2==0);for(var K=8;K<this.moduleCount-8;K++)this.modules[6][K]==null&&(this.modules[6][K]=K%2==0)};proto.setupPositionAdjustPattern=function(){for(var fe=util.getPatternPosition(this.typeNumber),K=0;K<fe.length;K++)for(var me=0;me<fe.length;me++){var ge=fe[K],xe=fe[me];if(this.modules[ge][xe]==null)for(var ye=-2;ye<=2;ye++)for(var ve=-2;ve<=2;ve++)ye==-2||ye==2||ve==-2||ve==2||ye==0&&ve==0?this.modules[ge+ye][xe+ve]=!0:this.modules[ge+ye][xe+ve]=!1}};proto.setupTypeNumber=function(fe){for(var K=util.getBCHTypeNumber(this.typeNumber),me=0;me<18;me++){var ge=!fe&&(K>>me&1)==1;this.modules[Math.floor(me/3)][me%3+this.moduleCount-8-3]=ge}for(var me=0;me<18;me++){var ge=!fe&&(K>>me&1)==1;this.modules[me%3+this.moduleCount-8-3][Math.floor(me/3)]=ge}};proto.setupTypeInfo=function(fe,K){for(var me=this.errorCorrectLevel<<3|K,ge=util.getBCHTypeInfo(me),xe=0;xe<15;xe++){var ye=!fe&&(ge>>xe&1)==1;xe<6?this.modules[xe][8]=ye:xe<8?this.modules[xe+1][8]=ye:this.modules[this.moduleCount-15+xe][8]=ye}for(var xe=0;xe<15;xe++){var ye=!fe&&(ge>>xe&1)==1;xe<8?this.modules[8][this.moduleCount-xe-1]=ye:xe<9?this.modules[8][15-xe-1+1]=ye:this.modules[8][15-xe-1]=ye}this.modules[this.moduleCount-8][8]=!fe};proto.mapData=function(fe,K){for(var me=-1,ge=this.moduleCount-1,xe=7,ye=0,ve=this.moduleCount-1;ve>0;ve-=2)for(ve==6&&ve--;;){for(var _e=0;_e<2;_e++)if(this.modules[ge][ve-_e]==null){var Ee=!1;ye<fe.length&&(Ee=(fe[ye]>>>xe&1)==1);var be=util.getMask(K,ge,ve-_e);be&&(Ee=!Ee),this.modules[ge][ve-_e]=Ee,xe--,xe==-1&&(ye++,xe=7)}if(ge+=me,ge<0||this.moduleCount<=ge){ge-=me,me=-me;break}}};QRCode$1.PAD0=236;QRCode$1.PAD1=17;QRCode$1.createData=function(fe,K,me){for(var ge=RSBlock.getRSBlocks(fe,K),xe=new BitBuffer,ye=0;ye<me.length;ye++){var ve=me[ye];xe.put(ve.mode,4),xe.put(ve.getLength(),util.getLengthInBits(ve.mode,fe)),ve.write(xe)}for(var _e=0,ye=0;ye<ge.length;ye++)_e+=ge[ye].dataCount;if(xe.getLengthInBits()>_e*8)throw new Error("code length overflow. ("+xe.getLengthInBits()+">"+_e*8+")");for(xe.getLengthInBits()+4<=_e*8&&xe.put(0,4);xe.getLengthInBits()%8!=0;)xe.putBit(!1);for(;!(xe.getLengthInBits()>=_e*8||(xe.put(QRCode$1.PAD0,8),xe.getLengthInBits()>=_e*8));)xe.put(QRCode$1.PAD1,8);return QRCode$1.createBytes(xe,ge)};QRCode$1.createBytes=function(fe,K){for(var me=0,ge=0,xe=0,ye=new Array(K.length),ve=new Array(K.length),_e=0;_e<K.length;_e++){var Ee=K[_e].dataCount,be=K[_e].totalCount-Ee;ge=Math.max(ge,Ee),xe=Math.max(xe,be),ye[_e]=new Array(Ee);for(var Ae=0;Ae<ye[_e].length;Ae++)ye[_e][Ae]=255&fe.buffer[Ae+me];me+=Ee;var Se=util.getErrorCorrectPolynomial(be),Ce=new Polynomial(ye[_e],Se.getLength()-1),Te=Ce.mod(Se);ve[_e]=new Array(Se.getLength()-1);for(var Ae=0;Ae<ve[_e].length;Ae++){var Re=Ae+Te.getLength()-ve[_e].length;ve[_e][Ae]=Re>=0?Te.get(Re):0}}for(var De=0,Ae=0;Ae<K.length;Ae++)De+=K[Ae].totalCount;for(var Ie=new Array(De),Be=0,Ae=0;Ae<ge;Ae++)for(var _e=0;_e<K.length;_e++)Ae<ye[_e].length&&(Ie[Be++]=ye[_e][Ae]);for(var Ae=0;Ae<xe;Ae++)for(var _e=0;_e<K.length;_e++)Ae<ve[_e].length&&(Ie[Be++]=ve[_e][Ae]);return Ie};var QRCode_1=QRCode$1,QRCodeSvg$1={};Object.defineProperty(QRCodeSvg$1,"__esModule",{value:!0});var _extends$1=Object.assign||function(fe){for(var K=1;K<arguments.length;K++){var me=arguments[K];for(var ge in me)Object.prototype.hasOwnProperty.call(me,ge)&&(fe[ge]=me[ge])}return fe},_propTypes$1=propTypesExports,_propTypes2$1=_interopRequireDefault$1(_propTypes$1),_react$1=reactExports,_react2$1=_interopRequireDefault$1(_react$1);function _interopRequireDefault$1(fe){return fe&&fe.__esModule?fe:{default:fe}}function _objectWithoutProperties$1(fe,K){var me={};for(var ge in fe)K.indexOf(ge)>=0||Object.prototype.hasOwnProperty.call(fe,ge)&&(me[ge]=fe[ge]);return me}var propTypes$1={bgColor:_propTypes2$1.default.oneOfType([_propTypes2$1.default.object,_propTypes2$1.default.string]).isRequired,bgD:_propTypes2$1.default.string.isRequired,fgColor:_propTypes2$1.default.oneOfType([_propTypes2$1.default.object,_propTypes2$1.default.string]).isRequired,fgD:_propTypes2$1.default.string.isRequired,size:_propTypes2$1.default.number.isRequired,title:_propTypes2$1.default.string,viewBoxSize:_propTypes2$1.default.number.isRequired,xmlns:_propTypes2$1.default.string},QRCodeSvg=(0,_react$1.forwardRef)(function(fe,K){var me=fe.bgColor,ge=fe.bgD,xe=fe.fgD,ye=fe.fgColor,ve=fe.size,_e=fe.title,Ee=fe.viewBoxSize,be=fe.xmlns,Ae=be===void 0?"http://www.w3.org/2000/svg":be,Se=_objectWithoutProperties$1(fe,["bgColor","bgD","fgD","fgColor","size","title","viewBoxSize","xmlns"]);return _react2$1.default.createElement("svg",_extends$1({},Se,{height:ve,ref:K,viewBox:"0 0 "+Ee+" "+Ee,width:ve,xmlns:Ae}),_e?_react2$1.default.createElement("title",null,_e):null,_react2$1.default.createElement("path",{d:ge,fill:me}),_react2$1.default.createElement("path",{d:xe,fill:ye}))});QRCodeSvg.displayName="QRCodeSvg";QRCodeSvg.propTypes=propTypes$1;QRCodeSvg$1.default=QRCodeSvg;Object.defineProperty(lib,"__esModule",{value:!0});lib.QRCode=void 0;var _extends=Object.assign||function(fe){for(var K=1;K<arguments.length;K++){var me=arguments[K];for(var ge in me)Object.prototype.hasOwnProperty.call(me,ge)&&(fe[ge]=me[ge])}return fe},_propTypes=propTypesExports,_propTypes2=_interopRequireDefault(_propTypes),_ErrorCorrectLevel=ErrorCorrectLevel,_ErrorCorrectLevel2=_interopRequireDefault(_ErrorCorrectLevel),_QRCode=QRCode_1,_QRCode2=_interopRequireDefault(_QRCode),_react=reactExports,_react2=_interopRequireDefault(_react),_QRCodeSvg=QRCodeSvg$1,_QRCodeSvg2=_interopRequireDefault(_QRCodeSvg);function _interopRequireDefault(fe){return fe&&fe.__esModule?fe:{default:fe}}function _objectWithoutProperties(fe,K){var me={};for(var ge in fe)K.indexOf(ge)>=0||Object.prototype.hasOwnProperty.call(fe,ge)&&(me[ge]=fe[ge]);return me}var propTypes={bgColor:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.string]),fgColor:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.string]),level:_propTypes2.default.string,size:_propTypes2.default.number,value:_propTypes2.default.string.isRequired},QRCode=(0,_react.forwardRef)(function(fe,K){var me=fe.bgColor,ge=me===void 0?"#FFFFFF":me,xe=fe.fgColor,ye=xe===void 0?"#000000":xe,ve=fe.level,_e=ve===void 0?"L":ve,Ee=fe.size,be=Ee===void 0?256:Ee,Ae=fe.value,Se=_objectWithoutProperties(fe,["bgColor","fgColor","level","size","value"]),Ce=new _QRCode2.default(-1,_ErrorCorrectLevel2.default[_e]);Ce.addData(Ae),Ce.make();var Te=Ce.modules;return _react2.default.createElement(_QRCodeSvg2.default,_extends({},Se,{bgColor:ge,bgD:Te.map(function(Re,De){return Re.map(function(Ie,Be){return Ie?"":"M "+Be+" "+De+" l 1 0 0 1 -1 0 Z"}).join(" ")}).join(" "),fgColor:ye,fgD:Te.map(function(Re,De){return Re.map(function(Ie,Be){return Ie?"M "+Be+" "+De+" l 1 0 0 1 -1 0 Z":""}).join(" ")}).join(" "),ref:K,size:be,viewBoxSize:Te.length}))});lib.QRCode=QRCode;QRCode.displayName="QRCode";QRCode.propTypes=propTypes;var _default=lib.default=QRCode,tableWrapper="z8daqr0",propsWrapper="z8daqr1",editIconWrapper="z8daqr2",tableRow="z8daqr3",tableHierarchyLine="z8daqr4";function validateFormName(fe){if(!/^[0-9a-zA-Z-]+$/.test(fe))throw new Error(`[@mantine/use-form] Form name "${fe}" is invalid, it should contain only letters, numbers and dashes`)}const useIsomorphicEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect;function useFormEvent(fe,K){useIsomorphicEffect(()=>{if(fe)return window.addEventListener(fe,K),()=>window.removeEventListener(fe,K)},[fe])}function useFormActions(fe,K){fe&&validateFormName(fe),useFormEvent(`mantine-form:${fe}:set-field-value`,me=>K.setFieldValue(me.detail.path,me.detail.value)),useFormEvent(`mantine-form:${fe}:set-values`,me=>K.setValues(me.detail)),useFormEvent(`mantine-form:${fe}:set-initial-values`,me=>K.setInitialValues(me.detail)),useFormEvent(`mantine-form:${fe}:set-errors`,me=>K.setErrors(me.detail)),useFormEvent(`mantine-form:${fe}:set-field-error`,me=>K.setFieldError(me.detail.path,me.detail.error)),useFormEvent(`mantine-form:${fe}:clear-field-error`,me=>K.clearFieldError(me.detail)),useFormEvent(`mantine-form:${fe}:clear-errors`,K.clearErrors),useFormEvent(`mantine-form:${fe}:reset`,K.reset),useFormEvent(`mantine-form:${fe}:validate`,K.validate),useFormEvent(`mantine-form:${fe}:validate-field`,me=>K.validateField(me.detail)),useFormEvent(`mantine-form:${fe}:reorder-list-item`,me=>K.reorderListItem(me.detail.path,me.detail.payload)),useFormEvent(`mantine-form:${fe}:remove-list-item`,me=>K.removeListItem(me.detail.path,me.detail.index)),useFormEvent(`mantine-form:${fe}:insert-list-item`,me=>K.insertListItem(me.detail.path,me.detail.item,me.detail.index)),useFormEvent(`mantine-form:${fe}:set-dirty`,me=>K.setDirty(me.detail)),useFormEvent(`mantine-form:${fe}:set-touched`,me=>K.setTouched(me.detail)),useFormEvent(`mantine-form:${fe}:reset-dirty`,me=>K.resetDirty(me.detail)),useFormEvent(`mantine-form:${fe}:reset-touched`,K.resetTouched)}function getInputOnChange(fe){return K=>{if(!K)fe(K);else if(typeof K=="function")fe(K);else if(typeof K=="object"&&"nativeEvent"in K){const{currentTarget:me}=K;me instanceof HTMLInputElement?me.type==="checkbox"?fe(me.checked):fe(me.value):(me instanceof HTMLTextAreaElement||me instanceof HTMLSelectElement)&&fe(me.value)}else fe(K)}}function filterErrors(fe){return fe===null||typeof fe!="object"?{}:Object.keys(fe).reduce((K,me)=>{const ge=fe[me];return ge!=null&&ge!==!1&&(K[me]=ge),K},{})}function useFormErrors(fe){const[K,me]=reactExports.useState(filterErrors(fe)),ge=reactExports.useRef(K),xe=reactExports.useCallback(Ee=>{me(be=>{const Ae=filterErrors(typeof Ee=="function"?Ee(be):Ee);return ge.current=Ae,Ae})},[]),ye=reactExports.useCallback(()=>xe({}),[]),ve=reactExports.useCallback(Ee=>{ge.current[Ee]!==void 0&&xe(be=>{const Ae={...be};return delete Ae[Ee],Ae})},[K]),_e=reactExports.useCallback((Ee,be)=>{be==null||be===!1?ve(Ee):ge.current[Ee]!==be&&xe(Ae=>({...Ae,[Ee]:be}))},[K]);return{errorsState:K,setErrors:xe,clearErrors:ye,setFieldError:_e,clearFieldError:ve}}function clearListState(fe,K){if(K===null||typeof K!="object")return{};const me={...K};return Object.keys(K).forEach(ge=>{ge.includes(`${String(fe)}.`)&&delete me[ge]}),me}function getIndexFromKeyAfterPath(fe,K){const me=fe.substring(K.length+1).split(".")[0];return parseInt(me,10)}function changeErrorIndices(fe,K,me,ge){if(K===void 0)return me;const xe=`${String(fe)}`;let ye=me;ge===-1&&(ye=clearListState(`${xe}.${K}`,ye));const ve={...ye},_e=new Set;return Object.entries(ye).filter(([Ee])=>{if(!Ee.startsWith(`${xe}.`))return!1;const be=getIndexFromKeyAfterPath(Ee,xe);return Number.isNaN(be)?!1:be>=K}).forEach(([Ee,be])=>{const Ae=getIndexFromKeyAfterPath(Ee,xe),Se=Ee.replace(`${xe}.${Ae}`,`${xe}.${Ae+ge}`);ve[Se]=be,_e.add(Se),_e.has(Ee)||delete ve[Ee]}),ve}function reorderErrors(fe,{from:K,to:me},ge){const xe=`${fe}.${K}`,ye=`${fe}.${me}`,ve={...ge};return Object.keys(ge).every(_e=>{let Ee,be;if(_e.startsWith(xe)&&(Ee=_e,be=_e.replace(xe,ye)),_e.startsWith(ye)&&(Ee=_e.replace(ye,xe),be=_e),Ee&&be){const Ae=ve[Ee],Se=ve[be];return Se===void 0?delete ve[Ee]:ve[Ee]=Se,Ae===void 0?delete ve[be]:ve[be]=Ae,!1}return!0}),ve}function set$1(fe,K,me){typeof me.value=="object"&&(me.value=klona(me.value)),!me.enumerable||me.get||me.set||!me.configurable||!me.writable||K==="__proto__"?Object.defineProperty(fe,K,me):fe[K]=me.value}function klona(fe){if(typeof fe!="object")return fe;var K=0,me,ge,xe,ye=Object.prototype.toString.call(fe);if(ye==="[object Object]"?xe=Object.create(fe.__proto__||null):ye==="[object Array]"?xe=Array(fe.length):ye==="[object Set]"?(xe=new Set,fe.forEach(function(ve){xe.add(klona(ve))})):ye==="[object Map]"?(xe=new Map,fe.forEach(function(ve,_e){xe.set(klona(_e),klona(ve))})):ye==="[object Date]"?xe=new Date(+fe):ye==="[object RegExp]"?xe=new RegExp(fe.source,fe.flags):ye==="[object DataView]"?xe=new fe.constructor(klona(fe.buffer)):ye==="[object ArrayBuffer]"?xe=fe.slice(0):ye.slice(-6)==="Array]"&&(xe=new fe.constructor(fe)),xe){for(ge=Object.getOwnPropertySymbols(fe);K<ge.length;K++)set$1(xe,ge[K],Object.getOwnPropertyDescriptor(fe,ge[K]));for(K=0,ge=Object.getOwnPropertyNames(fe);K<ge.length;K++)Object.hasOwnProperty.call(xe,me=ge[K])&&xe[me]===fe[me]||set$1(xe,me,Object.getOwnPropertyDescriptor(fe,me))}return xe||fe}function getSplittedPath(fe){return typeof fe!="string"?[]:fe.split(".")}function getPath(fe,K){const me=getSplittedPath(fe);if(me.length===0||typeof K!="object"||K===null)return;let ge=K[me[0]];for(let xe=1;xe<me.length&&ge!=null;xe+=1)ge=ge[me[xe]];return ge}function setPath(fe,K,me){const ge=getSplittedPath(fe);if(ge.length===0)return me;const xe=klona(me);if(ge.length===1)return xe[ge[0]]=K,xe;let ye=xe[ge[0]];for(let ve=1;ve<ge.length-1;ve+=1){if(ye===void 0)return xe;ye=ye[ge[ve]]}return ye[ge[ge.length-1]]=K,xe}function reorderPath(fe,{from:K,to:me},ge){const xe=getPath(fe,ge);if(!Array.isArray(xe))return ge;const ye=[...xe],ve=xe[K];return ye.splice(K,1),ye.splice(me,0,ve),setPath(fe,ye,ge)}function insertPath(fe,K,me,ge){const xe=getPath(fe,ge);if(!Array.isArray(xe))return ge;const ye=[...xe];return ye.splice(typeof me=="number"?me:ye.length,0,K),setPath(fe,ye,ge)}function removePath(fe,K,me){const ge=getPath(fe,me);return Array.isArray(ge)?setPath(fe,ge.filter((xe,ye)=>ye!==K),me):me}function replacePath(fe,K,me,ge){const xe=getPath(fe,ge);if(!Array.isArray(xe)||xe.length<=me)return ge;const ye=[...xe];return ye[me]=K,setPath(fe,ye,ge)}function useFormList({$values:fe,$errors:K,$status:me}){const ge=reactExports.useCallback((_e,Ee)=>{me.clearFieldDirty(_e),K.setErrors(be=>reorderErrors(_e,Ee,be)),fe.setValues({values:reorderPath(_e,Ee,fe.refValues.current),updateState:!0})},[]),xe=reactExports.useCallback((_e,Ee)=>{me.clearFieldDirty(_e),K.setErrors(be=>changeErrorIndices(_e,Ee,be,-1)),fe.setValues({values:removePath(_e,Ee,fe.refValues.current),updateState:!0})},[]),ye=reactExports.useCallback((_e,Ee,be)=>{me.clearFieldDirty(_e),K.setErrors(Ae=>changeErrorIndices(_e,be,Ae,1)),fe.setValues({values:insertPath(_e,Ee,be,fe.refValues.current),updateState:!0})},[]),ve=reactExports.useCallback((_e,Ee,be)=>{me.clearFieldDirty(_e),fe.setValues({values:replacePath(_e,be,Ee,fe.refValues.current),updateState:!0})},[]);return{reorderListItem:ge,removeListItem:xe,insertListItem:ye,replaceListItem:ve}}var fastDeepEqual=function fe(K,me){if(K===me)return!0;if(K&&me&&typeof K=="object"&&typeof me=="object"){if(K.constructor!==me.constructor)return!1;var ge,xe,ye;if(Array.isArray(K)){if(ge=K.length,ge!=me.length)return!1;for(xe=ge;xe--!==0;)if(!fe(K[xe],me[xe]))return!1;return!0}if(K.constructor===RegExp)return K.source===me.source&&K.flags===me.flags;if(K.valueOf!==Object.prototype.valueOf)return K.valueOf()===me.valueOf();if(K.toString!==Object.prototype.toString)return K.toString()===me.toString();if(ye=Object.keys(K),ge=ye.length,ge!==Object.keys(me).length)return!1;for(xe=ge;xe--!==0;)if(!Object.prototype.hasOwnProperty.call(me,ye[xe]))return!1;for(xe=ge;xe--!==0;){var ve=ye[xe];if(!fe(K[ve],me[ve]))return!1}return!0}return K!==K&&me!==me};const isEqual=getDefaultExportFromCjs(fastDeepEqual);function getStatus(fe,K){const me=Object.keys(fe);if(typeof K=="string"){const ge=me.filter(xe=>xe.startsWith(`${K}.`));return fe[K]||ge.some(xe=>fe[xe])||!1}return me.some(ge=>fe[ge])}function useFormStatus({initialDirty:fe,initialTouched:K,mode:me,$values:ge}){const[xe,ye]=reactExports.useState(K),[ve,_e]=reactExports.useState(fe),Ee=reactExports.useRef(K),be=reactExports.useRef(fe),Ae=reactExports.useCallback(Ne=>{const He=typeof Ne=="function"?Ne(Ee.current):Ne;Ee.current=He,me==="controlled"&&ye(He)},[]),Se=reactExports.useCallback((Ne,He=!1)=>{const ze=typeof Ne=="function"?Ne(be.current):Ne;be.current=ze,(me==="controlled"||He)&&_e(ze)},[]),Ce=reactExports.useCallback(()=>Ae({}),[]),Te=reactExports.useCallback(Ne=>{const He=Ne?{...ge.refValues.current,...Ne}:ge.refValues.current;ge.setValuesSnapshot(He),Se({})},[]),Re=reactExports.useCallback((Ne,He)=>{Ae(ze=>getStatus(ze,Ne)===He?ze:{...ze,[Ne]:He})},[]),De=reactExports.useCallback((Ne,He,ze)=>{Se(je=>getStatus(je,Ne)===He?je:{...je,[Ne]:He},ze)},[]),Ie=reactExports.useCallback((Ne,He)=>{const ze=getStatus(be.current,Ne),je=!isEqual(getPath(Ne,ge.getValuesSnapshot()),He),Ge=clearListState(Ne,be.current);Ge[Ne]=je,Se(Ge,ze!==je)},[]),Be=reactExports.useCallback(Ne=>getStatus(Ee.current,Ne),[]),Le=reactExports.useCallback(Ne=>Se(He=>{if(typeof Ne!="string")return He;const ze=clearListState(Ne,He);return delete ze[Ne],isEqual(ze,He)?He:ze}),[]),Oe=reactExports.useCallback(Ne=>{if(Ne){const ze=getPath(Ne,be.current);if(typeof ze=="boolean")return ze;const je=getPath(Ne,ge.refValues.current),Ge=getPath(Ne,ge.valuesSnapshot.current);return!isEqual(je,Ge)}return Object.keys(be.current).length>0?getStatus(be.current):!isEqual(ge.refValues.current,ge.valuesSnapshot.current)},[]),Fe=reactExports.useCallback(()=>be.current,[]),Ue=reactExports.useCallback(()=>Ee.current,[]);return{touchedState:xe,dirtyState:ve,touchedRef:Ee,dirtyRef:be,setTouched:Ae,setDirty:Se,resetDirty:Te,resetTouched:Ce,isTouched:Be,setFieldTouched:Re,setFieldDirty:De,setTouchedState:ye,setDirtyState:_e,clearFieldDirty:Le,isDirty:Oe,getDirty:Fe,getTouched:Ue,setCalculatedFieldDirty:Ie}}function useFormValues({initialValues:fe,onValuesChange:K,mode:me}){const ge=reactExports.useRef(!1),[xe,ye]=reactExports.useState(fe||{}),ve=reactExports.useRef(xe),_e=reactExports.useRef(xe),Ee=reactExports.useCallback(({values:De,subscribers:Ie,updateState:Be=!0,mergeWithPreviousValues:Le=!0})=>{const Oe=ve.current,Fe=De instanceof Function?De(ve.current):De,Ue=Le?{...Oe,...Fe}:Fe;ve.current=Ue,Be&&ye(Ue),K?.(Ue,Oe),Ie?.filter(Boolean).forEach(Ne=>Ne({updatedValues:Ue,previousValues:Oe}))},[K]),be=reactExports.useCallback(De=>{const Ie=getPath(De.path,ve.current),Be=De.value instanceof Function?De.value(Ie):De.value;if(Ie!==Be){const Le=ve.current,Oe=setPath(De.path,Be,ve.current);Ee({values:Oe,updateState:De.updateState}),De.subscribers?.filter(Boolean).forEach(Fe=>Fe({path:De.path,updatedValues:Oe,previousValues:Le}))}},[Ee]),Ae=reactExports.useCallback(De=>{_e.current=De},[]),Se=reactExports.useCallback((De,Ie)=>{ge.current||(ge.current=!0,Ee({values:De,updateState:me==="controlled"}),Ae(De),Ie())},[Ee]),Ce=reactExports.useCallback(()=>{Ee({values:_e.current,updateState:!0,mergeWithPreviousValues:!1})},[Ee]),Te=reactExports.useCallback(()=>ve.current,[]),Re=reactExports.useCallback(()=>_e.current,[]);return{initialized:ge,stateValues:xe,refValues:ve,valuesSnapshot:_e,setValues:Ee,setFieldValue:be,resetValues:Ce,setValuesSnapshot:Ae,initialize:Se,getValues:Te,getValuesSnapshot:Re}}function useFormWatch({$status:fe}){const K=reactExports.useRef({}),me=reactExports.useCallback((xe,ye)=>{reactExports.useEffect(()=>(K.current[xe]=K.current[xe]||[],K.current[xe].push(ye),()=>{K.current[xe]=K.current[xe].filter(ve=>ve!==ye)}),[ye])},[]),ge=reactExports.useCallback(xe=>K.current[xe]?K.current[xe].map(ye=>ve=>ye({previousValue:getPath(xe,ve.previousValues),value:getPath(xe,ve.updatedValues),touched:fe.isTouched(xe),dirty:fe.isDirty(xe)})):[],[]);return{subscribers:K,watch:me,getFieldSubscribers:ge}}function getDataPath(fe,K){return fe?`${fe}-${K.toString()}`:K.toString()}const formRootRule=Symbol("root-rule");function getValidationResults(fe){const K=filterErrors(fe);return{hasErrors:Object.keys(K).length>0,errors:K}}function validateRulesRecord(fe,K,me="",ge={}){return typeof fe!="object"||fe===null?ge:Object.keys(fe).reduce((xe,ye)=>{const ve=fe[ye],_e=`${me===""?"":`${me}.`}${ye}`,Ee=getPath(_e,K);let be=!1;return typeof ve=="function"&&(xe[_e]=ve(Ee,K,_e)),typeof ve=="object"&&Array.isArray(Ee)&&(be=!0,Ee.forEach((Ae,Se)=>validateRulesRecord(ve,K,`${_e}.${Se}`,xe)),formRootRule in ve&&(xe[_e]=ve[formRootRule](Ee,K,_e))),typeof ve=="object"&&typeof Ee=="object"&&Ee!==null&&(be||validateRulesRecord(ve,K,_e,xe),formRootRule in ve&&(xe[_e]=ve[formRootRule](Ee,K,_e))),xe},ge)}function validateValues(fe,K){return getValidationResults(typeof fe=="function"?fe(K):validateRulesRecord(fe,K))}function validateFieldValue(fe,K,me){if(typeof fe!="string")return{hasError:!1,error:null};const ge=validateValues(K,me),xe=Object.keys(ge.errors).find(ye=>fe.split(".").every((ve,_e)=>ve===ye.split(".")[_e]));return{hasError:!!xe,error:xe?ge.errors[xe]:null}}const FORM_INDEX="__MANTINE_FORM_INDEX__";function shouldValidateOnChange(fe,K){return K?typeof K=="boolean"?K:Array.isArray(K)?K.includes(fe.replace(/[.][0-9]+/g,`.${FORM_INDEX}`)):!1:!1}function useForm({name:fe,mode:K="controlled",initialValues:me,initialErrors:ge={},initialDirty:xe={},initialTouched:ye={},clearInputErrorOnChange:ve=!0,validateInputOnChange:_e=!1,validateInputOnBlur:Ee=!1,onValuesChange:be,transformValues:Ae=De=>De,enhanceGetInputProps:Se,validate:Ce,onSubmitPreventDefault:Te="always",touchTrigger:Re="change"}={}){const De=useFormErrors(ge),Ie=useFormValues({initialValues:me,onValuesChange:be,mode:K}),Be=useFormStatus({initialDirty:xe,initialTouched:ye,$values:Ie,mode:K}),Le=useFormList({$values:Ie,$errors:De,$status:Be}),Oe=useFormWatch({$status:Be}),[Fe,Ue]=reactExports.useState(0),[Ne,He]=reactExports.useState({}),[ze,je]=reactExports.useState(!1),Ge=reactExports.useCallback(()=>{Ie.resetValues(),De.clearErrors(),Be.resetDirty(),Be.resetTouched(),K==="uncontrolled"&&Ue(Gt=>Gt+1)},[]),Xe=reactExports.useCallback(Gt=>{ve&&De.clearErrors(),K==="uncontrolled"&&Ue(an=>an+1),Object.keys(Oe.subscribers.current).forEach(an=>{const pn=getPath(an,Ie.refValues.current),En=getPath(an,Gt);pn!==En&&Oe.getFieldSubscribers(an).forEach($n=>$n({previousValues:Gt,updatedValues:Ie.refValues.current}))})},[ve]),qe=reactExports.useCallback(Gt=>{const an=Ie.refValues.current;Ie.initialize(Gt,()=>K==="uncontrolled"&&Ue(pn=>pn+1)),Xe(an)},[Xe]),Qe=reactExports.useCallback((Gt,an,pn)=>{const En=shouldValidateOnChange(Gt,_e),$n=an instanceof Function?an(getPath(Gt,Ie.refValues.current)):an;Be.setCalculatedFieldDirty(Gt,$n),Re==="change"&&Be.setFieldTouched(Gt,!0),!En&&ve&&De.clearFieldError(Gt),Ie.setFieldValue({path:Gt,value:an,updateState:K==="controlled",subscribers:[...Oe.getFieldSubscribers(Gt),En?Un=>{const kn=validateFieldValue(Gt,Ce,Un.updatedValues);kn.hasError?De.setFieldError(Gt,kn.error):De.clearFieldError(Gt)}:null,pn?.forceUpdate!==!1&&K!=="controlled"?()=>He(Un=>({...Un,[Gt]:(Un[Gt]||0)+1})):null]})},[be,Ce]),nt=reactExports.useCallback(Gt=>{const an=Ie.refValues.current;Ie.setValues({values:Gt,updateState:K==="controlled"}),Xe(an)},[be,Xe]),Nt=reactExports.useCallback(()=>{const Gt=validateValues(Ce,Ie.refValues.current);return De.setErrors(Gt.errors),Gt},[Ce]),Ye=reactExports.useCallback(Gt=>{const an=validateFieldValue(Gt,Ce,Ie.refValues.current);return an.hasError?De.setFieldError(Gt,an.error):De.clearFieldError(Gt),an},[Ce]),at=(Gt,{type:an="input",withError:pn=!0,withFocus:En=!0,...$n}={})=>{const kn={onChange:getInputOnChange(bn=>Qe(Gt,bn,{forceUpdate:!1})),"data-path":getDataPath(fe,Gt)};return pn&&(kn.error=De.errorsState[Gt]),an==="checkbox"?kn[K==="controlled"?"checked":"defaultChecked"]=getPath(Gt,Ie.refValues.current):kn[K==="controlled"?"value":"defaultValue"]=getPath(Gt,Ie.refValues.current),En&&(kn.onFocus=()=>Be.setFieldTouched(Gt,!0),kn.onBlur=()=>{if(shouldValidateOnChange(Gt,Ee)){const bn=validateFieldValue(Gt,Ce,Ie.refValues.current);bn.hasError?De.setFieldError(Gt,bn.error):De.clearFieldError(Gt)}}),Object.assign(kn,Se?.({inputProps:kn,field:Gt,options:{type:an,withError:pn,withFocus:En,...$n},form:Yt}))},rt=(Gt,an)=>pn=>{Te==="always"&&pn?.preventDefault();const En=Nt();if(En.hasErrors)Te==="validation-failed"&&pn?.preventDefault(),an?.(En.errors,Ie.refValues.current,pn);else{const $n=Gt?.(Ae(Ie.refValues.current),pn);$n instanceof Promise&&(je(!0),$n.finally(()=>je(!1)))}},Ft=Gt=>Ae(Gt||Ie.refValues.current),Je=reactExports.useCallback(Gt=>{Gt.preventDefault(),Ge()},[]),Wt=reactExports.useCallback(Gt=>Gt?!validateFieldValue(Gt,Ce,Ie.refValues.current).hasError:!validateValues(Ce,Ie.refValues.current).hasErrors,[Ce]),Kt=Gt=>`${Fe}-${Gt}-${Ne[Gt]||0}`,Pt=reactExports.useCallback(Gt=>document.querySelector(`[data-path="${getDataPath(fe,Gt)}"]`),[]),Yt={watch:Oe.watch,initialized:Ie.initialized.current,values:Ie.stateValues,getValues:Ie.getValues,setInitialValues:Ie.setValuesSnapshot,initialize:qe,setValues:nt,setFieldValue:Qe,submitting:ze,setSubmitting:je,errors:De.errorsState,setErrors:De.setErrors,setFieldError:De.setFieldError,clearFieldError:De.clearFieldError,clearErrors:De.clearErrors,resetDirty:Be.resetDirty,setTouched:Be.setTouched,setDirty:Be.setDirty,isTouched:Be.isTouched,resetTouched:Be.resetTouched,isDirty:Be.isDirty,getTouched:Be.getTouched,getDirty:Be.getDirty,reorderListItem:Le.reorderListItem,insertListItem:Le.insertListItem,removeListItem:Le.removeListItem,replaceListItem:Le.replaceListItem,reset:Ge,validate:Nt,validateField:Ye,getInputProps:at,onSubmit:rt,onReset:Je,isValid:Wt,getTransformedValues:Ft,key:Kt,getInputNode:Pt};return useFormActions(fe,Yt),Yt}function EditNodeProps({nodeName:fe,close:K}){const me=React$4.useContext(ViewerContext),ge=me.useSceneTree(Se=>Se.nodeFromName[fe]),xe=me.useSceneTree(Se=>Se.updateSceneNode);if(ge===void 0)return null;function ye(Se){return Se==Number.POSITIVE_INFINITY?"Infinity":JSON.stringify(Se)}function ve(Se){return Se==="Infinity"?Number.POSITIVE_INFINITY:JSON.parse(Se)}const _e=ge.message.props,Ee=Object.fromEntries(Object.entries(_e).filter(([,Se])=>!(Se instanceof Uint8Array)).map(([Se,Ce])=>[Se,ye(Ce)])),be=useForm({initialValues:{...Ee},validate:{...Object.fromEntries(Object.keys(Ee).map(Se=>[Se,Ce=>{try{return ve(Ce),null}catch{return"Invalid JSON"}}]))}}),Ae=Se=>{Object.entries(Se).forEach(([Ce,Te])=>{if(Te!==Ee[Ce])try{const Re=ve(Te);xe(fe,{[Ce]:Re}),be.setFieldValue(Ce,ye(Re))}catch(Re){console.error("Failed to parse JSON:",Re)}})};return jsxRuntimeExports.jsxs(Box,{className:propsWrapper,component:"form",onSubmit:be.onSubmit(Ae),children:[jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsxs(Box,{style:{display:"flex",alignItems:"center"},children:[jsxRuntimeExports.jsxs(Box,{fw:"500",style:{flexGrow:"1"},fz:"sm",children:[ge.message.type.replace("Message","").replace(/([A-Z])/g," $1").trim()," ","Props"]}),jsxRuntimeExports.jsx(Tooltip,{label:"Close props",children:jsxRuntimeExports.jsx(IconX,{style:{cursor:"pointer",width:"1em",height:"1em",display:"block",opacity:"0.7"},onClick:Se=>{Se.stopPropagation(),K()}})})]}),jsxRuntimeExports.jsx(Box,{fz:"xs",opacity:"0.5",children:fe})]}),Object.entries(_e).map(([Se,Ce])=>{if(Ce instanceof Uint8Array)return null;const Te=be.values[Se]!==Ee[Se];return jsxRuntimeExports.jsxs(Flex,{align:"center",children:[jsxRuntimeExports.jsx(Box,{size:"sm",fz:"xs",style:{flexGrow:"1"},children:Se.charAt(0).toUpperCase()+Se.slice(1).split("_").join(" ")}),jsxRuntimeExports.jsx(Flex,{gap:"xs",w:"9em",children:(()=>{try{const Re=ve(be.values[Se]);if(Se.toLowerCase().includes("color")&&Array.isArray(Re)&&Re.length===3&&Re.every(Ie=>typeof Ie=="number")){const Ie=(Le,Oe,Fe)=>{const Ue=Ne=>{const He=Math.round(Ne).toString(16);return He.length===1?"0"+He:He};return"#"+Ue(Le)+Ue(Oe)+Ue(Fe)},Be=Le=>{const Oe=parseInt(Le.slice(1,3),16),Fe=parseInt(Le.slice(3,5),16),Ue=parseInt(Le.slice(5,7),16);return[Oe,Fe,Ue]};return jsxRuntimeExports.jsx(ColorInput,{size:"xs",styles:{input:{height:"1.625rem",minHeight:"1.625rem"}},w:"100%",value:Ie(Re[0],Re[1],Re[2]),onChange:Le=>{const Oe=Be(Le);be.setFieldValue(Se,ye(Oe)),be.onSubmit(Ae)()},onKeyDown:Le=>{Le.key==="Enter"&&(Le.preventDefault(),be.onSubmit(Ae)())}})}}catch{}return jsxRuntimeExports.jsx(TextInput,{size:"xs",styles:{input:{height:"1.625rem",minHeight:"1.625rem",width:"100%"}},w:"100%",...be.getInputProps(Se),onKeyDown:Re=>{Re.key==="Enter"&&(Re.preventDefault(),be.onSubmit(Ae)())},rightSection:jsxRuntimeExports.jsx(IconDeviceFloppy,{style:{width:"1rem",height:"1rem",opacity:Te?1:.3,cursor:Te?"pointer":"default"},onClick:()=>{Te&&be.onSubmit(Ae)()}})})})()})]},Se)}),jsxRuntimeExports.jsx(Box,{fz:"xs",opacity:"0.4",children:"Updates from the server will overwrite local changes."})]})}function SceneTreeTable(){const K=React$4.useContext(ViewerContext).useSceneTree(me=>me.nodeFromName[""].children);return jsxRuntimeExports.jsx(ScrollArea,{className:tableWrapper,children:jsxRuntimeExports.jsx(VisibilityPaintProvider,{children:K.map(me=>jsxRuntimeExports.jsx(SceneTreeTableRow,{nodeName:me,isParentVisible:!0,indentCount:0},me))})})}const VisibilityPaintContext=React$4.createContext(null);function VisibilityPaintProvider({children:fe}){const K=React$4.useRef(!1),me=React$4.useRef(!1),ge=React$4.useCallback(ye=>{K.current=!0,me.current=ye},[]),xe=React$4.useCallback(()=>{K.current=!1},[]);return React$4.useEffect(()=>(window.addEventListener("mouseup",xe),()=>{window.removeEventListener("mouseup",xe)}),[xe]),jsxRuntimeExports.jsx(VisibilityPaintContext.Provider,{value:{paintingRef:K,paintValueRef:me,startPainting:ge,stopPainting:xe},children:fe})}const SceneTreeTableRow=React$4.memo(function fe(K){const me=React$4.useContext(ViewerContext),{paintingRef:ge,paintValueRef:xe,startPainting:ye}=React$4.useContext(VisibilityPaintContext),ve=Ue=>{Ue.stopPropagation();const Ne=!Re;ye(Ne);const He=me.nodeAttributesFromName.current;He[K.nodeName].overrideVisibility=Ne,De(Ne)},_e=()=>{if(!ge.current)return;const Ue=me.nodeAttributesFromName.current;Ue[K.nodeName].overrideVisibility=xe.current,De(xe.current)},Ee=me.useSceneTree(Ue=>Ue.nodeFromName[K.nodeName].children),be=Ee.length>0,[Ae,{toggle:Se}]=useDisclosure(!1),Ce=me.useSceneTree(Ue=>Ue.setLabelVisibility),Te=React$4.useCallback(()=>{const Ue=me.nodeAttributesFromName.current[K.nodeName];return(Ue?.overrideVisibility===void 0?Ue?.visibility:Ue.overrideVisibility)??!0},[K.nodeName]),[Re,De]=React$4.useState(Te());React$4.useEffect(()=>()=>{Ce(K.nodeName,!1)}),React$4.useEffect(()=>{const Ue=setInterval(()=>{const Ne=Te();Ne!==Re&&De(Ne)},200);return()=>{clearInterval(Ue)}},[Re]);const Ie=Re&&K.isParentVisible,Be=Re?IconEye:IconEyeOff,[Le,{open:Oe,close:Fe}]=useDisclosure(!1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Box,{className:tableRow,style:{cursor:be?"pointer":void 0},onClick:be?Se:void 0,onMouseEnter:()=>Ce(K.nodeName,!0),onMouseLeave:()=>Ce(K.nodeName,!1),children:[new Array(K.indentCount).fill(null).map((Ue,Ne)=>jsxRuntimeExports.jsx(Box,{className:tableHierarchyLine},Ne)),jsxRuntimeExports.jsx(Box,{style:{opacity:be?.7:.1},children:Ae?jsxRuntimeExports.jsx(IconCaretDown,{style:{height:"1em",width:"1em",transform:"translateY(0.1em)"}}):jsxRuntimeExports.jsx(IconCaretRight,{style:{height:"1em",width:"1em",transform:"translateY(0.1em)"}})}),jsxRuntimeExports.jsx(Box,{style:{width:"1.5em",height:"1.5em"},children:jsxRuntimeExports.jsx(Be,{style:{cursor:"pointer",opacity:Ie?.85:.25,width:"1.5em",height:"1.5em",display:"block"},onMouseDown:ve,onMouseEnter:_e})}),jsxRuntimeExports.jsxs(Box,{style:{flexGrow:"1",userSelect:"none"},children:[jsxRuntimeExports.jsx("span",{style:{opacity:"0.3"},children:"/"}),K.nodeName.split("/").at(-1)]}),Le?null:jsxRuntimeExports.jsx(Box,{className:editIconWrapper,style:{width:"1.25em",height:"1.25em",display:"block",transition:"opacity 0.2s"},children:jsxRuntimeExports.jsx(Tooltip,{label:"Local props",children:jsxRuntimeExports.jsx(IconPencil,{style:{cursor:"pointer",width:"1.25em",height:"1.25em",display:"block"},onClick:Ue=>{Ue.stopPropagation(),Oe()}})})})]}),Le?jsxRuntimeExports.jsx(EditNodeProps,{nodeName:K.nodeName,close:Fe}):null,Ae?Ee.map(Ue=>jsxRuntimeExports.jsx(fe,{nodeName:Ue,isParentVisible:Ie,indentCount:K.indentCount+1},Ue)):null]})}),MemoizedTable=React$4.memo(SceneTreeTable);function ServerControls(){const fe=React$4.useContext(ViewerContext),[K,me]=React$4.useState(!1);function ge(xe){xe.key==="Enter"&&(xe.currentTarget.blur(),xe.currentTarget.focus())}return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[K?jsxRuntimeExports.jsx(Stats,{className:"stats-panel"}):null,jsxRuntimeExports.jsxs(Stack,{gap:"xs",children:[jsxRuntimeExports.jsx(TextInput,{label:"Server",defaultValue:fe.useGui(xe=>xe.server),onBlur:xe=>fe.useGui.setState({server:xe.currentTarget.value}),onKeyDown:ge,styles:{input:{minHeight:"1.75rem",height:"1.75rem",padding:"0 0.5em"}}}),jsxRuntimeExports.jsx(Button,{onClick:async()=>{if("showSaveFilePicker"in window&&(()=>{try{return window.self===window.top}catch{return!1}})()){const ye=window.showSaveFilePicker({suggestedName:"render.png",types:[{accept:{"image/png":[".png"]}}]});fe.canvasRef.current?.toBlob(async ve=>{if(ve===null){console.error("Export failed");return}const Ee=await(await ye).createWritable();await Ee.write(ve),await Ee.close()})}else fe.canvasRef.current?.toBlob(ye=>{if(ye===null){console.error("Export failed");return}const ve=URL.createObjectURL(ye),_e=document.createElement("a");_e.href=ve;const Ee="render.png";_e.download=Ee,document.body.appendChild(_e),_e.click(),document.body.removeChild(_e),URL.revokeObjectURL(ve)})},fullWidth:!0,leftSection:jsxRuntimeExports.jsx(IconPhoto,{size:"1rem"}),style:{height:"1.875rem"},children:"Export Canvas"}),jsxRuntimeExports.jsx(Button,{onClick:()=>{fe.resetCameraViewRef.current()},fullWidth:!0,leftSection:jsxRuntimeExports.jsx(IconHomeMove,{size:"1rem"}),style:{height:"1.875rem"},children:"Reset View"}),jsxRuntimeExports.jsxs(Group$1,{children:[jsxRuntimeExports.jsx(Tooltip,{label:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:["Show tool for setting the look-at point and",jsxRuntimeExports.jsx("br",{}),"up direction of the camera.",jsxRuntimeExports.jsx("br",{}),jsxRuntimeExports.jsx("br",{}),"This can be used to set the origin of the",jsxRuntimeExports.jsx("br",{}),"camera's orbit controls."]}),refProp:"rootRef",position:"top-start",children:jsxRuntimeExports.jsx(Checkbox,{radius:"xs",label:"Orbit Origin Tool",onChange:xe=>{fe.useGui.setState({showOrbitOriginTool:xe.currentTarget.checked})},styles:{label:{paddingLeft:"8px",letterSpacing:"-0.3px"}},size:"sm"})}),jsxRuntimeExports.jsx(Tooltip,{label:"Show WebGL statistics.",refProp:"rootRef",position:"top-start",children:jsxRuntimeExports.jsx(Checkbox,{radius:"xs",label:"WebGL Stats",onChange:xe=>{me(xe.currentTarget.checked)},styles:{label:{paddingLeft:"8px",letterSpacing:"-0.3px"}},size:"sm"})})]}),jsxRuntimeExports.jsx(Divider,{mt:"xs"}),jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx(Text,{mb:"0.2em",fw:500,fz:"sm",children:"Scene tree"}),jsxRuntimeExports.jsx(MemoizedTable,{})]})]})]})}const BottomPanelContext=React$4.createContext(null);function BottomPanel({children:fe}){const K=React$4.useRef(null),[me,{toggle:ge}]=useDisclosure(!0);return jsxRuntimeExports.jsx(BottomPanelContext.Provider,{value:{wrapperRef:K,expanded:me,toggleExpanded:ge},children:jsxRuntimeExports.jsx(Paper,{radius:"0",style:xe=>({borderTopWidth:"1px",borderTopStyle:"solid",borderColor:useMantineColorScheme().colorScheme=="dark"?xe.colors.dark[4]:xe.colors.gray[3],boxSizing:"border-box",width:"100%",zIndex:10,position:"fixed",bottom:0,left:0,margin:0,overflow:"scroll",minHeight:"3.5em",maxHeight:"60%",transition:"height 0.3s linear"}),ref:K,children:fe})})}BottomPanel.Handle=function({children:K}){const me=React$4.useContext(BottomPanelContext);return jsxRuntimeExports.jsx(Box,{color:"red",style:ge=>({borderBottomWidth:me.expanded?"1px":void 0,borderBottomStyle:"solid",borderColor:useMantineColorScheme().colorScheme=="dark"?ge.colors.dark[4]:ge.colors.gray[3],cursor:"pointer",position:"relative",fontWeight:400,userSelect:"none",display:"flex",alignItems:"center",padding:"0 0.8em",height:"3.5em"}),onClick:()=>{me.toggleExpanded()},children:K})};BottomPanel.Contents=function({children:K}){const me=React$4.useContext(BottomPanelContext);return jsxRuntimeExports.jsx(Collapse,{in:me.expanded,children:K})};BottomPanel.HideWhenCollapsed=function({children:K}){return React$4.useContext(BottomPanelContext)?.expanded??!0?K:null};const touchEvents={move:"touchmove",end:"touchend"},mouseEvents={move:"mousemove",end:"mouseup"};function isTouchEvent(fe){return fe.type==="touchmove"}function isMouseEvent(fe){return fe.type==="mousemove"}const FloatingPanelContext=React$4.createContext(null);function FloatingPanel({children:fe,width:K}){const me=React$4.useRef(null),[ge,{toggle:xe}]=useDisclosure(!0),[ye,ve]=React$4.useState(800),_e=React$4.useRef({dragging:!1,startPosX:0,startPosY:0,startClientX:0,startClientY:0}),Ee=React$4.useRef({}),be=(Te,Re,De)=>Math.abs(Te+Re/2)<Math.abs(Te-De+Re/2)?Te:Te-De,Ae=15;function Se(Te,Re){const De=me.current;if(De===null)return[Te,Re];const Ie=De.parentElement;if(Ie===null)return[Te,Re];let Be=Te,Le=Re;return Be=Math.min(Be,Ie.clientWidth-De.clientWidth-Ae),Be=Math.max(Be,Ae),Le=Math.min(Le,Ie.clientHeight-De.clientHeight-Ae),Le=Math.max(Le,Ae),De.style.top=`${Le.toString()}px`,De.style.left=`${Be.toString()}px`,[be(Be,De.clientWidth,Ie.clientWidth),be(Le,De.clientHeight,Ie.clientHeight)]}React$4.useEffect(()=>{const Te=me.current;if(Te===null)return;const Re=Te.parentElement;if(Re===null)return;const De=new ResizeObserver(()=>{Ee.current.x===void 0&&(Ee.current.x=be(Te.offsetLeft,Te.clientWidth,Re.clientWidth)),Ee.current.y===void 0&&(Ee.current.y=be(Te.offsetTop,Te.clientHeight,Re.clientHeight));const Ie=Re.clientHeight-Ae*2-2.5*16;ye!==Ie&&ve(Ie);let Be=Ee.current.x,Le=Ee.current.y;for(;Be<0;)Be+=Re.clientWidth;for(;Le<0;)Le+=Re.clientHeight;Se(Be,Le)});return De.observe(Te),De.observe(Re),()=>{De.disconnect()}});const Ce=Te=>{const Re=_e.current,De=me.current;if(!De)return;Te.type=="touchstart"?(Te=Te,Re.startClientX=Te.touches[0].clientX,Re.startClientY=Te.touches[0].clientY):(Te=Te,Re.startClientX=Te.clientX,Re.startClientY=Te.clientY),Re.startPosX=De.offsetLeft,Re.startPosY=De.offsetTop;const Ie=Te.type=="touchstart"?touchEvents:mouseEvents;function Be(Le){let Oe=0,Fe=0;if(isTouchEvent(Le)?(Le=Le,Oe=Le.touches[0].clientX-Re.startClientX,Fe=Le.touches[0].clientY-Re.startClientY):isMouseEvent(Le)&&(Le=Le,Oe=Le.clientX-Re.startClientX,Fe=Le.clientY-Re.startClientY),Math.abs(Oe)<=3&&Math.abs(Fe)<=3)return;Re.dragging=!0;const Ue=Re.startPosX+Oe,Ne=Re.startPosY+Fe;[Ee.current.x,Ee.current.y]=Se(Ue,Ne)}window.addEventListener(Ie.move,Be),window.addEventListener(Ie.end,()=>{Te.type=="touchstart"&&(Re.dragging=!1),window.removeEventListener(Ie.move,Be)},{once:!0})};return jsxRuntimeExports.jsx(FloatingPanelContext.Provider,{value:{wrapperRef:me,expanded:ge,width:K,maxHeight:ye,toggleExpanded:xe,dragHandler:Ce,dragInfo:_e},children:jsxRuntimeExports.jsx(Paper,{radius:"xs",shadow:"0.1em 0 1em 0 rgba(0,0,0,0.1)",style:{boxSizing:"border-box",width:K,zIndex:10,position:"absolute",top:"1em",right:"1em",margin:0,"& .expandIcon":{transform:"rotate(0)"},overflow:"hidden"},ref:me,children:fe})})}FloatingPanel.Handle=function({children:K}){const me=React$4.useContext(FloatingPanelContext);return jsxRuntimeExports.jsx(Box,{style:ge=>({borderRadius:"0.2em 0.2em 0 0",lineHeight:"1.5em",cursor:"pointer",position:"relative",fontWeight:400,userSelect:"none",display:"flex",alignItems:"center",padding:"0 0.75em",height:"2.75em",borderBottomWidth:me.expanded?"1px":0,borderBottomStyle:"solid",borderColor:useMantineColorScheme().colorScheme=="dark"?ge.colors.dark[4]:ge.colors.gray[3]}),onClick:()=>{const ge=me.dragInfo.current;if(ge.dragging){ge.dragging=!1;return}me.toggleExpanded()},onTouchStart:ge=>{me.dragHandler(ge)},onMouseDown:ge=>{me.dragHandler(ge)},children:K})};FloatingPanel.Contents=function({children:K}){const me=React$4.useContext(FloatingPanelContext);return jsxRuntimeExports.jsx(Collapse,{in:me.expanded,children:jsxRuntimeExports.jsx(ScrollArea.Autosize,{mah:me.maxHeight,children:jsxRuntimeExports.jsx(Box,{w:me.width,children:K})})})};FloatingPanel.HideWhenCollapsed=function({children:K}){return React$4.useContext(FloatingPanelContext)?.expanded??!0?K:null};const SidebarPanelContext=React$4.createContext(null);function SidebarPanel({children:fe,collapsible:K,width:me}){const[ge,{toggle:xe}]=useDisclosure(!1),ye=jsxRuntimeExports.jsx(Box,{style:ve=>({position:"absolute",top:0,right:ge?"0em":"-3em",transitionProperty:"right",transitionDuration:"0.5s",transitionDelay:"0.25s",borderBottomLeftRadius:"0.5em",backgroundColor:useMantineColorScheme().colorScheme=="dark"?ve.colors.dark[5]:ve.colors.gray[2],padding:"0.5em"}),children:jsxRuntimeExports.jsx(ActionIcon,{onClick:ve=>{ve.stopPropagation(),xe()},children:jsxRuntimeExports.jsx(Tooltip,{zIndex:100,label:"Show sidebar",children:jsxRuntimeExports.jsx(IconChevronLeft,{})})})});return jsxRuntimeExports.jsxs(SidebarPanelContext.Provider,{value:{collapsible:K,toggleCollapsed:xe},children:[ye,jsxRuntimeExports.jsx(Paper,{shadow:"0 0 1em 0 rgba(0,0,0,0.1)",style:{width:ge?0:me,boxSizing:"content-box",transition:"width 0.5s 0s",zIndex:8}}),jsxRuntimeExports.jsx(Paper,{radius:0,style:{width:ge?0:me,top:0,bottom:0,right:0,position:"absolute",boxSizing:"content-box",transition:"width 0.5s 0s",zIndex:20},children:jsxRuntimeExports.jsx(Box,{style:{width:me,height:"100%",display:"flex",flexDirection:"column"},children:fe})})]})}SidebarPanel.Handle=function({children:K}){const{toggleCollapsed:me,collapsible:ge}=React$4.useContext(SidebarPanelContext),xe=jsxRuntimeExports.jsx(ActionIcon,{onClick:ye=>{ye.stopPropagation(),me()},children:jsxRuntimeExports.jsx(Tooltip,{zIndex:100,label:"Collapse sidebar",children:jsxRuntimeExports.jsx(IconChevronRight,{stroke:1.625})})});return jsxRuntimeExports.jsxs(Box,{p:"xs",style:ye=>({borderBottom:"1px solid",borderColor:useMantineColorScheme().colorScheme=="dark"?ye.colors.dark[4]:ye.colors.gray[3],lineHeight:"1.5em",fontWeight:400,position:"relative",zIndex:20,alignItems:"center",display:"flex",flexDirection:"row"}),children:[K,ge?xe:null]})};SidebarPanel.Contents=function({children:K}){return jsxRuntimeExports.jsx(ScrollArea,{style:{flexGrow:1},children:K})};const ROOT_CONTAINER_ID="root",MemoizedGeneratedGuiContainer=React$4.memo(GeneratedGuiContainer);function ControlPanel(fe){const K=useMantineTheme(),me=useMediaQuery(`(max-width: ${K.breakpoints.xs})`),ge=React$4.useContext(ViewerContext),xe=ge.useGui(Se=>"root"in Se.guiUuidSetFromContainerUuid),[ye,{toggle:ve}]=useDisclosure(!1),_e=ge.useGui(Se=>Se.theme.control_width),Ee=_e=="small"?"16em":_e=="medium"?"20em":_e=="large"?"24em":null,be=jsxRuntimeExports.jsx(ActionIcon,{onClick:Se=>{Se.stopPropagation(),ve()},style:{display:xe?void 0:"none",transform:"translateY(0.05em)"},children:jsxRuntimeExports.jsx(Tooltip,{zIndex:100,label:ye?"Return to GUI":"Configuration & diagnostics",withinPortal:!0,children:ye?jsxRuntimeExports.jsx(IconArrowBack,{stroke:1.625}):jsxRuntimeExports.jsx(IconAdjustments,{stroke:1.625})})}),Ae=jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Collapse,{in:!xe||ye,p:"xs",pt:"0.375em",children:jsxRuntimeExports.jsx(ServerControls,{})}),jsxRuntimeExports.jsx(Collapse,{in:xe&&!ye,children:jsxRuntimeExports.jsx(MemoizedGeneratedGuiContainer,{containerUuid:ROOT_CONTAINER_ID})})]});return me?jsxRuntimeExports.jsxs(BottomPanel,{children:[jsxRuntimeExports.jsxs(BottomPanel.Handle,{children:[jsxRuntimeExports.jsx(ConnectionStatus,{}),jsxRuntimeExports.jsxs(BottomPanel.HideWhenCollapsed,{children:[jsxRuntimeExports.jsx(ShareButton,{}),be]})]}),jsxRuntimeExports.jsx(BottomPanel.Contents,{children:Ae})]}):fe.control_layout==="floating"?jsxRuntimeExports.jsxs(FloatingPanel,{width:Ee,children:[jsxRuntimeExports.jsxs(FloatingPanel.Handle,{children:[jsxRuntimeExports.jsx(ConnectionStatus,{}),jsxRuntimeExports.jsxs(FloatingPanel.HideWhenCollapsed,{children:[jsxRuntimeExports.jsx(ShareButton,{}),be]})]}),jsxRuntimeExports.jsx(FloatingPanel.Contents,{children:Ae})]}):jsxRuntimeExports.jsxs(SidebarPanel,{width:Ee,collapsible:fe.control_layout==="collapsible",children:[jsxRuntimeExports.jsxs(SidebarPanel.Handle,{children:[jsxRuntimeExports.jsx(ConnectionStatus,{}),jsxRuntimeExports.jsx(ShareButton,{}),be]}),jsxRuntimeExports.jsx(SidebarPanel.Contents,{children:Ae})]})}function ConnectionStatus(){const{useGui:fe}=React$4.useContext(ViewerContext),K=fe(ge=>ge.websocketConnected),me=fe(ge=>ge.label);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:{width:"1.1em"}})," ",jsxRuntimeExports.jsx(Transition$1,{transition:"skew-down",mounted:K,children:ge=>jsxRuntimeExports.jsx(IconCloudCheck,{color:"#0b0",style:{position:"absolute",width:"1.25em",height:"1.25em",...ge}})}),jsxRuntimeExports.jsx(Transition$1,{transition:"skew-down",mounted:!K,children:ge=>jsxRuntimeExports.jsx(Loader$1,{size:"xs",type:"dots",color:"red",style:{position:"absolute",...ge}})}),jsxRuntimeExports.jsx(Box,{px:"xs",style:{flexGrow:1},lts:"-0.5px",pt:"0.1em",children:me!==""?me:K?"Connected":"Connecting..."})]})}function ShareButton(){const fe=React$4.useContext(ViewerContext),K=fe.useGui(Ce=>Ce.websocketConnected),me=fe.useGui(Ce=>Ce.shareUrl),ge=fe.useGui(Ce=>Ce.setShareUrl),[xe,ye]=React$4.useState(!1),[ve,{open:_e,close:Ee}]=useDisclosure(!1),[be,{toggle:Ae}]=useDisclosure();React$4.useEffect(()=>{me!==null&&ye(!1)},[me]),React$4.useEffect(()=>{!K&&ve&&Ee()},[K,ve]);const Se=useMantineColorScheme().colorScheme;return fe.useGui(Ce=>Ce.theme).show_share_button===!1?null:jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Tooltip,{zIndex:100,label:K?"Share":"Share (needs connection)",withinPortal:!0,children:jsxRuntimeExports.jsx(ActionIcon,{onClick:Ce=>{Ce.stopPropagation(),_e()},style:{transform:"translateY(0.05em)"},disabled:!K,children:jsxRuntimeExports.jsx(IconShare,{stroke:2,height:"1.125em",width:"1.125em"})})}),jsxRuntimeExports.jsxs(Modal,{title:"Share",opened:ve,onClose:Ee,withCloseButton:!1,zIndex:100,withinPortal:!0,onClick:Ce=>Ce.stopPropagation(),onMouseDown:Ce=>Ce.stopPropagation(),onMouseMove:Ce=>Ce.stopPropagation(),onMouseUp:Ce=>Ce.stopPropagation(),styles:{title:{fontWeight:600}},children:[me===null?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:xe?jsxRuntimeExports.jsx(Stack,{mb:"xl",children:jsxRuntimeExports.jsx(Loader$1,{size:"xl",mx:"auto",type:"dots"})}):jsxRuntimeExports.jsxs(Stack,{mb:"md",children:[jsxRuntimeExports.jsx(Text,{children:"Create a public, shareable URL to this Viser instance."}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,onClick:()=>{fe.sendMessageRef.current({type:"ShareUrlRequest"}),ye(!0)},children:"Request Share URL"})]})}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Text,{children:"Share URL is connected."}),jsxRuntimeExports.jsxs(Stack,{gap:"xs",my:"md",children:[jsxRuntimeExports.jsx(TextInput,{value:me}),jsxRuntimeExports.jsxs(Flex,{justify:"space-between",columnGap:"0.5em",align:"center",children:[jsxRuntimeExports.jsx(CopyButton,{value:me,children:({copied:Ce,copy:Te})=>jsxRuntimeExports.jsx(Button,{style:{width:"50%"},leftSection:Ce?jsxRuntimeExports.jsx(IconCheck,{height:"1.375em",width:"1.375em"}):jsxRuntimeExports.jsx(IconCopy,{height:"1.375em",width:"1.375em"}),onClick:Te,variant:Ce?"outline":"filled",children:Ce?"Copied!":"Copy URL"})}),jsxRuntimeExports.jsx(Button,{style:{flexGrow:1},leftSection:be?jsxRuntimeExports.jsx(IconQrcodeOff,{}):jsxRuntimeExports.jsx(IconQrcode,{}),onClick:Ae,children:"QR Code"}),jsxRuntimeExports.jsx(Tooltip,{zIndex:100,label:"Disconnect",withinPortal:!0,children:jsxRuntimeExports.jsx(Button,{color:"red",onClick:()=>{fe.sendMessageRef.current({type:"ShareUrlDisconnect"}),ge(null)},children:jsxRuntimeExports.jsx(IconPlugConnectedX,{})})})]}),jsxRuntimeExports.jsx(Collapse,{in:be,children:jsxRuntimeExports.jsx(_default,{value:me,fgColor:Se==="dark"?"#ffffff":"#000000",bgColor:"rgba(0,0,0,0)",level:"M",style:{width:"100%",height:"auto",margin:"1em auto 0 auto"}})})]})]}),jsxRuntimeExports.jsxs(Text,{size:"xs",children:["This feature is experimental. Problems? Consider"," ",jsxRuntimeExports.jsx(Anchor,{href:"https://github.com/nerfstudio-project/viser/issues",children:"reporting on GitHub"}),"."]})]})]})}var t,e,s,i$1;(function(fe){fe.HEX="HEX",fe.RGB="RGB",fe.HSL="HSL",fe.CIELab="CIELab",fe.CMYK="CMYK"})(t||(t={})),function(fe){fe.ANALOGOUS="ANALOGOUS",fe.COMPLEMENTARY="COMPLEMENTARY",fe.SPLIT_COMPLEMENTARY="SPLIT_COMPLEMENTARY",fe.TRIADIC="TRIADIC",fe.TETRADIC="TETRADIC",fe.SQUARE="SQUARE"}(e||(e={})),function(fe){fe.ADDITIVE="ADDITIVE",fe.SUBTRACTIVE="SUBTRACTIVE"}(s||(s={})),function(fe){fe.black="#000000",fe.silver="#C0C0C0",fe.gray="#808080",fe.white="#FFFFFF",fe.maroon="#800000",fe.red="#FF0000",fe.purple="#800080",fe.fuchsia="#FF00FF",fe.green="#008000",fe.lime="#00FF00",fe.olive="#808000",fe.yellow="#FFFF00",fe.navy="#000080",fe.blue="#0000FF",fe.teal="#008080",fe.aqua="#00FFFF",fe.orange="#FFA500",fe.aliceblue="#F0F8FF",fe.antiquewhite="#FAEBD7",fe.aquamarine="#7FFFD4",fe.azure="#F0FFFF",fe.beige="#F5F5DC",fe.bisque="#FFE4C4",fe.blanchedalmond="#FFEBCD",fe.blueviolet="#8A2BE2",fe.brown="#A52A2A",fe.burlywood="#DEB887",fe.cadetblue="#5F9EA0",fe.chartreuse="#7FFF00",fe.chocolate="#D2691E",fe.coral="#FF7F50",fe.cornflowerblue="#6495ED",fe.cornsilk="#FFF8DC",fe.crimson="#DC143C",fe.cyan="#00FFFF",fe.darkblue="#00008B",fe.darkcyan="#008B8B",fe.darkgoldenrod="#B8860B",fe.darkgray="#A9A9A9",fe.darkgreen="#006400",fe.darkgrey="#A9A9A9",fe.darkkhaki="#BDB76B",fe.darkmagenta="#8B008B",fe.darkolivegreen="#556B2F",fe.darkorange="#FF8C00",fe.darkorchid="#9932CC",fe.darkred="#8B0000",fe.darksalmon="#E9967A",fe.darkseagreen="#8FBC8F",fe.darkslateblue="#483D8B",fe.darkslategray="#2F4F4F",fe.darkslategrey="#2F4F4F",fe.darkturquoise="#00CED1",fe.darkviolet="#9400D3",fe.deeppink="#FF1493",fe.deepskyblue="#00BFFF",fe.dimgray="#696969",fe.dimgrey="#696969",fe.dodgerblue="#1E90FF",fe.firebrick="#B22222",fe.floralwhite="#FFFAF0",fe.forestgreen="#228B22",fe.gainsboro="#DCDCDC",fe.ghostwhite="#F8F8FF",fe.gold="#FFD700",fe.goldenrod="#DAA520",fe.greenyellow="#ADFF2F",fe.grey="#808080",fe.honeydew="#F0FFF0",fe.hotpink="#FF69B4",fe.indianred="#CD5C5C",fe.indigo="#4B0082",fe.ivory="#FFFFF0",fe.khaki="#F0E68C",fe.lavender="#E6E6FA",fe.lavenderblush="#FFF0F5",fe.lawngreen="#7CFC00",fe.lemonchiffon="#FFFACD",fe.lightblue="#ADD8E6",fe.lightcoral="#F08080",fe.lightcyan="#E0FFFF",fe.lightgoldenrodyellow="#FAFAD2",fe.lightgray="#D3D3D3",fe.lightgreen="#90EE90",fe.lightgrey="#D3D3D3",fe.lightpink="#FFB6C1",fe.lightsalmon="#FFA07A",fe.lightseagreen="#20B2AA",fe.lightskyblue="#87CEFA",fe.lightslategray="#778899",fe.lightslategrey="#778899",fe.lightsteelblue="#B0C4DE",fe.lightyellow="#FFFFE0",fe.limegreen="#32CD32",fe.linen="#FAF0E6",fe.magenta="#FF00FF",fe.mediumaquamarine="#66CDAA",fe.mediumblue="#0000CD",fe.mediumorchid="#BA55D3",fe.mediumpurple="#9370DB",fe.mediumseagreen="#3CB371",fe.mediumslateblue="#7B68EE",fe.mediumspringgreen="#00FA9A",fe.mediumturquoise="#48D1CC",fe.mediumvioletred="#C71585",fe.midnightblue="#191970",fe.mintcream="#F5FFFA",fe.mistyrose="#FFE4E1",fe.moccasin="#FFE4B5",fe.navajowhite="#FFDEAD",fe.oldlace="#FDF5E6",fe.olivedrab="#6B8E23",fe.orangered="#FF4500",fe.orchid="#DA70D6",fe.palegoldenrod="#EEE8AA",fe.palegreen="#98FB98",fe.paleturquoise="#AFEEEE",fe.palevioletred="#DB7093",fe.papayawhip="#FFEFD5",fe.peachpuff="#FFDAB9",fe.peru="#CD853F",fe.pink="#FFC0CB",fe.plum="#DDA0DD",fe.powderblue="#B0E0E6",fe.rosybrown="#BC8F8F",fe.royalblue="#4169E1",fe.saddlebrown="#8B4513",fe.salmon="#FA8072",fe.sandybrown="#F4A460",fe.seagreen="#2E8B57",fe.seashell="#FFF5EE",fe.sienna="#A0522D",fe.skyblue="#87CEEB",fe.slateblue="#6A5ACD",fe.slategray="#708090",fe.slategrey="#708090",fe.snow="#FFFAFA",fe.springgreen="#00FF7F",fe.steelblue="#4682B4",fe.tan="#D2B48C",fe.thistle="#D8BFD8",fe.tomato="#FF6347",fe.turquoise="#40E0D0",fe.violet="#EE82EE",fe.wheat="#F5DEB3",fe.whitesmoke="#F5F5F5",fe.yellowgreen="#9ACD32",fe.rebeccapurple="#663399"}(i$1||(i$1={}));const a=Object.keys(i$1),r={HEX:["R","G","B","A"],RGB:["R","G","B","A"],HSL:["H","S","L","A"],CIELab:["L","a","b","A"],CMYK:["C","M","Y","K","A"]},n={BGR:t.RGB,ABGR:t.RGB,HLS:t.HSL,AHLS:t.HSL,LAB:t.CIELab,ALAB:t.CIELab,CKMY:t.CMYK,ACKMY:t.CMYK};var c;(function(fe){fe.NUMBER="number",fe.BOOLEAN="boolean"})(c||(c={}));const o={[t.HEX]:/^#(?:([a-f\d])([a-f\d])([a-f\d])([a-f\d])?|([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?)$/i,[t.RGB]:/^rgba?\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)(?:\s*,\s*((?:\d*\.)?\d+))?|((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,[t.HSL]:/^hsla?\s*\(\s*(?:(-?(?:\d*\.)?\d+(?:deg|grad|rad|turn)?)\s*,\s*((?:\d*\.)?\d+)%\s*,\s*((?:\d*\.)?\d+)%(?:\s*,\s*((?:\d*\.)?\d+))?|(-?(?:\d*\.)?\d+(?:deg|grad|rad|turn)?)\s*((?:\d*\.)?\d+)%\s*((?:\d*\.)?\d+)%(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,[t.CIELab]:/^lab\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*(-?(?:\d*\.)?\d+%?)\s*(-?(?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/,[t.CMYK]:/^(?:device-cmyk|cmyk)\s*\(\s*(?:((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)\s*,\s*((?:\d*\.)?\d+%?)(?:\s*,\s*((?:\d*\.)?\d+))?|((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)\s*((?:\d*\.)?\d+%?)(?:\s*\/\s*((?:\d*\.)?\d+%?))?)\s*\)$/},A=/^(-?(?:\d*\.)?\d+)((?:deg|grad|rad|turn)?)$/,h=/^(-?\d+(?:\.\d+)?|-?\.\d+)%$/,u=/^0x([a-f\d]{1,2})$/i,d=/\{(\d+)\}/g,m="The provided string color doesn't have a correct format",b="The provided color object doesn't have the proper keys or format";var C,L,g;(function(fe){fe.NONE="none",fe.DEGREES="deg",fe.GRADIANS="grad",fe.RADIANS="rad",fe.TURNS="turn"})(C||(C={})),function(fe){fe.NONE="none",fe.PERCENT="percent"}(L||(L={})),function(fe){fe.DEVICE_CMYK="device-cmyk",fe.CMYK="cmyk"}(g||(g={}));C.NONE,L.NONE,L.NONE,L.PERCENT,L.NONE,g.DEVICE_CMYK;const p=(fe,K)=>Object.prototype.hasOwnProperty.call(fe,K),H=fe=>+`${fe}`.replace(h,"$1"),F=fe=>h.test(`${fe}`)?H(fe):Math.min(+fe,100),R=fe=>(fe.length===1&&(fe+=fe),parseInt(fe,16)),S=fe=>{const K=D(fe,0).toString(16).toUpperCase();return K.length===1?`0x0${K}`:`0x${K}`},I=(fe,K=!1)=>!K&&h.test(fe)?Math.min(255*H(fe)/100,255):u.test(fe)?(fe.length===3&&(fe+=fe.slice(-1)),K?D(fe)/255:D(fe)):Math.min(+fe,K?1:255),G=fe=>h.test(fe)?f(125*H(fe)/100,-125,125):f(+fe,-125,125),M=fe=>Math.min(h.test(fe)?H(fe)/100:+fe,1),y=fe=>[...fe].sort().join("").toUpperCase(),D=(fe,K=6)=>{const me=Math.pow(10,K);return Math.round(+fe*me)/me},f=(fe,K,me)=>Math.max(K,Math.min(fe,me)),O=fe=>{if(typeof fe=="string"){const K=fe.match(A),me=+K[1];switch(K[2]){case C.RADIANS:fe=D(180*me/Math.PI);break;case C.TURNS:fe=D(360*me);break;case C.GRADIANS:fe=D(.9*me);break;case C.DEGREES:default:fe=me}}return(fe>360||fe<0)&&(fe-=360*Math.floor(fe/360)),fe},Y=(fe,K)=>{let me;switch(K){case C.RADIANS:me=D((ge=>ge*Math.PI/180)(fe));break;case C.TURNS:me=D(fe/360);break;case C.GRADIANS:me=D(10/9*fe);break;case C.DEGREES:case C.NONE:default:me=fe}return me},X=[[.4360747,.3850649,.1430804],[.2225045,.7168786,.0606169],[.0139322,.0971045,.7141733]],T=[[3.1338561,-1.6168667,-.4906146],[-.9787684,1.9161415,.033454],[.0719453,-.2289914,1.4052427]],N=X.map(fe=>fe.reduce((K,me)=>K+me,0)),$=(fe,K,me)=>(me<0&&(me+=6),me>=6&&(me-=6),D(me<1?255*((K-fe)*me+fe):me<3?255*K:me<4?255*((K-fe)*(4-me)+fe):255*fe)),j=fe=>fe<=.04045?fe/12.92:((fe+.055)/1.055)**2.4,U=fe=>fe<=.0031308?12.92*fe:1.055*fe**(1/2.4)-.055,w=(fe,K,me,ge)=>{const xe=[0,0,0],ye=[fe,K,me];return ge.forEach((ve,_e)=>{ve.forEach((Ee,be)=>{xe[_e]+=Ee*ye[be]})}),xe},x$1=(fe,K,me)=>{K/=100;const ge=(me/=100)<=.5?me*(K+1):me+K-me*K,xe=2*me-ge;return{R:$(xe,ge,(fe/=60)+2),G:$(xe,ge,fe),B:$(xe,ge,fe-2)}},v=(fe,K,me,ge=1)=>{fe/=255,K/=255,me/=255,ge=Math.min(ge,1);const xe=Math.max(fe,K,me),ye=Math.min(fe,K,me),ve=xe-ye;let _e=0,Ee=0;const be=(xe+ye)/2;if(ve!==0){switch(xe){case fe:_e=(K-me)/ve%6;break;case K:_e=(me-fe)/ve+2;break;case me:_e=(fe-K)/ve+4}_e=D(60*_e),_e<0&&(_e+=360),Ee=ve/(1-Math.abs(2*be-1))}return{H:_e,S:D(100*Ee),L:D(100*be),A:ge}},V=(fe,K,me)=>{const ge=[fe/255,K/255,me/255].map(j),xe=w(ge[0],ge[1],ge[2],X),ye=((ve,_e,Ee)=>{const be=Ce=>Ce>.008856451679035631?Math.cbrt(Ce):Ce/.12841854934601665+.13793103448275862,Ae=be(ve/N[0]),Se=be(_e/N[1]);return[116*Se-16,500*(Ae-Se),200*(Se-be(Ee/N[2]))]})(xe[0],xe[1],xe[2]);return{L:ye[0],a:ye[1],b:ye[2]}},P=(fe,K,me)=>{const ge=((ye,ve,_e)=>{const Ee=Ce=>Ce>.20689655172413793?Ce**3:.12841854934601665*(Ce-.13793103448275862),be=(ye+16)/116,Ae=ve/500,Se=_e/200;return[N[0]*Ee(be+Ae),N[1]*Ee(be),N[2]*Ee(be-Se)]})(fe,K,me),xe=w(ge[0],ge[1],ge[2],T).map(U);return{R:f(255*xe[0],0,255),G:f(255*xe[1],0,255),B:f(255*xe[2],0,255)}},q=(fe,K,me,ge)=>({R:D(255*(1-fe)*(ge=1-ge)),G:D(255*(1-K)*ge),B:D(255*(1-me)*ge)}),_=(fe,K,me)=>{fe/=255,K/=255,me/=255;const ge=1-Math.max(fe,K,me),xe=1-ge,ye=xe&&(xe-K)/xe,ve=xe&&(xe-me)/xe;return{C:D(100*(xe&&(xe-fe)/xe)),M:D(100*ye),Y:D(100*ve),K:D(100*ge)}},Q=fe=>fe?", ":",",W=(fe,K)=>{const me=y(Object.keys(fe));return r[n[me]].reduce((ge,xe,ye)=>{const ve=fe[xe];return ve!==void 0&&ge.push(K(ve,ye)),ge},[])},J=(fe,K)=>fe.replace(d,(me,ge)=>`${K[+ge-1]}`),Z=(fe,K,me=!1)=>{const{alphaUnit:ge,legacyCSS:xe,decimals:ye}=K;return ge!==L.PERCENT||xe&&!me?D(fe,ye):`${D(100*fe,ye)}%`},tt={[t.HEX]:fe=>{const K=W(fe,ge=>(xe=>{let ye=D(xe,0).toString(16).toUpperCase();return ye.length===1&&(ye=`0${ye}`),ye})(D(ge))),me=K.length===4?"#{1}{2}{3}{4}":"#{1}{2}{3}";return J(me,K)},[t.RGB]:(fe,K)=>{const{decimals:me,legacyCSS:ge,spacesAfterCommas:xe,rgbUnit:ye}=K,ve=Q(xe),_e=W(fe,(be,Ae)=>ye===L.PERCENT&&Ae<3?`${((Se,Ce)=>D(Se/255*100,Ce))(be,me)}%`:Ae===3?Z(be,K):D(be,me)),Ee=ge?_e.length===4?`rgba({1}${ve}{2}${ve}{3}${ve}{4})`:`rgb({1}${ve}{2}${ve}{3})`:_e.length===4?"rgb({1} {2} {3} / {4})":"rgb({1} {2} {3})";return J(Ee,_e)},[t.HSL]:(fe,K)=>{const{decimals:me,legacyCSS:ge,spacesAfterCommas:xe,anglesUnit:ye}=K,ve=Q(xe),_e=W(fe,(be,Ae)=>Ae===0&&ye!==C.NONE?`${D(Y(be,ye),me)}${ye}`:Ae===3?Z(be,K):D(be,me)),Ee=ge?_e.length===4?`hsla({1}${ve}{2}%${ve}{3}%${ve}{4})`:`hsl({1}${ve}{2}%${ve}{3}%)`:_e.length===4?"hsl({1} {2}% {3}% / {4})":"hsl({1} {2}% {3}%)";return J(Ee,_e)},[t.CIELab]:(fe,K)=>{const{decimals:me,labUnit:ge}=K,xe=W(fe,(ve,_e)=>{if(_e===0){const Ee=D(F(ve),me);return ge===L.PERCENT?`${Ee}%`:`${Ee}`}return _e<3?ge===L.PERCENT?`${((Ee,be)=>D(Ee/125*100,be))(ve,me)}%`:D(ve,me):Z(ve,K,!0)}),ye=xe.length===4?"lab({1} {2} {3} / {4})":"lab({1} {2} {3})";return J(ye,xe)},[t.CMYK]:(fe,K)=>{const{decimals:me,legacyCSS:ge,spacesAfterCommas:xe,cmykUnit:ye,cmykFunction:ve}=K,_e=Q(xe),Ee=W(fe,(Ae,Se)=>ye===L.PERCENT&&Se<4?`${D(Ae,me)}%`:Se===4?Z(Ae,K):D(Ae/100,me)),be=ge?Ee.length===5?`${ve}({1}${_e}{2}${_e}{3}${_e}{4}${_e}{5})`:`${ve}({1}${_e}{2}${_e}{3}${_e}{4})`:Ee.length===5?`${ve}({1} {2} {3} {4} / {5})`:`${ve}({1} {2} {3} {4})`;return J(be,Ee)}},et$1=fe=>(typeof fe=="string"&&(fe=h.test(fe)?H(fe)/100:+fe),isNaN(+fe)||fe>1?1:D(fe)),At=fe=>typeof fe=="string"?(K=>{let me;if(Object.keys(t).some(ge=>{if(o[ge].test(K))return me=ge,!0}),!me&&~a.indexOf(K)&&(me=t.HEX),!me)throw new Error(m);return me})(fe):(K=>{let me,ge=!1;const xe=y(Object.keys(K));if(n[xe]&&(me=n[xe]),me&&me===t.RGB){const ye=Object.entries(K).some(_e=>!u.test(`${_e[1]}`)),ve=Object.entries(K).some(_e=>!(h.test(`${_e[1]}`)||!u.test(`${_e[1]}`)&&!isNaN(+_e[1])&&+_e[1]<=255));ye&&ve&&(ge=!0),ye||(me=t.HEX)}if(!me||ge)throw new Error(b);return me})(fe),ht={[t.HEX](fe){const K=(~a.indexOf(fe)?i$1[fe]:fe).match(o.HEX),me={R:R(K[1]||K[5]),G:R(K[2]||K[6]),B:R(K[3]||K[7])},ge=K[4]||K[8];return ge!==void 0&&(me.A=R(ge)/255),me},[t.RGB](fe){const K=fe.match(o.RGB),me=I(K[1]||K[5]),ge=I(K[2]||K[6]),xe=I(K[3]||K[7]),ye=K[4]||K[8],ve={R:Math.min(me,255),G:Math.min(ge,255),B:Math.min(xe,255)};return ye!==void 0&&(ve.A=et$1(ye)),ve},[t.HSL](fe){const K=fe.match(o.HSL),me=O(K[1]||K[5]),ge=F(K[2]||K[6]),xe=F(K[3]||K[7]),ye=K[4]||K[8],ve=x$1(me,ge,xe);return ye!==void 0&&(ve.A=et$1(ye)),ve},[t.CIELab](fe){const K=fe.match(o.CIELab),me=F(K[1]),ge=G(K[2]),xe=G(K[3]),ye=K[4],ve=P(me,ge,xe);return ye!==void 0&&(ve.A=et$1(ye)),ve},[t.CMYK](fe){const K=fe.match(o.CMYK),me=M(K[1]||K[6]),ge=M(K[2]||K[7]),xe=M(K[3]||K[8]),ye=M(K[4]||K[9]),ve=K[5]||K[10],_e=q(me,ge,xe,ye);return ve!==void 0&&(_e.A=et$1(ve)),_e}},ut={[t.HEX](fe){const K={R:I(`${fe.R}`),G:I(`${fe.G}`),B:I(`${fe.B}`)};return p(fe,"A")&&(K.A=Math.min(I(`${fe.A}`,!0),1)),K},[t.RGB](fe){return this.HEX(fe)},[t.HSL](fe){const K=F(`${fe.S}`),me=F(`${fe.L}`),ge=x$1(O(fe.H),K,me);return p(fe,"A")&&(ge.A=et$1(fe.A)),ge},[t.CIELab](fe){const K=F(`${fe.L}`),me=G(`${fe.a}`),ge=G(`${fe.b}`),xe=P(K,me,ge);return p(fe,"A")&&(xe.A=et$1(fe.A)),xe},[t.CMYK](fe){const K=M(`${fe.C}`),me=M(`${fe.M}`),ge=M(`${fe.Y}`),xe=M(`${fe.K}`),ye=q(K,me,ge,xe);return p(fe,"A")&&(ye.A=et$1(fe.A)),ye}},dt=(fe,K=At(fe))=>typeof fe=="string"?ht[K](fe):ut[K](fe),lt={[t.HEX]:fe=>({R:S(fe.R),G:S(fe.G),B:S(fe.B)}),HEXA(fe){const K=lt.HEX(fe);return K.A=p(fe,"A")?S(255*fe.A):"0xFF",K},[t.RGB](fe,K){const me=Ct(fe,K);return p(me,"A")&&delete me.A,me},RGBA(fe,K){const me=lt.RGB(fe,K);return me.A=p(fe,"A")?D(fe.A):1,me},[t.HSL](fe,K){const me=v(fe.R,fe.G,fe.B);return delete me.A,Lt(me,K)},HSLA(fe,K){const me=lt.HSL(fe,K);return me.A=p(fe,"A")?D(fe.A,K):1,me},[t.CIELab](fe,K){const me=V(fe.R,fe.G,fe.B);return gt(me,K)},CIELabA(fe,K){const me=lt.CIELab(fe,K);return me.A=p(fe,"A")?D(fe.A,K):1,me},[t.CMYK]:(fe,K)=>Bt(_(fe.R,fe.G,fe.B),K),CMYKA(fe,K){const me=lt.CMYK(fe,K);return me.A=p(fe,"A")?D(fe.A,K):1,me}};t.HEX+"",t.RGB+"",t.HSL+"",t.CIELab+"";t.HEX+"",t.RGB+"",t.HSL+"",t.CIELab+"";const Ct=(fe,K)=>({R:D(fe.R,K),G:D(fe.G,K),B:D(fe.B,K),...p(fe,"A")?{A:D(fe.A,K)}:{}}),Lt=(fe,K)=>({H:D(fe.H,K),S:D(fe.S,K),L:D(fe.L,K),...p(fe,"A")?{A:D(fe.A,K)}:{}}),gt=(fe,K)=>({L:D(fe.L,K),a:D(fe.a,K),b:D(fe.b,K)}),Bt=(fe,K)=>({C:D(fe.C,K),M:D(fe.M,K),Y:D(fe.Y,K),K:D(fe.K,K)});var NOTHING=Symbol.for("immer-nothing"),DRAFTABLE=Symbol.for("immer-draftable"),DRAFT_STATE=Symbol.for("immer-state");function die(fe,...K){throw new Error(`[Immer] minified error nr: ${fe}. Full error at: https://bit.ly/3cXEKWf`)}var getPrototypeOf=Object.getPrototypeOf;function isDraft(fe){return!!fe&&!!fe[DRAFT_STATE]}function isDraftable(fe){return fe?isPlainObject(fe)||Array.isArray(fe)||!!fe[DRAFTABLE]||!!fe.constructor?.[DRAFTABLE]||isMap(fe)||isSet(fe):!1}var objectCtorString=Object.prototype.constructor.toString();function isPlainObject(fe){if(!fe||typeof fe!="object")return!1;const K=getPrototypeOf(fe);if(K===null)return!0;const me=Object.hasOwnProperty.call(K,"constructor")&&K.constructor;return me===Object?!0:typeof me=="function"&&Function.toString.call(me)===objectCtorString}function each(fe,K){getArchtype(fe)===0?Reflect.ownKeys(fe).forEach(me=>{K(me,fe[me],fe)}):fe.forEach((me,ge)=>K(ge,me,fe))}function getArchtype(fe){const K=fe[DRAFT_STATE];return K?K.type_:Array.isArray(fe)?1:isMap(fe)?2:isSet(fe)?3:0}function has(fe,K){return getArchtype(fe)===2?fe.has(K):Object.prototype.hasOwnProperty.call(fe,K)}function set(fe,K,me){const ge=getArchtype(fe);ge===2?fe.set(K,me):ge===3?fe.add(me):fe[K]=me}function is(fe,K){return fe===K?fe!==0||1/fe===1/K:fe!==fe&&K!==K}function isMap(fe){return fe instanceof Map}function isSet(fe){return fe instanceof Set}function latest(fe){return fe.copy_||fe.base_}function shallowCopy(fe,K){if(isMap(fe))return new Map(fe);if(isSet(fe))return new Set(fe);if(Array.isArray(fe))return Array.prototype.slice.call(fe);const me=isPlainObject(fe);if(K===!0||K==="class_only"&&!me){const ge=Object.getOwnPropertyDescriptors(fe);delete ge[DRAFT_STATE];let xe=Reflect.ownKeys(ge);for(let ye=0;ye<xe.length;ye++){const ve=xe[ye],_e=ge[ve];_e.writable===!1&&(_e.writable=!0,_e.configurable=!0),(_e.get||_e.set)&&(ge[ve]={configurable:!0,writable:!0,enumerable:_e.enumerable,value:fe[ve]})}return Object.create(getPrototypeOf(fe),ge)}else{const ge=getPrototypeOf(fe);if(ge!==null&&me)return{...fe};const xe=Object.create(ge);return Object.assign(xe,fe)}}function freeze(fe,K=!1){return isFrozen(fe)||isDraft(fe)||!isDraftable(fe)||(getArchtype(fe)>1&&(fe.set=fe.add=fe.clear=fe.delete=dontMutateFrozenCollections),Object.freeze(fe),K&&Object.entries(fe).forEach(([me,ge])=>freeze(ge,!0))),fe}function dontMutateFrozenCollections(){die(2)}function isFrozen(fe){return Object.isFrozen(fe)}var plugins={};function getPlugin(fe){const K=plugins[fe];return K||die(0,fe),K}function loadPlugin(fe,K){plugins[fe]||(plugins[fe]=K)}var currentScope;function getCurrentScope(){return currentScope}function createScope(fe,K){return{drafts_:[],parent_:fe,immer_:K,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function usePatchesInScope(fe,K){K&&(getPlugin("Patches"),fe.patches_=[],fe.inversePatches_=[],fe.patchListener_=K)}function revokeScope(fe){leaveScope(fe),fe.drafts_.forEach(revokeDraft),fe.drafts_=null}function leaveScope(fe){fe===currentScope&&(currentScope=fe.parent_)}function enterScope(fe){return currentScope=createScope(currentScope,fe)}function revokeDraft(fe){const K=fe[DRAFT_STATE];K.type_===0||K.type_===1?K.revoke_():K.revoked_=!0}function processResult(fe,K){K.unfinalizedDrafts_=K.drafts_.length;const me=K.drafts_[0];return fe!==void 0&&fe!==me?(me[DRAFT_STATE].modified_&&(revokeScope(K),die(4)),isDraftable(fe)&&(fe=finalize(K,fe),K.parent_||maybeFreeze(K,fe)),K.patches_&&getPlugin("Patches").generateReplacementPatches_(me[DRAFT_STATE].base_,fe,K.patches_,K.inversePatches_)):fe=finalize(K,me,[]),revokeScope(K),K.patches_&&K.patchListener_(K.patches_,K.inversePatches_),fe!==NOTHING?fe:void 0}function finalize(fe,K,me){if(isFrozen(K))return K;const ge=K[DRAFT_STATE];if(!ge)return each(K,(xe,ye)=>finalizeProperty(fe,ge,K,xe,ye,me)),K;if(ge.scope_!==fe)return K;if(!ge.modified_)return maybeFreeze(fe,ge.base_,!0),ge.base_;if(!ge.finalized_){ge.finalized_=!0,ge.scope_.unfinalizedDrafts_--;const xe=ge.copy_;let ye=xe,ve=!1;ge.type_===3&&(ye=new Set(xe),xe.clear(),ve=!0),each(ye,(_e,Ee)=>finalizeProperty(fe,ge,xe,_e,Ee,me,ve)),maybeFreeze(fe,xe,!1),me&&fe.patches_&&getPlugin("Patches").generatePatches_(ge,me,fe.patches_,fe.inversePatches_)}return ge.copy_}function finalizeProperty(fe,K,me,ge,xe,ye,ve){if(isDraft(xe)){const _e=ye&&K&&K.type_!==3&&!has(K.assigned_,ge)?ye.concat(ge):void 0,Ee=finalize(fe,xe,_e);if(set(me,ge,Ee),isDraft(Ee))fe.canAutoFreeze_=!1;else return}else ve&&me.add(xe);if(isDraftable(xe)&&!isFrozen(xe)){if(!fe.immer_.autoFreeze_&&fe.unfinalizedDrafts_<1)return;finalize(fe,xe),(!K||!K.scope_.parent_)&&typeof ge!="symbol"&&Object.prototype.propertyIsEnumerable.call(me,ge)&&maybeFreeze(fe,xe)}}function maybeFreeze(fe,K,me=!1){!fe.parent_&&fe.immer_.autoFreeze_&&fe.canAutoFreeze_&&freeze(K,me)}function createProxyProxy(fe,K){const me=Array.isArray(fe),ge={type_:me?1:0,scope_:K?K.scope_:getCurrentScope(),modified_:!1,finalized_:!1,assigned_:{},parent_:K,base_:fe,draft_:null,copy_:null,revoke_:null,isManual_:!1};let xe=ge,ye=objectTraps;me&&(xe=[ge],ye=arrayTraps);const{revoke:ve,proxy:_e}=Proxy.revocable(xe,ye);return ge.draft_=_e,ge.revoke_=ve,_e}var objectTraps={get(fe,K){if(K===DRAFT_STATE)return fe;const me=latest(fe);if(!has(me,K))return readPropFromProto(fe,me,K);const ge=me[K];return fe.finalized_||!isDraftable(ge)?ge:ge===peek(fe.base_,K)?(prepareCopy(fe),fe.copy_[K]=createProxy(ge,fe)):ge},has(fe,K){return K in latest(fe)},ownKeys(fe){return Reflect.ownKeys(latest(fe))},set(fe,K,me){const ge=getDescriptorFromProto(latest(fe),K);if(ge?.set)return ge.set.call(fe.draft_,me),!0;if(!fe.modified_){const xe=peek(latest(fe),K),ye=xe?.[DRAFT_STATE];if(ye&&ye.base_===me)return fe.copy_[K]=me,fe.assigned_[K]=!1,!0;if(is(me,xe)&&(me!==void 0||has(fe.base_,K)))return!0;prepareCopy(fe),markChanged(fe)}return fe.copy_[K]===me&&(me!==void 0||K in fe.copy_)||Number.isNaN(me)&&Number.isNaN(fe.copy_[K])||(fe.copy_[K]=me,fe.assigned_[K]=!0),!0},deleteProperty(fe,K){return peek(fe.base_,K)!==void 0||K in fe.base_?(fe.assigned_[K]=!1,prepareCopy(fe),markChanged(fe)):delete fe.assigned_[K],fe.copy_&&delete fe.copy_[K],!0},getOwnPropertyDescriptor(fe,K){const me=latest(fe),ge=Reflect.getOwnPropertyDescriptor(me,K);return ge&&{writable:!0,configurable:fe.type_!==1||K!=="length",enumerable:ge.enumerable,value:me[K]}},defineProperty(){die(11)},getPrototypeOf(fe){return getPrototypeOf(fe.base_)},setPrototypeOf(){die(12)}},arrayTraps={};each(objectTraps,(fe,K)=>{arrayTraps[fe]=function(){return arguments[0]=arguments[0][0],K.apply(this,arguments)}});arrayTraps.deleteProperty=function(fe,K){return arrayTraps.set.call(this,fe,K,void 0)};arrayTraps.set=function(fe,K,me){return objectTraps.set.call(this,fe[0],K,me,fe[0])};function peek(fe,K){const me=fe[DRAFT_STATE];return(me?latest(me):fe)[K]}function readPropFromProto(fe,K,me){const ge=getDescriptorFromProto(K,me);return ge?"value"in ge?ge.value:ge.get?.call(fe.draft_):void 0}function getDescriptorFromProto(fe,K){if(!(K in fe))return;let me=getPrototypeOf(fe);for(;me;){const ge=Object.getOwnPropertyDescriptor(me,K);if(ge)return ge;me=getPrototypeOf(me)}}function markChanged(fe){fe.modified_||(fe.modified_=!0,fe.parent_&&markChanged(fe.parent_))}function prepareCopy(fe){fe.copy_||(fe.copy_=shallowCopy(fe.base_,fe.scope_.immer_.useStrictShallowCopy_))}var Immer2=class{constructor(fe){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(K,me,ge)=>{if(typeof K=="function"&&typeof me!="function"){const ye=me;me=K;const ve=this;return function(Ee=ye,...be){return ve.produce(Ee,Ae=>me.call(this,Ae,...be))}}typeof me!="function"&&die(6),ge!==void 0&&typeof ge!="function"&&die(7);let xe;if(isDraftable(K)){const ye=enterScope(this),ve=createProxy(K,void 0);let _e=!0;try{xe=me(ve),_e=!1}finally{_e?revokeScope(ye):leaveScope(ye)}return usePatchesInScope(ye,ge),processResult(xe,ye)}else if(!K||typeof K!="object"){if(xe=me(K),xe===void 0&&(xe=K),xe===NOTHING&&(xe=void 0),this.autoFreeze_&&freeze(xe,!0),ge){const ye=[],ve=[];getPlugin("Patches").generateReplacementPatches_(K,xe,ye,ve),ge(ye,ve)}return xe}else die(1,K)},this.produceWithPatches=(K,me)=>{if(typeof K=="function")return(ve,..._e)=>this.produceWithPatches(ve,Ee=>K(Ee,..._e));let ge,xe;return[this.produce(K,me,(ve,_e)=>{ge=ve,xe=_e}),ge,xe]},typeof fe?.autoFreeze=="boolean"&&this.setAutoFreeze(fe.autoFreeze),typeof fe?.useStrictShallowCopy=="boolean"&&this.setUseStrictShallowCopy(fe.useStrictShallowCopy)}createDraft(fe){isDraftable(fe)||die(8),isDraft(fe)&&(fe=current(fe));const K=enterScope(this),me=createProxy(fe,void 0);return me[DRAFT_STATE].isManual_=!0,leaveScope(K),me}finishDraft(fe,K){const me=fe&&fe[DRAFT_STATE];(!me||!me.isManual_)&&die(9);const{scope_:ge}=me;return usePatchesInScope(ge,K),processResult(void 0,ge)}setAutoFreeze(fe){this.autoFreeze_=fe}setUseStrictShallowCopy(fe){this.useStrictShallowCopy_=fe}applyPatches(fe,K){let me;for(me=K.length-1;me>=0;me--){const xe=K[me];if(xe.path.length===0&&xe.op==="replace"){fe=xe.value;break}}me>-1&&(K=K.slice(me+1));const ge=getPlugin("Patches").applyPatches_;return isDraft(fe)?ge(fe,K):this.produce(fe,xe=>ge(xe,K))}};function createProxy(fe,K){const me=isMap(fe)?getPlugin("MapSet").proxyMap_(fe,K):isSet(fe)?getPlugin("MapSet").proxySet_(fe,K):createProxyProxy(fe,K);return(K?K.scope_:getCurrentScope()).drafts_.push(me),me}function current(fe){return isDraft(fe)||die(10,fe),currentImpl(fe)}function currentImpl(fe){if(!isDraftable(fe)||isFrozen(fe))return fe;const K=fe[DRAFT_STATE];let me;if(K){if(!K.modified_)return K.base_;K.finalized_=!0,me=shallowCopy(fe,K.scope_.immer_.useStrictShallowCopy_)}else me=shallowCopy(fe,!0);return each(me,(ge,xe)=>{set(me,ge,currentImpl(xe))}),K&&(K.finalized_=!1),me}function enableMapSet(){class fe extends Map{constructor(Ee,be){super(),this[DRAFT_STATE]={type_:2,parent_:be,scope_:be?be.scope_:getCurrentScope(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:Ee,draft_:this,isManual_:!1,revoked_:!1}}get size(){return latest(this[DRAFT_STATE]).size}has(Ee){return latest(this[DRAFT_STATE]).has(Ee)}set(Ee,be){const Ae=this[DRAFT_STATE];return ve(Ae),(!latest(Ae).has(Ee)||latest(Ae).get(Ee)!==be)&&(me(Ae),markChanged(Ae),Ae.assigned_.set(Ee,!0),Ae.copy_.set(Ee,be),Ae.assigned_.set(Ee,!0)),this}delete(Ee){if(!this.has(Ee))return!1;const be=this[DRAFT_STATE];return ve(be),me(be),markChanged(be),be.base_.has(Ee)?be.assigned_.set(Ee,!1):be.assigned_.delete(Ee),be.copy_.delete(Ee),!0}clear(){const Ee=this[DRAFT_STATE];ve(Ee),latest(Ee).size&&(me(Ee),markChanged(Ee),Ee.assigned_=new Map,each(Ee.base_,be=>{Ee.assigned_.set(be,!1)}),Ee.copy_.clear())}forEach(Ee,be){const Ae=this[DRAFT_STATE];latest(Ae).forEach((Se,Ce,Te)=>{Ee.call(be,this.get(Ce),Ce,this)})}get(Ee){const be=this[DRAFT_STATE];ve(be);const Ae=latest(be).get(Ee);if(be.finalized_||!isDraftable(Ae)||Ae!==be.base_.get(Ee))return Ae;const Se=createProxy(Ae,be);return me(be),be.copy_.set(Ee,Se),Se}keys(){return latest(this[DRAFT_STATE]).keys()}values(){const Ee=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const be=Ee.next();return be.done?be:{done:!1,value:this.get(be.value)}}}}entries(){const Ee=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const be=Ee.next();if(be.done)return be;const Ae=this.get(be.value);return{done:!1,value:[be.value,Ae]}}}}[Symbol.iterator](){return this.entries()}}function K(_e,Ee){return new fe(_e,Ee)}function me(_e){_e.copy_||(_e.assigned_=new Map,_e.copy_=new Map(_e.base_))}class ge extends Set{constructor(Ee,be){super(),this[DRAFT_STATE]={type_:3,parent_:be,scope_:be?be.scope_:getCurrentScope(),modified_:!1,finalized_:!1,copy_:void 0,base_:Ee,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return latest(this[DRAFT_STATE]).size}has(Ee){const be=this[DRAFT_STATE];return ve(be),be.copy_?!!(be.copy_.has(Ee)||be.drafts_.has(Ee)&&be.copy_.has(be.drafts_.get(Ee))):be.base_.has(Ee)}add(Ee){const be=this[DRAFT_STATE];return ve(be),this.has(Ee)||(ye(be),markChanged(be),be.copy_.add(Ee)),this}delete(Ee){if(!this.has(Ee))return!1;const be=this[DRAFT_STATE];return ve(be),ye(be),markChanged(be),be.copy_.delete(Ee)||(be.drafts_.has(Ee)?be.copy_.delete(be.drafts_.get(Ee)):!1)}clear(){const Ee=this[DRAFT_STATE];ve(Ee),latest(Ee).size&&(ye(Ee),markChanged(Ee),Ee.copy_.clear())}values(){const Ee=this[DRAFT_STATE];return ve(Ee),ye(Ee),Ee.copy_.values()}entries(){const Ee=this[DRAFT_STATE];return ve(Ee),ye(Ee),Ee.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(Ee,be){const Ae=this.values();let Se=Ae.next();for(;!Se.done;)Ee.call(be,Se.value,Se.value,this),Se=Ae.next()}}function xe(_e,Ee){return new ge(_e,Ee)}function ye(_e){_e.copy_||(_e.copy_=new Set,_e.base_.forEach(Ee=>{if(isDraftable(Ee)){const be=createProxy(Ee,_e);_e.drafts_.set(Ee,be),_e.copy_.add(be)}else _e.copy_.add(Ee)}))}function ve(_e){_e.revoked_&&die(3,JSON.stringify(latest(_e)))}loadPlugin("MapSet",{proxyMap_:K,proxySet_:xe})}var immer$1=new Immer2,produce=immer$1.produce;immer$1.produceWithPatches.bind(immer$1);immer$1.setAutoFreeze.bind(immer$1);immer$1.setUseStrictShallowCopy.bind(immer$1);immer$1.applyPatches.bind(immer$1);immer$1.createDraft.bind(immer$1);immer$1.finishDraft.bind(immer$1);const immerImpl=fe=>(K,me,ge)=>(ge.setState=(xe,ye,...ve)=>{const _e=typeof xe=="function"?produce(xe):xe;return K(_e,ye,...ve)},fe(ge.setState,me,ge)),immer=immerImpl,cleanGuiState={theme:{type:"ThemeConfigurationMessage",titlebar_content:null,control_layout:"floating",control_width:"medium",dark_mode:!1,show_logo:!0,show_share_button:!0,colors:null},label:"",server:"ws://localhost:8080",shareUrl:null,websocketConnected:!1,backgroundAvailable:!1,showOrbitOriginTool:!1,guiUuidSetFromContainerUuid:{},modals:[],guiOrderFromUuid:{},guiConfigFromUuid:{},uploadsInProgress:{}};function useGuiState(fe){return React$4.useState(()=>create$3(immer(K=>({...cleanGuiState,server:fe,setTheme:me=>K(ge=>{ge.theme=me}),setShareUrl:me=>K(ge=>{ge.shareUrl=me}),addGui:me=>K(ge=>{ge.guiOrderFromUuid[me.uuid]=me.props.order,ge.guiConfigFromUuid[me.uuid]=me,me.container_uuid in ge.guiUuidSetFromContainerUuid||(ge.guiUuidSetFromContainerUuid[me.container_uuid]={}),ge.guiUuidSetFromContainerUuid[me.container_uuid][me.uuid]=!0}),addModal:me=>K(ge=>{ge.modals.push(me)}),removeModal:me=>K(ge=>{ge.modals=ge.modals.filter(xe=>xe.uuid!==me)}),removeGui:me=>K(ge=>{const xe=ge.guiConfigFromUuid[me];if(xe==null){console.warn("(OK) Tried to remove non-existent component",me);return}delete ge.guiUuidSetFromContainerUuid[xe.container_uuid][me],delete ge.guiOrderFromUuid[me],delete ge.guiConfigFromUuid[me],Object.keys(ge.guiUuidSetFromContainerUuid[xe.container_uuid]).length==0&&delete ge.guiUuidSetFromContainerUuid[xe.container_uuid]}),resetGui:()=>K(me=>{me.shareUrl=null,me.guiUuidSetFromContainerUuid={},me.modals=[],me.guiOrderFromUuid={},me.guiConfigFromUuid={},me.uploadsInProgress={}}),updateUploadState:me=>K(ge=>{const{componentId:xe,...ye}=me;ge.uploadsInProgress[xe]={...ge.uploadsInProgress[xe],...ye}}),updateGuiProps:(me,ge)=>{K(xe=>{const ye=xe.guiConfigFromUuid[me];if(ye===void 0){console.error(`Tried to update non-existent component '${me}' with`,ge);return}for(const[ve,_e]of Object.entries(ge))ve==="value"?xe.guiConfigFromUuid[me].value=_e:ve in ye.props?ye.props[ve]=_e:console.error(`Tried to update nonexistent property '${ve}' of GUI element ${me}!`)})}}))))[0]}const searchParamKey="websocket";function syncSearchParamServer(fe){const K=new URLSearchParams(window.location.search),me=window.location.host.includes(fe.replace("ws://","").replace("/",""))||window.location.host.includes(fe.replace("wss://","").replace("/",""));me&&K.has(searchParamKey)?K.delete(searchParamKey):me||K.set(searchParamKey,fe),window.history.replaceState(null,"Viser",K.size===0?window.location.href.split("?")[0]:"?"+Array.from(K.entries()).map(([ge,xe])=>`${ge}=${xe}`).join("&"))}function WorkerWrapper(fe){return new Worker(""+new URL("WebsocketServerWorker-ClCkJfx0.js",import.meta.url).href,{type:"module",name:fe?.name})}function WebsocketMessageProducer(){const fe=reactExports.useContext(ViewerContext).messageQueueRef,K=reactExports.useContext(ViewerContext),me=K.useGui(ye=>ye.server),ge=K.useGui(ye=>ye.resetGui),xe=K.useSceneTree(ye=>ye.resetScene);return syncSearchParamServer(me),React$4.useEffect(()=>{const ye=new WorkerWrapper;ye.onmessage=_e=>{const Ee=_e.data;Ee.type==="connected"?(ge(),xe(),K.useGui.setState({websocketConnected:!0}),K.sendMessageRef.current=be=>{ve({type:"send",message:be})}):Ee.type==="closed"?(ge(),K.useGui.setState({websocketConnected:!1}),K.sendMessageRef.current=be=>{console.log(`Tried to send ${be.type} but websocket is not connected!`)},Ee.versionMismatch&&notifications.show({id:"version-mismatch",title:"Connection rejected",message:`${Ee.closeReason}.`,color:"red",autoClose:5e3,withCloseButton:!0})):Ee.type==="message_batch"&&fe.current.push(...Ee.messages)};function ve(_e){ye.postMessage(_e)}return ve({type:"set_server",server:me}),()=>{ve({type:"close"}),K.sendMessageRef.current=_e=>console.log(`Tried to send ${_e.type} but websocket is not connected!`),K.useGui.setState({websocketConnected:!1})}},[me,ge,xe]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function assertUnreachable(fe){throw new Error("Didn't expect to get here",fe)}function getIcon(fe){let K=null;switch(fe){case null:break;case"GitHub":K=IconBrandGithub;break;case"Description":K=IconFileDescription;break;case"Keyboard":K=IconKeyboard;break;default:assertUnreachable(fe)}return K}function TitlebarButton(fe){const K=getIcon(fe.icon);return jsxRuntimeExports.jsx(Button,{component:"a",variant:"default",size:"compact-sm",href:fe.href||void 0,target:"_blank",leftSection:K===null?null:jsxRuntimeExports.jsx(K,{size:"1em"}),ml:"xs",color:"gray",children:fe.text})}function MobileTitlebarButton(fe){const K=getIcon(fe.icon);return jsxRuntimeExports.jsx(Button,{m:"sm",component:"a",variant:"default",href:fe.href||void 0,target:"_blank",leftSection:K===null?null:jsxRuntimeExports.jsx(K,{size:"1.5em"}),ml:"sm",color:"gray",children:fe.text})}function TitlebarImage(fe,K){let me;fe.image_url_dark==null||K==="light"?me=fe.image_url_light:me=fe.image_url_dark;const ge=jsxRuntimeExports.jsx("img",{src:me,alt:fe.image_alt,style:{height:"1.8em",margin:"0 0.5em"}});return fe.href==null?ge:jsxRuntimeExports.jsx("a",{style:{display:"block",height:"1.8em"},href:fe.href,children:ge})}function Titlebar(){const K=reactExports.useContext(ViewerContext).useGui(_e=>_e.theme.titlebar_content),me=useMantineColorScheme().colorScheme,[ge,xe]=useDisclosure(!1);if(K==null)return null;const ye=K.buttons,ve=K.image;return jsxRuntimeExports.jsx(Box,{style:{height:"3.2em",margin:0,border:"0",zIndex:10},children:jsxRuntimeExports.jsxs(Paper,{shadow:"0 0 0.8em 0 rgba(0,0,0,0.1)",style:{height:"100%"},children:[jsxRuntimeExports.jsxs(Container,{fluid:!0,style:()=>({height:"100%",display:"flex",alignItems:"center"}),children:[jsxRuntimeExports.jsx(Group$1,{style:()=>({marginRight:"auto"}),children:ve!==null?TitlebarImage(ve,me):null}),jsxRuntimeExports.jsx(Group$1,{display:{base:"none",xs:"flex"},style:()=>({flexWrap:"nowrap",overflowX:"scroll",msOverflowStyle:"none",scrollbarWidth:"none"}),children:ye?.map((_e,Ee)=>reactExports.createElement(TitlebarButton,{..._e,key:Ee}))}),jsxRuntimeExports.jsx(Burger,{size:"sm",opened:ge,onClick:xe.toggle,title:ge?"Close navigation":"Open navigation",display:{base:"block",xs:"none"}})]}),jsxRuntimeExports.jsx(Portal$1,{children:jsxRuntimeExports.jsx(Paper,{display:{base:"flex",xs:"none"},radius:"0",style:{flexDirection:"column",position:"absolute",top:"3.2em",zIndex:2e3,height:ge?"calc(100vh - 2.375em)":"0",width:"100vw",transition:"all 0.5s",overflow:ge?"scroll":"hidden",padding:ge?"1rem":"0"},children:ye?.map((_e,Ee)=>reactExports.createElement(MobileTitlebarButton,{..._e,key:Ee}))})})]})})}function ViserModal(){return reactExports.useContext(ViewerContext).useGui(ge=>ge.modals).map((ge,xe)=>jsxRuntimeExports.jsx(GeneratedModal,{conf:ge,index:xe},ge.uuid))}function GeneratedModal({conf:fe,index:K}){return jsxRuntimeExports.jsx(Modal,{opened:!0,title:fe.title,onClose:()=>{},withCloseButton:!1,centered:!0,zIndex:100+K,children:jsxRuntimeExports.jsx(GeneratedGuiContainer,{containerUuid:fe.uuid})})}const rootNodeTemplate={message:{type:"FrameMessage",name:"",props:{show_axes:!1,axes_length:.5,axes_radius:.0125,origin_radius:.025,origin_color:[236,236,0]}},children:["/WorldAxes"],clickable:!1},worldAxesNodeTemplate={message:{type:"FrameMessage",name:"/WorldAxes",props:{show_axes:!0,axes_length:.5,axes_radius:.0125,origin_radius:.025,origin_color:[236,236,0]}},children:[],clickable:!1};function useSceneTreeState(fe){return React$4.useState(()=>create$3(immer(K=>({nodeFromName:{"":rootNodeTemplate,"/WorldAxes":worldAxesNodeTemplate},labelVisibleFromName:{},enableDefaultLights:!0,enableDefaultLightsShadows:!0,environmentMap:{type:"EnvironmentMapMessage",hdri:"city",background:!1,background_blurriness:0,background_intensity:1,background_wxyz:[1,0,0,0],environment_intensity:1,environment_wxyz:[1,0,0,0]},setClickable:(me,ge)=>K(xe=>{const ye=xe.nodeFromName[me];ye!==void 0&&(ye.clickable=ge)}),addSceneNode:me=>K(ge=>{const xe=ge.nodeFromName[me.name];if(xe!==void 0)delete fe.current[me.name],ge.nodeFromName[me.name]={...xe,message:me};else{const ye=me.name.split("/").slice(0,-1).join("/");ge.nodeFromName[me.name]={message:me,children:[],clickable:!1},ge.nodeFromName[ye].children.push(me.name)}}),removeSceneNode:me=>K(ge=>{const xe=[];function ye(_e){xe.push(_e),ge.nodeFromName[_e].children.forEach(ye)}ye(me),xe.forEach(_e=>{delete ge.nodeFromName[_e],delete fe.current[_e]});const ve=me.split("/").slice(0,-1).join("/");ge.nodeFromName[ve].children=ge.nodeFromName[ve].children.filter(_e=>_e!==me)}),updateSceneNode:(me,ge)=>K(xe=>{if(xe.nodeFromName[me]===void 0){console.error(`Attempted to update non-existent node ${me} with updates:`,ge);return}xe.nodeFromName[me].message.props={...xe.nodeFromName[me].message.props,...ge}}),resetScene:()=>K(me=>{for(const ge of Object.keys(me.nodeFromName))ge!==""&&ge!=="/WorldAxes"&&delete me.nodeFromName[ge];me.nodeFromName[""]=rootNodeTemplate,me.nodeFromName["/WorldAxes"]=worldAxesNodeTemplate}),setLabelVisibility:(me,ge)=>K(xe=>{xe.labelVisibleFromName[me]=ge})}))))[0]}function getSizesVariables(fe,K,me){return Object.keys(fe[K]).reduce((ge,xe)=>(ge[xe]=`var(--mantine-${me}-${xe})`,ge),{})}function getBreakpointValue(fe,K){return fe in K.breakpoints?K.breakpoints[fe]:em(fe)}function themeToVars(fe){const K=mergeMantineTheme(DEFAULT_THEME,fe),me=getSizesVariables(K,"fontSizes","font-size"),ge=getSizesVariables(K,"lineHeights","line-height"),xe=getSizesVariables(K,"shadows","shadow"),ye=getSizesVariables(K,"radius","radius"),ve=getSizesVariables(K,"spacing","spacing"),_e=Object.keys(K.headings.sizes).reduce((be,Ae)=>(be[Ae]={fontSize:`var(--mantine-${Ae}-font-size)`,lineHeight:`var(--mantine-${Ae}-line-height)`,fontWeight:`var(--mantine-${Ae}-font-weight)`},be),{}),Ee=Object.keys(K.colors).reduce((be,Ae)=>(be[Ae]={0:`var(--mantine-color-${Ae}-0)`,1:`var(--mantine-color-${Ae}-1)`,2:`var(--mantine-color-${Ae}-2)`,3:`var(--mantine-color-${Ae}-3)`,4:`var(--mantine-color-${Ae}-4)`,5:`var(--mantine-color-${Ae}-5)`,6:`var(--mantine-color-${Ae}-6)`,7:`var(--mantine-color-${Ae}-7)`,8:`var(--mantine-color-${Ae}-8)`,9:`var(--mantine-color-${Ae}-9)`,filled:`var(--mantine-color-${Ae}-filled)`,filledHover:`var(--mantine-color-${Ae}-filled-hover)`,light:`var(--mantine-color-${Ae}-light)`,lightHover:`var(--mantine-color-${Ae}-light-hover)`,lightColor:`var(--mantine-color-${Ae}-light-color)`,outline:`var(--mantine-color-${Ae}-outline)`,outlineHover:`var(--mantine-color-${Ae}-outline-hover)`},be),{primary:"var(--mantine-primary-color-filled)",primaryColors:{0:"var(--mantine-primary-color-0)",1:"var(--mantine-primary-color-1)",2:"var(--mantine-primary-color-2)",3:"var(--mantine-primary-color-3)",4:"var(--mantine-primary-color-4)",5:"var(--mantine-primary-color-5)",6:"var(--mantine-primary-color-6)",7:"var(--mantine-primary-color-7)",8:"var(--mantine-primary-color-8)",9:"var(--mantine-primary-color-9)",filled:"var(--mantine-primary-color-filled)",filledHover:"var(--mantine-primary-color-filled-hover)",light:"var(--mantine-primary-color-light)",lightHover:"var(--mantine-primary-color-light-hover)",lightColor:"var(--mantine-primary-color-light-color)",outline:"var(--mantine-primary-color-outline)",outlineHover:"var(--mantine-primary-color-outline-hover)"},white:"var(--mantine-color-white)",black:"var(--mantine-color-black)",text:"var(--mantine-color-text)",body:"var(--mantine-color-body)",error:"var(--mantine-color-error)",placeholder:"var(--mantine-color-placeholder)",anchor:"var(--mantine-color-anchor)",default:"var(--mantine-color-default)",defaultHover:"var(--mantine-color-default-hover)",defaultColor:"var(--mantine-color-default-color)",defaultBorder:"var(--mantine-color-default-border)",dimmed:"var(--mantine-color-dimmed)"});return{scale:"var(--mantine-scale)",cursorType:"var(--mantine-cursor-type)",webkitFontSmoothing:"var(--mantine-webkit-font-smoothing)",mozFontSmoothing:"var(--mantine-moz-font-smoothing)",lineHeight:"var(--mantine-line-height)",fontFamily:"var(--mantine-font-family)",fontFamilyMonospace:"var(--mantine-font-family-monospace)",fontFamilyHeadings:"var(--mantine-font-family-headings)",headingFontWeight:"var(--mantine-heading-font-weight)",radiusDefault:"var(--mantine-radius-default)",breakpoints:K.breakpoints,fontSizes:me,lineHeights:ge,shadows:xe,radius:ye,headings:_e,spacing:ve,colors:Ee,rtlSelector:'[dir="rtl"] &',darkSelector:'[data-mantine-color-scheme="dark"] &',lightSelector:'[data-mantine-color-scheme="light"] &',smallerThan:be=>`(max-width: ${getBreakpointValue(be,K)})`,largerThan:be=>`(min-width: ${getBreakpointValue(be,K)})`}}const theme={fontFamily:"Inter",autoContrast:!0,components:{Checkbox:Checkbox.extend({defaultProps:{radius:"xs"}}),ColorInput:ColorInput.extend({defaultProps:{radius:"xs"}}),Select:Select.extend({defaultProps:{radius:"sm"}}),Textarea:Textarea.extend({defaultProps:{radius:"xs"}}),TextInput:TextInput.extend({defaultProps:{radius:"xs"}}),NumberInput:NumberInput.extend({defaultProps:{radius:"xs"}}),Paper:Paper.extend({defaultProps:{radius:"xs",shadow:"0"}}),ActionIcon:ActionIcon.extend({defaultProps:{variant:"subtle",color:"gray",radius:"xs"}}),Button:Button.extend({defaultProps:{radius:"xs",fw:450}})}};themeToVars(theme);const typeSetSceneNodeMessage=new Set(["CameraFrustumMessage","GlbMessage","FrameMessage","BatchedAxesMessage","GridMessage","LabelMessage","Gui3DMessage","PointCloudMessage","DirectionalLightMessage","AmbientLightMessage","HemisphereLightMessage","PointLightMessage","RectAreaLightMessage","SpotLightMessage","MeshMessage","SkinnedMeshMessage","BatchedMeshesMessage","BatchedGlbMessage","TransformControlsMessage","ImageMessage","LineSegmentsMessage","CatmullRomSplineMessage","CubicBezierSplineMessage","GaussianSplatsMessage"]);function isSceneNodeMessage(fe){return typeSetSceneNodeMessage.has(fe.type)}const typeSetGuiComponentMessage=new Set(["GuiFolderMessage","GuiMarkdownMessage","GuiHtmlMessage","GuiProgressBarMessage","GuiPlotlyMessage","GuiImageMessage","GuiTabGroupMessage","GuiButtonMessage","GuiUploadButtonMessage","GuiSliderMessage","GuiMultiSliderMessage","GuiNumberMessage","GuiRgbMessage","GuiRgbaMessage","GuiCheckboxMessage","GuiVector2Message","GuiVector3Message","GuiTextMessage","GuiDropdownMessage","GuiButtonGroupMessage"]);function isGuiComponentMessage(fe){return typeSetGuiComponentMessage.has(fe.type)}function useMessageHandler(){const viewer=reactExports.useContext(ViewerContext),updateSceneNode=viewer.useSceneTree(fe=>fe.updateSceneNode),removeSceneNode=viewer.useSceneTree(fe=>fe.removeSceneNode),addSceneNode=viewer.useSceneTree(fe=>fe.addSceneNode),setTheme=viewer.useGui(fe=>fe.setTheme),setShareUrl=viewer.useGui(fe=>fe.setShareUrl),addGui=viewer.useGui(fe=>fe.addGui),addModal=viewer.useGui(fe=>fe.addModal),removeModal=viewer.useGui(fe=>fe.removeModal),removeGui=viewer.useGui(fe=>fe.removeGui),updateGuiProps=viewer.useGui(fe=>fe.updateGuiProps),setClickable=viewer.useSceneTree(fe=>fe.setClickable),updateUploadState=viewer.useGui(fe=>fe.updateUploadState);function addSceneNodeMakeParents(fe){const K=viewer.nodeAttributesFromName.current;K[fe.name]={overrideVisibility:K[fe.name]?.overrideVisibility};const me=viewer.useSceneTree.getState().nodeFromName[fe.name]?.message;(me===void 0||fe!==me)&&(K[fe.name].poseUpdateState="waitForMakeObject");const ge=viewer.useSceneTree.getState().nodeFromName,xe=fe.name.split("/").slice(0,-1).join("/");xe in ge||addSceneNodeMakeParents({...rootNodeTemplate.message,name:xe}),addSceneNode(fe)}const fileDownloadHandler=useFileDownloadHandler();return message=>{if(isGuiComponentMessage(message)){addGui(message);return}if(isSceneNodeMessage(message)){if(message.type==="SkinnedMeshMessage"){viewer.skinnedMeshState.current[message.name]={initialized:!1,poses:[]};const fe=new Float32Array(message.props.bone_wxyzs.buffer.slice(message.props.bone_wxyzs.byteOffset,message.props.bone_wxyzs.byteOffset+message.props.bone_wxyzs.byteLength)),K=new Float32Array(message.props.bone_positions.buffer.slice(message.props.bone_positions.byteOffset,message.props.bone_positions.byteOffset+message.props.bone_positions.byteLength));for(let me=0;me<message.props.bone_wxyzs.length;me++)viewer.skinnedMeshState.current[message.name].poses.push({wxyz:[fe[4*me],fe[4*me+1],fe[4*me+2],fe[4*me+3]],position:[K[3*me],K[3*me+1],K[3*me+2]]})}addSceneNodeMakeParents(message);return}switch(message.type){case"SceneNodeUpdateMessage":{updateSceneNode(message.name,message.updates);return}case"ShareUrlUpdated":{setShareUrl(message.share_url);return}case"GetRenderRequestMessage":{viewer.getRenderRequest.current=message,viewer.getRenderRequestState.current="triggered";return}case"SetGuiPanelLabelMessage":{viewer.useGui.setState({label:message.label??""});return}case"ThemeConfigurationMessage":{setTheme(message);return}case"RunJavascriptMessage":{eval(message.source);return}case"NotificationMessage":{(message.mode==="show"?notifications.show:notifications.update)({id:message.uuid,title:message.props.title,message:message.props.body,withCloseButton:message.props.with_close_button,loading:message.props.loading,autoClose:message.props.auto_close,color:message.props.color??void 0});return}case"RemoveNotificationMessage":{notifications.hide(message.uuid);return}case"ScenePointerEnableMessage":{viewer.scenePointerInfo.current.enabled=message.enable?message.event_type:!1,viewer.canvasRef.current.style.cursor=message.enable?"pointer":"auto";return}case"EnvironmentMapMessage":{viewer.useSceneTree.setState({environmentMap:message});return}case"EnableLightsMessage":{viewer.useSceneTree.setState({enableDefaultLights:message.enabled,enableDefaultLightsShadows:message.cast_shadow});return}case"GuiModalMessage":{addModal(message);return}case"GuiCloseModalMessage":{removeModal(message.uuid);return}case"SetBoneOrientationMessage":{const fe=viewer.skinnedMeshState.current;fe[message.name].poses[message.bone_index].wxyz=message.wxyz;break}case"SetBonePositionMessage":{const fe=viewer.skinnedMeshState.current;fe[message.name].poses[message.bone_index].position=message.position;break}case"SetCameraLookAtMessage":{const fe=viewer.cameraControlRef.current,K=computeT_threeworld_world(viewer),me=new Vector3(message.look_at[0],message.look_at[1],message.look_at[2]);me.applyMatrix4(K),fe.setTarget(me.x,me.y,me.z,!1);return}case"SetCameraUpDirectionMessage":{const fe=viewer.cameraRef.current,K=viewer.cameraControlRef.current,me=computeT_threeworld_world(viewer),ge=new Vector3(message.position[0],message.position[1],message.position[2]).normalize().applyQuaternion(new Quaternion().setFromRotationMatrix(me));fe.up.set(ge.x,ge.y,ge.z);const xe=new Vector3;K.getPosition(xe),K.updateCameraUp(),K.setPosition(xe.x,xe.y,xe.z,!1);return}case"SetCameraPositionMessage":{const fe=viewer.cameraControlRef.current,K=new Vector3(message.position[0],message.position[1],message.position[2]),me=computeT_threeworld_world(viewer);K.applyMatrix4(me),fe.setPosition(K.x,K.y,K.z);return}case"SetCameraFovMessage":{const fe=viewer.cameraRef.current;fe.setFocalLength(.5*fe.getFilmHeight()/Math.tan(message.fov/2)),viewer.sendCameraRef.current!==null&&viewer.sendCameraRef.current();return}case"SetCameraNearMessage":{const fe=viewer.cameraRef.current;fe.near=message.near,fe.updateProjectionMatrix();return}case"SetCameraFarMessage":{const fe=viewer.cameraRef.current;fe.far=message.far,fe.updateProjectionMatrix();return}case"SetOrientationMessage":{const fe=viewer.nodeAttributesFromName.current;fe[message.name]===void 0&&(fe[message.name]={}),fe[message.name].wxyz=message.wxyz,fe[message.name].poseUpdateState!="waitForMakeObject"&&(fe[message.name].poseUpdateState="needsUpdate");break}case"SetPositionMessage":{const fe=viewer.nodeAttributesFromName.current;fe[message.name]===void 0&&(fe[message.name]={}),fe[message.name].position=message.position,fe[message.name].poseUpdateState!="waitForMakeObject"&&(fe[message.name].poseUpdateState="needsUpdate");break}case"SetSceneNodeVisibilityMessage":{const fe=viewer.nodeAttributesFromName.current;fe[message.name]===void 0&&(fe[message.name]={}),fe[message.name].visibility=message.visible;break}case"BackgroundImageMessage":{if(message.rgb_data!==null){const fe=URL.createObjectURL(new Blob([message.rgb_data],{type:message.media_type}));new TextureLoader().load(fe,K=>{URL.revokeObjectURL(fe);const me=viewer.backgroundMaterialRef.current.uniforms.colorMap.value;viewer.backgroundMaterialRef.current.uniforms.colorMap.value=K,isTexture(me)&&me.dispose()}),viewer.backgroundMaterialRef.current.uniforms.enabled.value=!0}else{const fe=viewer.backgroundMaterialRef.current.uniforms.colorMap.value;isTexture(fe)&&fe.dispose(),viewer.backgroundMaterialRef.current.uniforms.enabled.value=!1}if(viewer.backgroundMaterialRef.current.uniforms.hasDepth.value=message.depth_data!==null,message.depth_data!==null){const fe=URL.createObjectURL(new Blob([message.depth_data],{type:message.media_type}));new TextureLoader().load(fe,K=>{URL.revokeObjectURL(fe);const me=viewer.backgroundMaterialRef.current?.uniforms.depthMap.value;viewer.backgroundMaterialRef.current.uniforms.depthMap.value=K,isTexture(me)&&me.dispose()})}return}case"RemoveSceneNodeMessage":{console.log("Removing scene node:",message.name);const fe=viewer.useSceneTree.getState().nodeFromName;if(!(message.name in fe)){console.log("(OK) Skipping scene node removal for "+name);return}removeSceneNode(message.name);const K=viewer.nodeAttributesFromName.current;delete K[message.name],viewer.skinnedMeshState.current[message.name]!==void 0&&delete viewer.skinnedMeshState.current[message.name];return}case"SetSceneNodeClickableMessage":{setTimeout(()=>setClickable(message.name,message.clickable),50);return}case"GuiUpdateMessage":{updateGuiProps(message.uuid,message.updates);return}case"GuiRemoveMessage":{removeGui(message.uuid);return}case"FileTransferStartDownload":case"FileTransferPart":{fileDownloadHandler(message);return}case"FileTransferPartAck":{updateUploadState({componentId:message.source_component_uuid,uploadedBytes:message.transferred_bytes,totalBytes:message.total_bytes});return}default:{console.log("Received message did not match any known types:",message);return}}}}function useFileDownloadHandler(){const fe=React$4.useRef({});return K=>{const me="download-"+K.transfer_uuid;switch(K.type){case"FileTransferStartDownload":{let ve=K.size_bytes;const _e=["B","K","M","G","T","P"];let Ee=0;for(;ve>=100&&Ee<_e.length-1;)ve/=1024,Ee+=1;fe.current[K.transfer_uuid]={metadata:K,notificationId:me,parts:[],bytesDownloaded:0,displayFilesize:`${ve.toFixed(1)}${_e[Ee]}`};break}case"FileTransferPart":{const ve=fe.current[K.transfer_uuid];K.part!=ve.parts.length&&console.error("A file download message was dropped; this should never happen!"),ve.parts.push(K.content),ve.bytesDownloaded+=K.content.length;break}}const ge=fe.current[K.transfer_uuid],xe=100*ge.bytesDownloaded/ge.metadata.size_bytes,ye=ge.bytesDownloaded==ge.metadata.size_bytes;if((ge.bytesDownloaded==0?notifications.show:notifications.update)({title:(ye?"Received ":"Receiving ")+`${ge.metadata.filename} (${ge.displayFilesize})`,message:jsxRuntimeExports.jsx(Progress,{size:"sm",value:xe}),id:me,autoClose:ye&&ge.metadata.save_immediately,withCloseButton:ye,loading:!ye,icon:ye?jsxRuntimeExports.jsx(IconCheck,{}):void 0}),ye){const ve=window.URL.createObjectURL(new Blob(ge.parts,{type:ge.metadata.mime_type}));if(ge.metadata.save_immediately){const _e=document.createElement("a");_e.href=ve,_e.download=ge.metadata.filename,_e.click(),_e.remove(),delete fe.current[K.transfer_uuid],URL.revokeObjectURL(ve)}else notifications.update({id:me,title:"",message:jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsx("a",{href:ve,download:ge.metadata.filename,children:jsxRuntimeExports.jsx(Button,{leftSection:jsxRuntimeExports.jsx(IconDownload,{size:14}),variant:"light",size:"sm",mt:"0.05em",w:"100%",children:`${ge.metadata.filename} (${ge.displayFilesize})`})})}),autoClose:!1,onClose:()=>{URL.revokeObjectURL(ve),delete fe.current[K.transfer_uuid]}})}}}function FrameSynchronizedMessageHandler(){const fe=useMessageHandler(),K=reactExports.useContext(ViewerContext),me=K.messageQueueRef,ge=React$4.useContext(GaussianSplatsContext);return useFrame(()=>{if(K.getRenderRequestState.current==="triggered")K.getRenderRequestState.current="pause";else if(K.getRenderRequestState.current==="pause"){const xe=K.getRenderRequest.current.position,ye=K.getRenderRequest.current.wxyz,ve=K.getRenderRequest.current.fov,_e=K.getRenderRequest.current.width,Ee=K.getRenderRequest.current.height,be=computeT_threeworld_world(K),Ae=new PerspectiveCamera(MathUtils.radToDeg(ve),_e/Ee,.01,1e3);Ae.position.set(...xe).applyMatrix4(be),Ae.setRotationFromQuaternion(new Quaternion(ye[1],ye[2],ye[3],ye[0]).premultiply(new Quaternion().setFromRotationMatrix(be)).multiply(new Quaternion().setFromAxisAngle(new Vector3(1,0,0),Math.PI)));const Se=ge.meshPropsRef.current,Ce=Se!==null?Se.sortedIndexAttribute.array.slice():null;ge.updateCamera.current!==null&&ge.updateCamera.current(Ae,_e,Ee,!0);const Te=new WebGLRenderer({antialias:!0,alpha:!0});Te.setSize(_e,Ee),Te.setClearColor(16777215,K.getRenderRequest.current.format=="image/png"?0:1),Te.render(K.sceneRef.current,Ae),Ce!==null&&Se!==null&&(Se.sortedIndexAttribute.array=Ce,Se.sortedIndexAttribute.needsUpdate=!0),K.getRenderRequestState.current="in_progress",Te.domElement.toBlob(async Re=>{Te.dispose(),Te.forceContextLoss(),K.sendMessageRef.current({type:"GetRenderResponseMessage",payload:new Uint8Array(await Re.arrayBuffer())}),K.getRenderRequestState.current="ready"},K.getRenderRequest.current.format)}if(K.getRenderRequestState.current==="ready"){const xe=me.current.findIndex(_e=>_e.type==="GetRenderRequestMessage"),ye=xe!==-1?xe+1:me.current.length;me.current.splice(0,ye).forEach(fe)}},-1e5),null}new TextEncoder;const CHUNK_SIZE=4096;function utf8DecodeJs(fe,K,me){let ge=K;const xe=ge+me,ye=[];let ve="";for(;ge<xe;){const _e=fe[ge++];if(!(_e&128))ye.push(_e);else if((_e&224)===192){const Ee=fe[ge++]&63;ye.push((_e&31)<<6|Ee)}else if((_e&240)===224){const Ee=fe[ge++]&63,be=fe[ge++]&63;ye.push((_e&31)<<12|Ee<<6|be)}else if((_e&248)===240){const Ee=fe[ge++]&63,be=fe[ge++]&63,Ae=fe[ge++]&63;let Se=(_e&7)<<18|Ee<<12|be<<6|Ae;Se>65535&&(Se-=65536,ye.push(Se>>>10&1023|55296),Se=56320|Se&1023),ye.push(Se)}else ye.push(_e);ye.length>=CHUNK_SIZE&&(ve+=String.fromCharCode(...ye),ye.length=0)}return ye.length>0&&(ve+=String.fromCharCode(...ye)),ve}const sharedTextDecoder=new TextDecoder,TEXT_DECODER_THRESHOLD=200;function utf8DecodeTD(fe,K,me){const ge=fe.subarray(K,K+me);return sharedTextDecoder.decode(ge)}function utf8Decode(fe,K,me){return me>TEXT_DECODER_THRESHOLD?utf8DecodeTD(fe,K,me):utf8DecodeJs(fe,K,me)}class ExtData{constructor(K,me){this.type=K,this.data=me}}class DecodeError extends Error{constructor(K){super(K);const me=Object.create(DecodeError.prototype);Object.setPrototypeOf(this,me),Object.defineProperty(this,"name",{configurable:!0,enumerable:!1,value:DecodeError.name})}}const UINT32_MAX=4294967295;function setInt64(fe,K,me){const ge=Math.floor(me/4294967296),xe=me;fe.setUint32(K,ge),fe.setUint32(K+4,xe)}function getInt64(fe,K){const me=fe.getInt32(K),ge=fe.getUint32(K+4);return me*4294967296+ge}function getUint64(fe,K){const me=fe.getUint32(K),ge=fe.getUint32(K+4);return me*4294967296+ge}const EXT_TIMESTAMP=-1,TIMESTAMP32_MAX_SEC=4294967296-1,TIMESTAMP64_MAX_SEC=17179869184-1;function encodeTimeSpecToTimestamp({sec:fe,nsec:K}){if(fe>=0&&K>=0&&fe<=TIMESTAMP64_MAX_SEC)if(K===0&&fe<=TIMESTAMP32_MAX_SEC){const me=new Uint8Array(4);return new DataView(me.buffer).setUint32(0,fe),me}else{const me=fe/4294967296,ge=fe&4294967295,xe=new Uint8Array(8),ye=new DataView(xe.buffer);return ye.setUint32(0,K<<2|me&3),ye.setUint32(4,ge),xe}else{const me=new Uint8Array(12),ge=new DataView(me.buffer);return ge.setUint32(0,K),setInt64(ge,4,fe),me}}function encodeDateToTimeSpec(fe){const K=fe.getTime(),me=Math.floor(K/1e3),ge=(K-me*1e3)*1e6,xe=Math.floor(ge/1e9);return{sec:me+xe,nsec:ge-xe*1e9}}function encodeTimestampExtension(fe){if(fe instanceof Date){const K=encodeDateToTimeSpec(fe);return encodeTimeSpecToTimestamp(K)}else return null}function decodeTimestampToTimeSpec(fe){const K=new DataView(fe.buffer,fe.byteOffset,fe.byteLength);switch(fe.byteLength){case 4:return{sec:K.getUint32(0),nsec:0};case 8:{const me=K.getUint32(0),ge=K.getUint32(4),xe=(me&3)*4294967296+ge,ye=me>>>2;return{sec:xe,nsec:ye}}case 12:{const me=getInt64(K,4),ge=K.getUint32(0);return{sec:me,nsec:ge}}default:throw new DecodeError(`Unrecognized data size for timestamp (expected 4, 8, or 12): ${fe.length}`)}}function decodeTimestampExtension(fe){const K=decodeTimestampToTimeSpec(fe);return new Date(K.sec*1e3+K.nsec/1e6)}const timestampExtension={type:EXT_TIMESTAMP,encode:encodeTimestampExtension,decode:decodeTimestampExtension};class ExtensionCodec{constructor(){this.builtInEncoders=[],this.builtInDecoders=[],this.encoders=[],this.decoders=[],this.register(timestampExtension)}register({type:K,encode:me,decode:ge}){if(K>=0)this.encoders[K]=me,this.decoders[K]=ge;else{const xe=-1-K;this.builtInEncoders[xe]=me,this.builtInDecoders[xe]=ge}}tryToEncode(K,me){for(let ge=0;ge<this.builtInEncoders.length;ge++){const xe=this.builtInEncoders[ge];if(xe!=null){const ye=xe(K,me);if(ye!=null){const ve=-1-ge;return new ExtData(ve,ye)}}}for(let ge=0;ge<this.encoders.length;ge++){const xe=this.encoders[ge];if(xe!=null){const ye=xe(K,me);if(ye!=null){const ve=ge;return new ExtData(ve,ye)}}}return K instanceof ExtData?K:null}decode(K,me,ge){const xe=me<0?this.builtInDecoders[-1-me]:this.decoders[me];return xe?xe(K,me,ge):new ExtData(me,K)}}ExtensionCodec.defaultCodec=new ExtensionCodec;function isArrayBufferLike(fe){return fe instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&fe instanceof SharedArrayBuffer}function ensureUint8Array(fe){return fe instanceof Uint8Array?fe:ArrayBuffer.isView(fe)?new Uint8Array(fe.buffer,fe.byteOffset,fe.byteLength):isArrayBufferLike(fe)?new Uint8Array(fe):Uint8Array.from(fe)}function prettyByte(fe){return`${fe<0?"-":""}0x${Math.abs(fe).toString(16).padStart(2,"0")}`}const DEFAULT_MAX_KEY_LENGTH=16,DEFAULT_MAX_LENGTH_PER_KEY=16;class CachedKeyDecoder{constructor(K=DEFAULT_MAX_KEY_LENGTH,me=DEFAULT_MAX_LENGTH_PER_KEY){this.hit=0,this.miss=0,this.maxKeyLength=K,this.maxLengthPerKey=me,this.caches=[];for(let ge=0;ge<this.maxKeyLength;ge++)this.caches.push([])}canBeCached(K){return K>0&&K<=this.maxKeyLength}find(K,me,ge){const xe=this.caches[ge-1];e:for(const ye of xe){const ve=ye.bytes;for(let _e=0;_e<ge;_e++)if(ve[_e]!==K[me+_e])continue e;return ye.str}return null}store(K,me){const ge=this.caches[K.length-1],xe={bytes:K,str:me};ge.length>=this.maxLengthPerKey?ge[Math.random()*ge.length|0]=xe:ge.push(xe)}decode(K,me,ge){const xe=this.find(K,me,ge);if(xe!=null)return this.hit++,xe;this.miss++;const ye=utf8DecodeJs(K,me,ge),ve=Uint8Array.prototype.slice.call(K,me,me+ge);return this.store(ve,ye),ye}}const STATE_ARRAY="array",STATE_MAP_KEY="map_key",STATE_MAP_VALUE="map_value",mapKeyConverter=fe=>{if(typeof fe=="string"||typeof fe=="number")return fe;throw new DecodeError("The type of key must be string or number but "+typeof fe)};class StackPool{constructor(){this.stack=[],this.stackHeadPosition=-1}get length(){return this.stackHeadPosition+1}top(){return this.stack[this.stackHeadPosition]}pushArrayState(K){const me=this.getUninitializedStateFromPool();me.type=STATE_ARRAY,me.position=0,me.size=K,me.array=new Array(K)}pushMapState(K){const me=this.getUninitializedStateFromPool();me.type=STATE_MAP_KEY,me.readCount=0,me.size=K,me.map={}}getUninitializedStateFromPool(){if(this.stackHeadPosition++,this.stackHeadPosition===this.stack.length){const K={type:void 0,size:0,array:void 0,position:0,readCount:0,map:void 0,key:null};this.stack.push(K)}return this.stack[this.stackHeadPosition]}release(K){if(this.stack[this.stackHeadPosition]!==K)throw new Error("Invalid stack state. Released state is not on top of the stack.");if(K.type===STATE_ARRAY){const ge=K;ge.size=0,ge.array=void 0,ge.position=0,ge.type=void 0}if(K.type===STATE_MAP_KEY||K.type===STATE_MAP_VALUE){const ge=K;ge.size=0,ge.map=void 0,ge.readCount=0,ge.type=void 0}this.stackHeadPosition--}reset(){this.stack.length=0,this.stackHeadPosition=-1}}const HEAD_BYTE_REQUIRED=-1,EMPTY_VIEW=new DataView(new ArrayBuffer(0)),EMPTY_BYTES=new Uint8Array(EMPTY_VIEW.buffer);try{EMPTY_VIEW.getInt8(0)}catch(fe){if(!(fe instanceof RangeError))throw new Error("This module is not supported in the current JavaScript engine because DataView does not throw RangeError on out-of-bounds access")}const MORE_DATA=new RangeError("Insufficient data"),sharedCachedKeyDecoder=new CachedKeyDecoder;class Decoder{constructor(K){this.totalPos=0,this.pos=0,this.view=EMPTY_VIEW,this.bytes=EMPTY_BYTES,this.headByte=HEAD_BYTE_REQUIRED,this.stack=new StackPool,this.entered=!1,this.extensionCodec=K?.extensionCodec??ExtensionCodec.defaultCodec,this.context=K?.context,this.useBigInt64=K?.useBigInt64??!1,this.rawStrings=K?.rawStrings??!1,this.maxStrLength=K?.maxStrLength??UINT32_MAX,this.maxBinLength=K?.maxBinLength??UINT32_MAX,this.maxArrayLength=K?.maxArrayLength??UINT32_MAX,this.maxMapLength=K?.maxMapLength??UINT32_MAX,this.maxExtLength=K?.maxExtLength??UINT32_MAX,this.keyDecoder=K?.keyDecoder!==void 0?K.keyDecoder:sharedCachedKeyDecoder,this.mapKeyConverter=K?.mapKeyConverter??mapKeyConverter}clone(){return new Decoder({extensionCodec:this.extensionCodec,context:this.context,useBigInt64:this.useBigInt64,rawStrings:this.rawStrings,maxStrLength:this.maxStrLength,maxBinLength:this.maxBinLength,maxArrayLength:this.maxArrayLength,maxMapLength:this.maxMapLength,maxExtLength:this.maxExtLength,keyDecoder:this.keyDecoder})}reinitializeState(){this.totalPos=0,this.headByte=HEAD_BYTE_REQUIRED,this.stack.reset()}setBuffer(K){const me=ensureUint8Array(K);this.bytes=me,this.view=new DataView(me.buffer,me.byteOffset,me.byteLength),this.pos=0}appendBuffer(K){if(this.headByte===HEAD_BYTE_REQUIRED&&!this.hasRemaining(1))this.setBuffer(K);else{const me=this.bytes.subarray(this.pos),ge=ensureUint8Array(K),xe=new Uint8Array(me.length+ge.length);xe.set(me),xe.set(ge,me.length),this.setBuffer(xe)}}hasRemaining(K){return this.view.byteLength-this.pos>=K}createExtraByteError(K){const{view:me,pos:ge}=this;return new RangeError(`Extra ${me.byteLength-ge} of ${me.byteLength} byte(s) found at buffer[${K}]`)}decode(K){if(this.entered)return this.clone().decode(K);try{this.entered=!0,this.reinitializeState(),this.setBuffer(K);const me=this.doDecodeSync();if(this.hasRemaining(1))throw this.createExtraByteError(this.pos);return me}finally{this.entered=!1}}*decodeMulti(K){if(this.entered){yield*this.clone().decodeMulti(K);return}try{for(this.entered=!0,this.reinitializeState(),this.setBuffer(K);this.hasRemaining(1);)yield this.doDecodeSync()}finally{this.entered=!1}}async decodeAsync(K){if(this.entered)return this.clone().decodeAsync(K);try{this.entered=!0;let me=!1,ge;for await(const _e of K){if(me)throw this.entered=!1,this.createExtraByteError(this.totalPos);this.appendBuffer(_e);try{ge=this.doDecodeSync(),me=!0}catch(Ee){if(!(Ee instanceof RangeError))throw Ee}this.totalPos+=this.pos}if(me){if(this.hasRemaining(1))throw this.createExtraByteError(this.totalPos);return ge}const{headByte:xe,pos:ye,totalPos:ve}=this;throw new RangeError(`Insufficient data in parsing ${prettyByte(xe)} at ${ve} (${ye} in the current buffer)`)}finally{this.entered=!1}}decodeArrayStream(K){return this.decodeMultiAsync(K,!0)}decodeStream(K){return this.decodeMultiAsync(K,!1)}async*decodeMultiAsync(K,me){if(this.entered){yield*this.clone().decodeMultiAsync(K,me);return}try{this.entered=!0;let ge=me,xe=-1;for await(const ye of K){if(me&&xe===0)throw this.createExtraByteError(this.totalPos);this.appendBuffer(ye),ge&&(xe=this.readArraySize(),ge=!1,this.complete());try{for(;yield this.doDecodeSync(),--xe!==0;);}catch(ve){if(!(ve instanceof RangeError))throw ve}this.totalPos+=this.pos}}finally{this.entered=!1}}doDecodeSync(){e:for(;;){const K=this.readHeadByte();let me;if(K>=224)me=K-256;else if(K<192)if(K<128)me=K;else if(K<144){const xe=K-128;if(xe!==0){this.pushMapState(xe),this.complete();continue e}else me={}}else if(K<160){const xe=K-144;if(xe!==0){this.pushArrayState(xe),this.complete();continue e}else me=[]}else{const xe=K-160;me=this.decodeString(xe,0)}else if(K===192)me=null;else if(K===194)me=!1;else if(K===195)me=!0;else if(K===202)me=this.readF32();else if(K===203)me=this.readF64();else if(K===204)me=this.readU8();else if(K===205)me=this.readU16();else if(K===206)me=this.readU32();else if(K===207)this.useBigInt64?me=this.readU64AsBigInt():me=this.readU64();else if(K===208)me=this.readI8();else if(K===209)me=this.readI16();else if(K===210)me=this.readI32();else if(K===211)this.useBigInt64?me=this.readI64AsBigInt():me=this.readI64();else if(K===217){const xe=this.lookU8();me=this.decodeString(xe,1)}else if(K===218){const xe=this.lookU16();me=this.decodeString(xe,2)}else if(K===219){const xe=this.lookU32();me=this.decodeString(xe,4)}else if(K===220){const xe=this.readU16();if(xe!==0){this.pushArrayState(xe),this.complete();continue e}else me=[]}else if(K===221){const xe=this.readU32();if(xe!==0){this.pushArrayState(xe),this.complete();continue e}else me=[]}else if(K===222){const xe=this.readU16();if(xe!==0){this.pushMapState(xe),this.complete();continue e}else me={}}else if(K===223){const xe=this.readU32();if(xe!==0){this.pushMapState(xe),this.complete();continue e}else me={}}else if(K===196){const xe=this.lookU8();me=this.decodeBinary(xe,1)}else if(K===197){const xe=this.lookU16();me=this.decodeBinary(xe,2)}else if(K===198){const xe=this.lookU32();me=this.decodeBinary(xe,4)}else if(K===212)me=this.decodeExtension(1,0);else if(K===213)me=this.decodeExtension(2,0);else if(K===214)me=this.decodeExtension(4,0);else if(K===215)me=this.decodeExtension(8,0);else if(K===216)me=this.decodeExtension(16,0);else if(K===199){const xe=this.lookU8();me=this.decodeExtension(xe,1)}else if(K===200){const xe=this.lookU16();me=this.decodeExtension(xe,2)}else if(K===201){const xe=this.lookU32();me=this.decodeExtension(xe,4)}else throw new DecodeError(`Unrecognized type byte: ${prettyByte(K)}`);this.complete();const ge=this.stack;for(;ge.length>0;){const xe=ge.top();if(xe.type===STATE_ARRAY)if(xe.array[xe.position]=me,xe.position++,xe.position===xe.size)me=xe.array,ge.release(xe);else continue e;else if(xe.type===STATE_MAP_KEY){if(me==="__proto__")throw new DecodeError("The key __proto__ is not allowed");xe.key=this.mapKeyConverter(me),xe.type=STATE_MAP_VALUE;continue e}else if(xe.map[xe.key]=me,xe.readCount++,xe.readCount===xe.size)me=xe.map,ge.release(xe);else{xe.key=null,xe.type=STATE_MAP_KEY;continue e}}return me}}readHeadByte(){return this.headByte===HEAD_BYTE_REQUIRED&&(this.headByte=this.readU8()),this.headByte}complete(){this.headByte=HEAD_BYTE_REQUIRED}readArraySize(){const K=this.readHeadByte();switch(K){case 220:return this.readU16();case 221:return this.readU32();default:{if(K<160)return K-144;throw new DecodeError(`Unrecognized array type byte: ${prettyByte(K)}`)}}}pushMapState(K){if(K>this.maxMapLength)throw new DecodeError(`Max length exceeded: map length (${K}) > maxMapLengthLength (${this.maxMapLength})`);this.stack.pushMapState(K)}pushArrayState(K){if(K>this.maxArrayLength)throw new DecodeError(`Max length exceeded: array length (${K}) > maxArrayLength (${this.maxArrayLength})`);this.stack.pushArrayState(K)}decodeString(K,me){return!this.rawStrings||this.stateIsMapKey()?this.decodeUtf8String(K,me):this.decodeBinary(K,me)}decodeUtf8String(K,me){if(K>this.maxStrLength)throw new DecodeError(`Max length exceeded: UTF-8 byte length (${K}) > maxStrLength (${this.maxStrLength})`);if(this.bytes.byteLength<this.pos+me+K)throw MORE_DATA;const ge=this.pos+me;let xe;return this.stateIsMapKey()&&this.keyDecoder?.canBeCached(K)?xe=this.keyDecoder.decode(this.bytes,ge,K):xe=utf8Decode(this.bytes,ge,K),this.pos+=me+K,xe}stateIsMapKey(){return this.stack.length>0?this.stack.top().type===STATE_MAP_KEY:!1}decodeBinary(K,me){if(K>this.maxBinLength)throw new DecodeError(`Max length exceeded: bin length (${K}) > maxBinLength (${this.maxBinLength})`);if(!this.hasRemaining(K+me))throw MORE_DATA;const ge=this.pos+me,xe=this.bytes.subarray(ge,ge+K);return this.pos+=me+K,xe}decodeExtension(K,me){if(K>this.maxExtLength)throw new DecodeError(`Max length exceeded: ext length (${K}) > maxExtLength (${this.maxExtLength})`);const ge=this.view.getInt8(this.pos+me),xe=this.decodeBinary(K,me+1);return this.extensionCodec.decode(xe,ge,this.context)}lookU8(){return this.view.getUint8(this.pos)}lookU16(){return this.view.getUint16(this.pos)}lookU32(){return this.view.getUint32(this.pos)}readU8(){const K=this.view.getUint8(this.pos);return this.pos++,K}readI8(){const K=this.view.getInt8(this.pos);return this.pos++,K}readU16(){const K=this.view.getUint16(this.pos);return this.pos+=2,K}readI16(){const K=this.view.getInt16(this.pos);return this.pos+=2,K}readU32(){const K=this.view.getUint32(this.pos);return this.pos+=4,K}readI32(){const K=this.view.getInt32(this.pos);return this.pos+=4,K}readU64(){const K=getUint64(this.view,this.pos);return this.pos+=8,K}readI64(){const K=getInt64(this.view,this.pos);return this.pos+=8,K}readU64AsBigInt(){const K=this.view.getBigUint64(this.pos);return this.pos+=8,K}readI64AsBigInt(){const K=this.view.getBigInt64(this.pos);return this.pos+=8,K}readF32(){const K=this.view.getFloat32(this.pos);return this.pos+=4,K}readF64(){const K=this.view.getFloat64(this.pos);return this.pos+=8,K}}function decode(fe,K){return new Decoder(K).decode(fe)}function isAsyncIterable(fe){return fe[Symbol.asyncIterator]!=null}async function*asyncIterableFromStream(fe){const K=fe.getReader();try{for(;;){const{done:me,value:ge}=await K.read();if(me)return;yield ge}}finally{K.releaseLock()}}function ensureAsyncIterable(fe){return isAsyncIterable(fe)?fe:asyncIterableFromStream(fe)}async function decodeAsync(fe,K){const me=ensureAsyncIterable(fe);return new Decoder(K).decodeAsync(me)}var ch2={},wk=function(fe,K,me,ge,xe){var ye=new Worker(ch2[K]||(ch2[K]=URL.createObjectURL(new Blob([fe+';addEventListener("error",function(e){e=e.error;postMessage({$e$:[e.message,e.code,e.stack]})})'],{type:"text/javascript"}))));return ye.onmessage=function(ve){var _e=ve.data,Ee=_e.$e$;if(Ee){var be=new Error(Ee[0]);be.code=Ee[1],be.stack=Ee[2],xe(be,null)}else xe(null,_e)},ye.postMessage(me,ge),ye},u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(fe,K){for(var me=new u16(31),ge=0;ge<31;++ge)me[ge]=K+=1<<fe[ge-1];for(var xe=new i32(me[30]),ge=1;ge<30;++ge)for(var ye=me[ge];ye<me[ge+1];++ye)xe[ye]=ye-me[ge]<<5|ge;return{b:me,r:xe}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,rev=new u16(32768);for(var i=0;i<32768;++i){var x=(i&43690)>>1|(i&21845)<<1;x=(x&52428)>>2|(x&13107)<<2,x=(x&61680)>>4|(x&3855)<<4,rev[i]=((x&65280)>>8|(x&255)<<8)>>1}var hMap=function(fe,K,me){for(var ge=fe.length,xe=0,ye=new u16(K);xe<ge;++xe)fe[xe]&&++ye[fe[xe]-1];var ve=new u16(K);for(xe=1;xe<K;++xe)ve[xe]=ve[xe-1]+ye[xe-1]<<1;var _e;if(me){_e=new u16(1<<K);var Ee=15-K;for(xe=0;xe<ge;++xe)if(fe[xe])for(var be=xe<<4|fe[xe],Ae=K-fe[xe],Se=ve[fe[xe]-1]++<<Ae,Ce=Se|(1<<Ae)-1;Se<=Ce;++Se)_e[rev[Se]>>Ee]=be}else for(_e=new u16(ge),xe=0;xe<ge;++xe)fe[xe]&&(_e[xe]=rev[ve[fe[xe]-1]++]>>15-fe[xe]);return _e},flt=new u8(288);for(var i=0;i<144;++i)flt[i]=8;for(var i=144;i<256;++i)flt[i]=9;for(var i=256;i<280;++i)flt[i]=7;for(var i=280;i<288;++i)flt[i]=8;var fdt=new u8(32);for(var i=0;i<32;++i)fdt[i]=5;var flrm=hMap(flt,9,1),fdrm=hMap(fdt,5,1),max=function(fe){for(var K=fe[0],me=1;me<fe.length;++me)fe[me]>K&&(K=fe[me]);return K},bits=function(fe,K,me){var ge=K/8|0;return(fe[ge]|fe[ge+1]<<8)>>(K&7)&me},bits16=function(fe,K){var me=K/8|0;return(fe[me]|fe[me+1]<<8|fe[me+2]<<16)>>(K&7)},shft=function(fe){return(fe+7)/8|0},slc=function(fe,K,me){return(K==null||K<0)&&(K=0),(me==null||me>fe.length)&&(me=fe.length),new u8(fe.subarray(K,me))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(fe,K,me){var ge=new Error(K||ec[fe]);if(ge.code=fe,Error.captureStackTrace&&Error.captureStackTrace(ge,err),!me)throw ge;return ge},inflt=function(fe,K,me,ge){var xe=fe.length,ye=ge?ge.length:0;if(!xe||K.f&&!K.l)return me||new u8(0);var ve=!me,_e=ve||K.i!=2,Ee=K.i;ve&&(me=new u8(xe*3));var be=function(kn){var bn=me.length;if(kn>bn){var Mn=new u8(Math.max(bn*2,kn));Mn.set(me),me=Mn}},Ae=K.f||0,Se=K.p||0,Ce=K.b||0,Te=K.l,Re=K.d,De=K.m,Ie=K.n,Be=xe*8;do{if(!Te){Ae=bits(fe,Se,1);var Le=bits(fe,Se+1,3);if(Se+=3,Le)if(Le==1)Te=flrm,Re=fdrm,De=9,Ie=5;else if(Le==2){var Ne=bits(fe,Se,31)+257,He=bits(fe,Se+10,15)+4,ze=Ne+bits(fe,Se+5,31)+1;Se+=14;for(var je=new u8(ze),Ge=new u8(19),Xe=0;Xe<He;++Xe)Ge[clim[Xe]]=bits(fe,Se+Xe*3,7);Se+=He*3;for(var qe=max(Ge),Qe=(1<<qe)-1,nt=hMap(Ge,qe,1),Xe=0;Xe<ze;){var Nt=nt[bits(fe,Se,Qe)];Se+=Nt&15;var Oe=Nt>>4;if(Oe<16)je[Xe++]=Oe;else{var Ye=0,at=0;for(Oe==16?(at=3+bits(fe,Se,3),Se+=2,Ye=je[Xe-1]):Oe==17?(at=3+bits(fe,Se,7),Se+=3):Oe==18&&(at=11+bits(fe,Se,127),Se+=7);at--;)je[Xe++]=Ye}}var rt=je.subarray(0,Ne),Ft=je.subarray(Ne);De=max(rt),Ie=max(Ft),Te=hMap(rt,De,1),Re=hMap(Ft,Ie,1)}else err(1);else{var Oe=shft(Se)+4,Fe=fe[Oe-4]|fe[Oe-3]<<8,Ue=Oe+Fe;if(Ue>xe){Ee&&err(0);break}_e&&be(Ce+Fe),me.set(fe.subarray(Oe,Ue),Ce),K.b=Ce+=Fe,K.p=Se=Ue*8,K.f=Ae;continue}if(Se>Be){Ee&&err(0);break}}_e&&be(Ce+131072);for(var Je=(1<<De)-1,Wt=(1<<Ie)-1,Kt=Se;;Kt=Se){var Ye=Te[bits16(fe,Se)&Je],Pt=Ye>>4;if(Se+=Ye&15,Se>Be){Ee&&err(0);break}if(Ye||err(2),Pt<256)me[Ce++]=Pt;else if(Pt==256){Kt=Se,Te=null;break}else{var Yt=Pt-254;if(Pt>264){var Xe=Pt-257,Gt=fleb[Xe];Yt=bits(fe,Se,(1<<Gt)-1)+fl[Xe],Se+=Gt}var an=Re[bits16(fe,Se)&Wt],pn=an>>4;an||err(3),Se+=an&15;var Ft=fd[pn];if(pn>3){var Gt=fdeb[pn];Ft+=bits16(fe,Se)&(1<<Gt)-1,Se+=Gt}if(Se>Be){Ee&&err(0);break}_e&&be(Ce+131072);var En=Ce+Yt;if(Ce<Ft){var $n=ye-Ft,Un=Math.min(Ft,En);for($n+Ce<0&&err(3);Ce<Un;++Ce)me[Ce]=ge[$n+Ce]}for(;Ce<En;++Ce)me[Ce]=me[Ce-Ft]}}K.l=Te,K.p=Kt,K.b=Ce,K.f=Ae,Te&&(Ae=1,K.m=De,K.d=Re,K.n=Ie)}while(!Ae);return Ce!=me.length&&ve?slc(me,0,Ce):me.subarray(0,Ce)},et=new u8(0),mrg=function(fe,K){var me={};for(var ge in fe)me[ge]=fe[ge];for(var ge in K)me[ge]=K[ge];return me},wcln=function(fe,K,me){for(var ge=fe(),xe=fe.toString(),ye=xe.slice(xe.indexOf("[")+1,xe.lastIndexOf("]")).replace(/\s+/g,"").split(","),ve=0;ve<ge.length;++ve){var _e=ge[ve],Ee=ye[ve];if(typeof _e=="function"){K+=";"+Ee+"=";var be=_e.toString();if(_e.prototype)if(be.indexOf("[native code]")!=-1){var Ae=be.indexOf(" ",8)+1;K+=be.slice(Ae,be.indexOf("(",Ae))}else{K+=be;for(var Se in _e.prototype)K+=";"+Ee+".prototype."+Se+"="+_e.prototype[Se].toString()}else K+=be}else me[Ee]=_e}return K},ch=[],cbfs=function(fe){var K=[];for(var me in fe)fe[me].buffer&&K.push((fe[me]=new fe[me].constructor(fe[me])).buffer);return K},wrkr=function(fe,K,me,ge){if(!ch[me]){for(var xe="",ye={},ve=fe.length-1,_e=0;_e<ve;++_e)xe=wcln(fe[_e],xe,ye);ch[me]={c:wcln(fe[ve],xe,ye),e:ye}}var Ee=mrg({},ch[me].e);return wk(ch[me].c+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+K.toString()+"}",me,Ee,cbfs(Ee),ge)},bInflt=function(){return[u8,u16,i32,fleb,fdeb,clim,fl,fd,flrm,fdrm,rev,ec,hMap,max,bits,bits16,shft,slc,err,inflt,inflateSync,pbf,gopt]},guze=function(){return[gzs,gzl]},zule=function(){return[zls]},pbf=function(fe){return postMessage(fe,[fe.buffer])},gopt=function(fe){return fe&&{out:fe.size&&new u8(fe.size),dictionary:fe.dictionary}},cbify=function(fe,K,me,ge,xe,ye){var ve=wrkr(me,ge,xe,function(_e,Ee){ve.terminate(),ye(_e,Ee)});return ve.postMessage([fe,K],K.consume?[fe.buffer]:[]),function(){ve.terminate()}},gzs=function(fe){(fe[0]!=31||fe[1]!=139||fe[2]!=8)&&err(6,"invalid gzip data");var K=fe[3],me=10;K&4&&(me+=(fe[10]|fe[11]<<8)+2);for(var ge=(K>>3&1)+(K>>4&1);ge>0;ge-=!fe[me++]);return me+(K&2)},gzl=function(fe){var K=fe.length;return(fe[K-4]|fe[K-3]<<8|fe[K-2]<<16|fe[K-1]<<24)>>>0},zls=function(fe,K){return((fe[0]&15)!=8||fe[0]>>4>7||(fe[0]<<8|fe[1])%31)&&err(6,"invalid zlib data"),(fe[1]>>5&1)==+!K&&err(6,"invalid zlib data: "+(fe[1]&32?"need":"unexpected")+" dictionary"),(fe[1]>>3&4)+2};function inflate(fe,K,me){return me||(me=K,K={}),typeof me!="function"&&err(7),cbify(fe,K,[bInflt],function(ge){return pbf(inflateSync(ge.data[0],gopt(ge.data[1])))},1,me)}function inflateSync(fe,K){return inflt(fe,{i:2},K&&K.out,K&&K.dictionary)}function gunzip(fe,K,me){return me||(me=K,K={}),typeof me!="function"&&err(7),cbify(fe,K,[bInflt,guze,function(){return[gunzipSync]}],function(ge){return pbf(gunzipSync(ge.data[0],ge.data[1]))},3,me)}function gunzipSync(fe,K){var me=gzs(fe);return me+8>fe.length&&err(6,"invalid gzip data"),inflt(fe.subarray(me,-8),{i:2},K&&K.out||new u8(gzl(fe)),K&&K.dictionary)}function unzlib(fe,K,me){return me||(me=K,K={}),typeof me!="function"&&err(7),cbify(fe,K,[bInflt,zule,function(){return[unzlibSync]}],function(ge){return pbf(unzlibSync(ge.data[0],gopt(ge.data[1])))},5,me)}function unzlibSync(fe,K){return inflt(fe.subarray(zls(fe,K&&K.dictionary),-4),{i:2},K&&K.out,K&&K.dictionary)}function decompress(fe,K,me){return me||(me=K,K={}),typeof me!="function"&&err(7),fe[0]==31&&fe[1]==139&&fe[2]==8?gunzip(fe,K,me):(fe[0]&15)!=8||fe[0]>>4>7||(fe[0]<<8|fe[1])%31?inflate(fe,K,me):unzlib(fe,K,me)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et,{stream:!0}),tds=1}catch(fe){}async function deserializeGzippedMsgpackFile(fe,K){const me=await fetch(fe);if(!me.ok)throw new Error(`Failed to fetch the file: ${me.statusText}`);return new Promise(ge=>{const xe=parseInt(me.headers.get("Content-Length"));if(typeof DecompressionStream>"u")console.log("DecompressionStream is unavailable. Using fallback."),K({downloaded:.1*xe,total:xe}),me.arrayBuffer().then(ye=>{K({downloaded:.8*xe,total:xe}),decompress(new Uint8Array(ye),(ve,_e)=>{K({downloaded:1*xe,total:xe}),ge(decode(_e))})});else{let ye=0;const ve=new TransformStream({transform(_e,Ee){ye+=_e.length,K({downloaded:ye,total:xe}),Ee.enqueue(_e)}});decodeAsync(me.body.pipeThrough(ve).pipeThrough(new DecompressionStream("gzip"))).then(_e=>ge(_e))}})}function PlaybackFromFile({fileUrl:fe}){const K=reactExports.useContext(ViewerContext),me=K.messageQueueRef,ge=useMantineTheme(),xe=document.documentElement.getAttribute("data-mantine-color-scheme")==="dark"||ge.colorScheme==="dark",[,ye]=reactExports.useState({downloaded:0,total:0}),[ve,_e]=reactExports.useState("1x"),[Ee,be]=reactExports.useState(!1),[Ae,Se]=reactExports.useState(null),[Ce,Te]=reactExports.useState(null);function Re(){const Fe=K.nodeAttributesFromName.current;Object.keys(Fe).forEach(Ue=>{if(Ue==="")return;const Ne=K.useSceneTree.getState().nodeFromName[Ue]?.message;Ne!==void 0&&(Ne.type!=="FrameMessage"||Ne.props.show_axes)&&(Fe[Ue].visibility=!1),Fe[Ue].wxyz=[1,0,0,0],Fe[Ue].position=[0,0,0]})}const[De,Ie]=reactExports.useState(0);reactExports.useEffect(()=>{Te(null),Se(null),deserializeGzippedMsgpackFile(fe,ye).then(Fe=>{console.log("File loaded! Saved with Viser version:",Fe.viserVersion),Se(Fe)}).catch(Fe=>{console.error("Failed to load or process file:",Fe),Te("Failed to load 3D scene")})},[fe]);const Be=reactExports.useRef({currentTime:0,currentIndex:0}),Le=reactExports.useCallback(()=>{if(Ae===null)return;const Fe=Be.current;for(Fe.currentIndex==0&&Re();Fe.currentIndex<Ae.messages.length&&Ae.messages[Fe.currentIndex][0]<=Fe.currentTime;Fe.currentIndex++){const Ue=Ae.messages[Fe.currentIndex][1];me.current.push(Ue)}Fe.currentTime>=Ae.durationSeconds&&(Fe.currentIndex=0,Fe.currentTime=Ae.messages[0][0]),Ie(Fe.currentTime)},[Ae,me]);reactExports.useEffect(()=>{const Fe=parseFloat(ve);if(Ae!==null&&!Ee){let Ue=Date.now();const Ne=setInterval(()=>{const He=Date.now();Be.current.currentTime+=(He-Ue)/1e3*Fe,Ue=He,Le(),Be.current.currentIndex===Ae.messages.length&&Ae.durationSeconds===0&&clearInterval(Ne)},1e3/120);return()=>clearInterval(Ne)}},[Le,Ae,Ee,ve,me,Ie]),reactExports.useEffect(()=>{function Fe(Ue){Ue.code==="Space"&&be(!Ee)}return window.addEventListener("keydown",Fe),()=>{window.removeEventListener("keydown",Fe)}},[Ee]);const Oe=reactExports.useCallback(Fe=>{Ae!==null&&(Fe<Be.current.currentTime&&(Re(),Be.current.currentIndex=0),Be.current.currentTime=Fe,Ie(Fe),be(!0),Le())},[Ae,Le]);if(Ae===null){const Fe={position:"fixed",top:0,left:0,width:"100%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:xe?ge.colors.dark[7]:ge.colors.gray[1],zIndex:5},Ue={width:"48px",height:"48px",border:`4px solid ${ge.fn.rgba(ge.colors.indigo[6],.2)}`,borderRadius:"50%",borderTopColor:ge.colors.indigo[6],animation:"spin 1s ease-in-out infinite",marginBottom:"16px"},Ne={fontFamily:"'Lexend', sans-serif",fontSize:"1.25rem",color:xe?ge.colors.dark[0]:ge.colors.dark[9],animation:"pulse 2s ease-in-out infinite"},He={fontFamily:"'Lexend', sans-serif",fontSize:"1.25rem",color:ge.colors.red[6],textAlign:"center",maxWidth:"80%"};return jsxRuntimeExports.jsxs(Box,{style:Fe,children:[Ce?jsxRuntimeExports.jsx(Text,{style:He,children:Ce}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{style:Ue}),jsxRuntimeExports.jsx(Text,{style:Ne,children:"Loading 3D scene..."})]}),jsxRuntimeExports.jsx("style",{children:`
            @keyframes spin {
              to { transform: rotate(360deg); }
            }
            @keyframes pulse {
              0% { opacity: 0.6; }
              50% { opacity: 1; }
              100% { opacity: 0.6; }
            }
          `})]})}return jsxRuntimeExports.jsxs(Paper,{radius:"xs",shadow:"0.1em 0 1em 0 rgba(0,0,0,0.1)",style:{position:"fixed",bottom:"1em",left:"50%",transform:"translateX(-50%)",width:"25em",maxWidth:"95%",zIndex:1,padding:"0.5em",display:Ae.durationSeconds===0?"none":"flex",alignItems:"center",justifyContent:"space-between",gap:"0.375em"},children:[jsxRuntimeExports.jsx(ActionIcon,{size:"md",variant:"subtle",onClick:()=>be(!Ee),children:Ee?jsxRuntimeExports.jsx(IconPlayerPlayFilled,{height:"1.125em",width:"1.125em"}):jsxRuntimeExports.jsx(IconPlayerPauseFilled,{height:"1.125em",width:"1.125em"})}),jsxRuntimeExports.jsx(NumberInput,{size:"xs",hideControls:!0,value:De.toFixed(1),step:.01,styles:{wrapper:{width:"3.1em"},input:{padding:"0.2em",fontFamily:ge.fontFamilyMonospace,textAlign:"center"}},onChange:Fe=>Oe(typeof Fe=="number"?Fe:parseFloat(Fe))}),jsxRuntimeExports.jsx(Slider,{thumbSize:0,radius:"xs",step:1e-4,style:{flexGrow:1},min:0,max:Ae.durationSeconds,value:De,onChange:Oe,styles:{thumb:{display:"none"}}}),jsxRuntimeExports.jsx(Tooltip,{zIndex:10,label:"Playback speed",withinPortal:!0,children:jsxRuntimeExports.jsx(Select,{size:"xs",value:ve,onChange:Fe=>Fe===null?null:_e(Fe),radius:"xs",data:["0.5x","1x","2x","4x","8x"],styles:{wrapper:{width:"3.25em"}},comboboxProps:{zIndex:5,width:"5.25em"}})})]})}var __spreadArray=function(fe,K,me){if(me||arguments.length===2)for(var ge=0,xe=K.length,ye;ge<xe;ge++)(ye||!(ge in K))&&(ye||(ye=Array.prototype.slice.call(K,0,ge)),ye[ge]=K[ge]);return fe.concat(ye||Array.prototype.slice.call(K))},BrowserInfo=function(){function fe(K,me,ge){this.name=K,this.version=me,this.os=ge,this.type="browser"}return fe}(),NodeInfo=function(){function fe(K){this.version=K,this.type="node",this.name="node",this.os=process.platform}return fe}(),SearchBotDeviceInfo=function(){function fe(K,me,ge,xe){this.name=K,this.version=me,this.os=ge,this.bot=xe,this.type="bot-device"}return fe}(),BotInfo=function(){function fe(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return fe}(),ReactNativeInfo=function(){function fe(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return fe}(),SEARCHBOX_UA_REGEX=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,SEARCHBOT_OS_REGEX=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,REQUIRED_VERSION_PARTS=3,userAgentRules=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",SEARCHBOX_UA_REGEX]],operatingSystemRules=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function detect(fe){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"?new ReactNativeInfo:typeof navigator<"u"?parseUserAgent(navigator.userAgent):getNodeVersion()}function matchUserAgent(fe){return fe!==""&&userAgentRules.reduce(function(K,me){var ge=me[0],xe=me[1];if(K)return K;var ye=xe.exec(fe);return!!ye&&[ge,ye]},!1)}function parseUserAgent(fe){var K=matchUserAgent(fe);if(!K)return null;var me=K[0],ge=K[1];if(me==="searchbot")return new BotInfo;var xe=ge[1]&&ge[1].split(".").join("_").split("_").slice(0,3);xe?xe.length<REQUIRED_VERSION_PARTS&&(xe=__spreadArray(__spreadArray([],xe,!0),createVersionParts(REQUIRED_VERSION_PARTS-xe.length),!0)):xe=[];var ye=xe.join("."),ve=detectOS(fe),_e=SEARCHBOT_OS_REGEX.exec(fe);return _e&&_e[1]?new SearchBotDeviceInfo(me,ye,ve,_e[1]):new BrowserInfo(me,ye,ve)}function detectOS(fe){for(var K=0,me=operatingSystemRules.length;K<me;K++){var ge=operatingSystemRules[K],xe=ge[0],ye=ge[1],ve=ye.exec(fe);if(ve)return xe}return null}function getNodeVersion(){var fe=typeof process<"u"&&process.version;return fe?new NodeInfo(process.version.slice(1)):null}function createVersionParts(fe){for(var K=[],me=0;me<fe;me++)K.push("0");return K}function BrowserWarning(){return reactExports.useEffect(()=>{const fe=detect();if(fe===null||fe.version===null)console.log("Failed to detect browser"),notifications.show({title:"Could not detect browser version",message:"Your browser version could not be detected. It may not be supported.",autoClose:!1,color:"red"});else{const K=parseFloat(fe.version);console.log(`Detected ${fe.name} version ${K}`),(fe.name==="chrome"&&K<91||fe.name==="edge"&&K<91||fe.name==="firefox"&&K<89||fe.name==="opera"&&K<77||fe.name==="safari"&&K<16.4)&&notifications.show({title:"Unsuppported browser",message:`Your browser (${fe.name.slice(0,1).toUpperCase()+fe.name.slice(1)}/${fe.version}) is outdated, which may cause problems. Consider updating.`,autoClose:!1,color:"red"})}}),null}function MacWindowWrapper({children:fe,title:K,width:me,height:ge}){return jsxRuntimeExports.jsxs("div",{style:{width:`${me}px`,height:`${ge}px`,borderRadius:"10px",overflow:"hidden",border:"1px solid rgba(0,0,0,0.2)",backgroundColor:"white",transform:"translateX(-50%) translateY(-50%)",top:"50%",left:"50%",position:"absolute"},children:[jsxRuntimeExports.jsxs("div",{style:{height:"36px",backgroundColor:"#f6f6f6",borderBottom:"1px solid rgba(0,0,0,0.075)",display:"flex",alignItems:"center",paddingLeft:"12px",gap:"8px"},children:[jsxRuntimeExports.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#ff5f57"}}),jsxRuntimeExports.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#febc2e"}}),jsxRuntimeExports.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:"#28c840"}}),jsxRuntimeExports.jsx("div",{style:{position:"absolute",left:"50%",transform:"translateX(-50%)",color:"#000",opacity:.4,fontSize:"14px",fontFamily:"-apple-system, BlinkMacSystemFont, sans-serif",fontWeight:500},children:K})]}),jsxRuntimeExports.jsx("div",{style:{height:"calc(100% - 36px)"},children:fe})]})}const VISER_VERSION="0.2.23";function ViewerRoot(){function fe(){let be=window.location.href;return be=be.replace("http://","ws://"),be=be.replace("https://","wss://"),be=be.split("?")[0],be.endsWith("/")&&(be=be.slice(0,-1)),be}const K=new URLSearchParams(window.location.search).getAll(searchParamKey),me=K.length>=1?K[0]:fe(),ge=new URLSearchParams(window.location.search),xe=ge.get("playbackPath"),ye=ge.get("darkMode")!==null,ve=ge.get("showStats")!==null,_e=React$4.useRef({}),Ee={messageSource:xe===null?"websocket":"file_playback",useSceneTree:useSceneTreeState(_e),useGui:useGuiState(me),sendMessageRef:React$4.useRef(xe==null?be=>console.log(`Tried to send ${be.type} but websocket is not connected!`):()=>null),canvasRef:React$4.useRef(null),sceneRef:React$4.useRef(null),cameraRef:React$4.useRef(null),backgroundMaterialRef:React$4.useRef(null),cameraControlRef:React$4.useRef(null),sendCameraRef:React$4.useRef(null),resetCameraViewRef:React$4.useRef(null),nodeAttributesFromName:React$4.useRef({"":{wxyz:(()=>{const be=new Quaternion().setFromEuler(new Euler(Math.PI/2,Math.PI,-Math.PI/2));return[be.w,be.x,be.y,be.z]})()}}),nodeRefFromName:_e,messageQueueRef:React$4.useRef([]),getRenderRequestState:React$4.useRef("ready"),getRenderRequest:React$4.useRef(null),scenePointerInfo:React$4.useRef({enabled:!1,dragStart:[0,0],dragEnd:[0,0],isDragging:!1}),canvas2dRef:React$4.useRef(null),skinnedMeshState:React$4.useRef({}),hoveredElementsCount:React$4.useRef(0)};return ye&&(Ee.useGui.getState().theme.dark_mode=ye),jsxRuntimeExports.jsx(ViewerContext.Provider,{value:Ee,children:jsxRuntimeExports.jsxs(ViewerContents,{children:[Ee.messageSource==="websocket"?jsxRuntimeExports.jsx(WebsocketMessageProducer,{}):null,Ee.messageSource==="file_playback"?jsxRuntimeExports.jsx(PlaybackFromFile,{fileUrl:xe}):null,ve?jsxRuntimeExports.jsx(Stats,{className:"stats-panel"}):null]})})}function ViewerContents({children:fe}){const K=React$4.useContext(ViewerContext),me=K.useGui(ye=>ye.theme.dark_mode),ge=K.useGui(ye=>ye.theme.colors),xe=K.useGui(ye=>ye.theme.control_layout);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(ColorSchemeScript,{forceColorScheme:me?"dark":"light"}),jsxRuntimeExports.jsxs(MantineProvider,{theme:{...theme,...ge===null?{}:{colors:{custom:ge},primaryColor:"custom"}},forceColorScheme:me?"dark":"light",children:[fe,jsxRuntimeExports.jsx(Notifications,{position:"top-left",limit:10,containerWidth:"20em",withinPortal:!1,styles:{root:{boxShadow:"0.1em 0 1em 0 rgba(0,0,0,0.1) !important",position:"absolute",top:"1em",left:"1em",pointerEvents:"none"},notification:{pointerEvents:"all"}}}),jsxRuntimeExports.jsx(BrowserWarning,{}),jsxRuntimeExports.jsx(ViserModal,{}),jsxRuntimeExports.jsxs(Box,{style:{width:"100%",height:"100%",display:"flex",position:"relative",flexDirection:"column"},children:[jsxRuntimeExports.jsx(Titlebar,{}),jsxRuntimeExports.jsxs(Box,{style:{width:"100%",position:"relative",flexGrow:1,overflow:"hidden",display:"flex"},children:[jsxRuntimeExports.jsxs(Box,{style:ye=>({backgroundColor:me?ye.colors.dark[9]:"#fff",flexGrow:1,overflow:"hidden",height:"100%"}),children:[jsxRuntimeExports.jsx(Viewer2DCanvas,{}),jsxRuntimeExports.jsx(ViewerCanvas,{children:jsxRuntimeExports.jsx(FrameSynchronizedMessageHandler,{})}),jsxRuntimeExports.jsx(MiniControlPanel,{darkMode:me}),K.useGui(ye=>ye.theme.show_logo)&&K.messageSource=="websocket"?jsxRuntimeExports.jsx(ViserLogo,{}):null]}),K.messageSource=="websocket"?jsxRuntimeExports.jsx(ControlPanel,{control_layout:xe}):null]})]})]})]})}const DisableRender=()=>useFrame(()=>null,1e3);function ViewerCanvas({children:fe}){const K=React$4.useContext(ViewerContext),me=useThrottledMessageSender(20),ge=useMantineTheme(),xe=React$4.useMemo(()=>jsxRuntimeExports.jsx(SynchronizedCameraControls,{}),[]),{ref:ye,inView:ve}=useInView();return jsxRuntimeExports.jsx("div",{ref:ye,style:{position:"relative",zIndex:0,width:"100%",height:"100%"},children:jsxRuntimeExports.jsx(Canvas,{camera:{position:[-3,3,-3],near:.01,far:1e3},gl:{preserveDrawingBuffer:!0},style:{width:"100%",height:"100%"},ref:K.canvasRef,onPointerDown:_e=>{const Ee=K.scenePointerInfo.current;if(Ee.enabled===!1)return;const be=K.canvasRef.current.getBoundingClientRect();if(Ee.dragStart=[_e.clientX-be.left,_e.clientY-be.top],Ee.dragEnd=Ee.dragStart,ndcFromPointerXy(K,Ee.dragEnd)===null||Ee.isDragging)return;Ee.isDragging=!0,K.cameraControlRef.current.enabled=!1;const Ae=K.canvas2dRef.current.getContext("2d");Ae.clearRect(0,0,Ae.canvas.width,Ae.canvas.height)},onPointerMove:_e=>{const Ee=K.scenePointerInfo.current;if(Ee.enabled===!1||!Ee.isDragging)return;const be=K.canvasRef.current.getBoundingClientRect(),Ae=[_e.clientX-be.left,_e.clientY-be.top];if(ndcFromPointerXy(K,Ae)!==null&&(Ee.dragEnd=Ae,!(Math.abs(Ee.dragEnd[0]-Ee.dragStart[0])<=3&&Math.abs(Ee.dragEnd[1]-Ee.dragStart[1])<=3)&&Ee.enabled==="rect-select")){const Se=K.canvas2dRef.current.getContext("2d");Se.clearRect(0,0,Se.canvas.width,Se.canvas.height),Se.beginPath(),Se.fillStyle=ge.primaryColor,Se.strokeStyle="blue",Se.globalAlpha=.2,Se.fillRect(Ee.dragStart[0],Ee.dragStart[1],Ee.dragEnd[0]-Ee.dragStart[0],Ee.dragEnd[1]-Ee.dragStart[1]),Se.globalAlpha=1,Se.stroke()}},onPointerUp:()=>{const _e=K.scenePointerInfo.current;if(K.cameraControlRef.current.enabled=!0,_e.enabled===!1||!_e.isDragging)return;const Ee=K.canvas2dRef.current.getContext("2d");if(Ee.clearRect(0,0,Ee.canvas.width,Ee.canvas.height),_e.enabled==="click"){const be=new Raycaster,Ae=ndcFromPointerXy(K,_e.dragEnd);if(Ae===null)return;be.setFromCamera(Ae,K.cameraRef.current);const Se=rayToViserCoords(K,be.ray),Ce=opencvXyFromPointerXy(K,_e.dragEnd);me({type:"ScenePointerMessage",event_type:"click",ray_origin:[Se.origin.x,Se.origin.y,Se.origin.z],ray_direction:[Se.direction.x,Se.direction.y,Se.direction.z],screen_pos:[[Ce.x,Ce.y]]})}else if(_e.enabled==="rect-select"){const be=opencvXyFromPointerXy(K,_e.dragStart),Ae=opencvXyFromPointerXy(K,_e.dragEnd),Se=Math.min(be.x,Ae.x),Ce=Math.max(be.x,Ae.x),Te=Math.min(be.y,Ae.y),Re=Math.max(be.y,Ae.y);me({type:"ScenePointerMessage",event_type:"rect-select",ray_origin:null,ray_direction:null,screen_pos:[[Se,Te],[Ce,Re]]})}_e.isDragging=!1},shadows:!0,children:jsxRuntimeExports.jsxs(Bvh,{firstHitOnly:!0,children:[ve?null:jsxRuntimeExports.jsx(DisableRender,{}),jsxRuntimeExports.jsx(BackgroundImage,{}),jsxRuntimeExports.jsx(SceneContextSetter,{}),xe,jsxRuntimeExports.jsxs(SplatRenderContext,{children:[jsxRuntimeExports.jsx(AdaptiveDpr,{}),fe,jsxRuntimeExports.jsx(SceneNodeThreeObject,{name:"",parent:null})]}),jsxRuntimeExports.jsx(DefaultLights,{})]})})})}function DefaultLights(){const fe=React$4.useContext(ViewerContext),K=fe.useSceneTree(Se=>Se.enableDefaultLights),me=fe.useSceneTree(Se=>Se.enableDefaultLightsShadows),ge=fe.useSceneTree(Se=>Se.environmentMap),[xe,ye]=React$4.useState(fe.nodeAttributesFromName.current[""].wxyz);useFrame(()=>{const Se=fe.nodeAttributesFromName.current[""].wxyz;Se!==xe&&ye(Se)});const ve=new Quaternion(xe[1],xe[2],xe[3],xe[0]),_e=ve.clone().invert(),Ee=new Euler().setFromQuaternion(new Quaternion(ge.background_wxyz[1],ge.background_wxyz[2],ge.background_wxyz[3],ge.background_wxyz[0]).premultiply(ve).multiply(_e)),be=new Euler().setFromQuaternion(new Quaternion(ge.environment_wxyz[1],ge.environment_wxyz[2],ge.environment_wxyz[3],ge.environment_wxyz[0]).premultiply(ve).multiply(_e));let Ae;if(ge.hdri===null)Ae=null;else{const Se={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"};Ae=jsxRuntimeExports.jsx(Environment,{files:`hdri/${Se[ge.hdri]}`,background:ge.background,backgroundBlurriness:ge.background_blurriness,backgroundIntensity:ge.background_intensity,backgroundRotation:Ee,environmentIntensity:ge.environment_intensity,environmentRotation:be})}return K?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(CsmDirectionalLight,{fade:!0,lightIntensity:3,position:[-.2,1,-.2],cascades:3,color:16777215,maxFar:20,mode:"practical",shadowBias:-1e-4,castShadow:me}),jsxRuntimeExports.jsx(CsmDirectionalLight,{color:16777215,lightIntensity:.4,position:[0,-1,0],castShadow:!1}),Ae]}):Ae}function AdaptiveDpr(){const fe=useThree(K=>K.setDpr);return jsxRuntimeExports.jsx(PerformanceMonitor,{factor:1,step:.2,bounds:K=>{const me=Math.min(K*.75,85);return[Math.max(me*.5,38),me]},onChange:({factor:K,fps:me,refreshrate:ge})=>{const xe=window.devicePixelRatio*(.2+.8*K);console.log(`[Performance] Setting DPR to ${xe}; FPS=${me}/${ge}`),fe(xe)}})}function Viewer2DCanvas(){const fe=React$4.useContext(ViewerContext);return reactExports.useEffect(()=>{const K=new ResizeObserver(ge=>{const{width:xe,height:ye}=ge[0].contentRect;me.width=xe,me.height=ye}),me=fe.canvas2dRef.current;return K.observe(me),()=>K.disconnect()}),jsxRuntimeExports.jsx("canvas",{ref:fe.canvas2dRef,style:{position:"absolute",zIndex:1,width:"100%",height:"100%",pointerEvents:"none"}})}function BackgroundImage(){const fe=`
  varying vec2 vUv;

  void main() {
    vUv = uv;
    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }
  `.trim(),K=`
  #include <packing>
  precision highp float;
  precision highp int;

  varying vec2 vUv;
  uniform sampler2D colorMap;
  uniform sampler2D depthMap;
  uniform float cameraNear;
  uniform float cameraFar;
  uniform bool enabled;
  uniform bool hasDepth;

  float readDepth(sampler2D depthMap, vec2 coord) {
    vec4 rgbPacked = texture(depthMap, coord);

    // For the k-th channel, coefficients are calculated as: 255 * 1e-5 * 2^(8 * k).
    // Note that: [0, 255] channels are scaled to [0, 1], and we multiply by 1e5 on the server side.
    float depth = rgbPacked.r * 0.00255 + rgbPacked.g * 0.6528 + rgbPacked.b * 167.1168;
    return depth;
  }

  void main() {
    if (!enabled) {
      // discard the pixel if we're not enabled
      discard;
    }
    vec4 color = texture(colorMap, vUv);
    gl_FragColor = vec4(color.rgb, 1.0);

    float bufDepth;
    if(hasDepth){
      float depth = readDepth(depthMap, vUv);
      bufDepth = viewZToPerspectiveDepth(-depth, cameraNear, cameraFar);
    } else {
      // If no depth enabled, set depth to 1.0 (infinity) to treat it like a background image.
      bufDepth = 1.0;
    }
    gl_FragDepth = bufDepth;
  }`.trim(),me=new ShaderMaterial({fragmentShader:K,vertexShader:fe,uniforms:{enabled:{value:!1},depthMap:{value:null},colorMap:{value:null},cameraNear:{value:null},cameraFar:{value:null},hasDepth:{value:!1}}}),{backgroundMaterialRef:ge}=React$4.useContext(ViewerContext);ge.current=me;const xe=React$4.useRef(null);return useFrame(({camera:ye})=>{if(!(ye instanceof PerspectiveCamera)){console.error("Camera is not a perspective camera, cannot render background image");return}const ve=ye.getWorldDirection(new Vector3);xe.current.position.set(ye.position.x,ye.position.y,ye.position.z),xe.current.position.addScaledVector(ve,1),xe.current.quaternion.copy(ye.quaternion);const _e=ye.getFocalLength();xe.current.scale.set(ye.getFilmWidth()/_e,ye.getFilmHeight()/_e,1),me.uniforms.cameraNear.value=ye.near,me.uniforms.cameraFar.value=ye.far}),jsxRuntimeExports.jsx("mesh",{ref:xe,material:me,children:jsxRuntimeExports.jsx("planeGeometry",{attach:"geometry",args:[1,1]})})}function SceneContextSetter(){const{sceneRef:fe,cameraRef:K}=React$4.useContext(ViewerContext);return fe.current=useThree(me=>me.scene),K.current=useThree(me=>me.camera),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{})}function Root(){const fe=new URLSearchParams(window.location.search),K=fe.get("dummyWindowDimensions"),me=fe.get("dummyWindowTitle")??"localhost:8080",ge=jsxRuntimeExports.jsx("div",{style:{width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column"},children:jsxRuntimeExports.jsx(ViewerRoot,{})});if(K){const[xe,ye]=K.split("x").map(Number);if(!isNaN(xe)&&!isNaN(ye))return jsxRuntimeExports.jsx(MacWindowWrapper,{title:me,width:xe,height:ye,children:ge})}return ge}function ViserLogo(){const[fe,{open:K,close:me}]=useDisclosure(!1);return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Tooltip,{label:`Viser ${VISER_VERSION}`,children:jsxRuntimeExports.jsx(Box,{style:{position:"absolute",bottom:"1em",left:"1em",cursor:"pointer"},component:"a",onClick:K,title:"About Viser",children:jsxRuntimeExports.jsx(Image$1,{src:"./logo.svg",style:{width:"2.5em",height:"auto"}})})}),jsxRuntimeExports.jsx(Modal,{opened:fe,onClose:me,withCloseButton:!1,size:"xl",ta:"center",children:jsxRuntimeExports.jsxs(Box,{children:[jsxRuntimeExports.jsx("p",{children:"Viser is a 3D visualization toolkit developed at UC Berkeley."}),jsxRuntimeExports.jsxs("p",{children:[jsxRuntimeExports.jsx(Anchor,{href:"https://github.com/nerfstudio-project/",target:"_blank",fw:"600",style:{"&:focus":{outline:"none"}},children:"Nerfstudio"}),"  •  ",jsxRuntimeExports.jsx(Anchor,{href:"https://github.com/nerfstudio-project/viser",target:"_blank",fw:"600",style:{"&:focus":{outline:"none"}},children:"GitHub"}),"  •  ",jsxRuntimeExports.jsx(Anchor,{href:"https://viser.studio/main",target:"_blank",fw:"600",style:{"&:focus":{outline:"none"}},children:"Documentation"})]})]})})]})}function MiniControlPanel({darkMode:fe}){const K=React$4.useContext(ViewerContext),[me,ge]=reactExports.useState("Splat"),xe=reactExports.useRef(null),[ye,ve]=reactExports.useState({}),_e="#4f46e5",Ee=useMantineTheme(),be=fe?Ee.colors.dark[0]:Ee.colors.gray[0],Ae=fe?Ee.colors.dark[1]:Ee.colors.gray[7],Se=Te=>{if(xe.current){const Ie=(xe.current.offsetWidth-8)/2,Be=Te==="Splat"?4:Ie+4;ve({left:`${Be}px`,width:`${Ie}px`,backgroundColor:_e,transition:"left 0.2s ease-in-out"})}ge(Te)};reactExports.useEffect(()=>{setTimeout(()=>Se(me),0);const Te=xe.current,Re=new ResizeObserver(()=>{xe.current&&Se(me)});return Te&&Re.observe(Te),()=>{Te&&Re.unobserve(Te)}},[me]);const Ce=Te=>{if(Te===me)return;Se(Te),console.log(`${Te} button clicked`);const Re=K.nodeAttributesFromName.current,De=Te==="Splat",Ie=Te==="Mesh";Re["/splats"]===void 0&&(Re["/splats"]={}),Re["/mesh"]===void 0&&(Re["/mesh"]={}),Re["/splats"]&&(Re["/splats"].overrideVisibility=De,Re["/splats"].poseUpdateState="needsUpdate"),Re["/mesh"]&&(Re["/mesh"].overrideVisibility=Ie,Re["/mesh"].poseUpdateState="needsUpdate")};return jsxRuntimeExports.jsxs(Box,{ref:xe,style:Te=>({position:"absolute",bottom:"1.5em",left:"50%",transform:"translateX(-50%)",zIndex:10,backgroundColor:fe?Te.colors.dark[7]:Te.colors.gray[2],borderRadius:Te.radius.md,boxShadow:Te.shadows.sm,display:"flex",padding:"4px",isolation:"isolate",overflow:"hidden"}),children:[jsxRuntimeExports.jsx(Box,{style:{position:"absolute",top:"4px",bottom:"4px",height:"calc(100% - 8px)",borderRadius:Ee.radius.sm,zIndex:1,...ye}}),jsxRuntimeExports.jsx(Button,{variant:"transparent",onClick:()=>Ce("Splat"),size:"md",radius:"sm",style:{flex:1,zIndex:2,color:me==="Splat"?be:Ae,transition:"color 0.3s ease-in-out"},children:"Splat"}),jsxRuntimeExports.jsx(Button,{variant:"transparent",onClick:()=>Ce("Mesh"),size:"md",radius:"sm",style:{flex:1,zIndex:2,color:me==="Mesh"?be:Ae,transition:"color 0.3s ease-in-out"},children:"Mesh"})]})}enableMapSet();ReactDOM.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(Root,{}));
